window.log=function(){log.history=log.history||[];log.history.push(arguments);if(this.console){arguments.callee=arguments.callee.caller;var g=[].slice.call(arguments);"object"===typeof console.log?log.apply.call(console.log,console,g):console.log.apply(console,g)}};
(function(g){function m(){}for(var q="assert count debug dir dirxml error exception group groupCollapsed groupEnd info log timeStamp profile profileEnd time timeEnd trace warn".split(" "),c;c=q.pop();)g[c]=g[c]||m})(function(){try{return console.log(),window.console}catch(g){return window.console={}}}());
function parseUri(g){var m=parseUri.options;g=m.parser[m.strictMode?"strict":"loose"].exec(g);for(var q={},c=14;c--;)q[m.key[c]]=g[c]||"";q[m.q.name]={};q[m.key[12]].replace(m.q.parser,function(c,e,f){e&&(q[m.q.name][e]=f)});return q}
parseUri.options={strictMode:!1,key:"source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};
function makeUri(g){var m="";g.protocol&&(m+=g.protocol+"://");g.user&&(m+=g.user);g.password&&(m+=":"+g.password);if(g.user||g.password)m+="@";g.host&&(m+=g.host);g.port&&(m+=":"+g.port);g.path&&(m+=g.path);var q=g.queryKey,c=[];for(k in q)if(q.hasOwnProperty(k)){var a=encodeURIComponent(q[k]);k=encodeURIComponent(k);a?c.push(k+"="+a):c.push(k)}0<c.length&&(m+="?"+c.join("&"));g.anchor&&(m+="#"+g.anchor);return m}
(function(g){function m(m){if("string"===typeof m.data){var c=m.handler,a=m.data.toLowerCase().split(" ");m.handler=function(e){if(!(this!==e.target&&(/textarea|select/i.test(e.target.nodeName)||"text"===e.target.type))){var f="keypress"!==e.type&&g.hotkeys.specialKeys[e.which],p=String.fromCharCode(e.which).toLowerCase(),t="",N={};e.altKey&&"alt"!==f&&(t+="alt+");e.ctrlKey&&"ctrl"!==f&&(t+="ctrl+");e.metaKey&&(!e.ctrlKey&&"meta"!==f)&&(t+="meta+");e.shiftKey&&"shift"!==f&&(t+="shift+");f?N[t+f]=
!0:(N[t+p]=!0,N[t+g.hotkeys.shiftNums[p]]=!0,"shift+"===t&&(N[g.hotkeys.shiftNums[p]]=!0));f=0;for(p=a.length;f<p;f++)if(N[a[f]])return c.apply(this,arguments)}}}}g.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",
109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(","0":")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};g.each(["keydown","keyup","keypress"],function(){g.event.special[this]={add:m}})})(jQuery);"use strict";
(function(){if(!jQuery||!jQuery.jstree){var g=!1,m=!1,q=!1;(function(c){c.vakata={};c.vakata.css={get_css:function(c,a,e){c=c.toLowerCase();var p=e.cssRules||e.rules,f=0;do{if(p.length&&f>p.length+5)break;if(p[f].selectorText&&p[f].selectorText.toLowerCase()==c)return!0===a?(e.removeRule&&e.removeRule(f),e.deleteRule&&e.deleteRule(f),!0):p[f]}while(p[++f]);return!1},add_css:function(a,e){if(c.jstree.css.get_css(a,!1,e))return!1;e.insertRule?e.insertRule(a+" { }",0):e.addRule(a,null,0);return c.vakata.css.get_css(a)},
remove_css:function(a,e){return c.vakata.css.get_css(a,!0,e)},add_sheet:function(a){var e=!1,p=!0;if(a.str)return a.title&&(e=c("style[id='"+a.title+"-stylesheet']")[0]),e?p=!1:(e=document.createElement("style"),e.setAttribute("type","text/css"),a.title&&e.setAttribute("id",a.title+"-stylesheet")),e.styleSheet?p?(document.getElementsByTagName("head")[0].appendChild(e),e.styleSheet.cssText=a.str):e.styleSheet.cssText=e.styleSheet.cssText+" "+a.str:(e.appendChild(document.createTextNode(a.str)),document.getElementsByTagName("head")[0].appendChild(e)),
e.sheet||e.styleSheet;if(a.url)if(document.createStyleSheet)try{document.createStyleSheet(a.url)}catch(f){}else return e=document.createElement("link"),e.rel="stylesheet",e.type="text/css",e.media="all",e.href=a.url,document.getElementsByTagName("head")[0].appendChild(e),e.styleSheet}};var a=[],e=-1,f={},p={};c.fn.jstree=function(t){var e="string"==typeof t,p=Array.prototype.slice.call(arguments,1),g=this;if(e){if("_"==t.substring(0,1))return g;this.each(function(){var e=a[c.data(this,"jstree_instance_id")],
e=e&&c.isFunction(e[t])?e[t].apply(e,p):e;if("undefined"!==typeof e&&(0===t.indexOf("is_")||!0!==e&&!1!==e))return g=e,!1})}else this.each(function(){var e=c.data(this,"jstree_instance_id"),N=[],g=t?c.extend({},!0,t):{},y=c(this),m=!1,q=[],N=N.concat(p);y.data("jstree")&&N.push(y.data("jstree"));g=N.length?c.extend.apply(null,[!0,g].concat(N)):g;"undefined"!==typeof e&&a[e]&&a[e].destroy();e=parseInt(a.push({}),10)-1;c.data(this,"jstree_instance_id",e);g.plugins=c.isArray(g.plugins)?g.plugins:c.jstree.defaults.plugins.slice();
g.plugins.unshift("core");g.plugins=g.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");m=c.extend(!0,{},c.jstree.defaults,g);m.plugins=g.plugins;c.each(f,function(a,t){-1===c.inArray(a,m.plugins)?(m[a]=null,delete m[a]):q.push(a)});m.plugins=q;a[e]=new c.jstree._instance(e,c(this).addClass("jstree jstree-"+e),m);c.each(a[e]._get_settings().plugins,function(c,t){a[e].data[t]={}});c.each(a[e]._get_settings().plugins,function(c,t){f[t]&&
f[t].__init.apply(a[e])});setTimeout(function(){a[e]&&a[e].init()},0)});return g};c.jstree={defaults:{plugins:[]},_focused:function(){return a[e]||null},_reference:function(t){if(a[t])return a[t];var e=c(t);!e.length&&"string"===typeof t&&(e=c("#"+t));return!e.length?null:a[e.closest(".jstree").data("jstree_instance_id")]||null},_instance:function(a,e,p){this.data={core:{}};this.get_settings=function(){return c.extend(!0,{},p)};this._get_settings=function(){return p};this.get_index=function(){return a};
this.get_container=function(){return e};this.get_container_ul=function(){return e.children("ul:eq(0)")};this._set_settings=function(a){p=c.extend(!0,{},p,a)}},_fn:{},plugin:function(a,e){e=c.extend({},{__init:c.noop,__destroy:c.noop,_fn:{},defaults:!1},e);f[a]=e;c.jstree.defaults[a]=e.defaults;c.each(e._fn,function(e,p){p.plugin=a;p.old=c.jstree._fn[e];c.jstree._fn[e]=function(){var a,t=p,f=Array.prototype.slice.call(arguments);a=new c.Event("before.jstree");var N=!1;if(!(!0===this.data.core.locked&&
"unlock"!==e&&"is_locked"!==e)){do{if(t&&t.plugin&&-1!==c.inArray(t.plugin,this._get_settings().plugins))break;t=t.old}while(t);if(t){if(0===e.indexOf("_"))a=t.apply(this,f);else{a=this.get_container().triggerHandler(a,{func:e,inst:this,args:f,plugin:t.plugin});if(!1===a)return;"undefined"!==typeof a&&(f=a);a=t.apply(c.extend({},this,{__callback:function(c){this.get_container().triggerHandler(e+".jstree",{inst:this,args:f,rslt:c,rlbk:N})},__rollback:function(){return N=this.get_rollback()},__call_old:function(c){return t.old.apply(this,
c?Array.prototype.slice.call(arguments,1):f)}}),f)}return a}}};c.jstree._fn[e].old=p.old;c.jstree._fn[e].plugin=a})},rollback:function(t){t&&(c.isArray(t)||(t=[t]),c.each(t,function(c,t){a[t.i].set_rollback(t.h,t.d)}))}};c.jstree._fn=c.jstree._instance.prototype={};c(function(){var a=navigator.userAgent.toLowerCase(),e=(a.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],p=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a > ins { height:16px; width:16px; } .jstree a > .jstree-icon { margin-right:3px; } .jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } ";
if(/msie/.test(a)&&6==parseInt(e,10)){g=!0;try{document.execCommand("BackgroundImageCache",!1,!0)}catch(f){}p+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}/msie/.test(a)&&
7==parseInt(e,10)&&(m=!0,p+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } ");!/compatible/.test(a)&&(/mozilla/.test(a)&&1.9>parseFloat(e,10))&&(q=!0,p+=".jstree ins { display:-moz-inline-box; } .jstree li { line-height:12px; } .jstree a { display:-moz-inline-box; } .jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } ");c.vakata.css.add_sheet({str:p,title:"jstree"})});c.jstree.plugin("core",{__init:function(){this.data.core.locked=!1;this.data.core.to_open=
this.get_settings().core.initially_open;this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:!1,animation:500,initially_open:[],initially_load:[],open_parents:!0,notify_plugins:!0,rtl:!1,load_open:!1,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus();this._get_settings().core.rtl&&this.get_container().addClass("jstree-rtl").css("direction","rtl");this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+
this._get_string("loading")+"</a></li></ul>");this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18;this.get_container().delegate("li > ins","click.jstree",c.proxy(function(a){a=c(a.target);this.toggle_node(a)},this)).bind("mousedown.jstree",c.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(c){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){c=window.getSelection();
try{c.removeAllRanges(),c.collapse()}catch(a){}}});this._get_settings().core.notify_plugins&&this.get_container().bind("load_node.jstree",c.proxy(function(a,e){var p=this._get_node(e.rslt.obj),f=this;-1===p&&(p=this.get_container_ul());p.length&&p.find("li").each(function(){var a=c(this);a.data("jstree")&&c.each(a.data("jstree"),function(t,e){f.data[t]&&c.isFunction(f["_"+t+"_notify"])&&f["_"+t+"_notify"].call(f,a,e)})})},this));this._get_settings().core.load_open&&this.get_container().bind("load_node.jstree",
c.proxy(function(a,e){var p=this._get_node(e.rslt.obj),f=this;-1===p&&(p=this.get_container_ul());p.length&&p.find("li.jstree-open:not(:has(ul))").each(function(){f.load_node(this,c.noop,c.noop)})},this));this.__callback();this.load_node(-1,function(){this.loaded();this.reload_nodes()})},destroy:function(){var t,p=this.get_index(),la=this._get_settings(),g=this;c.each(la.plugins,function(a,c){try{f[c].__destroy.apply(g)}catch(t){}});this.__callback();if(this.is_focused())for(t in a)if(a.hasOwnProperty(t)&&
t!=p){a[t].set_focus();break}p===e&&(e=-1);this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")});c(document).unbind(".jstree-"+p).undelegate(".jstree-"+p);a[p]=null;delete a[p]},_core_notify:function(a,c){c.opened&&this.open_node(a,!1,!0)},lock:function(){this.data.core.locked=!0;this.get_container().children("ul").addClass("jstree-locked").css("opacity",
"0.7");this.__callback({})},unlock:function(){this.data.core.locked=!1;this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1");this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var a=this;this.data.core.to_open=[];this.get_container_ul().find("li.jstree-open").each(function(){this.id&&a.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,
"\\.").replace(/\:/g,"\\:"))});this.__callback(a.data.core.to_open)},save_loaded:function(){},reload_nodes:function(a){var e=this,p=!0,f=[],g=[];a||(this.data.core.reopen=!1,this.data.core.refreshing=!0,this.data.core.to_open=c.map(c.makeArray(this.data.core.to_open),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_load=c.map(c.makeArray(this.data.core.to_load),function(a){return"#"+
a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_open.length&&(this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open)));this.data.core.to_load.length&&(c.each(this.data.core.to_load,function(a,t){if("#"==t)return!0;c(t).length?f.push(t):g.push(t)}),f.length&&(this.data.core.to_load=g,c.each(f,function(a,c){e._is_loaded(c)||(e.load_node(c,function(){e.reload_nodes(!0)},function(){e.reload_nodes(!0)}),
p=!1)})));this.data.core.to_open.length&&c.each(this.data.core.to_open,function(a,c){e.open_node(c,!1,!0)});p&&(this.data.core.reopen&&clearTimeout(this.data.core.reopen),this.data.core.reopen=setTimeout(function(){e.__callback({},e)},50),this.data.core.refreshing=!1,this.reopen())},reopen:function(){var a=this;this.data.core.to_open.length&&c.each(this.data.core.to_open,function(c,e){a.open_node(e,!1,!0)});this.__callback({})},refresh:function(a){var c=this;this.save_opened();a||(a=-1);(a=this._get_node(a))||
(a=-1);-1!==a?a.children("UL").remove():this.get_container_ul().empty();this.load_node(a,function(){c.__callback({obj:a});c.reload_nodes()})},loaded:function(){this.__callback()},set_focus:function(){if(!this.is_focused()){var a=c.jstree._focused();a&&a.unset_focus();this.get_container().addClass("jstree-focused");e=this.get_index();this.__callback()}},is_focused:function(){return e==this.get_index()},unset_focus:function(){this.is_focused()&&(this.get_container().removeClass("jstree-focused"),e=
-1);this.__callback()},_get_node:function(a){var e=c(a,this.get_container());if(e.is(".jstree")||-1==a)return-1;e=e.closest("li",this.get_container());return e.length?e:!1},_get_next:function(a,c){a=this._get_node(a);return-1===a?this.get_container().find("> ul > li:first-child"):!a.length?!1:c?0<a.nextAll("li").size()?a.nextAll("li:eq(0)"):!1:a.hasClass("jstree-open")?a.find("li:eq(0)"):0<a.nextAll("li").size()?a.nextAll("li:eq(0)"):a.parentsUntil(".jstree","li").next("li").eq(0)},_get_prev:function(a,
c){a=this._get_node(a);if(-1===a)return this.get_container().find("> ul > li:last-child");if(!a.length)return!1;if(c)return 0<a.prevAll("li").length?a.prevAll("li:eq(0)"):!1;if(a.prev("li").length){for(a=a.prev("li").eq(0);a.hasClass("jstree-open");)a=a.children("ul:eq(0)").children("li:last");return a}var e=a.parentsUntil(".jstree","li:eq(0)");return e.length?e:!1},_get_parent:function(a){a=this._get_node(a);if(-1==a||!a.length)return!1;a=a.parentsUntil(".jstree","li:eq(0)");return a.length?a:-1},
_get_children:function(a){a=this._get_node(a);return-1===a?this.get_container().children("ul:eq(0)").children("li"):!a.length?!1:a.children("ul:eq(0)").children("li")},get_path:function(a,c){var e=[],p=this;a=this._get_node(a);if(-1===a||!a||!a.length)return!1;a.parentsUntil(".jstree","li").each(function(){e.push(c?this.id:p.get_text(this))});e.reverse();e.push(c?a.attr("id"):this.get_text(a));return e},_get_string:function(a){return this._get_settings().core.strings[a]||a},is_open:function(a){return(a=
this._get_node(a))&&-1!==a&&a.hasClass("jstree-open")},is_closed:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-closed")},is_leaf:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-leaf")},correct_state:function(a){a=this._get_node(a);if(!a||-1===a)return!1;a.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:a})},open_node:function(a,c,e){a=this._get_node(a);if(!a.length)return!1;if(!a.hasClass("jstree-closed"))return c&&
c.call(),!1;var p=e||g?0:this._get_settings().core.animation,f=this;this._is_loaded(a)?(this._get_settings().core.open_parents&&a.parentsUntil(".jstree",".jstree-closed").each(function(){f.open_node(this,!1,!0)}),p&&a.children("ul").css("display","none"),a.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading"),p?a.children("ul").stop(!0,!0).slideDown(p,function(){this.style.display="";f.after_open(a)}):f.after_open(a),this.__callback({obj:a}),c&&c.call()):
(a.children("a").addClass("jstree-loading"),this.load_node(a,function(){f.open_node(a,c,e)},c))},after_open:function(a){this.__callback({obj:a})},close_node:function(a,c){a=this._get_node(a);var e=c||g?0:this._get_settings().core.animation,p=this;if(!a.length||!a.hasClass("jstree-open"))return!1;e&&a.children("ul").attr("style","display:block !important");a.removeClass("jstree-open").addClass("jstree-closed");e?a.children("ul").stop(!0,!0).slideUp(e,function(){this.style.display="";p.after_close(a)}):
p.after_close(a);this.__callback({obj:a})},after_close:function(a){this.__callback({obj:a})},toggle_node:function(a){a=this._get_node(a);if(a.hasClass("jstree-closed"))return this.open_node(a);if(a.hasClass("jstree-open"))return this.close_node(a)},open_all:function(a,c,e){a=a?this._get_node(a):-1;if(!a||-1===a)a=this.get_container_ul();e?a=a.find("li.jstree-closed"):(e=a,a=a.is(".jstree-closed")?a.find("li.jstree-closed").addBack():a.find("li.jstree-closed"));var p=this;a.each(function(){var a=this;
p._is_loaded(this)?p.open_node(this,!1,!c):p.open_node(this,function(){p.open_all(a,c,e)},!c)});0===e.find("li.jstree-closed").length&&this.__callback({obj:e})},close_all:function(a,c){var e=this;a=a?this._get_node(a):this.get_container();if(!a||-1===a)a=this.get_container_ul();a.find("li.jstree-open").addBack().each(function(){e.close_node(this,!c)});this.__callback({obj:a})},clean_node:function(a){a=a&&-1!=a?c(a):this.get_container_ul();a=a.is("li")?a.find("li").addBack():a.find("li");a.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed");
a.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:a})},get_rollback:function(){this.__callback();return{i:this.get_index(),h:this.get_container().children("ul").clone(!0),d:this.data}},set_rollback:function(a,c){this.get_container().empty().append(a);this.data=c;this.__callback()},load_node:function(a,c,e){this.__callback({obj:a})},_is_loaded:function(a){return!0},create_node:function(a,e,p,f,g){a=this._get_node(a);e="undefined"===typeof e?
"last":e;var v=c("<li />"),m=this._get_settings().core,q;if(-1!==a&&!a.length)return!1;if(!g&&!this._is_loaded(a))return this.load_node(a,function(){this.create_node(a,e,p,f,!0)}),!1;this.__rollback();"string"===typeof p&&(p={data:p});p||(p={});p.attr&&v.attr(p.attr);p.metadata&&v.data(p.metadata);p.state&&v.addClass("jstree-"+p.state);p.data||(p.data=this._get_string("new_node"));c.isArray(p.data)||(q=p.data,p.data=[],p.data.push(q));c.each(p.data,function(a,e){q=c("<a />");c.isFunction(e)&&(e=e.call(this,
p));if("string"==typeof e)q.attr("href","#")[m.html_titles?"html":"text"](e);else e.attr||(e.attr={}),e.attr.href||(e.attr.href="#"),q.attr(e.attr)[m.html_titles?"html":"text"](e.title),e.language&&q.addClass(e.language);q.prepend("<ins class='jstree-icon'>&#160;</ins>");!e.icon&&p.icon&&(e.icon=p.icon);e.icon&&(-1===e.icon.indexOf("/")?q.children("ins").addClass(e.icon):q.children("ins").css("background","url('"+e.icon+"') center center no-repeat"));v.append(q)});v.prepend("<ins class='jstree-icon'>&#160;</ins>");
-1===a&&(a=this.get_container(),"before"===e&&(e="first"),"after"===e&&(e="last"));switch(e){case "before":a.before(v);q=this._get_parent(a);break;case "after":a.after(v);q=this._get_parent(a);break;case "inside":case "first":a.children("ul").length||a.append("<ul />");a.children("ul").prepend(v);q=a;break;case "last":a.children("ul").length||a.append("<ul />");a.children("ul").append(v);q=a;break;default:a.children("ul").length||a.append("<ul />"),e||(e=0),q=a.children("ul").children("li").eq(e),
q.length?q.before(v):a.children("ul").append(v),q=a}if(-1===q||q.get(0)===this.get_container().get(0))q=-1;this.clean_node(q);this.__callback({obj:v,parent:q});f&&f.call(this,v);return v},get_text:function(a){a=this._get_node(a);if(!a.length)return!1;var c=this._get_settings().core.html_titles;a=a.children("a:eq(0)");if(c)return a=a.clone(),a.children("INS").remove(),a.html();a=a.contents().filter(function(){return 3==this.nodeType})[0];return a.nodeValue},set_text:function(a,c){a=this._get_node(a);
if(!a.length)return!1;a=a.children("a:eq(0)");if(this._get_settings().core.html_titles){var e=a.children("INS").clone();a.html(c).prepend(e);this.__callback({obj:a,name:c});return!0}a=a.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:a,name:c});return a.nodeValue=c},rename_node:function(a,c){a=this._get_node(a);this.__rollback();a&&(a.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments)))&&this.__callback({obj:a,name:c})},delete_node:function(a){a=
this._get_node(a);if(!a.length)return!1;this.__rollback();var e=this._get_parent(a),p=c([]),f=this;a.each(function(){p=p.add(f._get_prev(this))});a=a.detach();-1!==e&&0===e.find("> ul > li").length&&e.removeClass("jstree-open jstree-closed").addClass("jstree-leaf");this.clean_node(e);this.__callback({obj:a,prev:p,parent:e});return a},prepare_move:function(a,e,f,g,m){var v={};v.ot=c.jstree._reference(a)||this;v.o=v.ot._get_node(a);v.r=-1===e?-1:this._get_node(e);v.p="undefined"===typeof f||!1===f?
"last":f;if(m||!p.o||!(p.o[0]===v.o[0]&&p.r[0]===v.r[0]&&p.p===v.p)){v.ot=c.jstree._reference(v.o)||this;v.rt=c.jstree._reference(v.r)||this;if(-1===v.r||!v.r)switch(v.cr=-1,v.p){case "first":case "before":case "inside":v.cp=0;break;case "after":case "last":v.cp=v.rt.get_container().find(" > ul > li").length;break;default:v.cp=v.p}else{if(!/^(before|after)$/.test(v.p)&&!this._is_loaded(v.r))return this.load_node(v.r,function(){this.prepare_move(a,e,f,g,!0)});switch(v.p){case "before":v.cp=v.r.index();
v.cr=v.rt._get_parent(v.r);break;case "after":v.cp=v.r.index()+1;v.cr=v.rt._get_parent(v.r);break;case "inside":case "first":v.cp=0;v.cr=v.r;break;case "last":v.cp=v.r.find(" > ul > li").length;v.cr=v.r;break;default:v.cp=v.p,v.cr=v.r}}v.np=-1==v.cr?v.rt.get_container():v.cr;v.op=v.ot._get_parent(v.o);v.cop=v.o.index();-1===v.op&&(v.op=v.ot?v.ot.get_container():this.get_container());!/^(before|after)$/.test(v.p)&&(v.op&&v.np&&v.op[0]===v.np[0]&&v.o.index()<v.cp)&&v.cp++;v.or=v.np.find(" > ul > li:nth-child("+
(v.cp+1)+")");p=v}this.__callback(p);g&&g.call(this,p)},check_move:function(){var a=p,c=!0,e=-1===a.r?this.get_container():a.r;if(!a||!a.o||a.or[0]===a.o[0])return!1;if(!a.cy){if(a.op&&a.np&&a.op[0]===a.np[0]&&a.cp-1===a.o.index())return!1;a.o.each(function(){if(-1!==e.parentsUntil(".jstree","li").addBack().index(this))return c=!1})}return c},move_node:function(a,e,f,g,m,v){if(!m)return this.prepare_move(a,e,f,function(a){this.move_node(a,!1,!1,g,!0,v)});g&&(p.cy=!0);if(!v&&!this.check_move())return!1;
this.__rollback();e=!1;g?(e=a.o.clone(!0),e.find("*[id]").addBack().each(function(){this.id&&(this.id="copy_"+this.id)})):e=a.o;a.or.length?a.or.before(e):(a.np.children("ul").length||c("<ul />").appendTo(a.np),a.np.children("ul:eq(0)").append(e));try{a.ot.clean_node(a.op),a.rt.clean_node(a.np),a.op.find("> ul > li").length||a.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(q){}g&&(p.cy=!0,p.oc=e);this.__callback(p);return p},_get_move:function(){return p}}})})(jQuery);
(function(c){var a,e,f;c(function(){/msie/.test(navigator.userAgent.toLowerCase())?(e=c('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),f=c('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),a=e.width()-f.width(),e.add(f).remove()):(e=c("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1E3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",
height:200}),a=100-e.width(),e.parent().remove())});c.jstree.plugin("ui",{__init:function(){this.data.ui.selected=c();this.data.ui.last_selected=!1;this.data.ui.hovered=null;this.data.ui.to_select=this.get_settings().ui.initially_select;this.get_container().delegate("a","click.jstree",c.proxy(function(a){a.preventDefault();a.currentTarget.blur();c(a.currentTarget).hasClass("jstree-loading")||this.select_node(a.currentTarget,!0,a)},this)).delegate("a","mouseenter.jstree",c.proxy(function(a){c(a.currentTarget).hasClass("jstree-loading")||
this.hover_node(a.target)},this)).delegate("a","mouseleave.jstree",c.proxy(function(a){c(a.currentTarget).hasClass("jstree-loading")||this.dehover_node(a.target)},this)).bind("reopen.jstree",c.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",c.proxy(function(){this.dehover_node();this.save_selected()},this)).bind("set_rollback.jstree",c.proxy(function(){this.reselect()},this)).bind("close_node.jstree",c.proxy(function(a,e){var f=this._get_settings().ui,g=this._get_node(e.rslt.obj),
m=g&&g.length?g.children("ul").find("a.jstree-clicked"):c(),q=this;!1!==f.selected_parent_close&&m.length&&m.each(function(){q.deselect_node(this);"select_parent"===f.selected_parent_close&&q.select_node(g)})},this)).bind("delete_node.jstree",c.proxy(function(a,c){var e=this._get_settings().ui.select_prev_on_delete,f=this._get_node(c.rslt.obj),f=f&&f.length?f.find("a.jstree-clicked"):[],g=this;f.each(function(){g.deselect_node(this)});e&&f.length&&c.rslt.prev.each(function(){if(this.parentNode)return g.select_node(this),
!1})},this)).bind("move_node.jstree",c.proxy(function(a,c){c.rslt.cy&&c.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:!0,select_prev_on_delete:!0,disable_selecting_children:!1,initially_select:[]},_fn:{_get_node:function(a,e){if("undefined"===typeof a||null===a)return e?this.data.ui.selected:this.data.ui.last_selected;var f=c(a,
this.get_container());if(f.is(".jstree")||-1==a)return-1;f=f.closest("li",this.get_container());return f.length?f:!1},_ui_notify:function(a,c){c.selected&&this.select_node(a,!1)},save_selected:function(){var a=this;this.data.ui.to_select=[];this.data.ui.selected.each(function(){this.id&&a.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))});this.__callback(this.data.ui.to_select)},
reselect:function(){var a=this,e=this.data.ui.to_select,e=c.map(c.makeArray(e),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});c.each(e,function(c,e){e&&"#"!==e&&a.select_node(e)});this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode});this.__callback()},refresh:function(a){this.save_selected();return this.__call_old()},hover_node:function(a){a=this._get_node(a);
if(!a.length)return!1;a.hasClass("jstree-hovered")||this.dehover_node();this.data.ui.hovered=a.children("a").addClass("jstree-hovered").parent();this._fix_scroll(a);this.__callback({obj:a})},dehover_node:function(){var a=this.data.ui.hovered,c;if(!a||!a.length)return!1;c=a.children("a").removeClass("jstree-hovered").parent();this.data.ui.hovered[0]===c[0]&&(this.data.ui.hovered=null);this.__callback({obj:a})},select_node:function(a,c,e){a=this._get_node(a);if(-1==a||!a||!a.length)return!1;var f=this._get_settings().ui,
g="on"==f.select_multiple_modifier||!1!==f.select_multiple_modifier&&e&&e[f.select_multiple_modifier+"Key"],m=!1!==f.select_range_modifier&&e&&e[f.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==a[0]&&this.data.ui.last_selected.parent()[0]===a.parent()[0],v=this.is_selected(a),q=!0,P=this;if(c){if(f.disable_selecting_children&&g&&(a.parentsUntil(".jstree","li").children("a.jstree-clicked").length||a.children("ul").find("a.jstree-clicked:eq(0)").length))return!1;
q=!1;switch(!0){case m:this.data.ui.last_selected.addClass("jstree-last-selected");a=a[a.index()<this.data.ui.last_selected.index()?"nextUntil":"prevUntil"](".jstree-last-selected").addBack();-1==f.select_limit||a.length<f.select_limit?(this.data.ui.last_selected.removeClass("jstree-last-selected"),this.data.ui.selected.each(function(){this!==P.data.ui.last_selected[0]&&P.deselect_node(this)}),v=!1,q=!0):q=!1;break;case v&&!g:this.deselect_all();v=!1;q=!0;break;case !v&&!g:if(-1==f.select_limit||
0<f.select_limit)this.deselect_all(),q=!0;break;case v&&g:this.deselect_node(a);break;case !v&&g:if(-1==f.select_limit||this.data.ui.selected.length+1<=f.select_limit)q=!0}}q&&!v&&(m||(this.data.ui.last_selected=a),a.children("a").addClass("jstree-clicked"),f.selected_parent_open&&a.parents(".jstree-closed").each(function(){P.open_node(this,!1,!0)}),this.data.ui.selected=this.data.ui.selected.add(a),this._fix_scroll(a.eq(0)),this.__callback({obj:a,e:e}))},_fix_scroll:function(c){var e=this.get_container()[0];
if(e.scrollHeight>e.offsetHeight&&(c=this._get_node(c))&&!(-1===c||!c.length||!c.is(":visible")))if(c=c.offset().top-this.get_container().offset().top,0>c&&(e.scrollTop=e.scrollTop+c-1),c+this.data.core.li_height+(e.scrollWidth>e.offsetWidth?a:0)>e.offsetHeight)e.scrollTop+=c-e.offsetHeight+this.data.core.li_height+1+(e.scrollWidth>e.offsetWidth?a:0)},deselect_node:function(a){a=this._get_node(a);if(!a.length)return!1;this.is_selected(a)&&(a.children("a").removeClass("jstree-clicked"),this.data.ui.selected=
this.data.ui.selected.not(a),this.data.ui.last_selected.get(0)===a.get(0)&&(this.data.ui.last_selected=this.data.ui.selected.eq(0)),this.__callback({obj:a}))},toggle_select:function(a){a=this._get_node(a);if(!a.length)return!1;this.is_selected(a)?this.deselect_node(a):this.select_node(a)},is_selected:function(a){return 0<=this.data.ui.selected.index(this._get_node(a))},get_selected:function(a){return a?c(a).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(a){a=a?c(a).find("a.jstree-clicked").parent():
this.get_container().find("a.jstree-clicked").parent();a.children("a.jstree-clicked").removeClass("jstree-clicked");this.data.ui.selected=c([]);this.data.ui.last_selected=!1;this.__callback({obj:a})}}});c.jstree.defaults.plugins.push("ui")})(jQuery);(function(c){c.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",c.proxy(function(a,c){if(this._get_settings().crrm.move.open_onmove){var f=this;c.rslt.np.parentsUntil(".jstree").addBack().filter(".jstree-closed").each(function(){f.open_node(this,
!1,!0)})}},this))},defaults:{input_width_limit:200,move:{always_copy:!1,open_onmove:!0,default_position:"last",check_move:function(a){return!0}}},_fn:{_show_input:function(a,e){a=this._get_node(a);var f=this._get_settings().core.rtl,p=this._get_settings().crrm.input_width_limit,t=a.children("ins").width(),g=a.find("> a:visible > ins").width()*a.find("> a:visible > ins").length,m=this.get_text(a),q=c("<div />",{css:{position:"absolute",top:"-200px",left:f?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),
B=a.css("position","relative").append(c("<input />",{value:m,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:f?"auto":t+g+4+"px",right:f?t+g+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:c.proxy(function(){var c=a.children(".jstree-rename-input"),f=c.val();""===f&&(f=m);q.remove();c.remove();this.set_text(a,m);this.rename_node(a,f);e.call(this,a,f,m);a.css("position","")},
this),keyup:function(a){a=a.keyCode||a.which;27==a?(this.value=m,this.blur()):13==a?this.blur():B.width(Math.min(q.text("pW"+this.value).width(),p))},keypress:function(a){if(13==(a.keyCode||a.which))return!1}})).children(".jstree-rename-input");this.set_text(a,"");q.css({fontFamily:B.css("fontFamily")||"",fontSize:B.css("fontSize")||"",fontWeight:B.css("fontWeight")||"",fontStyle:B.css("fontStyle")||"",fontStretch:B.css("fontStretch")||"",fontVariant:B.css("fontVariant")||"",letterSpacing:B.css("letterSpacing")||
"",wordSpacing:B.css("wordSpacing")||""});B.width(Math.min(q.text("pW"+B[0].value).width(),p))[0].select()},rename:function(a){a=this._get_node(a);this.__rollback();var c=this.__callback;this._show_input(a,function(a,p,t){c.call(this,{obj:a,new_name:p,old_name:t})})},create:function(a,e,f,p,t){var g=this;(a=this._get_node(a))||(a=-1);this.__rollback();return this.create_node(a,e,f,function(a){var e=this._get_parent(a),f=c(a).index();p&&p.call(this,a);e.length&&e.hasClass("jstree-closed")&&this.open_node(e,
!1,!0);t?g.__callback({obj:a,name:this.get_text(a),parent:e,position:f}):this._show_input(a,function(a,c,p){g.__callback({obj:a,name:c,parent:e,position:f})})})},remove:function(a){a=this._get_node(a,!0);var c=this._get_parent(a),f=this._get_prev(a);this.__rollback();a=this.delete_node(a);!1!==a&&this.__callback({obj:a,prev:f,parent:c})},check_move:function(){return!this.__call_old()||!this._get_settings().crrm.move.check_move.call(this,this._get_move())?!1:!0},move_node:function(a,c,f,p,t,g){var m=
this._get_settings().crrm.move;if(!t)return"undefined"===typeof f&&(f=m.default_position),"inside"===f&&!m.default_position.match(/^(before|after)$/)&&(f=m.default_position),this.__call_old(!0,a,c,f,p,!1,g);if(!0===m.always_copy||"multitree"===m.always_copy&&a.rt.get_index()!==a.ot.get_index())p=!0;this.__call_old(!0,a,c,f,p,!0,g)},cut:function(a){a=this._get_node(a,!0);if(!a||!a.length)return!1;this.data.crrm.cp_nodes=!1;this.data.crrm.ct_nodes=a;this.__callback({obj:a})},copy:function(a){a=this._get_node(a,
!0);if(!a||!a.length)return!1;this.data.crrm.ct_nodes=!1;this.data.crrm.cp_nodes=a;this.__callback({obj:a})},paste:function(a){a=this._get_node(a);if(!a||!a.length)return!1;var c=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:this.data.crrm.cp_nodes;if(!this.data.crrm.ct_nodes&&!this.data.crrm.cp_nodes)return!1;this.data.crrm.ct_nodes&&(this.move_node(this.data.crrm.ct_nodes,a),this.data.crrm.ct_nodes=!1);this.data.crrm.cp_nodes&&this.move_node(this.data.crrm.cp_nodes,a,!1,!0);this.__callback({obj:a,
nodes:c})}}})})(jQuery);(function(c){var a=[];c.jstree._themes=!1;c.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",c.proxy(function(){var a=this._get_settings().themes;this.data.themes.dots=a.dots;this.data.themes.icons=a.icons;this.set_theme(a.theme,a.url)},this)).bind("loaded.jstree",c.proxy(function(){this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons()},this))},defaults:{theme:"default",url:!1,dots:!0,
icons:!0},_fn:{set_theme:function(e,f){if(!e)return!1;f||(f=c.jstree._themes+e+"/style.css");-1==c.inArray(f,a)&&(c.vakata.css.add_sheet({url:f}),a.push(f));this.data.themes.theme!=e&&(this.get_container().removeClass("jstree-"+this.data.themes.theme),this.data.themes.theme=e);this.get_container().addClass("jstree-"+e);this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons();this.__callback()},get_theme:function(){return this.data.themes.theme},
show_dots:function(){this.data.themes.dots=!0;this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=!1;this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons=!0;this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=!1;this.get_container().children("ul").addClass("jstree-no-icons")},
toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()}}});c(function(){!1===c.jstree._themes&&c("script").each(function(){if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/))return c.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/",!1});!1===c.jstree._themes&&(c.jstree._themes="themes/")});c.jstree.defaults.plugins.push("themes")})(jQuery);(function(c){var a=[];c.jstree.plugin("hotkeys",{__init:function(){if("undefined"===
typeof c.hotkeys)throw"jsTree hotkeys: jQuery hotkeys plugin not included.";if(!this.data.ui)throw"jsTree hotkeys: jsTree UI plugin not included.";c.each(this._get_settings().hotkeys,function(e,f){!1!==f&&-1==c.inArray(e,a)&&(c(document).bind("keydown",e,function(a){a:{var f=c.jstree._focused(),g;if(f&&(f.data&&f.data.hotkeys&&f.data.hotkeys.enabled)&&(g=f._get_settings().hotkeys[e])){a=g.call(f,a);break a}a=void 0}return a}),a.push(e))});this.get_container().bind("lock.jstree",c.proxy(function(){this.data.hotkeys.enabled&&
(this.data.hotkeys.enabled=!1,this.data.hotkeys.revert=!0)},this)).bind("unlock.jstree",c.proxy(function(){this.data.hotkeys.revert&&(this.data.hotkeys.enabled=!0)},this));this.enable_hotkeys()},defaults:{up:function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"ctrl+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||
this.data.ui.last_selected||-1));return!1},down:function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"ctrl+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},left:function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):
this.hover_node(this._get_prev(a)));return!1},"ctrl+left":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},"shift+left":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},right:function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?
this.open_node(a):this.hover_node(this._get_next(a)));return!1},"ctrl+right":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},"shift+right":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},space:function(){this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").click();
return!1},"ctrl+space":function(a){a.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(a);return!1},"shift+space":function(a){a.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(a);return!1},f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled=!0},disable_hotkeys:function(){this.data.hotkeys.enabled=
!1}}})})(jQuery);(function(c){c.jstree.plugin("json_data",{__init:function(){this._get_settings().json_data.progressive_unload&&this.get_container().bind("after_close.jstree",function(a,c){c.rslt.obj.children("ul").remove()})},defaults:{data:!1,ajax:!1,correct_state:!0,progressive_render:!1,progressive_unload:!1},_fn:{load_node:function(a,c,f){var p=this;this.load_node_json(a,function(){p.__callback({obj:p._get_node(a)});c.call(this)},f)},_is_loaded:function(a){var e=this._get_settings().json_data;
a=this._get_node(a);return-1==a||!a||!e.ajax&&!e.progressive_render&&!c.isFunction(e.data)||a.is(".jstree-open, .jstree-leaf")||0<a.children("ul").children("li").length},refresh:function(a){a=this._get_node(a);var e=this._get_settings().json_data;a&&(-1!==a&&e.progressive_unload&&(c.isFunction(e.data)||e.ajax))&&a.removeData("jstree_children");return this.__call_old()},load_node_json:function(a,e,f){var p=this.get_settings().json_data,t,g=function(){};t=function(){};if((a=this._get_node(a))&&-1!==
a&&(p.progressive_render||p.progressive_unload)&&!a.is(".jstree-open, .jstree-leaf")&&0===a.children("ul").children("li").length&&a.data("jstree_children")){if(t=this._parse_json(a.data("jstree_children"),a))a.append(t),p.progressive_unload||a.removeData("jstree_children");this.clean_node(a);e&&e.call(this)}else{if(a&&-1!==a){if(a.data("jstree_is_loading"))return;a.data("jstree_is_loading",!0)}switch(!0){case !p.data&&!p.ajax:throw"Neither data nor ajax settings supplied.";case c.isFunction(p.data):p.data.call(this,
a,c.proxy(function(c){(c=this._parse_json(c,a))?(-1===a||!a?this.get_container().children("ul").empty().append(c.children()):(a.append(c).children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading")),this.clean_node(a),e&&e.call(this)):(-1===a||!a?p.correct_state&&this.get_container().children("ul").empty():(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),p.correct_state&&this.correct_state(a)),f&&f.call(this))},this));
break;case !!p.data&&!p.ajax||!!p.data&&!!p.ajax&&(!a||-1===a):if(!a||-1==a)(t=this._parse_json(p.data,a))?(this.get_container().children("ul").empty().append(t.children()),this.clean_node()):p.correct_state&&this.get_container().children("ul").empty();e&&e.call(this);break;case !p.data&&!!p.ajax||!!p.data&&!!p.ajax&&a&&-1!==a:g=function(c,e,t){var g=this.get_settings().json_data.ajax.error;g&&g.call(this,c,e,t);-1!=a&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),
"success"===e&&p.correct_state&&this.correct_state(a)):"success"===e&&p.correct_state&&this.get_container().children("ul").empty();f&&f.call(this)},t=function(f,t,m){var v=this.get_settings().json_data.ajax.success;v&&(f=v.call(this,f,t,m)||f);if(""===f||f&&f.toString&&""===f.toString().replace(/^[\s\n]+$/,"")||!c.isArray(f)&&!c.isPlainObject(f))return g.call(this,m,t,"");(f=this._parse_json(f,a))?(-1===a||!a?this.get_container().children("ul").empty().append(f.children()):(a.append(f).children("a.jstree-loading").removeClass("jstree-loading"),
a.removeData("jstree_is_loading")),this.clean_node(a),e&&e.call(this)):-1===a||!a?p.correct_state&&(this.get_container().children("ul").empty(),e&&e.call(this)):(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),p.correct_state&&(this.correct_state(a),e&&e.call(this)))},p.ajax.context=this,p.ajax.error=g,p.ajax.success=t,p.ajax.dataType||(p.ajax.dataType="json"),c.isFunction(p.ajax.url)&&(p.ajax.url=p.ajax.url.call(this,a)),c.isFunction(p.ajax.data)&&(p.ajax.data=
p.ajax.data.call(this,a)),c.ajax(p.ajax)}}},_parse_json:function(a,e,f){var p=!1,t=this._get_settings(),g=t.json_data,m=t.core.html_titles,q;if(!a)return p;g.progressive_unload&&(e&&-1!==e)&&e.data("jstree_children",p);if(c.isArray(a)){p=c("<ul>");if(!a.length)return!1;t=0;for(g=a.length;t<g;t++)q=this._parse_json(a[t],e,!0),q.length&&(p=p.append(q));p=p.children()}else{"string"==typeof a&&(a={data:a});if(!a.data&&""!==a.data)return p;p=c("<li />");a.attr&&p.attr(a.attr);a.metadata&&p.data(a.metadata);
a.state&&p.addClass("jstree-"+a.state);c.isArray(a.data)||(q=a.data,a.data=[],a.data.push(q));c.each(a.data,function(e,f){q=c("<a />");c.isFunction(f)&&(f=f.call(this,a));if("string"==typeof f)q.attr("href","#")[m?"html":"text"](f);else f.attr||(f.attr={}),f.attr.href||(f.attr.href="#"),q.attr(f.attr)[m?"html":"text"](f.title),f.language&&q.addClass(f.language);q.prepend("<ins class='jstree-icon'>&#160;</ins>");!f.icon&&a.icon&&(f.icon=a.icon);f.icon&&(-1===f.icon.indexOf("/")?q.children("ins").addClass(f.icon):
q.children("ins").css("background","url('"+f.icon+"') center center no-repeat"));p.append(q)});p.prepend("<ins class='jstree-icon'>&#160;</ins>");a.children&&(g.progressive_render&&"open"!==a.state?p.addClass("jstree-closed").data("jstree_children",a.children):(g.progressive_unload&&p.data("jstree_children",a.children),c.isArray(a.children)&&a.children.length&&(q=this._parse_json(a.children,e,!0),q.length&&(e=c("<ul />"),e.append(q),p.append(e)))))}f||(f=c("<ul />"),f.append(p),p=f);return p},get_json:function(a,
e,f,p){var t=[],g=this._get_settings(),m=this,q,B,v,Q,P,U;a=this._get_node(a);if(!a||-1===a)a=this.get_container().find("> ul > li");e=c.isArray(e)?e:["id","class"];!p&&this.data.types&&e.push(g.types.type_attr);f=c.isArray(f)?f:[];a.each(function(){v=c(this);q={data:[]};e.length&&(q.attr={});c.each(e,function(a,c){(B=v.attr(c))&&(B.length&&B.replace(/jstree[^ ]*/ig,"").length)&&(q.attr[c]=(" "+B).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))});v.hasClass("jstree-open")&&
(q.state="open");v.hasClass("jstree-closed")&&(q.state="closed");v.data()&&(q.metadata=v.data());Q=v.children("a");Q.each(function(){P=c(this);f.length||-1!==c.inArray("languages",g.plugins)||P.children("ins").get(0).style.backgroundImage.length||P.children("ins").get(0).className&&P.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").length?(U=!1,-1!==c.inArray("languages",g.plugins)&&(c.isArray(g.languages)&&g.languages.length)&&c.each(g.languages,function(a,c){if(P.hasClass(c))return U=
c,!1}),B={attr:{},title:m.get_text(P,U)},c.each(f,function(a,c){B.attr[c]=(" "+(P.attr(c)||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")}),-1!==c.inArray("languages",g.plugins)&&(c.isArray(g.languages)&&g.languages.length)&&c.each(g.languages,function(a,c){if(P.hasClass(c))return B.language=c,!0}),P.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(B.icon=P.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,
"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")),P.children("ins").get(0).style.backgroundImage.length&&(B.icon=P.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")",""))):B=m.get_text(P);1<Q.length?q.data.push(B):q.data=B});v=v.find("> ul > li");v.length&&(q.children=m.get_json(v,e,f,!0));t.push(q)});return t}}})})(jQuery);(function(c){var a=!1;c.jstree.plugin("languages",{__init:function(){this._load_css()},defaults:[],_fn:{set_lang:function(e){var f=this._get_settings().languages,
p=!1,t=".jstree-"+this.get_index()+" a";if(!c.isArray(f)||0===f.length)return!1;if(-1==c.inArray(e,f))if(f[e])e=f[e];else return!1;if(e==this.data.languages.current_language)return!0;p=c.vakata.css.get_css(t+"."+this.data.languages.current_language,!1,a);!1!==p&&(p.style.display="none");p=c.vakata.css.get_css(t+"."+e,!1,a);!1!==p&&(p.style.display="");this.data.languages.current_language=e;this.__callback(e);return!0},get_lang:function(){return this.data.languages.current_language},_get_string:function(a,
f){var p=this._get_settings().languages,t=this._get_settings().core.strings;c.isArray(p)&&p.length&&(f=f&&-1!=c.inArray(f,p)?f:this.data.languages.current_language);return t[f]&&t[f][a]?t[f][a]:t[a]?t[a]:a},get_text:function(a,f){a=this._get_node(a)||this.data.ui.last_selected;if(!a.size())return!1;var p=this._get_settings().languages,t=this._get_settings().core.html_titles;c.isArray(p)&&p.length?(f=f&&-1!=c.inArray(f,p)?f:this.data.languages.current_language,a=a.children("a."+f)):a=a.children("a:eq(0)");
if(t)return a=a.clone(),a.children("INS").remove(),a.html();a=a.contents().filter(function(){return 3==this.nodeType})[0];return a.nodeValue},set_text:function(a,f,p){a=this._get_node(a)||this.data.ui.last_selected;if(!a.size())return!1;var t=this._get_settings().languages,g=this._get_settings().core.html_titles;c.isArray(t)&&t.length?(p=p&&-1!=c.inArray(p,t)?p:this.data.languages.current_language,a=a.children("a."+p)):a=a.children("a:eq(0)");if(g)return t=a.children("INS").clone(),a.html(f).prepend(t),
this.__callback({obj:a,name:f,lang:p}),!0;a=a.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:a,name:f,lang:p});return a.nodeValue=f},_load_css:function(){var e=this._get_settings().languages,f="/* languages css */",p=".jstree-"+this.get_index()+" a",t;if(c.isArray(e)&&e.length){this.data.languages.current_language=e[0];for(t=0;t<e.length;t++)f+=p+"."+e[t]+" {",e[t]!=this.data.languages.current_language&&(f+=" display:none; "),f+=" } ";a=c.vakata.css.add_sheet({str:f,
title:"jstree-languages"})}},create_node:function(a,f,p,t){return this.__call_old(!0,a,f,p,function(a){var e=this._get_settings().languages,f=a.children("a"),p;if(c.isArray(e)&&e.length){for(p=0;p<e.length;p++)f.is("."+e[p])||a.append(f.eq(0).clone().removeClass(e.join(" ")).addClass(e[p]));f.not("."+e.join(", .")).remove()}t&&t.call(this,a)})}}})})(jQuery);(function(c){c.jstree.plugin("cookies",{__init:function(){if("undefined"===typeof c.cookie)throw"jsTree cookie: jQuery cookie plugin not included.";
var a=this._get_settings().cookies,e;if(a.save_loaded&&(e=c.cookie(a.save_loaded))&&e.length)this.data.core.to_load=e.split(",");if(a.save_opened&&(e=c.cookie(a.save_opened))&&e.length)this.data.core.to_open=e.split(",");if(a.save_selected&&(e=c.cookie(a.save_selected))&&e.length&&this.data.ui)this.data.ui.to_select=e.split(",");this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",c.proxy(function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",
c.proxy(function(a){this._get_settings().cookies.auto_save&&this.save_cookie((a.handleObj.namespace+a.handleObj.type).replace("jstree",""))},this))},this))},defaults:{save_loaded:"jstree_load",save_opened:"jstree_open",save_selected:"jstree_select",auto_save:!0,cookie_options:{}},_fn:{save_cookie:function(a){if(!this.data.core.refreshing){var e=this._get_settings().cookies;if(a)switch(a){case "open_node":case "close_node":e.save_opened&&(this.save_opened(),c.cookie(e.save_opened,this.data.core.to_open.join(","),
e.cookie_options));e.save_loaded&&(this.save_loaded(),c.cookie(e.save_loaded,this.data.core.to_load.join(","),e.cookie_options));break;case "select_node":case "deselect_node":e.save_selected&&this.data.ui&&(this.save_selected(),c.cookie(e.save_selected,this.data.ui.to_select.join(","),e.cookie_options))}else e.save_loaded&&(this.save_loaded(),c.cookie(e.save_loaded,this.data.core.to_load.join(","),e.cookie_options)),e.save_opened&&(this.save_opened(),c.cookie(e.save_opened,this.data.core.to_open.join(","),
e.cookie_options)),e.save_selected&&this.data.ui&&(this.save_selected(),c.cookie(e.save_selected,this.data.ui.to_select.join(","),e.cookie_options))}}}})})(jQuery);(function(c){c.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",c.proxy(function(a,c){var f=this._get_node(c.rslt.obj),f=-1===f?this.get_container().children("ul"):f.children("ul");this.sort(f)},this)).bind("rename_node.jstree create_node.jstree create.jstree",c.proxy(function(a,c){this.sort(c.rslt.obj.parent())},
this)).bind("move_node.jstree",c.proxy(function(a,c){var f=-1==c.rslt.np?this.get_container():c.rslt.np;this.sort(f.children("ul"))},this))},defaults:function(a,c){return this.get_text(a)>this.get_text(c)?1:-1},_fn:{sort:function(a){var e=this._get_settings().sort,f=this;a.append(c.makeArray(a.children("li")).sort(c.proxy(e,f)));a.find("> li > ul").each(function(){f.sort(c(this))});this.clean_node(a)}}})})(jQuery);(function(c){var a=!1,e=!1,f=!1,p=!1,t=!1,g=!1,m=!1,q=!1,B=!1;c.vakata.dnd={is_down:!1,
is_drag:!1,helper:!1,scroll_spd:10,init_x:0,init_y:0,threshold:5,helper_left:5,helper_top:10,user_data:{},drag_start:function(a,e,f){c.vakata.dnd.is_drag&&c.vakata.drag_stop({});try{a.currentTarget.unselectable="on",a.currentTarget.onselectstart=function(){return!1},a.currentTarget.style&&(a.currentTarget.style.MozUserSelect="none")}catch(p){}c.vakata.dnd.init_x=a.pageX;c.vakata.dnd.init_y=a.pageY;c.vakata.dnd.user_data=e;c.vakata.dnd.is_down=!0;c.vakata.dnd.helper=c("<div id='vakata-dragged' />").html(f);
c(document).bind("mousemove",c.vakata.dnd.drag);c(document).bind("mouseup",c.vakata.dnd.drag_stop);return!1},drag:function(a){if(c.vakata.dnd.is_down){if(!c.vakata.dnd.is_drag)if(5<Math.abs(a.pageX-c.vakata.dnd.init_x)||5<Math.abs(a.pageY-c.vakata.dnd.init_y))c.vakata.dnd.helper.appendTo("body"),c.vakata.dnd.is_drag=!0,c(document).triggerHandler("drag_start.vakata",{event:a,data:c.vakata.dnd.user_data});else return;if("mousemove"===a.type){var e=c(document),f=e.scrollTop(),e=e.scrollLeft();20>a.pageY-
f?(g&&"down"===m&&(clearInterval(g),g=!1),g||(m="up",g=setInterval(function(){c(document).scrollTop(c(document).scrollTop()-c.vakata.dnd.scroll_spd)},150))):g&&"up"===m&&(clearInterval(g),g=!1);20>c(window).height()-(a.pageY-f)?(g&&"up"===m&&(clearInterval(g),g=!1),g||(m="down",g=setInterval(function(){c(document).scrollTop(c(document).scrollTop()+c.vakata.dnd.scroll_spd)},150))):g&&"down"===m&&(clearInterval(g),g=!1);20>a.pageX-e?(t&&"right"===q&&(clearInterval(t),t=!1),t||(q="left",t=setInterval(function(){c(document).scrollLeft(c(document).scrollLeft()-
c.vakata.dnd.scroll_spd)},150))):t&&"left"===q&&(clearInterval(t),t=!1);20>c(window).width()-(a.pageX-e)?(t&&"left"===q&&(clearInterval(t),t=!1),t||(q="right",t=setInterval(function(){c(document).scrollLeft(c(document).scrollLeft()+c.vakata.dnd.scroll_spd)},150))):t&&"right"===q&&(clearInterval(t),t=!1)}c.vakata.dnd.helper.css({left:a.pageX+c.vakata.dnd.helper_left+"px",top:a.pageY+c.vakata.dnd.helper_top+"px"});c(document).triggerHandler("drag.vakata",{event:a,data:c.vakata.dnd.user_data})}},drag_stop:function(a){t&&
clearInterval(t);g&&clearInterval(g);c(document).unbind("mousemove",c.vakata.dnd.drag);c(document).unbind("mouseup",c.vakata.dnd.drag_stop);c(document).triggerHandler("drag_stop.vakata",{event:a,data:c.vakata.dnd.user_data});c.vakata.dnd.helper.remove();c.vakata.dnd.init_x=0;c.vakata.dnd.init_y=0;c.vakata.dnd.user_data={};c.vakata.dnd.is_down=!1;c.vakata.dnd.is_drag=!1}};c(function(){c.vakata.css.add_sheet({str:"#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } ",
title:"vakata"})});c.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:!1,after:!1,inside:!1,before:!1,off:!1,prepared:!1,w:0,to1:!1,to2:!1,cof:!1,cw:!1,ch:!1,i1:!1,i2:!1,mto:!1};this.get_container().bind("mouseenter.jstree",c.proxy(function(e){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&(this.data.themes&&(f.attr("class","jstree-"+this.data.themes.theme),p&&p.attr("class","jstree-"+this.data.themes.theme),c.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),
e.currentTarget===e.target&&(c.vakata.dnd.user_data.obj&&c(c.vakata.dnd.user_data.obj).length&&c(c.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==e.target)&&(e=c.jstree._reference(e.target),e.data.dnd.foreign?(e=e._get_settings().dnd.drag_check.call(this,{o:a,r:e.get_container(),is_root:!0}),(!0===e||!0===e.inside||!0===e.before||!0===e.after)&&c.vakata.dnd.helper.children("ins").attr("class","jstree-ok")):(e.prepare_move(a,e.get_container(),"last"),e.check_move()&&c.vakata.dnd.helper.children("ins").attr("class",
"jstree-ok"))))},this)).bind("mouseup.jstree",c.proxy(function(e){if(c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&e.currentTarget===e.target&&c.vakata.dnd.user_data.obj&&c(c.vakata.dnd.user_data.obj).length&&c(c.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==e.target){var f=c.jstree._reference(e.currentTarget);f.data.dnd.foreign?(e=f._get_settings().dnd.drag_check.call(this,{o:a,r:f.get_container(),is_root:!0}),(!0===e||!0===e.inside||!0===e.before||!0===e.after)&&f._get_settings().dnd.drag_finish.call(this,
{o:a,r:f.get_container(),is_root:!0})):f.move_node(a,f.get_container(),"last",e[f._get_settings().dnd.copy_modifier+"Key"])}},this)).bind("mouseleave.jstree",c.proxy(function(a){if(a.relatedTarget&&a.relatedTarget.id&&"jstree-marker-line"===a.relatedTarget.id)return!1;c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),
c.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"))},this)).bind("mousemove.jstree",c.proxy(function(a){if(c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree){var e=this.get_container()[0];a.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(c.proxy(function(){this.scrollLeft+=c.vakata.dnd.scroll_spd},e),100)):a.pageX-24<this.data.dnd.cof.left?(this.data.dnd.i1&&
clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(c.proxy(function(){this.scrollLeft-=c.vakata.dnd.scroll_spd},e),100)):this.data.dnd.i1&&clearInterval(this.data.dnd.i1);a.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(c.proxy(function(){this.scrollTop+=c.vakata.dnd.scroll_spd},e),100)):a.pageY-24<this.data.dnd.cof.top?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(c.proxy(function(){this.scrollTop-=
c.vakata.dnd.scroll_spd},e),100)):this.data.dnd.i2&&clearInterval(this.data.dnd.i2)}},this)).bind("scroll.jstree",c.proxy(function(a){c.vakata.dnd.is_drag&&(c.vakata.dnd.user_data.jstree&&f&&p)&&(f.hide(),p.hide())},this)).delegate("a","mousedown.jstree",c.proxy(function(a){if(1===a.which)return this.start_drag(a.currentTarget,a),!1},this)).delegate("a","mouseenter.jstree",c.proxy(function(a){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&this.dnd_enter(a.currentTarget)},this)).delegate("a",
"mousemove.jstree",c.proxy(function(a){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&((!e||!e.length||e.children("a")[0]!==a.currentTarget)&&this.dnd_enter(a.currentTarget),"undefined"===typeof this.data.dnd.off.top&&(this.data.dnd.off=c(a.target).offset()),this.data.dnd.w=(a.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height,0>this.data.dnd.w&&(this.data.dnd.w+=this.data.core.li_height),this.dnd_show())},this)).delegate("a","mouseleave.jstree",c.proxy(function(a){if(c.vakata.dnd.is_drag&&
c.vakata.dnd.user_data.jstree){if(a.relatedTarget&&a.relatedTarget.id&&"jstree-marker-line"===a.relatedTarget.id)return!1;f&&f.hide();p&&p.hide();this.data.dnd.mto=setTimeout(function(c){return function(){c.dnd_leave(a)}}(this),0)}},this)).delegate("a","mouseup.jstree",c.proxy(function(a){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&this.dnd_finish(a)},this));c(document).bind("drag_stop.vakata",c.proxy(function(){this.data.dnd.to1&&clearTimeout(this.data.dnd.to1);this.data.dnd.to2&&clearTimeout(this.data.dnd.to2);
this.data.dnd.i1&&clearInterval(this.data.dnd.i1);this.data.dnd.i2&&clearInterval(this.data.dnd.i2);this.data.dnd.after=!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;this.data.dnd.off=!1;this.data.dnd.prepared=!1;this.data.dnd.w=!1;this.data.dnd.to1=!1;this.data.dnd.to2=!1;this.data.dnd.i1=!1;this.data.dnd.i2=!1;this.data.dnd.active=!1;this.data.dnd.foreign=!1;f&&f.css({top:"-2000px"});p&&p.css({top:"-2000px"})},this)).bind("drag_start.vakata",c.proxy(function(a,e){if(e.data.jstree){var f=c(e.event.target);
f.closest(".jstree").hasClass("jstree-"+this.get_index())&&this.dnd_enter(f)}},this));var g=this._get_settings().dnd;g.drag_target&&c(document).delegate(g.drag_target,"mousedown.jstree-"+this.get_index(),c.proxy(function(e){a=e.target;c.vakata.dnd.drag_start(e,{jstree:!0,obj:e.target},"<ins class='jstree-icon'></ins>"+c(e.target).text());this.data.themes&&(f&&f.attr("class","jstree-"+this.data.themes.theme),p&&p.attr("class","jstree-"+this.data.themes.theme),c.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+
this.data.themes.theme));c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var g=this.get_container();this.data.dnd.cof=g.offset();this.data.dnd.cw=parseInt(g.width(),10);this.data.dnd.ch=parseInt(g.height(),10);this.data.dnd.foreign=!0;e.preventDefault()},this));g.drop_target&&c(document).delegate(g.drop_target,"mouseenter.jstree-"+this.get_index(),c.proxy(function(e){this.data.dnd.active&&this._get_settings().dnd.drop_check.call(this,{o:a,r:c(e.target),e:e})&&c.vakata.dnd.helper.children("ins").attr("class",
"jstree-ok")},this)).delegate(g.drop_target,"mouseleave.jstree-"+this.get_index(),c.proxy(function(a){this.data.dnd.active&&c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")},this)).delegate(g.drop_target,"mouseup.jstree-"+this.get_index(),c.proxy(function(e){this.data.dnd.active&&c.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&this._get_settings().dnd.drop_finish.call(this,{o:a,r:c(e.target),e:e})},this))},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,
drop_target:".jstree-drop",drop_check:function(a){return!0},drop_finish:c.noop,drag_target:".jstree-draggable",drag_finish:c.noop,drag_check:function(a){return{after:!1,before:!1,inside:!0}}},_fn:{dnd_prepare:function(){if(e&&e.length){this.data.dnd.off=e.offset();this._get_settings().core.rtl&&(this.data.dnd.off.right=this.data.dnd.off.left+e.width());if(this.data.dnd.foreign){var c=this._get_settings().dnd.drag_check.call(this,{o:a,r:e});this.data.dnd.after=c.after;this.data.dnd.before=c.before;
this.data.dnd.inside=c.inside;this.data.dnd.prepared=!0;return this.dnd_show()}this.prepare_move(a,e,"before");this.data.dnd.before=this.check_move();this.prepare_move(a,e,"after");this.data.dnd.after=this.check_move();this._is_loaded(e)?(this.prepare_move(a,e,"inside"),this.data.dnd.inside=this.check_move()):this.data.dnd.inside=!1;this.data.dnd.prepared=!0;return this.dnd_show()}},dnd_show:function(){if(this.data.dnd.prepared){var a=["before","inside","after"],e=!1,g=this._get_settings().core.rtl,
a=this.data.dnd.w<this.data.core.li_height/3?["before","inside","after"]:this.data.dnd.w<=2*this.data.core.li_height/3?this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"]:["after","inside","before"];c.each(a,c.proxy(function(a,f){if(this.data.dnd[f])return c.vakata.dnd.helper.children("ins").attr("class","jstree-ok"),e=f,!1},this));!1===e&&c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");a=g?this.data.dnd.off.right-18:this.data.dnd.off.left+
10;switch(e){case "before":f.css({left:a+"px",top:this.data.dnd.off.top-6+"px"}).show();p&&p.css({left:a+8+"px",top:this.data.dnd.off.top-1+"px"}).show();break;case "after":f.css({left:a+"px",top:this.data.dnd.off.top+this.data.core.li_height-6+"px"}).show();p&&p.css({left:a+8+"px",top:this.data.dnd.off.top+this.data.core.li_height-1+"px"}).show();break;case "inside":f.css({left:a+(g?-4:4)+"px",top:this.data.dnd.off.top+this.data.core.li_height/2-5+"px"}).show();p&&p.hide();break;default:f.hide(),
p&&p.hide()}return B=e}},dnd_open:function(){this.data.dnd.to2=!1;this.open_node(e,c.proxy(this.dnd_prepare,this),!0)},dnd_finish:function(c){this.data.dnd.foreign?(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside)&&this._get_settings().dnd.drag_finish.call(this,{o:a,r:e,p:B}):(this.dnd_prepare(),this.move_node(a,e,B,c[this._get_settings().dnd.copy_modifier+"Key"]));e=a=!1;f.hide();p&&p.hide()},dnd_enter:function(a){this.data.dnd.mto&&(clearTimeout(this.data.dnd.mto),this.data.dnd.mto=
!1);var f=this._get_settings().dnd;this.data.dnd.prepared=!1;e=this._get_node(a);f.check_timeout?(this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to1=setTimeout(c.proxy(this.dnd_prepare,this),f.check_timeout)):this.dnd_prepare();f.open_timeout?(this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),e&&(e.length&&e.hasClass("jstree-closed"))&&(this.data.dnd.to2=setTimeout(c.proxy(this.dnd_open,this),f.open_timeout))):e&&(e.length&&e.hasClass("jstree-closed"))&&this.dnd_open()},dnd_leave:function(a){this.data.dnd.after=
!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");f.hide();p&&p.hide();e&&e[0]===a.target.parentNode&&(this.data.dnd.to1&&(clearTimeout(this.data.dnd.to1),this.data.dnd.to1=!1),this.data.dnd.to2&&(clearTimeout(this.data.dnd.to2),this.data.dnd.to2=!1))},start_drag:function(e,g){a=this._get_node(e);this.data.ui&&this.is_selected(a)&&(a=this._get_node(null,!0));var t=1<a.length?this._get_string("multiple_selection"):this.get_text(a),
m=this.get_container();this._get_settings().core.html_titles||(t=t.replace(/</ig,"&lt;").replace(/>/ig,"&gt;"));c.vakata.dnd.drag_start(g,{jstree:!0,obj:a},"<ins class='jstree-icon'></ins>"+t);this.data.themes&&(f&&f.attr("class","jstree-"+this.data.themes.theme),p&&p.attr("class","jstree-"+this.data.themes.theme),c.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme));this.data.dnd.cof=m.offset();this.data.dnd.cw=parseInt(m.width(),10);this.data.dnd.ch=parseInt(m.height(),
10);this.data.dnd.active=!0}}});c(function(){c.vakata.css.add_sheet({str:"#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px;  -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; } #vakata-dragged .jstree-ok { background:green; } #vakata-dragged .jstree-invalid { background:red; } #jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } #jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43;  cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666;  -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; }",
title:"jstree"});f=c("<div />").attr({id:"jstree-marker"}).hide().html("&raquo;").bind("mouseleave mouseenter",function(a){f.hide();p.hide();a.preventDefault();a.stopImmediatePropagation();return!1}).appendTo("body");p=c("<div />").attr({id:"jstree-marker-line"}).hide().bind("mouseup",function(a){if(e&&e.length)return e.children("a").trigger(a),a.preventDefault(),a.stopImmediatePropagation(),!1}).bind("mouseleave",function(a){var g=c(a.relatedTarget);if((g.is(".jstree")||0===g.closest(".jstree").length)&&
e&&e.length)return e.children("a").trigger(a),f.hide(),p.hide(),a.preventDefault(),a.stopImmediatePropagation(),!1}).appendTo("body");c(document).bind("drag_start.vakata",function(a,c){c.data.jstree&&(f.show(),p&&p.show())});c(document).bind("drag_stop.vakata",function(a,c){c.data.jstree&&(f.hide(),p&&p.hide())})})})(jQuery);(function(c){c.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui;this.data.ui&&this.data.checkbox.noui&&(this.select_node=
this.deselect_node=this.deselect_all=c.noop,this.get_selected=this.get_checked);this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",c.proxy(function(a,c){this._prepare_checkboxes(c.rslt.obj)},this)).bind("loaded.jstree",c.proxy(function(a){this._prepare_checkboxes()},this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",c.proxy(function(a){a.preventDefault();this._get_node(a.target).hasClass("jstree-checked")?this.uncheck_node(a.target):
this.check_node(a.target);if(this.data.ui&&this.data.checkbox.noui)this.save_selected(),this.data.cookies&&this.save_cookie("select_node");else return a.stopImmediatePropagation(),!1},this))},defaults:{override_ui:!1,two_state:!1,real_checkboxes:!1,checked_parent_open:!0,real_checkboxes_names:function(a){return["check_"+(a[0].id||Math.ceil(1E4*Math.random())),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},
_fn:{_checkbox_notify:function(a,c){c.checked&&this.check_node(a,!1)},_prepare_checkboxes:function(a){a=!a||-1==a?this.get_container().find("> ul > li"):this._get_node(a);if(!1!==a){var e,f=this,p,g=this._get_settings().checkbox.two_state,m=this._get_settings().checkbox.real_checkboxes,q=this._get_settings().checkbox.real_checkboxes_names;a.each(function(){p=c(this);e=p.is("li")&&(p.hasClass("jstree-checked")||m&&p.children(":checked").length)?"jstree-checked":"jstree-unchecked";p.find("li").addBack().each(function(){var a=
c(this),p;a.children("a"+(f.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(g?"jstree-unchecked":e);m&&(a.children(":checkbox").length?a.children(":checkbox").addClass("jstree-real-checkbox"):(p=q.call(f,a),a.prepend("<input type='checkbox' class='jstree-real-checkbox' id='"+p[0]+"' name='"+p[0]+"' value='"+p[1]+"' />")));g?(a.hasClass("jstree-checked")||a.children(":checked").length)&&
a.addClass("jstree-checked").children(":checkbox").prop("checked",!0):("jstree-checked"===e||a.hasClass("jstree-checked")||a.children(":checked").length)&&a.find("li").addBack().addClass("jstree-checked").children(":checkbox").prop("checked",!0)})});g||a.find(".jstree-checked").parent().parent().each(function(){f._repair_state(this)})}},change_state:function(a,e){a=this._get_node(a);var f=!1,p=this._get_settings().checkbox.real_checkboxes;if(!a||-1===a)return!1;e=!1===e||!0===e?e:a.hasClass("jstree-checked");
if(this._get_settings().checkbox.two_state)e?(a.removeClass("jstree-checked").addClass("jstree-unchecked"),p&&a.children(":checkbox").prop("checked",!1)):(a.removeClass("jstree-unchecked").addClass("jstree-checked"),p&&a.children(":checkbox").prop("checked",!0));else{if(e){f=a.find("li").addBack();if(!f.filter(".jstree-checked, .jstree-undetermined").length)return!1;f.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");p&&f.children(":checkbox").prop("checked",!1)}else{f=
a.find("li").addBack();if(!f.filter(".jstree-unchecked, .jstree-undetermined").length)return!1;f.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");p&&f.children(":checkbox").prop("checked",!0);this.data.ui&&(this.data.ui.last_selected=a);this.data.checkbox.last_selected=a}a.parentsUntil(".jstree","li").each(function(){var a=c(this);if(e){if(a.children("ul").children("li.jstree-checked, li.jstree-undetermined").length)return a.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),
p&&a.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",!1),!1;a.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");p&&a.children(":checkbox").prop("checked",!1)}else{if(a.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length)return a.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),p&&a.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",
!1),!1;a.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");p&&a.children(":checkbox").prop("checked",!0)}})}this.data.ui&&this.data.checkbox.noui&&(this.data.ui.selected=this.get_checked());this.__callback(a);return!0},check_node:function(a){if(this.change_state(a,!1)){a=this._get_node(a);if(this._get_settings().checkbox.checked_parent_open){var c=this;a.parents(".jstree-closed").each(function(){c.open_node(this,!1,!0)})}this.__callback({obj:a})}},uncheck_node:function(a){this.change_state(a,
!0)&&this.__callback({obj:this._get_node(a)})},check_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!1)});this.__callback()},uncheck_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!0)});this.__callback()},is_checked:function(a){a=this._get_node(a);
return a.length?a.is(".jstree-checked"):!1},get_checked:function(a,c){a=!a||-1===a?this.get_container():this._get_node(a);return c||this._get_settings().checkbox.two_state?a.find(".jstree-checked"):a.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(a,c){a=!a||-1===a?this.get_container():this._get_node(a);return c||this._get_settings().checkbox.two_state?a.find(".jstree-unchecked"):a.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},
show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(a){a=this._get_node(a);if(a.length)if(this._get_settings().checkbox.two_state)a.find("li").addBack().not(".jstree-checked").removeClass("jstree-undetermined").addClass("jstree-unchecked").children(":checkbox").prop("checked",!0);else{var c=this._get_settings().checkbox.real_checkboxes,
f=a.find("> ul > .jstree-checked").length,p=a.find("> ul > .jstree-undetermined").length,g=a.find("> ul > li").length;0===g?a.hasClass("jstree-undetermined")&&this.change_state(a,!1):0===f&&0===p?this.change_state(a,!0):f===g?this.change_state(a,!1):(a.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),c&&a.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",!1))}},reselect:function(){if(this.data.ui&&this.data.checkbox.noui){var a=
this,e=this.data.ui.to_select,e=c.map(c.makeArray(e),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});this.deselect_all();c.each(e,function(c,e){a.check_node(e)});this.__callback()}else this.__call_old()},save_loaded:function(){var a=this;this.data.core.to_load=[];this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){this.id&&a.data.core.to_load.push("#"+this.id)})}}});
c(function(){c.vakata.css.add_sheet({str:".jstree .jstree-real-checkbox { display:none; } ",title:"jstree"})})})(jQuery);(function(c){c.vakata.xslt=function(a,e,g){var m=!1,q,y,B;if(!1===m&&window.ActiveXObject)try{m=new ActiveXObject("Msxml2.XSLTemplate"),y=new ActiveXObject("Msxml2.DOMDocument"),y.loadXML(a),B=new ActiveXObject("Msxml2.FreeThreadedDOMDocument"),B.loadXML(e),m.stylesheet=B,q=m.createProcessor(),q.input=y,q.transform(),m=q.output}catch(v){}a=c.parseXML(a);e=c.parseXML(e);!1===m&&
"undefined"!==typeof XSLTProcessor&&(q=new XSLTProcessor,q.importStylesheet(e),m=q.transformToFragment(a,document),m=c("<div />").append(m).html());!1===m&&"undefined"!==typeof a.transformNode&&(m=a.transformNode(e));g.call(null,m)};var a={nest:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/html" /><xsl:template match="/">\t<xsl:call-template name="nodes">\t\t<xsl:with-param name="node" select="/root" />\t</xsl:call-template></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<ul>\t<xsl:for-each select="$node/item">\t\t<xsl:variable name="children" select="count(./item) &gt; 0" />\t\t<li>\t\t\t<xsl:attribute name="class">\t\t\t\t<xsl:if test="position() = last()">jstree-last </xsl:if>\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t\t\t</xsl:choose>\t\t\t\t<xsl:value-of select="@class" />\t\t\t</xsl:attribute>\t\t\t<xsl:for-each select="@*">\t\t\t\t<xsl:if test="name() != \'class\' and name() != \'state\' and name() != \'hasChildren\'">\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t</xsl:if>\t\t\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t\t\t<xsl:for-each select="content/name">\t\t\t\t<a>\t\t\t\t<xsl:attribute name="href">\t\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t\t\t</xsl:choose>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t\t\t<xsl:for-each select="@*">\t\t\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t\t</xsl:if>\t\t\t\t</xsl:for-each>\t\t\t\t\t<ins>\t\t\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t\t\t</xsl:attribute>\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t\t\t</ins>\t\t\t\t\t<xsl:copy-of select="./child::node()" />\t\t\t\t</a>\t\t\t</xsl:for-each>\t\t\t<xsl:if test="$children or @hasChildren"><xsl:call-template name="nodes"><xsl:with-param name="node" select="current()" /></xsl:call-template></xsl:if>\t\t</li>\t</xsl:for-each>\t</ul></xsl:template></xsl:stylesheet>',
flat:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/xml" /><xsl:template match="/">\t<ul>\t<xsl:for-each select="//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]">\t\t<xsl:call-template name="nodes">\t\t\t<xsl:with-param name="node" select="." />\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t</xsl:call-template>\t</xsl:for-each>\t</ul></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<xsl:param name="is_last" />\t<xsl:variable name="children" select="count(//item[@parent_id=$node/attribute::id]) &gt; 0" />\t<li>\t<xsl:attribute name="class">\t\t<xsl:if test="$is_last = true()">jstree-last </xsl:if>\t\t<xsl:choose>\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t</xsl:choose>\t\t<xsl:value-of select="@class" />\t</xsl:attribute>\t<xsl:for-each select="@*">\t\t<xsl:if test="name() != \'parent_id\' and name() != \'hasChildren\' and name() != \'class\' and name() != \'state\'">\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t</xsl:if>\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t<xsl:for-each select="content/name">\t\t<a>\t\t<xsl:attribute name="href">\t\t\t<xsl:choose>\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t</xsl:choose>\t\t</xsl:attribute>\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t<xsl:for-each select="@*">\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t</xsl:if>\t\t</xsl:for-each>\t\t\t<ins>\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t</ins>\t\t\t<xsl:copy-of select="./child::node()" />\t\t</a>\t</xsl:for-each>\t<xsl:if test="$children">\t\t<ul>\t\t<xsl:for-each select="//item[@parent_id=$node/attribute::id]">\t\t\t<xsl:call-template name="nodes">\t\t\t\t<xsl:with-param name="node" select="." />\t\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t\t</xsl:call-template>\t\t</xsl:for-each>\t\t</ul>\t</xsl:if>\t</li></xsl:template></xsl:stylesheet>'},
e=function(a){return a.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};c.jstree.plugin("xml_data",{defaults:{data:!1,ajax:!1,xsl:"flat",clean_node:!1,correct_state:!0,get_skip_empty:!1,get_include_preamble:!0},_fn:{load_node:function(a,c,e){var g=this;this.load_node_xml(a,function(){g.__callback({obj:g._get_node(a)});c.call(this)},e)},_is_loaded:function(a){var e=this._get_settings().xml_data;a=this._get_node(a);return-1==a||
!a||!e.ajax&&!c.isFunction(e.data)||a.is(".jstree-open, .jstree-leaf")||0<a.children("ul").children("li").size()},load_node_xml:function(a,e,g){var m=this.get_settings().xml_data,q=function(){},y=function(){};if((a=this._get_node(a))&&-1!==a){if(a.data("jstree_is_loading"))return;a.data("jstree_is_loading",!0)}switch(!0){case !m.data&&!m.ajax:throw"Neither data nor ajax settings supplied.";case c.isFunction(m.data):m.data.call(this,a,c.proxy(function(g){this.parse_xml(g,c.proxy(function(g){g&&(g=
g.replace(/ ?xmlns="[^"]*"/ig,""),10<g.length?(g=c(g),-1===a||!a?this.get_container().children("ul").empty().append(g.children()):(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(g),a.removeData("jstree_is_loading")),m.clean_node&&this.clean_node(a),e&&e.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),m.correct_state&&(this.correct_state(a),e&&e.call(this))):m.correct_state&&(this.get_container().children("ul").empty(),
e&&e.call(this)))},this))},this));break;case !!m.data&&!m.ajax||!!m.data&&!!m.ajax&&(!a||-1===a):(!a||-1==a)&&this.parse_xml(m.data,c.proxy(function(g){g?(g=g.replace(/ ?xmlns="[^"]*"/ig,""),10<g.length&&(g=c(g),this.get_container().children("ul").empty().append(g.children()),m.clean_node&&this.clean_node(a),e&&e.call(this))):m.correct_state&&(this.get_container().children("ul").empty(),e&&e.call(this))},this));break;case !m.data&&!!m.ajax||!!m.data&&!!m.ajax&&a&&-1!==a:q=function(c,e,p){var q=this.get_settings().xml_data.ajax.error;
q&&q.call(this,c,e,p);-1!==a&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),"success"===e&&m.correct_state&&this.correct_state(a)):"success"===e&&m.correct_state&&this.get_container().children("ul").empty();g&&g.call(this)},y=function(g,t,y){g=y.responseText;var P=this.get_settings().xml_data.ajax.success;P&&(g=P.call(this,g,t,y)||g);if(""===g||g&&g.toString&&""===g.toString().replace(/^[\s\n]+$/,""))return q.call(this,y,t,"");this.parse_xml(g,
c.proxy(function(g){g&&(g=g.replace(/ ?xmlns="[^"]*"/ig,""),10<g.length?(g=c(g),-1===a||!a?this.get_container().children("ul").empty().append(g.children()):(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(g),a.removeData("jstree_is_loading")),m.clean_node&&this.clean_node(a),e&&e.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),m.correct_state&&(this.correct_state(a),e&&e.call(this))):m.correct_state&&(this.get_container().children("ul").empty(),
e&&e.call(this)))},this))},m.ajax.context=this,m.ajax.error=q,m.ajax.success=y,m.ajax.dataType||(m.ajax.dataType="xml"),c.isFunction(m.ajax.url)&&(m.ajax.url=m.ajax.url.call(this,a)),c.isFunction(m.ajax.data)&&(m.ajax.data=m.ajax.data.call(this,a)),c.ajax(m.ajax)}},parse_xml:function(e,p){var g=this._get_settings().xml_data;c.vakata.xslt(e,a[g.xsl],p)},get_xml:function(a,p,g,m,q){var y="",B=this._get_settings(),v=this,Q,P,U,Ua,Ja;a||(a="flat");q||(q=0);p=this._get_node(p);if(!p||-1===p)p=this.get_container().find("> ul > li");
g=c.isArray(g)?g:["id","class"];!q&&(this.data.types&&-1===c.inArray(B.types.type_attr,g))&&g.push(B.types.type_attr);m=c.isArray(m)?m:[];q||(B.xml_data.get_include_preamble&&(y+='<?xml version="1.0" encoding="UTF-8"?>'),y+="<root>");p.each(function(){y+="<item";U=c(this);c.each(g,function(a,c){var f=U.attr(c);if(!B.xml_data.get_skip_empty||"undefined"!==typeof f)y+=" "+c+'="'+e((" "+(f||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"'});U.hasClass("jstree-open")&&
(y+=' state="open"');U.hasClass("jstree-closed")&&(y+=' state="closed"');"flat"===a&&(y+=' parent_id="'+e(q)+'"');y+=">";y+="<content>";Ua=U.children("a");Ua.each(function(){Q=c(this);Ja=!1;y+="<name";-1!==c.inArray("languages",B.plugins)&&c.each(B.languages,function(a,c){if(Q.hasClass(c))return y+=' lang="'+e(c)+'"',Ja=c,!1});m.length&&c.each(m,function(a,c){var f=Q.attr(c);if(!B.xml_data.get_skip_empty||"undefined"!==typeof f)y+=" "+c+'="'+e((" "+f||"").replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig,
" ").replace(/^ /,"").replace(/ $/,""))+'"'});Q.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(y+=' icon="'+e(Q.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"');Q.children("ins").get(0).style.backgroundImage.length&&(y+=' icon="'+e(Q.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/ig,"").replace(/"/ig,""))+'"');y+=">";y+="<![CDATA["+
v.get_text(Q,Ja)+"]]\x3e";y+="</name>"});y+="</content>";P=U[0].id||!0;U=U.find("> ul > li");P=U.length?v.get_xml(a,U,g,m,P):"";"nest"==a&&(y+=P);y+="</item>";"flat"==a&&(y+=P)});q||(y+="</root>");return y}}})})(jQuery);(function(c){8<=c().jquery.split(".")[1]?(c.expr[":"].jstree_contains=c.expr.createPseudo(function(a){return function(c){return 0<=(c.textContent||c.innerText||"").toLowerCase().indexOf(a.toLowerCase())}}),c.expr[":"].jstree_title_contains=c.expr.createPseudo(function(a){return function(c){return 0<=
(c.getAttribute("title")||"").toLowerCase().indexOf(a.toLowerCase())}})):(c.expr[":"].jstree_contains=function(a,c,f){return 0<=(a.textContent||a.innerText||"").toLowerCase().indexOf(f[3].toLowerCase())},c.expr[":"].jstree_title_contains=function(a,c,f){return 0<=(a.getAttribute("title")||"").toLowerCase().indexOf(f[3].toLowerCase())});c.jstree.plugin("search",{__init:function(){this.data.search.str="";this.data.search.result=c();this._get_settings().search.show_only_matches&&this.get_container().bind("search.jstree",
function(a,e){c(this).children("ul").find("li").hide().removeClass("jstree-last");e.rslt.nodes.parentsUntil(".jstree").addBack().show().filter("ul").each(function(){c(this).children("li:visible").eq(-1).addClass("jstree-last")})}).bind("clear_search.jstree",function(){c(this).children("ul").find("li").css("display","").end().end().jstree("clean_node",-1)})},defaults:{ajax:!1,search_method:"jstree_contains",show_only_matches:!1},_fn:{search:function(a,e){if(""===c.trim(a))this.clear_search();else{var f=
this.get_settings().search,p=this,g=function(){};this.data.search.str=a;if(!e&&!1!==f.ajax&&0<this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length){this.search.supress_callback=!0;g=function(a,c,e){var f=this.get_settings().search.ajax.success;f&&(a=f.call(this,a,c,e)||a);this.data.search.to_open=a;this._search_open()};f.ajax.context=this;f.ajax.error=function(){};f.ajax.success=g;c.isFunction(f.ajax.url)&&(f.ajax.url=f.ajax.url.call(this,a));c.isFunction(f.ajax.data)&&(f.ajax.data=
f.ajax.data.call(this,a));f.ajax.data||(f.ajax.data={search_string:a});if(!f.ajax.dataType||/^json/.exec(f.ajax.dataType))f.ajax.dataType="json";c.ajax(f.ajax)}else this.data.search.result.length&&this.clear_search(),this.data.search.result=this.get_container().find("a"+(this.data.languages?"."+this.get_lang():"")+":"+f.search_method+"("+this.data.search.str+")"),this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function(){p.open_node(this,!1,!0)}),this.__callback({nodes:this.data.search.result,
str:a})}},clear_search:function(a){this.data.search.result.removeClass("jstree-search");this.__callback(this.data.search.result);this.data.search.result=c()},_search_open:function(a){var e=this;a=!0;var f=[],p=[];this.data.search.to_open.length&&(c.each(this.data.search.to_open,function(a,e){if("#"==e)return!0;c(e).length&&c(e).is(".jstree-closed")?f.push(e):p.push(e)}),f.length&&(this.data.search.to_open=p,c.each(f,function(a,c){e.open_node(c,function(){e._search_open(!0)})}),a=!1));a&&this.search(this.data.search.str,
!0)}}})})(jQuery);(function(c){c.vakata.context={hide_on_mouseleave:!1,cnt:c("<div id='vakata-contextmenu' />"),vis:!1,tgt:!1,par:!1,func:!1,data:!1,rtl:!1,show:function(a,e,f,p,g,m,q){c.vakata.context.rtl=!!q;if(a=c.vakata.context.parse(a)){c.vakata.context.vis=!0;c.vakata.context.tgt=e;c.vakata.context.par=m||e||null;c.vakata.context.data=g||null;c.vakata.context.cnt.html(a).css({visibility:"hidden",display:"block",left:0,top:0});if(c.vakata.context.hide_on_mouseleave)c.vakata.context.cnt.one("mouseleave",
function(a){c.vakata.context.hide()});g=c.vakata.context.cnt.height();m=c.vakata.context.cnt.width();f+m>c(document).width()&&(f=c(document).width()-(m+5),c.vakata.context.cnt.find("li > ul").addClass("right"));p+g>c(document).height()&&(p-=g+e[0].offsetHeight,c.vakata.context.cnt.find("li > ul").addClass("bottom"));c.vakata.context.cnt.css({left:f,top:p}).find("li:has(ul)").bind("mouseenter",function(a){a=c(document).width();var e=c(document).height(),f=c(this).children("ul").show();a!==c(document).width()&&
f.toggleClass("right");e!==c(document).height()&&f.toggleClass("bottom")}).bind("mouseleave",function(a){c(this).children("ul").hide()}).end().css({visibility:"visible"}).show();c(document).triggerHandler("context_show.vakata")}},hide:function(){c.vakata.context.vis=!1;c.vakata.context.cnt.attr("class","").css({visibility:"hidden"});c(document).triggerHandler("context_hide.vakata")},parse:function(a,e){if(!a)return!1;var f="",p=!1,g=!0;e||(c.vakata.context.func={});f+="<ul>";c.each(a,function(a,e){if(!e)return!0;
c.vakata.context.func[a]=e.action;!g&&e.separator_before&&(f+="<li class='vakata-separator vakata-separator-before'></li>");g=!1;f+="<li class='"+(e._class||"")+(e._disabled?" jstree-contextmenu-disabled ":"")+"'><ins ";e.icon&&-1===e.icon.indexOf("/")&&(f+=" class='"+e.icon+"' ");e.icon&&-1!==e.icon.indexOf("/")&&(f+=" style='background:url("+e.icon+") center center no-repeat;' ");f+=">&#160;</ins><a href='#' rel='"+a+"'>";e.submenu&&(f+="<span style='float:"+(c.vakata.context.rtl?"left":"right")+
";'>&raquo;</span>");f+=e.label+"</a>";e.submenu&&(p=c.vakata.context.parse(e.submenu,!0))&&(f+=p);f+="</li>";e.separator_after&&(f+="<li class='vakata-separator vakata-separator-after'></li>",g=!0)});f=f.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,"");f+="</ul>";c(document).triggerHandler("context_parse.vakata");return 10<f.length?f:!1},exec:function(a){return c.isFunction(c.vakata.context.func[a])?(c.vakata.context.func[a].call(c.vakata.context.data,c.vakata.context.par),
!0):!1}};c(function(){c.vakata.css.add_sheet({str:"#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; *width:180px; } #vakata-contextmenu ul { min-width:180px; *width:180px; } #vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } #vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } #vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } #vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } #vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover > a { background:gray; color:white; } #vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } #vakata-contextmenu .right { right:100%; left:auto; } #vakata-contextmenu .bottom { bottom:-1px; top:auto; } #vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ",
title:"vakata"});c.vakata.context.cnt.delegate("a","click",function(a){a.preventDefault()}).delegate("a","mouseup",function(a){!c(this).parent().hasClass("jstree-contextmenu-disabled")&&c.vakata.context.exec(c(this).attr("rel"))?c.vakata.context.hide():c(this).blur()}).delegate("a","mouseover",function(){c.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body");c(document).bind("mousedown",function(a){c.vakata.context.vis&&!c.contains(c.vakata.context.cnt[0],a.target)&&
c.vakata.context.hide()});"undefined"!==typeof c.hotkeys&&c(document).bind("keydown","up",function(a){if(c.vakata.context.vis){var e=c.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();e.length||(e=c.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last());e.addClass("vakata-hover");a.stopImmediatePropagation();a.preventDefault()}}).bind("keydown","down",function(a){if(c.vakata.context.vis){var e=
c.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();e.length||(e=c.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first());e.addClass("vakata-hover");a.stopImmediatePropagation();a.preventDefault()}}).bind("keydown","right",function(a){c.vakata.context.vis&&(c.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover"),
a.stopImmediatePropagation(),a.preventDefault())}).bind("keydown","left",function(a){c.vakata.context.vis&&(c.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover"),a.stopImmediatePropagation(),a.preventDefault())}).bind("keydown","esc",function(a){c.vakata.context.hide();a.preventDefault()}).bind("keydown","space",function(a){c.vakata.context.cnt.find(".vakata-hover").last().children("a").click();a.preventDefault()})});c.jstree.plugin("contextmenu",
{__init:function(){this.get_container().delegate("a","contextmenu.jstree",c.proxy(function(a){a.preventDefault();c(a.currentTarget).hasClass("jstree-loading")||this.show_contextmenu(a.currentTarget,a.pageX,a.pageY)},this)).delegate("a","click.jstree",c.proxy(function(a){this.data.contextmenu&&c.vakata.context.hide()},this)).bind("destroy.jstree",c.proxy(function(){this.data.contextmenu&&c.vakata.context.hide()},this));c(document).bind("context_hide.vakata",c.proxy(function(){this.data.contextmenu=
!1},this))},defaults:{select_node:!1,show_at_node:!0,items:{create:{separator_before:!1,separator_after:!0,label:"Create",action:function(a){this.create(a)}},rename:{separator_before:!1,separator_after:!1,label:"Rename",action:function(a){this.rename(a)}},remove:{separator_before:!1,icon:!1,separator_after:!1,label:"Delete",action:function(a){this.is_selected(a)?this.remove():this.remove(a)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,
separator_after:!1,label:"Cut",action:function(a){this.cut(a)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(a){this.copy(a)}},paste:{separator_before:!1,icon:!1,separator_after:!1,label:"Paste",action:function(a){this.paste(a)}}}}}},_fn:{show_contextmenu:function(a,e,f){a=this._get_node(a);var p=this.get_settings().contextmenu,g=a.children("a:visible:eq(0)"),m=!1,m=!1;p.select_node&&(this.data.ui&&!this.is_selected(a))&&(this.deselect_all(),this.select_node(a,
!0));if(p.show_at_node||"undefined"===typeof e||"undefined"===typeof f)m=g.offset(),e=m.left,f=m.top+this.data.core.li_height;m=a.data("jstree")&&a.data("jstree").contextmenu?a.data("jstree").contextmenu:p.items;c.isFunction(m)&&(m=m.call(this,a));this.data.contextmenu=!0;c.vakata.context.show(m,g,e,f,this,a,this._get_settings().core.rtl);this.data.themes&&c.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}})})(jQuery);(function(c){c.jstree.plugin("types",{__init:function(){var a=
this._get_settings().types;this.data.types.attach_to=[];this.get_container().bind("init.jstree",c.proxy(function(){var e=a.type_attr,f="",p=this;c.each(a.types,function(a,g){c.each(g,function(a,c){/^(max_depth|max_children|icon|valid_children)$/.test(a)||p.data.types.attach_to.push(a)});if(!g.icon)return!0;if(g.icon.image||g.icon.position)f="default"==a?f+(".jstree-"+p.get_index()+" a > .jstree-icon { "):f+(".jstree-"+p.get_index()+" li["+e+'="'+a+'"] > a > .jstree-icon { '),g.icon.image&&(f+=" background-image:url("+
g.icon.image+"); "),f=g.icon.position?f+(" background-position:"+g.icon.position+"; "):f+" background-position:0 0; ",f+="} "});""!==f&&c.vakata.css.add_sheet({str:f,title:"jstree-types"})},this)).bind("before.jstree",c.proxy(function(a,f){var p,g;if((p=(p=this._get_settings().types.use_data?this._get_node(f.args[0]):!1)&&-1!==p&&p.length?p.data("jstree"):!1)&&p.types&&!1===p.types[f.func])return a.stopImmediatePropagation(),!1;if(-1!==c.inArray(f.func,this.data.types.attach_to)&&f.args[0]&&(f.args[0].tagName||
f.args[0].jquery))if(p=this._get_settings().types.types,g=this._get_type(f.args[0]),(p[g]&&"undefined"!==typeof p[g][f.func]||p["default"]&&"undefined"!==typeof p["default"][f.func])&&!1===this._check(f.func,f.args[0]))return a.stopImmediatePropagation(),!1},this));g&&this.get_container().bind("load_node.jstree set_type.jstree",c.proxy(function(a,f){var p=f&&f.rslt&&f.rslt.obj&&-1!==f.rslt.obj?this._get_node(f.rslt.obj).parent():this.get_container_ul(),g=!1,m=this._get_settings().types;c.each(m.types,
function(a,c){if(c.icon&&(c.icon.image||c.icon.position))g="default"===a?p.find("li > a > .jstree-icon"):p.find("li["+m.type_attr+"='"+a+"'] > a > .jstree-icon"),c.icon.image&&g.css("backgroundImage","url("+c.icon.image+")"),g.css("backgroundPosition",c.icon.position||"0 0")})},this))},defaults:{max_children:-1,max_depth:-1,valid_children:"all",use_data:!1,type_attr:"rel",types:{"default":{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_types_notify:function(a,c){c.type&&this._get_settings().types.use_data&&
this.set_type(c.type,a)},_get_type:function(a){a=this._get_node(a);return!a||!a.length?!1:a.attr(this._get_settings().types.type_attr)||"default"},set_type:function(a,c){c=this._get_node(c);var f=!c.length||!a?!1:c.attr(this._get_settings().types.type_attr,a);f&&this.__callback({obj:c,type:a});return f},_check:function(a,e,f){e=this._get_node(e);var p=!1,g=this._get_type(e),m=0,q=this,y=this._get_settings().types,B=!1;if(-1===e)if(y[a])p=y[a];else return;else{if(!1===g)return;(B=y.use_data?e.data("jstree"):
!1)&&B.types&&"undefined"!==typeof B.types[a]?p=B.types[a]:y.types[g]&&"undefined"!==typeof y.types[g][a]?p=y.types[g][a]:y.types["default"]&&"undefined"!==typeof y.types["default"][a]&&(p=y.types["default"][a])}c.isFunction(p)&&(p=p.call(this,e));"max_depth"===a&&(-1!==e&&!1!==f&&-2!==y.max_depth&&0!==p)&&e.children("a:eq(0)").parentsUntil(".jstree","li").each(function(c){if(-1!==y.max_depth&&0>=y.max_depth-(c+1))return p=0,!1;m=0===c?p:q._check(a,this,!1);if(-1!==m&&0>=m-(c+1))return p=0,!1;if(0<=
m&&(m-(c+1)<p||0>p))p=m-(c+1);if(0<=y.max_depth&&(y.max_depth-(c+1)<p||0>p))p=y.max_depth-(c+1)});return p},check_move:function(){if(!this.__call_old())return!1;var a=this._get_move(),e=a.rt._get_settings().types,f=a.rt._check("max_children",a.cr),p=a.rt._check("max_depth",a.cr),g=a.rt._check("valid_children",a.cr),m=0,q=1;if("none"===g||c.isArray(g)&&(a.ot&&a.ot._get_type)&&(a.o.each(function(){if(-1===c.inArray(a.ot._get_type(this),g))return q=!1}),!1===q)||-2!==e.max_children&&-1!==f&&(m=-1===
a.cr?this.get_container().find("> ul > li").not(a.o).length:a.cr.find("> ul > li").not(a.o).length,m+a.o.length>f))return!1;if(-2!==e.max_depth&&-1!==p){q=0;if(0===p)return!1;if("undefined"===typeof a.o.d){for(e=a.o;0<e.length;)e=e.find("> ul > li"),q++;a.o.d=q}if(0>p-a.o.d)return!1}return!0},create_node:function(a,e,f,p,g,m){if(!m&&(g||this._is_loaded(a))){var q="string"==typeof e&&e.match(/^before|after$/i)&&-1!==a?this._get_parent(a):this._get_node(a),y=this._get_settings().types,B=this._check("max_children",
q),v=this._check("max_depth",q),Q=this._check("valid_children",q);"string"===typeof f&&(f={data:f});f||(f={});if("none"===Q)return!1;if(c.isArray(Q))if(!f.attr||!f.attr[y.type_attr])f.attr||(f.attr={}),f.attr[y.type_attr]=Q[0];else if(-1===c.inArray(f.attr[y.type_attr],Q))return!1;if(-2!==y.max_children&&-1!==B&&(q=-1===q?this.get_container().find("> ul > li").length:q.find("> ul > li").length,q+1>B)||-2!==y.max_depth&&-1!==v&&0>v-1)return!1}return this.__call_old(!0,a,e,f,p,g,m)}}})})(jQuery);(function(c){c.jstree.plugin("html_data",
{__init:function(){this.data.html_data.original_container_html=this.get_container().find(" > ul > li").clone(!0);this.data.html_data.original_container_html.find("li").addBack().contents().filter(function(){return 3==this.nodeType}).remove()},defaults:{data:!1,ajax:!1,correct_state:!0},_fn:{load_node:function(a,c,f){var p=this;this.load_node_html(a,function(){p.__callback({obj:p._get_node(a)});c.call(this)},f)},_is_loaded:function(a){a=this._get_node(a);return-1==a||!a||!this._get_settings().html_data.ajax&&
!c.isFunction(this._get_settings().html_data.data)||a.is(".jstree-open, .jstree-leaf")||0<a.children("ul").children("li").size()},load_node_html:function(a,e,f){var p,g=this.get_settings().html_data,m=function(){};p=function(){};if((a=this._get_node(a))&&-1!==a){if(a.data("jstree_is_loading"))return;a.data("jstree_is_loading",!0)}switch(!0){case c.isFunction(g.data):g.data.call(this,a,c.proxy(function(f){f&&""!==f&&f.toString&&""!==f.toString().replace(/^[\s\n]+$/,"")?(f=c(f),f.is("ul")||(f=c("<ul />").append(f)),
-1==a||!a?this.get_container().children("ul").empty().append(f.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"):(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(f).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||
"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),a.removeData("jstree_is_loading")),this.clean_node(a),e&&e.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),g.correct_state&&(this.correct_state(a),e&&e.call(this))):g.correct_state&&(this.get_container().children("ul").empty(),e&&e.call(this))},this));break;
case !g.data&&!g.ajax:if(!a||-1==a)this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node();e&&e.call(this);break;case !!g.data&&!g.ajax||!!g.data&&!!g.ajax&&(!a||-1===a):if(!a||-1==a)p=c(g.data),
p.is("ul")||(p=c("<ul />").append(p)),this.get_container().children("ul").empty().append(p.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node();e&&e.call(this);break;case !g.data&&!!g.ajax||!!g.data&&!!g.ajax&&a&&-1!==a:a=this._get_node(a),m=function(c,e,p){var m=this.get_settings().html_data.ajax.error;
m&&m.call(this,c,e,p);-1!=a&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),"success"===e&&g.correct_state&&this.correct_state(a)):"success"===e&&g.correct_state&&this.get_container().children("ul").empty();f&&f.call(this)},p=function(f,p,q){var v=this.get_settings().html_data.ajax.success;v&&(f=v.call(this,f,p,q)||f);if(""===f||f&&f.toString&&""===f.toString().replace(/^[\s\n]+$/,""))return m.call(this,q,p,"");f?(f=c(f),f.is("ul")||(f=c("<ul />").append(f)),
-1==a||!a?this.get_container().children("ul").empty().append(f.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"):(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(f).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||
"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),a.removeData("jstree_is_loading")),this.clean_node(a),e&&e.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),g.correct_state&&(this.correct_state(a),e&&e.call(this))):g.correct_state&&(this.get_container().children("ul").empty(),e&&e.call(this))},g.ajax.context=
this,g.ajax.error=m,g.ajax.success=p,g.ajax.dataType||(g.ajax.dataType="html"),c.isFunction(g.ajax.url)&&(g.ajax.url=g.ajax.url.call(this,a)),c.isFunction(g.ajax.data)&&(g.ajax.data=g.ajax.data.call(this,a)),c.ajax(g.ajax)}}}});c.jstree.defaults.plugins.push("html_data")})(jQuery);(function(c){c.jstree.plugin("themeroller",{__init:function(){var a=this._get_settings().themeroller;this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a","mouseenter.jstree",function(e){c(e.currentTarget).hasClass("jstree-loading")||
c(this).addClass(a.item_h)}).delegate("a","mouseleave.jstree",function(){c(this).removeClass(a.item_h)}).bind("init.jstree",c.proxy(function(a,c){c.inst.get_container().find("> ul > li > .jstree-loading > ins").addClass("ui-icon-refresh");this._themeroller(c.inst.get_container().find("> ul > li"))},this)).bind("open_node.jstree create_node.jstree",c.proxy(function(a,c){this._themeroller(c.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",c.proxy(function(a){this._themeroller()},this)).bind("close_node.jstree",
c.proxy(function(a,c){this._themeroller(c.rslt.obj)},this)).bind("delete_node.jstree",c.proxy(function(a,c){this._themeroller(c.rslt.parent)},this)).bind("correct_state.jstree",c.proxy(function(c,f){f.rslt.obj.children("ins.jstree-icon").removeClass(a.opened+" "+a.closed+" ui-icon").end().find("> a > ins.ui-icon").filter(function(){return-1===this.className.toString().replace(a.item_clsd,"").replace(a.item_open,"").replace(a.item_leaf,"").indexOf("ui-icon-")}).removeClass(a.item_open+" "+a.item_clsd).addClass(a.item_leaf||
"jstree-no-icon")},this)).bind("select_node.jstree",c.proxy(function(c,f){f.rslt.obj.children("a").addClass(a.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",c.proxy(function(c,f){this.get_container().find("a."+a.item_a).removeClass(a.item_a).end().find("a.jstree-clicked").addClass(a.item_a)},this)).bind("dehover_node.jstree",c.proxy(function(c,f){f.rslt.obj.children("a").removeClass(a.item_h)},this)).bind("hover_node.jstree",c.proxy(function(c,f){this.get_container().find("a."+a.item_h).not(f.rslt.obj).removeClass(a.item_h);
f.rslt.obj.children("a").addClass(a.item_h)},this)).bind("move_node.jstree",c.proxy(function(a,c){this._themeroller(c.rslt.o);this._themeroller(c.rslt.op)},this))},__destroy:function(){var a=this._get_settings().themeroller,e=["ui-icon"];c.each(a,function(a,c){c=c.split(" ");c.length&&(e=e.concat(c))});this.get_container().removeClass("ui-widget-content").find("."+e.join(", .")).removeClass(e.join(" "))},_fn:{_themeroller:function(a){var c=this._get_settings().themeroller;a=!a||-1==a?this.get_container_ul():
this._get_node(a);a=!a||-1==a?this.get_container_ul():a.parent();a.find("li.jstree-closed").children("ins.jstree-icon").removeClass(c.opened).addClass("ui-icon "+c.closed).end().children("a").addClass(c.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(c.item_clsd,"").replace(c.item_open,"").replace(c.item_leaf,"").indexOf("ui-icon-")}).removeClass(c.item_leaf+" "+c.item_open).addClass(c.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(c.closed).addClass("ui-icon "+
c.opened).end().children("a").addClass(c.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(c.item_clsd,"").replace(c.item_open,"").replace(c.item_leaf,"").indexOf("ui-icon-")}).removeClass(c.item_leaf+" "+c.item_clsd).addClass(c.item_open||"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(c.closed+" ui-icon "+c.opened).end().children("a").addClass(c.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===
this.className.toString().replace(c.item_clsd,"").replace(c.item_open,"").replace(c.item_leaf,"").indexOf("ui-icon-")}).removeClass(c.item_clsd+" "+c.item_open).addClass(c.item_leaf||"jstree-no-icon")}},defaults:{opened:"ui-icon-triangle-1-se",closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_open:"ui-icon-folder-open",item_clsd:"ui-icon-folder-collapsed",item_leaf:"ui-icon-document"}});c(function(){c.vakata.css.add_sheet({str:".jstree-themeroller .ui-icon { overflow:visible; } .jstree-themeroller a { padding:0 2px; } .jstree-themeroller .jstree-no-icon { display:none; }",
title:"jstree"})})})(jQuery);(function(c){c.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",c.proxy(function(a,e){var f=[],g=!0,m;"move_node"==e.func&&(!0===e.args[4]&&e.args[0].o&&e.args[0].o.length)&&(e.args[0].o.children("a").each(function(){f.push(c(this).text().replace(/^\s+/g,""))}),g=this._check_unique(f,e.args[0].np.find("> ul > li").not(e.args[0].o),"move_node"));if("create_node"==e.func&&(e.args[4]||this._is_loaded(e.args[0]))){g=this._get_node(e.args[0]);
if(e.args[1]&&("before"===e.args[1]||"after"===e.args[1]))if(g=this._get_parent(e.args[0]),!g||-1===g)g=this.get_container();"string"===typeof e.args[2]?f.push(e.args[2]):!e.args[2]||!e.args[2].data?f.push(this._get_string("new_node")):f.push(e.args[2].data);g=this._check_unique(f,g.find("> ul > li"),"create_node")}if("rename_node"==e.func){f.push(e.args[1]);m=this._get_node(e.args[0]);g=this._get_parent(m);if(!g||-1===g)g=this.get_container();g=this._check_unique(f,g.find("> ul > li").not(m),"rename_node")}if(!g)return a.stopPropagation(),
!1},this))},defaults:{error_callback:c.noop},_fn:{_check_unique:function(a,e,f){var g=[],m=!0;e.children("a").each(function(){g.push(c(this).text().replace(/^\s+/g,""))});if(!g.length||!a.length)return!0;c.each(a,function(a,e){if(-1!==c.inArray(e,g))return m=!1});m||this._get_settings().unique.error_callback.call(null,a,e,f);return m},check_move:function(){if(!this.__call_old())return!1;var a=this._get_move(),e=[];return a.o&&a.o.length?(a.o.children("a").each(function(){e.push(c(this).text().replace(/^\s+/g,
""))}),this._check_unique(e,a.np.find("> ul > li").not(a.o),"check_move")):!0}}})})(jQuery);(function(c){c.jstree.plugin("wholerow",{__init:function(){if(!this.data.ui)throw"jsTree wholerow: jsTree UI plugin not included.";this.data.wholerow.html=!1;this.data.wholerow.to=!1;this.get_container().bind("init.jstree",c.proxy(function(a,c){this._get_settings().core.animation=0},this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",c.proxy(function(a,c){this._prepare_wholerow_span(c&&
c.rslt&&c.rslt.obj?c.rslt.obj:-1)},this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",c.proxy(function(a,c){this.data.to&&clearTimeout(this.data.to);this.data.to=setTimeout(function(a,c){return function(){a._prepare_wholerow_ul(c)}}(this,c&&c.rslt&&c.rslt.obj?c.rslt.obj:-1),0)},this)).bind("deselect_all.jstree",c.proxy(function(a,c){this.get_container().find(" > .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+
(this.data.themeroller?this._get_settings().themeroller.item_a:""))},this)).bind("select_node.jstree deselect_node.jstree ",c.proxy(function(a,e){e.rslt.obj.each(function(){e.inst.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((c(this).offset().top-e.inst.get_container().offset().top+e.inst.get_container()[0].scrollTop)/e.inst.data.core.li_height,10)+")").children("a").attr("class",e.rslt.obj.children("a").attr("class"))})},this)).bind("hover_node.jstree dehover_node.jstree",c.proxy(function(a,
c){this.get_container().find(" > .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+(this.data.themeroller?this._get_settings().themeroller.item_h:""));"hover_node"===a.type&&this.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((c.rslt.obj.offset().top-this.get_container().offset().top+this.get_container()[0].scrollTop)/this.data.core.li_height,10)+")").children("a").attr("class",c.rslt.obj.children(".jstree-hovered").attr("class"))},this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li",
"click.jstree",function(a){var e=c(a.currentTarget);"A"===a.target.tagName||"INS"===a.target.tagName&&e.closest("li").is(".jstree-open, .jstree-closed")||(e.closest("li").children("a:visible:eq(0)").click(),a.stopImmediatePropagation())}).delegate("li","mouseover.jstree",c.proxy(function(a){a.stopImmediatePropagation();if(c(a.currentTarget).children(".jstree-hovered, .jstree-clicked").length)return!1;this.hover_node(a.currentTarget);return!1},this)).delegate("li","mouseleave.jstree",c.proxy(function(a){c(a.currentTarget).children("a").hasClass("jstree-hovered").length||
this.dehover_node(a.currentTarget)},this));(m||g)&&c.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove();this.get_container().find(".jstree-wholerow-span").remove()},_fn:{_prepare_wholerow_span:function(a){a=!a||-1==a?this.get_container().find("> ul > li"):this._get_node(a);!1!==a&&a.each(function(){c(this).find("li").addBack().each(function(){var a=c(this);if(a.children(".jstree-wholerow-span").length)return!0;
a.prepend("<span class='jstree-wholerow-span' style='width:"+18*a.parentsUntil(".jstree","li").length+"px;'>&#160;</span>")})})},_prepare_wholerow_ul:function(){var a=this.get_container().children("ul").eq(0),c=a.html();a.addClass("jstree-wholerow-real");this.data.wholerow.last_html!==c&&(this.data.wholerow.last_html=c,this.get_container().children(".jstree-wholerow").remove(),this.get_container().append(a.clone().removeClass("jstree-wholerow-real").wrapAll("<div class='jstree-wholerow' />").parent().width(a.parent()[0].scrollWidth).css("top",
-1*(a.height()+(m?5:0))).find("li[id]").each(function(){this.removeAttribute("id")}).end()))}}});c(function(){var a=".jstree .jstree-wholerow-real { position:relative; z-index:1; } .jstree .jstree-wholerow-real li { cursor:pointer; } .jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } .jstree .jstree-wholerow { position:relative; z-index:0; height:0; } .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }.jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }.jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px; !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } .jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";
q&&(a+=".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } .jstree .jstree-wholerow-real a { border-color:transparent !important; } ");if(m||g)a+=".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } .jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } ";c.vakata.css.add_sheet({str:a,title:"jstree"})})})(jQuery);(function(c){var a=
["getChildren","getChildrenCount","getAttr","getName","getProps"],e=function(a,e){var g=!0;a=a||{};e=[].concat(e);c.each(e,function(e,p){if(!c.isFunction(a[p]))return g=!1});return g};c.jstree.plugin("model",{__init:function(){if(!this.data.json_data)throw"jsTree model: jsTree json_data plugin not included.";this._get_settings().json_data.data=function(f,g){var m=-1==f?this._get_settings().model.object:f.data("jstree_model");if(!e(m,a))return g.call(null,!1);this._get_settings().model.async?m.getChildren(c.proxy(function(a){this.model_done(a,
g)},this)):this.model_done(m.getChildren(),g)}},defaults:{object:!1,id_prefix:!1,async:!1},_fn:{model_done:function(a,e){var g=[],m=this._get_settings(),q=this;c.isArray(a)||(a=[a]);c.each(a,function(a,e){var f=e.getProps()||{};f.attr=e.getAttr()||{};e.getChildrenCount()&&(f.state="closed");f.data=e.getName();c.isArray(f.data)||(f.data=[f.data]);q.data.types&&c.isFunction(e.getType)&&(f.attr[m.types.type_attr]=e.getType());f.attr.id&&m.model.id_prefix&&(f.attr.id=m.model.id_prefix+f.attr.id);f.metadata||
(f.metadata={});f.metadata.jstree_model=e;g.push(f)});e.call(null,g)}}})})(jQuery)}})();
(function(g){g.color={};g.color.make=function(m,c,a,e){var f={};f.r=m||0;f.g=c||0;f.b=a||0;f.a=null!=e?e:1;f.add=function(a,c){for(var e=0;e<a.length;++e)f[a.charAt(e)]+=c;return f.normalize()};f.scale=function(a,c){for(var e=0;e<a.length;++e)f[a.charAt(e)]*=c;return f.normalize()};f.toString=function(){return 1<=f.a?"rgb("+[f.r,f.g,f.b].join()+")":"rgba("+[f.r,f.g,f.b,f.a].join()+")"};f.normalize=function(){function a(c,e,f){return e<c?c:e>f?f:e}f.r=a(0,parseInt(f.r),255);f.g=a(0,parseInt(f.g),255);
f.b=a(0,parseInt(f.b),255);f.a=a(0,f.a,1);return f};f.clone=function(){return g.color.make(f.r,f.b,f.g,f.a)};return f.normalize()};g.color.extract=function(m,c){var a;do{a=m.css(c).toLowerCase();if(""!=a&&"transparent"!=a)break;m=m.parent()}while(!g.nodeName(m.get(0),"body"));"rgba(0, 0, 0, 0)"==a&&(a="transparent");return g.color.parse(a)};g.color.parse=function(q){var c,a=g.color.make;if(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(q))return a(parseInt(c[1],10),parseInt(c[2],
10),parseInt(c[3],10));if(c=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(q))return a(parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10),parseFloat(c[4]));if(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(q))return a(2.55*parseFloat(c[1]),2.55*parseFloat(c[2]),2.55*parseFloat(c[3]));if(c=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(q))return a(2.55*
parseFloat(c[1]),2.55*parseFloat(c[2]),2.55*parseFloat(c[3]),parseFloat(c[4]));if(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(q))return a(parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16));if(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(q))return a(parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16));q=g.trim(q).toLowerCase();if("transparent"==q)return a(255,255,255,0);c=m[q]||[0,0,0];return a(c[0],c[1],c[2])};var m={aqua:[0,255,255],azure:[240,255,255],beige:[245,
245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,
144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);
(function(g,m,q){var c=m.event,a;c.special.smartresize={setup:function(){m(this).bind("resize",c.special.smartresize.handler)},teardown:function(){m(this).unbind("resize",c.special.smartresize.handler)},handler:function(c,e){var f=this,g=arguments;c.type="smartresize";a&&clearTimeout(a);a=setTimeout(function(){jQuery.event.handle.apply(f,g)},"execAsap"===e?0:100)}};m.fn.smartresize=function(a){return a?this.bind("smartresize",a):this.trigger("smartresize",["execAsap"])};m.Mason=function(a,c){this.element=
m(c);this._create(a);this._init()};var e=["position","height"];m.Mason.settings={isResizable:!0,isAnimated:!1,animationOptions:{queue:!1,duration:500},gutterWidth:0,isRTL:!1,isFitWidth:!1};m.Mason.prototype={_filterFindBricks:function(a){var c=this.options.itemSelector;return c?a.filter(c).add(a.find(c)):a},_getBricks:function(a){return this._filterFindBricks(a).css({position:"absolute"}).addClass("masonry-brick")},_create:function(a){this.options=m.extend(!0,{},m.Mason.settings,a);this.styleQueue=
[];this.reloadItems();a=this.element[0].style;this.originalStyle={};for(var c=0,f=e.length;c<f;c++){var q=e[c];this.originalStyle[q]=a[q]||""}this.element.css({position:"relative"});this.horizontalDirection=this.options.isRTL?"right":"left";this.offset={};a=m(document.createElement("div"));this.element.prepend(a);this.offset.y=Math.round(a.position().top);this.options.isRTL?(a.css({"float":"right",display:"inline-block"}),this.offset.x=Math.round(this.element.outerWidth()-a.position().left)):this.offset.x=
Math.round(a.position().left);a.remove();var y=this;setTimeout(function(){y.element.addClass("masonry")},0);this.options.isResizable&&m(g).bind("smartresize.masonry",function(){y.resize()})},_init:function(a){this._getColumns("masonry");this._reLayout(a)},option:function(a,c){m.isPlainObject(a)&&(this.options=m.extend(!0,this.options,a))},layout:function(a,c){for(var e,f,g,q,v,Q,P=0,U=a.length;P<U;P++)if(e=m(a[P]),f=Math.ceil(e.outerWidth(!0)/this.columnWidth),f=Math.min(f,this.cols),1===f)this._placeBrick(e,
this.colYs);else{g=this.cols+1-f;q=[];for(Q=0;Q<g;Q++)v=this.colYs.slice(Q,Q+f),q[Q]=Math.max.apply(Math,v);this._placeBrick(e,q)}U={};U.height=Math.max.apply(Math,this.colYs)-this.offset.y;if(this.options.isFitWidth){e=0;for(P=this.cols;--P&&this.colYs[P]===this.offset.y;)e++;U.width=(this.cols-e)*this.columnWidth-this.options.gutterWidth}this.styleQueue.push({$el:this.element,style:U});e=this.isLaidOut?this.options.isAnimated?"animate":"css":"css";f=this.options.animationOptions;P=0;for(U=this.styleQueue.length;P<
U;P++)g=this.styleQueue[P],g.$el[e](g.style,f);this.styleQueue=[];c&&c.call(a);this.isLaidOut=!0},_getColumns:function(){var a=(this.options.isFitWidth?this.element.parent():this.element).width();this.columnWidth=this.options.columnWidth||this.$bricks.outerWidth(!0)||a;this.columnWidth+=this.options.gutterWidth;this.cols=Math.floor((a+this.options.gutterWidth)/this.columnWidth);this.cols=Math.max(this.cols,1)},_placeBrick:function(a,c){for(var e=Math.min.apply(Math,c),f=0,g=0,m=c.length;g<m;g++)if(c[g]===
e){f=g;break}g={top:e};g[this.horizontalDirection]=this.columnWidth*f+this.offset.x;this.styleQueue.push({$el:a,style:g});e+=a.outerHeight(!0);m=this.cols+1-m;for(g=0;g<m;g++)this.colYs[f+g]=e},resize:function(){var a=this.cols;this._getColumns("masonry");this.cols!==a&&this._reLayout()},_reLayout:function(a){var c=this.cols;for(this.colYs=[];c--;)this.colYs.push(this.offset.y);this.layout(this.$bricks,a)},reloadItems:function(){this.$bricks=this._getBricks(this.element.children())},reload:function(a){this.reloadItems();
this._init(a)},appended:function(a,c,e){if(c){this._filterFindBricks(a).css({top:this.element.height()});var f=this;setTimeout(function(){f._appended(a,e)},1)}else this._appended(a,e)},_appended:function(a,c){var e=this._getBricks(a);this.$bricks=this.$bricks.add(e);this.layout(e,c)},remove:function(a){this.$bricks=this.$bricks.not(a);a.remove()},destroy:function(){this.$bricks.removeClass("masonry-brick").each(function(){this.style.position="";this.style.top="";this.style.left=""});for(var a=this.element[0].style,
c=0,f=e.length;c<f;c++){var q=e[c];a[q]=this.originalStyle[q]}this.element.unbind(".masonry").removeClass("masonry").removeData("masonry");m(g).unbind(".masonry")}};m.fn.imagesLoaded=function(a){function c(){0>=--m&&this.src!==v&&(setTimeout(e),g.unbind("load error",c))}function e(){a.call(f,g)}var f=this,g=f.find("img").add(f.filter("img")),m=g.length,v="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";m||e();g.bind("load error",c).each(function(){if(this.complete||this.complete===
q){var a=this.src;this.src=v;this.src=a}});return f};var f=function(a){this.console&&console.error(a)};m.fn.masonry=function(a){if("string"==typeof a){var c=Array.prototype.slice.call(arguments,1);this.each(function(){var e=m.data(this,"masonry");e?!m.isFunction(e[a])||"_"===a.charAt(0)?f("no such method '"+a+"' for masonry instance"):e[a].apply(e,c):f("cannot call methods on masonry prior to initialization; attempted to call method '"+a+"'")})}else this.each(function(){var c=m.data(this,"masonry");
c?(c.option(a||{}),c._init()):m.data(this,"masonry",new m.Mason(a,this))});return this}})(window,jQuery);
jQuery.cookie=function(g,m,q){if(1<arguments.length&&"[object Object]"!==String(m)){q=jQuery.extend({},q);if(null===m||void 0===m)q.expires=-1;if("number"===typeof q.expires){var c=q.expires,a=q.expires=new Date;a.setDate(a.getDate()+c)}m=String(m);return document.cookie=[encodeURIComponent(g),"=",q.raw?m:encodeURIComponent(m),q.expires?"; expires="+q.expires.toUTCString():"",q.path?"; path="+q.path:"",q.domain?"; domain="+q.domain:"",q.secure?"; secure":""].join("")}q=m||{};a=q.raw?function(a){return a}:
decodeURIComponent;return(c=RegExp("(?:^|; )"+encodeURIComponent(g)+"=([^;]*)").exec(document.cookie))?a(c[1]):null};
d3=function(){function g(d){return null!=d&&!isNaN(d)}function m(d){return d.length}function q(d,a){try{for(var l in a)Object.defineProperty(d.prototype,l,{value:a[l],enumerable:!1})}catch(c){d.prototype=a}}function c(){}function a(){}function e(d,a,l){return function(){var c=l.apply(a,arguments);return c===a?d:c}}function f(){}function p(d){function a(){for(var x,c=l,J=-1,r=c.length;++J<r;)(x=c[J].on)&&x.apply(this,arguments);return d}var l=[],J=new c;return a.on=function(a,x){var c,r=J.get(a);return 2>
arguments.length?r&&r.on:(r&&(r.on=null,l=l.slice(0,c=l.indexOf(r)).concat(l.slice(c+1)),J.remove(a)),x&&l.push(J.set(a,{on:x})),d)},a}function t(){n.event.stopPropagation();n.event.preventDefault()}function N(){for(var d,a=n.event;d=a.sourceEvent;)a=d;return a}function la(d,a){function l(){d.on(a,null)}d.on(a,function(){t();l()},!0);setTimeout(l,0)}function y(d){for(var a=new f,l=0,c=arguments.length;++l<c;)a[arguments[l]]=p(a);return a.of=function(l,c){return function(J){try{var r=J.sourceEvent=
n.event;J.target=d;n.event=J;a[J.type].apply(l,c)}finally{n.event=r}}},a}function B(d,a){var l=d.ownerSVGElement||d;if(l.createSVGPoint){var c=l.createSVGPoint();if(0>Rb&&(ea.scrollX||ea.scrollY)){var l=n.select(ha.body).append("svg").style("position","absolute").style("top",0).style("left",0),s=l[0][0].getScreenCTM();Rb=!(s.f||s.e);l.remove()}return Rb?(c.x=a.pageX,c.y=a.pageY):(c.x=a.clientX,c.y=a.clientY),c=c.matrixTransform(d.getScreenCTM().inverse()),[c.x,c.y]}l=d.getBoundingClientRect();return[a.clientX-
l.left-d.clientLeft,a.clientY-l.top-d.clientTop]}function v(d){for(var a=-1,l=d.length,c=[];++a<l;)c.push(d[a]);return c}function Q(d){return Sb(d,S),d}function P(d){return function(){return cd(d,this)}}function U(d){return function(){return dd(d,this)}}function Ua(d,a){function l(){this.removeAttribute(d)}function c(){this.removeAttributeNS(d.space,d.local)}function s(){this.setAttribute(d,a)}function u(){this.setAttributeNS(d.space,d.local,a)}function e(){var l=a.apply(this,arguments);null==l?this.removeAttribute(d):
this.setAttribute(d,l)}function r(){var l=a.apply(this,arguments);null==l?this.removeAttributeNS(d.space,d.local):this.setAttributeNS(d.space,d.local,l)}return d=n.ns.qualify(d),null==a?d.local?c:l:"function"==typeof a?d.local?r:e:d.local?u:s}function Ja(d){return d.trim().replace(/\s+/g," ")}function ad(d){return RegExp("(?:^|\\s+)"+n.requote(d)+"(?:\\s+|$)","g")}function bd(d,a){function l(){for(var l=-1;++l<s;)d[l](this,a)}function c(){for(var l=-1,J=a.apply(this,arguments);++l<s;)d[l](this,J)}
d=d.trim().split(/\s+/).map(tf);var s=d.length;return"function"==typeof a?c:l}function tf(d){var a=ad(d);return function(l,c){if(s=l.classList)return c?s.add(d):s.remove(d);var s=l.getAttribute("class")||"";c?(a.lastIndex=0,a.test(s)||l.setAttribute("class",Ja(s+" "+d))):l.setAttribute("class",Ja(s.replace(a," ")))}}function ed(d,a,l){function c(){this.style.removeProperty(d)}function s(){this.style.setProperty(d,a,l)}function u(){var c=a.apply(this,arguments);null==c?this.style.removeProperty(d):
this.style.setProperty(d,c,l)}return null==a?c:"function"==typeof a?u:s}function fd(d,a){function l(){delete this[d]}function c(){this[d]=a}function s(){var l=a.apply(this,arguments);null==l?delete this[d]:this[d]=l}return null==a?l:"function"==typeof a?s:c}function gd(d){return function(){return hd(this,d)}}function uf(d){return arguments.length||(d=n.ascending),function(a,l){return!a-!l||d(a.__data__,l.__data__)}}function ba(){}function id(d,a,l){function c(){var a=this[e];a&&(this.removeEventListener(d,
a,a.$),delete this[e])}function s(){var s=M(a,ya(arguments));c.call(this);this.addEventListener(d,this[e]=s,s.$=l);s._=a}function u(){var a,x=RegExp("^__on([^.]+)"+n.requote(d)+"$"),l;for(l in this)if(a=l.match(x)){var c=this[l];this.removeEventListener(a[1],c,c.$);delete this[l]}}var e="__on"+d,r=d.indexOf("."),M=jd;0<r&&(d=d.substring(0,r));var f=Tb.get(d);return f&&(d=f,M=vf),r?a?s:c:a?ba:u}function jd(d,a){return function(l){var c=n.event;n.event=l;a[0]=this.__data__;try{d.apply(this,a)}finally{n.event=
c}}}function vf(d,a){var l=jd(d,a);return function(d){var a=d.relatedTarget;a&&(a===this||a.compareDocumentPosition(this)&8)||l.call(this,d)}}function za(d,a){for(var l=0,c=d.length;c>l;l++)for(var s,u=d[l],e=0,r=u.length;r>e;e++)(s=u[e])&&a(s,e,l);return d}function kd(d){return Sb(d,Ea),d}function Ka(){}function La(d,a,l){return new Vb(d,a,l)}function Vb(d,a,l){this.h=d;this.s=a;this.l=l}function eb(d,a,l){function c(d){return 360<d?d-=360:0>d&&(d+=360),60>d?s+(u-s)*d/60:180>d?u:240>d?s+(u-s)*(240-
d)/60:s}var s,u;return d%=360,0>d&&(d+=360),a=0>a?0:1<a?1:a,l=0>l?0:1<l?1:l,u=0.5>=l?l*(1+a):l+a-l*a,s=2*l-u,sa(Math.round(255*c(d+120)),Math.round(255*c(d)),Math.round(255*c(d-120)))}function ld(d){return(d=Math.sin(d/2))*d}function Ma(d,a,l){return new fb(d,a,l)}function fb(d,a,l){this.h=d;this.c=a;this.l=l}function Wb(d,a,l){return Na(l,Math.cos(d*=I)*a,Math.sin(d)*a)}function Na(d,a,l){return new gb(d,a,l)}function gb(d,a,l){this.l=d;this.a=a;this.b=l}function md(d,a,l){d=(d+16)/116;a=d+a/500;
l=d-l/200;return a=Xb(a)*nd,d=Xb(d)*od,l=Xb(l)*pd,sa(Yb(3.2404542*a-1.5371385*d-0.4985314*l),Yb(-0.969266*a+1.8760108*d+0.041556*l),Yb(0.0556434*a-0.2040259*d+1.0572252*l))}function Xb(d){return 0.206893034<d?d*d*d:(d-4/29)/7.787037}function Zb(d){return 0.008856<d?Math.pow(d,1/3):7.787037*d+4/29}function Yb(d){return Math.round(255*(0.00304>=d?12.92*d:1.055*Math.pow(d,1/2.4)-0.055))}function sa(d,a,l){return new $b(d,a,l)}function $b(d,a,l){this.r=d;this.g=a;this.b=l}function Oa(d){return 16>d?"0"+
Math.max(0,d).toString(16):Math.min(255,d).toString(16)}function ac(d,a,l){var c,s,u,e=0,r=0,M=0;if(c=/([a-z]+)\((.*)\)/i.exec(d))switch(s=c[2].split(","),c[1]){case "hsl":return l(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100);case "rgb":return a(bc(s[0]),bc(s[1]),bc(s[2]))}return(u=hb.get(d))?a(u.r,u.g,u.b):(null!=d&&"#"===d.charAt(0)&&(4===d.length?(e=d.charAt(1),e+=e,r=d.charAt(2),r+=r,M=d.charAt(3),M+=M):7===d.length&&(e=d.substring(1,3),r=d.substring(3,5),M=d.substring(5,7)),e=
parseInt(e,16),r=parseInt(r,16),M=parseInt(M,16)),a(e,r,M))}function qd(d,a,l){var c,s,u=Math.min(d/=255,a/=255,l/=255),e=Math.max(d,a,l),r=e-u,M=(e+u)/2;return r?(s=0.5>M?r/(e+u):r/(2-e-u),c=d==e?(a-l)/r+(l>a?6:0):a==e?(l-d)/r+2:(d-a)/r+4,c*=60):s=c=0,La(c,s,M)}function rd(d,a,l){d=cc(d);a=cc(a);l=cc(l);var c=Zb((0.4124564*d+0.3575761*a+0.1804375*l)/nd),s=Zb((0.2126729*d+0.7151522*a+0.072175*l)/od);d=Zb((0.0193339*d+0.119192*a+0.9503041*l)/pd);return Na(116*s-16,500*(c-s),200*(s-d))}function cc(d){return 0.04045>=
(d/=255)?d/12.92:Math.pow((d+0.055)/1.055,2.4)}function bc(d){var a=parseFloat(d);return"%"===d.charAt(d.length-1)?Math.round(2.55*a):a}function L(d){return"function"==typeof d?d:function(){return d}}function ja(d){return d}function wf(d){return 1===d.length?function(a,l){d(null==a?l:null)}:d}function sd(d,x){function l(d,a,l){3>arguments.length&&(l=a,a=null);var u=n.xhr(d,x,l);return u.row=function(d){return arguments.length?u.response(null==(a=d)?c:s(d)):a},u.row(a)}function c(d){return l.parse(d.responseText)}
function s(d){return function(a){return l.parse(a.responseText,d)}}function u(a){return a.map(e).join(d)}function e(d){return r.test(d)?'"'+d.replace(/\"/g,'""')+'"':d}var r=RegExp('["'+d+"\n]"),M=d.charCodeAt(0);return l.parse=function(d,a){var x;return l.parseRows(d,function(d,l){if(x)return x(d,l-1);var c=Function("d","return {"+d.map(function(d,a){return JSON.stringify(d)+": d["+a+"]"}).join(",")+"}");x=a?function(d,x){return a(c(d),x)}:c})},l.parseRows=function(d,a){function x(){if(r>=e)return s;
if(c)return c=!1,J;var a=r;if(34===d.charCodeAt(a)){for(var l=a;l++<e;)if(34===d.charCodeAt(l)){if(34!==d.charCodeAt(l+1))break;++l}r=l+2;var u=d.charCodeAt(l+1);return 13===u?(c=!0,10===d.charCodeAt(l+2)&&++r):10===u&&(c=!0),d.substring(a+1,l).replace(/""/g,'"')}for(;e>r;){u=d.charCodeAt(r++);l=1;if(10===u)c=!0;else if(13===u)c=!0,10===d.charCodeAt(r)&&(++r,++l);else if(u!==M)continue;return d.substring(a,r-l)}return d.substring(a)}for(var l,c,J={},s={},u=[],e=d.length,r=0,T=0;(l=x())!==s;){for(var f=
[];l!==J&&l!==s;)f.push(l),l=x();(!a||(f=a(f,T++)))&&u.push(f)}return u},l.format=function(x){if(Array.isArray(x[0]))return l.formatRows(x);var c=new a,J=[];return x.forEach(function(d){for(var a in d)c.has(a)||J.push(c.add(a))}),[J.map(e).join(d)].concat(x.map(function(a){return J.map(function(d){return e(a[d])}).join(d)})).join("\n")},l.formatRows=function(d){return d.map(u).join("\n")},l}function dc(){for(var d,a=Date.now(),l=Pa;l;)d=a-l.then,d>=l.delay&&(l.flush=l.callback(d)),l=l.next;d=td()-
a;24<d?(isFinite(d)&&(clearTimeout(jb),jb=setTimeout(dc,d)),kb=0):(kb=1,ud(dc))}function td(){for(var d=null,a=Pa,l=1/0;a;)a.flush?(delete ec[a.callback.id],a=d?d.next=a.next:Pa=a.next):(l=Math.min(l,a.then+a.delay),a=(d=a).next);return l}function fc(d,a){return a-(d?Math.ceil(Math.log(d)/Math.LN10):1)}function xf(d){return d+""}function lb(d,a){d&&vd.hasOwnProperty(d.type)&&vd[d.type](d,a)}function gc(d,a,l){var c=-1,s=d.length-l;for(a.lineStart();++c<s;)l=d[c],a.point(l[0],l[1]);a.lineEnd()}function wd(d,
a){var l=-1,c=d.length;for(a.polygonStart();++l<c;)gc(d[l],a,1);a.polygonEnd()}function yf(){function d(d,a){d*=I;a=a*I/2+D/4;var l=d-c,x=Math.cos(a),e=Math.sin(a),f=u*e,g=mb,n=nb,m=s*x+f*Math.cos(l),l=f*Math.sin(l);mb=g*m-n*l;nb=n*m+g*l;c=d;s=x;u=e}var a,l,c,s,u;Aa.point=function(e,r){Aa.point=d;c=(a=e)*I;s=Math.cos(r=(l=r)*I/2+D/4);u=Math.sin(r)};Aa.lineEnd=function(){d(a,l)}}function xd(d){function a(d,l){c>d&&(c=d);d>u&&(u=d);s>l&&(s=l);l>e&&(e=l)}function l(){r.point=r.lineEnd=ba}var c,s,u,e,
r={point:a,lineStart:ba,lineEnd:ba,polygonStart:function(){r.lineEnd=l},polygonEnd:function(){r.point=a}};return function(a){return e=u=-(c=s=1/0),n.geo.stream(a,d(r)),[[c,s],[u,e]]}}function yd(d,a){if(!da){++ma;d*=I;var l=Math.cos(a*=I);Z+=(l*Math.cos(d)-Z)/ma;aa+=(l*Math.sin(d)-aa)/ma;Y+=(Math.sin(a)-Y)/ma}}function zf(){var d,a;da=1;hc();da=2;var l=na.point;na.point=function(c,s){l(d=c,a=s)};na.lineEnd=function(){na.point(d,a);ic();na.lineEnd=ic}}function hc(){function d(d,u){d*=I;var e=Math.cos(u*=
I),r=e*Math.cos(d),e=e*Math.sin(d),M=Math.sin(u),f=Math.atan2(Math.sqrt((f=l*M-c*e)*f+(f=c*r-a*M)*f+(f=a*e-l*r)*f),a*r+l*e+c*M);ma+=f;Z+=f*(a+(a=r));aa+=f*(l+(l=e));Y+=f*(c+(c=M))}var a,l,c;1<da||(1>da&&(da=1,ma=Z=aa=Y=0),na.point=function(s,u){s*=I;var e=Math.cos(u*=I);a=e*Math.cos(s);l=e*Math.sin(s);c=Math.sin(u);na.point=d})}function ic(){na.point=yd}function ob(d){var a=d[0];d=d[1];var l=Math.cos(d);return[l*Math.cos(a),l*Math.sin(a),Math.sin(d)]}function pb(d,a){return d[0]*a[0]+d[1]*a[1]+d[2]*
a[2]}function zd(d,a){return[d[1]*a[2]-d[2]*a[1],d[2]*a[0]-d[0]*a[2],d[0]*a[1]-d[1]*a[0]]}function jc(d,a){d[0]+=a[0];d[1]+=a[1];d[2]+=a[2]}function qb(d,a){return[d[0]*a,d[1]*a,d[2]*a]}function Va(){return!0}function kc(d){return[Math.atan2(d[1],d[0]),Math.asin(Math.max(-1,Math.min(1,d[2])))]}function rb(d,a){return Math.abs(d[0]-a[0])<O&&Math.abs(d[1]-a[1])<O}function Ad(d,a,l,c,s){var u=[],e=[];if(d.forEach(function(d){if(!(0>=(a=d.length-1))){var a,l=d[0],x=d[a];if(rb(l,x)){s.lineStart();for(x=
0;a>x;++x)s.point((l=d[x])[0],l[1]);return s.lineEnd(),void 0}d={point:l,points:d,other:null,visited:!1,entry:!0,subject:!0};l={point:l,points:[l],other:d,visited:!1,entry:!1,subject:!1};d.other=l;u.push(d);e.push(l);d={point:x,points:[x],other:null,visited:!1,entry:!1,subject:!0};l={point:x,points:[x],other:d,visited:!1,entry:!0,subject:!1};d.other=l;u.push(d);e.push(l)}}),e.sort(a),Bd(u),Bd(e),u.length){if(l){d=1;l=!l(e[0].point);for(a=e.length;a>d;++d)e[d].entry=l=!l}for(var r,M=u[0];;){for(l=
M;l.visited;)if((l=l.next)===M)return;a=l.points;s.lineStart();do{if(l.visited=l.other.visited=!0,l.entry){if(l.subject)for(d=0;d<a.length;d++)s.point((r=a[d])[0],r[1]);else c(l.point,l.next.point,1,s);l=l.next}else{if(l.subject){a=l.prev.points;for(d=a.length;0<=--d;)s.point((r=a[d])[0],r[1])}else c(l.point,l.prev.point,-1,s);l=l.prev}l=l.other;a=l.points}while(!l.visited);s.lineEnd()}}}function Bd(d){if(a=d.length){for(var a,l,c=0,s=d[0];++c<a;)s.next=l=d[c],l.prev=s,s=l;s.next=l=d[0];l.prev=s}}
function Cd(d,a,l){return function(c){function s(a,l){d(a,l)&&c.point(a,l)}function u(d,a){C.point(d,a)}function e(){A.point=u;C.lineStart()}function r(){A.point=s;C.lineEnd()}function M(d,a){R.point(d,a);z.push([d,a])}function f(){R.lineStart();z=[]}function g(){M(z[0][0],z[0][1]);R.lineEnd();var d;d=R.clean();var a=G.buffer(),l=a.length;if(!l)return E=!0,q+=Dd(z,-1),z=null,void 0;if(z=null,1&d){d=a[0];p+=Dd(d,1);var x,l=d.length-1,a=-1;for(c.lineStart();++a<l;)c.point((x=d[a])[0],x[1]);return c.lineEnd(),
void 0}1<l&&2&d&&a.push(a.pop().concat(a.shift()));m.push(a.filter(Af))}var m,p,q,E,z,C=a(c),A={point:s,lineStart:e,lineEnd:r,polygonStart:function(){A.point=M;A.lineStart=f;A.lineEnd=g;E=!1;q=p=0;m=[];c.polygonStart()},polygonEnd:function(){A.point=s;A.lineStart=e;A.lineEnd=r;m=n.merge(m);m.length?Ad(m,Bf,null,l,c):(-O>p||E&&-O>q)&&(c.lineStart(),l(null,null,1,c),c.lineEnd());c.polygonEnd();m=null},sphere:function(){c.polygonStart();c.lineStart();l(null,null,1,c);c.lineEnd();c.polygonEnd()}},G=Ed(),
R=a(G);return A}}function Af(d){return 1<d.length}function Ed(){var d,a=[];return{lineStart:function(){a.push(d=[])},point:function(a,x){d.push([a,x])},lineEnd:ba,buffer:function(){var l=a;return a=[],d=null,l},rejoin:function(){1<a.length&&a.push(a.pop().concat(a.shift()))}}}function Dd(d,a){if(!(l=d.length))return 0;var l,c,s,u=0,e=0;c=d[0];s=c[0];for(var r=c[1],M=Math.cos(r),f=Math.atan2(a*Math.sin(s)*M,Math.sin(r)),g=1-a*Math.cos(s)*M,n=f;++u<l;)c=d[u],M=Math.cos(r=c[1]),c=Math.atan2(a*Math.sin(s=
c[0])*M,Math.sin(r)),s=1-a*Math.cos(s)*M,Math.abs(g-2)<O&&Math.abs(s-2)<O||(Math.abs(s)<O||Math.abs(g)<O||(Math.abs(Math.abs(c-f)-D)<O?2<s+g&&(e+=4*(c-f)):e+=Math.abs(g-2)<O?4*(c-n):((3*D+c-f)%(2*D)-D)*(g+s)),n=f,f=c,g=s);return e}function Bf(d,a){return(0>(d=d.point)[0]?d[1]-D/2-O:D/2-d[1])-(0>(a=a.point)[0]?a[1]-D/2-O:D/2-a[1])}function Cf(d){function a(d,l){return Math.cos(d)*Math.cos(l)>s}function l(d,a,l){var x=ob(d),c=ob(a),J=[1,0,0],c=zd(x,c),u=pb(c,c),x=c[0],e=u-x*x;if(!e)return!l&&d;u=s*
u/e;e=-s*x/e;x=zd(J,c);J=qb(J,u);c=qb(c,e);jc(J,c);c=pb(J,x);u=pb(x,x);e=c*c-u*(pb(J,J)-1);if(!(0>e)){var r=Math.sqrt(e),e=qb(x,(-c-r)/u);if(jc(e,J),e=kc(e),!l)return e;var f;l=d[0];var T=a[0];d=d[1];a=a[1];l>T&&(f=l,l=T,T=f);var g=T-l,n=Math.abs(g-D)<O,m=n||O>g;if(!n&&d>a&&(f=d,d=a,a=f),m?n?0<d+a^e[1]<(Math.abs(e[0]-l)<O?d:a):d<=e[1]&&e[1]<=a:g>D^(l<=e[0]&&e[0]<=T))return f=qb(x,(-c+r)/u),jc(f,J),[e,kc(f)]}}function c(a,l){var x=u?d:D-d,s=0;return-x>a?s|=1:a>x&&(s|=2),-x>l?s|=4:l>x&&(s|=8),s}var s=
Math.cos(d),u=0<s,e=Math.abs(s)>O,r=lc(d,6*I);return Cd(a,function(d){var s,r,f,g,n;return{lineStart:function(){g=f=!1;n=1},point:function(m,p){var q,A=[m,p],G=a(m,p),R=u?G?0:c(m,p):G?c(m+(0>m?D:-D),p):0;if(!s&&(g=f=G)&&d.lineStart(),G!==f&&(q=l(s,A),(rb(s,q)||rb(A,q))&&(A[0]+=O,A[1]+=O,G=a(A[0],A[1]))),G!==f)n=0,G?(d.lineStart(),q=l(A,s),d.point(q[0],q[1])):(q=l(s,A),d.point(q[0],q[1]),d.lineEnd()),s=q;else if(e&&s&&u^G){var H;R&r||!(H=l(A,s,!0))||(n=0,u?(d.lineStart(),d.point(H[0][0],H[0][1]),d.point(H[1][0],
H[1][1]),d.lineEnd()):(d.point(H[1][0],H[1][1]),d.lineEnd(),d.lineStart(),d.point(H[0][0],H[0][1])))}!G||s&&rb(s,A)||d.point(A[0],A[1]);s=A;f=G;r=R},lineEnd:function(){f&&d.lineEnd();s=null},clean:function(){return n|(g&&f)<<1}}},r)}function Df(d,a,l,c){function s(c,s){return Math.abs(c[0]-d)<O?0<s?0:3:Math.abs(c[0]-l)<O?0<s?2:1:Math.abs(c[1]-a)<O?0<s?1:0:0<s?3:2}function u(d,a){return e(d.point,a.point)}function e(d,a){var l=s(d,1),x=s(a,1);return l!==x?l-x:0===l?a[1]-d[1]:1===l?d[0]-a[0]:2===l?
d[1]-a[1]:a[0]-d[0]}return function(r){function f(u){u=s(u,-1);return g([0===u||3===u?d:l,1<u?c:a])}function g(d){for(var a=0,l=E.length,x=d[1],c=0;l>c;++c)for(var s=1,u=E[c],J=u.length,e=u[0];J>s;++s)b=u[s],e[1]<=x?b[1]>x&&0<(b[0]-e[0])*(d[1]-e[1])-(d[0]-e[0])*(b[1]-e[1])&&++a:b[1]<=x&&0>(b[0]-e[0])*(d[1]-e[1])-(d[0]-e[0])*(b[1]-e[1])&&--a,e=b;return 0!==a}function m(u,r,f,M){var g=0,n=0;if(null==u||(g=s(u,f))!==(n=s(r,f))||0>e(u,r)^0<f){do M.point(0===g||3===g?d:l,1<g?c:a);while((g=(g+f+4)%4)!==
n)}else M.point(r[0],r[1])}function p(s,u){s>=d&&(l>=s&&u>=a&&c>=u)&&r.point(s,u)}function F(s,u){s=Math.max(-sb,Math.min(sb,s));u=Math.max(-sb,Math.min(sb,u));var e=s>=d&&l>=s&&u>=a&&c>=u;if(E&&z.push([s,u]),X)C=s,A=u,G=e,X=!1,e&&(r.lineStart(),r.point(s,u));else if(e&&t)r.point(s,u);else{var f=[R,H],T=[s,u],M=T[0]-f[0],g=T[1]-f[1],n=[0,1];(Math.abs(M)<O&&Math.abs(g)<O?d<=f[0]&&f[0]<=l&&a<=f[1]&&f[1]<=c:tb(d-f[0],M,n)&&(tb(f[0]-l,-M,n)&&tb(a-f[1],g,n)&&tb(f[1]-c,-g,n))&&(1>n[1]&&(T[0]=f[0]+n[1]*
M,T[1]=f[1]+n[1]*g),0<n[0]&&(f[0]+=n[0]*M,f[1]+=n[0]*g),!0))?(t||(r.lineStart(),r.point(f[0],f[1])),r.point(T[0],T[1]),e||r.lineEnd()):(r.lineStart(),r.point(s,u))}R=s;H=u;t=e}var q,E,z,C,A,G,R,H,t,X,W=r,v=Ed(),ta={point:p,lineStart:function(){ta.point=F;E&&E.push(z=[]);X=!0;t=!1;R=H=0/0},lineEnd:function(){q&&(F(C,A),G&&t&&v.rejoin(),q.push(v.buffer()));ta.point=p;t&&r.lineEnd()},polygonStart:function(){r=v;q=[];E=[]},polygonEnd:function(){r=W;(q=n.merge(q)).length?(r.polygonStart(),Ad(q,u,f,m,r),
r.polygonEnd()):g([d,a])&&(r.polygonStart(),r.lineStart(),m(null,null,1,r),r.lineEnd(),r.polygonEnd());q=E=z=null}};return ta}}function tb(d,a,l){if(Math.abs(a)<O)return 0>=d;d/=a;if(0<a){if(d>l[1])return!1;d>l[0]&&(l[0]=d)}else{if(d<l[0])return!1;d<l[1]&&(l[1]=d)}return!0}function Fd(d,a){function l(l,c){return l=d(l,c),a(l[0],l[1])}return d.invert&&a.invert&&(l.invert=function(l,c){return l=a.invert(l,c),l&&d.invert(l[0],l[1])}),l}function Gd(d){function a(x){function c(a,l){a=d(a,l);x.point(a[0],
a[1])}function J(){m=0/0;A.point=e;x.lineStart()}function e(a,c){var J=ob([a,c]),r=d(a,c);l(m,p,n,q,z,C,m=r[0],p=r[1],n=a,q=J[0],z=J[1],C=J[2],s,x);x.point(m,p)}function f(){A.point=c;x.lineEnd()}function g(){var d,a,c,T,pa,t;J();A.point=function(l,x){e(d=l,x);a=m;c=p;T=q;pa=z;t=C;A.point=e};A.lineEnd=function(){l(m,p,n,q,z,C,a,c,d,T,pa,t,s,x);A.lineEnd=f;f()}}var n,m,p,q,z,C,A={point:c,lineStart:J,lineEnd:f,polygonStart:function(){x.polygonStart();A.lineStart=g},polygonEnd:function(){x.polygonEnd();
A.lineStart=J}};return A}function l(a,x,s,e,f,g,n,m,p,q,z,C,A,G){var R=n-a,H=m-x,t=R*R+H*H;if(t>4*c&&A--){var X=e+q,W=f+z,v=g+C,ta=Math.sqrt(X*X+W*W+v*v),y=Math.asin(v/=ta),D=Math.abs(Math.abs(v)-1)<O?(s+p)/2:Math.atan2(W,X),B=d(D,y),y=B[0],B=B[1],I=y-a,N=B-x,P=H*I-R*N;(P*P/t>c||0.3<Math.abs((R*I+H*N)/t-0.5))&&(l(a,x,s,e,f,g,y,B,D,X/=ta,W/=ta,v,A,G),G.point(y,B),l(y,B,D,X,W,v,n,m,p,q,z,C,A,G))}}var c=0.5,s=16;return a.precision=function(d){return arguments.length?(s=0<(c=d*d)&&16,a):Math.sqrt(c)},
a}function Ba(d){return mc(function(){return d})()}function mc(d){function a(d){return d=e(d[0]*I,d[1]*I),[d[0]*m+r,f-d[1]*m]}function l(d){return d=e.invert((d[0]-r)/m,(f-d[1])/m),d&&[d[0]*V,d[1]*V]}function c(){e=Fd(u=nc(z,C,A),s);var d=s(t,E);return r=p-d[0]*m,f=q+d[1]*m,a}var s,u,e,r,f,g=Gd(function(d,a){return d=s(d,a),[d[0]*m+r,f-d[1]*m]}),m=150,p=480,q=250,t=0,E=0,z=0,C=0,A=0,G=Hd,R=ja,H=null,v=null;return a.stream=function(d){return Ff(u,G(g(R(d))))},a.clipAngle=function(d){return arguments.length?
(G=null==d?(H=d,Hd):Cf((H=+d)*I),a):H},a.clipExtent=function(d){return arguments.length?(v=d,R=null==d?ja:Df(d[0][0],d[0][1],d[1][0],d[1][1]),a):v},a.scale=function(d){return arguments.length?(m=+d,c()):m},a.translate=function(d){return arguments.length?(p=+d[0],q=+d[1],c()):[p,q]},a.center=function(d){return arguments.length?(t=d[0]%360*I,E=d[1]%360*I,c()):[t*V,E*V]},a.rotate=function(d){return arguments.length?(z=d[0]%360*I,C=d[1]%360*I,A=2<d.length?d[2]%360*I:0,c()):[z*V,C*V,A*V]},n.rebind(a,g,
"precision"),function(){return s=d.apply(this,arguments),a.invert=s.invert&&l,c()}}function Ff(d,a){return{point:function(l,c){c=d(l*I,c*I);l=c[0];a.point(l>D?l-2*D:-D>l?l+2*D:l,c[1])},sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function Wa(d,a){return[d,a]}function nc(d,a,l){return d?a||l?Fd(Id(d),Jd(a,l)):Id(d):a||l?Jd(a,l):Wa}function Kd(d){return function(a,l){return a+=
d,[a>D?a-2*D:-D>a?a+2*D:a,l]}}function Id(d){var a=Kd(d);return a.invert=Kd(-d),a}function Jd(d,a){function l(d,a){var l=Math.cos(a),x=Math.cos(d)*l,l=Math.sin(d)*l,f=Math.sin(a),g=f*c+x*s;return[Math.atan2(l*u-g*e,x*c-f*s),Math.asin(Math.max(-1,Math.min(1,g*u+l*e)))]}var c=Math.cos(d),s=Math.sin(d),u=Math.cos(a),e=Math.sin(a);return l.invert=function(d,a){var l=Math.cos(a),x=Math.cos(d)*l,l=Math.sin(d)*l,f=Math.sin(a),g=f*u-l*e;return[Math.atan2(l*u+f*e,x*c+g*s),Math.asin(Math.max(-1,Math.min(1,
g*c-x*s)))]},l}function lc(d,a){var l=Math.cos(d),c=Math.sin(d);return function(s,u,e,r){null!=s?(s=Ld(l,s),u=Ld(l,u),(0<e?u>s:s>u)&&(s+=2*e*D)):(s=d+2*e*D,u=d);for(var f,g=e*a;0<e?s>u:u>s;s-=g)r.point((f=kc([l,-c*Math.cos(s),-c*Math.sin(s)]))[0],f[1])}}function Ld(d,a){var l=ob(a);l[0]-=d;var c=Math.sqrt(l[0]*l[0]+l[1]*l[1]+l[2]*l[2]);l[0]/=c;l[1]/=c;l[2]/=c;c=Math.acos(Math.max(-1,Math.min(1,-l[1])));return((0>-l[2]?-c:c)+2*Math.PI-O)%(2*Math.PI)}function Md(d,a,l){var c=n.range(d,a-O,l).concat(a);
return function(d){return c.map(function(a){return[d,a]})}}function Nd(d,a,l){var c=n.range(d,a-O,l).concat(a);return function(d){return c.map(function(a){return[a,d]})}}function oc(d){return d.source}function pc(d){return d.target}function Gf(d,a,l,c){var s=Math.cos(a),u=Math.sin(a),e=Math.cos(c),r=Math.sin(c),f=s*Math.cos(d),g=s*Math.sin(d),n=e*Math.cos(l),m=e*Math.sin(l),p=2*Math.asin(Math.sqrt(ld(c-a)+s*e*ld(l-d))),q=1/Math.sin(p);l=p?function(d){var a=Math.sin(d*=p)*q,l=Math.sin(p-d)*q;d=l*f+
a*n;var x=l*g+a*m,a=l*u+a*r;return[Math.atan2(x,d)*V,Math.atan2(a,Math.sqrt(d*d+x*x))*V]}:function(){return[d*V,a*V]};return l.distance=p,l}function qc(d){var a=0,l=D/3,c=mc(d);d=c(a,l);return d.parallels=function(d){return arguments.length?c(a=d[0]*D/180,l=d[1]*D/180):[180*(a/D),180*(l/D)]},d}function Od(d,a){function l(d,a){var l=Math.sqrt(u-2*s*Math.sin(a))/s;return[l*Math.sin(d*=s),e-l*Math.cos(d)]}var c=Math.sin(d),s=(c+Math.sin(a))/2,u=1+c*(2*s-c),e=Math.sqrt(u)/s;return l.invert=function(d,
a){var l=e-a;return[Math.atan2(d,l)/s,Math.asin((u-(d*d+l*l)*s*s)/(2*s))]},l}function rc(d,a){var l=d(a[0]),c=d([0.5*(a[0][0]+a[1][0]),a[0][1]]),s=d([a[1][0],a[0][1]]),u=d(a[1]),e=(c[1]-l[1])/(c[0]-l[0]),r=(s[1]-c[1])/(s[0]-c[0]),f=0.5*(e*r*(l[1]-s[1])+r*(l[0]+c[0])-e*(c[0]+s[0]))/(r-e),g=(0.5*(l[0]+c[0])-f)/e+0.5*(l[1]+c[1]),c=u[0]-f,u=u[1]-g,s=l[0]-f,l=l[1]-g,n=c*c+u*u,m=s*s+l*l,p=Math.atan2(u,c),q=Math.atan2(l,s);return function(a){var l=a[0]-f,x=a[1]-g,c=l*l+x*x,l=Math.atan2(x,l);return c>n&&
m>c&&l>p&&q>l?d.invert(a):void 0}}function Hf(){function d(d,a){ub+=s*d-c*a;c=d;s=a}var a,l,c,s;Ca.point=function(u,e){Ca.point=d;a=c=u;l=s=e};Ca.lineEnd=function(){d(a,l)}}function If(){function d(d,a){e.push("M",d,",",a,u)}function a(d,c){e.push("M",d,",",c);r.point=l}function l(d,a){e.push("L",d,",",a)}function c(){r.point=d}function s(){e.push("Z")}var u=Pd(4.5),e=[],r={point:d,lineStart:function(){r.point=a},lineEnd:c,polygonStart:function(){r.lineEnd=s},polygonEnd:function(){r.lineEnd=c;r.point=
d},pointRadius:function(d){return u=Pd(d),r},result:function(){if(e.length){var d=e.join("");return e=[],d}}};return r}function sc(d,a){da||(Z+=d,aa+=a,++Y)}function Qd(){function d(d,c){var u=d-a,e=c-l,u=Math.sqrt(u*u+e*e);Z+=u*(a+d)/2;aa+=u*(l+c)/2;Y+=u;a=d;l=c}var a,l;if(1!==da){if(!(1>da))return;da=1;Z=aa=Y=0}oa.point=function(c,s){oa.point=d;a=c;l=s}}function Rd(){oa.point=sc}function Jf(){function d(d,a){var l=s*d-c*a;Z+=l*(c+d);aa+=l*(s+a);Y+=3*l;c=d;s=a}var a,l,c,s;2>da&&(da=2,Z=aa=Y=0);oa.point=
function(u,e){oa.point=d;a=c=u;l=s=e};oa.lineEnd=function(){d(a,l)}}function Kf(d){function a(l,c){d.moveTo(l,c);d.arc(l,c,e,0,2*D)}function l(a,l){d.moveTo(a,l);r.point=c}function c(a,l){d.lineTo(a,l)}function s(){r.point=a}function u(){d.closePath()}var e=4.5,r={point:a,lineStart:function(){r.point=l},lineEnd:s,polygonStart:function(){r.lineEnd=u},polygonEnd:function(){r.lineEnd=s;r.point=a},pointRadius:function(d){return e=d,r},result:ba};return r}function Pd(d){return"m0,"+d+"a"+d+","+d+" 0 1,1 0,"+
-2*d+"a"+d+","+d+" 0 1,1 0,"+2*d+"z"}function Lf(d){var a=Gd(function(a,c){return d([a*V,c*V])});return function(d){return d=a(d),{point:function(a,c){d.point(a*I,c*I)},sphere:function(){d.sphere()},lineStart:function(){d.lineStart()},lineEnd:function(){d.lineEnd()},polygonStart:function(){d.polygonStart()},polygonEnd:function(){d.polygonEnd()}}}}function Xa(d,a){function l(a,l){var c=Math.cos(a),x=Math.cos(l),c=d(c*x);return[c*x*Math.sin(a),c*Math.sin(l)]}return l.invert=function(d,l){var c=Math.sqrt(d*
d+l*l),e=a(c),r=Math.sin(e),e=Math.cos(e);return[Math.atan2(d*r,c*e),Math.asin(c&&l*r/c)]},l}function Sd(d,a){function l(d,a){var l=Math.abs(Math.abs(a)-D/2)<O?0:e/Math.pow(Math.tan(D/4+a/2),s);return[l*Math.sin(s*d),e-l*Math.cos(s*d)]}var c=Math.cos(d),s=d===a?Math.sin(d):Math.log(c/Math.cos(a))/Math.log(Math.tan(D/4+a/2)/Math.tan(D/4+d/2)),e=c*Math.pow(Math.tan(D/4+d/2),s)/s;return s?(l.invert=function(d,a){var l=e-a,c=(0<s?1:0>s?-1:0)*Math.sqrt(d*d+l*l);return[Math.atan2(d,l)/s,2*Math.atan(Math.pow(e/
c,1/s))-D/2]},l):vb}function Td(d,a){function l(d,a){var l=e-a;return[l*Math.sin(s*d),e-l*Math.cos(s*d)]}var c=Math.cos(d),s=d===a?Math.sin(d):(c-Math.cos(a))/(a-d),e=c/s+d;return Math.abs(s)<O?Wa:(l.invert=function(d,a){var l=e-a;return[Math.atan2(d,l)/s,e-(0<s?1:0>s?-1:0)*Math.sqrt(d*d+l*l)]},l)}function vb(d,a){return[d,Math.log(Math.tan(D/4+a/2))]}function Ud(d){var a,l=Ba(d),c=l.scale,s=l.translate,e=l.clipExtent;return l.scale=function(){var d=c.apply(l,arguments);return d===l?a?l.clipExtent(null):
l:d},l.translate=function(){var d=s.apply(l,arguments);return d===l?a?l.clipExtent(null):l:d},l.clipExtent=function(d){var r=e.apply(l,arguments);if(r===l){if(a=null==d){var f=D*c(),g=s();e([[g[0]-f,g[1]-f],[g[0]+f,g[1]+f]])}}else a&&(r=null);return r},l.clipExtent(null)}function tc(d,a){var l=Math.cos(a)*Math.sin(d);return[Math.log((1+l)/(1-l))/2,Math.atan2(Math.tan(a),Math.cos(d))]}function Vd(d){function a(x){function f(){T.push("M",e(d(n),r))}for(var g,T=[],n=[],m=-1,p=x.length,q=L(l),C=L(c);++m<
p;)s.call(this,g=x[m],m)?n.push([+q.call(this,g,m),+C.call(this,g,m)]):n.length&&(f(),n=[]);return n.length&&f(),T.length?T.join(""):null}var l=qa,c=ua,s=Va,e=ka,f=e.key,r=0.7;return a.x=function(d){return arguments.length?(l=d,a):l},a.y=function(d){return arguments.length?(c=d,a):c},a.defined=function(d){return arguments.length?(s=d,a):s},a.interpolate=function(d){return arguments.length?(f="function"==typeof d?e=d:(e=uc.get(d)||ka).key,a):f},a.tension=function(d){return arguments.length?(r=d,a):
r},a}function qa(d){return d[0]}function ua(d){return d[1]}function ka(d){return d.join("L")}function vc(d){for(var a=0,l=d.length,c=d[0],s=[c[0],",",c[1]];++a<l;)s.push("V",(c=d[a])[1],"H",c[0]);return s.join("")}function wc(d){for(var a=0,l=d.length,c=d[0],s=[c[0],",",c[1]];++a<l;)s.push("H",(c=d[a])[0],"V",c[1]);return s.join("")}function wb(d,a){if(1>a.length||d.length!=a.length&&d.length!=a.length+2)return ka(d);var l=d.length!=a.length,c="",s=d[0],e=d[1],f=a[0],r=f,g=1;if(l&&(c+="Q"+(e[0]-2*
f[0]/3)+","+(e[1]-2*f[1]/3)+","+e[0]+","+e[1],s=d[1],g=2),1<a.length){r=a[1];e=d[g];g++;c+="C"+(s[0]+f[0])+","+(s[1]+f[1])+","+(e[0]-r[0])+","+(e[1]-r[1])+","+e[0]+","+e[1];for(s=2;s<a.length;s++,g++)e=d[g],r=a[s],c+="S"+(e[0]-r[0])+","+(e[1]-r[1])+","+e[0]+","+e[1]}l&&(l=d[g],c+="Q"+(e[0]+2*r[0]/3)+","+(e[1]+2*r[1]/3)+","+l[0]+","+l[1]);return c}function xc(d,a){for(var l,c=[],s=(1-a)/2,e=d[0],f=d[1],r=1,g=d.length;++r<g;)l=e,e=f,f=d[r],c.push([s*(f[0]-l[0]),s*(f[1]-l[1])]);return c}function Wd(d){if(3>
d.length)return ka(d);var a=1,l=d.length,c=d[0],s=c[0],e=c[1],f=[s,s,s,(c=d[1])[0]],r=[e,e,e,c[1]],s=[s,",",e];for(Ya(s,f,r);++a<l;)c=d[a],f.shift(),f.push(c[0]),r.shift(),r.push(c[1]),Ya(s,f,r);for(a=-1;2>++a;)f.shift(),f.push(c[0]),r.shift(),r.push(c[1]),Ya(s,f,r);return s.join("")}function ra(d,a){return d[0]*a[0]+d[1]*a[1]+d[2]*a[2]+d[3]*a[3]}function Ya(d,a,l){d.push("C",ra(Xd,a),",",ra(Xd,l),",",ra(Yd,a),",",ra(Yd,l),",",ra(Qa,a),",",ra(Qa,l))}function yc(d,a){return(a[1]-d[1])/(a[0]-d[0])}
function Mf(d,a,l,c){var s,e,f,r,g,n,m;return s=c[d],e=s[0],f=s[1],s=c[a],r=s[0],g=s[1],s=c[l],n=s[0],m=s[1],0<(m-f)*(r-e)-(g-f)*(n-e)}function zc(d,a,l){return(l[0]-a[0])*(d[1]-a[1])<(l[1]-a[1])*(d[0]-a[0])}function Zd(d,a,l,c){var s=d[0],e=l[0],f=a[0]-s,r=c[0]-e;d=d[1];l=l[1];a=a[1]-d;c=c[1]-l;e=(r*(d-l)-c*(s-e))/(c*f-r*a);return[s+e*f,d+e*a]}function Ac(d,a){var l=d.map(function(d,a){return{index:a,x:d[0],y:d[1]}}).sort(function(d,a){return d.y<a.y?-1:d.y>a.y?1:d.x<a.x?-1:d.x>a.x?1:0}),c=null,
s={list:[],leftEnd:null,rightEnd:null,init:function(){s.leftEnd=s.createHalfEdge(null,"l");s.rightEnd=s.createHalfEdge(null,"l");s.leftEnd.r=s.rightEnd;s.rightEnd.l=s.leftEnd;s.list.unshift(s.leftEnd,s.rightEnd)},createHalfEdge:function(d,a){return{edge:d,side:a,vertex:null,l:null,r:null}},insert:function(d,a){a.l=d;a.r=d.r;d.r.l=a;d.r=a},leftBound:function(d){var a=s.leftEnd;do a=a.r;while(a!=s.rightEnd&&e.rightOf(a,d));return a.l},del:function(d){d.l.r=d.r;d.r.l=d.l;d.edge=null},right:function(d){return d.r},
left:function(d){return d.l},leftRegion:function(d){return null==d.edge?c:d.edge.region[d.side]},rightRegion:function(d){return null==d.edge?c:d.edge.region[Bc[d.side]]}},e={bisect:function(d,a){var l={region:{l:d,r:a},ep:{l:null,r:null}},c=a.x-d.x,x=a.y-d.y;return l.c=d.x*c+d.y*x+0.5*(c*c+x*x),(0<c?c:-c)>(0<x?x:-x)?(l.a=1,l.b=x/c,l.c/=c):(l.b=1,l.a=c/x,l.c/=x),l},intersect:function(d,a){var l=d.edge,c=a.edge;if(!l||!c||l.region.r==c.region.r)return null;var x=l.a*c.b-l.b*c.a;if(1E-10>Math.abs(x))return null;
var s,e,u=(l.c*c.b-c.c*l.b)/x,x=(c.c*l.a-l.c*c.a)/x,J=l.region.r,f=c.region.r;J.y<f.y||J.y==f.y&&J.x<f.x?(s=d,e=l):(s=a,e=c);return(l=u>=e.region.r.x)&&"l"===s.side||!l&&"r"===s.side?null:{x:u,y:x}},rightOf:function(d,a){var l=d.edge,c=l.region.r,x=a.x>c.x;if(x&&"l"===d.side)return 1;if(!x&&"r"===d.side)return 0;if(1===l.a){var s=a.y-c.y,e=a.x-c.x,u=0;!x&&0>l.b||x&&0<=l.b?u=s>=l.b*e:(u=a.x+a.y*l.b>l.c,0>l.b&&(u=!u));c=c.x-l.region.l.x;u=l.b*(e*e-s*s)<c*s*(1+2*e/c+l.b*l.b);0>l.b&&(u=!u)}else e=l.c-
l.a*a.x,l=a.y-e,s=a.x-c.x,c=e-c.y,u=l*l>s*s+c*c;return"l"===d.side?u:!u},endPoint:function(d,l,c){d.ep[l]=c;d.ep[Bc[l]]&&a(d)},distance:function(d,a){var l=d.x-a.x,c=d.y-a.y;return Math.sqrt(l*l+c*c)}},f={list:[],insert:function(d,a,l){d.vertex=a;d.ystar=a.y+l;l=0;for(var c=f.list,x=c.length;x>l;l++){var s=c[l];if(!(d.ystar>s.ystar||d.ystar==s.ystar&&a.x>s.vertex.x))break}c.splice(l,0,d)},del:function(d){for(var a=0,l=f.list,c=l.length;c>a&&l[a]!=d;++a);l.splice(a,1)},empty:function(){return 0===
f.list.length},nextEvent:function(d){for(var a=0,l=f.list,c=l.length;c>a;++a)if(l[a]==d)return l[a+1];return null},min:function(){var d=f.list[0];return{x:d.vertex.x,y:d.ystar}},extractMin:function(){return f.list.shift()}};s.init();for(var c=l.shift(),r,g,n,m,p,q,t,E,z,C,A=l.shift();;)if(f.empty()||(r=f.min()),A&&(f.empty()||A.y<r.y||A.y==r.y&&A.x<r.x))g=s.leftBound(A),n=s.right(g),t=s.rightRegion(g),C=e.bisect(t,A),q=s.createHalfEdge(C,"l"),s.insert(g,q),(z=e.intersect(g,q))&&(f.del(g),f.insert(g,
z,e.distance(z,A))),g=q,q=s.createHalfEdge(C,"r"),s.insert(g,q),(z=e.intersect(q,n))&&f.insert(q,z,e.distance(z,A)),A=l.shift();else{if(f.empty())break;g=f.extractMin();m=s.left(g);n=s.right(g);p=s.right(n);t=s.leftRegion(g);q=s.rightRegion(n);z=g.vertex;e.endPoint(g.edge,g.side,z);e.endPoint(n.edge,n.side,z);s.del(g);f.del(n);s.del(n);g="l";t.y>q.y&&(E=t,t=q,q=E,g="r");C=e.bisect(t,q);q=s.createHalfEdge(C,g);s.insert(m,q);e.endPoint(C,Bc[g],z);(z=e.intersect(m,q))&&(f.del(m),f.insert(m,z,e.distance(z,
t)));(z=e.intersect(q,p))&&f.insert(q,z,e.distance(z,t))}for(g=s.right(s.leftEnd);g!=s.rightEnd;g=s.right(g))a(g.edge)}function Nf(d){return d.x}function Of(d){return d.y}function $d(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Za(d,a,l,c,s,e){if(!d(a,l,c,s,e)){var f=0.5*(l+s),r=0.5*(c+e);a=a.nodes;a[0]&&Za(d,a[0],l,c,f,r);a[1]&&Za(d,a[1],f,c,s,r);a[2]&&Za(d,a[2],l,r,f,e);a[3]&&Za(d,a[3],f,r,s,e)}}function Cc(d,a){d=n.rgb(d);a=n.rgb(a);var l=d.r,c=d.g,s=d.b,e=a.r-l,f=a.g-c,r=a.b-s;
return function(d){return"#"+Oa(Math.round(l+e*d))+Oa(Math.round(c+f*d))+Oa(Math.round(s+r*d))}}function ae(d){var a=[d.a,d.b],l=[d.c,d.d],c=be(a),s=a[0]*l[0]+a[1]*l[1],e=be((l[0]+=-s*a[0],l[1]+=-s*a[1],l))||0;a[0]*l[1]<l[0]*a[1]&&(a[0]*=-1,a[1]*=-1,c*=-1,s*=-1);this.rotate=(c?Math.atan2(a[1],a[0]):Math.atan2(-l[0],l[1]))*V;this.translate=[d.e,d.f];this.scale=[c,e];this.skew=e?Math.atan2(s,e)*V:0}function be(d){var a=Math.sqrt(d[0]*d[0]+d[1]*d[1]);return a&&(d[0]/=a,d[1]/=a),a}function va(d,a){return a-=
d=+d,function(l){return d+a*l}}function xb(d,a){var l,c=[],s=[],e=n.transform(d),f=n.transform(a),r=e.translate,g=f.translate,m=e.rotate,p=f.rotate,q=e.skew,F=f.skew,e=e.scale,f=f.scale;return r[0]!=g[0]||r[1]!=g[1]?(c.push("translate(",null,",",null,")"),s.push({i:1,x:va(r[0],g[0])},{i:3,x:va(r[1],g[1])})):g[0]||g[1]?c.push("translate("+g+")"):c.push(""),m!=p?(180<m-p?p+=360:180<p-m&&(m+=360),s.push({i:c.push(c.pop()+"rotate(",null,")")-2,x:va(m,p)})):p&&c.push(c.pop()+"rotate("+p+")"),q!=F?s.push({i:c.push(c.pop()+
"skewX(",null,")")-2,x:va(q,F)}):F&&c.push(c.pop()+"skewX("+F+")"),e[0]!=f[0]||e[1]!=f[1]?(l=c.push(c.pop()+"scale(",null,",",null,")"),s.push({i:l-4,x:va(e[0],f[0])},{i:l-2,x:va(e[1],f[1])})):(1!=f[0]||1!=f[1])&&c.push(c.pop()+"scale("+f+")"),l=s.length,function(d){for(var a,x=-1;++x<l;)c[(a=s[x]).i]=a.x(d);return c.join("")}}function ce(d,a){var l,c={},e={};for(l in d)l in a?c[l]=("transform"==l?xb:Fa)(d[l],a[l]):e[l]=d[l];for(l in a)l in d||(e[l]=a[l]);return function(d){for(l in c)e[l]=c[l](d);
return e}}function de(d,a){var l,c,e,u,f=0,r=[],g=[];d+="";a+="";for(c=yb.lastIndex=0;l=yb.exec(a);++c)l.index&&r.push(a.substring(f,l.index)),g.push({i:r.length,x:l[0]}),r.push(null),f=yb.lastIndex;f<a.length&&r.push(a.substring(f));c=0;for(e=g.length;(l=yb.exec(d))&&e>c;++c)if(u=g[c],u.x==l[0]){if(u.i)if(null==r[u.i+1]){r[u.i-1]+=u.x;r.splice(u.i,1);for(l=c+1;e>l;++l)g[l].i--}else{r[u.i-1]+=u.x+r[u.i+1];r.splice(u.i,2);for(l=c+1;e>l;++l)g[l].i-=2}else if(null==r[u.i+1])r[u.i]=u.x;else{r[u.i]=u.x+
r[u.i+1];r.splice(u.i+1,1);for(l=c+1;e>l;++l)g[l].i--}g.splice(c,1);e--;c--}else u.x=va(parseFloat(l[0]),parseFloat(u.x));for(;e>c;)u=g.pop(),null==r[u.i+1]?r[u.i]=u.x:(r[u.i]=u.x+r[u.i+1],r.splice(u.i+1,1)),e--;return 1===r.length?null==r[0]?g[0].x:function(){return a}:function(d){for(c=0;e>c;++c)r[(u=g[c]).i]=u.x(d);return r.join("")}}function Fa(d,a){for(var l,c=n.interpolators.length;0<=--c&&!(l=n.interpolators[c](d,a)););return l}function ee(d,a){var l,c=[],e=[],u=d.length,f=a.length,r=Math.min(d.length,
a.length);for(l=0;r>l;++l)c.push(Fa(d[l],a[l]));for(;u>l;++l)e[l]=d[l];for(;f>l;++l)e[l]=a[l];return function(d){for(l=0;r>l;++l)e[l]=c[l](d);return e}}function Pf(d){return function(a){return 0>=a?0:1<=a?1:d(a)}}function fe(d){return function(a){return 1-d(1-a)}}function ge(d){return function(a){return 0.5*(0.5>a?d(2*a):2-d(2-2*a))}}function Qf(d){return d*d}function Rf(d){return d*d*d}function Sf(d){return 1-Math.cos(d*D/2)}function Tf(d){return Math.pow(2,10*(d-1))}function Uf(d){return 1-Math.sqrt(1-
d*d)}function Vf(d){return 1/2.75>d?7.5625*d*d:2/2.75>d?7.5625*(d-=1.5/2.75)*d+0.75:2.5/2.75>d?7.5625*(d-=2.25/2.75)*d+0.9375:7.5625*(d-=2.625/2.75)*d+0.984375}function he(d,a){return a-=d,function(l){return Math.round(d+a*l)}}function Wf(d,a){return a=a-(d=+d)?1/(a-d):0,function(l){return(l-d)*a}}function Xf(d,a){return a=a-(d=+d)?1/(a-d):0,function(l){return Math.max(0,Math.min(1,(l-d)*a))}}function Yf(d){var a=d.source;d=d.target;var l;var c=d;if(a===c)l=a;else{l=ie(a);for(var c=ie(c),e=l.pop(),
u=c.pop(),f=null;e===u;)f=e,e=l.pop(),u=c.pop();l=f}for(c=[a];a!==l;)a=a.parent,c.push(a);for(a=c.length;d!==l;)c.splice(a,0,d),d=d.parent;return c}function ie(d){for(var a=[],l=d.parent;null!=l;)a.push(d),d=l,l=l.parent;return a.push(d),a}function Zf(d){d.fixed|=2}function $f(d){d.fixed&=-7}function ag(d){d.fixed|=4;d.px=d.x;d.py=d.y}function bg(d){d.fixed&=-5}function je(d,a,l){var c=0,e=0;if(d.charge=0,!d.leaf)for(var u,f=d.nodes,r=f.length,g=-1;++g<r;)u=f[g],null!=u&&(je(u,a,l),d.charge+=u.charge,
c+=u.charge*u.cx,e+=u.charge*u.cy);d.point&&(d.leaf||(d.point.x+=Math.random()-0.5,d.point.y+=Math.random()-0.5),a*=l[d.point.index],d.charge+=d.pointCharge=a,c+=a*d.point.x,e+=a*d.point.y);d.cx=c/d.charge;d.cy=e/d.charge}function $a(d,a){return n.rebind(d,a,"sort","children","value"),d.nodes=d,d.links=cg,d}function dg(d){return d.children}function eg(d){return d.value}function fg(d,a){return a.value-d.value}function cg(d){return n.merge(d.map(function(d){return(d.children||[]).map(function(a){return{source:d,
target:a}})}))}function gg(d){return d.x}function hg(d){return d.y}function ig(d,a,l){d.y0=a;d.y=l}function Dc(d){return n.range(d.length)}function Ec(d){var a=-1;d=d[0].length;for(var l=[];++a<d;)l[a]=0;return l}function jg(d){for(var a,l=1,c=0,e=d[0][1],u=d.length;u>l;++l)(a=d[l][1])>e&&(c=l,e=a);return c}function kg(d){return d.reduce(lg,0)}function lg(d,a){return d+a[1]}function mg(d,a){return ke(d,Math.ceil(Math.log(a.length)/Math.LN2+1))}function ke(d,a){for(var l=-1,c=+d[0],e=(d[1]-c)/a,u=
[];++l<=a;)u[l]=e*l+c;return u}function ng(d){return[n.min(d),n.max(d)]}function le(d,a){return d.parent==a.parent?1:2}function Fc(d){var a=d.children;return a&&a.length?a[0]:d._tree.thread}function Gc(d){var a,l=d.children;return l&&(a=l.length)?l[a-1]:d._tree.thread}function zb(d,a){var l=d.children;if(l&&(e=l.length))for(var c,e,u=-1;++u<e;)0<a(c=zb(l[u],a),d)&&(d=c);return d}function og(d,a){return d.x-a.x}function pg(d,a){return a.x-d.x}function qg(d,a){return d.depth-a.depth}function wa(d,a){function l(d,
c){var e=d.children;if(e&&(r=e.length))for(var f,r,g=null,n=-1;++n<r;)f=e[n],l(f,g),g=f;a(d,c)}l(d,null)}function rg(d,a){return d.value-a.value}function Hc(d,a){var l=d._pack_next;d._pack_next=a;a._pack_prev=d;a._pack_next=l;l._pack_prev=a}function me(d,a){d._pack_next=a;a._pack_prev=d}function ne(d,a){var l=a.x-d.x,c=a.y-d.y,e=d.r+a.r;return 0.001<e*e-l*l-c*c}function oe(d){function a(d){m=Math.min(d.x-d.r,m);p=Math.max(d.x+d.r,p);q=Math.min(d.y-d.r,q);t=Math.max(d.y+d.r,t)}if((l=d.children)&&(n=
l.length)){var l,c,e,u,f,r,g,n,m=1/0,p=-1/0,q=1/0,t=-1/0;if(l.forEach(sg),c=l[0],c.x=-c.r,c.y=0,a(c),1<n&&(e=l[1],e.x=e.r,e.y=0,a(e),2<n)){u=l[2];pe(c,e,u);a(u);Hc(c,u);c._pack_prev=u;Hc(u,e);e=c._pack_next;for(f=3;n>f;f++){pe(c,e,u=l[f]);var E=0,z=1,C=1;for(r=e._pack_next;r!==e;r=r._pack_next,z++)if(ne(r,u)){E=1;break}if(1==E)for(g=c._pack_prev;g!==r._pack_prev&&!ne(g,u);g=g._pack_prev,C++);E?(C>z||z==C&&e.r<c.r?me(c,e=r):me(c=g,e),f--):(Hc(c,u),e=u,a(u))}}c=(m+p)/2;e=(q+t)/2;for(f=r=0;n>f;f++)u=
l[f],u.x-=c,u.y-=e,r=Math.max(r,u.r+Math.sqrt(u.x*u.x+u.y*u.y));d.r=r;l.forEach(tg)}}function sg(d){d._pack_next=d._pack_prev=d}function tg(d){delete d._pack_next;delete d._pack_prev}function qe(d,a,l,c){var e=d.children;if(d.x=a+=c*d.x,d.y=l+=c*d.y,d.r*=c,e){d=-1;for(var u=e.length;++d<u;)qe(e[d],a,l,c)}}function pe(d,a,l){var c=d.r+l.r,e=a.x-d.x,u=a.y-d.y;if(c&&(e||u)){var f=a.r+l.r,r=e*e+u*u,f=f*f,c=c*c;a=0.5+(c-f)/(2*r);f=Math.sqrt(Math.max(0,2*f*(c+r)-(c-=r)*c-f*f))/(2*r);l.x=d.x+a*e+f*u;l.y=
d.y+a*u-f*e}else l.x=d.x+c,l.y=d.y}function ug(d){return 1+n.max(d,function(d){return d.y})}function vg(d){return d.reduce(function(d,a){return d+a.x},0)/d.length}function re(d){var a=d.children;return a&&a.length?re(a[0]):d}function se(d){var a,l=d.children;return l&&(a=l.length)?se(l[a-1]):d}function Ic(d){return{x:d.x,y:d.y,dx:d.dx,dy:d.dy}}function te(d,a){var l=d.x+a[3],c=d.y+a[0],e=d.dx-a[1]-a[3],u=d.dy-a[0]-a[2];return 0>e&&(l+=e/2,e=0),0>u&&(c+=u/2,u=0),{x:l,y:c,dx:e,dy:u}}function ab(d){var a=
d[0];d=d[d.length-1];return d>a?[a,d]:[d,a]}function Ab(d){return d.rangeExtent?d.rangeExtent():ab(d.range())}function wg(d,a,l,c){var e=l(d[0],d[1]),u=c(a[0],a[1]);return function(d){return u(e(d))}}function Bb(d,a){var l,c=0,e=d.length-1,u=d[c],f=d[e];return u>f&&(l=c,c=e,e=l,l=u,u=f,f=l),(a=a(f-u))&&(d[c]=a.floor(u),d[e]=a.ceil(f)),d}function xg(d,a,l,c){var e=[],u=[],f=0,r=Math.min(d.length,a.length)-1;for(d[r]<d[0]&&(d=d.slice().reverse(),a=a.slice().reverse());++f<=r;)e.push(l(d[f-1],d[f])),
u.push(c(a[f-1],a[f]));return function(a){var l=n.bisect(d,a,1,r)-1;return u[l](e[l](a))}}function ue(d,a,l,c){function e(){var s=2<Math.min(d.length,a.length)?xg:wg,n=c?Xf:Wf;return g=s(d,a,n,l),r=s(a,d,n,Fa),f}function f(d){return g(d)}var g,r;return f.invert=function(d){return r(d)},f.domain=function(a){return arguments.length?(d=a.map(Number),e()):d},f.range=function(d){return arguments.length?(a=d,e()):a},f.rangeRound=function(d){return f.range(d).interpolate(he)},f.clamp=function(d){return arguments.length?
(c=d,e()):c},f.interpolate=function(d){return arguments.length?(l=d,e()):l},f.ticks=function(a){return Jc(d,a)},f.tickFormat=function(a,l){return Kc(d,a,l)},f.nice=function(){return Bb(d,ve),e()},f.copy=function(){return ue(d,a,l,c)},e()}function we(d,a){return n.rebind(d,a,"range","rangeRound","interpolate","clamp")}function ve(d){return d=Math.pow(10,Math.round(Math.log(d)/Math.LN10)-1),d&&{floor:function(a){return Math.floor(a/d)*d},ceil:function(a){return Math.ceil(a/d)*d}}}function xe(d,a){var l=
ab(d),c=l[1]-l[0],e=Math.pow(10,Math.floor(Math.log(c/a)/Math.LN10)),c=a/c*e;return 0.15>=c?e*=10:0.35>=c?e*=5:0.75>=c&&(e*=2),l[0]=Math.ceil(l[0]/e)*e,l[1]=Math.floor(l[1]/e)*e+0.5*e,l[2]=e,l}function Jc(d,a){return n.range.apply(n,xe(d,a))}function Kc(d,a,l){var c=-Math.floor(Math.log(xe(d,a)[2])/Math.LN10+0.01);return n.format(l?l.replace(ye,function(d,a,l,e,x,f,g,n,m,p){return[a,l,e,x,f,g,n,m||"."+(c-2*("%"===p)),p].join("")}):",."+c+"f")}function ze(d,a,l,c){function e(a){return d(l(a))}return e.invert=
function(a){return c(d.invert(a))},e.domain=function(a){return arguments.length?(0>a[0]?(l=Lc,c=yg):(l=Ae,c=Be),d.domain(a.map(l)),e):d.domain().map(c)},e.base=function(d){return arguments.length?(a=+d,e):a},e.nice=function(){return d.domain(Bb(d.domain(),zg(a))),e},e.ticks=function(){var e=ab(d.domain()),s=[];if(e.every(isFinite)){var f=Math.log(a),g=Math.floor(e[0]/f),f=Math.ceil(e[1]/f),n=c(e[0]),e=c(e[1]),m=a%1?2:a;if(l===Lc)for(s.push(-Math.pow(a,-g));g++<f;)for(var p=m-1;0<p;p--)s.push(-Math.pow(a,
-g)*p);else{for(;f>g;g++)for(p=1;m>p;p++)s.push(Math.pow(a,g)*p);s.push(Math.pow(a,g))}for(g=0;s[g]<n;g++);for(f=s.length;s[f-1]>e;f--);s=s.slice(g,f)}return s},e.tickFormat=function(d,f){if(2>arguments.length&&(f=Ag),!arguments.length)return f;var r,g=Math.log(a),n=Math.max(0.1,d/e.ticks().length),m=l===Lc?(r=-1E-12,Math.floor):(r=1E-12,Math.ceil);return function(d){return d/c(g*m(l(d)/g+r))<=n?f(d):""}},e.copy=function(){return ze(d.copy(),a,l,c)},we(e,d)}function Ae(d){return Math.log(0>d?0:d)}
function Be(d){return Math.exp(d)}function Lc(d){return-Math.log(0<d?0:-d)}function yg(d){return-Math.exp(-d)}function zg(d){d=Math.log(d);var a={floor:function(a){return Math.floor(a/d)*d},ceil:function(a){return Math.ceil(a/d)*d}};return function(){return a}}function Ce(d,a){function c(a){return d(e(a))}var e=Cb(a),s=Cb(1/a);return c.invert=function(a){return s(d.invert(a))},c.domain=function(a){return arguments.length?(d.domain(a.map(e)),c):d.domain().map(s)},c.ticks=function(d){return Jc(c.domain(),
d)},c.tickFormat=function(d,a){return Kc(c.domain(),d,a)},c.nice=function(){return c.domain(Bb(c.domain(),ve))},c.exponent=function(d){if(!arguments.length)return a;var f=c.domain();return e=Cb(a=d),s=Cb(1/a),c.domain(f)},c.copy=function(){return Ce(d.copy(),a)},we(c,d)}function Cb(d){return function(a){return 0>a?-Math.pow(-a,d):Math.pow(a,d)}}function De(d,a){function l(a){return f[((s.get(a)||s.set(a,d.push(a)))-1)%f.length]}function e(a,c){return n.range(d.length).map(function(d){return a+c*d})}
var s,f,g;return l.domain=function(e){if(!arguments.length)return d;d=[];s=new c;for(var f,u=-1,g=e.length;++u<g;)s.has(f=e[u])||s.set(f,d.push(f));return l[a.t].apply(l,a.a)},l.range=function(d){return arguments.length?(f=d,g=0,a={t:"range",a:arguments},l):f},l.rangePoints=function(c,s){2>arguments.length&&(s=0);var n=c[0],m=c[1],p=(m-n)/(Math.max(1,d.length-1)+s);return f=e(2>d.length?(n+m)/2:n+p*s/2,p),g=0,a={t:"rangePoints",a:arguments},l},l.rangeBands=function(c,s,n){2>arguments.length&&(s=0);
3>arguments.length&&(n=s);var m=c[1]<c[0],p=c[m-0],q=(c[1-m]-p)/(d.length-s+2*n);return f=e(p+q*n,q),m&&f.reverse(),g=q*(1-s),a={t:"rangeBands",a:arguments},l},l.rangeRoundBands=function(c,s,n){2>arguments.length&&(s=0);3>arguments.length&&(n=s);var m=c[1]<c[0],p=c[m-0],q=c[1-m],t=Math.floor((q-p)/(d.length-s+2*n));return f=e(p+Math.round((q-p-(d.length-s)*t)/2),t),m&&f.reverse(),g=Math.round(t*(1-s)),a={t:"rangeRoundBands",a:arguments},l},l.rangeBand=function(){return g},l.rangeExtent=function(){return ab(a.a[0])},
l.copy=function(){return De(d,a)},l.domain(d)}function Ee(d,a){function c(){var l=0,f=a.length;for(s=[];++l<f;)s[l-1]=n.quantile(d,l/f);return e}function e(d){return isNaN(d=+d)?0/0:a[n.bisect(s,d)]}var s;return e.domain=function(a){return arguments.length?(d=a.filter(function(d){return!isNaN(d)}).sort(n.ascending),c()):d},e.range=function(d){return arguments.length?(a=d,c()):a},e.quantiles=function(){return s},e.copy=function(){return Ee(d,a)},c()}function Fe(d,a,c){function e(a){return c[Math.max(0,
Math.min(g,Math.floor(f*(a-d))))]}function s(){return f=c.length/(a-d),g=c.length-1,e}var f,g;return e.domain=function(c){return arguments.length?(d=+c[0],a=+c[c.length-1],s()):[d,a]},e.range=function(d){return arguments.length?(c=d,s()):c},e.copy=function(){return Fe(d,a,c)},s()}function Ge(d,a){function c(l){return a[n.bisect(d,l)]}return c.domain=function(a){return arguments.length?(d=a,c):d},c.range=function(d){return arguments.length?(a=d,c):a},c.copy=function(){return Ge(d,a)},c}function He(d){function a(d){return+d}
return a.invert=a,a.domain=a.range=function(c){return arguments.length?(d=c.map(a),a):d},a.ticks=function(a){return Jc(d,a)},a.tickFormat=function(a,c){return Kc(d,a,c)},a.copy=function(){return He(d)},a}function Bg(d){return d.innerRadius}function Cg(d){return d.outerRadius}function Ie(d){return d.startAngle}function Je(d){return d.endAngle}function Ke(d){for(var a,c,e,s=-1,f=d.length;++s<f;)a=d[s],c=a[0],e=a[1]+Ga,a[0]=c*Math.cos(e),a[1]=c*Math.sin(e);return d}function Le(d){function a(x){function n(){A.push("M",
r(d(R),q),p,m(d(G.reverse()),q),"Z")}for(var M,t,C,A=[],G=[],R=[],H=-1,v=x.length,y=L(c),W=L(s),Ef=c===e?function(){return t}:L(e),ta=s===f?function(){return C}:L(f);++H<v;)g.call(this,M=x[H],H)?(G.push([t=+y.call(this,M,H),C=+W.call(this,M,H)]),R.push([+Ef.call(this,M,H),+ta.call(this,M,H)])):G.length&&(n(),G=[],R=[]);return G.length&&n(),A.length?A.join(""):null}var c=qa,e=qa,s=0,f=ua,g=Va,r=ka,n=r.key,m=r,p="L",q=0.7;return a.x=function(d){return arguments.length?(c=e=d,a):e},a.x0=function(d){return arguments.length?
(c=d,a):c},a.x1=function(d){return arguments.length?(e=d,a):e},a.y=function(d){return arguments.length?(s=f=d,a):f},a.y0=function(d){return arguments.length?(s=d,a):s},a.y1=function(d){return arguments.length?(f=d,a):f},a.defined=function(d){return arguments.length?(g=d,a):g},a.interpolate=function(d){return arguments.length?(n="function"==typeof d?r=d:(r=uc.get(d)||ka).key,m=r.reverse||r,p=r.closed?"M":"L",a):n},a.tension=function(d){return arguments.length?(q=d,a):q},a}function Dg(d){return d.radius}
function Me(d){return[d.x,d.y]}function Eg(d){return function(){var a=d.apply(this,arguments),c=a[0],a=a[1]+Ga;return[c*Math.cos(a),c*Math.sin(a)]}}function Fg(){return 64}function Gg(){return"circle"}function Ne(d){d=Math.sqrt(d/D);return"M0,"+d+"A"+d+","+d+" 0 1,1 0,"+-d+"A"+d+","+d+" 0 1,1 0,"+d+"Z"}function bb(d,a){return Sb(d,ca),d.id=a,d}function Mc(d,a,c,e){var s=d.id;return za(d,"function"==typeof c?function(d,f,g){d.__transition__[s].tween.set(a,e(c.call(d,d.__data__,f,g)))}:(c=e(c),function(d){d.__transition__[s].tween.set(a,
c)}))}function Hg(d){return null==d&&(d=""),function(){this.textContent=d}}function Db(d,a,l,e){var s=d.__transition__||(d.__transition__={active:0,count:0}),f=s[l];if(!f){var g=e.time;return f=s[l]={tween:new c,event:n.dispatch("start","end"),time:g,ease:e.ease,delay:e.delay,duration:e.duration},++s.count,n.timer(function(c){function e(c){return s.active>l?m():(s.active=l,t.start.call(d,p,a),f.tween.forEach(function(c,l){(l=l.call(d,p,a))&&C.push(l)}),J(c)||n.timer(J,0,g),1)}function J(c){if(s.active!==
l)return m();c=(c-E)/z;for(var e=q(c),f=C.length;0<f;)C[--f].call(d,e);return 1<=c?(m(),t.end.call(d,p,a),1):void 0}function m(){return--s.count?delete s[l]:delete d.__transition__,1}var p=d.__data__,q=f.ease,t=f.event,E=f.delay,z=f.duration,C=[];return c>=E?e(c):n.timer(e,E,g),1},0,g),f}}function Oe(d,a){d.attr("transform",function(d){return"translate("+a(d)+",0)"})}function Pe(d,a){d.attr("transform",function(d){return"translate(0,"+a(d)+")"})}function Ig(d,a,c){if(e=[],c&&1<a.length){for(var e,
s,f=ab(d.domain()),g=-1,r=a.length,n=(a[1]-a[0])/++c;++g<r;)for(d=c;0<--d;)(s=+a[g]-d*n)>=f[0]&&e.push(s);--g;for(d=0;++d<c&&(s=+a[g]+d*n)<f[1];)e.push(s)}return e}function Ha(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function Ia(d,a,c){function e(a){var c=d(a),l=f(c,1);return l-a>a-c?c:l}function s(c){return a(c=d(new fa(c-1)),1),c}function f(d,c){return a(d=new fa(+d),c),d}function g(d,e,f){d=s(d);var u=[];if(1<f)for(;e>d;)c(d)%f||u.push(new Date(+d)),a(d,
1);else for(;e>d;)u.push(new Date(+d)),a(d,1);return u}d.floor=d;d.round=e;d.ceil=s;d.offset=f;d.range=g;var r=d.utc=Eb(d);return r.floor=r,r.round=Eb(e),r.ceil=Eb(s),r.offset=Eb(f),r.range=function(d,a,c){try{fa=Ha;var l=new Ha;return l._=d,g(l,a,c)}finally{fa=Date}},d}function Eb(d){return function(a,c){try{fa=Ha;var e=new Ha;return e._=a,d(e,c)._}finally{fa=Date}}}function Fb(d,a,c,e){for(var s,f,g=0,r=a.length,n=c.length;r>g;){if(e>=n)return-1;if(s=a.charCodeAt(g++),37===s){if(f=Jg[a.charAt(g++)],
!f||0>(e=f(d,c,e)))return-1}else if(s!=c.charCodeAt(e++))return-1}return e}function Gb(d){return RegExp("^(?:"+d.map(n.requote).join("|")+")","i")}function Qe(d){for(var a=new c,l=-1,e=d.length;++l<e;)a.set(d[l].toLowerCase(),l);return a}function ia(d,a,c){d+="";var e=d.length;return c>e?Array(c-e+1).join(a)+d:d}function Re(d,a,c){ga.lastIndex=0;return(a=ga.exec(a.substring(c,c+2)))?(d.d=+a[0],c+a[0].length):-1}function Se(d,a,c){ga.lastIndex=0;return(a=ga.exec(a.substring(c,c+2)))?(d.H=+a[0],c+a[0].length):
-1}function Nc(d){return d.toISOString()}function Oc(d,a,c){function e(a){return d(a)}return e.invert=function(a){return Pc(d.invert(a))},e.domain=function(a){return arguments.length?(d.domain(a),e):d.domain().map(Pc)},e.nice=function(d){return e.domain(Bb(e.domain(),function(){return d}))},e.ticks=function(c,l){var f,g=e.domain();f=g[0];g=g[g.length-1];f=g>f?[f,g]:[g,f];if("function"!=typeof c){var g=(f[1]-f[0])/c,m=n.bisect(Hb,g);if(m==Hb.length)return a.year(f,c);if(!m)return d.ticks(c).map(Pc);
Math.log(g/Hb[m-1])<Math.log(Hb[m]/g)&&--m;c=a[m];l=c[1];c=c[0].range}return c(f[0],new Date(+f[1]+1),l)},e.tickFormat=function(){return c},e.copy=function(){return Oc(d.copy(),a,c)},n.rebind(e,d,"range","rangeRound","interpolate","clamp")}function Pc(d){return new Date(d)}function Te(d){return function(a){for(var c=d.length-1,e=d[c];!e[1](a);)e=d[--c];return e[0](a)}}function Qc(d){var a=new Date(d,0,1);return a.setFullYear(d),a}function Kg(d){var a=d.getFullYear(),c=Qc(a),e=Qc(a+1);return a+(d-
c)/(e-c)}function Rc(d){var a=new Date(Date.UTC(d,0,1));return a.setUTCFullYear(d),a}function Lg(d){var a=d.getUTCFullYear(),c=Rc(a),e=Rc(a+1);return a+(d-c)/(e-c)}function Mg(d){return d.responseText}function Ng(d){return JSON.parse(d.responseText)}function Og(d){var a=ha.createRange();return a.selectNode(ha.body),a.createContextualFragment(d.responseText)}function Pg(d){return d.responseXML}var n={version:"3.1.5"};Date.now||(Date.now=function(){return+new Date});var ha=document,ea=window;try{ha.createElement("div").style.setProperty("opacity",
0,"")}catch(th){var Ue=ea.CSSStyleDeclaration.prototype,Qg=Ue.setProperty;Ue.setProperty=function(d,a,c){Qg.call(this,d,a+"",c)}}n.ascending=function(d,a){return a>d?-1:d>a?1:d>=a?0:0/0};n.descending=function(d,a){return d>a?-1:a>d?1:a>=d?0:0/0};n.min=function(d,a){var c,e,f=-1,g=d.length;if(1===arguments.length){for(;++f<g&&(null==(c=d[f])||c!=c);)c=void 0;for(;++f<g;)null!=(e=d[f])&&c>e&&(c=e)}else{for(;++f<g&&(null==(c=a.call(d,d[f],f))||c!=c);)c=void 0;for(;++f<g;)null!=(e=a.call(d,d[f],f))&&
c>e&&(c=e)}return c};n.max=function(d,a){var c,e,f=-1,g=d.length;if(1===arguments.length){for(;++f<g&&(null==(c=d[f])||c!=c);)c=void 0;for(;++f<g;)null!=(e=d[f])&&e>c&&(c=e)}else{for(;++f<g&&(null==(c=a.call(d,d[f],f))||c!=c);)c=void 0;for(;++f<g;)null!=(e=a.call(d,d[f],f))&&e>c&&(c=e)}return c};n.extent=function(d,a){var c,e,f,g=-1,n=d.length;if(1===arguments.length){for(;++g<n&&(null==(c=f=d[g])||c!=c);)c=f=void 0;for(;++g<n;)null!=(e=d[g])&&(c>e&&(c=e),e>f&&(f=e))}else{for(;++g<n&&(null==(c=f=
a.call(d,d[g],g))||c!=c);)c=void 0;for(;++g<n;)null!=(e=a.call(d,d[g],g))&&(c>e&&(c=e),e>f&&(f=e))}return[c,f]};n.sum=function(d,a){var c,e=0,f=d.length,g=-1;if(1===arguments.length)for(;++g<f;)isNaN(c=+d[g])||(e+=c);else for(;++g<f;)isNaN(c=+a.call(d,d[g],g))||(e+=c);return e};n.mean=function(d,a){var c,e=d.length,f=0,u=-1,n=0;if(1===arguments.length)for(;++u<e;)g(c=d[u])&&(f+=(c-f)/++n);else for(;++u<e;)g(c=a.call(d,d[u],u))&&(f+=(c-f)/++n);return n?f:void 0};n.quantile=function(d,a){var c=(d.length-
1)*a+1,e=Math.floor(c),f=+d[e-1];return(c-=e)?f+c*(d[e]-f):f};n.median=function(d,a){return 1<arguments.length&&(d=d.map(a)),d=d.filter(g),d.length?n.quantile(d.sort(n.ascending),0.5):void 0};n.bisector=function(d){return{left:function(a,c,e,f){3>arguments.length&&(e=0);for(4>arguments.length&&(f=a.length);f>e;){var g=e+f>>>1;d.call(a,a[g],g)<c?e=g+1:f=g}return e},right:function(a,c,e,f){3>arguments.length&&(e=0);for(4>arguments.length&&(f=a.length);f>e;){var g=e+f>>>1;c<d.call(a,a[g],g)?f=g:e=g+
1}return e}}};var Ve=n.bisector(function(d){return d});n.bisectLeft=Ve.left;n.bisect=n.bisectRight=Ve.right;n.shuffle=function(d){for(var a,c,e=d.length;e;)c=Math.random()*e--|0,a=d[e],d[e]=d[c],d[c]=a;return d};n.permute=function(d,a){for(var c=[],e=-1,f=a.length;++e<f;)c[e]=d[a[e]];return c};n.zip=function(){if(!(e=arguments.length))return[];for(var d=-1,a=n.min(arguments,m),c=Array(a);++d<a;)for(var e,f=-1,g=c[d]=Array(e);++f<e;)g[f]=arguments[f][d];return c};n.transpose=function(d){return n.zip.apply(n,
d)};n.keys=function(d){var a=[],c;for(c in d)a.push(c);return a};n.values=function(d){var a=[],c;for(c in d)a.push(d[c]);return a};n.entries=function(d){var a=[],c;for(c in d)a.push({key:c,value:d[c]});return a};n.merge=function(d){return Array.prototype.concat.apply([],d)};n.range=function(d,a,c){if(3>arguments.length&&(c=1,2>arguments.length&&(a=d,d=0)),1/0===(a-d)/c)throw Error("infinite range");var e,f=[],g;e=Math.abs(c);for(g=1;e*g%1;)g*=10;var n=-1;if(d*=g,a*=g,c*=g,0>c)for(;(e=d+c*++n)>a;)f.push(e/
g);else for(;(e=d+c*++n)<a;)f.push(e/g);return f};n.map=function(d){var a=new c,l;for(l in d)a.set(l,d[l]);return a};q(c,{has:function(d){return Da+d in this},get:function(d){return this[Da+d]},set:function(d,a){return this[Da+d]=a},remove:function(d){return d=Da+d,d in this&&delete this[d]},keys:function(){var d=[];return this.forEach(function(a){d.push(a)}),d},values:function(){var d=[];return this.forEach(function(a,c){d.push(c)}),d},entries:function(){var d=[];return this.forEach(function(a,c){d.push({key:a,
value:c})}),d},forEach:function(d){for(var a in this)a.charCodeAt(0)===We&&d.call(this,a.substring(1),this[a])}});var Da="\x00",We=Da.charCodeAt(0);n.nest=function(){function d(a,x,n){if(n>=g.length)return e?e.call(f,x):l?x.sort(l):x;for(var m,p,q,T,E=-1,t=x.length,C=g[n++],A=new c;++E<t;)(T=A.get(m=C(p=x[E])))?T.push(p):A.set(m,[p]);return a?(p=a(),q=function(c,l){p.set(c,d(a,l,n))}):(p={},q=function(c,l){p[c]=d(a,l,n)}),A.forEach(q),p}function a(d,c){if(c>=g.length)return d;var l=[],e=m[c++];return d.forEach(function(d,
e){l.push({key:d,values:a(e,c)})}),e?l.sort(function(d,a){return e(d.key,a.key)}):l}var l,e,f={},g=[],m=[];return f.map=function(a,c){return d(c,a,0)},f.entries=function(c){return a(d(n.map,c,0),0)},f.key=function(d){return g.push(d),f},f.sortKeys=function(d){return m[g.length-1]=d,f},f.sortValues=function(d){return l=d,f},f.rollup=function(d){return e=d,f},f};n.set=function(d){var c=new a;if(d)for(var l=0;l<d.length;l++)c.add(d[l]);return c};q(a,{has:function(d){return Da+d in this},add:function(d){return this[Da+
d]=!0,d},remove:function(d){return d=Da+d,d in this&&delete this[d]},values:function(){var d=[];return this.forEach(function(a){d.push(a)}),d},forEach:function(d){for(var a in this)a.charCodeAt(0)===We&&d.call(this,a.substring(1))}});n.behavior={};n.rebind=function(d,a){for(var c,f=1,s=arguments.length;++f<s;)d[c=arguments[f]]=e(d,a,a[c]);return d};n.dispatch=function(){for(var d=new f,a=-1,c=arguments.length;++a<c;)d[arguments[a]]=p(d);return d};f.prototype.on=function(d,a){var c=d.indexOf("."),
e="";if(0<=c&&(e=d.substring(c+1),d=d.substring(0,c)),d)return 2>arguments.length?this[d].on(e):this[d].on(e,a);if(2===arguments.length){if(null==a)for(d in this)this.hasOwnProperty(d)&&this[d].on(e,null);return this}};n.event=null;n.mouse=function(d){return B(d,N())};var Rb=/WebKit/.test(ea.navigator.userAgent)?-1:0,ya=function(d){return Array.prototype.slice.call(d)};try{ya(ha.documentElement.childNodes)[0].nodeType}catch(uh){ya=v}var Sb=[].__proto__?function(d,a){d.__proto__=a}:function(d,a){for(var c in a)d[c]=
a[c]};n.touches=function(d,a){return 2>arguments.length&&(a=N().touches),a?ya(a).map(function(a){var c=B(d,a);return c.identifier=a.identifier,c}):[]};n.behavior.drag=function(){function d(){this.on("mousedown.drag",a).on("touchstart.drag",a)}function a(){function d(){var a=x.parentNode;return null!=q?n.touches(a).filter(function(d){return d.identifier===q})[0]:n.mouse(a)}function f(){m({type:"dragend"});F&&(t(),n.event.target===p&&la(v,"click"));v.on(null!=q?"touchmove.drag-"+q:"mousemove.drag",
null).on(null!=q?"touchend.drag-"+q:"mouseup.drag",null)}var g,x=this,m=c.of(x,arguments),p=n.event.target,q=n.event.touches?n.event.changedTouches[0].identifier:null,K=d(),F=0,v=n.select(ea).on(null!=q?"touchmove.drag-"+q:"mousemove.drag",function(){if(!x.parentNode)return f();var a=d(),c=a[0]-K[0],l=a[1]-K[1];F|=c|l;K=a;t();m({type:"drag",x:a[0]+g[0],y:a[1]+g[1],dx:c,dy:l})}).on(null!=q?"touchend.drag-"+q:"mouseup.drag",f,!0);e?(g=e.apply(x,arguments),g=[g.x-K[0],g.y-K[1]]):g=[0,0];null==q&&t();
m({type:"dragstart"})}var c=y(d,"drag","dragstart","dragend"),e=null;return d.origin=function(a){return arguments.length?(e=a,d):e},n.rebind(d,c,"on")};var cd=function(d,a){return a.querySelector(d)},dd=function(d,a){return a.querySelectorAll(d)},Ra=ha.documentElement,Rg=Ra.matchesSelector||Ra.webkitMatchesSelector||Ra.mozMatchesSelector||Ra.msMatchesSelector||Ra.oMatchesSelector,hd=function(d,a){return Rg.call(d,a)};"function"==typeof Sizzle&&(cd=function(d,a){return Sizzle(d,a)[0]||null},dd=function(d,
a){return Sizzle.uniqueSort(Sizzle(d,a))},hd=Sizzle.matchesSelector);var S=[];n.selection=function(){return cb};n.selection.prototype=S;S.select=function(d){var a,c,e,f,g=[];"function"!=typeof d&&(d=P(d));for(var n=-1,r=this.length;++n<r;){g.push(a=[]);a.parentNode=(e=this[n]).parentNode;for(var m=-1,p=e.length;++m<p;)(f=e[m])?(a.push(c=d.call(f,f.__data__,m)),c&&"__data__"in f&&(c.__data__=f.__data__)):a.push(null)}return Q(g)};S.selectAll=function(d){var a,c,e=[];"function"!=typeof d&&(d=U(d));
for(var f=-1,g=this.length;++f<g;)for(var n=this[f],r=-1,m=n.length;++r<m;)(c=n[r])&&(e.push(a=ya(d.call(c,c.__data__,r))),a.parentNode=c);return Q(e)};var Sc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};n.ns={prefix:Sc,qualify:function(a){var c=a.indexOf(":"),l=a;return 0<=c&&(l=a.substring(0,c),a=a.substring(c+1)),Sc.hasOwnProperty(l)?{space:Sc[l],local:a}:
a}};S.attr=function(a,c){if(2>arguments.length){if("string"==typeof a){var l=this.node();return a=n.ns.qualify(a),a.local?l.getAttributeNS(a.space,a.local):l.getAttribute(a)}for(c in a)this.each(Ua(c,a[c]));return this}return this.each(Ua(a,c))};n.requote=function(a){return a.replace(Sg,"\\$&")};var Sg=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;S.classed=function(a,c){if(2>arguments.length){if("string"==typeof a){var l=this.node(),e=(a=a.trim().split(/^|\s+/g)).length,f=-1;if(c=l.classList)for(;++f<e;){if(!c.contains(a[f]))return!1}else for(c=
l.getAttribute("class");++f<e;)if(!ad(a[f]).test(c))return!1;return!0}for(c in a)this.each(bd(c,a[c]));return this}return this.each(bd(a,c))};S.style=function(a,c,l){var e=arguments.length;if(3>e){if("string"!=typeof a){2>e&&(c="");for(l in a)this.each(ed(l,a[l],c));return this}if(2>e)return ea.getComputedStyle(this.node(),null).getPropertyValue(a);l=""}return this.each(ed(a,c,l))};S.property=function(a,c){if(2>arguments.length){if("string"==typeof a)return this.node()[a];for(c in a)this.each(fd(c,
a[c]));return this}return this.each(fd(a,c))};S.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var c=a.apply(this,arguments);this.textContent=null==c?"":c}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent};S.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var c=a.apply(this,arguments);this.innerHTML=null==c?"":c}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):
this.node().innerHTML};S.append=function(a){function c(){return this.appendChild(ha.createElementNS(this.namespaceURI,a))}function l(){return this.appendChild(ha.createElementNS(a.space,a.local))}return a=n.ns.qualify(a),this.select(a.local?l:c)};S.insert=function(a,c){function l(l,e){return this.insertBefore(ha.createElementNS(this.namespaceURI,a),c.call(this,l,e))}function e(l,f){return this.insertBefore(ha.createElementNS(a.space,a.local),c.call(this,l,f))}return a=n.ns.qualify(a),"function"!=
typeof c&&(c=P(c)),this.select(a.local?e:l)};S.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})};S.data=function(a,e){function l(a,d){var l,f,g,s=a.length,u=d.length,n=Math.min(s,u),J=Array(u),q=Array(u),T=Array(s);if(e){var t=new c,v=new c,W=[];for(l=-1;++l<s;)n=e.call(f=a[l],f.__data__,l),t.has(n)?T[l]=f:t.set(n,f),W.push(n);for(l=-1;++l<u;)n=e.call(d,g=d[l],l),(f=t.get(n))?(J[l]=f,f.__data__=g):v.has(n)||(q[l]={__data__:g}),v.set(n,g),t.remove(n);for(l=
-1;++l<s;)t.has(W[l])&&(T[l]=a[l])}else{for(l=-1;++l<n;)f=a[l],g=d[l],f?(f.__data__=g,J[l]=f):q[l]={__data__:g};for(;u>l;++l)q[l]={__data__:d[l]};for(;s>l;++l)T[l]=a[l]}q.update=J;q.parentNode=J.parentNode=T.parentNode=a.parentNode;r.push(q);m.push(J);p.push(T)}var f,g,u=-1,n=this.length;if(!arguments.length){for(a=Array(n=(f=this[0]).length);++u<n;)(g=f[u])&&(a[u]=g.__data__);return a}var r=kd([]),m=Q([]),p=Q([]);if("function"==typeof a)for(;++u<n;)l(f=this[u],a.call(f,f.parentNode.__data__,u));
else for(;++u<n;)l(f=this[u],a);return m.enter=function(){return r},m.exit=function(){return p},m};S.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")};S.filter=function(a){var c,l,e,f=[];"function"!=typeof a&&(a=gd(a));for(var g=0,n=this.length;n>g;g++){f.push(c=[]);c.parentNode=(l=this[g]).parentNode;for(var r=0,m=l.length;m>r;r++)(e=l[r])&&a.call(e,e.__data__,r)&&c.push(e)}return Q(f)};S.order=function(){for(var a=-1,c=this.length;++a<c;)for(var l,
e=this[a],f=e.length-1,g=e[f];0<=--f;)(l=e[f])&&(g&&g!==l.nextSibling&&g.parentNode.insertBefore(l,g),g=l);return this};S.sort=function(a){a=uf.apply(this,arguments);for(var c=-1,l=this.length;++c<l;)this[c].sort(a);return this.order()};S.on=function(a,c,l){var e=arguments.length;if(3>e){if("string"!=typeof a){2>e&&(c=!1);for(l in a)this.each(id(l,a[l],c));return this}if(2>e)return(e=this.node()["__on"+a])&&e._;l=!1}return this.each(id(a,c,l))};var Tb=n.map({mouseenter:"mouseover",mouseleave:"mouseout"});
Tb.forEach(function(a){"on"+a in ha&&Tb.remove(a)});S.each=function(a){return za(this,function(c,l,e){a.call(c,c.__data__,l,e)})};S.call=function(a){var c=ya(arguments);return a.apply(c[0]=this,c),this};S.empty=function(){return!this.node()};S.node=function(){for(var a=0,c=this.length;c>a;a++)for(var l=this[a],e=0,f=l.length;f>e;e++){var g=l[e];if(g)return g}return null};var Ea=[];n.selection.enter=kd;n.selection.enter.prototype=Ea;Ea.append=S.append;Ea.insert=S.insert;Ea.empty=S.empty;Ea.node=S.node;
Ea.select=function(a){for(var c,l,e,f,g,n=[],r=-1,m=this.length;++r<m;){e=(f=this[r]).update;n.push(c=[]);c.parentNode=f.parentNode;for(var p=-1,q=f.length;++p<q;)(g=f[p])?(c.push(e[p]=l=a.call(f.parentNode,g.__data__,p)),l.__data__=g.__data__):c.push(null)}return Q(n)};S.transition=function(){var a,c,l=db||++Xe,e=[],f=Object.create(Ib);f.time=Date.now();for(var g=-1,n=this.length;++g<n;){e.push(a=[]);for(var r=this[g],m=-1,p=r.length;++m<p;)(c=r[m])&&Db(c,m,l,f),a.push(c)}return bb(e,l)};var cb=
Q([[ha]]);cb[0].parentNode=Ra;n.select=function(a){return"string"==typeof a?cb.select(a):Q([[a]])};n.selectAll=function(a){return"string"==typeof a?cb.selectAll(a):Q([ya(a)])};n.behavior.zoom=function(){function a(){this.on("mousedown.zoom",m).on("mousemove.zoom",p).on(Tg+".zoom",r).on("dblclick.zoom",q).on("touchstart.zoom",pa).on("touchmove.zoom",K).on("touchend.zoom",pa)}function c(a){return[(a[0]-R[0])/H,(a[1]-R[1])/H]}function l(a){H=Math.max(ib[0],Math.min(ib[1],a))}function e(a,d){d=[d[0]*
H+R[0],d[1]*H+R[1]];R[0]+=a[0]-d[0];R[1]+=a[1]-d[1]}function f(){z&&z.domain(E.range().map(function(a){return(a-R[0])/H}).map(E.invert));A&&A.domain(C.range().map(function(a){return(a-R[1])/H}).map(C.invert))}function g(a){f();n.event.preventDefault();a({type:"zoom",scale:H,translate:R})}function m(){var a=this,d=X.of(a,arguments),l=n.event.target,f=0,s=n.select(ea).on("mousemove.zoom",function(){f=1;e(n.mouse(a),r);g(d)}).on("mouseup.zoom",function(){f&&t();s.on("mousemove.zoom",null).on("mouseup.zoom",
null);f&&n.event.target===l&&la(s,"click.zoom")}),r=c(n.mouse(a));ea.focus();t()}function r(){F||(F=c(n.mouse(this)));l(Math.pow(2,0.002*Jb())*H);e(n.mouse(this),F);g(X.of(this,arguments))}function p(){F=null}function q(){var a=n.mouse(this),d=c(a),f=Math.log(H)/Math.LN2;l(Math.pow(2,n.event.shiftKey?Math.ceil(f)-1:Math.floor(f)+1));e(a,d);g(X.of(this,arguments))}function pa(){var a=n.touches(this),d=Date.now();if(v=H,F={},a.forEach(function(a){F[a.identifier]=c(a)}),t(),1===a.length){if(500>d-G){var f=
a[0],a=c(a[0]);l(2*H);e(f,a);g(X.of(this,arguments))}G=d}}function K(){var a=n.touches(this),d=a[0],c=F[d.identifier];if(a=a[1]){var f=F[a.identifier],d=[(d[0]+a[0])/2,(d[1]+a[1])/2],c=[(c[0]+f[0])/2,(c[1]+f[1])/2];l(n.event.scale*v)}e(d,c);G=null;g(X.of(this,arguments))}var F,v,E,z,C,A,G,R=[0,0],H=1,ib=Ye,X=y(a,"zoom");return a.translate=function(c){return arguments.length?(R=c.map(Number),f(),a):R},a.scale=function(c){return arguments.length?(H=+c,f(),a):H},a.scaleExtent=function(c){return arguments.length?
(ib=null==c?Ye:c.map(Number),a):ib},a.x=function(c){return arguments.length?(z=c,E=c.copy(),R=[0,0],H=1,a):z},a.y=function(c){return arguments.length?(A=c,C=c.copy(),R=[0,0],H=1,a):A},n.rebind(a,X,"on")};var Jb,Ye=[0,1/0],Tg="onwheel"in ha?(Jb=function(){return-n.event.deltaY*(n.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ha?(Jb=function(){return n.event.wheelDelta},"mousewheel"):(Jb=function(){return-n.event.detail},"MozMousePixelScroll");Ka.prototype.toString=function(){return this.rgb()+
""};n.hsl=function(a,c,l){return 1===arguments.length?a instanceof Vb?La(a.h,a.s,a.l):ac(""+a,qd,La):La(+a,+c,+l)};var Tc=Vb.prototype=new Ka;Tc.brighter=function(a){return a=Math.pow(0.7,arguments.length?a:1),La(this.h,this.s,this.l/a)};Tc.darker=function(a){return a=Math.pow(0.7,arguments.length?a:1),La(this.h,this.s,a*this.l)};Tc.rgb=function(){return eb(this.h,this.s,this.l)};var D=Math.PI,O=1E-6,I=D/180,V=180/D;n.hcl=function(a,c,l){var e;if(1===arguments.length)if(a instanceof fb)e=Ma(a.h,a.c,
a.l);else if(a instanceof gb)e=Ma(Math.atan2(a.b,a.a)*V,Math.sqrt(a.a*a.a+a.b*a.b),a.l);else{e=(a=rd((a=n.rgb(a)).r,a.g,a.b)).l;var f=a.a,g=a.b;e=Ma(Math.atan2(g,f)*V,Math.sqrt(f*f+g*g),e)}else e=Ma(+a,+c,+l);return e};var Uc=fb.prototype=new Ka;Uc.brighter=function(a){return Ma(this.h,this.c,Math.min(100,this.l+Kb*(arguments.length?a:1)))};Uc.darker=function(a){return Ma(this.h,this.c,Math.max(0,this.l-Kb*(arguments.length?a:1)))};Uc.rgb=function(){return Wb(this.h,this.c,this.l).rgb()};n.lab=function(a,
c,l){return 1===arguments.length?a instanceof gb?Na(a.l,a.a,a.b):a instanceof fb?Wb(a.l,a.c,a.h):rd((a=n.rgb(a)).r,a.g,a.b):Na(+a,+c,+l)};var Kb=18,nd=0.95047,od=1,pd=1.08883,Vc=gb.prototype=new Ka;Vc.brighter=function(a){return Na(Math.min(100,this.l+Kb*(arguments.length?a:1)),this.a,this.b)};Vc.darker=function(a){return Na(Math.max(0,this.l-Kb*(arguments.length?a:1)),this.a,this.b)};Vc.rgb=function(){return md(this.l,this.a,this.b)};n.rgb=function(a,c,l){return 1===arguments.length?a instanceof
$b?sa(a.r,a.g,a.b):ac(""+a,sa,eb):sa(~~a,~~c,~~l)};var Lb=$b.prototype=new Ka;Lb.brighter=function(a){a=Math.pow(0.7,arguments.length?a:1);var c=this.r,l=this.g,e=this.b;return c||l||e?(c&&30>c&&(c=30),l&&30>l&&(l=30),e&&30>e&&(e=30),sa(Math.min(255,Math.floor(c/a)),Math.min(255,Math.floor(l/a)),Math.min(255,Math.floor(e/a)))):sa(30,30,30)};Lb.darker=function(a){return a=Math.pow(0.7,arguments.length?a:1),sa(Math.floor(a*this.r),Math.floor(a*this.g),Math.floor(a*this.b))};Lb.hsl=function(){return qd(this.r,
this.g,this.b)};Lb.toString=function(){return"#"+Oa(this.r)+Oa(this.g)+Oa(this.b)};var hb=n.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",
darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",
floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",
lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",
mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",
royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});hb.forEach(function(a,
c){hb.set(a,ac(c,sa,eb))});n.functor=L;n.xhr=function(a,c,l){function e(){var a=p.status;!a&&p.responseText||200<=a&&300>a||304===a?g.load.call(f,r.call(f,p)):g.error.call(f,p)}var f={},g=n.dispatch("progress","load","error"),m={},r=ja,p=new (ea.XDomainRequest&&/^(http(s)?:)?\/\//.test(a)?XDomainRequest:XMLHttpRequest);return"onload"in p?p.onload=p.onerror=e:p.onreadystatechange=function(){3<p.readyState&&e()},p.onprogress=function(a){var d=n.event;n.event=a;try{g.progress.call(f,p)}finally{n.event=
d}},f.header=function(a,d){return a=(a+"").toLowerCase(),2>arguments.length?m[a]:(null==d?delete m[a]:m[a]=d+"",f)},f.mimeType=function(a){return arguments.length?(c=null==a?null:a+"",f):c},f.response=function(a){return r=a,f},["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,[a].concat(ya(arguments)))}}),f.send=function(l,e,g){if(2===arguments.length&&"function"==typeof e&&(g=e,e=null),p.open(l,a,!0),null==c||"accept"in m||(m.accept=c+",*/*"),p.setRequestHeader)for(var r in m)p.setRequestHeader(r,
m[r]);return null!=c&&p.overrideMimeType&&p.overrideMimeType(c),null!=g&&f.on("error",g).on("load",function(a){g(null,a)}),p.send(null==e?null:e),f},f.abort=function(){return p.abort(),f},n.rebind(f,g,"on"),2===arguments.length&&"function"==typeof c&&(l=c,c=null),null==l?f:f.get(wf(l))};n.csv=sd(",","text/csv");n.tsv=sd("\t","text/tab-separated-values");var kb,jb,Ug=0,ec={},Pa=null;n.timer=function(a,c,l){if(3>arguments.length){if(2>arguments.length)c=0;else if(!isFinite(c))return;l=Date.now()}var e=
ec[a.id];e&&e.callback===a?(e.then=l,e.delay=c):ec[a.id=++Ug]=Pa={callback:a,then:l,delay:c,next:Pa};kb||(jb=clearTimeout(jb),kb=1,ud(dc))};n.timer.flush=function(){for(var a,c=Date.now(),l=Pa;l;)a=c-l.then,l.delay||(l.flush=l.callback(a)),l=l.next;td()};var ud=ea.requestAnimationFrame||ea.webkitRequestAnimationFrame||ea.mozRequestAnimationFrame||ea.oRequestAnimationFrame||ea.msRequestAnimationFrame||function(a){setTimeout(a,17)},Mb=[3,3],Vg="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,
c){var l=Math.pow(10,3*Math.abs(8-c));return{scale:8<c?function(a){return a/l}:function(a){return a*l},symbol:a}});n.formatPrefix=function(a,c){var l=0;return a&&(0>a&&(a*=-1),c&&(a=n.round(a,fc(a,c))),l=1+Math.floor(1E-12+Math.log(a)/Math.LN10),l=Math.max(-24,Math.min(24,3*Math.floor((0>=l?l+1:l-1)/3)))),Vg[8+l/3]};n.round=function(a,c){return c?Math.round(a*(c=Math.pow(10,c)))/c:Math.round(a)};n.format=function(a){a=ye.exec(a);var c=a[1]||" ",l=a[2]||">",e=a[3]||"",f=a[4]||"",g=a[5],m=+a[6],r=a[7],
p=a[8],q=a[9],t=1,K="",F=!1;switch(p&&(p=+p.substring(1)),(g||"0"===c&&"="===l)&&(g=c="0",l="=",r&&(m-=Math.floor((m-1)/4))),q){case "n":r=!0;q="g";break;case "%":t=100;K="%";q="f";break;case "p":t=100;K="%";q="r";break;case "b":case "o":case "x":case "X":f&&(f="0"+q.toLowerCase());case "c":case "d":F=!0;p=0;break;case "s":t=-1,q="r"}"#"===f&&(f="");"r"!=q||p||(q="g");null!=p&&("g"==q?p=Math.max(1,Math.min(21,p)):("e"==q||"f"==q)&&(p=Math.max(0,Math.min(20,p))));var q=Wg.get(q)||xf,v=g&&r;return function(a){if(F&&
a%1)return"";var d=0>a||0===a&&0>1/a?(a=-a,"-"):e;if(0>t){var C=n.formatPrefix(a,p);a=C.scale(a);K=C.symbol}else a*=t;a=q(a,p);!g&&r&&(a=Wc(a));var C=f.length+a.length+(v?0:d.length),A=m>C?Array(C=m-C+1).join(c):"";return v&&(a=Wc(A+a)),a.replace(".","."),d+=f,("<"===l?d+a+A:">"===l?A+d+a:"^"===l?A.substring(0,C>>=1)+d+a+A.substring(C):d+(v?a:A+a))+K}};var ye=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Wg=n.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},
o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,c){return a.toPrecision(c)},e:function(a,c){return a.toExponential(c)},f:function(a,c){return a.toFixed(c)},r:function(a,c){return(a=n.round(a,fc(a,c))).toFixed(Math.max(0,Math.min(20,fc(a*(1+1E-15),c))))}}),Wc=ja;if(Mb)var Xg=Mb.length,Wc=function(a){for(var c=a.lastIndexOf("."),l=0<=c?"."+a.substring(c+1):(c=a.length,""),e=[],f=0,g=Mb[0];0<c&&0<g;)e.push(a.substring(c-=
g,c+g)),g=Mb[f=(f+1)%Xg];return e.reverse().join(",")+l};n.geo={};n.geo.stream=function(a,c){a&&Ze.hasOwnProperty(a.type)?Ze[a.type](a,c):lb(a,c)};var Ze={Feature:function(a,c){lb(a.geometry,c)},FeatureCollection:function(a,c){for(var l=a.features,e=-1,f=l.length;++e<f;)lb(l[e].geometry,c)}},vd={Sphere:function(a,c){c.sphere()},Point:function(a,c){var l=a.coordinates;c.point(l[0],l[1])},MultiPoint:function(a,c){for(var l,e=a.coordinates,f=-1,g=e.length;++f<g;)l=e[f],c.point(l[0],l[1])},LineString:function(a,
c){gc(a.coordinates,c,0)},MultiLineString:function(a,c){for(var l=a.coordinates,e=-1,f=l.length;++e<f;)gc(l[e],c,0)},Polygon:function(a,c){wd(a.coordinates,c)},MultiPolygon:function(a,c){for(var l=a.coordinates,e=-1,f=l.length;++e<f;)wd(l[e],c)},GeometryCollection:function(a,c){for(var l=a.geometries,e=-1,f=l.length;++e<f;)lb(l[e],c)}};n.geo.area=function(a){return Sa=0,n.geo.stream(a,Aa),Sa};var Sa,mb,nb,Aa={sphere:function(){Sa+=4*D},point:ba,lineStart:ba,lineEnd:ba,polygonStart:function(){mb=1;
nb=0;Aa.lineStart=yf},polygonEnd:function(){var a=2*Math.atan2(nb,mb);Sa+=0>a?4*D+a:a;Aa.lineStart=Aa.lineEnd=Aa.point=ba}};n.geo.bounds=xd(ja);n.geo.centroid=function(a){da=ma=Z=aa=Y=0;n.geo.stream(a,na);var c;return ma&&Math.abs(c=Math.sqrt(Z*Z+aa*aa+Y*Y))>O?[Math.atan2(aa,Z)*V,Math.asin(Math.max(-1,Math.min(1,Y/c)))*V]:void 0};var da,ma,Z,aa,Y,na={sphere:function(){2>da&&(da=2,ma=Z=aa=Y=0)},point:yd,lineStart:hc,lineEnd:ic,polygonStart:function(){2>da&&(da=2,ma=Z=aa=Y=0);na.lineStart=zf},polygonEnd:function(){na.lineStart=
hc}},Hd=Cd(Va,function(a){var c,l=0/0,e=0/0,f=0/0;return{lineStart:function(){a.lineStart();c=1},point:function(g,n){var r=0<g?D:-D,m=Math.abs(g-l);if(Math.abs(m-D)<O)a.point(l,e=0<(e+n)/2?D/2:-D/2),a.point(f,e),a.lineEnd(),a.lineStart(),a.point(r,e),a.point(g,e),c=0;else if(f!==r&&m>=D){Math.abs(l-f)<O&&(l-=f*O);Math.abs(g-r)<O&&(g-=r*O);var m=l,p=e,q=g,t,F,v=Math.sin(m-q);e=Math.abs(v)>O?Math.atan((Math.sin(p)*(F=Math.cos(n))*Math.sin(q)-Math.sin(n)*(t=Math.cos(p))*Math.sin(m))/(t*F*v)):(p+n)/2;
a.point(f,e);a.lineEnd();a.lineStart();a.point(r,e);c=0}a.point(l=g,e=n);f=r},lineEnd:function(){a.lineEnd();l=e=0/0},clean:function(){return 2-c}}},function(a,c,l,e){null==a?(l=l*D/2,e.point(-D,l),e.point(0,l),e.point(D,l),e.point(D,0),e.point(D,-l),e.point(0,-l),e.point(-D,-l),e.point(-D,0),e.point(-D,l)):Math.abs(a[0]-c[0])>O?(a=(a[0]<c[0]?1:-1)*D,l=l*a/2,e.point(-a,l),e.point(0,l),e.point(a,l)):e.point(c[0],c[1])}),sb=1E9;n.geo.projection=Ba;n.geo.projectionMutator=mc;(n.geo.equirectangular=function(){return Ba(Wa)}).raw=
Wa.invert=Wa;n.geo.rotation=function(a){function c(e){return e=a(e[0]*I,e[1]*I),e[0]*=V,e[1]*=V,e}return a=nc(a[0]%360*I,a[1]*I,2<a.length?a[2]*I:0),c.invert=function(c){return c=a.invert(c[0]*I,c[1]*I),c[0]*=V,c[1]*=V,c},c};n.geo.circle=function(){function a(){var d="function"==typeof f?f.apply(this,arguments):f,c=nc(-d[0]*I,-d[1]*I,0).invert,g=[];return e(null,null,1,{point:function(a,d){g.push(a=c(a,d));a[0]*=V;a[1]*=V}}),{type:"Polygon",coordinates:[g]}}var c,e,f=[0,0],g=6;return a.origin=function(c){return arguments.length?
(f=c,a):f},a.angle=function(f){return arguments.length?(e=lc((c=+f)*I,g*I),a):c},a.precision=function(f){return arguments.length?(e=lc(c*I,(g=+f)*I),a):g},a.angle(90)};n.geo.distance=function(a,c){var e,f=(c[0]-a[0])*I,g=a[1]*I,u=c[1]*I,n=Math.sin(f),f=Math.cos(f),r=Math.sin(g),g=Math.cos(g),m=Math.sin(u),u=Math.cos(u);return Math.atan2(Math.sqrt((e=u*n)*e+(e=g*m-r*u*f)*e),r*m+g*u*f)};n.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:c()}}function c(){return n.range(Math.ceil(u/
C)*C,g,C).map(F).concat(n.range(Math.ceil(q/A)*A,p,A).map(v)).concat(n.range(Math.ceil(f/E)*E,e,E).filter(function(a){return Math.abs(a%C)>O}).map(t)).concat(n.range(Math.ceil(r/z)*z,m,z).filter(function(a){return Math.abs(a%A)>O}).map(K))}var e,f,g,u,m,r,p,q,t,K,F,v,E=10,z=E,C=90,A=360,G=2.5;return a.lines=function(){return c().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[F(u).concat(v(p).slice(1),F(g).reverse().slice(1),v(q).reverse().slice(1))]}},
a.extent=function(c){return arguments.length?a.majorExtent(c).minorExtent(c):a.minorExtent()},a.majorExtent=function(c){return arguments.length?(u=+c[0][0],g=+c[1][0],q=+c[0][1],p=+c[1][1],u>g&&(c=u,u=g,g=c),q>p&&(c=q,q=p,p=c),a.precision(G)):[[u,q],[g,p]]},a.minorExtent=function(c){return arguments.length?(f=+c[0][0],e=+c[1][0],r=+c[0][1],m=+c[1][1],f>e&&(c=f,f=e,e=c),r>m&&(c=r,r=m,m=c),a.precision(G)):[[f,r],[e,m]]},a.step=function(c){return arguments.length?a.majorStep(c).minorStep(c):a.minorStep()},
a.majorStep=function(c){return arguments.length?(C=+c[0],A=+c[1],a):[C,A]},a.minorStep=function(c){return arguments.length?(E=+c[0],z=+c[1],a):[E,z]},a.precision=function(c){return arguments.length?(G=+c,t=Md(r,m,90),K=Nd(f,e,G),F=Md(q,p,90),v=Nd(u,g,G),a):G},a.majorExtent([[-180,-90+O],[180,90-O]]).minorExtent([[-180,-80-O],[180,80+O]])};n.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[c||f.apply(this,arguments),e||g.apply(this,arguments)]}}var c,e,f=oc,g=pc;return a.distance=
function(){return n.geo.distance(c||f.apply(this,arguments),e||g.apply(this,arguments))},a.source=function(e){return arguments.length?(f=e,c="function"==typeof e?null:e,a):f},a.target=function(c){return arguments.length?(g=c,e="function"==typeof c?null:c,a):g},a.precision=function(){return arguments.length?a:0},a};n.geo.interpolate=function(a,c){return Gf(a[0]*I,a[1]*I,c[0]*I,c[1]*I)};n.geo.length=function(a){return Nb=0,n.geo.stream(a,Ta),Nb};var Nb,Ta={sphere:ba,point:ba,lineStart:function(){function a(d,
g){var n=Math.sin(g*=I),r=Math.cos(g),m=Math.abs((d*=I)-c),p=Math.cos(m);Nb+=Math.atan2(Math.sqrt((m=r*Math.sin(m))*m+(m=f*n-e*r*p)*m),e*n+f*r*p);c=d;e=n;f=r}var c,e,f;Ta.point=function(g,u){c=g*I;e=Math.sin(u*=I);f=Math.cos(u);Ta.point=a};Ta.lineEnd=function(){Ta.point=Ta.lineEnd=ba}},lineEnd:ba,polygonStart:ba,polygonEnd:ba};(n.geo.conicEqualArea=function(){return qc(Od)}).raw=Od;n.geo.albersUsa=function(){function a(d){var c=d[0],e=d[1];return(50<e?u:-140>c?m:21>e?r:g)(d)}var c,e,f,g=n.geo.conicEqualArea().rotate([98,
0]).center([0,38]).parallels([29.5,45.5]),u=n.geo.conicEqualArea().rotate([160,0]).center([0,60]).parallels([55,65]),m=n.geo.conicEqualArea().rotate([160,0]).center([0,20]).parallels([8,18]),r=n.geo.conicEqualArea().rotate([60,0]).center([0,10]).parallels([8,18]);return a.invert=function(a){return c(a)||e(a)||f(a)||g.invert(a)},a.scale=function(c){return arguments.length?(g.scale(c),u.scale(0.6*c),m.scale(c),r.scale(1.5*c),a.translate(g.translate())):g.scale()},a.translate=function(n){if(!arguments.length)return g.translate();
var p=g.scale(),q=n[0],t=n[1];return g.translate(n),u.translate([q-0.4*p,t+0.17*p]),m.translate([q-0.19*p,t+0.2*p]),r.translate([q+0.58*p,t+0.43*p]),c=rc(u,[[-180,50],[-130,72]]),e=rc(m,[[-164,18],[-154,24]]),f=rc(r,[[-67.5,17.5],[-65,19]]),a},a.scale(1E3)};var Ob,ub,Ca={point:ba,lineStart:ba,lineEnd:ba,polygonStart:function(){ub=0;Ca.lineStart=Hf},polygonEnd:function(){Ca.lineStart=Ca.lineEnd=Ca.point=ba;Ob+=Math.abs(ub/2)}},oa={point:sc,lineStart:Qd,lineEnd:Rd,polygonStart:function(){oa.lineStart=
Jf},polygonEnd:function(){oa.point=sc;oa.lineStart=Qd;oa.lineEnd=Rd}};n.geo.path=function(){function a(d){return d&&n.geo.stream(d,f(g.pointRadius("function"==typeof u?+u.apply(this,arguments):u))),g.result()}var c,e,f,g,u=4.5;return a.area=function(a){return Ob=0,n.geo.stream(a,f(Ca)),Ob},a.centroid=function(a){return da=Z=aa=Y=0,n.geo.stream(a,f(oa)),Y?[Z/Y,aa/Y]:void 0},a.bounds=function(a){return xd(f)(a)},a.projection=function(e){return arguments.length?(f=(c=e)?e.stream||Lf(e):ja,a):c},a.context=
function(c){return arguments.length?(g=null==(e=c)?new If:new Kf(c),a):e},a.pointRadius=function(c){return arguments.length?(u="function"==typeof c?c:+c,a):u},a.projection(n.geo.albersUsa()).context(null)};n.geo.albers=function(){return n.geo.conicEqualArea().parallels([29.5,45.5]).rotate([98,0]).center([0,38]).scale(1E3)};var $e=Xa(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(n.geo.azimuthalEqualArea=function(){return Ba($e)}).raw=$e;var af=Xa(function(a){return(a=
Math.acos(a))&&a/Math.sin(a)},ja);(n.geo.azimuthalEquidistant=function(){return Ba(af)}).raw=af;(n.geo.conicConformal=function(){return qc(Sd)}).raw=Sd;(n.geo.conicEquidistant=function(){return qc(Td)}).raw=Td;var bf=Xa(function(a){return 1/a},Math.atan);(n.geo.gnomonic=function(){return Ba(bf)}).raw=bf;vb.invert=function(a,c){return[a,2*Math.atan(Math.exp(c))-D/2]};(n.geo.mercator=function(){return Ud(vb)}).raw=vb;var cf=Xa(function(){return 1},Math.asin);(n.geo.orthographic=function(){return Ba(cf)}).raw=
cf;var df=Xa(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(n.geo.stereographic=function(){return Ba(df)}).raw=df;tc.invert=function(a,c){var e=Math.atan2((Math.exp(a)-Math.exp(-a))/2,Math.cos(c)),f;f=Math.sin(c)/((Math.exp(a)+Math.exp(-a))/2);f=1<f?D/2:-1>f?-D/2:Math.asin(f);return[e,f]};(n.geo.transverseMercator=function(){return Ud(tc)}).raw=tc;n.geom={};n.svg={};n.svg.line=function(){return Vd(ja)};var uc=n.map({linear:ka,"linear-closed":function(a){return ka(a)+"Z"},"step-before":vc,
"step-after":wc,basis:Wd,"basis-open":function(a){if(4>a.length)return ka(a);for(var c,e=[],f=-1,g=a.length,u=[0],n=[0];3>++f;)c=a[f],u.push(c[0]),n.push(c[1]);e.push(ra(Qa,u)+","+ra(Qa,n));for(--f;++f<g;)c=a[f],u.shift(),u.push(c[0]),n.shift(),n.push(c[1]),Ya(e,u,n);return e.join("")},"basis-closed":function(a){for(var c,e,f=-1,g=a.length,u=g+4,n=[],r=[];4>++f;)e=a[f%g],n.push(e[0]),r.push(e[1]);c=[ra(Qa,n),",",ra(Qa,r)];for(--f;++f<u;)e=a[f%g],n.shift(),n.push(e[0]),r.shift(),r.push(e[1]),Ya(c,
n,r);return c.join("")},bundle:function(a,c){var e=a.length-1;if(e)for(var f,g,u=a[0][0],n=a[0][1],r=a[e][0]-u,m=a[e][1]-n,p=-1;++p<=e;)f=a[p],g=p/e,f[0]=c*f[0]+(1-c)*(u+g*r),f[1]=c*f[1]+(1-c)*(n+g*m);return Wd(a)},cardinal:function(a,c){return 3>a.length?ka(a):a[0]+wb(a,xc(a,c))},"cardinal-open":function(a,c){return 4>a.length?ka(a):a[1]+wb(a.slice(1,a.length-1),xc(a,c))},"cardinal-closed":function(a,c){return 3>a.length?ka(a):a[0]+wb((a.push(a[0]),a),xc([a[a.length-2]].concat(a,[a[1]]),c))},monotone:function(a){if(3>
a.length)a=ka(a);else{var c=a[0],e,f,g,u,n=[],r;e=0;r=a.length-1;for(var m=[],p=a[1],q=m[0]=yc(a[0],p);++e<r;)m[e]=(q+(q=yc(p,p=a[e+1])))/2;r=(m[e]=q,m);m=-1;for(p=a.length-1;++m<p;)e=yc(a[m],a[m+1]),1E-6>Math.abs(e)?r[m]=r[m+1]=0:(f=r[m]/e,g=r[m+1]/e,u=f*f+g*g,9<u&&(u=3*e/Math.sqrt(u),r[m]=u*f,r[m+1]=u*g));for(m=-1;++m<=p;)u=(a[Math.min(p,m+1)][0]-a[Math.max(0,m-1)][0])/(6*(1+r[m]*r[m])),n.push([u||0,r[m]*u||0]);a=c+wb(a,n)}return a}});uc.forEach(function(a,c){c.key=a;c.closed=/-closed$/.test(a)});
var Xd=[0,2/3,1/3,0],Yd=[0,1/3,2/3,0],Qa=[0,1/6,2/3,1/6];n.geom.hull=function(a){function c(a){if(3>a.length)return[];var d,g,r,m,n,p,x,q,t,E;q=L(e);t=L(f);E=a.length;var z=E-1,C=[],A=[],G=0;if(q===qa&&f===ua)d=a;else{r=0;for(d=[];E>r;++r)d.push([+q.call(this,g=a[r],r),+t.call(this,g,r)])}for(r=1;E>r;++r)d[r][1]<d[G][1]?G=r:d[r][1]==d[G][1]&&(G=d[r][0]<d[G][0]?r:G);for(r=0;E>r;++r)r!==G&&(n=d[r][1]-d[G][1],m=d[r][0]-d[G][0],C.push({angle:Math.atan2(n,m),index:r}));C.sort(function(a,d){return a.angle-
d.angle});E=C[0].angle;t=C[0].index;q=0;for(r=1;z>r;++r)g=C[r].index,E==C[r].angle?(m=d[t][0]-d[G][0],n=d[t][1]-d[G][1],p=d[g][0]-d[G][0],x=d[g][1]-d[G][1],m*m+n*n>=p*p+x*x?C[r].index=-1:(C[q].index=-1,E=C[r].angle,q=r,t=g)):(E=C[r].angle,q=r,t=g);A.push(G);for(g=r=0;2>r;++g)-1!==C[g].index&&(A.push(C[g].index),r++);for(m=A.length;z>g;++g)if(-1!==C[g].index){for(;!Mf(A[m-2],A[m-1],C[g].index,d);)--m;A[m++]=C[g].index}d=[];for(r=0;m>r;++r)d.push(a[A[r]]);return d}var e=qa,f=ua;return arguments.length?
c(a):(c.x=function(a){return arguments.length?(e=a,c):e},c.y=function(a){return arguments.length?(f=a,c):f},c)};n.geom.polygon=function(a){return a.area=function(){for(var c=0,e=a.length,f=a[e-1][1]*a[0][0]-a[e-1][0]*a[0][1];++c<e;)f+=a[c-1][1]*a[c][0]-a[c-1][0]*a[c][1];return 0.5*f},a.centroid=function(c){var e,f,g=-1,m=a.length,n=0,r=0,p=a[m-1];for(arguments.length||(c=-1/(6*a.area()));++g<m;)e=p,p=a[g],f=e[0]*p[1]-p[0]*e[1],n+=(e[0]+p[0])*f,r+=(e[1]+p[1])*f;return[n*c,r*c]},a.clip=function(c){for(var e,
f,g,m,n,r,p=-1,q=a.length,t=a[q-1];++p<q;){e=c.slice();c.length=0;m=a[p];n=e[(g=e.length)-1];for(f=-1;++f<g;)r=e[f],zc(r,t,m)?(zc(n,t,m)||c.push(Zd(n,r,t,m)),c.push(r)):zc(n,t,m)&&c.push(Zd(n,r,t,m)),n=r;t=m}return c},a};n.geom.delaunay=function(a){var c=a.map(function(){return[]}),e=[];return Ac(a,function(e){c[e.region.l.index].push(a[e.region.r.index])}),c.forEach(function(c,f){var g=a[f],m=g[0],r=g[1];c.forEach(function(a){a.angle=Math.atan2(a[0]-m,a[1]-r)});c.sort(function(a,d){return a.angle-
d.angle});for(var n=0,p=c.length-1;p>n;n++)e.push([g,c[n],c[n+1]])}),e};n.geom.voronoi=function(a){function c(a){var d,f,p,x=a.map(function(){return[]}),q=L(g),t=L(m),J=a.length;if(q===qa&&t===ua)d=a;else{d=[];for(p=0;J>p;++p)d.push([+q.call(this,f=a[p],p),+t.call(this,f,p)])}if(Ac(d,function(a){var d,c,e,l,f,g;1===a.a&&0<=a.b?(d=a.ep.r,c=a.ep.l):(d=a.ep.l,c=a.ep.r);1===a.a?(f=d?d.y:-1E6,e=a.c-a.b*f,g=c?c.y:1E6,l=a.c-a.b*g):(e=d?d.x:-1E6,f=a.c-a.a*e,l=c?c.x:1E6,g=a.c-a.a*l);d=[e,f];l=[l,g];x[a.region.l.index].push(d,
l);x[a.region.r.index].push(d,l)}),x=x.map(function(a,c){var e=d[c][0],l=d[c][1],f=a.map(function(a){return Math.atan2(a[0]-e,a[1]-l)}),g=n.range(a.length).sort(function(a,d){return f[a]-f[d]});return g.filter(function(a,d){return!d||f[a]-f[g[d-1]]>O}).map(function(d){return a[d]})}),x.forEach(function(a,c){var e=a.length;if(!e)return a.push([-1E6,-1E6],[-1E6,1E6],[1E6,1E6],[1E6,-1E6]);if(!(2<e)){var l=d[c],f=a[0],g=a[1],e=l[0],l=l[1],s=f[0],f=f[1],m=g[0],n=g[1],p=Math.abs(m-s),g=n-f;Math.abs(g)<
O?(e=f>l?-1E6:1E6,a.push([-1E6,e],[1E6,e])):O>p?(e=s>e?-1E6:1E6,a.push([e,-1E6],[e,1E6])):(e=(s-e)*(n-f)>(m-s)*(f-l)?1E6:-1E6,l=Math.abs(g)-p,Math.abs(l)<O?a.push([0>g?e:-e,e]):(0<l&&(e*=-1),a.push([-1E6,e],[1E6,e])))}}),e)for(p=0;J>p;++p)e(x[p]);for(p=0;J>p;++p)x[p].point=a[p];return x}var e,f=null,g=qa,m=ua;return arguments.length?c(a):(c.x=function(a){return arguments.length?(g=a,c):g},c.y=function(a){return arguments.length?(m=a,c):m},c.size=function(a){return arguments.length?(null==a?e=null:
(f=[+a[0],+a[1]],e=n.geom.polygon([[0,0],[0,f[1]],f,[f[0],0]]).clip),c):f},c.links=function(a){var d,c,e,l=a.map(function(){return[]}),f=[],n=L(g),p=L(m),x=a.length;if(n===qa&&p===ua)d=a;else for(e=0;x>e;++e)d.push([+n.call(this,c=a[e],e),+p.call(this,c,e)]);return Ac(d,function(d){var c=d.region.l.index;d=d.region.r.index;l[c][d]||(l[c][d]=l[d][c]=!0,f.push({source:a[c],target:a[d]}))}),f},c.triangles=function(a){if(g===qa&&m===ua)return n.geom.delaunay(a);var d,c,e,l,f,p=L(g),x=L(m);l=0;d=[];for(f=
a.length;f>l;++l)c=[+p.call(this,e=a[l],l),+x.call(this,e,l)],c.data=e,d.push(c);return n.geom.delaunay(d).map(function(a){return a.map(function(a){return a.data})})},c)};var Bc={l:"r",r:"l"};n.geom.quadtree=function(a,c,e,f,g){function m(a){function d(a,c,e,l,f,g,s,m){if(!isNaN(e)&&!isNaN(l))if(a.leaf){var r=a.x,n=a.y;if(null!=r){if(!(0.01>Math.abs(r-e)+Math.abs(n-l))){var p=a.point;a.x=a.y=a.point=null;u(a,p,r,n,f,g,s,m)}u(a,c,e,l,f,g,s,m)}else a.x=e,a.y=l,a.point=c}else u(a,c,e,l,f,g,s,m)}function u(a,
c,e,l,f,g,s,m){var r=0.5*(f+s),n=0.5*(g+m),p=e>=r,q=l>=n,x=(q<<1)+p;a.leaf=!1;a=a.nodes[x]||(a.nodes[x]=$d());p?f=r:s=r;q?g=n:m=n;d(a,c,e,l,f,g,s,m)}var q,t,E,z,C,A,G,v,H,y=L(r),X=L(p);if(null!=c)A=c,G=e,v=f,H=g;else if(v=H=-(A=G=1/0),t=[],E=[],C=a.length,n)for(z=0;C>z;++z)q=a[z],q.x<A&&(A=q.x),q.y<G&&(G=q.y),q.x>v&&(v=q.x),q.y>H&&(H=q.y),t.push(q.x),E.push(q.y);else for(z=0;C>z;++z){var W=+y(q=a[z],z);q=+X(q,z);A>W&&(A=W);G>q&&(G=q);W>v&&(v=W);q>H&&(H=q);t.push(W);E.push(q)}W=v-A;q=H-G;W>q?H=G+W:
v=A+q;var D=$d();if(D.add=function(a){d(D,a,+y(a,++z),+X(a,z),A,G,v,H)},D.visit=function(a){Za(a,D,A,G,v,H)},z=-1,null==c){for(;++z<C;)d(D,a[z],t[z],E[z],A,G,v,H);--z}else a.forEach(D.add);return t=E=a=q=null,D}var n,r=qa,p=ua;return(n=arguments.length)?(r=Nf,p=Of,3===n&&(g=e,f=c,e=c=0),m(a)):(m.x=function(a){return arguments.length?(r=a,m):r},m.y=function(a){return arguments.length?(p=a,m):p},m.size=function(a){return arguments.length?(null==a?c=e=f=g=null:(c=e=0,f=+a[0],g=+a[1]),m):null==c?null:
[f,g]},m)};n.interpolateRgb=Cc;n.transform=function(a){var c=ha.createElementNS(n.ns.prefix.svg,"g");return(n.transform=function(a){c.setAttribute("transform",a);a=c.transform.baseVal.consolidate();return new ae(a?a.matrix:Yg)})(a)};ae.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Yg={a:1,b:0,c:0,d:1,e:0,f:0};n.interpolateNumber=va;n.interpolateTransform=xb;n.interpolateObject=ce;n.interpolateString=de;var yb=
/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;n.interpolate=Fa;n.interpolators=[function(a,c){var e=typeof c;return("string"===e||e!==typeof a?hb.has(c)||/^(#|rgb\(|hsl\()/.test(c)?Cc:de:c instanceof Ka?Cc:"object"===e?Array.isArray(c)?ee:ce:va)(a,c)}];n.interpolateArray=ee;var ef=function(){return ja},Zg=n.map({linear:ef,poly:function(a){return function(c){return Math.pow(c,a)}},quad:function(){return Qf},cubic:function(){return Rf},sin:function(){return Sf},exp:function(){return Tf},circle:function(){return Uf},
elastic:function(a,c){var e;return 2>arguments.length&&(c=0.45),arguments.length?e=c/(2*D)*Math.asin(1/a):(a=1,e=c/4),function(f){return 1+a*Math.pow(2,10*-f)*Math.sin(2*(f-e)*D/c)}},back:function(a){return a||(a=1.70158),function(c){return c*c*((a+1)*c-a)}},bounce:function(){return Vf}}),$g=n.map({"in":ja,out:fe,"in-out":ge,"out-in":function(a){return ge(fe(a))}});n.ease=function(a){var c=a.indexOf("-"),e=0<=c?a.substring(0,c):a,c=0<=c?a.substring(c+1):"in";return e=Zg.get(e)||ef,c=$g.get(c)||ja,
Pf(c(e.apply(null,Array.prototype.slice.call(arguments,1))))};n.interpolateHcl=function(a,c){a=n.hcl(a);c=n.hcl(c);var e=a.h,f=a.c,g=a.l,m=c.h-e,p=c.c-f,r=c.l-g;return 180<m?m-=360:-180>m&&(m+=360),function(a){return Wb(e+m*a,f+p*a,g+r*a)+""}};n.interpolateHsl=function(a,c){a=n.hsl(a);c=n.hsl(c);var e=a.h,f=a.s,g=a.l,m=c.h-e,p=c.s-f,r=c.l-g;return 180<m?m-=360:-180>m&&(m+=360),function(a){return eb(e+m*a,f+p*a,g+r*a)+""}};n.interpolateLab=function(a,c){a=n.lab(a);c=n.lab(c);var e=a.l,f=a.a,g=a.b,
m=c.l-e,p=c.a-f,r=c.b-g;return function(a){return md(e+m*a,f+p*a,g+r*a)+""}};n.interpolateRound=he;n.layout={};n.layout.bundle=function(){return function(a){for(var c=[],e=-1,f=a.length;++e<f;)c.push(Yf(a[e]));return c}};n.layout.chord=function(){function a(){var d,t,Ub,E,z,C={},A=[],G=n.range(m),R=[];e=[];f=[];d=0;for(E=-1;++E<m;){t=0;for(z=-1;++z<m;)t+=g[E][z];A.push(t);R.push(n.range(m));d+=t}p&&G.sort(function(a,d){return p(A[a],A[d])});r&&R.forEach(function(a,d){a.sort(function(a,c){return r(g[d][a],
g[d][c])})});d=(2*D-v*m)/d;t=0;for(E=-1;++E<m;){Ub=t;for(z=-1;++z<m;){var H=G[E],y=R[H][z],X=g[H][y],W=t,B=t+=X*d;C[H+"-"+y]={index:H,subindex:y,startAngle:W,endAngle:B,value:X}}f[H]={index:H,startAngle:Ub,endAngle:t,value:(t-Ub)/d};t+=v}for(E=-1;++E<m;)for(z=E-1;++z<m;)d=C[E+"-"+z],t=C[z+"-"+E],(d.value||t.value)&&e.push(d.value<t.value?{source:t,target:d}:{source:d,target:t});q&&c()}function c(){e.sort(function(a,d){return q((a.source.value+a.target.value)/2,(d.source.value+d.target.value)/2)})}
var e,f,g,m,p,r,q,t={},v=0;return t.matrix=function(a){return arguments.length?(m=(g=a)&&g.length,e=f=null,t):g},t.padding=function(a){return arguments.length?(v=a,e=f=null,t):v},t.sortGroups=function(a){return arguments.length?(p=a,e=f=null,t):p},t.sortSubgroups=function(a){return arguments.length?(r=a,e=null,t):r},t.sortChords=function(a){return arguments.length?(q=a,e&&c(),t):q},t.chords=function(){return e||a(),e},t.groups=function(){return f||a(),f},t};n.layout.force=function(){function a(d){return function(a,
c,e,l){if(a.point!==d){e=a.cx-d.x;var f=a.cy-d.y,g=1/Math.sqrt(e*e+f*f);if(z>(l-c)*g)return c=a.charge*g*g,d.px-=e*c,d.py-=f*c,!0;a.point&&isFinite(g)&&(c=a.pointCharge*g*g,d.px-=e*c,d.py-=f*c)}return!a.charge}}function c(a){a.px=n.event.x;a.py=n.event.y;r.resume()}var e,f,g,m,p,r={},q=n.dispatch("start","tick","end"),t=[1,1],v=0.9,K=ah,F=bh,y=-30,E=0.1,z=0.8,C=[],A=[];return r.tick=function(){if(0.005>(f*=0.99))return q.end({type:"end",alpha:f=0}),!0;var c,e,l,r,x,z,F,K,D=C.length,B=A.length;for(e=
0;B>e;++e)l=A[e],c=l.source,r=l.target,F=r.x-c.x,K=r.y-c.y,(x=F*F+K*K)&&(x=f*m[e]*((x=Math.sqrt(x))-g[e])/x,F*=x,K*=x,r.x-=F*(z=c.weight/(r.weight+c.weight)),r.y-=K*z,c.x+=F*(z=1-z),c.y+=K*z);if((z=f*E)&&(F=t[0]/2,K=t[1]/2,e=-1,z))for(;++e<D;)l=C[e],l.x+=(F-l.x)*z,l.y+=(K-l.y)*z;if(y){je(c=n.geom.quadtree(C),f,p);for(e=-1;++e<D;)(l=C[e]).fixed||c.visit(a(l))}for(e=-1;++e<D;)l=C[e],l.fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*v,l.y-=(l.py-(l.py=l.y))*v);q.tick({type:"tick",alpha:f})},r.nodes=
function(a){return arguments.length?(C=a,r):C},r.links=function(a){return arguments.length?(A=a,r):A},r.size=function(a){return arguments.length?(t=a,r):t},r.linkDistance=function(a){return arguments.length?(K="function"==typeof a?a:+a,r):K},r.distance=r.linkDistance,r.linkStrength=function(a){return arguments.length?(F="function"==typeof a?a:+a,r):F},r.friction=function(a){return arguments.length?(v=+a,r):v},r.charge=function(a){return arguments.length?(y="function"==typeof a?a:+a,r):y},r.gravity=
function(a){return arguments.length?(E=+a,r):E},r.theta=function(a){return arguments.length?(z=+a,r):z},r.alpha=function(a){return arguments.length?(a=+a,f?f=0<a?a:0:0<a&&(q.start({type:"start",alpha:f=a}),n.timer(r.tick)),r):f},r.start=function(){function a(l,g){var m,r;if(!e){e=[];for(c=0;f>c;++c)e[c]=[];for(c=0;n>c;++c)m=A[c],e[m.source.index].push(m.target),e[m.target.index].push(m.source)}r=e[d];for(var s=-1,p=r.length;++s<p;)if(!isNaN(m=r[s][l]))return m;return Math.random()*g}var d,c,e,l,f=
C.length,n=A.length,q=t[0],x=t[1];for(d=0;f>d;++d)(l=C[d]).index=d,l.weight=0;for(d=0;n>d;++d)l=A[d],"number"==typeof l.source&&(l.source=C[l.source]),"number"==typeof l.target&&(l.target=C[l.target]),++l.source.weight,++l.target.weight;for(d=0;f>d;++d)l=C[d],isNaN(l.x)&&(l.x=a("x",q)),isNaN(l.y)&&(l.y=a("y",x)),isNaN(l.px)&&(l.px=l.x),isNaN(l.py)&&(l.py=l.y);if(g=[],"function"==typeof K)for(d=0;n>d;++d)g[d]=+K.call(this,A[d],d);else for(d=0;n>d;++d)g[d]=K;if(m=[],"function"==typeof F)for(d=0;n>d;++d)m[d]=
+F.call(this,A[d],d);else for(d=0;n>d;++d)m[d]=F;if(p=[],"function"==typeof y)for(d=0;f>d;++d)p[d]=+y.call(this,C[d],d);else for(d=0;f>d;++d)p[d]=y;return r.resume()},r.resume=function(){return r.alpha(0.1)},r.stop=function(){return r.alpha(0)},r.drag=function(){return e||(e=n.behavior.drag().origin(ja).on("dragstart.force",Zf).on("drag.force",c).on("dragend.force",$f)),arguments.length?(this.on("mouseover.force",ag).on("mouseout.force",bg).call(e),void 0):e},n.rebind(r,q,"on")};var ah=20,bh=1;n.layout.hierarchy=
function(){function a(c,r,n){var p=g.call(e,c,r);if(c.depth=r,n.push(c),p&&(q=p.length)){for(var q,x=-1,t=c.children=[],v=0,E=r+1;++x<q;)r=a(p[x],E,n),r.parent=c,t.push(r),v+=r.value;f&&t.sort(f);m&&(c.value=v)}else m&&(c.value=+m.call(e,c,r)||0);return c}function c(a,d){var f=a.children,g=0;if(f&&(n=f.length))for(var n,s=-1,p=d+1;++s<n;)g+=c(f[s],p);else m&&(g=+m.call(e,a,d)||0);return m&&(a.value=g),g}function e(c){var l=[];return a(c,0,l),l}var f=fg,g=dg,m=eg;return e.sort=function(a){return arguments.length?
(f=a,e):f},e.children=function(a){return arguments.length?(g=a,e):g},e.value=function(a){return arguments.length?(m=a,e):m},e.revalue=function(a){return c(a,0),a},e};n.layout.partition=function(){function a(c,e,l,f){var g=c.children;if(c.x=e,c.y=c.depth*f,c.dx=l,c.dy=f,g&&(m=g.length)){var m,n,s=-1;for(l=c.value?l/c.value:0;++s<m;)a(n=g[s],e,c=n.value*l,f),e+=c}}function c(a){a=a.children;var d=0;if(a&&(e=a.length))for(var e,l=-1;++l<e;)d=Math.max(d,c(a[l]));return 1+d}function e(l,m){var n=f.call(this,
l,m);return a(n[0],0,g[0],g[1]/c(n[0])),n}var f=n.layout.hierarchy(),g=[1,1];return e.size=function(a){return arguments.length?(g=a,e):g},$a(e,f)};n.layout.pie=function(){function a(m){var p=m.map(function(e,l){return+c.call(a,e,l)}),r=+("function"==typeof f?f.apply(this,arguments):f),q=(("function"==typeof g?g.apply(this,arguments):g)-r)/n.sum(p),t=n.range(m.length);null!=e&&t.sort(e===ff?function(a,d){return p[d]-p[a]}:function(a,d){return e(m[a],m[d])});var v=[];return t.forEach(function(a){var d;
v[a]={data:m[a],value:d=p[a],startAngle:r,endAngle:r+=d*q}}),v}var c=Number,e=ff,f=0,g=2*D;return a.value=function(e){return arguments.length?(c=e,a):c},a.sort=function(c){return arguments.length?(e=c,a):e},a.startAngle=function(c){return arguments.length?(f=c,a):f},a.endAngle=function(c){return arguments.length?(g=c,a):g},a};var ff={};n.layout.stack=function(){function a(r,q){var t=r.map(function(e,l){return c.call(a,e,l)}),v=t.map(function(c){return c.map(function(c,e){return[m.call(a,c,e),p.call(a,
c,e)]})}),K=e.call(a,v,q),t=n.permute(t,K),v=n.permute(v,K),F,y,E=f.call(a,v,q),z=t.length,C=t[0].length;for(F=0;C>F;++F){g.call(a,t[0][F],y=E[F],v[0][F][1]);for(K=1;z>K;++K)g.call(a,t[K][F],y+=v[K-1][F][1],v[K][F][1])}return r}var c=ja,e=Dc,f=Ec,g=ig,m=gg,p=hg;return a.values=function(e){return arguments.length?(c=e,a):c},a.order=function(c){return arguments.length?(e="function"==typeof c?c:ch.get(c)||Dc,a):e},a.offset=function(c){return arguments.length?(f="function"==typeof c?c:dh.get(c)||Ec,a):
f},a.x=function(c){return arguments.length?(m=c,a):m},a.y=function(c){return arguments.length?(p=c,a):p},a.out=function(c){return arguments.length?(g=c,a):g},a};var ch=n.map({"inside-out":function(a){var c,e=a.length,f=a.map(jg),g=a.map(kg),m=n.range(e).sort(function(a,c){return f[a]-f[c]}),p=0,r=0,q=[],t=[];for(a=0;e>a;++a)c=m[a],r>p?(p+=g[c],q.push(c)):(r+=g[c],t.push(c));return t.reverse().concat(q)},reverse:function(a){return n.range(a.length).reverse()},"default":Dc}),dh=n.map({silhouette:function(a){var c,
e,f,g=a.length,m=a[0].length,n=[],p=0,q=[];for(e=0;m>e;++e){for(f=c=0;g>c;c++)f+=a[c][e][1];f>p&&(p=f);n.push(f)}for(e=0;m>e;++e)q[e]=(p-n[e])/2;return q},wiggle:function(a){var c,e,f,g,m,n,p,q,t,v=a.length,y=a[0],F=y.length,D=[];D[0]=q=t=0;for(e=1;F>e;++e){for(g=c=0;v>c;++c)g+=a[c][e][1];m=c=0;for(p=y[e][0]-y[e-1][0];v>c;++c){f=0;for(n=(a[c][e][1]-a[c][e-1][1])/(2*p);c>f;++f)n+=(a[f][e][1]-a[f][e-1][1])/p;m+=n*a[c][e][1]}D[e]=q-=g?m/g*p:0;t>q&&(t=q)}for(e=0;F>e;++e)D[e]-=t;return D},expand:function(a){var c,
e,f,g=a.length,m=a[0].length,n=1/g,p=[];for(e=0;m>e;++e){for(f=c=0;g>c;c++)f+=a[c][e][1];if(f)for(c=0;g>c;c++)a[c][e][1]/=f;else for(c=0;g>c;c++)a[c][e][1]=n}for(e=0;m>e;++e)p[e]=0;return p},zero:Ec});n.layout.histogram=function(){function a(d,m){var p,q,t=[],v=d.map(e,this),y=f.call(this,v,m),F=g.call(this,y,v,m);m=-1;for(var D=v.length,E=F.length-1,z=c?1:1/D;++m<E;)p=t[m]=[],p.dx=F[m+1]-(p.x=F[m]),p.y=0;if(0<E)for(m=-1;++m<D;)q=v[m],q>=y[0]&&q<=y[1]&&(p=t[n.bisect(F,q,1,E)-1],p.y+=z,p.push(d[m]));
return t}var c=!0,e=Number,f=ng,g=mg;return a.value=function(c){return arguments.length?(e=c,a):e},a.range=function(c){return arguments.length?(f=L(c),a):f},a.bins=function(c){return arguments.length?(g="number"==typeof c?function(a){return ke(a,c)}:L(c),a):g},a.frequency=function(e){return arguments.length?(c=!!e,a):c},a};n.layout.tree=function(){function a(d,g){function m(a,c){var d=a.children,f=a._tree;if(d&&(g=d.length)){for(var g,n,p,s=d[0],r=s,q=-1;++q<g;){p=d[q];m(p,n);var u=p;if(n){for(var x=
void 0,t=u,v=u,E=u.parent.children[0],z=t._tree.mod,J=v._tree.mod,F=n._tree.mod,M=E._tree.mod;n=Gc(n),t=Fc(t),n&&t;){E=Fc(E);v=Gc(v);v._tree.ancestor=u;x=n._tree.prelim+F-t._tree.prelim-z+e(n,t);if(0<x){var y=n._tree.ancestor.parent==u.parent?n._tree.ancestor:r,K=u,pa=x,y=y._tree,K=K._tree,D=pa/(K.number-y.number);y.change+=D;K.change-=D;K.shift+=pa;K.prelim+=pa;K.mod+=pa;z+=x;J+=x}F+=n._tree.mod;z+=t._tree.mod;M+=E._tree.mod;J+=v._tree.mod}n&&!Gc(v)&&(v._tree.thread=n,v._tree.mod+=F-J);t&&!Fc(E)&&
(E._tree.thread=t,E._tree.mod+=z-M,r=u)}n=p}q=g=0;u=a.children;for(r=u.length;0<=--r;)d=u[r]._tree,d.prelim+=g,d.mod+=g,g+=d.shift+(q+=d.change);p=0.5*(s._tree.prelim+p._tree.prelim);c?(f.prelim=c._tree.prelim+e(a,c),f.mod=f.prelim-p):f.prelim=p}else c&&(f.prelim=c._tree.prelim+e(a,c))}function n(a,c){a.x=a._tree.prelim+c;var d=a.children;if(d&&(e=d.length)){var e,f=-1;for(c+=a._tree.mod;++f<e;)n(d[f],c)}}var p=c.call(this,d,g),q=p[0];wa(q,function(a,c){a._tree={ancestor:a,prelim:0,mod:0,change:0,
shift:0,number:c?c._tree.number+1:0}});m(q);n(q,-q._tree.prelim);var t=zb(q,pg),v=zb(q,og),F=zb(q,qg),y=t.x-e(t,v)/2,E=v.x+e(v,t)/2,z=F.depth||1;return wa(q,function(a){a.x=(a.x-y)/(E-y)*f[0];a.y=a.depth/z*f[1];delete a._tree}),p}var c=n.layout.hierarchy().sort(null).value(null),e=le,f=[1,1];return a.separation=function(c){return arguments.length?(e=c,a):e},a.size=function(c){return arguments.length?(f=c,a):f},$a(a,c)};n.layout.pack=function(){function a(d,g){var m=c.call(this,d,g),n=m[0];n.x=0;n.y=
0;wa(n,function(a){a.r=Math.sqrt(a.value)});wa(n,oe);var p=f[0],q=f[1],t=Math.max(2*n.r/p,2*n.r/q);if(0<e){var v=e*t/2;wa(n,function(a){a.r+=v});wa(n,oe);wa(n,function(a){a.r-=v});t=Math.max(2*n.r/p,2*n.r/q)}return qe(n,p/2,q/2,1/t),m}var c=n.layout.hierarchy().sort(rg),e=0,f=[1,1];return a.size=function(c){return arguments.length?(f=c,a):f},a.padding=function(c){return arguments.length?(e=+c,a):e},$a(a,c)};n.layout.cluster=function(){function a(d,g){var m,n=c.call(this,d,g),p=n[0],q=0;wa(p,function(a){var c=
a.children;c&&c.length?(a.x=vg(c),a.y=ug(c)):(a.x=m?q+=e(a,m):0,a.y=0,m=a)});var t=re(p),v=se(p),F=t.x-e(t,v)/2,y=v.x+e(v,t)/2;return wa(p,function(a){a.x=(a.x-F)/(y-F)*f[0];a.y=(1-(p.y?a.y/p.y:1))*f[1]}),n}var c=n.layout.hierarchy().sort(null).value(null),e=le,f=[1,1];return a.separation=function(c){return arguments.length?(e=c,a):e},a.size=function(c){return arguments.length?(f=c,a):f},$a(a,c)};n.layout.treemap=function(){function a(c,d){for(var e,f,l=-1,g=c.length;++l<g;)f=(e=c[l]).value*(0>d?
0:d),e.area=isNaN(f)||0>=f?0:f}function c(e){var l=e.children;if(l&&l.length){var g,m=v(e),n=[],p=l.slice(),r=1/0,s="slice"===F?m.dx:"dice"===F?m.dy:"slice-dice"===F?e.depth&1?m.dy:m.dx:Math.min(m.dx,m.dy);a(p,m.dx*m.dy/e.value);for(n.area=0;0<(e=p.length);){n.push(e=p[e-1]);n.area+=e.area;var q;if(!(q="squarify"!==F)){e=s;g=void 0;var u=n.area;q=0;for(var t=1/0,y=-1,M=n.length;++y<M;)(g=n[y].area)&&(t>g&&(t=g),g>q&&(q=g));q=(g=(u*=u,e*=e,u?Math.max(e*q*D/u,u/(e*t*D)):1/0))<=r}q?(p.pop(),r=g):(n.area-=
n.pop().area,f(n,s,m,!1),s=Math.min(m.dx,m.dy),n.length=n.area=0,r=1/0)}n.length&&(f(n,s,m,!0),n.length=n.area=0);l.forEach(c)}}function e(c){var g=c.children;if(g&&g.length){var m=v(c),n=g.slice(),p=[];a(n,m.dx*m.dy/c.value);for(p.area=0;c=n.pop();)p.push(c),p.area+=c.area,null!=c.z&&(f(p,c.z?m.dx:m.dy,m,!n.length),p.length=p.area=0);g.forEach(e)}}function f(a,c,d,e){var l,g=-1,m=a.length,n=d.x,p=d.y,s=c?r(a.area/c):0;if(c==d.dx){for((e||s>d.dy)&&(s=d.dy);++g<m;)l=a[g],l.x=n,l.y=p,l.dy=s,n+=l.dx=
Math.min(d.x+d.dx-n,s?r(l.area/s):0);l.z=!0;l.dx+=d.x+d.dx-n;d.y+=s;d.dy-=s}else{for((e||s>d.dx)&&(s=d.dx);++g<m;)l=a[g],l.x=n,l.y=p,l.dx=s,p+=l.dy=Math.min(d.y+d.dy-p,s?r(l.area/s):0);l.z=!1;l.dy+=d.y+d.dy-p;d.x+=s;d.dx-=s}}function g(f){f=m||p(f);var n=f[0];return n.x=0,n.y=0,n.dx=q[0],n.dy=q[1],m&&p.revalue(n),a([n],n.dx*n.dy/n.value),(m?e:c)(n),y&&(m=f),f}var m,p=n.layout.hierarchy(),r=Math.round,q=[1,1],t=null,v=Ic,y=!1,F="squarify",D=0.5*(1+Math.sqrt(5));return g.size=function(a){return arguments.length?
(q=a,g):q},g.padding=function(a){function c(d){var e=a.call(g,d,d.depth);return null==e?Ic(d):te(d,"number"==typeof e?[e,e,e,e]:e)}function d(c){return te(c,a)}if(!arguments.length)return t;var e;return v=null==(t=a)?Ic:"function"==(e=typeof a)?c:"number"===e?(a=[a,a,a,a],d):d,g},g.round=function(a){return arguments.length?(r=a?Math.round:Number,g):r!=Number},g.sticky=function(a){return arguments.length?(y=a,m=null,g):y},g.ratio=function(a){return arguments.length?(D=a,g):D},g.mode=function(a){return arguments.length?
(F=a+"",g):F},$a(g,p)};n.random={normal:function(a,c){var e=arguments.length;return 2>e&&(c=1),1>e&&(a=0),function(){var e,f;do e=2*Math.random()-1,f=2*Math.random()-1,f=e*e+f*f;while(!f||1<f);return a+c*e*Math.sqrt(-2*Math.log(f)/f)}},logNormal:function(){var a=n.random.normal.apply(n,arguments);return function(){return Math.exp(a())}},irwinHall:function(a){return function(){for(var c=0,e=0;a>e;e++)c+=Math.random();return c/a}}};n.scale={};n.scale.linear=function(){return ue([0,1],[0,1],Fa,!1)};
n.scale.log=function(){return ze(n.scale.linear().domain([0,Math.LN10]),10,Ae,Be)};var Ag=n.format(".0e");n.scale.pow=function(){return Ce(n.scale.linear(),1)};n.scale.sqrt=function(){return n.scale.pow().exponent(0.5)};n.scale.ordinal=function(){return De([],{t:"range",a:[[]]})};n.scale.category10=function(){return n.scale.ordinal().range(eh)};n.scale.category20=function(){return n.scale.ordinal().range(fh)};n.scale.category20b=function(){return n.scale.ordinal().range(gh)};n.scale.category20c=function(){return n.scale.ordinal().range(hh)};
var eh="#1f77b4 #ff7f0e #2ca02c #d62728 #9467bd #8c564b #e377c2 #7f7f7f #bcbd22 #17becf".split(" "),fh="#1f77b4 #aec7e8 #ff7f0e #ffbb78 #2ca02c #98df8a #d62728 #ff9896 #9467bd #c5b0d5 #8c564b #c49c94 #e377c2 #f7b6d2 #7f7f7f #c7c7c7 #bcbd22 #dbdb8d #17becf #9edae5".split(" "),gh="#393b79 #5254a3 #6b6ecf #9c9ede #637939 #8ca252 #b5cf6b #cedb9c #8c6d31 #bd9e39 #e7ba52 #e7cb94 #843c39 #ad494a #d6616b #e7969c #7b4173 #a55194 #ce6dbd #de9ed6".split(" "),hh="#3182bd #6baed6 #9ecae1 #c6dbef #e6550d #fd8d3c #fdae6b #fdd0a2 #31a354 #74c476 #a1d99b #c7e9c0 #756bb1 #9e9ac8 #bcbddc #dadaeb #636363 #969696 #bdbdbd #d9d9d9".split(" ");
n.scale.quantile=function(){return Ee([],[])};n.scale.quantize=function(){return Fe(0,1,[0,1])};n.scale.threshold=function(){return Ge([0.5],[0,1])};n.scale.identity=function(){return He([0,1])};n.svg.arc=function(){function a(){var d=c.apply(this,arguments),m=e.apply(this,arguments),n=f.apply(this,arguments)+Ga,p=g.apply(this,arguments)+Ga,q=(n>p&&(q=n,n=p,p=q),p-n),t=D>q?"0":"1",v=Math.cos(n),n=Math.sin(n),y=Math.cos(p),p=Math.sin(p);return q>=ih?d?"M0,"+m+"A"+m+","+m+" 0 1,1 0,"+-m+"A"+m+","+m+
" 0 1,1 0,"+m+"M0,"+d+"A"+d+","+d+" 0 1,0 0,"+-d+"A"+d+","+d+" 0 1,0 0,"+d+"Z":"M0,"+m+"A"+m+","+m+" 0 1,1 0,"+-m+"A"+m+","+m+" 0 1,1 0,"+m+"Z":d?"M"+m*v+","+m*n+"A"+m+","+m+" 0 "+t+",1 "+m*y+","+m*p+"L"+d*y+","+d*p+"A"+d+","+d+" 0 "+t+",0 "+d*v+","+d*n+"Z":"M"+m*v+","+m*n+"A"+m+","+m+" 0 "+t+",1 "+m*y+","+m*p+"L0,0Z"}var c=Bg,e=Cg,f=Ie,g=Je;return a.innerRadius=function(e){return arguments.length?(c=L(e),a):c},a.outerRadius=function(c){return arguments.length?(e=L(c),a):e},a.startAngle=function(c){return arguments.length?
(f=L(c),a):f},a.endAngle=function(c){return arguments.length?(g=L(c),a):g},a.centroid=function(){var a=(c.apply(this,arguments)+e.apply(this,arguments))/2,d=(f.apply(this,arguments)+g.apply(this,arguments))/2+Ga;return[Math.cos(d)*a,Math.sin(d)*a]},a};var Ga=-D/2,ih=2*D-1E-6;n.svg.line.radial=function(){var a=Vd(Ke);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a};vc.reverse=wc;wc.reverse=vc;n.svg.area=function(){return Le(ja)};n.svg.area.radial=function(){var a=Le(Ke);return a.radius=a.x,
delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a};n.svg.chord=function(){function a(d,g){var m=c(this,e,d,g),n=c(this,f,d,g);return"M"+m.p0+("A"+m.r+","+m.r+" 0 "+ +(m.a1-m.a0>D)+",1 "+m.p1)+(m.a0==n.a0&&m.a1==n.a1?"Q 0,0 "+m.p0:"Q 0,0 "+n.p0+("A"+n.r+","+n.r+" 0 "+ +(n.a1-n.a0>D)+",1 "+n.p1)+("Q 0,0 "+m.p0))+"Z"}function c(a,d,e,f){var l=d.call(a,e,f);d=g.call(a,l,f);e=m.call(a,l,f)+Ga;a=n.call(a,
l,f)+Ga;return{r:d,a0:e,a1:a,p0:[d*Math.cos(e),d*Math.sin(e)],p1:[d*Math.cos(a),d*Math.sin(a)]}}var e=oc,f=pc,g=Dg,m=Ie,n=Je;return a.radius=function(c){return arguments.length?(g=L(c),a):g},a.source=function(c){return arguments.length?(e=L(c),a):e},a.target=function(c){return arguments.length?(f=L(c),a):f},a.startAngle=function(c){return arguments.length?(m=L(c),a):m},a.endAngle=function(c){return arguments.length?(n=L(c),a):n},a};n.svg.diagonal=function(){function a(d,g){var m=c.call(this,d,g),
n=e.call(this,d,g),p=(m.y+n.y)/2,m=[m,{x:m.x,y:p},{x:n.x,y:p},n];return m=m.map(f),"M"+m[0]+"C"+m[1]+" "+m[2]+" "+m[3]}var c=oc,e=pc,f=Me;return a.source=function(e){return arguments.length?(c=L(e),a):c},a.target=function(c){return arguments.length?(e=L(c),a):e},a.projection=function(c){return arguments.length?(f=c,a):f},a};n.svg.diagonal.radial=function(){var a=n.svg.diagonal(),c=Me,e=a.projection;return a.projection=function(a){return arguments.length?e(Eg(c=a)):c},a};n.svg.symbol=function(){function a(d,
f){return(gf.get(c.call(this,d,f))||Ne)(e.call(this,d,f))}var c=Gg,e=Fg;return a.type=function(e){return arguments.length?(c=L(e),a):c},a.size=function(c){return arguments.length?(e=L(c),a):e},a};var gf=n.map({circle:Ne,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*hf));var c=a*hf;return"M0,"+-a+"L"+c+",0 0,"+a+" "+-c+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+
-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/Pb);var c=a*Pb/2;return"M0,"+c+"L"+a+","+-c+" "+-a+","+-c+"Z"},"triangle-up":function(a){a=Math.sqrt(a/Pb);var c=a*Pb/2;return"M0,"+-c+"L"+a+","+c+" "+-a+","+c+"Z"}});n.svg.symbolTypes=gf.keys();var db,Pb=Math.sqrt(3),hf=Math.tan(30*I),ca=[],Xe=0,Ib={ease:function(a){if(0>=a)return 0;if(1<=a)return 1;var c=a*a,e=c*a;return 4*(0.5>a?e:3*(a-c)+e-0.75)},delay:0,duration:250};ca.call=S.call;ca.empty=S.empty;
ca.node=S.node;n.transition=function(a){return arguments.length?db?a.transition():a:cb.transition()};n.transition.prototype=ca;ca.select=function(a){var c,e,f,g=this.id,m=[];"function"!=typeof a&&(a=P(a));for(var n=-1,p=this.length;++n<p;){m.push(c=[]);for(var q=this[n],t=-1,v=q.length;++t<v;)(f=q[t])&&(e=a.call(f,f.__data__,t))?("__data__"in f&&(e.__data__=f.__data__),Db(e,t,g,f.__transition__[g]),c.push(e)):c.push(null)}return bb(m,g)};ca.selectAll=function(a){var c,e,f,g,m=this.id,n=[];"function"!=
typeof a&&(a=U(a));for(var p=-1,q=this.length;++p<q;)for(var t=this[p],v=-1,y=t.length;++v<y;)if(c=t[v]){g=c.__transition__[m];e=a.call(c,c.__data__,v);n.push(c=[]);for(var F=-1,D=e.length;++F<D;)Db(f=e[F],F,m,g),c.push(f)}return bb(n,m)};ca.filter=function(a){var c,e,f,g=[];"function"!=typeof a&&(a=gd(a));for(var m=0,n=this.length;n>m;m++){g.push(c=[]);e=this[m];for(var p=0,q=e.length;q>p;p++)(f=e[p])&&a.call(f,f.__data__,p)&&c.push(f)}return bb(g,this.id,this.time).ease(this.ease())};ca.tween=function(a,
c){var e=this.id;return 2>arguments.length?this.node().__transition__[e].tween.get(a):za(this,null==c?function(c){c.__transition__[e].tween.remove(a)}:function(f){f.__transition__[e].tween.set(a,c)})};ca.attr=function(a,c){function e(){this.removeAttribute(m)}function f(){this.removeAttributeNS(m.space,m.local)}if(2>arguments.length){for(c in a)this.attr(c,a[c]);return this}var g="transform"==a?xb:Fa,m=n.ns.qualify(a);return Mc(this,"attr."+a,c,function(a){function c(){var d,e=this.getAttribute(m);
return e!==a&&(d=g(e,a),function(a){this.setAttribute(m,d(a))})}function d(){var c,e=this.getAttributeNS(m.space,m.local);return e!==a&&(c=g(e,a),function(a){this.setAttributeNS(m.space,m.local,c(a))})}return null==a?m.local?f:e:(a+="",m.local?d:c)})};ca.attrTween=function(a,c){function e(a,d){var f=c.call(this,a,d,this.getAttribute(g));return f&&function(a){this.setAttribute(g,f(a))}}function f(a,d){var e=c.call(this,a,d,this.getAttributeNS(g.space,g.local));return e&&function(a){this.setAttributeNS(g.space,
g.local,e(a))}}var g=n.ns.qualify(a);return this.tween("attr."+a,g.local?f:e)};ca.style=function(a,c,e){function f(){this.style.removeProperty(a)}var g=arguments.length;if(3>g){if("string"!=typeof a){2>g&&(c="");for(e in a)this.style(e,a[e],c);return this}e=""}var m="transform"==a?xb:Fa;return Mc(this,"style."+a,c,function(c){function g(){var f,n=ea.getComputedStyle(this,null).getPropertyValue(a);return n!==c&&(f=m(n,c),function(c){this.style.setProperty(a,f(c),e)})}return null==c?f:(c+="",g)})};
ca.styleTween=function(a,c,e){return 3>arguments.length&&(e=""),this.tween("style."+a,function(f,g){var m=c.call(this,f,g,ea.getComputedStyle(this,null).getPropertyValue(a));return m&&function(c){this.style.setProperty(a,m(c),e)}})};ca.text=function(a){return Mc(this,"text",a,Hg)};ca.remove=function(){return this.each("end.transition",function(){var a;!this.__transition__&&(a=this.parentNode)&&a.removeChild(this)})};ca.ease=function(a){var c=this.id;return 1>arguments.length?this.node().__transition__[c].ease:
("function"!=typeof a&&(a=n.ease.apply(n,arguments)),za(this,function(e){e.__transition__[c].ease=a}))};ca.delay=function(a){var c=this.id;return za(this,"function"==typeof a?function(e,f,g){e.__transition__[c].delay=a.call(e,e.__data__,f,g)|0}:(a|=0,function(e){e.__transition__[c].delay=a}))};ca.duration=function(a){var c=this.id;return za(this,"function"==typeof a?function(e,f,g){e.__transition__[c].duration=Math.max(1,a.call(e,e.__data__,f,g)|0)}:(a=Math.max(1,0|a),function(e){e.__transition__[c].duration=
a}))};ca.each=function(a,c){var e=this.id;if(2>arguments.length){var f=Ib,g=db;db=e;za(this,function(c,f,g){Ib=c.__transition__[e];a.call(c,c.__data__,f,g)});Ib=f;db=g}else za(this,function(f){f.__transition__[e].event.on(a,c)});return this};ca.transition=function(){for(var a,c,e,f,g=this.id,m=++Xe,n=[],p=0,q=this.length;q>p;p++){n.push(a=[]);c=this[p];for(var t=0,v=c.length;v>t;t++)(e=c[t])&&(f=Object.create(e.__transition__[g]),f.delay+=f.duration,Db(e,t,m,f)),a.push(e)}return bb(n,m)};n.svg.axis=
function(){function a(d){d.each(function(){var a,d=n.select(this),E=null==v?e.ticks?e.ticks.apply(e,t):e.domain():v,z=null==c?e.tickFormat?e.tickFormat.apply(e,t):String:c,C=Ig(e,E,y),A=d.selectAll(".tick.minor").data(C,String),C=A.enter().insert("line",".tick").attr("class","tick minor").style("opacity",1E-6),D=n.transition(A.exit()).style("opacity",1E-6).remove(),A=n.transition(A).style("opacity",1),K=d.selectAll(".tick.major").data(E,String),E=K.enter().insert("g","path").attr("class","tick major").style("opacity",
1E-6),H=n.transition(K.exit()).style("opacity",1E-6).remove(),B=n.transition(K).style("opacity",1),I=Ab(e),d=d.selectAll(".domain").data([0]),d=(d.enter().append("path").attr("class","domain"),n.transition(d)),N=e.copy(),O=this.__chart__||N;this.__chart__=N;E.append("line");E.append("text");var P=E.select("line"),Q=B.select("line"),z=K.select("text").text(z),K=E.select("text"),L=B.select("text");switch(f){case "bottom":a=Oe;C.attr("y2",m);A.attr("x2",0).attr("y2",m);P.attr("y2",g);K.attr("y",Math.max(g,
0)+q);Q.attr("x2",0).attr("y2",g);L.attr("x",0).attr("y",Math.max(g,0)+q);z.attr("dy",".71em").style("text-anchor","middle");d.attr("d","M"+I[0]+","+p+"V0H"+I[1]+"V"+p);break;case "top":a=Oe;C.attr("y2",-m);A.attr("x2",0).attr("y2",-m);P.attr("y2",-g);K.attr("y",-(Math.max(g,0)+q));Q.attr("x2",0).attr("y2",-g);L.attr("x",0).attr("y",-(Math.max(g,0)+q));z.attr("dy","0em").style("text-anchor","middle");d.attr("d","M"+I[0]+","+-p+"V0H"+I[1]+"V"+-p);break;case "left":a=Pe;C.attr("x2",-m);A.attr("x2",
-m).attr("y2",0);P.attr("x2",-g);K.attr("x",-(Math.max(g,0)+q));Q.attr("x2",-g).attr("y2",0);L.attr("x",-(Math.max(g,0)+q)).attr("y",0);z.attr("dy",".32em").style("text-anchor","end");d.attr("d","M"+-p+","+I[0]+"H0V"+I[1]+"H"+-p);break;case "right":a=Pe,C.attr("x2",m),A.attr("x2",m).attr("y2",0),P.attr("x2",g),K.attr("x",Math.max(g,0)+q),Q.attr("x2",g).attr("y2",0),L.attr("x",Math.max(g,0)+q).attr("y",0),z.attr("dy",".32em").style("text-anchor","start"),d.attr("d","M"+p+","+I[0]+"H0V"+I[1]+"H"+p)}if(e.ticks)E.call(a,
O),B.call(a,N),H.call(a,N),C.call(a,O),A.call(a,N),D.call(a,N);else{var S=N.rangeBand()/2,C=function(a){return N(a)+S};E.call(a,C);B.call(a,C)}})}var c,e=n.scale.linear(),f=jf,g=6,m=6,p=6,q=3,t=[10],v=null,y=0;return a.scale=function(c){return arguments.length?(e=c,a):e},a.orient=function(c){return arguments.length?(f=c in jh?c+"":jf,a):f},a.ticks=function(){return arguments.length?(t=arguments,a):t},a.tickValues=function(c){return arguments.length?(v=c,a):v},a.tickFormat=function(e){return arguments.length?
(c=e,a):c},a.tickSize=function(c,e){if(!arguments.length)return g;var f=arguments.length-1;return g=+c,m=1<f?+e:g,p=0<f?+arguments[f]:g,a},a.tickPadding=function(c){return arguments.length?(q=+c,a):q},a.tickSubdivide=function(c){return arguments.length?(y=+c,a):y},a};var jf="bottom",jh={top:1,right:1,bottom:1,left:1};n.svg.brush=function(){function a(m){m.each(function(){var m,p=n.select(this),t=p.selectAll(".background").data([0]),u=p.selectAll(".extent").data([0]),y=p.selectAll(".resize").data(D,
String);p.style("pointer-events","all").on("mousedown.brush",g).on("touchstart.brush",g);t.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");u.enter().append("rect").attr("class","extent").style("cursor","move");y.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return kh[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",
6).attr("height",6).style("visibility","hidden");y.style("display",a.empty()?"none":null);y.exit().remove();q&&(m=Ab(q),t.attr("x",m[0]).attr("width",m[1]-m[0]),e(p));v&&(m=Ab(v),t.attr("y",m[0]).attr("height",m[1]-m[0]),f(p));c(p)})}function c(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+B[+/e$/.test(a)][0]+","+B[+/^s/.test(a)][1]+")"})}function e(a){a.select(".extent").attr("x",B[0][0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",B[1][0]-B[0][0])}function f(a){a.select(".extent").attr("y",
B[0][1]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",B[1][1]-B[0][1])}function g(){function s(){var a=n.event.changedTouches;return a?n.touches(A,a)[0]:n.mouse(A)}function y(){var a=s(),d=!1;C&&(a[0]+=C[0],a[1]+=C[1]);Q||(n.event.altKey?(z||(z=[(B[0][0]+B[1][0])/2,(B[0][1]+B[1][1])/2]),L[0]=B[+(a[0]<z[0])][0],L[1]=B[+(a[1]<z[1])][1]):z=null);O&&D(a,q,0)&&(e(H),d=!0);P&&D(a,v,1)&&(f(H),d=!0);d&&(c(H),I({type:"brush",mode:Q?"move":"resize"}))}function D(a,c,d){var e,f,l=Ab(c);c=l[0];var l=
l[1],g=L[d],n=B[1][d]-B[0][d];return Q&&(c-=g,l-=n+g),e=Math.max(c,Math.min(l,a[d])),Q?f=(e+=g)+n:(z&&(g=Math.max(c,Math.min(l,2*z[d]-e))),e>g?(f=e,e=g):f=g),B[0][d]!==e||B[1][d]!==f?(m=null,B[0][d]=e,B[1][d]=f,!0):void 0}function E(){y();H.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);n.select("body").style("cursor",null);S.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",
null);I({type:"brushend"});t()}var z,C,A=this,G=n.select(n.event.target),I=p.of(A,arguments),H=n.select(A),N=G.datum(),O=!/^(n|s)$/.test(N)&&q,P=!/^(e|w)$/.test(N)&&v,Q=G.classed("extent"),L=s(),S=n.select(ea).on("mousemove.brush",y).on("mouseup.brush",E).on("touchmove.brush",y).on("touchend.brush",E).on("keydown.brush",function(){32==n.event.keyCode&&(Q||(z=null,L[0]-=B[1][0],L[1]-=B[1][1],Q=2),t())}).on("keyup.brush",function(){32==n.event.keyCode&&2==Q&&(L[0]+=B[1][0],L[1]+=B[1][1],Q=0,t())});
if(Q)L[0]=B[0][0]-L[0],L[1]=B[0][1]-L[1];else if(N){var U=+/w$/.test(N),N=+/^n/.test(N);C=[B[1-U][0]-L[0],B[1-N][1]-L[1]];L[0]=B[U][0];L[1]=B[N][1]}else n.event.altKey&&(z=L.slice());H.style("pointer-events","none").selectAll(".resize").style("display",null);n.select("body").style("cursor",G.style("cursor"));I({type:"brushstart"});y();t()}var m,p=y(a,"brushstart","brush","brushend"),q=null,v=null,D=Xc[0],B=[[0,0],[0,0]];return a.x=function(c){return arguments.length?(q=c,D=Xc[!q<<1|!v],a):q},a.y=
function(c){return arguments.length?(v=c,D=Xc[!q<<1|!v],a):v},a.extent=function(c){var e,f,l,g,n;return arguments.length?(m=[[0,0],[0,0]],q&&(e=c[0],f=c[1],v&&(e=e[0],f=f[0]),m[0][0]=e,m[1][0]=f,q.invert&&(e=q(e),f=q(f)),e>f&&(n=e,e=f,f=n),B[0][0]=0|e,B[1][0]=0|f),v&&(l=c[0],g=c[1],q&&(l=l[1],g=g[1]),m[0][1]=l,m[1][1]=g,v.invert&&(l=v(l),g=v(g)),l>g&&(n=l,l=g,g=n),B[0][1]=0|l,B[1][1]=0|g),a):(c=m||B,q&&(e=c[0][0],f=c[1][0],m||(e=B[0][0],f=B[1][0],q.invert&&(e=q.invert(e),f=q.invert(f)),e>f&&(n=e,
e=f,f=n))),v&&(l=c[0][1],g=c[1][1],m||(l=B[0][1],g=B[1][1],v.invert&&(l=v.invert(l),g=v.invert(g)),l>g&&(n=l,l=g,g=n))),q&&v?[[e,l],[f,g]]:q?[e,f]:v&&[l,g])},a.clear=function(){return m=null,B[0][0]=B[0][1]=B[1][0]=B[1][1]=0,a},a.empty=function(){return q&&B[0][0]===B[1][0]||v&&B[0][1]===B[1][1]},n.rebind(a,p,"on")};var kh={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Xc=["n e s w nw ne se sw".split(" "),["e","w"],["n",
"s"],[]];n.time={};var fa=Date;Ha.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},
getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){xa.setUTCDate.apply(this._,arguments)},setDay:function(){xa.setUTCDay.apply(this._,arguments)},setFullYear:function(){xa.setUTCFullYear.apply(this._,arguments)},setHours:function(){xa.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){xa.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){xa.setUTCMinutes.apply(this._,arguments)},setMonth:function(){xa.setUTCMonth.apply(this._,
arguments)},setSeconds:function(){xa.setUTCSeconds.apply(this._,arguments)},setTime:function(){xa.setTime.apply(this._,arguments)}};var xa=Date.prototype,kf="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),lf="Sun Mon Tue Wed Thu Fri Sat".split(" "),Yc="January February March April May June July August September October November December".split(" "),Zc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");n.time.year=Ia(function(a){return a=n.time.day(a),a.setMonth(0,1),
a},function(a,c){a.setFullYear(a.getFullYear()+c)},function(a){return a.getFullYear()});n.time.years=n.time.year.range;n.time.years.utc=n.time.year.utc.range;n.time.day=Ia(function(a){var c=new fa(1970,0);return c.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),c},function(a,c){a.setDate(a.getDate()+c)},function(a){return a.getDate()-1});n.time.days=n.time.day.range;n.time.days.utc=n.time.day.utc.range;n.time.dayOfYear=function(a){var c=n.time.year(a);return Math.floor((a-c-6E4*(a.getTimezoneOffset()-
c.getTimezoneOffset()))/864E5)};"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ").forEach(function(a,c){a=a.toLowerCase();c=7-c;var e=n.time[a]=Ia(function(a){return(a=n.time.day(a)).setDate(a.getDate()-(a.getDay()+c)%7),a},function(a,c){a.setDate(a.getDate()+7*Math.floor(c))},function(a){var d=n.time.year(a).getDay();return Math.floor((n.time.dayOfYear(a)+(d+c)%7)/7)-(d!==c)});n.time[a+"s"]=e.range;n.time[a+"s"].utc=e.utc.range;n.time[a+"OfYear"]=function(a){var d=n.time.year(a).getDay();
return Math.floor((n.time.dayOfYear(a)+(d+c)%7)/7)}});n.time.week=n.time.sunday;n.time.weeks=n.time.sunday.range;n.time.weeks.utc=n.time.sunday.utc.range;n.time.weekOfYear=n.time.sundayOfYear;n.time.format=function(a){function c(f){for(var g,m,n,p=[],q=-1,t=0;++q<e;)37===a.charCodeAt(q)&&(p.push(a.substring(t,q)),null!=(m=lh[g=a.charAt(++q)])&&(g=a.charAt(++q)),(n=Qb[g])&&(g=n(f,null==m?"e"===g?" ":"0":m)),p.push(g),t=q+1);return p.push(a.substring(t,q)),p.join("")}var e=a.length;return c.parse=function(c){var e=
{y:1900,m:0,d:1,H:0,M:0,S:0,L:0};if(Fb(e,a,c,0)!=c.length)return null;"p"in e&&(e.H=e.H%12+12*e.p);c=new fa;return c.setFullYear(e.y,e.m,e.d),c.setHours(e.H,e.M,e.S,e.L),c},c.toString=function(){return a},c};var mf=Gb(kf),nf=Gb(lf),of=Gb(Yc),mh=Qe(Yc),pf=Gb(Zc),nh=Qe(Zc),lh={"-":"",_:" ","0":"0"},Qb={a:function(a){return lf[a.getDay()]},A:function(a){return kf[a.getDay()]},b:function(a){return Zc[a.getMonth()]},B:function(a){return Yc[a.getMonth()]},c:n.time.format("%a %b %e %X %Y"),d:function(a,
c){return ia(a.getDate(),c,2)},e:function(a,c){return ia(a.getDate(),c,2)},H:function(a,c){return ia(a.getHours(),c,2)},I:function(a,c){return ia(a.getHours()%12||12,c,2)},j:function(a,c){return ia(1+n.time.dayOfYear(a),c,3)},L:function(a,c){return ia(a.getMilliseconds(),c,3)},m:function(a,c){return ia(a.getMonth()+1,c,2)},M:function(a,c){return ia(a.getMinutes(),c,2)},p:function(a){return 12<=a.getHours()?"PM":"AM"},S:function(a,c){return ia(a.getSeconds(),c,2)},U:function(a,c){return ia(n.time.sundayOfYear(a),
c,2)},w:function(a){return a.getDay()},W:function(a,c){return ia(n.time.mondayOfYear(a),c,2)},x:n.time.format("%m/%d/%Y"),X:n.time.format("%H:%M:%S"),y:function(a,c){return ia(a.getFullYear()%100,c,2)},Y:function(a,c){return ia(a.getFullYear()%1E4,c,4)},Z:function(a){var c=a.getTimezoneOffset();a=0<c?"-":"+";var e=~~(Math.abs(c)/60),c=Math.abs(c)%60;return a+ia(e,"0",2)+ia(c,"0",2)},"%":function(){return"%"}},Jg={a:function(a,c,e){nf.lastIndex=0;return(a=nf.exec(c.substring(e)))?e+a[0].length:-1},
A:function(a,c,e){mf.lastIndex=0;return(a=mf.exec(c.substring(e)))?e+a[0].length:-1},b:function(a,c,e){pf.lastIndex=0;return(c=pf.exec(c.substring(e)))?(a.m=nh.get(c[0].toLowerCase()),e+c[0].length):-1},B:function(a,c,e){of.lastIndex=0;return(c=of.exec(c.substring(e)))?(a.m=mh.get(c[0].toLowerCase()),e+c[0].length):-1},c:function(a,c,e){return Fb(a,""+Qb.c,c,e)},d:Re,e:Re,H:Se,I:Se,L:function(a,c,e){ga.lastIndex=0;return(c=ga.exec(c.substring(e,e+3)))?(a.L=+c[0],e+c[0].length):-1},m:function(a,c,
e){ga.lastIndex=0;return(c=ga.exec(c.substring(e,e+2)))?(a.m=c[0]-1,e+c[0].length):-1},M:function(a,c,e){ga.lastIndex=0;return(c=ga.exec(c.substring(e,e+2)))?(a.M=+c[0],e+c[0].length):-1},p:function(a,c,e){c=oh.get(c.substring(e,e+=2).toLowerCase());return null==c?-1:(a.p=c,e)},S:function(a,c,e){ga.lastIndex=0;return(c=ga.exec(c.substring(e,e+2)))?(a.S=+c[0],e+c[0].length):-1},x:function(a,c,e){return Fb(a,""+Qb.x,c,e)},X:function(a,c,e){return Fb(a,""+Qb.X,c,e)},y:function(a,c,e){ga.lastIndex=0;
return(c=ga.exec(c.substring(e,e+2)))?(a.y=+c[0]+(68<+c[0]?1900:2E3),e+c[0].length):-1},Y:function(a,c,e){ga.lastIndex=0;return(c=ga.exec(c.substring(e,e+4)))?(a.y=+c[0],e+c[0].length):-1}},ga=/^\s*\d+/,oh=n.map({am:0,pm:1});n.time.format.utc=function(a){function c(a){try{fa=Ha;var d=new fa;return d._=a,e(d)}finally{fa=Date}}var e=n.time.format(a);return c.parse=function(a){try{fa=Ha;var c=e.parse(a);return c&&c._}finally{fa=Date}},c.toString=e.toString,c};var qf=n.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");
n.time.format.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Nc:qf;Nc.parse=function(a){a=new Date(a);return isNaN(a)?null:a};Nc.toString=qf.toString;n.time.second=Ia(function(a){return new fa(1E3*Math.floor(a/1E3))},function(a,c){a.setTime(a.getTime()+1E3*Math.floor(c))},function(a){return a.getSeconds()});n.time.seconds=n.time.second.range;n.time.seconds.utc=n.time.second.utc.range;n.time.minute=Ia(function(a){return new fa(6E4*Math.floor(a/6E4))},function(a,c){a.setTime(a.getTime()+
6E4*Math.floor(c))},function(a){return a.getMinutes()});n.time.minutes=n.time.minute.range;n.time.minutes.utc=n.time.minute.utc.range;n.time.hour=Ia(function(a){var c=a.getTimezoneOffset()/60;return new fa(36E5*(Math.floor(a/36E5-c)+c))},function(a,c){a.setTime(a.getTime()+36E5*Math.floor(c))},function(a){return a.getHours()});n.time.hours=n.time.hour.range;n.time.hours.utc=n.time.hour.utc.range;n.time.month=Ia(function(a){return a=n.time.day(a),a.setDate(1),a},function(a,c){a.setMonth(a.getMonth()+
c)},function(a){return a.getMonth()});n.time.months=n.time.month.range;n.time.months.utc=n.time.month.utc.range;var Hb=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],$c=[[n.time.second,1],[n.time.second,5],[n.time.second,15],[n.time.second,30],[n.time.minute,1],[n.time.minute,5],[n.time.minute,15],[n.time.minute,30],[n.time.hour,1],[n.time.hour,3],[n.time.hour,6],[n.time.hour,12],[n.time.day,1],[n.time.day,2],[n.time.week,1],[n.time.month,1],[n.time.month,
3],[n.time.year,1]],ph=[[n.time.format("%Y"),Va],[n.time.format("%B"),function(a){return a.getMonth()}],[n.time.format("%b %d"),function(a){return 1!=a.getDate()}],[n.time.format("%a %d"),function(a){return a.getDay()&&1!=a.getDate()}],[n.time.format("%I %p"),function(a){return a.getHours()}],[n.time.format("%I:%M"),function(a){return a.getMinutes()}],[n.time.format(":%S"),function(a){return a.getSeconds()}],[n.time.format(".%L"),function(a){return a.getMilliseconds()}]],rf=n.scale.linear(),qh=Te(ph);
$c.year=function(a,c){return rf.domain(a.map(Kg)).ticks(c).map(Qc)};n.time.scale=function(){return Oc(n.scale.linear(),$c,qh)};var sf=$c.map(function(a){return[a[0].utc,a[1]]}),rh=[[n.time.format.utc("%Y"),Va],[n.time.format.utc("%B"),function(a){return a.getUTCMonth()}],[n.time.format.utc("%b %d"),function(a){return 1!=a.getUTCDate()}],[n.time.format.utc("%a %d"),function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],[n.time.format.utc("%I %p"),function(a){return a.getUTCHours()}],[n.time.format.utc("%I:%M"),
function(a){return a.getUTCMinutes()}],[n.time.format.utc(":%S"),function(a){return a.getUTCSeconds()}],[n.time.format.utc(".%L"),function(a){return a.getUTCMilliseconds()}]],sh=Te(rh);return sf.year=function(a,c){return rf.domain(a.map(Lg)).ticks(c).map(Rc)},n.time.scale.utc=function(){return Oc(n.scale.linear(),sf,sh)},n.text=function(){return n.xhr.apply(n,arguments).response(Mg)},n.json=function(a,c){return n.xhr(a,"application/json",c).response(Ng)},n.html=function(a,c){return n.xhr(a,"text/html",
c).response(Og)},n.xml=function(){return n.xhr.apply(n,arguments).response(Pg)},n}();var w=$("#test-nav").width(),h=800,i=0,barHeight=20,barWidth=0.8*w,duration=400,root,tree=d3.layout.tree().size([h,100]),diagonal=d3.svg.diagonal().projection(function(g){return[g.y,g.x]});
function updateNav(g){var m=tree.nodes(root);m.forEach(function(a,c){a.x=c*barHeight});var q=vis.selectAll("g.node").data(m,function(a){return a.id||(a.id=++i)}),c=q.enter().append("svg:g").attr("class","node").attr("transform",function(a){return"translate("+g.y0+","+g.x0+")"}).style("opacity",1E-6);c.append("svg:rect").attr("y",-barHeight/2).attr("height",barHeight).attr("width",barWidth).style("fill",color).on("click",click);c.append("svg:text").attr("dy",3.5).attr("dx",5.5).text(function(a){return a.name});
c.transition().duration(duration).attr("transform",function(a){return"translate("+a.y+","+a.x+")"}).style("opacity",1);q.transition().duration(duration).attr("transform",function(a){return"translate("+a.y+","+a.x+")"}).style("opacity",1).select("rect").style("fill",color);q.exit().transition().duration(duration).attr("transform",function(a){return"translate("+g.y+","+g.x+")"}).style("opacity",1E-6).remove();m.forEach(function(a){a.x0=a.x;a.y0=a.y})}
function click(g){g.children?(g._children=g.children,g.children=null):(g.children=g._children,g._children=null);updateNav(g)}function color(g){return g._children?"#3182bd":g.children?"#c6dbef":"#fd8d3c"}var isOdd=function(g){return 0==g%2?!1:!0};
function updateEvents(){$.getJSON("/dashboard/",function(g){$.each(g,function(m){var q=parseInt($(".event-id").eq(1).text());parseInt(g[m].pk)>q&&($("tr").eq(0).after('<tr><td class="event-id">'+g[m].pk+'</td><td class="name">'+g[m].fields.signal+'</td><td class="time">'+g[m].fields.time+"</td></tr>"),$("tr").eq(1).effect("highlight",{color:"#ff6600"},3E5))})})}function autoUpdateEvents(){setInterval(updateEvents,2E3)}$("#masonry-container").masonry({itemSelector:".mbox",columnWidth:384});
$(function(){$(".column").each(function(g){var m=this;$(m).sortable({connectWith:".column",handle:".portlet-header",update:function(g,c){$.cookie("sortorder"+m.id,$(m).sortable("toArray").join(),{path:"/"})}})});$(".portlet").addClass("ui-widget ui-widget-content ui-helper-clearfix ui-corner-all").find(".portlet-header").addClass("ui-widget-header ui-corner-all").prepend("<span class='ui-icon ui-icon-minusthick'></span>").end().find(".portlet-content");$(".portlet-header .ui-icon").click(function(){$(this).toggleClass("ui-icon-minusthick").toggleClass("ui-icon-plusthick");
$(this).parents(".portlet:first").find(".portlet-content").toggle($.cookie($(this).parents(".portlet:first")[0].id,$(this).parents(".portlet:first").find(".portlet-content").is(":hidden")?"expanded":"collapsed",{path:"/"}))})});
function loadCookie(){$(".column").each(function(g){g=$.cookie("sortorder"+this.id);var m=this;g&&$(g.split(",")).each(function(g,c){$("#"+c).appendTo(m)});$(this).sortable()});$(".portlet").each(function(g){if((g=$.cookie(this.id))&&"collapsed"===g)$(this).find(".ui-icon").toggleClass("ui-icon-minusthick").toggleClass("ui-icon-plusthick"),$(this).find(".portlet-content").hide()});"true"===$.cookie("shotTracking")?turnOnShotTracker():turnOffShotTracker()}
function plotSignal2D(){var g=$("#dummy");$.getJSON(window.location.search+(window.location.search.length?"&":"?")+"format=json",function(m){var q=document.createElement("canvas");q.width=m.dim[0].length;q.height=m.dim[1].length;g.height(q.height);for(var c=q.getContext("2d"),a=c.getImageData(0,0,q.width,q.height),e=0;e<a.width;e++)for(var f=0;f<a.height;f++){var p=4*(f*a.width+e),t=255*(m.data[e][f]-m.min)/(m.max-m.min);a.data[p]=t;a.data[p+1]=t;a.data[p+2]=t;a.data[p+3]=255}c.putImageData(a,0,0);
g.append(q)})}function getPlotWidth(g){return{plot:$(g).width()-30-0,marginLeft:30,marginRight:0}}function fillPlot(g){var m=Array(2*g.dim.length);for(i=0;i<g.dim.length;i++)m[i]=[g.dim[i],g.data[0][i]],m[g.dim.length+i]=[g.dim[g.dim.length-(i+1)],g.data[1][g.dim.length-(i+1)]];return m}function isMinMaxPlot(g){return-1<$.inArray("min",g.labels)&&-1<$.inArray("max",g.labels)&&2==g.labels.length?!0:!1}
function H1DSUri(g){this.uri_components=parseUri(g);this.h1ds_filters={};this.non_h1ds_query={};g=/^f(\d+)(_(\w+))?/;for(var m in this.uri_components.queryKey)if(this.uri_components.queryKey.hasOwnProperty(m)){var q=g.exec(m);q?(this.h1ds_filters.hasOwnProperty(q[1])||(this.h1ds_filters[q[1]]={name:"",kwargs:{}}),"undefined"===typeof q[2]?this.h1ds_filters[q[1]].name=this.uri_components.queryKey[m]:this.h1ds_filters[q[1]].kwargs[q[3]]=this.uri_components.queryKey[m]):this.non_h1ds_query[m]=this.uri_components.queryKey[m]}}
H1DSUri.prototype.getNextFilterID=function(){var g=-1,m;for(m in this.h1ds_filters)this.h1ds_filters.hasOwnProperty(m)&&Number(m)>g&&(g=Number(m));return g+1};H1DSUri.prototype.appendFilter=function(g,m){var q=this.getNextFilterID();this.h1ds_filters[String(q)]={name:g,kwargs:m}};
H1DSUri.prototype.renderUri=function(){var g={},m;for(m in this.non_h1ds_query)this.non_h1ds_query.hasOwnProperty(m)&&(g[m]=this.non_h1ds_query[m]);for(m in this.h1ds_filters)if(this.h1ds_filters.hasOwnProperty(m)){g["f"+m]=this.h1ds_filters[m].name;for(var q in this.h1ds_filters[m].kwargs)g["f"+m+"_"+q]=this.h1ds_filters[m].kwargs[q]}m=jQuery.extend({},this.uri_components);m.queryKey=g;return makeUri(m)};H1DSUri.prototype.isBinary=function(){return"bin"===this.non_h1ds_query.format};
function getSpectrogramUri(g){g=new H1DSUri(g);g.appendFilter("slanted_baseline",{window:10});g.appendFilter("spectrogram",{bin_size:-1});g.appendFilter("norm_dim_range_2d",{x_min:0,x_max:1,y_min:0,y_max:0.5});g.appendFilter("y_axis_energy_limit",{threshold:0.995});g.non_h1ds_query.format="bin";g.non_h1ds_query.bin_assert_dtype="uint8";return g}
function getPowerspectrumUri(g,m){var q=new H1DSUri(g);q.appendFilter("slanted_baseline",{window:10});q.appendFilter("power_spectrum",{});q.appendFilter("norm_dim_range",{min:0,max:0.5});q.appendFilter("resample_minmax",{n_bins:m});q.non_h1ds_query.format="json";return q}function getRawUri(g,m){var q=new H1DSUri(g);q.appendFilter("resample_minmax",{n_bins:m});q.non_h1ds_query.format="json";return q}
function NewPlotContainer(g,m,q){this.id=g;this.plotSpacing=5;this._plotTypes={main:{height:400},overview:{height:200}};this.plotTypes={raw:this.plotLine,spectrogram:this.plotSpectrogram,powerspectrum:this.plotLine,raw2d:this.plotSpectrogram};this.svg=d3.select(g).append("svg:svg").attr("width",$(g).width());this.data_colours="#A11D20 #662C91 #1859A9 #008C47 #ED2D2E #010101".split(" ");this.plotGrid=this.setPlotGrid(m,q);this.url_cache={};this.data_ids={};this.dataPadding=0.05;this.xAxisPadding=40;
this.yAxisPadding=60}
NewPlotContainer.prototype.plotLine=function(g){var m=g.datum().plot.flip;g.append("path").classed("path-filled",function(g){return g.data.is_minmax}).style("stroke",function(g,c){return g.data.colour}).style("fill",function(g,c){return g.data.colour}).attr("d",function(g,c){if(g.data.is_minmax){var a=fillPlot(g.data),e=d3.svg.line().x(function(a){return g.plot.x(a[m?1:0])}).y(function(a){return g.plot.y(a[m?0:1])});return e(a)}e=d3.svg.line().x(function(a,c){return g.plot.x(m?a:g.data.dim[c])}).y(function(a,
c){return g.plot.y(m?g.data.dim[c]:a)});return e(g.data.data)})};NewPlotContainer.prototype.plotRaw2D=function(g){};
NewPlotContainer.prototype.plotSpectrogram=function(g){var m=[];d3.scale.linear().domain([0,1]).range(["blue","red"]);d3.scale.linear().domain([0,1]).range([0,1]);var q=0;data=g.datum();for(var c=data.plot.x(data.data.dim[0][1])-data.plot.x(data.data.dim[0][0]),a=data.plot.y(data.data.dim[1][0])-data.plot.y(data.data.dim[1][1]),e=data.plot.x(data.data.dim[0][0]),f=data.plot.y(data.data.dim[1][0]),p=0;p<data.data.dim[0].length-1;p++)for(var t=0;t<data.data.dim[1].length-1;t++)0<data.data.data[p][t]&&
(m.push({xi:p,yi:t}),data.data.data[p][t]>q&&(q=data.data.data[p][t]));g.selectAll("rect").data(m).enter().append("rect").attr("x",function(a,f){return e+a.xi*c}).attr("y",function(c,e){return f-c.yi*a}).attr("width",c).attr("height",a).style("fill",function(a,c){return data.data.colour}).style("fill-opacity",function(a,c){return data.data.data[a.xi][a.yi]/q})};NewPlotContainer.prototype.plotPowerSpectrum=function(g){};
NewPlotContainer.prototype.setPlot=function(g,m,q){for(var c in m)this.plotGrid[g][c]=m[c];"undefined"!==typeof q&&q&&this.updateDisplay()};
NewPlotContainer.prototype.setPlotGrid=function(g,m){for(var q=d3.sum(m),c=[],a=this.svg.attr("width"),e=d3.min([a/1.618,0.9*$(window).height()]),f=d3.sum(g),p=[],t=0;t<m.length;t++)c[t]=a*m[t]/q;for(t=0;t<g.length;t++)p[t]=e*g[t]/f;q=[];for(t=f=e=a=0;t<g.length;t++){for(var N=f=0;N<c.length;N++)q[a]={translate:[f,e],width:c[N],height:p[t],data_ids:[],data:[],plotType:"",flip:!1,bindAxis:[-1,-1]},f+=c[N],a++;e+=p[t]}this.svg.attr("height",e);$(this.id).height(e);return q};
NewPlotContainer.prototype.addData=function(g,m){this.data_ids[g]={uri:m,colour:this.data_colours.pop()}};NewPlotContainer.prototype.addDataToPlot=function(g,m,q){q="undefined"!==typeof q?q:!0;this.plotGrid[m].data_ids.push(g);q&&this.updateDisplay()};ProcessH1DSHeaders=function(g){g=g.split("\n");for(var m={},q=0;q<g.length;q++){var c=g[q].split(":");2===c.length&&c[0].match("^X-H1DS")&&(m[c[0]]=$.trim(c[1]))}return m};
ProcessBinaryData=function(g,m){for(var q=new Uint8Array(str2ab(g)),c=parseInt(m["X-H1DS-ndim"]),a=0,e={data:[],dim:[],n_dim:c},f=0;f<c;f++){e.dim[f]=[];for(var p=parseInt(m["X-H1DS-dim-"+f+"-length"]),t=parseFloat(m["X-H1DS-dim-"+f+"-delta"]),N=parseFloat(m["X-H1DS-dim-"+f+"-first"]),la=0;la<p;la++)e.dim[f][la]=t*la+N}f=parseFloat(m["X-H1DS-data-delta"]);p=parseFloat(m["X-H1DS-data-min"]);if(0<c){t=parseInt(m["X-H1DS-dim-0-length"]);parseFloat(m["X-H1DS-dim-0-delta"]);parseFloat(m["X-H1DS-dim-0-first"]);
for(N=0;N<t;N++)if(1<c){e.data[N]=[];la=parseInt(m["X-H1DS-dim-1-length"]);parseFloat(m["X-H1DS-dim-1-delta"]);parseFloat(m["X-H1DS-dim-1-first"]);for(var y=0;y<la;y++)if(2<c){e.data[N][y]=[];var B=parseInt(m["X-H2DS-dim-2-length"]);parseFloat(m["X-H1DS-dim-2-delta"]);parseFloat(m["X-H1DS-dim-2-first"]);for(var v=0;v<B;v++)e.data[N][y][v]=f*q[a]+p,a++}else e.data[N][y]=q[a],a++}else e.data[N]=f*q[a]+p,a++}return e};function ab2str(g){return String.fromCharCode.apply(null,new Uint8Array(g))}
function str2ab(g){for(var m=new ArrayBuffer(g.length),q=new Uint8Array(m),c=0,a=g.length;c<a;c++)q[c]=g.charCodeAt(c);return m}NewPlotContainer.prototype.loadURL=function(g,m){var q=this;if(m){var c=$.ajax({url:g,async:!1}),a=ProcessH1DSHeaders(c.getAllResponseHeaders());c.done(function(c){data=ProcessBinaryData(c,a);q.url_cache[g]=data})}else $.ajax({url:g,dataType:"json",async:!1}).done(function(a){a.is_minmax=isMinMaxPlot(a);a.n_dim=2===a.dim.length?2:1;q.url_cache[g]=a})};
NewPlotContainer.prototype.getData=function(g,m){var q={};switch(m){case "raw":var q=getRawUri(this.data_ids[g].uri,this.svg.attr("width")),c=q.renderUri();this.loadURL(c,q.isBinary());q=this.url_cache[c];break;case "spectrogram":q=getSpectrogramUri(this.data_ids[g].uri);c=q.renderUri();this.loadURL(c,q.isBinary());q=this.url_cache[c];break;case "powerspectrum":q=getPowerspectrumUri(this.data_ids[g].uri,this.svg.attr("width"));c=q.renderUri();this.loadURL(c,q.isBinary());q=this.url_cache[c];break;
default:this.loadURL(this.data_ids[g].uri,!1),q=this.url_cache[this.data_ids[g].uri]}return q};
NewPlotContainer.prototype.updateDisplay=function(){for(var g=this,m=0;m<this.plotGrid.length;m++){for(var q=0;q<this.plotGrid[m].data_ids.length;q++)this.plotGrid[m].data[q]=this.getData(this.plotGrid[m].data_ids[q],this.plotGrid[m].plotType),this.plotGrid[m].data[q].colour=g.data_ids[this.plotGrid[m].data_ids[q]].colour;0<this.plotGrid[m].data_ids.length&&this.updatePlot(m)}for(m=0;m<this.plotGrid.length;m++)0<this.plotGrid[m].data_ids.length&&this.linkAxes(m);m=this.svg.selectAll("g.plot").data(this.plotGrid);
m.enter().append("g").attr("class","plot").attr("transform",function(c){return"translate("+c.translate[0]+","+c.translate[1]+")"}).append("clipPath").attr("id",function(c,a){return"plot-"+a+"-clippath"}).append("svg:rect").attr("width",function(c,a){return c.width}).attr("height",function(c,a){return c.height});m.exit().remove();m.append("g").attr("class","axis x").attr("id",function(c,a){return"plot-"+a+"-axis-x"}).attr("transform",function(c){return"translate(0,"+(c.height-g.xAxisPadding)+")"}).each(function(c){"undefined"!==
typeof c.xAxis?d3.select(this).call(c.xAxis):function(){}}).append("text").attr("text-anchor","middle").attr("x",function(c){return g.yAxisPadding+0.5*(c.width-g.yAxisPadding)}).attr("y",function(c){return 0.8*g.xAxisPadding}).text(function(c){return"["+c.data[0].units[1]+"]"});m.append("g").attr("class","axis y").attr("id",function(c,a){return"plot-"+a+"-axis-y"}).attr("transform",function(c){return"translate("+g.yAxisPadding+",0)"}).each(function(c){"undefined"!==typeof c.yAxis?d3.select(this).call(c.yAxis):
function(){}}).append("text").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("x",function(c){return-0.5*(c.height-g.xAxisPadding)}).attr("y",function(c){return-0.8*g.yAxisPadding}).text(function(c){return"["+c.data[0].units[0]+"]"});m=m.selectAll("g.data").data(function(c,a){for(var e=[],f=0;f<c.data.length;f++)e[f]={data:c.data[f],plot:c,plotid:a};return e});m.enter().append("g").attr("class","data").attr("clip-path",function(c,a){return"url(#plot-"+a+"-clippath)"}).each(function(c,
a){d3.select(this).call(g.plotTypes[c.plot.plotType])});m.exit().remove()};NewPlotContainer.prototype.linkAxes=function(g){var m=0<=this.plotGrid[g].bindAxis[0]&&this.plotGrid[g].bindAxis[0]!==g?this.plotGrid[g].bindAxis[0]:g,q=0<=this.plotGrid[g].bindAxis[1]&&this.plotGrid[g].bindAxis[1]!==g?this.plotGrid[g].bindAxis[1]:g;m!==g&&this.plotGrid[g].x.domain(this.plotGrid[m].x.domain());q!==g&&this.plotGrid[g].y.domain(this.plotGrid[q].y.domain())};
NewPlotContainer.prototype.updatePlot=function(g){var m=this.plotGrid[g].flip,q=[this.yAxisPadding,this.plotGrid[g].width],c=[this.plotGrid[g].height-this.xAxisPadding,0],a=[d3.min(this.plotGrid[g].data,function(a,c){return 1===a.n_dim?d3.min(a.dim):d3.min(a.dim[0])}),d3.max(this.plotGrid[g].data,function(a,c){return 1===a.n_dim?d3.max(a.dim):d3.max(a.dim[0])})],a=d3.scale.linear().range(m?c:q).domain(a);this.plotGrid[g].flip?this.plotGrid[g].y=a:this.plotGrid[g].x=a;var a=[d3.min(this.plotGrid[g].data,
function(a,c){return 1===a.n_dim?a.is_minmax?d3.min(a.data[0]):d3.min(a.data):d3.min(a.dim[1])}),d3.max(this.plotGrid[g].data,function(a,c){return 1===a.n_dim?a.is_minmax?d3.max(a.data[1]):d3.max(a.data):d3.max(a.dim[1])})],e=a[1]-a[0],m=d3.scale.linear().range(m?q:c).domain([a[0]-this.dataPadding*e,a[1]+this.dataPadding*e]);this.plotGrid[g].flip?this.plotGrid[g].x=m:this.plotGrid[g].y=m;this.plotGrid[g].xAxis=d3.svg.axis().scale(this.plotGrid[g].x).orient("bottom").tickSize(1===this.plotGrid[g].data[0].n_dim?
this.plotGrid[g].y.range()[1]-this.plotGrid[g].y.range()[0]:5);this.plotGrid[g].yAxis=d3.svg.axis().scale(this.plotGrid[g].y).orient("left").tickSize(1===this.plotGrid[g].data[0].n_dim?this.plotGrid[g].x.range()[0]-this.plotGrid[g].x.range()[1]:5)};function getLastShotInDisplayedPage(){var g=-1;d3.selectAll("table.main-table tr").each(function(m,q){if(0<q){var c=Number(d3.select(this).select("td").text());c>g&&(g=c)}});return g}
function summaryUpdateRequired(g){$.ajax({url:"/summary/_/get_last_update_time/",dataType:"json",async:!1}).done(function(g){latest_summdb_update=new Date(g.last_update)});return latest_summdb_update>g}
function updateSummaryDB(){var g=getLastShotInDisplayedPage(),m=-1;$.ajax({url:"/summary/_/get_latest_summarydb_shot/",dataType:"json",async:!1}).done(function(g){m=Number(g.latest_shot)});m>g&&$.ajax({url:window.location.toString()+(window.location.search+(window.location.search.length?"&":"?")+"format=json"),dataType:"json",async:!1}).done(function(g){})}
function cross(g){var m=[],q,c;for(q=0;q<g.data.length;q++){m[q]=[];m[q].shot;for(c=0;c<g.attributes.length;c++)m[q][c]={shot:g.data[q].shot,attr:g.attributes[c],value:g.data[q].d[c]}}return m}$("span.toggleVertical").each(function(){"true"===$.cookie("vertical-"+$(this).text())&&($(this).toggleClass("verticalText"),$(this).html($(this).text().replace(/(.)/g,"$1<br />")))});
$("span.toggleVertical").click(function(){$(this).toggleClass("verticalText");$(this).hasClass("verticalText")?($(this).html($(this).text().replace(/(.)/g,"$1<br />")),$.cookie("vertical-"+$(this).text(),!0)):($(this).html($(this).text().replace("$1<br />","")),$.cookie("vertical-"+$(this).text(),!1))});
function autoPollSummaryDB(){var g=d3.select("#poll-summarydb-server");if(null!==g[0][0]&&"True"===g.text()){var m=null,q=window.location.toString()+(window.location.search+(window.location.search.length?"&":"?")+"format=json"),c=d3.select("table.main-table tbody"),a=function(a){$.ajax({url:q,dataType:"json",async:!1}).done(function(f){m=new Date(f.timestamp);f=c.selectAll("tr").data(cross(f),function(a){return a[0].shot});f.enter().insert("tr","tr").style("background-color","yellow");var g=f.selectAll("td").data(function(a){return a});
g.enter().append("td").html(function(a,c){return'<a href="/summary/_/go_to_source/'+a.attr+"/"+a.shot+'/" >'+a.value+"</a>"});g.transition().duration(500).each(function(a){d3.select(this).html(function(a,c){return'<a href="/summary/_/go_to_source/'+a.attr+"/"+a.shot+'/" >'+a.value+"</a>"})});f.transition().duration(a).style("background-color","white");f.exit().remove()})};a(1E3);setInterval(function(){summaryUpdateRequired(m)&&a(3E5)},2E3)}}var shot_stream_client=new XMLHttpRequest;
function turnOffShotTracker(){$("#h1ds-track-latest-shot").hide();$("#h1ds-shot-controller").show();$("#h1ds-toggle-track-latest-shot").html('<FORM class="inline-form right" action="javascript:toggleTrackLatestShot()" method="post"><INPUT type="submit" id="h1ds-toggletrack-shot" name="h1ds-toggletrack-shot" value="track latest shot"></FORM>');$.cookie("shotTracking","false",{path:"/"});shot_stream_client.abort()}
function turnOnShotTracker(){$("#h1ds-shot-controller").hide();$("#h1ds-track-latest-shot").show();$("#h1ds-toggletrack-latest-shot").html('<FORM class="inline-form right" action="javascript:toggleTrackLatestShot()" method="post"><INPUT type="submit" id="h1ds-toggletrack-shot" name="h1ds-toggletrack-shot" value="stop tracking latest shot"></FORM>');$.cookie("shotTracking","true",{path:"/"});shot_stream_client.open("get","/_/shot_stream/");shot_stream_client.send();shot_stream_client.onprogress=function(){var g=
this.responseText.split("\n");$.getJSON("/_/url_for_shot",{input_path:window.location.toString(),shot:g[g.length-2]},function(g){window.location=g.new_url})}}function toggleTrackLatestShot(){"true"===$.cookie("shotTracking")?turnOffShotTracker():turnOnShotTracker();return!1}function plotScalar(g,m){return 0}function plot1DimArray(g,m){var q=new NewPlotContainer("#"+g,[500],[1]);q.addData("default",m);q.setPlot(0,{plotType:"raw"});q.addDataToPlot("default",0,!0)}
function plot2DimArray(g,m){var q=new NewPlotContainer("#"+g,[500],[1]);q.addData("default",m);q.setPlot(0,{plotType:"raw2d"});q.addDataToPlot("default",0,!0)}function getPlotFunction(g,m){switch(m){case "0":return plotScalar;case "1":return plot1DimArray;case "2":return plot2DimArray}}
function populatePagelet(g){var m=g.attr("data-pagelet-url");"undefined"===typeof m&&(m=window.location.toString());m=new H1DSUri(m);m.non_h1ds_query.format="json";var m=m.renderUri(),q=g.attr("data-dtype"),c=g.attr("data-ndim");getPlotFunction(q,c)(g.attr("id"),m)}$.fn.scrollView=function(){return this.each(function(){$("html, body").animate({scrollTop:$(this).offset().top},0)})};$(document).ready(function(){$("#main").scrollView();autoPollSummaryDB();loadCookie();$(".h1ds-pagelet").each(function(){populatePagelet($(this))})});
