var w=$("#test-nav").width(),h=800,i=0,barHeight=20,barWidth=0.8*w,duration=400,root,tree=d3.layout.tree().size([h,100]),diagonal=d3.svg.diagonal().projection(function(f){return[f.y,f.x]});
function updateNav(f){var l=tree.nodes(root);l.forEach(function(a,d){a.x=d*barHeight});var p=vis.selectAll("g.node").data(l,function(a){return a.id||(a.id=++i)}),a=p.enter().append("svg:g").attr("class","node").attr("transform",function(a){return"translate("+f.y0+","+f.x0+")"}).style("opacity",1E-6);a.append("svg:rect").attr("y",-barHeight/2).attr("height",barHeight).attr("width",barWidth).style("fill",color).on("click",click);a.append("svg:text").attr("dy",3.5).attr("dx",5.5).text(function(a){return a.name});
a.transition().duration(duration).attr("transform",function(a){return"translate("+a.y+","+a.x+")"}).style("opacity",1);p.transition().duration(duration).attr("transform",function(a){return"translate("+a.y+","+a.x+")"}).style("opacity",1).select("rect").style("fill",color);p.exit().transition().duration(duration).attr("transform",function(a){return"translate("+f.y+","+f.x+")"}).style("opacity",1E-6).remove();l.forEach(function(a){a.x0=a.x;a.y0=a.y})}
function click(f){f.children?(f._children=f.children,f.children=null):(f.children=f._children,f._children=null);updateNav(f)}function color(f){return f._children?"#3182bd":f.children?"#c6dbef":"#fd8d3c"}var isOdd=function(f){return 0==f%2?!1:!0};
function updateEvents(){$.getJSON("/dashboard/",function(f){$.each(f,function(l){var p=parseInt($(".event-id").eq(1).text());parseInt(f[l].pk)>p&&($("tr").eq(0).after('<tr><td class="event-id">'+f[l].pk+'</td><td class="name">'+f[l].fields.signal+'</td><td class="time">'+f[l].fields.time+"</td></tr>"),$("tr").eq(1).effect("highlight",{color:"#ff6600"},3E5))})})}function autoUpdateEvents(){setInterval(updateEvents,2E3)}$("#masonry-container").masonry({itemSelector:".mbox",columnWidth:384});
$(function(){$(".column").each(function(f){var l=this;$(l).sortable({connectWith:".column",handle:".portlet-header",update:function(f,a){$.cookie("sortorder"+l.id,$(l).sortable("toArray").join(),{path:"/"})}})});$(".portlet").addClass("ui-widget ui-widget-content ui-helper-clearfix ui-corner-all").find(".portlet-header").addClass("ui-widget-header ui-corner-all").prepend("<span class='ui-icon ui-icon-minusthick'></span>").end().find(".portlet-content");$(".portlet-header .ui-icon").click(function(){$(this).toggleClass("ui-icon-minusthick").toggleClass("ui-icon-plusthick");
$(this).parents(".portlet:first").find(".portlet-content").toggle($.cookie($(this).parents(".portlet:first")[0].id,$(this).parents(".portlet:first").find(".portlet-content").is(":hidden")?"expanded":"collapsed",{path:"/"}))})});
function loadCookie(){$(".column").each(function(f){f=$.cookie("sortorder"+this.id);var l=this;f&&$(f.split(",")).each(function(f,a){$("#"+a).appendTo(l)});$(this).sortable()});$(".portlet").each(function(f){if((f=$.cookie(this.id))&&"collapsed"===f)$(this).find(".ui-icon").toggleClass("ui-icon-minusthick").toggleClass("ui-icon-plusthick"),$(this).find(".portlet-content").hide()});"true"===$.cookie("shotTracking")?turnOnShotTracker():turnOffShotTracker()}
function plotSignal2D(){var f=$("#dummy");$.getJSON(window.location.search+(window.location.search.length?"&":"?")+"format=json",function(l){var p=document.createElement("canvas");p.width=l.dim[0].length;p.height=l.dim[1].length;f.height(p.height);for(var a=p.getContext("2d"),c=a.getImageData(0,0,p.width,p.height),d=0;d<c.width;d++)for(var g=0;g<c.height;g++){var r=4*(g*c.width+d),y=255*(l.data[d][g]-l.min)/(l.max-l.min);c.data[r]=y;c.data[r+1]=y;c.data[r+2]=y;c.data[r+3]=255}a.putImageData(c,0,0);
f.append(p)})}function getPlotWidth(f){return{plot:$(f).width()-30-0,marginLeft:30,marginRight:0}}function fillPlot(f){var l=Array(2*f.dim.length);for(i=0;i<f.dim.length;i++)l[i]=[f.dim[i],f.data[0][i]],l[f.dim.length+i]=[f.dim[f.dim.length-(i+1)],f.data[1][f.dim.length-(i+1)]];return l}function isMinMaxPlot(f){return-1<$.inArray("min",f.labels)&&-1<$.inArray("max",f.labels)&&2==f.labels.length?!0:!1}
function H1DSUri(f){this.uri_components=parseUri(f);this.h1ds_filters={};this.non_h1ds_query={};f=/^f(\d+)(_(\w+))?/;for(var l in this.uri_components.queryKey)if(this.uri_components.queryKey.hasOwnProperty(l)){var p=f.exec(l);p?(this.h1ds_filters.hasOwnProperty(p[1])||(this.h1ds_filters[p[1]]={name:"",kwargs:{}}),"undefined"===typeof p[2]?this.h1ds_filters[p[1]].name=this.uri_components.queryKey[l]:this.h1ds_filters[p[1]].kwargs[p[3]]=this.uri_components.queryKey[l]):this.non_h1ds_query[l]=this.uri_components.queryKey[l]}}
H1DSUri.prototype.getNextFilterID=function(){var f=-1,l;for(l in this.h1ds_filters)this.h1ds_filters.hasOwnProperty(l)&&Number(l)>f&&(f=Number(l));return f+1};H1DSUri.prototype.appendFilter=function(f,l){var p=this.getNextFilterID();this.h1ds_filters[String(p)]={name:f,kwargs:l}};
H1DSUri.prototype.renderUri=function(){var f={},l;for(l in this.non_h1ds_query)this.non_h1ds_query.hasOwnProperty(l)&&(f[l]=this.non_h1ds_query[l]);for(l in this.h1ds_filters)if(this.h1ds_filters.hasOwnProperty(l)){f["f"+l]=this.h1ds_filters[l].name;for(var p in this.h1ds_filters[l].kwargs)f["f"+l+"_"+p]=this.h1ds_filters[l].kwargs[p]}l=jQuery.extend({},this.uri_components);l.queryKey=f;return makeUri(l)};H1DSUri.prototype.isBinary=function(){return"bin"===this.non_h1ds_query.format};
function getSpectrogramUri(f){f=new H1DSUri(f);f.appendFilter("slanted_baseline",{window:10});f.appendFilter("spectrogram",{bin_size:-1});f.appendFilter("norm_dim_range_2d",{x_min:0,x_max:1,y_min:0,y_max:0.5});f.appendFilter("y_axis_energy_limit",{threshold:0.995});f.non_h1ds_query.format="bin";f.non_h1ds_query.bin_assert_dtype="uint8";return f}
function getPowerspectrumUri(f,l){var p=new H1DSUri(f);p.appendFilter("slanted_baseline",{window:10});p.appendFilter("power_spectrum",{});p.appendFilter("norm_dim_range",{min:0,max:0.5});p.appendFilter("resample_minmax",{n_bins:l});p.non_h1ds_query.format="json";return p}function getRawUri(f,l){var p=new H1DSUri(f);p.appendFilter("resample_minmax",{n_bins:l});p.non_h1ds_query.format="json";return p}
function NewPlotContainer(f,l,p){this.id=f;this.plotSpacing=5;this._plotTypes={main:{height:400},overview:{height:200}};this.plotTypes={raw:this.plotLine,spectrogram:this.plotSpectrogram,powerspectrum:this.plotLine,raw2d:this.plotSpectrogram};this.svg=d3.select(f).append("svg:svg").attr("width",$(f).width());this.data_colours="#A11D20 #662C91 #1859A9 #008C47 #ED2D2E #010101".split(" ");this.plotGrid=this.setPlotGrid(l,p);this.url_cache={};this.data_ids={};this.dataPadding=0.05;this.xAxisPadding=40;
this.yAxisPadding=60}
NewPlotContainer.prototype.plotLine=function(f){var l=f.datum().plot.flip;f.append("path").classed("path-filled",function(f){return f.data.is_minmax}).style("stroke",function(f,a){return f.data.colour}).style("fill",function(f,a){return f.data.colour}).attr("d",function(f,a){if(f.data.is_minmax){var c=fillPlot(f.data),d=d3.svg.line().x(function(a){return f.plot.x(a[l?1:0])}).y(function(a){return f.plot.y(a[l?0:1])});return d(c)}d=d3.svg.line().x(function(a,c){return f.plot.x(l?a:f.data.dim[c])}).y(function(a,
c){return f.plot.y(l?f.data.dim[c]:a)});return d(f.data.data)})};NewPlotContainer.prototype.plotRaw2D=function(f){};
NewPlotContainer.prototype.plotSpectrogram=function(f){var l=[];d3.scale.linear().domain([0,1]).range(["blue","red"]);d3.scale.linear().domain([0,1]).range([0,1]);var p=0;data=f.datum();for(var a=data.plot.x(data.data.dim[0][1])-data.plot.x(data.data.dim[0][0]),c=data.plot.y(data.data.dim[1][0])-data.plot.y(data.data.dim[1][1]),d=data.plot.x(data.data.dim[0][0]),g=data.plot.y(data.data.dim[1][0]),r=0;r<data.data.dim[0].length-1;r++)for(var y=0;y<data.data.dim[1].length-1;y++)0<data.data.data[r][y]&&
(l.push({xi:r,yi:y}),data.data.data[r][y]>p&&(p=data.data.data[r][y]));f.selectAll("rect").data(l).enter().append("rect").attr("x",function(c,y){return d+c.xi*a}).attr("y",function(a,y){return g-a.yi*c}).attr("width",a).attr("height",c).style("fill",function(a,c){return data.data.colour}).style("fill-opacity",function(a,c){return data.data.data[a.xi][a.yi]/p})};NewPlotContainer.prototype.plotPowerSpectrum=function(f){};
NewPlotContainer.prototype.setPlot=function(f,l,p){for(var a in l)this.plotGrid[f][a]=l[a];"undefined"!==typeof p&&p&&this.updateDisplay()};
NewPlotContainer.prototype.setPlotGrid=function(f,l){for(var p=d3.sum(l),a=[],c=this.svg.attr("width"),d=0;d<l.length;d++)a[d]=c*l[d]/p;for(var p=[],g=d=c=0,r=0;r<f.length;r++){for(var y=g=0;y<a.length;y++)p[c]={translate:[g,d],width:a[y],height:f[r],data_ids:[],data:[],plotType:"",flip:!1,bindAxis:[-1,-1]},g+=a[y],c++;d+=f[r]}this.svg.attr("height",d);$(this.id).height(d);return p};NewPlotContainer.prototype.addData=function(f,l){this.data_ids[f]={uri:l,colour:this.data_colours.pop()}};
NewPlotContainer.prototype.addDataToPlot=function(f,l,p){p="undefined"!==typeof p?p:!0;this.plotGrid[l].data_ids.push(f);p&&this.updateDisplay()};ProcessH1DSHeaders=function(f){f=f.split("\n");for(var l={},p=0;p<f.length;p++){var a=f[p].split(":");2===a.length&&a[0].match("^X-H1DS")&&(l[a[0]]=$.trim(a[1]))}return l};
ProcessBinaryData=function(f,l){for(var p=new Uint8Array(str2ab(f)),a=parseInt(l["X-H1DS-ndim"]),c=0,d={data:[],dim:[],n_dim:a},g=0;g<a;g++){d.dim[g]=[];for(var r=parseInt(l["X-H1DS-dim-"+g+"-length"]),y=parseFloat(l["X-H1DS-dim-"+g+"-delta"]),T=parseFloat(l["X-H1DS-dim-"+g+"-first"]),V=0;V<r;V++)d.dim[g][V]=y*V+T}g=parseFloat(l["X-H1DS-data-delta"]);r=parseFloat(l["X-H1DS-data-min"]);if(0<a){y=parseInt(l["X-H1DS-dim-0-length"]);parseFloat(l["X-H1DS-dim-0-delta"]);parseFloat(l["X-H1DS-dim-0-first"]);
for(T=0;T<y;T++)if(1<a){d.data[T]=[];V=parseInt(l["X-H1DS-dim-1-length"]);parseFloat(l["X-H1DS-dim-1-delta"]);parseFloat(l["X-H1DS-dim-1-first"]);for(var x=0;x<V;x++)if(2<a){d.data[T][x]=[];var I=parseInt(l["X-H2DS-dim-2-length"]);parseFloat(l["X-H1DS-dim-2-delta"]);parseFloat(l["X-H1DS-dim-2-first"]);for(var t=0;t<I;t++)d.data[T][x][t]=g*p[c]+r,c++}else d.data[T][x]=p[c],c++}else d.data[T]=g*p[c]+r,c++}return d};function ab2str(f){return String.fromCharCode.apply(null,new Uint8Array(f))}
function str2ab(f){for(var l=new ArrayBuffer(f.length),p=new Uint8Array(l),a=0,c=f.length;a<c;a++)p[a]=f.charCodeAt(a);return l}NewPlotContainer.prototype.loadURL=function(f,l){var p=this;if(l){var a=$.ajax({url:f,async:!1}),c=ProcessH1DSHeaders(a.getAllResponseHeaders());a.done(function(a){data=ProcessBinaryData(a,c);p.url_cache[f]=data})}else $.ajax({url:f,dataType:"json",async:!1}).done(function(a){a.is_minmax=isMinMaxPlot(a);a.n_dim=2===a.dim.length?2:1;p.url_cache[f]=a})};
NewPlotContainer.prototype.getData=function(f,l){var p={};switch(l){case "raw":var p=getRawUri(this.data_ids[f].uri,this.svg.attr("width")),a=p.renderUri();this.loadURL(a,p.isBinary());p=this.url_cache[a];break;case "spectrogram":p=getSpectrogramUri(this.data_ids[f].uri);a=p.renderUri();this.loadURL(a,p.isBinary());p=this.url_cache[a];break;case "powerspectrum":p=getPowerspectrumUri(this.data_ids[f].uri,this.svg.attr("width"));a=p.renderUri();this.loadURL(a,p.isBinary());p=this.url_cache[a];break;
default:this.loadURL(this.data_ids[f].uri,!1),p=this.url_cache[this.data_ids[f].uri]}return p};
NewPlotContainer.prototype.updateDisplay=function(){for(var f=this,l=0;l<this.plotGrid.length;l++){for(var p=0;p<this.plotGrid[l].data_ids.length;p++)this.plotGrid[l].data[p]=this.getData(this.plotGrid[l].data_ids[p],this.plotGrid[l].plotType),this.plotGrid[l].data[p].colour=f.data_ids[this.plotGrid[l].data_ids[p]].colour;0<this.plotGrid[l].data_ids.length&&this.updatePlot(l)}for(l=0;l<this.plotGrid.length;l++)0<this.plotGrid[l].data_ids.length&&this.linkAxes(l);l=this.svg.selectAll("g.plot").data(this.plotGrid);
l.enter().append("g").attr("class","plot").attr("transform",function(a){return"translate("+a.translate[0]+","+a.translate[1]+")"}).append("clipPath").attr("id",function(a,c){return"plot-"+c+"-clippath"}).append("svg:rect").attr("width",function(a,c){return a.width}).attr("height",function(a,c){return a.height});l.exit().remove();l.append("g").attr("class","axis x").attr("id",function(a,c){return"plot-"+c+"-axis-x"}).attr("transform",function(a){return"translate(0,"+(a.height-f.xAxisPadding)+")"}).each(function(a){"undefined"!==
typeof a.xAxis?d3.select(this).call(a.xAxis):function(){}}).append("text").attr("text-anchor","middle").attr("x",function(a){return f.yAxisPadding+0.5*(a.width-f.yAxisPadding)}).attr("y",function(a){return 0.8*f.xAxisPadding}).text(function(a){return"x"});l.append("g").attr("class","axis y").attr("id",function(a,c){return"plot-"+c+"-axis-y"}).attr("transform",function(a){return"translate("+f.yAxisPadding+",0)"}).each(function(a){"undefined"!==typeof a.yAxis?d3.select(this).call(a.yAxis):function(){}}).append("text").attr("text-anchor",
"middle").attr("transform","rotate(-90)").attr("x",function(a){return-0.5*(a.height-f.xAxisPadding)}).attr("y",function(a){return-0.8*f.yAxisPadding}).text(function(a){return"y"});l=l.selectAll("g.data").data(function(a,c){for(var d=[],g=0;g<a.data.length;g++)d[g]={data:a.data[g],plot:a,plotid:c};return d});l.enter().append("g").attr("class","data").attr("clip-path",function(a,c){return"url(#plot-"+c+"-clippath)"}).each(function(a,c){d3.select(this).call(f.plotTypes[a.plot.plotType])});l.exit().remove()};
NewPlotContainer.prototype.linkAxes=function(f){var l=0<=this.plotGrid[f].bindAxis[0]&&this.plotGrid[f].bindAxis[0]!==f?this.plotGrid[f].bindAxis[0]:f,p=0<=this.plotGrid[f].bindAxis[1]&&this.plotGrid[f].bindAxis[1]!==f?this.plotGrid[f].bindAxis[1]:f;l!==f&&this.plotGrid[f].x.domain(this.plotGrid[l].x.domain());p!==f&&this.plotGrid[f].y.domain(this.plotGrid[p].y.domain())};
NewPlotContainer.prototype.updatePlot=function(f){var l=this.plotGrid[f].flip,p=[this.yAxisPadding,this.plotGrid[f].width],a=[this.plotGrid[f].height-this.xAxisPadding,0],c=[d3.min(this.plotGrid[f].data,function(a,c){return 1===a.n_dim?d3.min(a.dim):d3.min(a.dim[0])}),d3.max(this.plotGrid[f].data,function(a,c){return 1===a.n_dim?d3.max(a.dim):d3.max(a.dim[0])})],c=d3.scale.linear().range(l?a:p).domain(c);this.plotGrid[f].flip?this.plotGrid[f].y=c:this.plotGrid[f].x=c;var c=[d3.min(this.plotGrid[f].data,
function(a,c){return 1===a.n_dim?a.is_minmax?d3.min(a.data[0]):d3.min(a.data):d3.min(a.dim[1])}),d3.max(this.plotGrid[f].data,function(a,c){return 1===a.n_dim?a.is_minmax?d3.max(a.data[1]):d3.max(a.data):d3.max(a.dim[1])})],d=c[1]-c[0],l=d3.scale.linear().range(l?p:a).domain([c[0]-this.dataPadding*d,c[1]+this.dataPadding*d]);this.plotGrid[f].flip?this.plotGrid[f].x=l:this.plotGrid[f].y=l;this.plotGrid[f].xAxis=d3.svg.axis().scale(this.plotGrid[f].x).orient("bottom").tickSize(1===this.plotGrid[f].data[0].n_dim?
this.plotGrid[f].y.range()[1]-this.plotGrid[f].y.range()[0]:5);this.plotGrid[f].yAxis=d3.svg.axis().scale(this.plotGrid[f].y).orient("left").tickSize(1===this.plotGrid[f].data[0].n_dim?this.plotGrid[f].x.range()[0]-this.plotGrid[f].x.range()[1]:5)};function getLastShotInDisplayedPage(){var f=-1;d3.selectAll("table.main-table tr").each(function(l,p){if(0<p){var a=Number(d3.select(this).select("td").text());a>f&&(f=a)}});return f}
function summaryUpdateRequired(f){$.ajax({url:"/summary/_/get_last_update_time/",dataType:"json",async:!1}).done(function(f){latest_summdb_update=new Date(f.last_update)});return latest_summdb_update>f}
function updateSummaryDB(){var f=getLastShotInDisplayedPage(),l=-1;$.ajax({url:"/summary/_/get_latest_summarydb_shot/",dataType:"json",async:!1}).done(function(f){l=Number(f.latest_shot)});l>f&&$.ajax({url:window.location.toString()+(window.location.search+(window.location.search.length?"&":"?")+"format=json"),dataType:"json",async:!1}).done(function(f){})}
function cross(f){var l=[],p,a;for(p=0;p<f.data.length;p++){l[p]=[];l[p].shot;for(a=0;a<f.attributes.length;a++)l[p][a]={shot:f.data[p].shot,attr:f.attributes[a],value:f.data[p].d[a]}}return l}$("span.toggleVertical").each(function(){"true"===$.cookie("vertical-"+$(this).text())&&($(this).toggleClass("verticalText"),$(this).html($(this).text().replace(/(.)/g,"$1<br />")))});
$("span.toggleVertical").click(function(){$(this).toggleClass("verticalText");$(this).hasClass("verticalText")?($(this).html($(this).text().replace(/(.)/g,"$1<br />")),$.cookie("vertical-"+$(this).text(),!0)):($(this).html($(this).text().replace("$1<br />","")),$.cookie("vertical-"+$(this).text(),!1))});
function autoPollSummaryDB(){var f=d3.select("#poll-summarydb-server");if(null!==f[0][0]&&"True"===f.text()){var l=null,p=window.location.toString()+(window.location.search+(window.location.search.length?"&":"?")+"format=json"),a=d3.select("table.main-table tbody"),c=function(c){$.ajax({url:p,dataType:"json",async:!1}).done(function(g){l=new Date(g.timestamp);g=a.selectAll("tr").data(cross(g),function(a){return a[0].shot});g.enter().insert("tr","tr").style("background-color","yellow");var r=g.selectAll("td").data(function(a){return a});
r.enter().append("td").html(function(a,c){return'<a href="/summary/_/go_to_source/'+a.attr+"/"+a.shot+'/" >'+a.value+"</a>"});r.transition().duration(500).each(function(a){d3.select(this).html(function(a,c){return'<a href="/summary/_/go_to_source/'+a.attr+"/"+a.shot+'/" >'+a.value+"</a>"})});g.transition().duration(c).style("background-color","white");g.exit().remove()})};c(1E3);setInterval(function(){summaryUpdateRequired(l)&&c(3E5)},2E3)}}var shot_stream_client=new XMLHttpRequest;
function turnOffShotTracker(){$("#h1ds-track-latest-shot").hide();$("#h1ds-shot-controller").show();$("#h1ds-toggle-track-latest-shot").html('<FORM class="inline-form right" action="javascript:toggleTrackLatestShot()" method="post"><INPUT type="submit" id="h1ds-toggletrack-shot" name="h1ds-toggletrack-shot" value="track latest shot"></FORM>');$.cookie("shotTracking","false",{path:"/"});shot_stream_client.abort()}
function turnOnShotTracker(){$("#h1ds-shot-controller").hide();$("#h1ds-track-latest-shot").show();$("#h1ds-toggletrack-latest-shot").html('<FORM class="inline-form right" action="javascript:toggleTrackLatestShot()" method="post"><INPUT type="submit" id="h1ds-toggletrack-shot" name="h1ds-toggletrack-shot" value="stop tracking latest shot"></FORM>');$.cookie("shotTracking","true",{path:"/"});shot_stream_client.open("get","/_/shot_stream/");shot_stream_client.send();shot_stream_client.onprogress=function(){var f=
this.responseText.split("\n");$.getJSON("/_/url_for_shot",{input_path:window.location.toString(),shot:f[f.length-2]},function(f){window.location=f.new_url})}}function toggleTrackLatestShot(){"true"===$.cookie("shotTracking")?turnOffShotTracker():turnOnShotTracker();return!1}function plotScalar(f,l){return 0}
function plot1DimArray(f,l){var p=new NewPlotContainer("#"+f,[300,250],[0.75,0.25]);p.addData("default",l);p.setPlot(2,{plotType:"spectrogram"});p.addDataToPlot("default",2,!1);p.setPlot(0,{plotType:"raw",bindAxis:[2,-1]});p.addDataToPlot("default",0,!1);p.setPlot(3,{plotType:"powerspectrum",flip:!0,bindAxis:[-1,2]});p.addDataToPlot("default",3,!0)}
function plot2DimArray(f,l){var p=new NewPlotContainer("#"+f,[500],[1]);p.addData("default",l);p.setPlot(0,{plotType:"raw2d"});p.addDataToPlot("default",0,!0)}function getPlotFunction(f,l){switch(l){case "0":return plotScalar;case "1":return plot1DimArray;case "2":return plot2DimArray}}
function populatePagelet(f){var l=f.attr("data-pagelet-url");"undefined"===typeof l&&(l=window.location.toString());l=new H1DSUri(l);l.non_h1ds_query.format="json";var l=l.renderUri(),p=f.attr("data-dtype"),a=f.attr("data-ndim");getPlotFunction(p,a)(f.attr("id"),l)}$.fn.scrollView=function(){return this.each(function(){$("html, body").animate({scrollTop:$(this).offset().top},0)})};$(document).ready(function(){$("#main").scrollView();autoPollSummaryDB();loadCookie();$(".h1ds-pagelet").each(function(){populatePagelet($(this))})});window.log=function(){log.history=log.history||[];log.history.push(arguments);if(this.console){arguments.callee=arguments.callee.caller;var f=[].slice.call(arguments);"object"===typeof console.log?log.apply.call(console.log,console,f):console.log.apply(console,f)}};
(function(f){function l(){}for(var p="assert count debug dir dirxml error exception group groupCollapsed groupEnd info log timeStamp profile profileEnd time timeEnd trace warn".split(" "),a;a=p.pop();)f[a]=f[a]||l})(function(){try{return console.log(),window.console}catch(f){return window.console={}}}());
function parseUri(f){var l=parseUri.options;f=l.parser[l.strictMode?"strict":"loose"].exec(f);for(var p={},a=14;a--;)p[l.key[a]]=f[a]||"";p[l.q.name]={};p[l.key[12]].replace(l.q.parser,function(a,d,g){d&&(p[l.q.name][d]=g)});return p}
parseUri.options={strictMode:!1,key:"source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};
function makeUri(f){var l="";f.protocol&&(l+=f.protocol+"://");f.user&&(l+=f.user);f.password&&(l+=":"+f.password);if(f.user||f.password)l+="@";f.host&&(l+=f.host);f.port&&(l+=":"+f.port);f.path&&(l+=f.path);var p=f.queryKey,a=[];for(k in p)if(p.hasOwnProperty(k)){var c=encodeURIComponent(p[k]);k=encodeURIComponent(k);c?a.push(k+"="+c):a.push(k)}0<a.length&&(l+="?"+a.join("&"));f.anchor&&(l+="#"+f.anchor);return l}
(function(f){function l(l){if("string"===typeof l.data){var a=l.handler,c=l.data.toLowerCase().split(" ");l.handler=function(d){if(!(this!==d.target&&(/textarea|select/i.test(d.target.nodeName)||"text"===d.target.type))){var g="keypress"!==d.type&&f.hotkeys.specialKeys[d.which],r=String.fromCharCode(d.which).toLowerCase(),y="",T={};d.altKey&&"alt"!==g&&(y+="alt+");d.ctrlKey&&"ctrl"!==g&&(y+="ctrl+");d.metaKey&&(!d.ctrlKey&&"meta"!==g)&&(y+="meta+");d.shiftKey&&"shift"!==g&&(y+="shift+");g?T[y+g]=
!0:(T[y+r]=!0,T[y+f.hotkeys.shiftNums[r]]=!0,"shift+"===y&&(T[f.hotkeys.shiftNums[r]]=!0));g=0;for(r=c.length;g<r;g++)if(T[c[g]])return a.apply(this,arguments)}}}}f.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",
109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(","0":")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};f.each(["keydown","keyup","keypress"],function(){f.event.special[this]={add:l}})})(jQuery);"use strict";
(function(){if(!jQuery||!jQuery.jstree){var f=!1,l=!1,p=!1;(function(a){a.vakata={};a.vakata.css={get_css:function(a,c,d){a=a.toLowerCase();var r=d.cssRules||d.rules,g=0;do{if(r.length&&g>r.length+5)break;if(r[g].selectorText&&r[g].selectorText.toLowerCase()==a)return!0===c?(d.removeRule&&d.removeRule(g),d.deleteRule&&d.deleteRule(g),!0):r[g]}while(r[++g]);return!1},add_css:function(c,d){if(a.jstree.css.get_css(c,!1,d))return!1;d.insertRule?d.insertRule(c+" { }",0):d.addRule(c,null,0);return a.vakata.css.get_css(c)},
remove_css:function(c,d){return a.vakata.css.get_css(c,!0,d)},add_sheet:function(c){var d=!1,r=!0;if(c.str)return c.title&&(d=a("style[id='"+c.title+"-stylesheet']")[0]),d?r=!1:(d=document.createElement("style"),d.setAttribute("type","text/css"),c.title&&d.setAttribute("id",c.title+"-stylesheet")),d.styleSheet?r?(document.getElementsByTagName("head")[0].appendChild(d),d.styleSheet.cssText=c.str):d.styleSheet.cssText=d.styleSheet.cssText+" "+c.str:(d.appendChild(document.createTextNode(c.str)),document.getElementsByTagName("head")[0].appendChild(d)),
d.sheet||d.styleSheet;if(c.url)if(document.createStyleSheet)try{document.createStyleSheet(c.url)}catch(g){}else return d=document.createElement("link"),d.rel="stylesheet",d.type="text/css",d.media="all",d.href=c.url,document.getElementsByTagName("head")[0].appendChild(d),d.styleSheet}};var c=[],d=-1,g={},r={};a.fn.jstree=function(y){var d="string"==typeof y,r=Array.prototype.slice.call(arguments,1),f=this;if(d){if("_"==y.substring(0,1))return f;this.each(function(){var d=c[a.data(this,"jstree_instance_id")],
d=d&&a.isFunction(d[y])?d[y].apply(d,r):d;if("undefined"!==typeof d&&(0===y.indexOf("is_")||!0!==d&&!1!==d))return f=d,!1})}else this.each(function(){var d=a.data(this,"jstree_instance_id"),T=[],f=y?a.extend({},!0,y):{},x=a(this),l=!1,p=[],T=T.concat(r);x.data("jstree")&&T.push(x.data("jstree"));f=T.length?a.extend.apply(null,[!0,f].concat(T)):f;"undefined"!==typeof d&&c[d]&&c[d].destroy();d=parseInt(c.push({}),10)-1;a.data(this,"jstree_instance_id",d);f.plugins=a.isArray(f.plugins)?f.plugins:a.jstree.defaults.plugins.slice();
f.plugins.unshift("core");f.plugins=f.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");l=a.extend(!0,{},a.jstree.defaults,f);l.plugins=f.plugins;a.each(g,function(c,y){-1===a.inArray(c,l.plugins)?(l[c]=null,delete l[c]):p.push(c)});l.plugins=p;c[d]=new a.jstree._instance(d,a(this).addClass("jstree jstree-"+d),l);a.each(c[d]._get_settings().plugins,function(a,y){c[d].data[y]={}});a.each(c[d]._get_settings().plugins,function(a,y){g[y]&&
g[y].__init.apply(c[d])});setTimeout(function(){c[d]&&c[d].init()},0)});return f};a.jstree={defaults:{plugins:[]},_focused:function(){return c[d]||null},_reference:function(y){if(c[y])return c[y];var d=a(y);!d.length&&"string"===typeof y&&(d=a("#"+y));return!d.length?null:c[d.closest(".jstree").data("jstree_instance_id")]||null},_instance:function(c,d,r){this.data={core:{}};this.get_settings=function(){return a.extend(!0,{},r)};this._get_settings=function(){return r};this.get_index=function(){return c};
this.get_container=function(){return d};this.get_container_ul=function(){return d.children("ul:eq(0)")};this._set_settings=function(c){r=a.extend(!0,{},r,c)}},_fn:{},plugin:function(c,d){d=a.extend({},{__init:a.noop,__destroy:a.noop,_fn:{},defaults:!1},d);g[c]=d;a.jstree.defaults[c]=d.defaults;a.each(d._fn,function(d,r){r.plugin=c;r.old=a.jstree._fn[d];a.jstree._fn[d]=function(){var c,y=r,g=Array.prototype.slice.call(arguments);c=new a.Event("before.jstree");var T=!1;if(!(!0===this.data.core.locked&&
"unlock"!==d&&"is_locked"!==d)){do{if(y&&y.plugin&&-1!==a.inArray(y.plugin,this._get_settings().plugins))break;y=y.old}while(y);if(y){if(0===d.indexOf("_"))c=y.apply(this,g);else{c=this.get_container().triggerHandler(c,{func:d,inst:this,args:g,plugin:y.plugin});if(!1===c)return;"undefined"!==typeof c&&(g=c);c=y.apply(a.extend({},this,{__callback:function(a){this.get_container().triggerHandler(d+".jstree",{inst:this,args:g,rslt:a,rlbk:T})},__rollback:function(){return T=this.get_rollback()},__call_old:function(a){return y.old.apply(this,
a?Array.prototype.slice.call(arguments,1):g)}}),g)}return c}}};a.jstree._fn[d].old=r.old;a.jstree._fn[d].plugin=c})},rollback:function(y){y&&(a.isArray(y)||(y=[y]),a.each(y,function(a,y){c[y.i].set_rollback(y.h,y.d)}))}};a.jstree._fn=a.jstree._instance.prototype={};a(function(){var c=navigator.userAgent.toLowerCase(),d=(c.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],r=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a > ins { height:16px; width:16px; } .jstree a > .jstree-icon { margin-right:3px; } .jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } ";
if(/msie/.test(c)&&6==parseInt(d,10)){f=!0;try{document.execCommand("BackgroundImageCache",!1,!0)}catch(g){}r+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}/msie/.test(c)&&
7==parseInt(d,10)&&(l=!0,r+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } ");!/compatible/.test(c)&&(/mozilla/.test(c)&&1.9>parseFloat(d,10))&&(p=!0,r+=".jstree ins { display:-moz-inline-box; } .jstree li { line-height:12px; } .jstree a { display:-moz-inline-box; } .jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } ");a.vakata.css.add_sheet({str:r,title:"jstree"})});a.jstree.plugin("core",{__init:function(){this.data.core.locked=!1;this.data.core.to_open=
this.get_settings().core.initially_open;this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:!1,animation:500,initially_open:[],initially_load:[],open_parents:!0,notify_plugins:!0,rtl:!1,load_open:!1,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus();this._get_settings().core.rtl&&this.get_container().addClass("jstree-rtl").css("direction","rtl");this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+
this._get_string("loading")+"</a></li></ul>");this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18;this.get_container().delegate("li > ins","click.jstree",a.proxy(function(c){c=a(c.target);this.toggle_node(c)},this)).bind("mousedown.jstree",a.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(a){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){a=window.getSelection();
try{a.removeAllRanges(),a.collapse()}catch(c){}}});this._get_settings().core.notify_plugins&&this.get_container().bind("load_node.jstree",a.proxy(function(c,d){var r=this._get_node(d.rslt.obj),g=this;-1===r&&(r=this.get_container_ul());r.length&&r.find("li").each(function(){var c=a(this);c.data("jstree")&&a.each(c.data("jstree"),function(y,d){g.data[y]&&a.isFunction(g["_"+y+"_notify"])&&g["_"+y+"_notify"].call(g,c,d)})})},this));this._get_settings().core.load_open&&this.get_container().bind("load_node.jstree",
a.proxy(function(c,d){var r=this._get_node(d.rslt.obj),g=this;-1===r&&(r=this.get_container_ul());r.length&&r.find("li.jstree-open:not(:has(ul))").each(function(){g.load_node(this,a.noop,a.noop)})},this));this.__callback();this.load_node(-1,function(){this.loaded();this.reload_nodes()})},destroy:function(){var y,r=this.get_index(),f=this._get_settings(),l=this;a.each(f.plugins,function(a,c){try{g[c].__destroy.apply(l)}catch(y){}});this.__callback();if(this.is_focused())for(y in c)if(c.hasOwnProperty(y)&&
y!=r){c[y].set_focus();break}r===d&&(d=-1);this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")});a(document).unbind(".jstree-"+r).undelegate(".jstree-"+r);c[r]=null;delete c[r]},_core_notify:function(a,c){c.opened&&this.open_node(a,!1,!0)},lock:function(){this.data.core.locked=!0;this.get_container().children("ul").addClass("jstree-locked").css("opacity",
"0.7");this.__callback({})},unlock:function(){this.data.core.locked=!1;this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1");this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var a=this;this.data.core.to_open=[];this.get_container_ul().find("li.jstree-open").each(function(){this.id&&a.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,
"\\.").replace(/\:/g,"\\:"))});this.__callback(a.data.core.to_open)},save_loaded:function(){},reload_nodes:function(c){var d=this,r=!0,g=[],f=[];c||(this.data.core.reopen=!1,this.data.core.refreshing=!0,this.data.core.to_open=a.map(a.makeArray(this.data.core.to_open),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_load=a.map(a.makeArray(this.data.core.to_load),function(a){return"#"+
a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_open.length&&(this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open)));this.data.core.to_load.length&&(a.each(this.data.core.to_load,function(c,d){if("#"==d)return!0;a(d).length?g.push(d):f.push(d)}),g.length&&(this.data.core.to_load=f,a.each(g,function(a,c){d._is_loaded(c)||(d.load_node(c,function(){d.reload_nodes(!0)},function(){d.reload_nodes(!0)}),
r=!1)})));this.data.core.to_open.length&&a.each(this.data.core.to_open,function(a,c){d.open_node(c,!1,!0)});r&&(this.data.core.reopen&&clearTimeout(this.data.core.reopen),this.data.core.reopen=setTimeout(function(){d.__callback({},d)},50),this.data.core.refreshing=!1,this.reopen())},reopen:function(){var c=this;this.data.core.to_open.length&&a.each(this.data.core.to_open,function(a,d){c.open_node(d,!1,!0)});this.__callback({})},refresh:function(a){var c=this;this.save_opened();a||(a=-1);(a=this._get_node(a))||
(a=-1);-1!==a?a.children("UL").remove():this.get_container_ul().empty();this.load_node(a,function(){c.__callback({obj:a});c.reload_nodes()})},loaded:function(){this.__callback()},set_focus:function(){if(!this.is_focused()){var c=a.jstree._focused();c&&c.unset_focus();this.get_container().addClass("jstree-focused");d=this.get_index();this.__callback()}},is_focused:function(){return d==this.get_index()},unset_focus:function(){this.is_focused()&&(this.get_container().removeClass("jstree-focused"),d=
-1);this.__callback()},_get_node:function(c){var d=a(c,this.get_container());if(d.is(".jstree")||-1==c)return-1;d=d.closest("li",this.get_container());return d.length?d:!1},_get_next:function(a,c){a=this._get_node(a);return-1===a?this.get_container().find("> ul > li:first-child"):!a.length?!1:c?0<a.nextAll("li").size()?a.nextAll("li:eq(0)"):!1:a.hasClass("jstree-open")?a.find("li:eq(0)"):0<a.nextAll("li").size()?a.nextAll("li:eq(0)"):a.parentsUntil(".jstree","li").next("li").eq(0)},_get_prev:function(a,
c){a=this._get_node(a);if(-1===a)return this.get_container().find("> ul > li:last-child");if(!a.length)return!1;if(c)return 0<a.prevAll("li").length?a.prevAll("li:eq(0)"):!1;if(a.prev("li").length){for(a=a.prev("li").eq(0);a.hasClass("jstree-open");)a=a.children("ul:eq(0)").children("li:last");return a}var d=a.parentsUntil(".jstree","li:eq(0)");return d.length?d:!1},_get_parent:function(a){a=this._get_node(a);if(-1==a||!a.length)return!1;a=a.parentsUntil(".jstree","li:eq(0)");return a.length?a:-1},
_get_children:function(a){a=this._get_node(a);return-1===a?this.get_container().children("ul:eq(0)").children("li"):!a.length?!1:a.children("ul:eq(0)").children("li")},get_path:function(a,c){var d=[],r=this;a=this._get_node(a);if(-1===a||!a||!a.length)return!1;a.parentsUntil(".jstree","li").each(function(){d.push(c?this.id:r.get_text(this))});d.reverse();d.push(c?a.attr("id"):this.get_text(a));return d},_get_string:function(a){return this._get_settings().core.strings[a]||a},is_open:function(a){return(a=
this._get_node(a))&&-1!==a&&a.hasClass("jstree-open")},is_closed:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-closed")},is_leaf:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-leaf")},correct_state:function(a){a=this._get_node(a);if(!a||-1===a)return!1;a.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:a})},open_node:function(a,c,d){a=this._get_node(a);if(!a.length)return!1;if(!a.hasClass("jstree-closed"))return c&&
c.call(),!1;var r=d||f?0:this._get_settings().core.animation,g=this;this._is_loaded(a)?(this._get_settings().core.open_parents&&a.parentsUntil(".jstree",".jstree-closed").each(function(){g.open_node(this,!1,!0)}),r&&a.children("ul").css("display","none"),a.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading"),r?a.children("ul").stop(!0,!0).slideDown(r,function(){this.style.display="";g.after_open(a)}):g.after_open(a),this.__callback({obj:a}),c&&c.call()):
(a.children("a").addClass("jstree-loading"),this.load_node(a,function(){g.open_node(a,c,d)},c))},after_open:function(a){this.__callback({obj:a})},close_node:function(a,c){a=this._get_node(a);var d=c||f?0:this._get_settings().core.animation,r=this;if(!a.length||!a.hasClass("jstree-open"))return!1;d&&a.children("ul").attr("style","display:block !important");a.removeClass("jstree-open").addClass("jstree-closed");d?a.children("ul").stop(!0,!0).slideUp(d,function(){this.style.display="";r.after_close(a)}):
r.after_close(a);this.__callback({obj:a})},after_close:function(a){this.__callback({obj:a})},toggle_node:function(a){a=this._get_node(a);if(a.hasClass("jstree-closed"))return this.open_node(a);if(a.hasClass("jstree-open"))return this.close_node(a)},open_all:function(a,c,d){a=a?this._get_node(a):-1;if(!a||-1===a)a=this.get_container_ul();d?a=a.find("li.jstree-closed"):(d=a,a=a.is(".jstree-closed")?a.find("li.jstree-closed").addBack():a.find("li.jstree-closed"));var r=this;a.each(function(){var a=this;
r._is_loaded(this)?r.open_node(this,!1,!c):r.open_node(this,function(){r.open_all(a,c,d)},!c)});0===d.find("li.jstree-closed").length&&this.__callback({obj:d})},close_all:function(a,c){var d=this;a=a?this._get_node(a):this.get_container();if(!a||-1===a)a=this.get_container_ul();a.find("li.jstree-open").addBack().each(function(){d.close_node(this,!c)});this.__callback({obj:a})},clean_node:function(c){c=c&&-1!=c?a(c):this.get_container_ul();c=c.is("li")?c.find("li").addBack():c.find("li");c.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed");
c.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:c})},get_rollback:function(){this.__callback();return{i:this.get_index(),h:this.get_container().children("ul").clone(!0),d:this.data}},set_rollback:function(a,c){this.get_container().empty().append(a);this.data=c;this.__callback()},load_node:function(a,c,d){this.__callback({obj:a})},_is_loaded:function(a){return!0},create_node:function(c,d,r,g,f){c=this._get_node(c);d="undefined"===typeof d?
"last":d;var t=a("<li />"),l=this._get_settings().core,p;if(-1!==c&&!c.length)return!1;if(!f&&!this._is_loaded(c))return this.load_node(c,function(){this.create_node(c,d,r,g,!0)}),!1;this.__rollback();"string"===typeof r&&(r={data:r});r||(r={});r.attr&&t.attr(r.attr);r.metadata&&t.data(r.metadata);r.state&&t.addClass("jstree-"+r.state);r.data||(r.data=this._get_string("new_node"));a.isArray(r.data)||(p=r.data,r.data=[],r.data.push(p));a.each(r.data,function(c,d){p=a("<a />");a.isFunction(d)&&(d=d.call(this,
r));if("string"==typeof d)p.attr("href","#")[l.html_titles?"html":"text"](d);else d.attr||(d.attr={}),d.attr.href||(d.attr.href="#"),p.attr(d.attr)[l.html_titles?"html":"text"](d.title),d.language&&p.addClass(d.language);p.prepend("<ins class='jstree-icon'>&#160;</ins>");!d.icon&&r.icon&&(d.icon=r.icon);d.icon&&(-1===d.icon.indexOf("/")?p.children("ins").addClass(d.icon):p.children("ins").css("background","url('"+d.icon+"') center center no-repeat"));t.append(p)});t.prepend("<ins class='jstree-icon'>&#160;</ins>");
-1===c&&(c=this.get_container(),"before"===d&&(d="first"),"after"===d&&(d="last"));switch(d){case "before":c.before(t);p=this._get_parent(c);break;case "after":c.after(t);p=this._get_parent(c);break;case "inside":case "first":c.children("ul").length||c.append("<ul />");c.children("ul").prepend(t);p=c;break;case "last":c.children("ul").length||c.append("<ul />");c.children("ul").append(t);p=c;break;default:c.children("ul").length||c.append("<ul />"),d||(d=0),p=c.children("ul").children("li").eq(d),
p.length?p.before(t):c.children("ul").append(t),p=c}if(-1===p||p.get(0)===this.get_container().get(0))p=-1;this.clean_node(p);this.__callback({obj:t,parent:p});g&&g.call(this,t);return t},get_text:function(a){a=this._get_node(a);if(!a.length)return!1;var c=this._get_settings().core.html_titles;a=a.children("a:eq(0)");if(c)return a=a.clone(),a.children("INS").remove(),a.html();a=a.contents().filter(function(){return 3==this.nodeType})[0];return a.nodeValue},set_text:function(a,c){a=this._get_node(a);
if(!a.length)return!1;a=a.children("a:eq(0)");if(this._get_settings().core.html_titles){var d=a.children("INS").clone();a.html(c).prepend(d);this.__callback({obj:a,name:c});return!0}a=a.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:a,name:c});return a.nodeValue=c},rename_node:function(a,c){a=this._get_node(a);this.__rollback();a&&(a.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments)))&&this.__callback({obj:a,name:c})},delete_node:function(c){c=
this._get_node(c);if(!c.length)return!1;this.__rollback();var d=this._get_parent(c),r=a([]),g=this;c.each(function(){r=r.add(g._get_prev(this))});c=c.detach();-1!==d&&0===d.find("> ul > li").length&&d.removeClass("jstree-open jstree-closed").addClass("jstree-leaf");this.clean_node(d);this.__callback({obj:c,prev:r,parent:d});return c},prepare_move:function(c,d,g,f,l){var t={};t.ot=a.jstree._reference(c)||this;t.o=t.ot._get_node(c);t.r=-1===d?-1:this._get_node(d);t.p="undefined"===typeof g||!1===g?
"last":g;if(l||!r.o||!(r.o[0]===t.o[0]&&r.r[0]===t.r[0]&&r.p===t.p)){t.ot=a.jstree._reference(t.o)||this;t.rt=a.jstree._reference(t.r)||this;if(-1===t.r||!t.r)switch(t.cr=-1,t.p){case "first":case "before":case "inside":t.cp=0;break;case "after":case "last":t.cp=t.rt.get_container().find(" > ul > li").length;break;default:t.cp=t.p}else{if(!/^(before|after)$/.test(t.p)&&!this._is_loaded(t.r))return this.load_node(t.r,function(){this.prepare_move(c,d,g,f,!0)});switch(t.p){case "before":t.cp=t.r.index();
t.cr=t.rt._get_parent(t.r);break;case "after":t.cp=t.r.index()+1;t.cr=t.rt._get_parent(t.r);break;case "inside":case "first":t.cp=0;t.cr=t.r;break;case "last":t.cp=t.r.find(" > ul > li").length;t.cr=t.r;break;default:t.cp=t.p,t.cr=t.r}}t.np=-1==t.cr?t.rt.get_container():t.cr;t.op=t.ot._get_parent(t.o);t.cop=t.o.index();-1===t.op&&(t.op=t.ot?t.ot.get_container():this.get_container());!/^(before|after)$/.test(t.p)&&(t.op&&t.np&&t.op[0]===t.np[0]&&t.o.index()<t.cp)&&t.cp++;t.or=t.np.find(" > ul > li:nth-child("+
(t.cp+1)+")");r=t}this.__callback(r);f&&f.call(this,r)},check_move:function(){var a=r,c=!0,d=-1===a.r?this.get_container():a.r;if(!a||!a.o||a.or[0]===a.o[0])return!1;if(!a.cy){if(a.op&&a.np&&a.op[0]===a.np[0]&&a.cp-1===a.o.index())return!1;a.o.each(function(){if(-1!==d.parentsUntil(".jstree","li").addBack().index(this))return c=!1})}return c},move_node:function(c,d,g,f,l,t){if(!l)return this.prepare_move(c,d,g,function(a){this.move_node(a,!1,!1,f,!0,t)});f&&(r.cy=!0);if(!t&&!this.check_move())return!1;
this.__rollback();d=!1;f?(d=c.o.clone(!0),d.find("*[id]").addBack().each(function(){this.id&&(this.id="copy_"+this.id)})):d=c.o;c.or.length?c.or.before(d):(c.np.children("ul").length||a("<ul />").appendTo(c.np),c.np.children("ul:eq(0)").append(d));try{c.ot.clean_node(c.op),c.rt.clean_node(c.np),c.op.find("> ul > li").length||c.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(p){}f&&(r.cy=!0,r.oc=d);this.__callback(r);return r},_get_move:function(){return r}}})})(jQuery);
(function(a){var c,d,g;a(function(){/msie/.test(navigator.userAgent.toLowerCase())?(d=a('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),g=a('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),c=d.width()-g.width(),d.add(g).remove()):(d=a("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1E3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",
height:200}),c=100-d.width(),d.parent().remove())});a.jstree.plugin("ui",{__init:function(){this.data.ui.selected=a();this.data.ui.last_selected=!1;this.data.ui.hovered=null;this.data.ui.to_select=this.get_settings().ui.initially_select;this.get_container().delegate("a","click.jstree",a.proxy(function(c){c.preventDefault();c.currentTarget.blur();a(c.currentTarget).hasClass("jstree-loading")||this.select_node(c.currentTarget,!0,c)},this)).delegate("a","mouseenter.jstree",a.proxy(function(c){a(c.currentTarget).hasClass("jstree-loading")||
this.hover_node(c.target)},this)).delegate("a","mouseleave.jstree",a.proxy(function(c){a(c.currentTarget).hasClass("jstree-loading")||this.dehover_node(c.target)},this)).bind("reopen.jstree",a.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",a.proxy(function(){this.dehover_node();this.save_selected()},this)).bind("set_rollback.jstree",a.proxy(function(){this.reselect()},this)).bind("close_node.jstree",a.proxy(function(c,d){var g=this._get_settings().ui,f=this._get_node(d.rslt.obj),
l=f&&f.length?f.children("ul").find("a.jstree-clicked"):a(),p=this;!1!==g.selected_parent_close&&l.length&&l.each(function(){p.deselect_node(this);"select_parent"===g.selected_parent_close&&p.select_node(f)})},this)).bind("delete_node.jstree",a.proxy(function(a,c){var d=this._get_settings().ui.select_prev_on_delete,g=this._get_node(c.rslt.obj),g=g&&g.length?g.find("a.jstree-clicked"):[],f=this;g.each(function(){f.deselect_node(this)});d&&g.length&&c.rslt.prev.each(function(){if(this.parentNode)return f.select_node(this),
!1})},this)).bind("move_node.jstree",a.proxy(function(a,c){c.rslt.cy&&c.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:!0,select_prev_on_delete:!0,disable_selecting_children:!1,initially_select:[]},_fn:{_get_node:function(c,d){if("undefined"===typeof c||null===c)return d?this.data.ui.selected:this.data.ui.last_selected;var g=a(c,
this.get_container());if(g.is(".jstree")||-1==c)return-1;g=g.closest("li",this.get_container());return g.length?g:!1},_ui_notify:function(a,c){c.selected&&this.select_node(a,!1)},save_selected:function(){var a=this;this.data.ui.to_select=[];this.data.ui.selected.each(function(){this.id&&a.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))});this.__callback(this.data.ui.to_select)},
reselect:function(){var c=this,d=this.data.ui.to_select,d=a.map(a.makeArray(d),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});a.each(d,function(a,d){d&&"#"!==d&&c.select_node(d)});this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode});this.__callback()},refresh:function(a){this.save_selected();return this.__call_old()},hover_node:function(a){a=this._get_node(a);
if(!a.length)return!1;a.hasClass("jstree-hovered")||this.dehover_node();this.data.ui.hovered=a.children("a").addClass("jstree-hovered").parent();this._fix_scroll(a);this.__callback({obj:a})},dehover_node:function(){var a=this.data.ui.hovered,c;if(!a||!a.length)return!1;c=a.children("a").removeClass("jstree-hovered").parent();this.data.ui.hovered[0]===c[0]&&(this.data.ui.hovered=null);this.__callback({obj:a})},select_node:function(a,c,d){a=this._get_node(a);if(-1==a||!a||!a.length)return!1;var g=this._get_settings().ui,
f="on"==g.select_multiple_modifier||!1!==g.select_multiple_modifier&&d&&d[g.select_multiple_modifier+"Key"],l=!1!==g.select_range_modifier&&d&&d[g.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==a[0]&&this.data.ui.last_selected.parent()[0]===a.parent()[0],t=this.is_selected(a),p=!0,Q=this;if(c){if(g.disable_selecting_children&&f&&(a.parentsUntil(".jstree","li").children("a.jstree-clicked").length||a.children("ul").find("a.jstree-clicked:eq(0)").length))return!1;
p=!1;switch(!0){case l:this.data.ui.last_selected.addClass("jstree-last-selected");a=a[a.index()<this.data.ui.last_selected.index()?"nextUntil":"prevUntil"](".jstree-last-selected").addBack();-1==g.select_limit||a.length<g.select_limit?(this.data.ui.last_selected.removeClass("jstree-last-selected"),this.data.ui.selected.each(function(){this!==Q.data.ui.last_selected[0]&&Q.deselect_node(this)}),t=!1,p=!0):p=!1;break;case t&&!f:this.deselect_all();t=!1;p=!0;break;case !t&&!f:if(-1==g.select_limit||
0<g.select_limit)this.deselect_all(),p=!0;break;case t&&f:this.deselect_node(a);break;case !t&&f:if(-1==g.select_limit||this.data.ui.selected.length+1<=g.select_limit)p=!0}}p&&!t&&(l||(this.data.ui.last_selected=a),a.children("a").addClass("jstree-clicked"),g.selected_parent_open&&a.parents(".jstree-closed").each(function(){Q.open_node(this,!1,!0)}),this.data.ui.selected=this.data.ui.selected.add(a),this._fix_scroll(a.eq(0)),this.__callback({obj:a,e:d}))},_fix_scroll:function(a){var d=this.get_container()[0];
if(d.scrollHeight>d.offsetHeight&&(a=this._get_node(a))&&!(-1===a||!a.length||!a.is(":visible")))if(a=a.offset().top-this.get_container().offset().top,0>a&&(d.scrollTop=d.scrollTop+a-1),a+this.data.core.li_height+(d.scrollWidth>d.offsetWidth?c:0)>d.offsetHeight)d.scrollTop+=a-d.offsetHeight+this.data.core.li_height+1+(d.scrollWidth>d.offsetWidth?c:0)},deselect_node:function(a){a=this._get_node(a);if(!a.length)return!1;this.is_selected(a)&&(a.children("a").removeClass("jstree-clicked"),this.data.ui.selected=
this.data.ui.selected.not(a),this.data.ui.last_selected.get(0)===a.get(0)&&(this.data.ui.last_selected=this.data.ui.selected.eq(0)),this.__callback({obj:a}))},toggle_select:function(a){a=this._get_node(a);if(!a.length)return!1;this.is_selected(a)?this.deselect_node(a):this.select_node(a)},is_selected:function(a){return 0<=this.data.ui.selected.index(this._get_node(a))},get_selected:function(c){return c?a(c).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(c){c=c?a(c).find("a.jstree-clicked").parent():
this.get_container().find("a.jstree-clicked").parent();c.children("a.jstree-clicked").removeClass("jstree-clicked");this.data.ui.selected=a([]);this.data.ui.last_selected=!1;this.__callback({obj:c})}}});a.jstree.defaults.plugins.push("ui")})(jQuery);(function(a){a.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",a.proxy(function(a,d){if(this._get_settings().crrm.move.open_onmove){var g=this;d.rslt.np.parentsUntil(".jstree").addBack().filter(".jstree-closed").each(function(){g.open_node(this,
!1,!0)})}},this))},defaults:{input_width_limit:200,move:{always_copy:!1,open_onmove:!0,default_position:"last",check_move:function(a){return!0}}},_fn:{_show_input:function(c,d){c=this._get_node(c);var g=this._get_settings().core.rtl,r=this._get_settings().crrm.input_width_limit,y=c.children("ins").width(),f=c.find("> a:visible > ins").width()*c.find("> a:visible > ins").length,l=this.get_text(c),p=a("<div />",{css:{position:"absolute",top:"-200px",left:g?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),
I=c.css("position","relative").append(a("<input />",{value:l,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:g?"auto":y+f+4+"px",right:g?y+f+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:a.proxy(function(){var a=c.children(".jstree-rename-input"),g=a.val();""===g&&(g=l);p.remove();a.remove();this.set_text(c,l);this.rename_node(c,g);d.call(this,c,g,l);c.css("position","")},
this),keyup:function(a){a=a.keyCode||a.which;27==a?(this.value=l,this.blur()):13==a?this.blur():I.width(Math.min(p.text("pW"+this.value).width(),r))},keypress:function(a){if(13==(a.keyCode||a.which))return!1}})).children(".jstree-rename-input");this.set_text(c,"");p.css({fontFamily:I.css("fontFamily")||"",fontSize:I.css("fontSize")||"",fontWeight:I.css("fontWeight")||"",fontStyle:I.css("fontStyle")||"",fontStretch:I.css("fontStretch")||"",fontVariant:I.css("fontVariant")||"",letterSpacing:I.css("letterSpacing")||
"",wordSpacing:I.css("wordSpacing")||""});I.width(Math.min(p.text("pW"+I[0].value).width(),r))[0].select()},rename:function(a){a=this._get_node(a);this.__rollback();var d=this.__callback;this._show_input(a,function(a,c,f){d.call(this,{obj:a,new_name:c,old_name:f})})},create:function(c,d,g,r,f){var l=this;(c=this._get_node(c))||(c=-1);this.__rollback();return this.create_node(c,d,g,function(c){var d=this._get_parent(c),g=a(c).index();r&&r.call(this,c);d.length&&d.hasClass("jstree-closed")&&this.open_node(d,
!1,!0);f?l.__callback({obj:c,name:this.get_text(c),parent:d,position:g}):this._show_input(c,function(a,c,r){l.__callback({obj:a,name:c,parent:d,position:g})})})},remove:function(a){a=this._get_node(a,!0);var d=this._get_parent(a),g=this._get_prev(a);this.__rollback();a=this.delete_node(a);!1!==a&&this.__callback({obj:a,prev:g,parent:d})},check_move:function(){return!this.__call_old()||!this._get_settings().crrm.move.check_move.call(this,this._get_move())?!1:!0},move_node:function(a,d,g,r,f,l){var p=
this._get_settings().crrm.move;if(!f)return"undefined"===typeof g&&(g=p.default_position),"inside"===g&&!p.default_position.match(/^(before|after)$/)&&(g=p.default_position),this.__call_old(!0,a,d,g,r,!1,l);if(!0===p.always_copy||"multitree"===p.always_copy&&a.rt.get_index()!==a.ot.get_index())r=!0;this.__call_old(!0,a,d,g,r,!0,l)},cut:function(a){a=this._get_node(a,!0);if(!a||!a.length)return!1;this.data.crrm.cp_nodes=!1;this.data.crrm.ct_nodes=a;this.__callback({obj:a})},copy:function(a){a=this._get_node(a,
!0);if(!a||!a.length)return!1;this.data.crrm.ct_nodes=!1;this.data.crrm.cp_nodes=a;this.__callback({obj:a})},paste:function(a){a=this._get_node(a);if(!a||!a.length)return!1;var d=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:this.data.crrm.cp_nodes;if(!this.data.crrm.ct_nodes&&!this.data.crrm.cp_nodes)return!1;this.data.crrm.ct_nodes&&(this.move_node(this.data.crrm.ct_nodes,a),this.data.crrm.ct_nodes=!1);this.data.crrm.cp_nodes&&this.move_node(this.data.crrm.cp_nodes,a,!1,!0);this.__callback({obj:a,
nodes:d})}}})})(jQuery);(function(a){var c=[];a.jstree._themes=!1;a.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",a.proxy(function(){var a=this._get_settings().themes;this.data.themes.dots=a.dots;this.data.themes.icons=a.icons;this.set_theme(a.theme,a.url)},this)).bind("loaded.jstree",a.proxy(function(){this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons()},this))},defaults:{theme:"default",url:!1,dots:!0,
icons:!0},_fn:{set_theme:function(d,g){if(!d)return!1;g||(g=a.jstree._themes+d+"/style.css");-1==a.inArray(g,c)&&(a.vakata.css.add_sheet({url:g}),c.push(g));this.data.themes.theme!=d&&(this.get_container().removeClass("jstree-"+this.data.themes.theme),this.data.themes.theme=d);this.get_container().addClass("jstree-"+d);this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons();this.__callback()},get_theme:function(){return this.data.themes.theme},
show_dots:function(){this.data.themes.dots=!0;this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=!1;this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons=!0;this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=!1;this.get_container().children("ul").addClass("jstree-no-icons")},
toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()}}});a(function(){!1===a.jstree._themes&&a("script").each(function(){if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/))return a.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/",!1});!1===a.jstree._themes&&(a.jstree._themes="themes/")});a.jstree.defaults.plugins.push("themes")})(jQuery);(function(a){var c=[];a.jstree.plugin("hotkeys",{__init:function(){if("undefined"===
typeof a.hotkeys)throw"jsTree hotkeys: jQuery hotkeys plugin not included.";if(!this.data.ui)throw"jsTree hotkeys: jsTree UI plugin not included.";a.each(this._get_settings().hotkeys,function(d,g){!1!==g&&-1==a.inArray(d,c)&&(a(document).bind("keydown",d,function(c){a:{var g=a.jstree._focused(),f;if(g&&(g.data&&g.data.hotkeys&&g.data.hotkeys.enabled)&&(f=g._get_settings().hotkeys[d])){c=f.call(g,c);break a}c=void 0}return c}),c.push(d))});this.get_container().bind("lock.jstree",a.proxy(function(){this.data.hotkeys.enabled&&
(this.data.hotkeys.enabled=!1,this.data.hotkeys.revert=!0)},this)).bind("unlock.jstree",a.proxy(function(){this.data.hotkeys.revert&&(this.data.hotkeys.enabled=!0)},this));this.enable_hotkeys()},defaults:{up:function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"ctrl+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||
this.data.ui.last_selected||-1));return!1},down:function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"ctrl+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},left:function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):
this.hover_node(this._get_prev(a)));return!1},"ctrl+left":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},"shift+left":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},right:function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?
this.open_node(a):this.hover_node(this._get_next(a)));return!1},"ctrl+right":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},"shift+right":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},space:function(){this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").click();
return!1},"ctrl+space":function(a){a.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(a);return!1},"shift+space":function(a){a.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(a);return!1},f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled=!0},disable_hotkeys:function(){this.data.hotkeys.enabled=
!1}}})})(jQuery);(function(a){a.jstree.plugin("json_data",{__init:function(){this._get_settings().json_data.progressive_unload&&this.get_container().bind("after_close.jstree",function(a,d){d.rslt.obj.children("ul").remove()})},defaults:{data:!1,ajax:!1,correct_state:!0,progressive_render:!1,progressive_unload:!1},_fn:{load_node:function(a,d,g){var r=this;this.load_node_json(a,function(){r.__callback({obj:r._get_node(a)});d.call(this)},g)},_is_loaded:function(c){var d=this._get_settings().json_data;
c=this._get_node(c);return-1==c||!c||!d.ajax&&!d.progressive_render&&!a.isFunction(d.data)||c.is(".jstree-open, .jstree-leaf")||0<c.children("ul").children("li").length},refresh:function(c){c=this._get_node(c);var d=this._get_settings().json_data;c&&(-1!==c&&d.progressive_unload&&(a.isFunction(d.data)||d.ajax))&&c.removeData("jstree_children");return this.__call_old()},load_node_json:function(c,d,g){var r=this.get_settings().json_data,f,l=function(){};f=function(){};if((c=this._get_node(c))&&-1!==
c&&(r.progressive_render||r.progressive_unload)&&!c.is(".jstree-open, .jstree-leaf")&&0===c.children("ul").children("li").length&&c.data("jstree_children")){if(f=this._parse_json(c.data("jstree_children"),c))c.append(f),r.progressive_unload||c.removeData("jstree_children");this.clean_node(c);d&&d.call(this)}else{if(c&&-1!==c){if(c.data("jstree_is_loading"))return;c.data("jstree_is_loading",!0)}switch(!0){case !r.data&&!r.ajax:throw"Neither data nor ajax settings supplied.";case a.isFunction(r.data):r.data.call(this,
c,a.proxy(function(a){(a=this._parse_json(a,c))?(-1===c||!c?this.get_container().children("ul").empty().append(a.children()):(c.append(a).children("a.jstree-loading").removeClass("jstree-loading"),c.removeData("jstree_is_loading")),this.clean_node(c),d&&d.call(this)):(-1===c||!c?r.correct_state&&this.get_container().children("ul").empty():(c.children("a.jstree-loading").removeClass("jstree-loading"),c.removeData("jstree_is_loading"),r.correct_state&&this.correct_state(c)),g&&g.call(this))},this));
break;case !!r.data&&!r.ajax||!!r.data&&!!r.ajax&&(!c||-1===c):if(!c||-1==c)(f=this._parse_json(r.data,c))?(this.get_container().children("ul").empty().append(f.children()),this.clean_node()):r.correct_state&&this.get_container().children("ul").empty();d&&d.call(this);break;case !r.data&&!!r.ajax||!!r.data&&!!r.ajax&&c&&-1!==c:l=function(a,d,f){var y=this.get_settings().json_data.ajax.error;y&&y.call(this,a,d,f);-1!=c&&c.length?(c.children("a.jstree-loading").removeClass("jstree-loading"),c.removeData("jstree_is_loading"),
"success"===d&&r.correct_state&&this.correct_state(c)):"success"===d&&r.correct_state&&this.get_container().children("ul").empty();g&&g.call(this)},f=function(g,f,y){var t=this.get_settings().json_data.ajax.success;t&&(g=t.call(this,g,f,y)||g);if(""===g||g&&g.toString&&""===g.toString().replace(/^[\s\n]+$/,"")||!a.isArray(g)&&!a.isPlainObject(g))return l.call(this,y,f,"");(g=this._parse_json(g,c))?(-1===c||!c?this.get_container().children("ul").empty().append(g.children()):(c.append(g).children("a.jstree-loading").removeClass("jstree-loading"),
c.removeData("jstree_is_loading")),this.clean_node(c),d&&d.call(this)):-1===c||!c?r.correct_state&&(this.get_container().children("ul").empty(),d&&d.call(this)):(c.children("a.jstree-loading").removeClass("jstree-loading"),c.removeData("jstree_is_loading"),r.correct_state&&(this.correct_state(c),d&&d.call(this)))},r.ajax.context=this,r.ajax.error=l,r.ajax.success=f,r.ajax.dataType||(r.ajax.dataType="json"),a.isFunction(r.ajax.url)&&(r.ajax.url=r.ajax.url.call(this,c)),a.isFunction(r.ajax.data)&&(r.ajax.data=
r.ajax.data.call(this,c)),a.ajax(r.ajax)}}},_parse_json:function(c,d,g){var r=!1,f=this._get_settings(),l=f.json_data,p=f.core.html_titles,x;if(!c)return r;l.progressive_unload&&(d&&-1!==d)&&d.data("jstree_children",r);if(a.isArray(c)){r=a("<ul>");if(!c.length)return!1;f=0;for(l=c.length;f<l;f++)x=this._parse_json(c[f],d,!0),x.length&&(r=r.append(x));r=r.children()}else{"string"==typeof c&&(c={data:c});if(!c.data&&""!==c.data)return r;r=a("<li />");c.attr&&r.attr(c.attr);c.metadata&&r.data(c.metadata);
c.state&&r.addClass("jstree-"+c.state);a.isArray(c.data)||(x=c.data,c.data=[],c.data.push(x));a.each(c.data,function(d,g){x=a("<a />");a.isFunction(g)&&(g=g.call(this,c));if("string"==typeof g)x.attr("href","#")[p?"html":"text"](g);else g.attr||(g.attr={}),g.attr.href||(g.attr.href="#"),x.attr(g.attr)[p?"html":"text"](g.title),g.language&&x.addClass(g.language);x.prepend("<ins class='jstree-icon'>&#160;</ins>");!g.icon&&c.icon&&(g.icon=c.icon);g.icon&&(-1===g.icon.indexOf("/")?x.children("ins").addClass(g.icon):
x.children("ins").css("background","url('"+g.icon+"') center center no-repeat"));r.append(x)});r.prepend("<ins class='jstree-icon'>&#160;</ins>");c.children&&(l.progressive_render&&"open"!==c.state?r.addClass("jstree-closed").data("jstree_children",c.children):(l.progressive_unload&&r.data("jstree_children",c.children),a.isArray(c.children)&&c.children.length&&(x=this._parse_json(c.children,d,!0),x.length&&(d=a("<ul />"),d.append(x),r.append(d)))))}g||(g=a("<ul />"),g.append(r),r=g);return r},get_json:function(c,
d,g,r){var f=[],l=this._get_settings(),p=this,x,I,t,P,Q,Y;c=this._get_node(c);if(!c||-1===c)c=this.get_container().find("> ul > li");d=a.isArray(d)?d:["id","class"];!r&&this.data.types&&d.push(l.types.type_attr);g=a.isArray(g)?g:[];c.each(function(){t=a(this);x={data:[]};d.length&&(x.attr={});a.each(d,function(a,c){(I=t.attr(c))&&(I.length&&I.replace(/jstree[^ ]*/ig,"").length)&&(x.attr[c]=(" "+I).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))});t.hasClass("jstree-open")&&
(x.state="open");t.hasClass("jstree-closed")&&(x.state="closed");t.data()&&(x.metadata=t.data());P=t.children("a");P.each(function(){Q=a(this);g.length||-1!==a.inArray("languages",l.plugins)||Q.children("ins").get(0).style.backgroundImage.length||Q.children("ins").get(0).className&&Q.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").length?(Y=!1,-1!==a.inArray("languages",l.plugins)&&(a.isArray(l.languages)&&l.languages.length)&&a.each(l.languages,function(a,c){if(Q.hasClass(c))return Y=
c,!1}),I={attr:{},title:p.get_text(Q,Y)},a.each(g,function(a,c){I.attr[c]=(" "+(Q.attr(c)||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")}),-1!==a.inArray("languages",l.plugins)&&(a.isArray(l.languages)&&l.languages.length)&&a.each(l.languages,function(a,c){if(Q.hasClass(c))return I.language=c,!0}),Q.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(I.icon=Q.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,
"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")),Q.children("ins").get(0).style.backgroundImage.length&&(I.icon=Q.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")",""))):I=p.get_text(Q);1<P.length?x.data.push(I):x.data=I});t=t.find("> ul > li");t.length&&(x.children=p.get_json(t,d,g,!0));f.push(x)});return f}}})})(jQuery);(function(a){var c=!1;a.jstree.plugin("languages",{__init:function(){this._load_css()},defaults:[],_fn:{set_lang:function(d){var g=this._get_settings().languages,
r=!1,f=".jstree-"+this.get_index()+" a";if(!a.isArray(g)||0===g.length)return!1;if(-1==a.inArray(d,g))if(g[d])d=g[d];else return!1;if(d==this.data.languages.current_language)return!0;r=a.vakata.css.get_css(f+"."+this.data.languages.current_language,!1,c);!1!==r&&(r.style.display="none");r=a.vakata.css.get_css(f+"."+d,!1,c);!1!==r&&(r.style.display="");this.data.languages.current_language=d;this.__callback(d);return!0},get_lang:function(){return this.data.languages.current_language},_get_string:function(c,
g){var r=this._get_settings().languages,f=this._get_settings().core.strings;a.isArray(r)&&r.length&&(g=g&&-1!=a.inArray(g,r)?g:this.data.languages.current_language);return f[g]&&f[g][c]?f[g][c]:f[c]?f[c]:c},get_text:function(c,g){c=this._get_node(c)||this.data.ui.last_selected;if(!c.size())return!1;var r=this._get_settings().languages,f=this._get_settings().core.html_titles;a.isArray(r)&&r.length?(g=g&&-1!=a.inArray(g,r)?g:this.data.languages.current_language,c=c.children("a."+g)):c=c.children("a:eq(0)");
if(f)return c=c.clone(),c.children("INS").remove(),c.html();c=c.contents().filter(function(){return 3==this.nodeType})[0];return c.nodeValue},set_text:function(c,g,r){c=this._get_node(c)||this.data.ui.last_selected;if(!c.size())return!1;var f=this._get_settings().languages,l=this._get_settings().core.html_titles;a.isArray(f)&&f.length?(r=r&&-1!=a.inArray(r,f)?r:this.data.languages.current_language,c=c.children("a."+r)):c=c.children("a:eq(0)");if(l)return f=c.children("INS").clone(),c.html(g).prepend(f),
this.__callback({obj:c,name:g,lang:r}),!0;c=c.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:c,name:g,lang:r});return c.nodeValue=g},_load_css:function(){var d=this._get_settings().languages,g="/* languages css */",r=".jstree-"+this.get_index()+" a",f;if(a.isArray(d)&&d.length){this.data.languages.current_language=d[0];for(f=0;f<d.length;f++)g+=r+"."+d[f]+" {",d[f]!=this.data.languages.current_language&&(g+=" display:none; "),g+=" } ";c=a.vakata.css.add_sheet({str:g,
title:"jstree-languages"})}},create_node:function(c,g,r,f){return this.__call_old(!0,c,g,r,function(c){var d=this._get_settings().languages,g=c.children("a"),r;if(a.isArray(d)&&d.length){for(r=0;r<d.length;r++)g.is("."+d[r])||c.append(g.eq(0).clone().removeClass(d.join(" ")).addClass(d[r]));g.not("."+d.join(", .")).remove()}f&&f.call(this,c)})}}})})(jQuery);(function(a){a.jstree.plugin("cookies",{__init:function(){if("undefined"===typeof a.cookie)throw"jsTree cookie: jQuery cookie plugin not included.";
var c=this._get_settings().cookies,d;if(c.save_loaded&&(d=a.cookie(c.save_loaded))&&d.length)this.data.core.to_load=d.split(",");if(c.save_opened&&(d=a.cookie(c.save_opened))&&d.length)this.data.core.to_open=d.split(",");if(c.save_selected&&(d=a.cookie(c.save_selected))&&d.length&&this.data.ui)this.data.ui.to_select=d.split(",");this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",a.proxy(function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",
a.proxy(function(a){this._get_settings().cookies.auto_save&&this.save_cookie((a.handleObj.namespace+a.handleObj.type).replace("jstree",""))},this))},this))},defaults:{save_loaded:"jstree_load",save_opened:"jstree_open",save_selected:"jstree_select",auto_save:!0,cookie_options:{}},_fn:{save_cookie:function(c){if(!this.data.core.refreshing){var d=this._get_settings().cookies;if(c)switch(c){case "open_node":case "close_node":d.save_opened&&(this.save_opened(),a.cookie(d.save_opened,this.data.core.to_open.join(","),
d.cookie_options));d.save_loaded&&(this.save_loaded(),a.cookie(d.save_loaded,this.data.core.to_load.join(","),d.cookie_options));break;case "select_node":case "deselect_node":d.save_selected&&this.data.ui&&(this.save_selected(),a.cookie(d.save_selected,this.data.ui.to_select.join(","),d.cookie_options))}else d.save_loaded&&(this.save_loaded(),a.cookie(d.save_loaded,this.data.core.to_load.join(","),d.cookie_options)),d.save_opened&&(this.save_opened(),a.cookie(d.save_opened,this.data.core.to_open.join(","),
d.cookie_options)),d.save_selected&&this.data.ui&&(this.save_selected(),a.cookie(d.save_selected,this.data.ui.to_select.join(","),d.cookie_options))}}}})})(jQuery);(function(a){a.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",a.proxy(function(a,d){var g=this._get_node(d.rslt.obj),g=-1===g?this.get_container().children("ul"):g.children("ul");this.sort(g)},this)).bind("rename_node.jstree create_node.jstree create.jstree",a.proxy(function(a,d){this.sort(d.rslt.obj.parent())},
this)).bind("move_node.jstree",a.proxy(function(a,d){var g=-1==d.rslt.np?this.get_container():d.rslt.np;this.sort(g.children("ul"))},this))},defaults:function(a,d){return this.get_text(a)>this.get_text(d)?1:-1},_fn:{sort:function(c){var d=this._get_settings().sort,g=this;c.append(a.makeArray(c.children("li")).sort(a.proxy(d,g)));c.find("> li > ul").each(function(){g.sort(a(this))});this.clean_node(c)}}})})(jQuery);(function(a){var c=!1,d=!1,g=!1,r=!1,f=!1,l=!1,p=!1,x=!1,I=!1;a.vakata.dnd={is_down:!1,
is_drag:!1,helper:!1,scroll_spd:10,init_x:0,init_y:0,threshold:5,helper_left:5,helper_top:10,user_data:{},drag_start:function(c,d,g){a.vakata.dnd.is_drag&&a.vakata.drag_stop({});try{c.currentTarget.unselectable="on",c.currentTarget.onselectstart=function(){return!1},c.currentTarget.style&&(c.currentTarget.style.MozUserSelect="none")}catch(r){}a.vakata.dnd.init_x=c.pageX;a.vakata.dnd.init_y=c.pageY;a.vakata.dnd.user_data=d;a.vakata.dnd.is_down=!0;a.vakata.dnd.helper=a("<div id='vakata-dragged' />").html(g);
a(document).bind("mousemove",a.vakata.dnd.drag);a(document).bind("mouseup",a.vakata.dnd.drag_stop);return!1},drag:function(c){if(a.vakata.dnd.is_down){if(!a.vakata.dnd.is_drag)if(5<Math.abs(c.pageX-a.vakata.dnd.init_x)||5<Math.abs(c.pageY-a.vakata.dnd.init_y))a.vakata.dnd.helper.appendTo("body"),a.vakata.dnd.is_drag=!0,a(document).triggerHandler("drag_start.vakata",{event:c,data:a.vakata.dnd.user_data});else return;if("mousemove"===c.type){var d=a(document),g=d.scrollTop(),d=d.scrollLeft();20>c.pageY-
g?(l&&"down"===p&&(clearInterval(l),l=!1),l||(p="up",l=setInterval(function(){a(document).scrollTop(a(document).scrollTop()-a.vakata.dnd.scroll_spd)},150))):l&&"up"===p&&(clearInterval(l),l=!1);20>a(window).height()-(c.pageY-g)?(l&&"up"===p&&(clearInterval(l),l=!1),l||(p="down",l=setInterval(function(){a(document).scrollTop(a(document).scrollTop()+a.vakata.dnd.scroll_spd)},150))):l&&"down"===p&&(clearInterval(l),l=!1);20>c.pageX-d?(f&&"right"===x&&(clearInterval(f),f=!1),f||(x="left",f=setInterval(function(){a(document).scrollLeft(a(document).scrollLeft()-
a.vakata.dnd.scroll_spd)},150))):f&&"left"===x&&(clearInterval(f),f=!1);20>a(window).width()-(c.pageX-d)?(f&&"left"===x&&(clearInterval(f),f=!1),f||(x="right",f=setInterval(function(){a(document).scrollLeft(a(document).scrollLeft()+a.vakata.dnd.scroll_spd)},150))):f&&"right"===x&&(clearInterval(f),f=!1)}a.vakata.dnd.helper.css({left:c.pageX+a.vakata.dnd.helper_left+"px",top:c.pageY+a.vakata.dnd.helper_top+"px"});a(document).triggerHandler("drag.vakata",{event:c,data:a.vakata.dnd.user_data})}},drag_stop:function(c){f&&
clearInterval(f);l&&clearInterval(l);a(document).unbind("mousemove",a.vakata.dnd.drag);a(document).unbind("mouseup",a.vakata.dnd.drag_stop);a(document).triggerHandler("drag_stop.vakata",{event:c,data:a.vakata.dnd.user_data});a.vakata.dnd.helper.remove();a.vakata.dnd.init_x=0;a.vakata.dnd.init_y=0;a.vakata.dnd.user_data={};a.vakata.dnd.is_down=!1;a.vakata.dnd.is_drag=!1}};a(function(){a.vakata.css.add_sheet({str:"#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } ",
title:"vakata"})});a.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:!1,after:!1,inside:!1,before:!1,off:!1,prepared:!1,w:0,to1:!1,to2:!1,cof:!1,cw:!1,ch:!1,i1:!1,i2:!1,mto:!1};this.get_container().bind("mouseenter.jstree",a.proxy(function(d){a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree&&(this.data.themes&&(g.attr("class","jstree-"+this.data.themes.theme),r&&r.attr("class","jstree-"+this.data.themes.theme),a.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),
d.currentTarget===d.target&&(a.vakata.dnd.user_data.obj&&a(a.vakata.dnd.user_data.obj).length&&a(a.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==d.target)&&(d=a.jstree._reference(d.target),d.data.dnd.foreign?(d=d._get_settings().dnd.drag_check.call(this,{o:c,r:d.get_container(),is_root:!0}),(!0===d||!0===d.inside||!0===d.before||!0===d.after)&&a.vakata.dnd.helper.children("ins").attr("class","jstree-ok")):(d.prepare_move(c,d.get_container(),"last"),d.check_move()&&a.vakata.dnd.helper.children("ins").attr("class",
"jstree-ok"))))},this)).bind("mouseup.jstree",a.proxy(function(d){if(a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree&&d.currentTarget===d.target&&a.vakata.dnd.user_data.obj&&a(a.vakata.dnd.user_data.obj).length&&a(a.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==d.target){var g=a.jstree._reference(d.currentTarget);g.data.dnd.foreign?(d=g._get_settings().dnd.drag_check.call(this,{o:c,r:g.get_container(),is_root:!0}),(!0===d||!0===d.inside||!0===d.before||!0===d.after)&&g._get_settings().dnd.drag_finish.call(this,
{o:c,r:g.get_container(),is_root:!0})):g.move_node(c,g.get_container(),"last",d[g._get_settings().dnd.copy_modifier+"Key"])}},this)).bind("mouseleave.jstree",a.proxy(function(c){if(c.relatedTarget&&c.relatedTarget.id&&"jstree-marker-line"===c.relatedTarget.id)return!1;a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree&&(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),
a.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&a.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"))},this)).bind("mousemove.jstree",a.proxy(function(c){if(a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree){var d=this.get_container()[0];c.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(a.proxy(function(){this.scrollLeft+=a.vakata.dnd.scroll_spd},d),100)):c.pageX-24<this.data.dnd.cof.left?(this.data.dnd.i1&&
clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(a.proxy(function(){this.scrollLeft-=a.vakata.dnd.scroll_spd},d),100)):this.data.dnd.i1&&clearInterval(this.data.dnd.i1);c.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(a.proxy(function(){this.scrollTop+=a.vakata.dnd.scroll_spd},d),100)):c.pageY-24<this.data.dnd.cof.top?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(a.proxy(function(){this.scrollTop-=
a.vakata.dnd.scroll_spd},d),100)):this.data.dnd.i2&&clearInterval(this.data.dnd.i2)}},this)).bind("scroll.jstree",a.proxy(function(c){a.vakata.dnd.is_drag&&(a.vakata.dnd.user_data.jstree&&g&&r)&&(g.hide(),r.hide())},this)).delegate("a","mousedown.jstree",a.proxy(function(a){if(1===a.which)return this.start_drag(a.currentTarget,a),!1},this)).delegate("a","mouseenter.jstree",a.proxy(function(c){a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree&&this.dnd_enter(c.currentTarget)},this)).delegate("a",
"mousemove.jstree",a.proxy(function(c){a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree&&((!d||!d.length||d.children("a")[0]!==c.currentTarget)&&this.dnd_enter(c.currentTarget),"undefined"===typeof this.data.dnd.off.top&&(this.data.dnd.off=a(c.target).offset()),this.data.dnd.w=(c.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height,0>this.data.dnd.w&&(this.data.dnd.w+=this.data.core.li_height),this.dnd_show())},this)).delegate("a","mouseleave.jstree",a.proxy(function(c){if(a.vakata.dnd.is_drag&&
a.vakata.dnd.user_data.jstree){if(c.relatedTarget&&c.relatedTarget.id&&"jstree-marker-line"===c.relatedTarget.id)return!1;g&&g.hide();r&&r.hide();this.data.dnd.mto=setTimeout(function(a){return function(){a.dnd_leave(c)}}(this),0)}},this)).delegate("a","mouseup.jstree",a.proxy(function(c){a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree&&this.dnd_finish(c)},this));a(document).bind("drag_stop.vakata",a.proxy(function(){this.data.dnd.to1&&clearTimeout(this.data.dnd.to1);this.data.dnd.to2&&clearTimeout(this.data.dnd.to2);
this.data.dnd.i1&&clearInterval(this.data.dnd.i1);this.data.dnd.i2&&clearInterval(this.data.dnd.i2);this.data.dnd.after=!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;this.data.dnd.off=!1;this.data.dnd.prepared=!1;this.data.dnd.w=!1;this.data.dnd.to1=!1;this.data.dnd.to2=!1;this.data.dnd.i1=!1;this.data.dnd.i2=!1;this.data.dnd.active=!1;this.data.dnd.foreign=!1;g&&g.css({top:"-2000px"});r&&r.css({top:"-2000px"})},this)).bind("drag_start.vakata",a.proxy(function(c,d){if(d.data.jstree){var g=a(d.event.target);
g.closest(".jstree").hasClass("jstree-"+this.get_index())&&this.dnd_enter(g)}},this));var f=this._get_settings().dnd;f.drag_target&&a(document).delegate(f.drag_target,"mousedown.jstree-"+this.get_index(),a.proxy(function(d){c=d.target;a.vakata.dnd.drag_start(d,{jstree:!0,obj:d.target},"<ins class='jstree-icon'></ins>"+a(d.target).text());this.data.themes&&(g&&g.attr("class","jstree-"+this.data.themes.theme),r&&r.attr("class","jstree-"+this.data.themes.theme),a.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+
this.data.themes.theme));a.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var f=this.get_container();this.data.dnd.cof=f.offset();this.data.dnd.cw=parseInt(f.width(),10);this.data.dnd.ch=parseInt(f.height(),10);this.data.dnd.foreign=!0;d.preventDefault()},this));f.drop_target&&a(document).delegate(f.drop_target,"mouseenter.jstree-"+this.get_index(),a.proxy(function(d){this.data.dnd.active&&this._get_settings().dnd.drop_check.call(this,{o:c,r:a(d.target),e:d})&&a.vakata.dnd.helper.children("ins").attr("class",
"jstree-ok")},this)).delegate(f.drop_target,"mouseleave.jstree-"+this.get_index(),a.proxy(function(c){this.data.dnd.active&&a.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")},this)).delegate(f.drop_target,"mouseup.jstree-"+this.get_index(),a.proxy(function(d){this.data.dnd.active&&a.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&this._get_settings().dnd.drop_finish.call(this,{o:c,r:a(d.target),e:d})},this))},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,
drop_target:".jstree-drop",drop_check:function(a){return!0},drop_finish:a.noop,drag_target:".jstree-draggable",drag_finish:a.noop,drag_check:function(a){return{after:!1,before:!1,inside:!0}}},_fn:{dnd_prepare:function(){if(d&&d.length){this.data.dnd.off=d.offset();this._get_settings().core.rtl&&(this.data.dnd.off.right=this.data.dnd.off.left+d.width());if(this.data.dnd.foreign){var a=this._get_settings().dnd.drag_check.call(this,{o:c,r:d});this.data.dnd.after=a.after;this.data.dnd.before=a.before;
this.data.dnd.inside=a.inside;this.data.dnd.prepared=!0;return this.dnd_show()}this.prepare_move(c,d,"before");this.data.dnd.before=this.check_move();this.prepare_move(c,d,"after");this.data.dnd.after=this.check_move();this._is_loaded(d)?(this.prepare_move(c,d,"inside"),this.data.dnd.inside=this.check_move()):this.data.dnd.inside=!1;this.data.dnd.prepared=!0;return this.dnd_show()}},dnd_show:function(){if(this.data.dnd.prepared){var c=["before","inside","after"],d=!1,f=this._get_settings().core.rtl,
c=this.data.dnd.w<this.data.core.li_height/3?["before","inside","after"]:this.data.dnd.w<=2*this.data.core.li_height/3?this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"]:["after","inside","before"];a.each(c,a.proxy(function(c,g){if(this.data.dnd[g])return a.vakata.dnd.helper.children("ins").attr("class","jstree-ok"),d=g,!1},this));!1===d&&a.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");c=f?this.data.dnd.off.right-18:this.data.dnd.off.left+
10;switch(d){case "before":g.css({left:c+"px",top:this.data.dnd.off.top-6+"px"}).show();r&&r.css({left:c+8+"px",top:this.data.dnd.off.top-1+"px"}).show();break;case "after":g.css({left:c+"px",top:this.data.dnd.off.top+this.data.core.li_height-6+"px"}).show();r&&r.css({left:c+8+"px",top:this.data.dnd.off.top+this.data.core.li_height-1+"px"}).show();break;case "inside":g.css({left:c+(f?-4:4)+"px",top:this.data.dnd.off.top+this.data.core.li_height/2-5+"px"}).show();r&&r.hide();break;default:g.hide(),
r&&r.hide()}return I=d}},dnd_open:function(){this.data.dnd.to2=!1;this.open_node(d,a.proxy(this.dnd_prepare,this),!0)},dnd_finish:function(a){this.data.dnd.foreign?(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside)&&this._get_settings().dnd.drag_finish.call(this,{o:c,r:d,p:I}):(this.dnd_prepare(),this.move_node(c,d,I,a[this._get_settings().dnd.copy_modifier+"Key"]));d=c=!1;g.hide();r&&r.hide()},dnd_enter:function(c){this.data.dnd.mto&&(clearTimeout(this.data.dnd.mto),this.data.dnd.mto=
!1);var g=this._get_settings().dnd;this.data.dnd.prepared=!1;d=this._get_node(c);g.check_timeout?(this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to1=setTimeout(a.proxy(this.dnd_prepare,this),g.check_timeout)):this.dnd_prepare();g.open_timeout?(this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),d&&(d.length&&d.hasClass("jstree-closed"))&&(this.data.dnd.to2=setTimeout(a.proxy(this.dnd_open,this),g.open_timeout))):d&&(d.length&&d.hasClass("jstree-closed"))&&this.dnd_open()},dnd_leave:function(c){this.data.dnd.after=
!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;a.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");g.hide();r&&r.hide();d&&d[0]===c.target.parentNode&&(this.data.dnd.to1&&(clearTimeout(this.data.dnd.to1),this.data.dnd.to1=!1),this.data.dnd.to2&&(clearTimeout(this.data.dnd.to2),this.data.dnd.to2=!1))},start_drag:function(d,f){c=this._get_node(d);this.data.ui&&this.is_selected(c)&&(c=this._get_node(null,!0));var l=1<c.length?this._get_string("multiple_selection"):this.get_text(c),
y=this.get_container();this._get_settings().core.html_titles||(l=l.replace(/</ig,"&lt;").replace(/>/ig,"&gt;"));a.vakata.dnd.drag_start(f,{jstree:!0,obj:c},"<ins class='jstree-icon'></ins>"+l);this.data.themes&&(g&&g.attr("class","jstree-"+this.data.themes.theme),r&&r.attr("class","jstree-"+this.data.themes.theme),a.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme));this.data.dnd.cof=y.offset();this.data.dnd.cw=parseInt(y.width(),10);this.data.dnd.ch=parseInt(y.height(),
10);this.data.dnd.active=!0}}});a(function(){a.vakata.css.add_sheet({str:"#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px;  -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; } #vakata-dragged .jstree-ok { background:green; } #vakata-dragged .jstree-invalid { background:red; } #jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } #jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43;  cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666;  -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; }",
title:"jstree"});g=a("<div />").attr({id:"jstree-marker"}).hide().html("&raquo;").bind("mouseleave mouseenter",function(a){g.hide();r.hide();a.preventDefault();a.stopImmediatePropagation();return!1}).appendTo("body");r=a("<div />").attr({id:"jstree-marker-line"}).hide().bind("mouseup",function(a){if(d&&d.length)return d.children("a").trigger(a),a.preventDefault(),a.stopImmediatePropagation(),!1}).bind("mouseleave",function(c){var f=a(c.relatedTarget);if((f.is(".jstree")||0===f.closest(".jstree").length)&&
d&&d.length)return d.children("a").trigger(c),g.hide(),r.hide(),c.preventDefault(),c.stopImmediatePropagation(),!1}).appendTo("body");a(document).bind("drag_start.vakata",function(a,c){c.data.jstree&&(g.show(),r&&r.show())});a(document).bind("drag_stop.vakata",function(a,c){c.data.jstree&&(g.hide(),r&&r.hide())})})})(jQuery);(function(a){a.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui;this.data.ui&&this.data.checkbox.noui&&(this.select_node=
this.deselect_node=this.deselect_all=a.noop,this.get_selected=this.get_checked);this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",a.proxy(function(a,d){this._prepare_checkboxes(d.rslt.obj)},this)).bind("loaded.jstree",a.proxy(function(a){this._prepare_checkboxes()},this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",a.proxy(function(a){a.preventDefault();this._get_node(a.target).hasClass("jstree-checked")?this.uncheck_node(a.target):
this.check_node(a.target);if(this.data.ui&&this.data.checkbox.noui)this.save_selected(),this.data.cookies&&this.save_cookie("select_node");else return a.stopImmediatePropagation(),!1},this))},defaults:{override_ui:!1,two_state:!1,real_checkboxes:!1,checked_parent_open:!0,real_checkboxes_names:function(a){return["check_"+(a[0].id||Math.ceil(1E4*Math.random())),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},
_fn:{_checkbox_notify:function(a,d){d.checked&&this.check_node(a,!1)},_prepare_checkboxes:function(c){c=!c||-1==c?this.get_container().find("> ul > li"):this._get_node(c);if(!1!==c){var d,g=this,r,f=this._get_settings().checkbox.two_state,l=this._get_settings().checkbox.real_checkboxes,p=this._get_settings().checkbox.real_checkboxes_names;c.each(function(){r=a(this);d=r.is("li")&&(r.hasClass("jstree-checked")||l&&r.children(":checked").length)?"jstree-checked":"jstree-unchecked";r.find("li").addBack().each(function(){var c=
a(this),r;c.children("a"+(g.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(f?"jstree-unchecked":d);l&&(c.children(":checkbox").length?c.children(":checkbox").addClass("jstree-real-checkbox"):(r=p.call(g,c),c.prepend("<input type='checkbox' class='jstree-real-checkbox' id='"+r[0]+"' name='"+r[0]+"' value='"+r[1]+"' />")));f?(c.hasClass("jstree-checked")||c.children(":checked").length)&&
c.addClass("jstree-checked").children(":checkbox").prop("checked",!0):("jstree-checked"===d||c.hasClass("jstree-checked")||c.children(":checked").length)&&c.find("li").addBack().addClass("jstree-checked").children(":checkbox").prop("checked",!0)})});f||c.find(".jstree-checked").parent().parent().each(function(){g._repair_state(this)})}},change_state:function(c,d){c=this._get_node(c);var g=!1,r=this._get_settings().checkbox.real_checkboxes;if(!c||-1===c)return!1;d=!1===d||!0===d?d:c.hasClass("jstree-checked");
if(this._get_settings().checkbox.two_state)d?(c.removeClass("jstree-checked").addClass("jstree-unchecked"),r&&c.children(":checkbox").prop("checked",!1)):(c.removeClass("jstree-unchecked").addClass("jstree-checked"),r&&c.children(":checkbox").prop("checked",!0));else{if(d){g=c.find("li").addBack();if(!g.filter(".jstree-checked, .jstree-undetermined").length)return!1;g.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");r&&g.children(":checkbox").prop("checked",!1)}else{g=
c.find("li").addBack();if(!g.filter(".jstree-unchecked, .jstree-undetermined").length)return!1;g.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");r&&g.children(":checkbox").prop("checked",!0);this.data.ui&&(this.data.ui.last_selected=c);this.data.checkbox.last_selected=c}c.parentsUntil(".jstree","li").each(function(){var c=a(this);if(d){if(c.children("ul").children("li.jstree-checked, li.jstree-undetermined").length)return c.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),
r&&c.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",!1),!1;c.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");r&&c.children(":checkbox").prop("checked",!1)}else{if(c.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length)return c.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),r&&c.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",
!1),!1;c.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");r&&c.children(":checkbox").prop("checked",!0)}})}this.data.ui&&this.data.checkbox.noui&&(this.data.ui.selected=this.get_checked());this.__callback(c);return!0},check_node:function(a){if(this.change_state(a,!1)){a=this._get_node(a);if(this._get_settings().checkbox.checked_parent_open){var d=this;a.parents(".jstree-closed").each(function(){d.open_node(this,!1,!0)})}this.__callback({obj:a})}},uncheck_node:function(a){this.change_state(a,
!0)&&this.__callback({obj:this._get_node(a)})},check_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!1)});this.__callback()},uncheck_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!0)});this.__callback()},is_checked:function(a){a=this._get_node(a);
return a.length?a.is(".jstree-checked"):!1},get_checked:function(a,d){a=!a||-1===a?this.get_container():this._get_node(a);return d||this._get_settings().checkbox.two_state?a.find(".jstree-checked"):a.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(a,d){a=!a||-1===a?this.get_container():this._get_node(a);return d||this._get_settings().checkbox.two_state?a.find(".jstree-unchecked"):a.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},
show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(a){a=this._get_node(a);if(a.length)if(this._get_settings().checkbox.two_state)a.find("li").addBack().not(".jstree-checked").removeClass("jstree-undetermined").addClass("jstree-unchecked").children(":checkbox").prop("checked",!0);else{var d=this._get_settings().checkbox.real_checkboxes,
g=a.find("> ul > .jstree-checked").length,r=a.find("> ul > .jstree-undetermined").length,f=a.find("> ul > li").length;0===f?a.hasClass("jstree-undetermined")&&this.change_state(a,!1):0===g&&0===r?this.change_state(a,!0):g===f?this.change_state(a,!1):(a.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),d&&a.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",!1))}},reselect:function(){if(this.data.ui&&this.data.checkbox.noui){var c=
this,d=this.data.ui.to_select,d=a.map(a.makeArray(d),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});this.deselect_all();a.each(d,function(a,d){c.check_node(d)});this.__callback()}else this.__call_old()},save_loaded:function(){var a=this;this.data.core.to_load=[];this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){this.id&&a.data.core.to_load.push("#"+this.id)})}}});
a(function(){a.vakata.css.add_sheet({str:".jstree .jstree-real-checkbox { display:none; } ",title:"jstree"})})})(jQuery);(function(a){a.vakata.xslt=function(c,d,f){var l=!1,p,x,I;if(!1===l&&window.ActiveXObject)try{l=new ActiveXObject("Msxml2.XSLTemplate"),x=new ActiveXObject("Msxml2.DOMDocument"),x.loadXML(c),I=new ActiveXObject("Msxml2.FreeThreadedDOMDocument"),I.loadXML(d),l.stylesheet=I,p=l.createProcessor(),p.input=x,p.transform(),l=p.output}catch(t){}c=a.parseXML(c);d=a.parseXML(d);!1===l&&
"undefined"!==typeof XSLTProcessor&&(p=new XSLTProcessor,p.importStylesheet(d),l=p.transformToFragment(c,document),l=a("<div />").append(l).html());!1===l&&"undefined"!==typeof c.transformNode&&(l=c.transformNode(d));f.call(null,l)};var c={nest:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/html" /><xsl:template match="/">\t<xsl:call-template name="nodes">\t\t<xsl:with-param name="node" select="/root" />\t</xsl:call-template></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<ul>\t<xsl:for-each select="$node/item">\t\t<xsl:variable name="children" select="count(./item) &gt; 0" />\t\t<li>\t\t\t<xsl:attribute name="class">\t\t\t\t<xsl:if test="position() = last()">jstree-last </xsl:if>\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t\t\t</xsl:choose>\t\t\t\t<xsl:value-of select="@class" />\t\t\t</xsl:attribute>\t\t\t<xsl:for-each select="@*">\t\t\t\t<xsl:if test="name() != \'class\' and name() != \'state\' and name() != \'hasChildren\'">\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t</xsl:if>\t\t\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t\t\t<xsl:for-each select="content/name">\t\t\t\t<a>\t\t\t\t<xsl:attribute name="href">\t\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t\t\t</xsl:choose>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t\t\t<xsl:for-each select="@*">\t\t\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t\t</xsl:if>\t\t\t\t</xsl:for-each>\t\t\t\t\t<ins>\t\t\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t\t\t</xsl:attribute>\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t\t\t</ins>\t\t\t\t\t<xsl:copy-of select="./child::node()" />\t\t\t\t</a>\t\t\t</xsl:for-each>\t\t\t<xsl:if test="$children or @hasChildren"><xsl:call-template name="nodes"><xsl:with-param name="node" select="current()" /></xsl:call-template></xsl:if>\t\t</li>\t</xsl:for-each>\t</ul></xsl:template></xsl:stylesheet>',
flat:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/xml" /><xsl:template match="/">\t<ul>\t<xsl:for-each select="//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]">\t\t<xsl:call-template name="nodes">\t\t\t<xsl:with-param name="node" select="." />\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t</xsl:call-template>\t</xsl:for-each>\t</ul></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<xsl:param name="is_last" />\t<xsl:variable name="children" select="count(//item[@parent_id=$node/attribute::id]) &gt; 0" />\t<li>\t<xsl:attribute name="class">\t\t<xsl:if test="$is_last = true()">jstree-last </xsl:if>\t\t<xsl:choose>\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t</xsl:choose>\t\t<xsl:value-of select="@class" />\t</xsl:attribute>\t<xsl:for-each select="@*">\t\t<xsl:if test="name() != \'parent_id\' and name() != \'hasChildren\' and name() != \'class\' and name() != \'state\'">\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t</xsl:if>\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t<xsl:for-each select="content/name">\t\t<a>\t\t<xsl:attribute name="href">\t\t\t<xsl:choose>\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t</xsl:choose>\t\t</xsl:attribute>\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t<xsl:for-each select="@*">\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t</xsl:if>\t\t</xsl:for-each>\t\t\t<ins>\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t</ins>\t\t\t<xsl:copy-of select="./child::node()" />\t\t</a>\t</xsl:for-each>\t<xsl:if test="$children">\t\t<ul>\t\t<xsl:for-each select="//item[@parent_id=$node/attribute::id]">\t\t\t<xsl:call-template name="nodes">\t\t\t\t<xsl:with-param name="node" select="." />\t\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t\t</xsl:call-template>\t\t</xsl:for-each>\t\t</ul>\t</xsl:if>\t</li></xsl:template></xsl:stylesheet>'},
d=function(a){return a.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};a.jstree.plugin("xml_data",{defaults:{data:!1,ajax:!1,xsl:"flat",clean_node:!1,correct_state:!0,get_skip_empty:!1,get_include_preamble:!0},_fn:{load_node:function(a,c,d){var f=this;this.load_node_xml(a,function(){f.__callback({obj:f._get_node(a)});c.call(this)},d)},_is_loaded:function(c){var d=this._get_settings().xml_data;c=this._get_node(c);return-1==c||
!c||!d.ajax&&!a.isFunction(d.data)||c.is(".jstree-open, .jstree-leaf")||0<c.children("ul").children("li").size()},load_node_xml:function(c,d,f){var l=this.get_settings().xml_data,p=function(){},x=function(){};if((c=this._get_node(c))&&-1!==c){if(c.data("jstree_is_loading"))return;c.data("jstree_is_loading",!0)}switch(!0){case !l.data&&!l.ajax:throw"Neither data nor ajax settings supplied.";case a.isFunction(l.data):l.data.call(this,c,a.proxy(function(f){this.parse_xml(f,a.proxy(function(f){f&&(f=
f.replace(/ ?xmlns="[^"]*"/ig,""),10<f.length?(f=a(f),-1===c||!c?this.get_container().children("ul").empty().append(f.children()):(c.children("a.jstree-loading").removeClass("jstree-loading"),c.append(f),c.removeData("jstree_is_loading")),l.clean_node&&this.clean_node(c),d&&d.call(this)):c&&-1!==c?(c.children("a.jstree-loading").removeClass("jstree-loading"),c.removeData("jstree_is_loading"),l.correct_state&&(this.correct_state(c),d&&d.call(this))):l.correct_state&&(this.get_container().children("ul").empty(),
d&&d.call(this)))},this))},this));break;case !!l.data&&!l.ajax||!!l.data&&!!l.ajax&&(!c||-1===c):(!c||-1==c)&&this.parse_xml(l.data,a.proxy(function(f){f?(f=f.replace(/ ?xmlns="[^"]*"/ig,""),10<f.length&&(f=a(f),this.get_container().children("ul").empty().append(f.children()),l.clean_node&&this.clean_node(c),d&&d.call(this))):l.correct_state&&(this.get_container().children("ul").empty(),d&&d.call(this))},this));break;case !l.data&&!!l.ajax||!!l.data&&!!l.ajax&&c&&-1!==c:p=function(a,d,r){var p=this.get_settings().xml_data.ajax.error;
p&&p.call(this,a,d,r);-1!==c&&c.length?(c.children("a.jstree-loading").removeClass("jstree-loading"),c.removeData("jstree_is_loading"),"success"===d&&l.correct_state&&this.correct_state(c)):"success"===d&&l.correct_state&&this.get_container().children("ul").empty();f&&f.call(this)},x=function(f,y,x){f=x.responseText;var Q=this.get_settings().xml_data.ajax.success;Q&&(f=Q.call(this,f,y,x)||f);if(""===f||f&&f.toString&&""===f.toString().replace(/^[\s\n]+$/,""))return p.call(this,x,y,"");this.parse_xml(f,
a.proxy(function(f){f&&(f=f.replace(/ ?xmlns="[^"]*"/ig,""),10<f.length?(f=a(f),-1===c||!c?this.get_container().children("ul").empty().append(f.children()):(c.children("a.jstree-loading").removeClass("jstree-loading"),c.append(f),c.removeData("jstree_is_loading")),l.clean_node&&this.clean_node(c),d&&d.call(this)):c&&-1!==c?(c.children("a.jstree-loading").removeClass("jstree-loading"),c.removeData("jstree_is_loading"),l.correct_state&&(this.correct_state(c),d&&d.call(this))):l.correct_state&&(this.get_container().children("ul").empty(),
d&&d.call(this)))},this))},l.ajax.context=this,l.ajax.error=p,l.ajax.success=x,l.ajax.dataType||(l.ajax.dataType="xml"),a.isFunction(l.ajax.url)&&(l.ajax.url=l.ajax.url.call(this,c)),a.isFunction(l.ajax.data)&&(l.ajax.data=l.ajax.data.call(this,c)),a.ajax(l.ajax)}},parse_xml:function(d,r){var f=this._get_settings().xml_data;a.vakata.xslt(d,c[f.xsl],r)},get_xml:function(c,r,f,l,p){var x="",I=this._get_settings(),t=this,P,Q,Y,Va,Ka;c||(c="flat");p||(p=0);r=this._get_node(r);if(!r||-1===r)r=this.get_container().find("> ul > li");
f=a.isArray(f)?f:["id","class"];!p&&(this.data.types&&-1===a.inArray(I.types.type_attr,f))&&f.push(I.types.type_attr);l=a.isArray(l)?l:[];p||(I.xml_data.get_include_preamble&&(x+='<?xml version="1.0" encoding="UTF-8"?>'),x+="<root>");r.each(function(){x+="<item";Y=a(this);a.each(f,function(a,c){var g=Y.attr(c);if(!I.xml_data.get_skip_empty||"undefined"!==typeof g)x+=" "+c+'="'+d((" "+(g||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"'});Y.hasClass("jstree-open")&&
(x+=' state="open"');Y.hasClass("jstree-closed")&&(x+=' state="closed"');"flat"===c&&(x+=' parent_id="'+d(p)+'"');x+=">";x+="<content>";Va=Y.children("a");Va.each(function(){P=a(this);Ka=!1;x+="<name";-1!==a.inArray("languages",I.plugins)&&a.each(I.languages,function(a,c){if(P.hasClass(c))return x+=' lang="'+d(c)+'"',Ka=c,!1});l.length&&a.each(l,function(a,c){var g=P.attr(c);if(!I.xml_data.get_skip_empty||"undefined"!==typeof g)x+=" "+c+'="'+d((" "+g||"").replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig,
" ").replace(/^ /,"").replace(/ $/,""))+'"'});P.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(x+=' icon="'+d(P.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"');P.children("ins").get(0).style.backgroundImage.length&&(x+=' icon="'+d(P.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/ig,"").replace(/"/ig,""))+'"');x+=">";x+="<![CDATA["+
t.get_text(P,Ka)+"]]\x3e";x+="</name>"});x+="</content>";Q=Y[0].id||!0;Y=Y.find("> ul > li");Q=Y.length?t.get_xml(c,Y,f,l,Q):"";"nest"==c&&(x+=Q);x+="</item>";"flat"==c&&(x+=Q)});p||(x+="</root>");return x}}})})(jQuery);(function(a){8<=a().jquery.split(".")[1]?(a.expr[":"].jstree_contains=a.expr.createPseudo(function(a){return function(d){return 0<=(d.textContent||d.innerText||"").toLowerCase().indexOf(a.toLowerCase())}}),a.expr[":"].jstree_title_contains=a.expr.createPseudo(function(a){return function(d){return 0<=
(d.getAttribute("title")||"").toLowerCase().indexOf(a.toLowerCase())}})):(a.expr[":"].jstree_contains=function(a,d,g){return 0<=(a.textContent||a.innerText||"").toLowerCase().indexOf(g[3].toLowerCase())},a.expr[":"].jstree_title_contains=function(a,d,g){return 0<=(a.getAttribute("title")||"").toLowerCase().indexOf(g[3].toLowerCase())});a.jstree.plugin("search",{__init:function(){this.data.search.str="";this.data.search.result=a();this._get_settings().search.show_only_matches&&this.get_container().bind("search.jstree",
function(c,d){a(this).children("ul").find("li").hide().removeClass("jstree-last");d.rslt.nodes.parentsUntil(".jstree").addBack().show().filter("ul").each(function(){a(this).children("li:visible").eq(-1).addClass("jstree-last")})}).bind("clear_search.jstree",function(){a(this).children("ul").find("li").css("display","").end().end().jstree("clean_node",-1)})},defaults:{ajax:!1,search_method:"jstree_contains",show_only_matches:!1},_fn:{search:function(c,d){if(""===a.trim(c))this.clear_search();else{var g=
this.get_settings().search,f=this,l=function(){};this.data.search.str=c;if(!d&&!1!==g.ajax&&0<this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length){this.search.supress_callback=!0;l=function(a,c,d){var g=this.get_settings().search.ajax.success;g&&(a=g.call(this,a,c,d)||a);this.data.search.to_open=a;this._search_open()};g.ajax.context=this;g.ajax.error=function(){};g.ajax.success=l;a.isFunction(g.ajax.url)&&(g.ajax.url=g.ajax.url.call(this,c));a.isFunction(g.ajax.data)&&(g.ajax.data=
g.ajax.data.call(this,c));g.ajax.data||(g.ajax.data={search_string:c});if(!g.ajax.dataType||/^json/.exec(g.ajax.dataType))g.ajax.dataType="json";a.ajax(g.ajax)}else this.data.search.result.length&&this.clear_search(),this.data.search.result=this.get_container().find("a"+(this.data.languages?"."+this.get_lang():"")+":"+g.search_method+"("+this.data.search.str+")"),this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function(){f.open_node(this,!1,!0)}),this.__callback({nodes:this.data.search.result,
str:c})}},clear_search:function(c){this.data.search.result.removeClass("jstree-search");this.__callback(this.data.search.result);this.data.search.result=a()},_search_open:function(c){var d=this;c=!0;var g=[],f=[];this.data.search.to_open.length&&(a.each(this.data.search.to_open,function(c,d){if("#"==d)return!0;a(d).length&&a(d).is(".jstree-closed")?g.push(d):f.push(d)}),g.length&&(this.data.search.to_open=f,a.each(g,function(a,c){d.open_node(c,function(){d._search_open(!0)})}),c=!1));c&&this.search(this.data.search.str,
!0)}}})})(jQuery);(function(a){a.vakata.context={hide_on_mouseleave:!1,cnt:a("<div id='vakata-contextmenu' />"),vis:!1,tgt:!1,par:!1,func:!1,data:!1,rtl:!1,show:function(c,d,g,f,l,p,V){a.vakata.context.rtl=!!V;if(c=a.vakata.context.parse(c)){a.vakata.context.vis=!0;a.vakata.context.tgt=d;a.vakata.context.par=p||d||null;a.vakata.context.data=l||null;a.vakata.context.cnt.html(c).css({visibility:"hidden",display:"block",left:0,top:0});if(a.vakata.context.hide_on_mouseleave)a.vakata.context.cnt.one("mouseleave",
function(c){a.vakata.context.hide()});l=a.vakata.context.cnt.height();p=a.vakata.context.cnt.width();g+p>a(document).width()&&(g=a(document).width()-(p+5),a.vakata.context.cnt.find("li > ul").addClass("right"));f+l>a(document).height()&&(f-=l+d[0].offsetHeight,a.vakata.context.cnt.find("li > ul").addClass("bottom"));a.vakata.context.cnt.css({left:g,top:f}).find("li:has(ul)").bind("mouseenter",function(c){c=a(document).width();var d=a(document).height(),g=a(this).children("ul").show();c!==a(document).width()&&
g.toggleClass("right");d!==a(document).height()&&g.toggleClass("bottom")}).bind("mouseleave",function(c){a(this).children("ul").hide()}).end().css({visibility:"visible"}).show();a(document).triggerHandler("context_show.vakata")}},hide:function(){a.vakata.context.vis=!1;a.vakata.context.cnt.attr("class","").css({visibility:"hidden"});a(document).triggerHandler("context_hide.vakata")},parse:function(c,d){if(!c)return!1;var g="",f=!1,l=!0;d||(a.vakata.context.func={});g+="<ul>";a.each(c,function(c,d){if(!d)return!0;
a.vakata.context.func[c]=d.action;!l&&d.separator_before&&(g+="<li class='vakata-separator vakata-separator-before'></li>");l=!1;g+="<li class='"+(d._class||"")+(d._disabled?" jstree-contextmenu-disabled ":"")+"'><ins ";d.icon&&-1===d.icon.indexOf("/")&&(g+=" class='"+d.icon+"' ");d.icon&&-1!==d.icon.indexOf("/")&&(g+=" style='background:url("+d.icon+") center center no-repeat;' ");g+=">&#160;</ins><a href='#' rel='"+c+"'>";d.submenu&&(g+="<span style='float:"+(a.vakata.context.rtl?"left":"right")+
";'>&raquo;</span>");g+=d.label+"</a>";d.submenu&&(f=a.vakata.context.parse(d.submenu,!0))&&(g+=f);g+="</li>";d.separator_after&&(g+="<li class='vakata-separator vakata-separator-after'></li>",l=!0)});g=g.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,"");g+="</ul>";a(document).triggerHandler("context_parse.vakata");return 10<g.length?g:!1},exec:function(c){return a.isFunction(a.vakata.context.func[c])?(a.vakata.context.func[c].call(a.vakata.context.data,a.vakata.context.par),
!0):!1}};a(function(){a.vakata.css.add_sheet({str:"#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; *width:180px; } #vakata-contextmenu ul { min-width:180px; *width:180px; } #vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } #vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } #vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } #vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } #vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover > a { background:gray; color:white; } #vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } #vakata-contextmenu .right { right:100%; left:auto; } #vakata-contextmenu .bottom { bottom:-1px; top:auto; } #vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ",
title:"vakata"});a.vakata.context.cnt.delegate("a","click",function(a){a.preventDefault()}).delegate("a","mouseup",function(c){!a(this).parent().hasClass("jstree-contextmenu-disabled")&&a.vakata.context.exec(a(this).attr("rel"))?a.vakata.context.hide():a(this).blur()}).delegate("a","mouseover",function(){a.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body");a(document).bind("mousedown",function(c){a.vakata.context.vis&&!a.contains(a.vakata.context.cnt[0],c.target)&&
a.vakata.context.hide()});"undefined"!==typeof a.hotkeys&&a(document).bind("keydown","up",function(c){if(a.vakata.context.vis){var d=a.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();d.length||(d=a.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last());d.addClass("vakata-hover");c.stopImmediatePropagation();c.preventDefault()}}).bind("keydown","down",function(c){if(a.vakata.context.vis){var d=
a.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();d.length||(d=a.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first());d.addClass("vakata-hover");c.stopImmediatePropagation();c.preventDefault()}}).bind("keydown","right",function(c){a.vakata.context.vis&&(a.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover"),
c.stopImmediatePropagation(),c.preventDefault())}).bind("keydown","left",function(c){a.vakata.context.vis&&(a.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover"),c.stopImmediatePropagation(),c.preventDefault())}).bind("keydown","esc",function(c){a.vakata.context.hide();c.preventDefault()}).bind("keydown","space",function(c){a.vakata.context.cnt.find(".vakata-hover").last().children("a").click();c.preventDefault()})});a.jstree.plugin("contextmenu",
{__init:function(){this.get_container().delegate("a","contextmenu.jstree",a.proxy(function(c){c.preventDefault();a(c.currentTarget).hasClass("jstree-loading")||this.show_contextmenu(c.currentTarget,c.pageX,c.pageY)},this)).delegate("a","click.jstree",a.proxy(function(c){this.data.contextmenu&&a.vakata.context.hide()},this)).bind("destroy.jstree",a.proxy(function(){this.data.contextmenu&&a.vakata.context.hide()},this));a(document).bind("context_hide.vakata",a.proxy(function(){this.data.contextmenu=
!1},this))},defaults:{select_node:!1,show_at_node:!0,items:{create:{separator_before:!1,separator_after:!0,label:"Create",action:function(a){this.create(a)}},rename:{separator_before:!1,separator_after:!1,label:"Rename",action:function(a){this.rename(a)}},remove:{separator_before:!1,icon:!1,separator_after:!1,label:"Delete",action:function(a){this.is_selected(a)?this.remove():this.remove(a)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,
separator_after:!1,label:"Cut",action:function(a){this.cut(a)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(a){this.copy(a)}},paste:{separator_before:!1,icon:!1,separator_after:!1,label:"Paste",action:function(a){this.paste(a)}}}}}},_fn:{show_contextmenu:function(c,d,g){c=this._get_node(c);var f=this.get_settings().contextmenu,l=c.children("a:visible:eq(0)"),p=!1,p=!1;f.select_node&&(this.data.ui&&!this.is_selected(c))&&(this.deselect_all(),this.select_node(c,
!0));if(f.show_at_node||"undefined"===typeof d||"undefined"===typeof g)p=l.offset(),d=p.left,g=p.top+this.data.core.li_height;p=c.data("jstree")&&c.data("jstree").contextmenu?c.data("jstree").contextmenu:f.items;a.isFunction(p)&&(p=p.call(this,c));this.data.contextmenu=!0;a.vakata.context.show(p,l,d,g,this,c,this._get_settings().core.rtl);this.data.themes&&a.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}})})(jQuery);(function(a){a.jstree.plugin("types",{__init:function(){var c=
this._get_settings().types;this.data.types.attach_to=[];this.get_container().bind("init.jstree",a.proxy(function(){var d=c.type_attr,g="",f=this;a.each(c.types,function(c,l){a.each(l,function(a,c){/^(max_depth|max_children|icon|valid_children)$/.test(a)||f.data.types.attach_to.push(a)});if(!l.icon)return!0;if(l.icon.image||l.icon.position)g="default"==c?g+(".jstree-"+f.get_index()+" a > .jstree-icon { "):g+(".jstree-"+f.get_index()+" li["+d+'="'+c+'"] > a > .jstree-icon { '),l.icon.image&&(g+=" background-image:url("+
l.icon.image+"); "),g=l.icon.position?g+(" background-position:"+l.icon.position+"; "):g+" background-position:0 0; ",g+="} "});""!==g&&a.vakata.css.add_sheet({str:g,title:"jstree-types"})},this)).bind("before.jstree",a.proxy(function(c,g){var f,l;if((f=(f=this._get_settings().types.use_data?this._get_node(g.args[0]):!1)&&-1!==f&&f.length?f.data("jstree"):!1)&&f.types&&!1===f.types[g.func])return c.stopImmediatePropagation(),!1;if(-1!==a.inArray(g.func,this.data.types.attach_to)&&g.args[0]&&(g.args[0].tagName||
g.args[0].jquery))if(f=this._get_settings().types.types,l=this._get_type(g.args[0]),(f[l]&&"undefined"!==typeof f[l][g.func]||f["default"]&&"undefined"!==typeof f["default"][g.func])&&!1===this._check(g.func,g.args[0]))return c.stopImmediatePropagation(),!1},this));f&&this.get_container().bind("load_node.jstree set_type.jstree",a.proxy(function(c,g){var f=g&&g.rslt&&g.rslt.obj&&-1!==g.rslt.obj?this._get_node(g.rslt.obj).parent():this.get_container_ul(),l=!1,p=this._get_settings().types;a.each(p.types,
function(a,c){if(c.icon&&(c.icon.image||c.icon.position))l="default"===a?f.find("li > a > .jstree-icon"):f.find("li["+p.type_attr+"='"+a+"'] > a > .jstree-icon"),c.icon.image&&l.css("backgroundImage","url("+c.icon.image+")"),l.css("backgroundPosition",c.icon.position||"0 0")})},this))},defaults:{max_children:-1,max_depth:-1,valid_children:"all",use_data:!1,type_attr:"rel",types:{"default":{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_types_notify:function(a,d){d.type&&this._get_settings().types.use_data&&
this.set_type(d.type,a)},_get_type:function(a){a=this._get_node(a);return!a||!a.length?!1:a.attr(this._get_settings().types.type_attr)||"default"},set_type:function(a,d){d=this._get_node(d);var g=!d.length||!a?!1:d.attr(this._get_settings().types.type_attr,a);g&&this.__callback({obj:d,type:a});return g},_check:function(c,d,g){d=this._get_node(d);var f=!1,l=this._get_type(d),p=0,V=this,x=this._get_settings().types,I=!1;if(-1===d)if(x[c])f=x[c];else return;else{if(!1===l)return;(I=x.use_data?d.data("jstree"):
!1)&&I.types&&"undefined"!==typeof I.types[c]?f=I.types[c]:x.types[l]&&"undefined"!==typeof x.types[l][c]?f=x.types[l][c]:x.types["default"]&&"undefined"!==typeof x.types["default"][c]&&(f=x.types["default"][c])}a.isFunction(f)&&(f=f.call(this,d));"max_depth"===c&&(-1!==d&&!1!==g&&-2!==x.max_depth&&0!==f)&&d.children("a:eq(0)").parentsUntil(".jstree","li").each(function(a){if(-1!==x.max_depth&&0>=x.max_depth-(a+1))return f=0,!1;p=0===a?f:V._check(c,this,!1);if(-1!==p&&0>=p-(a+1))return f=0,!1;if(0<=
p&&(p-(a+1)<f||0>f))f=p-(a+1);if(0<=x.max_depth&&(x.max_depth-(a+1)<f||0>f))f=x.max_depth-(a+1)});return f},check_move:function(){if(!this.__call_old())return!1;var c=this._get_move(),d=c.rt._get_settings().types,g=c.rt._check("max_children",c.cr),f=c.rt._check("max_depth",c.cr),l=c.rt._check("valid_children",c.cr),p=0,V=1;if("none"===l||a.isArray(l)&&(c.ot&&c.ot._get_type)&&(c.o.each(function(){if(-1===a.inArray(c.ot._get_type(this),l))return V=!1}),!1===V)||-2!==d.max_children&&-1!==g&&(p=-1===
c.cr?this.get_container().find("> ul > li").not(c.o).length:c.cr.find("> ul > li").not(c.o).length,p+c.o.length>g))return!1;if(-2!==d.max_depth&&-1!==f){V=0;if(0===f)return!1;if("undefined"===typeof c.o.d){for(d=c.o;0<d.length;)d=d.find("> ul > li"),V++;c.o.d=V}if(0>f-c.o.d)return!1}return!0},create_node:function(c,d,f,r,l,p){if(!p&&(l||this._is_loaded(c))){var V="string"==typeof d&&d.match(/^before|after$/i)&&-1!==c?this._get_parent(c):this._get_node(c),x=this._get_settings().types,I=this._check("max_children",
V),t=this._check("max_depth",V),P=this._check("valid_children",V);"string"===typeof f&&(f={data:f});f||(f={});if("none"===P)return!1;if(a.isArray(P))if(!f.attr||!f.attr[x.type_attr])f.attr||(f.attr={}),f.attr[x.type_attr]=P[0];else if(-1===a.inArray(f.attr[x.type_attr],P))return!1;if(-2!==x.max_children&&-1!==I&&(V=-1===V?this.get_container().find("> ul > li").length:V.find("> ul > li").length,V+1>I)||-2!==x.max_depth&&-1!==t&&0>t-1)return!1}return this.__call_old(!0,c,d,f,r,l,p)}}})})(jQuery);(function(a){a.jstree.plugin("html_data",
{__init:function(){this.data.html_data.original_container_html=this.get_container().find(" > ul > li").clone(!0);this.data.html_data.original_container_html.find("li").addBack().contents().filter(function(){return 3==this.nodeType}).remove()},defaults:{data:!1,ajax:!1,correct_state:!0},_fn:{load_node:function(a,d,f){var r=this;this.load_node_html(a,function(){r.__callback({obj:r._get_node(a)});d.call(this)},f)},_is_loaded:function(c){c=this._get_node(c);return-1==c||!c||!this._get_settings().html_data.ajax&&
!a.isFunction(this._get_settings().html_data.data)||c.is(".jstree-open, .jstree-leaf")||0<c.children("ul").children("li").size()},load_node_html:function(c,d,f){var r,l=this.get_settings().html_data,p=function(){};r=function(){};if((c=this._get_node(c))&&-1!==c){if(c.data("jstree_is_loading"))return;c.data("jstree_is_loading",!0)}switch(!0){case a.isFunction(l.data):l.data.call(this,c,a.proxy(function(f){f&&""!==f&&f.toString&&""!==f.toString().replace(/^[\s\n]+$/,"")?(f=a(f),f.is("ul")||(f=a("<ul />").append(f)),
-1==c||!c?this.get_container().children("ul").empty().append(f.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"):(c.children("a.jstree-loading").removeClass("jstree-loading"),c.append(f).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||
"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),c.removeData("jstree_is_loading")),this.clean_node(c),d&&d.call(this)):c&&-1!==c?(c.children("a.jstree-loading").removeClass("jstree-loading"),c.removeData("jstree_is_loading"),l.correct_state&&(this.correct_state(c),d&&d.call(this))):l.correct_state&&(this.get_container().children("ul").empty(),d&&d.call(this))},this));break;
case !l.data&&!l.ajax:if(!c||-1==c)this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node();d&&d.call(this);break;case !!l.data&&!l.ajax||!!l.data&&!!l.ajax&&(!c||-1===c):if(!c||-1==c)r=a(l.data),
r.is("ul")||(r=a("<ul />").append(r)),this.get_container().children("ul").empty().append(r.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node();d&&d.call(this);break;case !l.data&&!!l.ajax||!!l.data&&!!l.ajax&&c&&-1!==c:c=this._get_node(c),p=function(a,d,r){var p=this.get_settings().html_data.ajax.error;
p&&p.call(this,a,d,r);-1!=c&&c.length?(c.children("a.jstree-loading").removeClass("jstree-loading"),c.removeData("jstree_is_loading"),"success"===d&&l.correct_state&&this.correct_state(c)):"success"===d&&l.correct_state&&this.get_container().children("ul").empty();f&&f.call(this)},r=function(f,g,r){var t=this.get_settings().html_data.ajax.success;t&&(f=t.call(this,f,g,r)||f);if(""===f||f&&f.toString&&""===f.toString().replace(/^[\s\n]+$/,""))return p.call(this,r,g,"");f?(f=a(f),f.is("ul")||(f=a("<ul />").append(f)),
-1==c||!c?this.get_container().children("ul").empty().append(f.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"):(c.children("a.jstree-loading").removeClass("jstree-loading"),c.append(f).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||
"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),c.removeData("jstree_is_loading")),this.clean_node(c),d&&d.call(this)):c&&-1!==c?(c.children("a.jstree-loading").removeClass("jstree-loading"),c.removeData("jstree_is_loading"),l.correct_state&&(this.correct_state(c),d&&d.call(this))):l.correct_state&&(this.get_container().children("ul").empty(),d&&d.call(this))},l.ajax.context=
this,l.ajax.error=p,l.ajax.success=r,l.ajax.dataType||(l.ajax.dataType="html"),a.isFunction(l.ajax.url)&&(l.ajax.url=l.ajax.url.call(this,c)),a.isFunction(l.ajax.data)&&(l.ajax.data=l.ajax.data.call(this,c)),a.ajax(l.ajax)}}}});a.jstree.defaults.plugins.push("html_data")})(jQuery);(function(a){a.jstree.plugin("themeroller",{__init:function(){var c=this._get_settings().themeroller;this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a","mouseenter.jstree",function(d){a(d.currentTarget).hasClass("jstree-loading")||
a(this).addClass(c.item_h)}).delegate("a","mouseleave.jstree",function(){a(this).removeClass(c.item_h)}).bind("init.jstree",a.proxy(function(a,c){c.inst.get_container().find("> ul > li > .jstree-loading > ins").addClass("ui-icon-refresh");this._themeroller(c.inst.get_container().find("> ul > li"))},this)).bind("open_node.jstree create_node.jstree",a.proxy(function(a,c){this._themeroller(c.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",a.proxy(function(a){this._themeroller()},this)).bind("close_node.jstree",
a.proxy(function(a,c){this._themeroller(c.rslt.obj)},this)).bind("delete_node.jstree",a.proxy(function(a,c){this._themeroller(c.rslt.parent)},this)).bind("correct_state.jstree",a.proxy(function(a,f){f.rslt.obj.children("ins.jstree-icon").removeClass(c.opened+" "+c.closed+" ui-icon").end().find("> a > ins.ui-icon").filter(function(){return-1===this.className.toString().replace(c.item_clsd,"").replace(c.item_open,"").replace(c.item_leaf,"").indexOf("ui-icon-")}).removeClass(c.item_open+" "+c.item_clsd).addClass(c.item_leaf||
"jstree-no-icon")},this)).bind("select_node.jstree",a.proxy(function(a,f){f.rslt.obj.children("a").addClass(c.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",a.proxy(function(a,f){this.get_container().find("a."+c.item_a).removeClass(c.item_a).end().find("a.jstree-clicked").addClass(c.item_a)},this)).bind("dehover_node.jstree",a.proxy(function(a,f){f.rslt.obj.children("a").removeClass(c.item_h)},this)).bind("hover_node.jstree",a.proxy(function(a,f){this.get_container().find("a."+c.item_h).not(f.rslt.obj).removeClass(c.item_h);
f.rslt.obj.children("a").addClass(c.item_h)},this)).bind("move_node.jstree",a.proxy(function(a,c){this._themeroller(c.rslt.o);this._themeroller(c.rslt.op)},this))},__destroy:function(){var c=this._get_settings().themeroller,d=["ui-icon"];a.each(c,function(a,c){c=c.split(" ");c.length&&(d=d.concat(c))});this.get_container().removeClass("ui-widget-content").find("."+d.join(", .")).removeClass(d.join(" "))},_fn:{_themeroller:function(a){var d=this._get_settings().themeroller;a=!a||-1==a?this.get_container_ul():
this._get_node(a);a=!a||-1==a?this.get_container_ul():a.parent();a.find("li.jstree-closed").children("ins.jstree-icon").removeClass(d.opened).addClass("ui-icon "+d.closed).end().children("a").addClass(d.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(d.item_clsd,"").replace(d.item_open,"").replace(d.item_leaf,"").indexOf("ui-icon-")}).removeClass(d.item_leaf+" "+d.item_open).addClass(d.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(d.closed).addClass("ui-icon "+
d.opened).end().children("a").addClass(d.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(d.item_clsd,"").replace(d.item_open,"").replace(d.item_leaf,"").indexOf("ui-icon-")}).removeClass(d.item_leaf+" "+d.item_clsd).addClass(d.item_open||"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(d.closed+" ui-icon "+d.opened).end().children("a").addClass(d.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===
this.className.toString().replace(d.item_clsd,"").replace(d.item_open,"").replace(d.item_leaf,"").indexOf("ui-icon-")}).removeClass(d.item_clsd+" "+d.item_open).addClass(d.item_leaf||"jstree-no-icon")}},defaults:{opened:"ui-icon-triangle-1-se",closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_open:"ui-icon-folder-open",item_clsd:"ui-icon-folder-collapsed",item_leaf:"ui-icon-document"}});a(function(){a.vakata.css.add_sheet({str:".jstree-themeroller .ui-icon { overflow:visible; } .jstree-themeroller a { padding:0 2px; } .jstree-themeroller .jstree-no-icon { display:none; }",
title:"jstree"})})})(jQuery);(function(a){a.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",a.proxy(function(c,d){var f=[],l=!0,p;"move_node"==d.func&&(!0===d.args[4]&&d.args[0].o&&d.args[0].o.length)&&(d.args[0].o.children("a").each(function(){f.push(a(this).text().replace(/^\s+/g,""))}),l=this._check_unique(f,d.args[0].np.find("> ul > li").not(d.args[0].o),"move_node"));if("create_node"==d.func&&(d.args[4]||this._is_loaded(d.args[0]))){l=this._get_node(d.args[0]);
if(d.args[1]&&("before"===d.args[1]||"after"===d.args[1]))if(l=this._get_parent(d.args[0]),!l||-1===l)l=this.get_container();"string"===typeof d.args[2]?f.push(d.args[2]):!d.args[2]||!d.args[2].data?f.push(this._get_string("new_node")):f.push(d.args[2].data);l=this._check_unique(f,l.find("> ul > li"),"create_node")}if("rename_node"==d.func){f.push(d.args[1]);p=this._get_node(d.args[0]);l=this._get_parent(p);if(!l||-1===l)l=this.get_container();l=this._check_unique(f,l.find("> ul > li").not(p),"rename_node")}if(!l)return c.stopPropagation(),
!1},this))},defaults:{error_callback:a.noop},_fn:{_check_unique:function(c,d,f){var l=[],p=!0;d.children("a").each(function(){l.push(a(this).text().replace(/^\s+/g,""))});if(!l.length||!c.length)return!0;a.each(c,function(c,d){if(-1!==a.inArray(d,l))return p=!1});p||this._get_settings().unique.error_callback.call(null,c,d,f);return p},check_move:function(){if(!this.__call_old())return!1;var c=this._get_move(),d=[];return c.o&&c.o.length?(c.o.children("a").each(function(){d.push(a(this).text().replace(/^\s+/g,
""))}),this._check_unique(d,c.np.find("> ul > li").not(c.o),"check_move")):!0}}})})(jQuery);(function(a){a.jstree.plugin("wholerow",{__init:function(){if(!this.data.ui)throw"jsTree wholerow: jsTree UI plugin not included.";this.data.wholerow.html=!1;this.data.wholerow.to=!1;this.get_container().bind("init.jstree",a.proxy(function(a,d){this._get_settings().core.animation=0},this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",a.proxy(function(a,d){this._prepare_wholerow_span(d&&
d.rslt&&d.rslt.obj?d.rslt.obj:-1)},this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",a.proxy(function(a,d){this.data.to&&clearTimeout(this.data.to);this.data.to=setTimeout(function(a,c){return function(){a._prepare_wholerow_ul(c)}}(this,d&&d.rslt&&d.rslt.obj?d.rslt.obj:-1),0)},this)).bind("deselect_all.jstree",a.proxy(function(a,d){this.get_container().find(" > .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+
(this.data.themeroller?this._get_settings().themeroller.item_a:""))},this)).bind("select_node.jstree deselect_node.jstree ",a.proxy(function(c,d){d.rslt.obj.each(function(){d.inst.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((a(this).offset().top-d.inst.get_container().offset().top+d.inst.get_container()[0].scrollTop)/d.inst.data.core.li_height,10)+")").children("a").attr("class",d.rslt.obj.children("a").attr("class"))})},this)).bind("hover_node.jstree dehover_node.jstree",a.proxy(function(a,
d){this.get_container().find(" > .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+(this.data.themeroller?this._get_settings().themeroller.item_h:""));"hover_node"===a.type&&this.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((d.rslt.obj.offset().top-this.get_container().offset().top+this.get_container()[0].scrollTop)/this.data.core.li_height,10)+")").children("a").attr("class",d.rslt.obj.children(".jstree-hovered").attr("class"))},this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li",
"click.jstree",function(c){var d=a(c.currentTarget);"A"===c.target.tagName||"INS"===c.target.tagName&&d.closest("li").is(".jstree-open, .jstree-closed")||(d.closest("li").children("a:visible:eq(0)").click(),c.stopImmediatePropagation())}).delegate("li","mouseover.jstree",a.proxy(function(c){c.stopImmediatePropagation();if(a(c.currentTarget).children(".jstree-hovered, .jstree-clicked").length)return!1;this.hover_node(c.currentTarget);return!1},this)).delegate("li","mouseleave.jstree",a.proxy(function(c){a(c.currentTarget).children("a").hasClass("jstree-hovered").length||
this.dehover_node(c.currentTarget)},this));(l||f)&&a.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove();this.get_container().find(".jstree-wholerow-span").remove()},_fn:{_prepare_wholerow_span:function(c){c=!c||-1==c?this.get_container().find("> ul > li"):this._get_node(c);!1!==c&&c.each(function(){a(this).find("li").addBack().each(function(){var c=a(this);if(c.children(".jstree-wholerow-span").length)return!0;
c.prepend("<span class='jstree-wholerow-span' style='width:"+18*c.parentsUntil(".jstree","li").length+"px;'>&#160;</span>")})})},_prepare_wholerow_ul:function(){var a=this.get_container().children("ul").eq(0),d=a.html();a.addClass("jstree-wholerow-real");this.data.wholerow.last_html!==d&&(this.data.wholerow.last_html=d,this.get_container().children(".jstree-wholerow").remove(),this.get_container().append(a.clone().removeClass("jstree-wholerow-real").wrapAll("<div class='jstree-wholerow' />").parent().width(a.parent()[0].scrollWidth).css("top",
-1*(a.height()+(l?5:0))).find("li[id]").each(function(){this.removeAttribute("id")}).end()))}}});a(function(){var c=".jstree .jstree-wholerow-real { position:relative; z-index:1; } .jstree .jstree-wholerow-real li { cursor:pointer; } .jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } .jstree .jstree-wholerow { position:relative; z-index:0; height:0; } .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }.jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }.jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px; !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } .jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";
p&&(c+=".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } .jstree .jstree-wholerow-real a { border-color:transparent !important; } ");if(l||f)c+=".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } .jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } ";a.vakata.css.add_sheet({str:c,title:"jstree"})})})(jQuery);(function(a){var c=
["getChildren","getChildrenCount","getAttr","getName","getProps"],d=function(c,d){var f=!0;c=c||{};d=[].concat(d);a.each(d,function(d,l){if(!a.isFunction(c[l]))return f=!1});return f};a.jstree.plugin("model",{__init:function(){if(!this.data.json_data)throw"jsTree model: jsTree json_data plugin not included.";this._get_settings().json_data.data=function(f,l){var p=-1==f?this._get_settings().model.object:f.data("jstree_model");if(!d(p,c))return l.call(null,!1);this._get_settings().model.async?p.getChildren(a.proxy(function(a){this.model_done(a,
l)},this)):this.model_done(p.getChildren(),l)}},defaults:{object:!1,id_prefix:!1,async:!1},_fn:{model_done:function(c,d){var f=[],l=this._get_settings(),p=this;a.isArray(c)||(c=[c]);a.each(c,function(c,d){var g=d.getProps()||{};g.attr=d.getAttr()||{};d.getChildrenCount()&&(g.state="closed");g.data=d.getName();a.isArray(g.data)||(g.data=[g.data]);p.data.types&&a.isFunction(d.getType)&&(g.attr[l.types.type_attr]=d.getType());g.attr.id&&l.model.id_prefix&&(g.attr.id=l.model.id_prefix+g.attr.id);g.metadata||
(g.metadata={});g.metadata.jstree_model=d;f.push(g)});d.call(null,f)}}})})(jQuery)}})();
(function(f){f.color={};f.color.make=function(l,a,c,d){var g={};g.r=l||0;g.g=a||0;g.b=c||0;g.a=null!=d?d:1;g.add=function(a,c){for(var d=0;d<a.length;++d)g[a.charAt(d)]+=c;return g.normalize()};g.scale=function(a,c){for(var d=0;d<a.length;++d)g[a.charAt(d)]*=c;return g.normalize()};g.toString=function(){return 1<=g.a?"rgb("+[g.r,g.g,g.b].join()+")":"rgba("+[g.r,g.g,g.b,g.a].join()+")"};g.normalize=function(){function a(c,d,f){return d<c?c:d>f?f:d}g.r=a(0,parseInt(g.r),255);g.g=a(0,parseInt(g.g),255);
g.b=a(0,parseInt(g.b),255);g.a=a(0,g.a,1);return g};g.clone=function(){return f.color.make(g.r,g.b,g.g,g.a)};return g.normalize()};f.color.extract=function(l,a){var c;do{c=l.css(a).toLowerCase();if(""!=c&&"transparent"!=c)break;l=l.parent()}while(!f.nodeName(l.get(0),"body"));"rgba(0, 0, 0, 0)"==c&&(c="transparent");return f.color.parse(c)};f.color.parse=function(p){var a,c=f.color.make;if(a=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(p))return c(parseInt(a[1],10),parseInt(a[2],
10),parseInt(a[3],10));if(a=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(p))return c(parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10),parseFloat(a[4]));if(a=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(p))return c(2.55*parseFloat(a[1]),2.55*parseFloat(a[2]),2.55*parseFloat(a[3]));if(a=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(p))return c(2.55*
parseFloat(a[1]),2.55*parseFloat(a[2]),2.55*parseFloat(a[3]),parseFloat(a[4]));if(a=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(p))return c(parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16));if(a=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(p))return c(parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16));p=f.trim(p).toLowerCase();if("transparent"==p)return c(255,255,255,0);a=l[p]||[0,0,0];return c(a[0],a[1],a[2])};var l={aqua:[0,255,255],azure:[240,255,255],beige:[245,
245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,
144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);
(function(f,l,p){var a=l.event,c;a.special.smartresize={setup:function(){l(this).bind("resize",a.special.smartresize.handler)},teardown:function(){l(this).unbind("resize",a.special.smartresize.handler)},handler:function(a,d){var f=this,g=arguments;a.type="smartresize";c&&clearTimeout(c);c=setTimeout(function(){jQuery.event.handle.apply(f,g)},"execAsap"===d?0:100)}};l.fn.smartresize=function(a){return a?this.bind("smartresize",a):this.trigger("smartresize",["execAsap"])};l.Mason=function(a,c){this.element=
l(c);this._create(a);this._init()};var d=["position","height"];l.Mason.settings={isResizable:!0,isAnimated:!1,animationOptions:{queue:!1,duration:500},gutterWidth:0,isRTL:!1,isFitWidth:!1};l.Mason.prototype={_filterFindBricks:function(a){var c=this.options.itemSelector;return c?a.filter(c).add(a.find(c)):a},_getBricks:function(a){return this._filterFindBricks(a).css({position:"absolute"}).addClass("masonry-brick")},_create:function(a){this.options=l.extend(!0,{},l.Mason.settings,a);this.styleQueue=
[];this.reloadItems();a=this.element[0].style;this.originalStyle={};for(var c=0,g=d.length;c<g;c++){var p=d[c];this.originalStyle[p]=a[p]||""}this.element.css({position:"relative"});this.horizontalDirection=this.options.isRTL?"right":"left";this.offset={};a=l(document.createElement("div"));this.element.prepend(a);this.offset.y=Math.round(a.position().top);this.options.isRTL?(a.css({"float":"right",display:"inline-block"}),this.offset.x=Math.round(this.element.outerWidth()-a.position().left)):this.offset.x=
Math.round(a.position().left);a.remove();var x=this;setTimeout(function(){x.element.addClass("masonry")},0);this.options.isResizable&&l(f).bind("smartresize.masonry",function(){x.resize()})},_init:function(a){this._getColumns("masonry");this._reLayout(a)},option:function(a,c){l.isPlainObject(a)&&(this.options=l.extend(!0,this.options,a))},layout:function(a,c){for(var d,f,g,p,t,P,Q=0,Y=a.length;Q<Y;Q++)if(d=l(a[Q]),f=Math.ceil(d.outerWidth(!0)/this.columnWidth),f=Math.min(f,this.cols),1===f)this._placeBrick(d,
this.colYs);else{g=this.cols+1-f;p=[];for(P=0;P<g;P++)t=this.colYs.slice(P,P+f),p[P]=Math.max.apply(Math,t);this._placeBrick(d,p)}Y={};Y.height=Math.max.apply(Math,this.colYs)-this.offset.y;if(this.options.isFitWidth){d=0;for(Q=this.cols;--Q&&this.colYs[Q]===this.offset.y;)d++;Y.width=(this.cols-d)*this.columnWidth-this.options.gutterWidth}this.styleQueue.push({$el:this.element,style:Y});d=this.isLaidOut?this.options.isAnimated?"animate":"css":"css";f=this.options.animationOptions;Q=0;for(Y=this.styleQueue.length;Q<
Y;Q++)g=this.styleQueue[Q],g.$el[d](g.style,f);this.styleQueue=[];c&&c.call(a);this.isLaidOut=!0},_getColumns:function(){var a=(this.options.isFitWidth?this.element.parent():this.element).width();this.columnWidth=this.options.columnWidth||this.$bricks.outerWidth(!0)||a;this.columnWidth+=this.options.gutterWidth;this.cols=Math.floor((a+this.options.gutterWidth)/this.columnWidth);this.cols=Math.max(this.cols,1)},_placeBrick:function(a,c){for(var d=Math.min.apply(Math,c),f=0,g=0,l=c.length;g<l;g++)if(c[g]===
d){f=g;break}g={top:d};g[this.horizontalDirection]=this.columnWidth*f+this.offset.x;this.styleQueue.push({$el:a,style:g});d+=a.outerHeight(!0);l=this.cols+1-l;for(g=0;g<l;g++)this.colYs[f+g]=d},resize:function(){var a=this.cols;this._getColumns("masonry");this.cols!==a&&this._reLayout()},_reLayout:function(a){var c=this.cols;for(this.colYs=[];c--;)this.colYs.push(this.offset.y);this.layout(this.$bricks,a)},reloadItems:function(){this.$bricks=this._getBricks(this.element.children())},reload:function(a){this.reloadItems();
this._init(a)},appended:function(a,c,d){if(c){this._filterFindBricks(a).css({top:this.element.height()});var f=this;setTimeout(function(){f._appended(a,d)},1)}else this._appended(a,d)},_appended:function(a,c){var d=this._getBricks(a);this.$bricks=this.$bricks.add(d);this.layout(d,c)},remove:function(a){this.$bricks=this.$bricks.not(a);a.remove()},destroy:function(){this.$bricks.removeClass("masonry-brick").each(function(){this.style.position="";this.style.top="";this.style.left=""});for(var a=this.element[0].style,
c=0,g=d.length;c<g;c++){var p=d[c];a[p]=this.originalStyle[p]}this.element.unbind(".masonry").removeClass("masonry").removeData("masonry");l(f).unbind(".masonry")}};l.fn.imagesLoaded=function(a){function c(){0>=--l&&this.src!==t&&(setTimeout(d),g.unbind("load error",c))}function d(){a.call(f,g)}var f=this,g=f.find("img").add(f.filter("img")),l=g.length,t="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";l||d();g.bind("load error",c).each(function(){if(this.complete||this.complete===
p){var a=this.src;this.src=t;this.src=a}});return f};var g=function(a){this.console&&console.error(a)};l.fn.masonry=function(a){if("string"==typeof a){var c=Array.prototype.slice.call(arguments,1);this.each(function(){var d=l.data(this,"masonry");d?!l.isFunction(d[a])||"_"===a.charAt(0)?g("no such method '"+a+"' for masonry instance"):d[a].apply(d,c):g("cannot call methods on masonry prior to initialization; attempted to call method '"+a+"'")})}else this.each(function(){var c=l.data(this,"masonry");
c?(c.option(a||{}),c._init()):l.data(this,"masonry",new l.Mason(a,this))});return this}})(window,jQuery);
jQuery.cookie=function(f,l,p){if(1<arguments.length&&"[object Object]"!==String(l)){p=jQuery.extend({},p);if(null===l||void 0===l)p.expires=-1;if("number"===typeof p.expires){var a=p.expires,c=p.expires=new Date;c.setDate(c.getDate()+a)}l=String(l);return document.cookie=[encodeURIComponent(f),"=",p.raw?l:encodeURIComponent(l),p.expires?"; expires="+p.expires.toUTCString():"",p.path?"; path="+p.path:"",p.domain?"; domain="+p.domain:"",p.secure?"; secure":""].join("")}p=l||{};c=p.raw?function(a){return a}:
decodeURIComponent;return(a=RegExp("(?:^|; )"+encodeURIComponent(f)+"=([^;]*)").exec(document.cookie))?c(a[1]):null};
d3=function(){function f(e){return null!=e&&!isNaN(e)}function l(e){return e.length}function p(e,u){try{for(var a in u)Object.defineProperty(e.prototype,a,{value:u[a],enumerable:!1})}catch(c){e.prototype=u}}function a(){}function c(){}function d(e,u,a){return function(){var c=a.apply(u,arguments);return c===u?e:c}}function g(){}function r(e){function u(){for(var u,a=m,c=-1,L=a.length;++c<L;)(u=a[c].on)&&u.apply(this,arguments);return e}var m=[],c=new a;return u.on=function(u,a){var d,s=c.get(u);return 2>
arguments.length?s&&s.on:(s&&(s.on=null,m=m.slice(0,d=m.indexOf(s)).concat(m.slice(d+1)),c.remove(u)),a&&m.push(c.set(u,{on:a})),e)},u}function y(){n.event.stopPropagation();n.event.preventDefault()}function T(){for(var e,u=n.event;e=u.sourceEvent;)u=e;return u}function V(e,u){function a(){e.on(u,null)}e.on(u,function(){y();a()},!0);setTimeout(a,0)}function x(e){for(var u=new g,a=0,c=arguments.length;++a<c;)u[arguments[a]]=r(u);return u.of=function(a,m){return function(c){try{var L=c.sourceEvent=
n.event;c.target=e;n.event=c;u[c.type].apply(a,m)}finally{n.event=L}}},u}function I(e,u){var a=e.ownerSVGElement||e;if(a.createSVGPoint){var c=a.createSVGPoint();if(0>Rb&&(ha.scrollX||ha.scrollY)){var a=n.select(la.body).append("svg").style("position","absolute").style("top",0).style("left",0),v=a[0][0].getScreenCTM();Rb=!(v.f||v.e);a.remove()}return Rb?(c.x=u.pageX,c.y=u.pageY):(c.x=u.clientX,c.y=u.clientY),c=c.matrixTransform(e.getScreenCTM().inverse()),[c.x,c.y]}a=e.getBoundingClientRect();return[u.clientX-
a.left-e.clientLeft,u.clientY-a.top-e.clientTop]}function t(e){for(var u=-1,a=e.length,c=[];++u<a;)c.push(e[u]);return c}function P(e){return Sb(e,S),e}function Q(e){return function(){return bd(e,this)}}function Y(e){return function(){return cd(e,this)}}function Va(e,u){function a(){this.removeAttribute(e)}function c(){this.removeAttributeNS(e.space,e.local)}function v(){this.setAttribute(e,u)}function q(){this.setAttributeNS(e.space,e.local,u)}function d(){var a=u.apply(this,arguments);null==a?this.removeAttribute(e):
this.setAttribute(e,a)}function s(){var a=u.apply(this,arguments);null==a?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,a)}return e=n.ns.qualify(e),null==u?e.local?c:a:"function"==typeof u?e.local?s:d:e.local?q:v}function Ka(e){return e.trim().replace(/\s+/g," ")}function $c(e){return RegExp("(?:^|\\s+)"+n.requote(e)+"(?:\\s+|$)","g")}function ad(e,u){function a(){for(var m=-1;++m<v;)e[m](this,u)}function c(){for(var a=-1,m=u.apply(this,arguments);++a<v;)e[a](this,m)}
e=e.trim().split(/\s+/).map(tf);var v=e.length;return"function"==typeof u?c:a}function tf(e){var u=$c(e);return function(a,c){if(v=a.classList)return c?v.add(e):v.remove(e);var v=a.getAttribute("class")||"";c?(u.lastIndex=0,u.test(v)||a.setAttribute("class",Ka(v+" "+e))):a.setAttribute("class",Ka(v.replace(u," ")))}}function dd(e,u,a){function c(){this.style.removeProperty(e)}function v(){this.style.setProperty(e,u,a)}function q(){var c=u.apply(this,arguments);null==c?this.style.removeProperty(e):
this.style.setProperty(e,c,a)}return null==u?c:"function"==typeof u?q:v}function ed(e,u){function a(){delete this[e]}function c(){this[e]=u}function v(){var a=u.apply(this,arguments);null==a?delete this[e]:this[e]=a}return null==u?a:"function"==typeof u?v:c}function fd(e){return function(){return gd(this,e)}}function uf(e){return arguments.length||(e=n.ascending),function(a,m){return!a-!m||e(a.__data__,m.__data__)}}function da(){}function hd(e,a,m){function c(){var a=this[d];a&&(this.removeEventListener(e,
a,a.$),delete this[d])}function v(){var v=J(a,za(arguments));c.call(this);this.addEventListener(e,this[d]=v,v.$=m);v._=a}function q(){var a,u=RegExp("^__on([^.]+)"+n.requote(e)+"$"),m;for(m in this)if(a=m.match(u)){var c=this[m];this.removeEventListener(a[1],c,c.$);delete this[m]}}var d="__on"+e,s=e.indexOf("."),J=id;0<s&&(e=e.substring(0,s));var f=Tb.get(e);return f&&(e=f,J=vf),s?a?v:c:a?da:q}function id(e,a){return function(m){var c=n.event;n.event=m;a[0]=this.__data__;try{e.apply(this,a)}finally{n.event=
c}}}function vf(e,a){var m=id(e,a);return function(e){var a=e.relatedTarget;a&&(a===this||a.compareDocumentPosition(this)&8)||m.call(this,e)}}function Aa(e,a){for(var m=0,c=e.length;c>m;m++)for(var v,q=e[m],d=0,s=q.length;s>d;d++)(v=q[d])&&a(v,d,m);return e}function kd(e){return Sb(e,Fa),e}function La(){}function Ma(e,a,m){return new Ub(e,a,m)}function Ub(e,a,m){this.h=e;this.s=a;this.l=m}function fb(e,a,m){function c(e){return 360<e?e-=360:0>e&&(e+=360),60>e?v+(q-v)*e/60:180>e?q:240>e?v+(q-v)*(240-
e)/60:v}var v,q;return e%=360,0>e&&(e+=360),a=0>a?0:1<a?1:a,m=0>m?0:1<m?1:m,q=0.5>=m?m*(1+a):m+a-m*a,v=2*m-q,ua(Math.round(255*c(e+120)),Math.round(255*c(e)),Math.round(255*c(e-120)))}function ld(e){return(e=Math.sin(e/2))*e}function Na(e,a,m){return new gb(e,a,m)}function gb(e,a,m){this.h=e;this.c=a;this.l=m}function Vb(e,a,m){return Oa(m,Math.cos(e*=K)*a,Math.sin(e)*a)}function Oa(e,a,m){return new hb(e,a,m)}function hb(e,a,m){this.l=e;this.a=a;this.b=m}function md(e,a,m){e=(e+16)/116;a=e+a/500;
m=e-m/200;return a=Wb(a)*nd,e=Wb(e)*od,m=Wb(m)*pd,ua(Xb(3.2404542*a-1.5371385*e-0.4985314*m),Xb(-0.969266*a+1.8760108*e+0.041556*m),Xb(0.0556434*a-0.2040259*e+1.0572252*m))}function Wb(e){return 0.206893034<e?e*e*e:(e-4/29)/7.787037}function Yb(e){return 0.008856<e?Math.pow(e,1/3):7.787037*e+4/29}function Xb(e){return Math.round(255*(0.00304>=e?12.92*e:1.055*Math.pow(e,1/2.4)-0.055))}function ua(e,a,m){return new Zb(e,a,m)}function Zb(e,a,m){this.r=e;this.g=a;this.b=m}function Pa(e){return 16>e?"0"+
Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function $b(e,a,m){var c,v,q,d=0,s=0,J=0;if(c=/([a-z]+)\((.*)\)/i.exec(e))switch(v=c[2].split(","),c[1]){case "hsl":return m(parseFloat(v[0]),parseFloat(v[1])/100,parseFloat(v[2])/100);case "rgb":return a(ac(v[0]),ac(v[1]),ac(v[2]))}return(q=ib.get(e))?a(q.r,q.g,q.b):(null!=e&&"#"===e.charAt(0)&&(4===e.length?(d=e.charAt(1),d+=d,s=e.charAt(2),s+=s,J=e.charAt(3),J+=J):7===e.length&&(d=e.substring(1,3),s=e.substring(3,5),J=e.substring(5,7)),d=
parseInt(d,16),s=parseInt(s,16),J=parseInt(J,16)),a(d,s,J))}function qd(e,a,m){var c,v,q=Math.min(e/=255,a/=255,m/=255),d=Math.max(e,a,m),s=d-q,J=(d+q)/2;return s?(v=0.5>J?s/(d+q):s/(2-d-q),c=e==d?(a-m)/s+(m>a?6:0):a==d?(m-e)/s+2:(e-a)/s+4,c*=60):v=c=0,Ma(c,v,J)}function rd(e,a,m){e=bc(e);a=bc(a);m=bc(m);var c=Yb((0.4124564*e+0.3575761*a+0.1804375*m)/nd),v=Yb((0.2126729*e+0.7151522*a+0.072175*m)/od);e=Yb((0.0193339*e+0.119192*a+0.9503041*m)/pd);return Oa(116*v-16,500*(c-v),200*(v-e))}function bc(e){return 0.04045>=
(e/=255)?e/12.92:Math.pow((e+0.055)/1.055,2.4)}function ac(e){var a=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*a):a}function N(e){return"function"==typeof e?e:function(){return e}}function na(e){return e}function wf(e){return 1===e.length?function(a,m){e(null==a?m:null)}:e}function sd(e,a){function m(e,m,c){3>arguments.length&&(c=m,m=null);var q=n.xhr(e,a,c);return q.row=function(e){return arguments.length?q.response(null==(m=e)?L:v(e)):m},q.row(m)}function L(e){return m.parse(e.responseText)}
function v(e){return function(a){return m.parse(a.responseText,e)}}function q(a){return a.map(d).join(e)}function d(e){return s.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var s=RegExp('["'+e+"\n]"),J=e.charCodeAt(0);return m.parse=function(e,a){var u;return m.parseRows(e,function(e,m){if(u)return u(e,m-1);var c=Function("d","return {"+e.map(function(e,a){return JSON.stringify(e)+": d["+a+"]"}).join(",")+"}");u=a?function(e,u){return a(c(e),u)}:c})},m.parseRows=function(e,a){function u(){if(s>=d)return L;
if(c)return c=!1,v;var a=s;if(34===e.charCodeAt(a)){for(var m=a;m++<d;)if(34===e.charCodeAt(m)){if(34!==e.charCodeAt(m+1))break;++m}s=m+2;var q=e.charCodeAt(m+1);return 13===q?(c=!0,10===e.charCodeAt(m+2)&&++s):10===q&&(c=!0),e.substring(a+1,m).replace(/""/g,'"')}for(;d>s;){q=e.charCodeAt(s++);m=1;if(10===q)c=!0;else if(13===q)c=!0,10===e.charCodeAt(s)&&(++s,++m);else if(q!==J)continue;return e.substring(a,s-m)}return e.substring(a)}for(var m,c,v={},L={},q=[],d=e.length,s=0,U=0;(m=u())!==L;){for(var f=
[];m!==v&&m!==L;)f.push(m),m=u();(!a||(f=a(f,U++)))&&q.push(f)}return q},m.format=function(a){if(Array.isArray(a[0]))return m.formatRows(a);var u=new c,v=[];return a.forEach(function(e){for(var a in e)u.has(a)||v.push(u.add(a))}),[v.map(d).join(e)].concat(a.map(function(a){return v.map(function(e){return d(a[e])}).join(e)})).join("\n")},m.formatRows=function(e){return e.map(q).join("\n")},m}function cc(){for(var e,a=Date.now(),m=Qa;m;)e=a-m.then,e>=m.delay&&(m.flush=m.callback(e)),m=m.next;e=td()-
a;24<e?(isFinite(e)&&(clearTimeout(jb),jb=setTimeout(cc,e)),kb=0):(kb=1,ud(cc))}function td(){for(var e=null,a=Qa,m=1/0;a;)a.flush?(delete dc[a.callback.id],a=e?e.next=a.next:Qa=a.next):(m=Math.min(m,a.then+a.delay),a=(e=a).next);return m}function ec(e,a){return a-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function xf(e){return e+""}function lb(e,a){e&&vd.hasOwnProperty(e.type)&&vd[e.type](e,a)}function fc(e,a,m){var c=-1,v=e.length-m;for(a.lineStart();++c<v;)m=e[c],a.point(m[0],m[1]);a.lineEnd()}function wd(e,
a){var m=-1,c=e.length;for(a.polygonStart();++m<c;)fc(e[m],a,1);a.polygonEnd()}function yf(){function e(e,a){e*=K;a=a*K/2+C/4;var u=e-c,m=Math.cos(a),d=Math.sin(a),f=q*d,g=mb,l=nb,n=v*m+f*Math.cos(u),u=f*Math.sin(u);mb=g*n-l*u;nb=l*n+g*u;c=e;v=m;q=d}var a,m,c,v,q;Ba.point=function(d,s){Ba.point=e;c=(a=d)*K;v=Math.cos(s=(m=s)*K/2+C/4);q=Math.sin(s)};Ba.lineEnd=function(){e(a,m)}}function xd(e){function a(e,u){c>e&&(c=e);e>q&&(q=e);v>u&&(v=u);u>d&&(d=u)}function m(){s.point=s.lineEnd=da}var c,v,q,d,
s={point:a,lineStart:da,lineEnd:da,polygonStart:function(){s.lineEnd=m},polygonEnd:function(){s.point=a}};return function(a){return d=q=-(c=v=1/0),n.geo.stream(a,e(s)),[[c,v],[q,d]]}}function yd(e,a){if(!ga){++pa;e*=K;var m=Math.cos(a*=K);ba+=(m*Math.cos(e)-ba)/pa;ca+=(m*Math.sin(e)-ca)/pa;aa+=(Math.sin(a)-aa)/pa}}function zf(){var e,a;ga=1;gc();ga=2;var m=qa.point;qa.point=function(c,v){m(e=c,a=v)};qa.lineEnd=function(){qa.point(e,a);hc();qa.lineEnd=hc}}function gc(){function e(e,q){e*=K;var d=Math.cos(q*=
K),s=d*Math.cos(e),d=d*Math.sin(e),J=Math.sin(q),f=Math.atan2(Math.sqrt((f=m*J-c*d)*f+(f=c*s-a*J)*f+(f=a*d-m*s)*f),a*s+m*d+c*J);pa+=f;ba+=f*(a+(a=s));ca+=f*(m+(m=d));aa+=f*(c+(c=J))}var a,m,c;1<ga||(1>ga&&(ga=1,pa=ba=ca=aa=0),qa.point=function(v,q){v*=K;var d=Math.cos(q*=K);a=d*Math.cos(v);m=d*Math.sin(v);c=Math.sin(q);qa.point=e})}function hc(){qa.point=yd}function ob(e){var a=e[0];e=e[1];var m=Math.cos(e);return[m*Math.cos(a),m*Math.sin(a),Math.sin(e)]}function pb(e,a){return e[0]*a[0]+e[1]*a[1]+
e[2]*a[2]}function zd(e,a){return[e[1]*a[2]-e[2]*a[1],e[2]*a[0]-e[0]*a[2],e[0]*a[1]-e[1]*a[0]]}function ic(e,a){e[0]+=a[0];e[1]+=a[1];e[2]+=a[2]}function qb(e,a){return[e[0]*a,e[1]*a,e[2]*a]}function Wa(){return!0}function jc(e){return[Math.atan2(e[1],e[0]),Math.asin(Math.max(-1,Math.min(1,e[2])))]}function rb(e,a){return Math.abs(e[0]-a[0])<M&&Math.abs(e[1]-a[1])<M}function Ad(e,a,m,c,v){var q=[],d=[];if(e.forEach(function(e){if(!(0>=(a=e.length-1))){var a,u=e[0],m=e[a];if(rb(u,m)){v.lineStart();
for(m=0;a>m;++m)v.point((u=e[m])[0],u[1]);return v.lineEnd(),void 0}e={point:u,points:e,other:null,visited:!1,entry:!0,subject:!0};u={point:u,points:[u],other:e,visited:!1,entry:!1,subject:!1};e.other=u;q.push(e);d.push(u);e={point:m,points:[m],other:null,visited:!1,entry:!1,subject:!0};u={point:m,points:[m],other:e,visited:!1,entry:!0,subject:!1};e.other=u;q.push(e);d.push(u)}}),d.sort(a),Bd(q),Bd(d),q.length){if(m){e=1;m=!m(d[0].point);for(a=d.length;a>e;++e)d[e].entry=m=!m}for(var s,f=q[0];;){for(m=
f;m.visited;)if((m=m.next)===f)return;a=m.points;v.lineStart();do{if(m.visited=m.other.visited=!0,m.entry){if(m.subject)for(e=0;e<a.length;e++)v.point((s=a[e])[0],s[1]);else c(m.point,m.next.point,1,v);m=m.next}else{if(m.subject){a=m.prev.points;for(e=a.length;0<=--e;)v.point((s=a[e])[0],s[1])}else c(m.point,m.prev.point,-1,v);m=m.prev}m=m.other;a=m.points}while(!m.visited);v.lineEnd()}}}function Bd(e){if(a=e.length){for(var a,m,c=0,v=e[0];++c<a;)v.next=m=e[c],m.prev=v,v=m;v.next=m=e[0];m.prev=v}}
function Cd(e,a,m){return function(c){function v(a,u){e(a,u)&&c.point(a,u)}function d(e,a){B.point(e,a)}function f(){A.point=d;B.lineStart()}function s(){A.point=v;B.lineEnd()}function J(e,a){O.point(e,a);z.push([e,a])}function g(){O.lineStart();z=[]}function l(){J(z[0][0],z[0][1]);O.lineEnd();var e;e=O.clean();var a=H.buffer(),u=a.length;if(!u)return D=!0,p+=Dd(z,-1),z=null,void 0;if(z=null,1&e){e=a[0];E+=Dd(e,1);var m,u=e.length-1,a=-1;for(c.lineStart();++a<u;)c.point((m=e[a])[0],m[1]);return c.lineEnd(),
void 0}1<u&&2&e&&a.push(a.pop().concat(a.shift()));r.push(a.filter(Af))}var r,E,p,D,z,B=a(c),A={point:v,lineStart:f,lineEnd:s,polygonStart:function(){A.point=J;A.lineStart=g;A.lineEnd=l;D=!1;p=E=0;r=[];c.polygonStart()},polygonEnd:function(){A.point=v;A.lineStart=f;A.lineEnd=s;r=n.merge(r);r.length?Ad(r,Bf,null,m,c):(-M>E||D&&-M>p)&&(c.lineStart(),m(null,null,1,c),c.lineEnd());c.polygonEnd();r=null},sphere:function(){c.polygonStart();c.lineStart();m(null,null,1,c);c.lineEnd();c.polygonEnd()}},H=Ed(),
O=a(H);return A}}function Af(e){return 1<e.length}function Ed(){var e,a=[];return{lineStart:function(){a.push(e=[])},point:function(a,u){e.push([a,u])},lineEnd:da,buffer:function(){var m=a;return a=[],e=null,m},rejoin:function(){1<a.length&&a.push(a.pop().concat(a.shift()))}}}function Dd(e,a){if(!(m=e.length))return 0;var m,c,v,d=0,f=0;c=e[0];v=c[0];for(var s=c[1],J=Math.cos(s),g=Math.atan2(a*Math.sin(v)*J,Math.sin(s)),l=1-a*Math.cos(v)*J,n=g;++d<m;)c=e[d],J=Math.cos(s=c[1]),c=Math.atan2(a*Math.sin(v=
c[0])*J,Math.sin(s)),v=1-a*Math.cos(v)*J,Math.abs(l-2)<M&&Math.abs(v-2)<M||(Math.abs(v)<M||Math.abs(l)<M||(Math.abs(Math.abs(c-g)-C)<M?2<v+l&&(f+=4*(c-g)):f+=Math.abs(l-2)<M?4*(c-n):((3*C+c-g)%(2*C)-C)*(l+v)),n=g,g=c,l=v);return f}function Bf(e,a){return(0>(e=e.point)[0]?e[1]-C/2-M:C/2-e[1])-(0>(a=a.point)[0]?a[1]-C/2-M:C/2-a[1])}function Cf(e){function a(e,u){return Math.cos(e)*Math.cos(u)>v}function m(e,a,u){var m=ob(e),c=ob(a),d=[1,0,0],c=zd(m,c),L=pb(c,c),m=c[0],q=L-m*m;if(!q)return!u&&e;L=v*
L/q;q=-v*m/q;m=zd(d,c);d=qb(d,L);c=qb(c,q);ic(d,c);c=pb(d,m);L=pb(m,m);q=c*c-L*(pb(d,d)-1);if(!(0>q)){var s=Math.sqrt(q),q=qb(m,(-c-s)/L);if(ic(q,d),q=jc(q),!u)return q;var f;u=e[0];var U=a[0];e=e[1];a=a[1];u>U&&(f=u,u=U,U=f);var g=U-u,l=Math.abs(g-C)<M,n=l||M>g;if(!l&&e>a&&(f=e,e=a,a=f),n?l?0<e+a^q[1]<(Math.abs(q[0]-u)<M?e:a):e<=q[1]&&q[1]<=a:g>C^(u<=q[0]&&q[0]<=U))return f=qb(m,(-c+s)/L),ic(f,d),[q,jc(f)]}}function c(a,u){var m=d?e:C-e,v=0;return-m>a?v|=1:a>m&&(v|=2),-m>u?v|=4:u>m&&(v|=8),v}var v=
Math.cos(e),d=0<v,f=Math.abs(v)>M,s=kc(e,6*K);return Cd(a,function(e){var v,s,g,l,n;return{lineStart:function(){l=g=!1;n=1},point:function(r,p){var B,A=[r,p],H=a(r,p),O=d?H?0:c(r,p):H?c(r+(0>r?C:-C),p):0;if(!v&&(l=g=H)&&e.lineStart(),H!==g&&(B=m(v,A),(rb(v,B)||rb(A,B))&&(A[0]+=M,A[1]+=M,H=a(A[0],A[1]))),H!==g)n=0,H?(e.lineStart(),B=m(A,v),e.point(B[0],B[1])):(B=m(v,A),e.point(B[0],B[1]),e.lineEnd()),v=B;else if(f&&v&&d^H){var G;O&s||!(G=m(A,v,!0))||(n=0,d?(e.lineStart(),e.point(G[0][0],G[0][1]),e.point(G[1][0],
G[1][1]),e.lineEnd()):(e.point(G[1][0],G[1][1]),e.lineEnd(),e.lineStart(),e.point(G[0][0],G[0][1])))}!H||v&&rb(v,A)||e.point(A[0],A[1]);v=A;g=H;s=O},lineEnd:function(){g&&e.lineEnd();v=null},clean:function(){return n|(l&&g)<<1}}},s)}function Df(e,a,m,c){function v(c,v){return Math.abs(c[0]-e)<M?0<v?0:3:Math.abs(c[0]-m)<M?0<v?2:1:Math.abs(c[1]-a)<M?0<v?1:0:0<v?3:2}function d(e,a){return f(e.point,a.point)}function f(e,a){var u=v(e,1),m=v(a,1);return u!==m?u-m:0===u?a[1]-e[1]:1===u?e[0]-a[0]:2===u?
e[1]-a[1]:a[0]-e[0]}return function(s){function J(d){d=v(d,-1);return g([0===d||3===d?e:m,1<d?c:a])}function g(e){for(var a=0,u=D.length,m=e[1],c=0;u>c;++c)for(var v=1,d=D[c],q=d.length,L=d[0];q>v;++v)b=d[v],L[1]<=m?b[1]>m&&0<(b[0]-L[0])*(e[1]-L[1])-(e[0]-L[0])*(b[1]-L[1])&&++a:b[1]<=m&&0>(b[0]-L[0])*(e[1]-L[1])-(e[0]-L[0])*(b[1]-L[1])&&--a,L=b;return 0!==a}function l(d,q,s,J){var g=0,n=0;if(null==d||(g=v(d,s))!==(n=v(q,s))||0>f(d,q)^0<s){do J.point(0===g||3===g?e:m,1<g?c:a);while((g=(g+s+4)%4)!==
n)}else J.point(q[0],q[1])}function r(v,d){v>=e&&(m>=v&&d>=a&&c>=d)&&s.point(v,d)}function E(v,d){v=Math.max(-sb,Math.min(sb,v));d=Math.max(-sb,Math.min(sb,d));var q=v>=e&&m>=v&&d>=a&&c>=d;if(D&&z.push([v,d]),ia)B=v,A=d,H=q,ia=!1,q&&(s.lineStart(),s.point(v,d));else if(q&&fa)s.point(v,d);else{var f=[O,G],U=[v,d],J=U[0]-f[0],g=U[1]-f[1],l=[0,1];(Math.abs(J)<M&&Math.abs(g)<M?e<=f[0]&&f[0]<=m&&a<=f[1]&&f[1]<=c:tb(e-f[0],J,l)&&(tb(f[0]-m,-J,l)&&tb(a-f[1],g,l)&&tb(f[1]-c,-g,l))&&(1>l[1]&&(U[0]=f[0]+l[1]*
J,U[1]=f[1]+l[1]*g),0<l[0]&&(f[0]+=l[0]*J,f[1]+=l[0]*g),!0))?(fa||(s.lineStart(),s.point(f[0],f[1])),s.point(U[0],U[1]),q||s.lineEnd()):(s.lineStart(),s.point(v,d))}O=v;G=d;fa=q}var p,D,z,B,A,H,O,G,fa,ia,X=s,t=Ed(),x={point:r,lineStart:function(){x.point=E;D&&D.push(z=[]);ia=!0;fa=!1;O=G=0/0},lineEnd:function(){p&&(E(B,A),H&&fa&&t.rejoin(),p.push(t.buffer()));x.point=r;fa&&s.lineEnd()},polygonStart:function(){s=t;p=[];D=[]},polygonEnd:function(){s=X;(p=n.merge(p)).length?(s.polygonStart(),Ad(p,d,
J,l,s),s.polygonEnd()):g([e,a])&&(s.polygonStart(),s.lineStart(),l(null,null,1,s),s.lineEnd(),s.polygonEnd());p=D=z=null}};return x}}function tb(e,a,m){if(Math.abs(a)<M)return 0>=e;e/=a;if(0<a){if(e>m[1])return!1;e>m[0]&&(m[0]=e)}else{if(e<m[0])return!1;e<m[1]&&(m[1]=e)}return!0}function Fd(e,a){function m(m,c){return m=e(m,c),a(m[0],m[1])}return e.invert&&a.invert&&(m.invert=function(m,c){return m=a.invert(m,c),m&&e.invert(m[0],m[1])}),m}function Gd(e){function a(u){function c(a,m){a=e(a,m);u.point(a[0],
a[1])}function d(){n=0/0;A.point=L;u.lineStart()}function L(a,c){var d=ob([a,c]),s=e(a,c);m(n,r,l,p,z,B,n=s[0],r=s[1],l=a,p=d[0],z=d[1],B=d[2],v,u);u.point(n,r)}function f(){A.point=c;u.lineEnd()}function g(){var e,a,c,U,F,X;d();A.point=function(m,u){L(e=m,u);a=n;c=r;U=p;F=z;X=B;A.point=L};A.lineEnd=function(){m(n,r,l,p,z,B,a,c,e,U,F,X,v,u);A.lineEnd=f;f()}}var l,n,r,p,z,B,A={point:c,lineStart:d,lineEnd:f,polygonStart:function(){u.polygonStart();A.lineStart=g},polygonEnd:function(){u.polygonEnd();
A.lineStart=d}};return A}function m(a,u,v,d,f,g,l,n,r,p,z,B,A,H){var O=l-a,G=n-u,fa=O*O+G*G;if(fa>4*c&&A--){var ia=d+p,X=f+z,t=g+B,x=Math.sqrt(ia*ia+X*X+t*t),y=Math.asin(t/=x),C=Math.abs(Math.abs(t)-1)<M?(v+r)/2:Math.atan2(X,ia),I=e(C,y),y=I[0],I=I[1],K=y-a,Q=I-u,P=G*K-O*Q;(P*P/fa>c||0.3<Math.abs((O*K+G*Q)/fa-0.5))&&(m(a,u,v,d,f,g,y,I,C,ia/=x,X/=x,t,A,H),H.point(y,I),m(y,I,C,ia,X,t,l,n,r,p,z,B,A,H))}}var c=0.5,v=16;return a.precision=function(e){return arguments.length?(v=0<(c=e*e)&&16,a):Math.sqrt(c)},
a}function Ca(e){return lc(function(){return e})()}function lc(e){function a(e){return e=f(e[0]*K,e[1]*K),[e[0]*l+s,J-e[1]*l]}function m(e){return e=f.invert((e[0]-s)/l,(J-e[1])/l),e&&[e[0]*Z,e[1]*Z]}function c(){f=Fd(d=mc(z,B,A),v);var e=v(W,D);return s=r-e[0]*l,J=p+e[1]*l,a}var v,d,f,s,J,g=Gd(function(e,a){return e=v(e,a),[e[0]*l+s,J-e[1]*l]}),l=150,r=480,p=250,W=0,D=0,z=0,B=0,A=0,H=Hd,O=na,G=null,fa=null;return a.stream=function(e){return Ff(d,H(g(O(e))))},a.clipAngle=function(e){return arguments.length?
(H=null==e?(G=e,Hd):Cf((G=+e)*K),a):G},a.clipExtent=function(e){return arguments.length?(fa=e,O=null==e?na:Df(e[0][0],e[0][1],e[1][0],e[1][1]),a):fa},a.scale=function(e){return arguments.length?(l=+e,c()):l},a.translate=function(e){return arguments.length?(r=+e[0],p=+e[1],c()):[r,p]},a.center=function(e){return arguments.length?(W=e[0]%360*K,D=e[1]%360*K,c()):[W*Z,D*Z]},a.rotate=function(e){return arguments.length?(z=e[0]%360*K,B=e[1]%360*K,A=2<e.length?e[2]%360*K:0,c()):[z*Z,B*Z,A*Z]},n.rebind(a,
g,"precision"),function(){return v=e.apply(this,arguments),a.invert=v.invert&&m,c()}}function Ff(e,a){return{point:function(m,c){c=e(m*K,c*K);m=c[0];a.point(m>C?m-2*C:-C>m?m+2*C:m,c[1])},sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function Xa(e,a){return[e,a]}function mc(e,a,m){return e?a||m?Fd(Id(e),Jd(a,m)):Id(e):a||m?Jd(a,m):Xa}function Kd(e){return function(a,
m){return a+=e,[a>C?a-2*C:-C>a?a+2*C:a,m]}}function Id(e){var a=Kd(e);return a.invert=Kd(-e),a}function Jd(e,a){function m(e,a){var m=Math.cos(a),u=Math.cos(e)*m,m=Math.sin(e)*m,g=Math.sin(a),l=g*c+u*v;return[Math.atan2(m*d-l*f,u*c-g*v),Math.asin(Math.max(-1,Math.min(1,l*d+m*f)))]}var c=Math.cos(e),v=Math.sin(e),d=Math.cos(a),f=Math.sin(a);return m.invert=function(e,a){var m=Math.cos(a),u=Math.cos(e)*m,m=Math.sin(e)*m,g=Math.sin(a),l=g*d-m*f;return[Math.atan2(m*d+g*f,u*c+l*v),Math.asin(Math.max(-1,
Math.min(1,l*c-u*v)))]},m}function kc(e,a){var m=Math.cos(e),c=Math.sin(e);return function(v,d,f,s){null!=v?(v=Ld(m,v),d=Ld(m,d),(0<f?d>v:v>d)&&(v+=2*f*C)):(v=e+2*f*C,d=e);for(var J,g=f*a;0<f?v>d:d>v;v-=g)s.point((J=jc([m,-c*Math.cos(v),-c*Math.sin(v)]))[0],J[1])}}function Ld(e,a){var m=ob(a);m[0]-=e;var c=Math.sqrt(m[0]*m[0]+m[1]*m[1]+m[2]*m[2]);m[0]/=c;m[1]/=c;m[2]/=c;c=Math.acos(Math.max(-1,Math.min(1,-m[1])));return((0>-m[2]?-c:c)+2*Math.PI-M)%(2*Math.PI)}function Md(e,a,m){var c=n.range(e,a-
M,m).concat(a);return function(e){return c.map(function(a){return[e,a]})}}function Nd(e,a,m){var c=n.range(e,a-M,m).concat(a);return function(e){return c.map(function(a){return[a,e]})}}function nc(e){return e.source}function oc(e){return e.target}function Gf(e,a,m,c){var v=Math.cos(a),d=Math.sin(a),f=Math.cos(c),s=Math.sin(c),J=v*Math.cos(e),g=v*Math.sin(e),l=f*Math.cos(m),n=f*Math.sin(m),r=2*Math.asin(Math.sqrt(ld(c-a)+v*f*ld(m-e))),p=1/Math.sin(r);m=r?function(e){var a=Math.sin(e*=r)*p,m=Math.sin(r-
e)*p;e=m*J+a*l;var u=m*g+a*n,a=m*d+a*s;return[Math.atan2(u,e)*Z,Math.atan2(a,Math.sqrt(e*e+u*u))*Z]}:function(){return[e*Z,a*Z]};return m.distance=r,m}function pc(e){var a=0,m=C/3,c=lc(e);e=c(a,m);return e.parallels=function(e){return arguments.length?c(a=e[0]*C/180,m=e[1]*C/180):[180*(a/C),180*(m/C)]},e}function Od(e,a){function m(e,a){var m=Math.sqrt(d-2*v*Math.sin(a))/v;return[m*Math.sin(e*=v),f-m*Math.cos(e)]}var c=Math.sin(e),v=(c+Math.sin(a))/2,d=1+c*(2*v-c),f=Math.sqrt(d)/v;return m.invert=
function(e,a){var m=f-a;return[Math.atan2(e,m)/v,Math.asin((d-(e*e+m*m)*v*v)/(2*v))]},m}function qc(e,a){var m=e(a[0]),c=e([0.5*(a[0][0]+a[1][0]),a[0][1]]),v=e([a[1][0],a[0][1]]),d=e(a[1]),f=(c[1]-m[1])/(c[0]-m[0]),s=(v[1]-c[1])/(v[0]-c[0]),J=0.5*(f*s*(m[1]-v[1])+s*(m[0]+c[0])-f*(c[0]+v[0]))/(s-f),g=(0.5*(m[0]+c[0])-J)/f+0.5*(m[1]+c[1]),c=d[0]-J,d=d[1]-g,v=m[0]-J,m=m[1]-g,l=c*c+d*d,n=v*v+m*m,r=Math.atan2(d,c),p=Math.atan2(m,v);return function(a){var m=a[0]-J,u=a[1]-g,c=m*m+u*u,m=Math.atan2(u,m);return c>
l&&n>c&&m>r&&p>m?e.invert(a):void 0}}function Hf(){function e(e,a){ub+=v*e-c*a;c=e;v=a}var a,m,c,v;Da.point=function(d,f){Da.point=e;a=c=d;m=v=f};Da.lineEnd=function(){e(a,m)}}function If(){function e(e,a){f.push("M",e,",",a,d)}function a(e,u){f.push("M",e,",",u);s.point=m}function m(e,a){f.push("L",e,",",a)}function c(){s.point=e}function v(){f.push("Z")}var d=Pd(4.5),f=[],s={point:e,lineStart:function(){s.point=a},lineEnd:c,polygonStart:function(){s.lineEnd=v},polygonEnd:function(){s.lineEnd=c;
s.point=e},pointRadius:function(e){return d=Pd(e),s},result:function(){if(f.length){var e=f.join("");return f=[],e}}};return s}function rc(e,a){ga||(ba+=e,ca+=a,++aa)}function Qd(){function e(e,c){var d=e-a,f=c-m,d=Math.sqrt(d*d+f*f);ba+=d*(a+e)/2;ca+=d*(m+c)/2;aa+=d;a=e;m=c}var a,m;if(1!==ga){if(!(1>ga))return;ga=1;ba=ca=aa=0}ra.point=function(c,d){ra.point=e;a=c;m=d}}function Rd(){ra.point=rc}function Jf(){function e(e,a){var m=d*e-c*a;ba+=m*(c+e);ca+=m*(d+a);aa+=3*m;c=e;d=a}var a,m,c,d;2>ga&&(ga=
2,ba=ca=aa=0);ra.point=function(q,f){ra.point=e;a=c=q;m=d=f};ra.lineEnd=function(){e(a,m)}}function Kf(e){function a(m,u){e.moveTo(m,u);e.arc(m,u,f,0,2*C)}function m(a,m){e.moveTo(a,m);s.point=c}function c(a,m){e.lineTo(a,m)}function d(){s.point=a}function q(){e.closePath()}var f=4.5,s={point:a,lineStart:function(){s.point=m},lineEnd:d,polygonStart:function(){s.lineEnd=q},polygonEnd:function(){s.lineEnd=d;s.point=a},pointRadius:function(e){return f=e,s},result:da};return s}function Pd(e){return"m0,"+
e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Lf(e){var a=Gd(function(a,u){return e([a*Z,u*Z])});return function(e){return e=a(e),{point:function(a,u){e.point(a*K,u*K)},sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}}function Ya(e,a){function m(a,m){var u=Math.cos(a),c=Math.cos(m),u=e(u*c);return[u*c*Math.sin(a),u*Math.sin(m)]}return m.invert=
function(e,m){var c=Math.sqrt(e*e+m*m),d=a(c),f=Math.sin(d),d=Math.cos(d);return[Math.atan2(e*f,c*d),Math.asin(c&&m*f/c)]},m}function Sd(e,a){function m(e,a){var m=Math.abs(Math.abs(a)-C/2)<M?0:q/Math.pow(Math.tan(C/4+a/2),d);return[m*Math.sin(d*e),q-m*Math.cos(d*e)]}var c=Math.cos(e),d=e===a?Math.sin(e):Math.log(c/Math.cos(a))/Math.log(Math.tan(C/4+a/2)/Math.tan(C/4+e/2)),q=c*Math.pow(Math.tan(C/4+e/2),d)/d;return d?(m.invert=function(e,a){var m=q-a,u=(0<d?1:0>d?-1:0)*Math.sqrt(e*e+m*m);return[Math.atan2(e,
m)/d,2*Math.atan(Math.pow(q/u,1/d))-C/2]},m):vb}function Td(e,a){function m(e,a){var m=q-a;return[m*Math.sin(d*e),q-m*Math.cos(d*e)]}var c=Math.cos(e),d=e===a?Math.sin(e):(c-Math.cos(a))/(a-e),q=c/d+e;return Math.abs(d)<M?Xa:(m.invert=function(e,a){var m=q-a;return[Math.atan2(e,m)/d,q-(0<d?1:0>d?-1:0)*Math.sqrt(e*e+m*m)]},m)}function vb(e,a){return[e,Math.log(Math.tan(C/4+a/2))]}function Ud(e){var a,m=Ca(e),c=m.scale,d=m.translate,q=m.clipExtent;return m.scale=function(){var e=c.apply(m,arguments);
return e===m?a?m.clipExtent(null):m:e},m.translate=function(){var e=d.apply(m,arguments);return e===m?a?m.clipExtent(null):m:e},m.clipExtent=function(e){var f=q.apply(m,arguments);if(f===m){if(a=null==e){var g=C*c(),l=d();q([[l[0]-g,l[1]-g],[l[0]+g,l[1]+g]])}}else a&&(f=null);return f},m.clipExtent(null)}function sc(e,a){var m=Math.cos(a)*Math.sin(e);return[Math.log((1+m)/(1-m))/2,Math.atan2(Math.tan(a),Math.cos(e))]}function Vd(e){function a(u){function f(){U.push("M",q(e(l),s))}for(var g,U=[],l=
[],n=-1,r=u.length,p=N(m),B=N(c);++n<r;)d.call(this,g=u[n],n)?l.push([+p.call(this,g,n),+B.call(this,g,n)]):l.length&&(f(),l=[]);return l.length&&f(),U.length?U.join(""):null}var m=sa,c=va,d=Wa,q=oa,f=q.key,s=0.7;return a.x=function(e){return arguments.length?(m=e,a):m},a.y=function(e){return arguments.length?(c=e,a):c},a.defined=function(e){return arguments.length?(d=e,a):d},a.interpolate=function(e){return arguments.length?(f="function"==typeof e?q=e:(q=tc.get(e)||oa).key,a):f},a.tension=function(e){return arguments.length?
(s=e,a):s},a}function sa(e){return e[0]}function va(e){return e[1]}function oa(e){return e.join("L")}function uc(e){for(var a=0,m=e.length,c=e[0],d=[c[0],",",c[1]];++a<m;)d.push("V",(c=e[a])[1],"H",c[0]);return d.join("")}function vc(e){for(var a=0,m=e.length,c=e[0],d=[c[0],",",c[1]];++a<m;)d.push("H",(c=e[a])[0],"V",c[1]);return d.join("")}function wb(e,a){if(1>a.length||e.length!=a.length&&e.length!=a.length+2)return oa(e);var m=e.length!=a.length,c="",d=e[0],q=e[1],f=a[0],s=f,g=1;if(m&&(c+="Q"+
(q[0]-2*f[0]/3)+","+(q[1]-2*f[1]/3)+","+q[0]+","+q[1],d=e[1],g=2),1<a.length){s=a[1];q=e[g];g++;c+="C"+(d[0]+f[0])+","+(d[1]+f[1])+","+(q[0]-s[0])+","+(q[1]-s[1])+","+q[0]+","+q[1];for(d=2;d<a.length;d++,g++)q=e[g],s=a[d],c+="S"+(q[0]-s[0])+","+(q[1]-s[1])+","+q[0]+","+q[1]}m&&(m=e[g],c+="Q"+(q[0]+2*s[0]/3)+","+(q[1]+2*s[1]/3)+","+m[0]+","+m[1]);return c}function wc(e,a){for(var m,c=[],d=(1-a)/2,q=e[0],f=e[1],s=1,g=e.length;++s<g;)m=q,q=f,f=e[s],c.push([d*(f[0]-m[0]),d*(f[1]-m[1])]);return c}function Wd(e){if(3>
e.length)return oa(e);var a=1,m=e.length,c=e[0],d=c[0],q=c[1],f=[d,d,d,(c=e[1])[0]],s=[q,q,q,c[1]],d=[d,",",q];for(Za(d,f,s);++a<m;)c=e[a],f.shift(),f.push(c[0]),s.shift(),s.push(c[1]),Za(d,f,s);for(a=-1;2>++a;)f.shift(),f.push(c[0]),s.shift(),s.push(c[1]),Za(d,f,s);return d.join("")}function ta(e,a){return e[0]*a[0]+e[1]*a[1]+e[2]*a[2]+e[3]*a[3]}function Za(e,a,m){e.push("C",ta(Xd,a),",",ta(Xd,m),",",ta(Yd,a),",",ta(Yd,m),",",ta(Ra,a),",",ta(Ra,m))}function xc(e,a){return(a[1]-e[1])/(a[0]-e[0])}
function Mf(e,a,m,c){var d,q,f,s,g,l,n;return d=c[e],q=d[0],f=d[1],d=c[a],s=d[0],g=d[1],d=c[m],l=d[0],n=d[1],0<(n-f)*(s-q)-(g-f)*(l-q)}function yc(e,a,m){return(m[0]-a[0])*(e[1]-a[1])<(m[1]-a[1])*(e[0]-a[0])}function Zd(e,a,m,c){var d=e[0],q=m[0],f=a[0]-d,s=c[0]-q;e=e[1];m=m[1];a=a[1]-e;c=c[1]-m;q=(s*(e-m)-c*(d-q))/(c*f-s*a);return[d+q*f,e+q*a]}function zc(e,a){var m=e.map(function(e,a){return{index:a,x:e[0],y:e[1]}}).sort(function(e,a){return e.y<a.y?-1:e.y>a.y?1:e.x<a.x?-1:e.x>a.x?1:0}),c=null,
d={list:[],leftEnd:null,rightEnd:null,init:function(){d.leftEnd=d.createHalfEdge(null,"l");d.rightEnd=d.createHalfEdge(null,"l");d.leftEnd.r=d.rightEnd;d.rightEnd.l=d.leftEnd;d.list.unshift(d.leftEnd,d.rightEnd)},createHalfEdge:function(e,a){return{edge:e,side:a,vertex:null,l:null,r:null}},insert:function(e,a){a.l=e;a.r=e.r;e.r.l=a;e.r=a},leftBound:function(e){var a=d.leftEnd;do a=a.r;while(a!=d.rightEnd&&q.rightOf(a,e));return a.l},del:function(e){e.l.r=e.r;e.r.l=e.l;e.edge=null},right:function(e){return e.r},
left:function(e){return e.l},leftRegion:function(e){return null==e.edge?c:e.edge.region[e.side]},rightRegion:function(e){return null==e.edge?c:e.edge.region[Ac[e.side]]}},q={bisect:function(e,a){var m={region:{l:e,r:a},ep:{l:null,r:null}},c=a.x-e.x,u=a.y-e.y;return m.c=e.x*c+e.y*u+0.5*(c*c+u*u),(0<c?c:-c)>(0<u?u:-u)?(m.a=1,m.b=u/c,m.c/=c):(m.b=1,m.a=c/u,m.c/=u),m},intersect:function(e,a){var m=e.edge,c=a.edge;if(!m||!c||m.region.r==c.region.r)return null;var u=m.a*c.b-m.b*c.a;if(1E-10>Math.abs(u))return null;
var d,v,q=(m.c*c.b-c.c*m.b)/u,u=(c.c*m.a-m.c*c.a)/u,f=m.region.r,L=c.region.r;f.y<L.y||f.y==L.y&&f.x<L.x?(d=e,v=m):(d=a,v=c);return(m=q>=v.region.r.x)&&"l"===d.side||!m&&"r"===d.side?null:{x:q,y:u}},rightOf:function(e,a){var m=e.edge,c=m.region.r,u=a.x>c.x;if(u&&"l"===e.side)return 1;if(!u&&"r"===e.side)return 0;if(1===m.a){var d=a.y-c.y,v=a.x-c.x,q=0;!u&&0>m.b||u&&0<=m.b?q=d>=m.b*v:(q=a.x+a.y*m.b>m.c,0>m.b&&(q=!q));c=c.x-m.region.l.x;q=m.b*(v*v-d*d)<c*d*(1+2*v/c+m.b*m.b);0>m.b&&(q=!q)}else v=m.c-
m.a*a.x,m=a.y-v,d=a.x-c.x,c=v-c.y,q=m*m>d*d+c*c;return"l"===e.side?q:!q},endPoint:function(e,m,c){e.ep[m]=c;e.ep[Ac[m]]&&a(e)},distance:function(e,a){var m=e.x-a.x,c=e.y-a.y;return Math.sqrt(m*m+c*c)}},f={list:[],insert:function(e,a,m){e.vertex=a;e.ystar=a.y+m;m=0;for(var c=f.list,u=c.length;u>m;m++){var d=c[m];if(!(e.ystar>d.ystar||e.ystar==d.ystar&&a.x>d.vertex.x))break}c.splice(m,0,e)},del:function(e){for(var a=0,m=f.list,c=m.length;c>a&&m[a]!=e;++a);m.splice(a,1)},empty:function(){return 0===
f.list.length},nextEvent:function(e){for(var a=0,m=f.list,c=m.length;c>a;++a)if(m[a]==e)return m[a+1];return null},min:function(){var e=f.list[0];return{x:e.vertex.x,y:e.ystar}},extractMin:function(){return f.list.shift()}};d.init();for(var c=m.shift(),s,g,l,n,r,p,W,D,z,B,A=m.shift();;)if(f.empty()||(s=f.min()),A&&(f.empty()||A.y<s.y||A.y==s.y&&A.x<s.x))g=d.leftBound(A),l=d.right(g),W=d.rightRegion(g),B=q.bisect(W,A),p=d.createHalfEdge(B,"l"),d.insert(g,p),(z=q.intersect(g,p))&&(f.del(g),f.insert(g,
z,q.distance(z,A))),g=p,p=d.createHalfEdge(B,"r"),d.insert(g,p),(z=q.intersect(p,l))&&f.insert(p,z,q.distance(z,A)),A=m.shift();else{if(f.empty())break;g=f.extractMin();n=d.left(g);l=d.right(g);r=d.right(l);W=d.leftRegion(g);p=d.rightRegion(l);z=g.vertex;q.endPoint(g.edge,g.side,z);q.endPoint(l.edge,l.side,z);d.del(g);f.del(l);d.del(l);g="l";W.y>p.y&&(D=W,W=p,p=D,g="r");B=q.bisect(W,p);p=d.createHalfEdge(B,g);d.insert(n,p);q.endPoint(B,Ac[g],z);(z=q.intersect(n,p))&&(f.del(n),f.insert(n,z,q.distance(z,
W)));(z=q.intersect(p,r))&&f.insert(p,z,q.distance(z,W))}for(g=d.right(d.leftEnd);g!=d.rightEnd;g=d.right(g))a(g.edge)}function Nf(e){return e.x}function Of(e){return e.y}function $d(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function $a(e,a,m,c,d,q){if(!e(a,m,c,d,q)){var f=0.5*(m+d),s=0.5*(c+q);a=a.nodes;a[0]&&$a(e,a[0],m,c,f,s);a[1]&&$a(e,a[1],f,c,d,s);a[2]&&$a(e,a[2],m,s,f,q);a[3]&&$a(e,a[3],f,s,d,q)}}function Bc(e,a){e=n.rgb(e);a=n.rgb(a);var m=e.r,c=e.g,d=e.b,q=a.r-m,f=a.g-c,s=a.b-d;
return function(e){return"#"+Pa(Math.round(m+q*e))+Pa(Math.round(c+f*e))+Pa(Math.round(d+s*e))}}function ae(e){var a=[e.a,e.b],m=[e.c,e.d],c=be(a),d=a[0]*m[0]+a[1]*m[1],q=be((m[0]+=-d*a[0],m[1]+=-d*a[1],m))||0;a[0]*m[1]<m[0]*a[1]&&(a[0]*=-1,a[1]*=-1,c*=-1,d*=-1);this.rotate=(c?Math.atan2(a[1],a[0]):Math.atan2(-m[0],m[1]))*Z;this.translate=[e.e,e.f];this.scale=[c,q];this.skew=q?Math.atan2(d,q)*Z:0}function be(e){var a=Math.sqrt(e[0]*e[0]+e[1]*e[1]);return a&&(e[0]/=a,e[1]/=a),a}function wa(e,a){return a-=
e=+e,function(m){return e+a*m}}function xb(e,a){var m,c=[],d=[],q=n.transform(e),f=n.transform(a),s=q.translate,g=f.translate,l=q.rotate,p=f.rotate,r=q.skew,E=f.skew,q=q.scale,f=f.scale;return s[0]!=g[0]||s[1]!=g[1]?(c.push("translate(",null,",",null,")"),d.push({i:1,x:wa(s[0],g[0])},{i:3,x:wa(s[1],g[1])})):g[0]||g[1]?c.push("translate("+g+")"):c.push(""),l!=p?(180<l-p?p+=360:180<p-l&&(l+=360),d.push({i:c.push(c.pop()+"rotate(",null,")")-2,x:wa(l,p)})):p&&c.push(c.pop()+"rotate("+p+")"),r!=E?d.push({i:c.push(c.pop()+
"skewX(",null,")")-2,x:wa(r,E)}):E&&c.push(c.pop()+"skewX("+E+")"),q[0]!=f[0]||q[1]!=f[1]?(m=c.push(c.pop()+"scale(",null,",",null,")"),d.push({i:m-4,x:wa(q[0],f[0])},{i:m-2,x:wa(q[1],f[1])})):(1!=f[0]||1!=f[1])&&c.push(c.pop()+"scale("+f+")"),m=d.length,function(e){for(var a,u=-1;++u<m;)c[(a=d[u]).i]=a.x(e);return c.join("")}}function ce(e,a){var m,c={},d={};for(m in e)m in a?c[m]=("transform"==m?xb:Ga)(e[m],a[m]):d[m]=e[m];for(m in a)m in e||(d[m]=a[m]);return function(e){for(m in c)d[m]=c[m](e);
return d}}function de(e,a){var m,c,d,q,f=0,s=[],g=[];e+="";a+="";for(c=yb.lastIndex=0;m=yb.exec(a);++c)m.index&&s.push(a.substring(f,m.index)),g.push({i:s.length,x:m[0]}),s.push(null),f=yb.lastIndex;f<a.length&&s.push(a.substring(f));c=0;for(d=g.length;(m=yb.exec(e))&&d>c;++c)if(q=g[c],q.x==m[0]){if(q.i)if(null==s[q.i+1]){s[q.i-1]+=q.x;s.splice(q.i,1);for(m=c+1;d>m;++m)g[m].i--}else{s[q.i-1]+=q.x+s[q.i+1];s.splice(q.i,2);for(m=c+1;d>m;++m)g[m].i-=2}else if(null==s[q.i+1])s[q.i]=q.x;else{s[q.i]=q.x+
s[q.i+1];s.splice(q.i+1,1);for(m=c+1;d>m;++m)g[m].i--}g.splice(c,1);d--;c--}else q.x=wa(parseFloat(m[0]),parseFloat(q.x));for(;d>c;)q=g.pop(),null==s[q.i+1]?s[q.i]=q.x:(s[q.i]=q.x+s[q.i+1],s.splice(q.i+1,1)),d--;return 1===s.length?null==s[0]?g[0].x:function(){return a}:function(e){for(c=0;d>c;++c)s[(q=g[c]).i]=q.x(e);return s.join("")}}function Ga(e,a){for(var m,c=n.interpolators.length;0<=--c&&!(m=n.interpolators[c](e,a)););return m}function ee(e,a){var m,c=[],d=[],q=e.length,f=a.length,s=Math.min(e.length,
a.length);for(m=0;s>m;++m)c.push(Ga(e[m],a[m]));for(;q>m;++m)d[m]=e[m];for(;f>m;++m)d[m]=a[m];return function(e){for(m=0;s>m;++m)d[m]=c[m](e);return d}}function Pf(e){return function(a){return 0>=a?0:1<=a?1:e(a)}}function fe(e){return function(a){return 1-e(1-a)}}function ge(e){return function(a){return 0.5*(0.5>a?e(2*a):2-e(2-2*a))}}function Qf(e){return e*e}function Rf(e){return e*e*e}function Sf(e){return 1-Math.cos(e*C/2)}function Tf(e){return Math.pow(2,10*(e-1))}function Uf(e){return 1-Math.sqrt(1-
e*e)}function Vf(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+0.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+0.9375:7.5625*(e-=2.625/2.75)*e+0.984375}function he(e,a){return a-=e,function(m){return Math.round(e+a*m)}}function Wf(e,a){return a=a-(e=+e)?1/(a-e):0,function(m){return(m-e)*a}}function Xf(e,a){return a=a-(e=+e)?1/(a-e):0,function(m){return Math.max(0,Math.min(1,(m-e)*a))}}function Yf(e){var a=e.source;e=e.target;var m;var c=e;if(a===c)m=a;else{m=ie(a);for(var c=ie(c),d=m.pop(),
q=c.pop(),f=null;d===q;)f=d,d=m.pop(),q=c.pop();m=f}for(c=[a];a!==m;)a=a.parent,c.push(a);for(a=c.length;e!==m;)c.splice(a,0,e),e=e.parent;return c}function ie(e){for(var a=[],m=e.parent;null!=m;)a.push(e),e=m,m=m.parent;return a.push(e),a}function Zf(e){e.fixed|=2}function $f(e){e.fixed&=-7}function ag(e){e.fixed|=4;e.px=e.x;e.py=e.y}function bg(e){e.fixed&=-5}function je(e,a,m){var c=0,d=0;if(e.charge=0,!e.leaf)for(var q,f=e.nodes,s=f.length,g=-1;++g<s;)q=f[g],null!=q&&(je(q,a,m),e.charge+=q.charge,
c+=q.charge*q.cx,d+=q.charge*q.cy);e.point&&(e.leaf||(e.point.x+=Math.random()-0.5,e.point.y+=Math.random()-0.5),a*=m[e.point.index],e.charge+=e.pointCharge=a,c+=a*e.point.x,d+=a*e.point.y);e.cx=c/e.charge;e.cy=d/e.charge}function ab(e,a){return n.rebind(e,a,"sort","children","value"),e.nodes=e,e.links=cg,e}function dg(e){return e.children}function eg(e){return e.value}function fg(e,a){return a.value-e.value}function cg(e){return n.merge(e.map(function(e){return(e.children||[]).map(function(a){return{source:e,
target:a}})}))}function gg(e){return e.x}function hg(e){return e.y}function ig(e,a,m){e.y0=a;e.y=m}function Cc(e){return n.range(e.length)}function Dc(e){var a=-1;e=e[0].length;for(var m=[];++a<e;)m[a]=0;return m}function jg(e){for(var a,m=1,c=0,d=e[0][1],q=e.length;q>m;++m)(a=e[m][1])>d&&(c=m,d=a);return c}function kg(e){return e.reduce(lg,0)}function lg(e,a){return e+a[1]}function mg(e,a){return ke(e,Math.ceil(Math.log(a.length)/Math.LN2+1))}function ke(e,a){for(var m=-1,c=+e[0],d=(e[1]-c)/a,q=
[];++m<=a;)q[m]=d*m+c;return q}function ng(e){return[n.min(e),n.max(e)]}function le(e,a){return e.parent==a.parent?1:2}function Ec(e){var a=e.children;return a&&a.length?a[0]:e._tree.thread}function Fc(e){var a,m=e.children;return m&&(a=m.length)?m[a-1]:e._tree.thread}function zb(e,a){var m=e.children;if(m&&(d=m.length))for(var c,d,q=-1;++q<d;)0<a(c=zb(m[q],a),e)&&(e=c);return e}function og(e,a){return e.x-a.x}function pg(e,a){return a.x-e.x}function qg(e,a){return e.depth-a.depth}function xa(e,a){function m(e,
c){var d=e.children;if(d&&(s=d.length))for(var f,s,g=null,l=-1;++l<s;)f=d[l],m(f,g),g=f;a(e,c)}m(e,null)}function rg(e,a){return e.value-a.value}function Gc(e,a){var m=e._pack_next;e._pack_next=a;a._pack_prev=e;a._pack_next=m;m._pack_prev=a}function me(e,a){e._pack_next=a;a._pack_prev=e}function ne(e,a){var m=a.x-e.x,c=a.y-e.y,d=e.r+a.r;return 0.001<d*d-m*m-c*c}function oe(e){function a(e){p=Math.min(e.x-e.r,p);r=Math.max(e.x+e.r,r);E=Math.min(e.y-e.r,E);W=Math.max(e.y+e.r,W)}if((c=e.children)&&(n=
c.length)){var c,d,f,q,g,s,l,n,p=1/0,r=-1/0,E=1/0,W=-1/0;if(c.forEach(sg),d=c[0],d.x=-d.r,d.y=0,a(d),1<n&&(f=c[1],f.x=f.r,f.y=0,a(f),2<n)){q=c[2];pe(d,f,q);a(q);Gc(d,q);d._pack_prev=q;Gc(q,f);f=d._pack_next;for(g=3;n>g;g++){pe(d,f,q=c[g]);var D=0,z=1,B=1;for(s=f._pack_next;s!==f;s=s._pack_next,z++)if(ne(s,q)){D=1;break}if(1==D)for(l=d._pack_prev;l!==s._pack_prev&&!ne(l,q);l=l._pack_prev,B++);D?(B>z||z==B&&f.r<d.r?me(d,f=s):me(d=l,f),g--):(Gc(d,q),f=q,a(q))}}d=(p+r)/2;f=(E+W)/2;for(g=s=0;n>g;g++)q=
c[g],q.x-=d,q.y-=f,s=Math.max(s,q.r+Math.sqrt(q.x*q.x+q.y*q.y));e.r=s;c.forEach(tg)}}function sg(e){e._pack_next=e._pack_prev=e}function tg(e){delete e._pack_next;delete e._pack_prev}function qe(e,a,c,d){var f=e.children;if(e.x=a+=d*e.x,e.y=c+=d*e.y,e.r*=d,f){e=-1;for(var q=f.length;++e<q;)qe(f[e],a,c,d)}}function pe(e,a,c){var d=e.r+c.r,f=a.x-e.x,q=a.y-e.y;if(d&&(f||q)){var g=a.r+c.r,s=f*f+q*q,g=g*g,d=d*d;a=0.5+(d-g)/(2*s);g=Math.sqrt(Math.max(0,2*g*(d+s)-(d-=s)*d-g*g))/(2*s);c.x=e.x+a*f+g*q;c.y=
e.y+a*q-g*f}else c.x=e.x+d,c.y=e.y}function ug(e){return 1+n.max(e,function(e){return e.y})}function vg(e){return e.reduce(function(e,a){return e+a.x},0)/e.length}function re(e){var a=e.children;return a&&a.length?re(a[0]):e}function se(e){var a,c=e.children;return c&&(a=c.length)?se(c[a-1]):e}function Hc(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function te(e,a){var c=e.x+a[3],d=e.y+a[0],f=e.dx-a[1]-a[3],q=e.dy-a[0]-a[2];return 0>f&&(c+=f/2,f=0),0>q&&(d+=q/2,q=0),{x:c,y:d,dx:f,dy:q}}function bb(e){var a=
e[0];e=e[e.length-1];return e>a?[a,e]:[e,a]}function Ab(e){return e.rangeExtent?e.rangeExtent():bb(e.range())}function wg(e,a,c,d){var f=c(e[0],e[1]),q=d(a[0],a[1]);return function(e){return q(f(e))}}function Bb(e,a){var c,d=0,f=e.length-1,q=e[d],g=e[f];return q>g&&(c=d,d=f,f=c,c=q,q=g,g=c),(a=a(g-q))&&(e[d]=a.floor(q),e[f]=a.ceil(g)),e}function xg(e,a,c,d){var f=[],q=[],g=0,s=Math.min(e.length,a.length)-1;for(e[s]<e[0]&&(e=e.slice().reverse(),a=a.slice().reverse());++g<=s;)f.push(c(e[g-1],e[g])),
q.push(d(a[g-1],a[g]));return function(a){var c=n.bisect(e,a,1,s)-1;return q[c](f[c](a))}}function ue(e,a,c,d){function f(){var v=2<Math.min(e.length,a.length)?xg:wg,l=d?Xf:Wf;return g=v(e,a,l,c),s=v(a,e,l,Ga),q}function q(e){return g(e)}var g,s;return q.invert=function(e){return s(e)},q.domain=function(a){return arguments.length?(e=a.map(Number),f()):e},q.range=function(e){return arguments.length?(a=e,f()):a},q.rangeRound=function(e){return q.range(e).interpolate(he)},q.clamp=function(e){return arguments.length?
(d=e,f()):d},q.interpolate=function(e){return arguments.length?(c=e,f()):c},q.ticks=function(a){return Ic(e,a)},q.tickFormat=function(a,c){return Jc(e,a,c)},q.nice=function(){return Bb(e,ve),f()},q.copy=function(){return ue(e,a,c,d)},f()}function we(e,a){return n.rebind(e,a,"range","rangeRound","interpolate","clamp")}function ve(e){return e=Math.pow(10,Math.round(Math.log(e)/Math.LN10)-1),e&&{floor:function(a){return Math.floor(a/e)*e},ceil:function(a){return Math.ceil(a/e)*e}}}function xe(e,a){var c=
bb(e),d=c[1]-c[0],f=Math.pow(10,Math.floor(Math.log(d/a)/Math.LN10)),d=a/d*f;return 0.15>=d?f*=10:0.35>=d?f*=5:0.75>=d&&(f*=2),c[0]=Math.ceil(c[0]/f)*f,c[1]=Math.floor(c[1]/f)*f+0.5*f,c[2]=f,c}function Ic(e,a){return n.range.apply(n,xe(e,a))}function Jc(e,a,c){var d=-Math.floor(Math.log(xe(e,a)[2])/Math.LN10+0.01);return n.format(c?c.replace(ye,function(e,a,c,m,u,f,g,l,n,p){return[a,c,m,u,f,g,l,n||"."+(d-2*("%"===p)),p].join("")}):",."+d+"f")}function ze(e,a,c,d){function f(a){return e(c(a))}return f.invert=
function(a){return d(e.invert(a))},f.domain=function(a){return arguments.length?(0>a[0]?(c=Kc,d=yg):(c=Ae,d=Be),e.domain(a.map(c)),f):e.domain().map(d)},f.base=function(e){return arguments.length?(a=+e,f):a},f.nice=function(){return e.domain(Bb(e.domain(),zg(a))),f},f.ticks=function(){var f=bb(e.domain()),v=[];if(f.every(isFinite)){var s=Math.log(a),g=Math.floor(f[0]/s),s=Math.ceil(f[1]/s),l=d(f[0]),f=d(f[1]),n=a%1?2:a;if(c===Kc)for(v.push(-Math.pow(a,-g));g++<s;)for(var p=n-1;0<p;p--)v.push(-Math.pow(a,
-g)*p);else{for(;s>g;g++)for(p=1;n>p;p++)v.push(Math.pow(a,g)*p);v.push(Math.pow(a,g))}for(g=0;v[g]<l;g++);for(s=v.length;v[s-1]>f;s--);v=v.slice(g,s)}return v},f.tickFormat=function(e,g){if(2>arguments.length&&(g=Ag),!arguments.length)return g;var s,l=Math.log(a),n=Math.max(0.1,e/f.ticks().length),p=c===Kc?(s=-1E-12,Math.floor):(s=1E-12,Math.ceil);return function(e){return e/d(l*p(c(e)/l+s))<=n?g(e):""}},f.copy=function(){return ze(e.copy(),a,c,d)},we(f,e)}function Ae(e){return Math.log(0>e?0:e)}
function Be(e){return Math.exp(e)}function Kc(e){return-Math.log(0<e?0:-e)}function yg(e){return-Math.exp(-e)}function zg(e){e=Math.log(e);var a={floor:function(a){return Math.floor(a/e)*e},ceil:function(a){return Math.ceil(a/e)*e}};return function(){return a}}function Ce(e,a){function c(a){return e(d(a))}var d=Cb(a),f=Cb(1/a);return c.invert=function(a){return f(e.invert(a))},c.domain=function(a){return arguments.length?(e.domain(a.map(d)),c):e.domain().map(f)},c.ticks=function(e){return Ic(c.domain(),
e)},c.tickFormat=function(e,a){return Jc(c.domain(),e,a)},c.nice=function(){return c.domain(Bb(c.domain(),ve))},c.exponent=function(e){if(!arguments.length)return a;var g=c.domain();return d=Cb(a=e),f=Cb(1/a),c.domain(g)},c.copy=function(){return Ce(e.copy(),a)},we(c,e)}function Cb(e){return function(a){return 0>a?-Math.pow(-a,e):Math.pow(a,e)}}function De(e,c){function m(a){return q[((f.get(a)||f.set(a,e.push(a)))-1)%q.length]}function d(a,c){return n.range(e.length).map(function(e){return a+c*e})}
var f,q,g;return m.domain=function(d){if(!arguments.length)return e;e=[];f=new a;for(var q,g=-1,L=d.length;++g<L;)f.has(q=d[g])||f.set(q,e.push(q));return m[c.t].apply(m,c.a)},m.range=function(e){return arguments.length?(q=e,g=0,c={t:"range",a:arguments},m):q},m.rangePoints=function(a,f){2>arguments.length&&(f=0);var v=a[0],l=a[1],n=(l-v)/(Math.max(1,e.length-1)+f);return q=d(2>e.length?(v+l)/2:v+n*f/2,n),g=0,c={t:"rangePoints",a:arguments},m},m.rangeBands=function(a,f,v){2>arguments.length&&(f=0);
3>arguments.length&&(v=f);var l=a[1]<a[0],n=a[l-0],p=(a[1-l]-n)/(e.length-f+2*v);return q=d(n+p*v,p),l&&q.reverse(),g=p*(1-f),c={t:"rangeBands",a:arguments},m},m.rangeRoundBands=function(a,f,v){2>arguments.length&&(f=0);3>arguments.length&&(v=f);var l=a[1]<a[0],n=a[l-0],p=a[1-l],r=Math.floor((p-n)/(e.length-f+2*v));return q=d(n+Math.round((p-n-(e.length-f)*r)/2),r),l&&q.reverse(),g=Math.round(r*(1-f)),c={t:"rangeRoundBands",a:arguments},m},m.rangeBand=function(){return g},m.rangeExtent=function(){return bb(c.a[0])},
m.copy=function(){return De(e,c)},m.domain(e)}function Ee(e,a){function c(){var m=0,g=a.length;for(f=[];++m<g;)f[m-1]=n.quantile(e,m/g);return d}function d(e){return isNaN(e=+e)?0/0:a[n.bisect(f,e)]}var f;return d.domain=function(a){return arguments.length?(e=a.filter(function(e){return!isNaN(e)}).sort(n.ascending),c()):e},d.range=function(e){return arguments.length?(a=e,c()):a},d.quantiles=function(){return f},d.copy=function(){return Ee(e,a)},c()}function Fe(e,a,c){function d(a){return c[Math.max(0,
Math.min(g,Math.floor(q*(a-e))))]}function f(){return q=c.length/(a-e),g=c.length-1,d}var q,g;return d.domain=function(c){return arguments.length?(e=+c[0],a=+c[c.length-1],f()):[e,a]},d.range=function(e){return arguments.length?(c=e,f()):c},d.copy=function(){return Fe(e,a,c)},f()}function Ge(e,a){function c(m){return a[n.bisect(e,m)]}return c.domain=function(a){return arguments.length?(e=a,c):e},c.range=function(e){return arguments.length?(a=e,c):a},c.copy=function(){return Ge(e,a)},c}function He(e){function a(e){return+e}
return a.invert=a,a.domain=a.range=function(c){return arguments.length?(e=c.map(a),a):e},a.ticks=function(a){return Ic(e,a)},a.tickFormat=function(a,c){return Jc(e,a,c)},a.copy=function(){return He(e)},a}function Bg(e){return e.innerRadius}function Cg(e){return e.outerRadius}function Ie(e){return e.startAngle}function Je(e){return e.endAngle}function Ke(e){for(var a,c,d,f=-1,q=e.length;++f<q;)a=e[f],c=a[0],d=a[1]+Ha,a[0]=c*Math.cos(d),a[1]=c*Math.sin(d);return e}function Le(e){function a(u){function l(){A.push("M",
s(e(O),r),p,n(e(H.reverse()),r),"Z")}for(var J,z,B,A=[],H=[],O=[],G=-1,t=u.length,x=N(c),X=N(f),y=c===d?function(){return z}:N(d),Ef=f===q?function(){return B}:N(q);++G<t;)g.call(this,J=u[G],G)?(H.push([z=+x.call(this,J,G),B=+X.call(this,J,G)]),O.push([+y.call(this,J,G),+Ef.call(this,J,G)])):H.length&&(l(),H=[],O=[]);return H.length&&l(),A.length?A.join(""):null}var c=sa,d=sa,f=0,q=va,g=Wa,s=oa,l=s.key,n=s,p="L",r=0.7;return a.x=function(e){return arguments.length?(c=d=e,a):d},a.x0=function(e){return arguments.length?
(c=e,a):c},a.x1=function(e){return arguments.length?(d=e,a):d},a.y=function(e){return arguments.length?(f=q=e,a):q},a.y0=function(e){return arguments.length?(f=e,a):f},a.y1=function(e){return arguments.length?(q=e,a):q},a.defined=function(e){return arguments.length?(g=e,a):g},a.interpolate=function(e){return arguments.length?(l="function"==typeof e?s=e:(s=tc.get(e)||oa).key,n=s.reverse||s,p=s.closed?"M":"L",a):l},a.tension=function(e){return arguments.length?(r=e,a):r},a}function Dg(e){return e.radius}
function Me(e){return[e.x,e.y]}function Eg(e){return function(){var a=e.apply(this,arguments),c=a[0],a=a[1]+Ha;return[c*Math.cos(a),c*Math.sin(a)]}}function Fg(){return 64}function Gg(){return"circle"}function Ne(e){e=Math.sqrt(e/C);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function cb(e,a){return Sb(e,ea),e.id=a,e}function Lc(e,a,c,d){var f=e.id;return Aa(e,"function"==typeof c?function(e,g,s){e.__transition__[f].tween.set(a,d(c.call(e,e.__data__,g,s)))}:(c=d(c),function(e){e.__transition__[f].tween.set(a,
c)}))}function Hg(e){return null==e&&(e=""),function(){this.textContent=e}}function Db(e,c,m,d){var f=e.__transition__||(e.__transition__={active:0,count:0}),q=f[m];if(!q){var g=d.time;return q=f[m]={tween:new a,event:n.dispatch("start","end"),time:g,ease:d.ease,delay:d.delay,duration:d.duration},++f.count,n.timer(function(a){function d(a){return f.active>m?L():(f.active=m,W.start.call(e,p,c),q.tween.forEach(function(a,m){(m=m.call(e,p,c))&&B.push(m)}),l(a)||n.timer(l,0,g),1)}function l(a){if(f.active!==
m)return L();a=(a-D)/z;for(var d=r(a),q=B.length;0<q;)B[--q].call(e,d);return 1<=a?(L(),W.end.call(e,p,c),1):void 0}function L(){return--f.count?delete f[m]:delete e.__transition__,1}var p=e.__data__,r=q.ease,W=q.event,D=q.delay,z=q.duration,B=[];return a>=D?d(a):n.timer(d,D,g),1},0,g),q}}function Oe(e,a){e.attr("transform",function(e){return"translate("+a(e)+",0)"})}function Pe(e,a){e.attr("transform",function(e){return"translate(0,"+a(e)+")"})}function Ig(e,a,c){if(d=[],c&&1<a.length){for(var d,
f,q=bb(e.domain()),g=-1,s=a.length,l=(a[1]-a[0])/++c;++g<s;)for(e=c;0<--e;)(f=+a[g]-e*l)>=q[0]&&d.push(f);--g;for(e=0;++e<c&&(f=+a[g]+e*l)<q[1];)d.push(f)}return d}function Ia(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function Ja(e,a,c){function d(a){var c=e(a),m=q(c,1);return m-a>a-c?c:m}function f(c){return a(c=e(new ja(c-1)),1),c}function q(e,c){return a(e=new ja(+e),c),e}function g(e,d,q){e=f(e);var s=[];if(1<q)for(;d>e;)c(e)%q||s.push(new Date(+e)),a(e,
1);else for(;d>e;)s.push(new Date(+e)),a(e,1);return s}e.floor=e;e.round=d;e.ceil=f;e.offset=q;e.range=g;var s=e.utc=Eb(e);return s.floor=s,s.round=Eb(d),s.ceil=Eb(f),s.offset=Eb(q),s.range=function(e,a,c){try{ja=Ia;var m=new Ia;return m._=e,g(m,a,c)}finally{ja=Date}},e}function Eb(e){return function(a,c){try{ja=Ia;var d=new Ia;return d._=a,e(d,c)._}finally{ja=Date}}}function Fb(e,a,c,d){for(var f,q,g=0,s=a.length,l=c.length;s>g;){if(d>=l)return-1;if(f=a.charCodeAt(g++),37===f){if(q=Jg[a.charAt(g++)],
!q||0>(d=q(e,c,d)))return-1}else if(f!=c.charCodeAt(d++))return-1}return d}function Gb(e){return RegExp("^(?:"+e.map(n.requote).join("|")+")","i")}function Qe(e){for(var c=new a,m=-1,d=e.length;++m<d;)c.set(e[m].toLowerCase(),m);return c}function ma(e,a,c){e+="";var d=e.length;return c>d?Array(c-d+1).join(a)+e:e}function Re(e,a,c){ka.lastIndex=0;return(a=ka.exec(a.substring(c,c+2)))?(e.d=+a[0],c+a[0].length):-1}function Se(e,a,c){ka.lastIndex=0;return(a=ka.exec(a.substring(c,c+2)))?(e.H=+a[0],c+a[0].length):
-1}function Mc(e){return e.toISOString()}function Nc(e,a,c){function d(a){return e(a)}return d.invert=function(a){return Oc(e.invert(a))},d.domain=function(a){return arguments.length?(e.domain(a),d):e.domain().map(Oc)},d.nice=function(e){return d.domain(Bb(d.domain(),function(){return e}))},d.ticks=function(c,m){var f,g=d.domain();f=g[0];g=g[g.length-1];f=g>f?[f,g]:[g,f];if("function"!=typeof c){var g=(f[1]-f[0])/c,l=n.bisect(Hb,g);if(l==Hb.length)return a.year(f,c);if(!l)return e.ticks(c).map(Oc);
Math.log(g/Hb[l-1])<Math.log(Hb[l]/g)&&--l;c=a[l];m=c[1];c=c[0].range}return c(f[0],new Date(+f[1]+1),m)},d.tickFormat=function(){return c},d.copy=function(){return Nc(e.copy(),a,c)},n.rebind(d,e,"range","rangeRound","interpolate","clamp")}function Oc(e){return new Date(e)}function Te(e){return function(a){for(var c=e.length-1,d=e[c];!d[1](a);)d=e[--c];return d[0](a)}}function Pc(e){var a=new Date(e,0,1);return a.setFullYear(e),a}function Kg(e){var a=e.getFullYear(),c=Pc(a),d=Pc(a+1);return a+(e-
c)/(d-c)}function Qc(e){var a=new Date(Date.UTC(e,0,1));return a.setUTCFullYear(e),a}function Lg(e){var a=e.getUTCFullYear(),c=Qc(a),d=Qc(a+1);return a+(e-c)/(d-c)}function Mg(e){return e.responseText}function Ng(e){return JSON.parse(e.responseText)}function Og(e){var a=la.createRange();return a.selectNode(la.body),a.createContextualFragment(e.responseText)}function Pg(e){return e.responseXML}var n={version:"3.1.5"};Date.now||(Date.now=function(){return+new Date});var la=document,ha=window;try{la.createElement("div").style.setProperty("opacity",
0,"")}catch(th){var Ue=ha.CSSStyleDeclaration.prototype,Qg=Ue.setProperty;Ue.setProperty=function(e,a,c){Qg.call(this,e,a+"",c)}}n.ascending=function(e,a){return a>e?-1:e>a?1:e>=a?0:0/0};n.descending=function(e,a){return e>a?-1:a>e?1:a>=e?0:0/0};n.min=function(e,a){var c,d,f=-1,q=e.length;if(1===arguments.length){for(;++f<q&&(null==(c=e[f])||c!=c);)c=void 0;for(;++f<q;)null!=(d=e[f])&&c>d&&(c=d)}else{for(;++f<q&&(null==(c=a.call(e,e[f],f))||c!=c);)c=void 0;for(;++f<q;)null!=(d=a.call(e,e[f],f))&&
c>d&&(c=d)}return c};n.max=function(e,a){var c,d,f=-1,q=e.length;if(1===arguments.length){for(;++f<q&&(null==(c=e[f])||c!=c);)c=void 0;for(;++f<q;)null!=(d=e[f])&&d>c&&(c=d)}else{for(;++f<q&&(null==(c=a.call(e,e[f],f))||c!=c);)c=void 0;for(;++f<q;)null!=(d=a.call(e,e[f],f))&&d>c&&(c=d)}return c};n.extent=function(e,a){var c,d,f,q=-1,g=e.length;if(1===arguments.length){for(;++q<g&&(null==(c=f=e[q])||c!=c);)c=f=void 0;for(;++q<g;)null!=(d=e[q])&&(c>d&&(c=d),d>f&&(f=d))}else{for(;++q<g&&(null==(c=f=
a.call(e,e[q],q))||c!=c);)c=void 0;for(;++q<g;)null!=(d=a.call(e,e[q],q))&&(c>d&&(c=d),d>f&&(f=d))}return[c,f]};n.sum=function(e,a){var c,d=0,f=e.length,q=-1;if(1===arguments.length)for(;++q<f;)isNaN(c=+e[q])||(d+=c);else for(;++q<f;)isNaN(c=+a.call(e,e[q],q))||(d+=c);return d};n.mean=function(e,a){var c,d=e.length,g=0,q=-1,l=0;if(1===arguments.length)for(;++q<d;)f(c=e[q])&&(g+=(c-g)/++l);else for(;++q<d;)f(c=a.call(e,e[q],q))&&(g+=(c-g)/++l);return l?g:void 0};n.quantile=function(e,a){var c=(e.length-
1)*a+1,d=Math.floor(c),f=+e[d-1];return(c-=d)?f+c*(e[d]-f):f};n.median=function(e,a){return 1<arguments.length&&(e=e.map(a)),e=e.filter(f),e.length?n.quantile(e.sort(n.ascending),0.5):void 0};n.bisector=function(e){return{left:function(a,c,d,f){3>arguments.length&&(d=0);for(4>arguments.length&&(f=a.length);f>d;){var q=d+f>>>1;e.call(a,a[q],q)<c?d=q+1:f=q}return d},right:function(a,c,d,f){3>arguments.length&&(d=0);for(4>arguments.length&&(f=a.length);f>d;){var q=d+f>>>1;c<e.call(a,a[q],q)?f=q:d=q+
1}return d}}};var Ve=n.bisector(function(e){return e});n.bisectLeft=Ve.left;n.bisect=n.bisectRight=Ve.right;n.shuffle=function(e){for(var a,c,d=e.length;d;)c=Math.random()*d--|0,a=e[d],e[d]=e[c],e[c]=a;return e};n.permute=function(e,a){for(var c=[],d=-1,f=a.length;++d<f;)c[d]=e[a[d]];return c};n.zip=function(){if(!(d=arguments.length))return[];for(var e=-1,a=n.min(arguments,l),c=Array(a);++e<a;)for(var d,f=-1,q=c[e]=Array(d);++f<d;)q[f]=arguments[f][e];return c};n.transpose=function(e){return n.zip.apply(n,
e)};n.keys=function(e){var a=[],c;for(c in e)a.push(c);return a};n.values=function(e){var a=[],c;for(c in e)a.push(e[c]);return a};n.entries=function(e){var a=[],c;for(c in e)a.push({key:c,value:e[c]});return a};n.merge=function(e){return Array.prototype.concat.apply([],e)};n.range=function(e,a,c){if(3>arguments.length&&(c=1,2>arguments.length&&(a=e,e=0)),1/0===(a-e)/c)throw Error("infinite range");var d,f=[],q;d=Math.abs(c);for(q=1;d*q%1;)q*=10;var g=-1;if(e*=q,a*=q,c*=q,0>c)for(;(d=e+c*++g)>a;)f.push(d/
q);else for(;(d=e+c*++g)<a;)f.push(d/q);return f};n.map=function(e){var c=new a,d;for(d in e)c.set(d,e[d]);return c};p(a,{has:function(e){return Ea+e in this},get:function(e){return this[Ea+e]},set:function(e,a){return this[Ea+e]=a},remove:function(e){return e=Ea+e,e in this&&delete this[e]},keys:function(){var e=[];return this.forEach(function(a){e.push(a)}),e},values:function(){var e=[];return this.forEach(function(a,c){e.push(c)}),e},entries:function(){var e=[];return this.forEach(function(a,c){e.push({key:a,
value:c})}),e},forEach:function(e){for(var a in this)a.charCodeAt(0)===We&&e.call(this,a.substring(1),this[a])}});var Ea="\x00",We=Ea.charCodeAt(0);n.nest=function(){function e(c,u,l){if(l>=q.length)return f?f.call(g,u):d?u.sort(d):u;for(var n,p,r,U,D=-1,z=u.length,B=q[l++],A=new a;++D<z;)(U=A.get(n=B(p=u[D])))?U.push(p):A.set(n,[p]);return c?(p=c(),r=function(a,d){p.set(a,e(c,d,l))}):(p={},r=function(a,d){p[a]=e(c,d,l)}),A.forEach(r),p}function c(e,a){if(a>=q.length)return e;var d=[],m=l[a++];return e.forEach(function(e,
m){d.push({key:e,values:c(m,a)})}),m?d.sort(function(e,a){return m(e.key,a.key)}):d}var d,f,g={},q=[],l=[];return g.map=function(a,c){return e(c,a,0)},g.entries=function(a){return c(e(n.map,a,0),0)},g.key=function(e){return q.push(e),g},g.sortKeys=function(e){return l[q.length-1]=e,g},g.sortValues=function(e){return d=e,g},g.rollup=function(e){return f=e,g},g};n.set=function(e){var a=new c;if(e)for(var d=0;d<e.length;d++)a.add(e[d]);return a};p(c,{has:function(e){return Ea+e in this},add:function(e){return this[Ea+
e]=!0,e},remove:function(e){return e=Ea+e,e in this&&delete this[e]},values:function(){var e=[];return this.forEach(function(a){e.push(a)}),e},forEach:function(e){for(var a in this)a.charCodeAt(0)===We&&e.call(this,a.substring(1))}});n.behavior={};n.rebind=function(e,a){for(var c,f=1,g=arguments.length;++f<g;)e[c=arguments[f]]=d(e,a,a[c]);return e};n.dispatch=function(){for(var e=new g,a=-1,c=arguments.length;++a<c;)e[arguments[a]]=r(e);return e};g.prototype.on=function(e,a){var c=e.indexOf("."),
d="";if(0<=c&&(d=e.substring(c+1),e=e.substring(0,c)),e)return 2>arguments.length?this[e].on(d):this[e].on(d,a);if(2===arguments.length){if(null==a)for(e in this)this.hasOwnProperty(e)&&this[e].on(d,null);return this}};n.event=null;n.mouse=function(e){return I(e,T())};var Rb=/WebKit/.test(ha.navigator.userAgent)?-1:0,za=function(e){return Array.prototype.slice.call(e)};try{za(la.documentElement.childNodes)[0].nodeType}catch(uh){za=t}var Sb=[].__proto__?function(e,a){e.__proto__=a}:function(e,a){for(var c in a)e[c]=
a[c]};n.touches=function(e,a){return 2>arguments.length&&(a=T().touches),a?za(a).map(function(a){var c=I(e,a);return c.identifier=a.identifier,c}):[]};n.behavior.drag=function(){function e(){this.on("mousedown.drag",a).on("touchstart.drag",a)}function a(){function e(){var a=g.parentNode;return null!=r?n.touches(a).filter(function(e){return e.identifier===r})[0]:n.mouse(a)}function f(){l({type:"dragend"});E&&(y(),n.event.target===p&&V(W,"click"));W.on(null!=r?"touchmove.drag-"+r:"mousemove.drag",null).on(null!=
r?"touchend.drag-"+r:"mouseup.drag",null)}var u,g=this,l=c.of(g,arguments),p=n.event.target,r=n.event.touches?n.event.changedTouches[0].identifier:null,R=e(),E=0,W=n.select(ha).on(null!=r?"touchmove.drag-"+r:"mousemove.drag",function(){if(!g.parentNode)return f();var a=e(),c=a[0]-R[0],d=a[1]-R[1];E|=c|d;R=a;y();l({type:"drag",x:a[0]+u[0],y:a[1]+u[1],dx:c,dy:d})}).on(null!=r?"touchend.drag-"+r:"mouseup.drag",f,!0);d?(u=d.apply(g,arguments),u=[u.x-R[0],u.y-R[1]]):u=[0,0];null==r&&y();l({type:"dragstart"})}
var c=x(e,"drag","dragstart","dragend"),d=null;return e.origin=function(a){return arguments.length?(d=a,e):d},n.rebind(e,c,"on")};var bd=function(e,a){return a.querySelector(e)},cd=function(e,a){return a.querySelectorAll(e)},Sa=la.documentElement,Rg=Sa.matchesSelector||Sa.webkitMatchesSelector||Sa.mozMatchesSelector||Sa.msMatchesSelector||Sa.oMatchesSelector,gd=function(e,a){return Rg.call(e,a)};"function"==typeof Sizzle&&(bd=function(e,a){return Sizzle(e,a)[0]||null},cd=function(e,a){return Sizzle.uniqueSort(Sizzle(e,
a))},gd=Sizzle.matchesSelector);var S=[];n.selection=function(){return db};n.selection.prototype=S;S.select=function(e){var a,c,d,f,q=[];"function"!=typeof e&&(e=Q(e));for(var g=-1,s=this.length;++g<s;){q.push(a=[]);a.parentNode=(d=this[g]).parentNode;for(var l=-1,n=d.length;++l<n;)(f=d[l])?(a.push(c=e.call(f,f.__data__,l)),c&&"__data__"in f&&(c.__data__=f.__data__)):a.push(null)}return P(q)};S.selectAll=function(e){var a,c,d=[];"function"!=typeof e&&(e=Y(e));for(var f=-1,q=this.length;++f<q;)for(var g=
this[f],s=-1,l=g.length;++s<l;)(c=g[s])&&(d.push(a=za(e.call(c,c.__data__,s))),a.parentNode=c);return P(d)};var Rc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};n.ns={prefix:Rc,qualify:function(e){var a=e.indexOf(":"),c=e;return 0<=a&&(c=e.substring(0,a),e=e.substring(a+1)),Rc.hasOwnProperty(c)?{space:Rc[c],local:e}:e}};S.attr=function(e,a){if(2>arguments.length){if("string"==
typeof e){var c=this.node();return e=n.ns.qualify(e),e.local?c.getAttributeNS(e.space,e.local):c.getAttribute(e)}for(a in e)this.each(Va(a,e[a]));return this}return this.each(Va(e,a))};n.requote=function(e){return e.replace(Sg,"\\$&")};var Sg=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;S.classed=function(e,a){if(2>arguments.length){if("string"==typeof e){var c=this.node(),d=(e=e.trim().split(/^|\s+/g)).length,f=-1;if(a=c.classList)for(;++f<d;){if(!a.contains(e[f]))return!1}else for(a=c.getAttribute("class");++f<
d;)if(!$c(e[f]).test(a))return!1;return!0}for(a in e)this.each(ad(a,e[a]));return this}return this.each(ad(e,a))};S.style=function(e,a,c){var d=arguments.length;if(3>d){if("string"!=typeof e){2>d&&(a="");for(c in e)this.each(dd(c,e[c],a));return this}if(2>d)return ha.getComputedStyle(this.node(),null).getPropertyValue(e);c=""}return this.each(dd(e,a,c))};S.property=function(e,a){if(2>arguments.length){if("string"==typeof e)return this.node()[e];for(a in e)this.each(ed(a,e[a]));return this}return this.each(ed(e,
a))};S.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var a=e.apply(this,arguments);this.textContent=null==a?"":a}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent};S.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var a=e.apply(this,arguments);this.innerHTML=null==a?"":a}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML};S.append=function(e){function a(){return this.appendChild(la.createElementNS(this.namespaceURI,
e))}function c(){return this.appendChild(la.createElementNS(e.space,e.local))}return e=n.ns.qualify(e),this.select(e.local?c:a)};S.insert=function(e,a){function c(d,m){return this.insertBefore(la.createElementNS(this.namespaceURI,e),a.call(this,d,m))}function d(c,m){return this.insertBefore(la.createElementNS(e.space,e.local),a.call(this,c,m))}return e=n.ns.qualify(e),"function"!=typeof a&&(a=Q(a)),this.select(e.local?d:c)};S.remove=function(){return this.each(function(){var e=this.parentNode;e&&
e.removeChild(this)})};S.data=function(e,c){function d(e,m){var f,q,g,l=e.length,v=m.length,L=Math.min(l,v),r=Array(v),U=Array(v),G=Array(l);if(c){var t=new a,x=new a,X=[];for(f=-1;++f<l;)L=c.call(q=e[f],q.__data__,f),t.has(L)?G[f]=q:t.set(L,q),X.push(L);for(f=-1;++f<v;)L=c.call(m,g=m[f],f),(q=t.get(L))?(r[f]=q,q.__data__=g):x.has(L)||(U[f]={__data__:g}),x.set(L,g),t.remove(L);for(f=-1;++f<l;)t.has(X[f])&&(G[f]=e[f])}else{for(f=-1;++f<L;)q=e[f],g=m[f],q?(q.__data__=g,r[f]=q):U[f]={__data__:g};for(;v>
f;++f)U[f]={__data__:m[f]};for(;l>f;++f)G[f]=e[f]}U.update=r;U.parentNode=r.parentNode=G.parentNode=e.parentNode;s.push(U);n.push(r);p.push(G)}var f,g,q=-1,l=this.length;if(!arguments.length){for(e=Array(l=(f=this[0]).length);++q<l;)(g=f[q])&&(e[q]=g.__data__);return e}var s=kd([]),n=P([]),p=P([]);if("function"==typeof e)for(;++q<l;)d(f=this[q],e.call(f,f.parentNode.__data__,q));else for(;++q<l;)d(f=this[q],e);return n.enter=function(){return s},n.exit=function(){return p},n};S.datum=function(e){return arguments.length?
this.property("__data__",e):this.property("__data__")};S.filter=function(e){var a,c,d,f=[];"function"!=typeof e&&(e=fd(e));for(var q=0,g=this.length;g>q;q++){f.push(a=[]);a.parentNode=(c=this[q]).parentNode;for(var s=0,l=c.length;l>s;s++)(d=c[s])&&e.call(d,d.__data__,s)&&a.push(d)}return P(f)};S.order=function(){for(var e=-1,a=this.length;++e<a;)for(var c,d=this[e],f=d.length-1,q=d[f];0<=--f;)(c=d[f])&&(q&&q!==c.nextSibling&&q.parentNode.insertBefore(c,q),q=c);return this};S.sort=function(e){e=uf.apply(this,
arguments);for(var a=-1,c=this.length;++a<c;)this[a].sort(e);return this.order()};S.on=function(e,a,c){var d=arguments.length;if(3>d){if("string"!=typeof e){2>d&&(a=!1);for(c in e)this.each(hd(c,e[c],a));return this}if(2>d)return(d=this.node()["__on"+e])&&d._;c=!1}return this.each(hd(e,a,c))};var Tb=n.map({mouseenter:"mouseover",mouseleave:"mouseout"});Tb.forEach(function(e){"on"+e in la&&Tb.remove(e)});S.each=function(e){return Aa(this,function(a,c,d){e.call(a,a.__data__,c,d)})};S.call=function(a){var c=
za(arguments);return a.apply(c[0]=this,c),this};S.empty=function(){return!this.node()};S.node=function(){for(var a=0,c=this.length;c>a;a++)for(var d=this[a],f=0,g=d.length;g>f;f++){var q=d[f];if(q)return q}return null};var Fa=[];n.selection.enter=kd;n.selection.enter.prototype=Fa;Fa.append=S.append;Fa.insert=S.insert;Fa.empty=S.empty;Fa.node=S.node;Fa.select=function(a){for(var c,d,f,g,q,l=[],s=-1,n=this.length;++s<n;){f=(g=this[s]).update;l.push(c=[]);c.parentNode=g.parentNode;for(var p=-1,r=g.length;++p<
r;)(q=g[p])?(c.push(f[p]=d=a.call(g.parentNode,q.__data__,p)),d.__data__=q.__data__):c.push(null)}return P(l)};S.transition=function(){var a,c,d=eb||++Xe,f=[],g=Object.create(Ib);g.time=Date.now();for(var q=-1,l=this.length;++q<l;){f.push(a=[]);for(var s=this[q],n=-1,p=s.length;++n<p;)(c=s[n])&&Db(c,n,d,g),a.push(c)}return cb(f,d)};var db=P([[la]]);db[0].parentNode=Sa;n.select=function(a){return"string"==typeof a?db.select(a):P([[a]])};n.selectAll=function(a){return"string"==typeof a?db.selectAll(a):
P([za(a)])};n.behavior.zoom=function(){function a(){this.on("mousedown.zoom",l).on("mousemove.zoom",p).on(Tg+".zoom",s).on("dblclick.zoom",r).on("touchstart.zoom",F).on("touchmove.zoom",R).on("touchend.zoom",F)}function c(a){return[(a[0]-O[0])/G,(a[1]-O[1])/G]}function d(a){G=Math.max(fa[0],Math.min(fa[1],a))}function f(a,e){e=[e[0]*G+O[0],e[1]*G+O[1]];O[0]+=a[0]-e[0];O[1]+=a[1]-e[1]}function g(){z&&z.domain(D.range().map(function(a){return(a-O[0])/G}).map(D.invert));A&&A.domain(B.range().map(function(a){return(a-
O[1])/G}).map(B.invert))}function q(a){g();n.event.preventDefault();a({type:"zoom",scale:G,translate:O})}function l(){var a=this,e=ia.of(a,arguments),d=n.event.target,m=0,g=n.select(ha).on("mousemove.zoom",function(){m=1;f(n.mouse(a),s);q(e)}).on("mouseup.zoom",function(){m&&y();g.on("mousemove.zoom",null).on("mouseup.zoom",null);m&&n.event.target===d&&V(g,"click.zoom")}),s=c(n.mouse(a));ha.focus();y()}function s(){E||(E=c(n.mouse(this)));d(Math.pow(2,0.002*Jb())*G);f(n.mouse(this),E);q(ia.of(this,
arguments))}function p(){E=null}function r(){var a=n.mouse(this),e=c(a),g=Math.log(G)/Math.LN2;d(Math.pow(2,n.event.shiftKey?Math.ceil(g)-1:Math.floor(g)+1));f(a,e);q(ia.of(this,arguments))}function F(){var a=n.touches(this),e=Date.now();if(t=G,E={},a.forEach(function(a){E[a.identifier]=c(a)}),y(),1===a.length){if(500>e-H){var g=a[0],a=c(a[0]);d(2*G);f(g,a);q(ia.of(this,arguments))}H=e}}function R(){var a=n.touches(this),e=a[0],c=E[e.identifier];if(a=a[1]){var g=E[a.identifier],e=[(e[0]+a[0])/2,(e[1]+
a[1])/2],c=[(c[0]+g[0])/2,(c[1]+g[1])/2];d(n.event.scale*t)}f(e,c);H=null;q(ia.of(this,arguments))}var E,t,D,z,B,A,H,O=[0,0],G=1,fa=Ye,ia=x(a,"zoom");return a.translate=function(c){return arguments.length?(O=c.map(Number),g(),a):O},a.scale=function(c){return arguments.length?(G=+c,g(),a):G},a.scaleExtent=function(c){return arguments.length?(fa=null==c?Ye:c.map(Number),a):fa},a.x=function(c){return arguments.length?(z=c,D=c.copy(),O=[0,0],G=1,a):z},a.y=function(c){return arguments.length?(A=c,B=c.copy(),
O=[0,0],G=1,a):A},n.rebind(a,ia,"on")};var Jb,Ye=[0,1/0],Tg="onwheel"in la?(Jb=function(){return-n.event.deltaY*(n.event.deltaMode?120:1)},"wheel"):"onmousewheel"in la?(Jb=function(){return n.event.wheelDelta},"mousewheel"):(Jb=function(){return-n.event.detail},"MozMousePixelScroll");La.prototype.toString=function(){return this.rgb()+""};n.hsl=function(a,c,d){return 1===arguments.length?a instanceof Ub?Ma(a.h,a.s,a.l):$b(""+a,qd,Ma):Ma(+a,+c,+d)};var Sc=Ub.prototype=new La;Sc.brighter=function(a){return a=
Math.pow(0.7,arguments.length?a:1),Ma(this.h,this.s,this.l/a)};Sc.darker=function(a){return a=Math.pow(0.7,arguments.length?a:1),Ma(this.h,this.s,a*this.l)};Sc.rgb=function(){return fb(this.h,this.s,this.l)};var C=Math.PI,M=1E-6,K=C/180,Z=180/C;n.hcl=function(a,c,d){var f;if(1===arguments.length)if(a instanceof gb)f=Na(a.h,a.c,a.l);else if(a instanceof hb)f=Na(Math.atan2(a.b,a.a)*Z,Math.sqrt(a.a*a.a+a.b*a.b),a.l);else{f=(a=rd((a=n.rgb(a)).r,a.g,a.b)).l;var g=a.a,q=a.b;f=Na(Math.atan2(q,g)*Z,Math.sqrt(g*
g+q*q),f)}else f=Na(+a,+c,+d);return f};var Tc=gb.prototype=new La;Tc.brighter=function(a){return Na(this.h,this.c,Math.min(100,this.l+Kb*(arguments.length?a:1)))};Tc.darker=function(a){return Na(this.h,this.c,Math.max(0,this.l-Kb*(arguments.length?a:1)))};Tc.rgb=function(){return Vb(this.h,this.c,this.l).rgb()};n.lab=function(a,c,d){return 1===arguments.length?a instanceof hb?Oa(a.l,a.a,a.b):a instanceof gb?Vb(a.l,a.c,a.h):rd((a=n.rgb(a)).r,a.g,a.b):Oa(+a,+c,+d)};var Kb=18,nd=0.95047,od=1,pd=1.08883,
Uc=hb.prototype=new La;Uc.brighter=function(a){return Oa(Math.min(100,this.l+Kb*(arguments.length?a:1)),this.a,this.b)};Uc.darker=function(a){return Oa(Math.max(0,this.l-Kb*(arguments.length?a:1)),this.a,this.b)};Uc.rgb=function(){return md(this.l,this.a,this.b)};n.rgb=function(a,c,d){return 1===arguments.length?a instanceof Zb?ua(a.r,a.g,a.b):$b(""+a,ua,fb):ua(~~a,~~c,~~d)};var Lb=Zb.prototype=new La;Lb.brighter=function(a){a=Math.pow(0.7,arguments.length?a:1);var c=this.r,d=this.g,f=this.b;return c||
d||f?(c&&30>c&&(c=30),d&&30>d&&(d=30),f&&30>f&&(f=30),ua(Math.min(255,Math.floor(c/a)),Math.min(255,Math.floor(d/a)),Math.min(255,Math.floor(f/a)))):ua(30,30,30)};Lb.darker=function(a){return a=Math.pow(0.7,arguments.length?a:1),ua(Math.floor(a*this.r),Math.floor(a*this.g),Math.floor(a*this.b))};Lb.hsl=function(){return qd(this.r,this.g,this.b)};Lb.toString=function(){return"#"+Pa(this.r)+Pa(this.g)+Pa(this.b)};var ib=n.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",
azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",
darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",
greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",
lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",
olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",
slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});ib.forEach(function(a,c){ib.set(a,$b(c,ua,fb))});n.functor=N;n.xhr=function(a,c,d){function f(){var a=p.status;!a&&p.responseText||200<=a&&300>a||304===a?q.load.call(g,s.call(g,p)):q.error.call(g,p)}var g={},q=
n.dispatch("progress","load","error"),l={},s=na,p=new (ha.XDomainRequest&&/^(http(s)?:)?\/\//.test(a)?XDomainRequest:XMLHttpRequest);return"onload"in p?p.onload=p.onerror=f:p.onreadystatechange=function(){3<p.readyState&&f()},p.onprogress=function(a){var e=n.event;n.event=a;try{q.progress.call(g,p)}finally{n.event=e}},g.header=function(a,e){return a=(a+"").toLowerCase(),2>arguments.length?l[a]:(null==e?delete l[a]:l[a]=e+"",g)},g.mimeType=function(a){return arguments.length?(c=null==a?null:a+"",g):
c},g.response=function(a){return s=a,g},["get","post"].forEach(function(a){g[a]=function(){return g.send.apply(g,[a].concat(za(arguments)))}}),g.send=function(d,m,f){if(2===arguments.length&&"function"==typeof m&&(f=m,m=null),p.open(d,a,!0),null==c||"accept"in l||(l.accept=c+",*/*"),p.setRequestHeader)for(var q in l)p.setRequestHeader(q,l[q]);return null!=c&&p.overrideMimeType&&p.overrideMimeType(c),null!=f&&g.on("error",f).on("load",function(a){f(null,a)}),p.send(null==m?null:m),g},g.abort=function(){return p.abort(),
g},n.rebind(g,q,"on"),2===arguments.length&&"function"==typeof c&&(d=c,c=null),null==d?g:g.get(wf(d))};n.csv=sd(",","text/csv");n.tsv=sd("\t","text/tab-separated-values");var kb,jb,Ug=0,dc={},Qa=null;n.timer=function(a,c,d){if(3>arguments.length){if(2>arguments.length)c=0;else if(!isFinite(c))return;d=Date.now()}var f=dc[a.id];f&&f.callback===a?(f.then=d,f.delay=c):dc[a.id=++Ug]=Qa={callback:a,then:d,delay:c,next:Qa};kb||(jb=clearTimeout(jb),kb=1,ud(cc))};n.timer.flush=function(){for(var a,c=Date.now(),
d=Qa;d;)a=c-d.then,d.delay||(d.flush=d.callback(a)),d=d.next;td()};var ud=ha.requestAnimationFrame||ha.webkitRequestAnimationFrame||ha.mozRequestAnimationFrame||ha.oRequestAnimationFrame||ha.msRequestAnimationFrame||function(a){setTimeout(a,17)},Mb=[3,3],Vg="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,c){var d=Math.pow(10,3*Math.abs(8-c));return{scale:8<c?function(a){return a/d}:function(a){return a*d},symbol:a}});n.formatPrefix=function(a,c){var d=0;return a&&(0>a&&(a*=-1),c&&
(a=n.round(a,ec(a,c))),d=1+Math.floor(1E-12+Math.log(a)/Math.LN10),d=Math.max(-24,Math.min(24,3*Math.floor((0>=d?d+1:d-1)/3)))),Vg[8+d/3]};n.round=function(a,c){return c?Math.round(a*(c=Math.pow(10,c)))/c:Math.round(a)};n.format=function(a){a=ye.exec(a);var c=a[1]||" ",d=a[2]||">",f=a[3]||"",g=a[4]||"",q=a[5],l=+a[6],s=a[7],p=a[8],r=a[9],F=1,R="",E=!1;switch(p&&(p=+p.substring(1)),(q||"0"===c&&"="===d)&&(q=c="0",d="=",s&&(l-=Math.floor((l-1)/4))),r){case "n":s=!0;r="g";break;case "%":F=100;R="%";
r="f";break;case "p":F=100;R="%";r="r";break;case "b":case "o":case "x":case "X":g&&(g="0"+r.toLowerCase());case "c":case "d":E=!0;p=0;break;case "s":F=-1,r="r"}"#"===g&&(g="");"r"!=r||p||(r="g");null!=p&&("g"==r?p=Math.max(1,Math.min(21,p)):("e"==r||"f"==r)&&(p=Math.max(0,Math.min(20,p))));var r=Wg.get(r)||xf,t=q&&s;return function(a){if(E&&a%1)return"";var e=0>a||0===a&&0>1/a?(a=-a,"-"):f;if(0>F){var B=n.formatPrefix(a,p);a=B.scale(a);R=B.symbol}else a*=F;a=r(a,p);!q&&s&&(a=Vc(a));var B=g.length+
a.length+(t?0:e.length),A=l>B?Array(B=l-B+1).join(c):"";return t&&(a=Vc(A+a)),a.replace(".","."),e+=g,("<"===d?e+a+A:">"===d?A+e+a:"^"===d?A.substring(0,B>>=1)+e+a+A.substring(B):e+(t?a:A+a))+R}};var ye=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Wg=n.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,
c){return a.toPrecision(c)},e:function(a,c){return a.toExponential(c)},f:function(a,c){return a.toFixed(c)},r:function(a,c){return(a=n.round(a,ec(a,c))).toFixed(Math.max(0,Math.min(20,ec(a*(1+1E-15),c))))}}),Vc=na;if(Mb)var Xg=Mb.length,Vc=function(a){for(var c=a.lastIndexOf("."),d=0<=c?"."+a.substring(c+1):(c=a.length,""),f=[],g=0,q=Mb[0];0<c&&0<q;)f.push(a.substring(c-=q,c+q)),q=Mb[g=(g+1)%Xg];return f.reverse().join(",")+d};n.geo={};n.geo.stream=function(a,c){a&&Ze.hasOwnProperty(a.type)?Ze[a.type](a,
c):lb(a,c)};var Ze={Feature:function(a,c){lb(a.geometry,c)},FeatureCollection:function(a,c){for(var d=a.features,f=-1,g=d.length;++f<g;)lb(d[f].geometry,c)}},vd={Sphere:function(a,c){c.sphere()},Point:function(a,c){var d=a.coordinates;c.point(d[0],d[1])},MultiPoint:function(a,c){for(var d,f=a.coordinates,g=-1,q=f.length;++g<q;)d=f[g],c.point(d[0],d[1])},LineString:function(a,c){fc(a.coordinates,c,0)},MultiLineString:function(a,c){for(var d=a.coordinates,f=-1,g=d.length;++f<g;)fc(d[f],c,0)},Polygon:function(a,
c){wd(a.coordinates,c)},MultiPolygon:function(a,c){for(var d=a.coordinates,f=-1,g=d.length;++f<g;)wd(d[f],c)},GeometryCollection:function(a,c){for(var d=a.geometries,f=-1,g=d.length;++f<g;)lb(d[f],c)}};n.geo.area=function(a){return Ta=0,n.geo.stream(a,Ba),Ta};var Ta,mb,nb,Ba={sphere:function(){Ta+=4*C},point:da,lineStart:da,lineEnd:da,polygonStart:function(){mb=1;nb=0;Ba.lineStart=yf},polygonEnd:function(){var a=2*Math.atan2(nb,mb);Ta+=0>a?4*C+a:a;Ba.lineStart=Ba.lineEnd=Ba.point=da}};n.geo.bounds=
xd(na);n.geo.centroid=function(a){ga=pa=ba=ca=aa=0;n.geo.stream(a,qa);var c;return pa&&Math.abs(c=Math.sqrt(ba*ba+ca*ca+aa*aa))>M?[Math.atan2(ca,ba)*Z,Math.asin(Math.max(-1,Math.min(1,aa/c)))*Z]:void 0};var ga,pa,ba,ca,aa,qa={sphere:function(){2>ga&&(ga=2,pa=ba=ca=aa=0)},point:yd,lineStart:gc,lineEnd:hc,polygonStart:function(){2>ga&&(ga=2,pa=ba=ca=aa=0);qa.lineStart=zf},polygonEnd:function(){qa.lineStart=gc}},Hd=Cd(Wa,function(a){var c,d=0/0,f=0/0,g=0/0;return{lineStart:function(){a.lineStart();c=
1},point:function(q,l){var s=0<q?C:-C,n=Math.abs(q-d);if(Math.abs(n-C)<M)a.point(d,f=0<(f+l)/2?C/2:-C/2),a.point(g,f),a.lineEnd(),a.lineStart(),a.point(s,f),a.point(q,f),c=0;else if(g!==s&&n>=C){Math.abs(d-g)<M&&(d-=g*M);Math.abs(q-s)<M&&(q-=s*M);var n=d,p=f,r=q,R,E,t=Math.sin(n-r);f=Math.abs(t)>M?Math.atan((Math.sin(p)*(E=Math.cos(l))*Math.sin(r)-Math.sin(l)*(R=Math.cos(p))*Math.sin(n))/(R*E*t)):(p+l)/2;a.point(g,f);a.lineEnd();a.lineStart();a.point(s,f);c=0}a.point(d=q,f=l);g=s},lineEnd:function(){a.lineEnd();
d=f=0/0},clean:function(){return 2-c}}},function(a,c,d,f){null==a?(d=d*C/2,f.point(-C,d),f.point(0,d),f.point(C,d),f.point(C,0),f.point(C,-d),f.point(0,-d),f.point(-C,-d),f.point(-C,0),f.point(-C,d)):Math.abs(a[0]-c[0])>M?(a=(a[0]<c[0]?1:-1)*C,d=d*a/2,f.point(-a,d),f.point(0,d),f.point(a,d)):f.point(c[0],c[1])}),sb=1E9;n.geo.projection=Ca;n.geo.projectionMutator=lc;(n.geo.equirectangular=function(){return Ca(Xa)}).raw=Xa.invert=Xa;n.geo.rotation=function(a){function c(d){return d=a(d[0]*K,d[1]*K),
d[0]*=Z,d[1]*=Z,d}return a=mc(a[0]%360*K,a[1]*K,2<a.length?a[2]*K:0),c.invert=function(c){return c=a.invert(c[0]*K,c[1]*K),c[0]*=Z,c[1]*=Z,c},c};n.geo.circle=function(){function a(){var e="function"==typeof f?f.apply(this,arguments):f,c=mc(-e[0]*K,-e[1]*K,0).invert,g=[];return d(null,null,1,{point:function(a,e){g.push(a=c(a,e));a[0]*=Z;a[1]*=Z}}),{type:"Polygon",coordinates:[g]}}var c,d,f=[0,0],g=6;return a.origin=function(c){return arguments.length?(f=c,a):f},a.angle=function(f){return arguments.length?
(d=kc((c=+f)*K,g*K),a):c},a.precision=function(f){return arguments.length?(d=kc(c*K,(g=+f)*K),a):g},a.angle(90)};n.geo.distance=function(a,c){var d,f=(c[0]-a[0])*K,g=a[1]*K,q=c[1]*K,l=Math.sin(f),f=Math.cos(f),s=Math.sin(g),g=Math.cos(g),n=Math.sin(q),q=Math.cos(q);return Math.atan2(Math.sqrt((d=q*l)*d+(d=g*n-s*q*f)*d),s*n+g*q*f)};n.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:c()}}function c(){return n.range(Math.ceil(q/B)*B,g,B).map(E).concat(n.range(Math.ceil(r/
A)*A,p,A).map(t)).concat(n.range(Math.ceil(f/D)*D,d,D).filter(function(a){return Math.abs(a%B)>M}).map(F)).concat(n.range(Math.ceil(s/z)*z,l,z).filter(function(a){return Math.abs(a%A)>M}).map(R))}var d,f,g,q,l,s,p,r,F,R,E,t,D=10,z=D,B=90,A=360,H=2.5;return a.lines=function(){return c().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[E(q).concat(t(p).slice(1),E(g).reverse().slice(1),t(r).reverse().slice(1))]}},a.extent=function(c){return arguments.length?
a.majorExtent(c).minorExtent(c):a.minorExtent()},a.majorExtent=function(c){return arguments.length?(q=+c[0][0],g=+c[1][0],r=+c[0][1],p=+c[1][1],q>g&&(c=q,q=g,g=c),r>p&&(c=r,r=p,p=c),a.precision(H)):[[q,r],[g,p]]},a.minorExtent=function(c){return arguments.length?(f=+c[0][0],d=+c[1][0],s=+c[0][1],l=+c[1][1],f>d&&(c=f,f=d,d=c),s>l&&(c=s,s=l,l=c),a.precision(H)):[[f,s],[d,l]]},a.step=function(c){return arguments.length?a.majorStep(c).minorStep(c):a.minorStep()},a.majorStep=function(c){return arguments.length?
(B=+c[0],A=+c[1],a):[B,A]},a.minorStep=function(c){return arguments.length?(D=+c[0],z=+c[1],a):[D,z]},a.precision=function(c){return arguments.length?(H=+c,F=Md(s,l,90),R=Nd(f,d,H),E=Md(r,p,90),t=Nd(q,g,H),a):H},a.majorExtent([[-180,-90+M],[180,90-M]]).minorExtent([[-180,-80-M],[180,80+M]])};n.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[c||f.apply(this,arguments),d||g.apply(this,arguments)]}}var c,d,f=nc,g=oc;return a.distance=function(){return n.geo.distance(c||f.apply(this,
arguments),d||g.apply(this,arguments))},a.source=function(d){return arguments.length?(f=d,c="function"==typeof d?null:d,a):f},a.target=function(c){return arguments.length?(g=c,d="function"==typeof c?null:c,a):g},a.precision=function(){return arguments.length?a:0},a};n.geo.interpolate=function(a,c){return Gf(a[0]*K,a[1]*K,c[0]*K,c[1]*K)};n.geo.length=function(a){return Nb=0,n.geo.stream(a,Ua),Nb};var Nb,Ua={sphere:da,point:da,lineStart:function(){function a(e,g){var l=Math.sin(g*=K),s=Math.cos(g),
n=Math.abs((e*=K)-c),p=Math.cos(n);Nb+=Math.atan2(Math.sqrt((n=s*Math.sin(n))*n+(n=f*l-d*s*p)*n),d*l+f*s*p);c=e;d=l;f=s}var c,d,f;Ua.point=function(g,q){c=g*K;d=Math.sin(q*=K);f=Math.cos(q);Ua.point=a};Ua.lineEnd=function(){Ua.point=Ua.lineEnd=da}},lineEnd:da,polygonStart:da,polygonEnd:da};(n.geo.conicEqualArea=function(){return pc(Od)}).raw=Od;n.geo.albersUsa=function(){function a(e){var c=e[0],d=e[1];return(50<d?q:-140>c?l:21>d?s:g)(e)}var c,d,f,g=n.geo.conicEqualArea().rotate([98,0]).center([0,
38]).parallels([29.5,45.5]),q=n.geo.conicEqualArea().rotate([160,0]).center([0,60]).parallels([55,65]),l=n.geo.conicEqualArea().rotate([160,0]).center([0,20]).parallels([8,18]),s=n.geo.conicEqualArea().rotate([60,0]).center([0,10]).parallels([8,18]);return a.invert=function(a){return c(a)||d(a)||f(a)||g.invert(a)},a.scale=function(c){return arguments.length?(g.scale(c),q.scale(0.6*c),l.scale(c),s.scale(1.5*c),a.translate(g.translate())):g.scale()},a.translate=function(n){if(!arguments.length)return g.translate();
var p=g.scale(),r=n[0],R=n[1];return g.translate(n),q.translate([r-0.4*p,R+0.17*p]),l.translate([r-0.19*p,R+0.2*p]),s.translate([r+0.58*p,R+0.43*p]),c=qc(q,[[-180,50],[-130,72]]),d=qc(l,[[-164,18],[-154,24]]),f=qc(s,[[-67.5,17.5],[-65,19]]),a},a.scale(1E3)};var Ob,ub,Da={point:da,lineStart:da,lineEnd:da,polygonStart:function(){ub=0;Da.lineStart=Hf},polygonEnd:function(){Da.lineStart=Da.lineEnd=Da.point=da;Ob+=Math.abs(ub/2)}},ra={point:rc,lineStart:Qd,lineEnd:Rd,polygonStart:function(){ra.lineStart=
Jf},polygonEnd:function(){ra.point=rc;ra.lineStart=Qd;ra.lineEnd=Rd}};n.geo.path=function(){function a(e){return e&&n.geo.stream(e,f(g.pointRadius("function"==typeof q?+q.apply(this,arguments):q))),g.result()}var c,d,f,g,q=4.5;return a.area=function(a){return Ob=0,n.geo.stream(a,f(Da)),Ob},a.centroid=function(a){return ga=ba=ca=aa=0,n.geo.stream(a,f(ra)),aa?[ba/aa,ca/aa]:void 0},a.bounds=function(a){return xd(f)(a)},a.projection=function(d){return arguments.length?(f=(c=d)?d.stream||Lf(d):na,a):c},
a.context=function(c){return arguments.length?(g=null==(d=c)?new If:new Kf(c),a):d},a.pointRadius=function(c){return arguments.length?(q="function"==typeof c?c:+c,a):q},a.projection(n.geo.albersUsa()).context(null)};n.geo.albers=function(){return n.geo.conicEqualArea().parallels([29.5,45.5]).rotate([98,0]).center([0,38]).scale(1E3)};var $e=Ya(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(n.geo.azimuthalEqualArea=function(){return Ca($e)}).raw=$e;var af=Ya(function(a){return(a=
Math.acos(a))&&a/Math.sin(a)},na);(n.geo.azimuthalEquidistant=function(){return Ca(af)}).raw=af;(n.geo.conicConformal=function(){return pc(Sd)}).raw=Sd;(n.geo.conicEquidistant=function(){return pc(Td)}).raw=Td;var bf=Ya(function(a){return 1/a},Math.atan);(n.geo.gnomonic=function(){return Ca(bf)}).raw=bf;vb.invert=function(a,c){return[a,2*Math.atan(Math.exp(c))-C/2]};(n.geo.mercator=function(){return Ud(vb)}).raw=vb;var cf=Ya(function(){return 1},Math.asin);(n.geo.orthographic=function(){return Ca(cf)}).raw=
cf;var df=Ya(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(n.geo.stereographic=function(){return Ca(df)}).raw=df;sc.invert=function(a,c){var d=Math.atan2((Math.exp(a)-Math.exp(-a))/2,Math.cos(c)),f;f=Math.sin(c)/((Math.exp(a)+Math.exp(-a))/2);f=1<f?C/2:-1>f?-C/2:Math.asin(f);return[d,f]};(n.geo.transverseMercator=function(){return Ud(sc)}).raw=sc;n.geom={};n.svg={};n.svg.line=function(){return Vd(na)};var tc=n.map({linear:oa,"linear-closed":function(a){return oa(a)+"Z"},"step-before":uc,
"step-after":vc,basis:Wd,"basis-open":function(a){if(4>a.length)return oa(a);for(var c,d=[],f=-1,g=a.length,q=[0],l=[0];3>++f;)c=a[f],q.push(c[0]),l.push(c[1]);d.push(ta(Ra,q)+","+ta(Ra,l));for(--f;++f<g;)c=a[f],q.shift(),q.push(c[0]),l.shift(),l.push(c[1]),Za(d,q,l);return d.join("")},"basis-closed":function(a){for(var c,d,f=-1,g=a.length,q=g+4,l=[],s=[];4>++f;)d=a[f%g],l.push(d[0]),s.push(d[1]);c=[ta(Ra,l),",",ta(Ra,s)];for(--f;++f<q;)d=a[f%g],l.shift(),l.push(d[0]),s.shift(),s.push(d[1]),Za(c,
l,s);return c.join("")},bundle:function(a,c){var d=a.length-1;if(d)for(var f,g,q=a[0][0],l=a[0][1],s=a[d][0]-q,n=a[d][1]-l,p=-1;++p<=d;)f=a[p],g=p/d,f[0]=c*f[0]+(1-c)*(q+g*s),f[1]=c*f[1]+(1-c)*(l+g*n);return Wd(a)},cardinal:function(a,c){return 3>a.length?oa(a):a[0]+wb(a,wc(a,c))},"cardinal-open":function(a,c){return 4>a.length?oa(a):a[1]+wb(a.slice(1,a.length-1),wc(a,c))},"cardinal-closed":function(a,c){return 3>a.length?oa(a):a[0]+wb((a.push(a[0]),a),wc([a[a.length-2]].concat(a,[a[1]]),c))},monotone:function(a){if(3>
a.length)a=oa(a);else{var c=a[0],d,f,g,q,l=[],s;d=0;s=a.length-1;for(var n=[],p=a[1],r=n[0]=xc(a[0],p);++d<s;)n[d]=(r+(r=xc(p,p=a[d+1])))/2;s=(n[d]=r,n);n=-1;for(p=a.length-1;++n<p;)d=xc(a[n],a[n+1]),1E-6>Math.abs(d)?s[n]=s[n+1]=0:(f=s[n]/d,g=s[n+1]/d,q=f*f+g*g,9<q&&(q=3*d/Math.sqrt(q),s[n]=q*f,s[n+1]=q*g));for(n=-1;++n<=p;)q=(a[Math.min(p,n+1)][0]-a[Math.max(0,n-1)][0])/(6*(1+s[n]*s[n])),l.push([q||0,s[n]*q||0]);a=c+wb(a,l)}return a}});tc.forEach(function(a,c){c.key=a;c.closed=/-closed$/.test(a)});
var Xd=[0,2/3,1/3,0],Yd=[0,1/3,2/3,0],Ra=[0,1/6,2/3,1/6];n.geom.hull=function(a){function c(a){if(3>a.length)return[];var e,g,l,u,n,p,r,E,t,D;E=N(d);t=N(f);D=a.length;var z=D-1,B=[],A=[],H=0;if(E===sa&&f===va)e=a;else{l=0;for(e=[];D>l;++l)e.push([+E.call(this,g=a[l],l),+t.call(this,g,l)])}for(l=1;D>l;++l)e[l][1]<e[H][1]?H=l:e[l][1]==e[H][1]&&(H=e[l][0]<e[H][0]?l:H);for(l=0;D>l;++l)l!==H&&(n=e[l][1]-e[H][1],u=e[l][0]-e[H][0],B.push({angle:Math.atan2(n,u),index:l}));B.sort(function(a,e){return a.angle-
e.angle});D=B[0].angle;t=B[0].index;E=0;for(l=1;z>l;++l)g=B[l].index,D==B[l].angle?(u=e[t][0]-e[H][0],n=e[t][1]-e[H][1],p=e[g][0]-e[H][0],r=e[g][1]-e[H][1],u*u+n*n>=p*p+r*r?B[l].index=-1:(B[E].index=-1,D=B[l].angle,E=l,t=g)):(D=B[l].angle,E=l,t=g);A.push(H);for(g=l=0;2>l;++g)-1!==B[g].index&&(A.push(B[g].index),l++);for(u=A.length;z>g;++g)if(-1!==B[g].index){for(;!Mf(A[u-2],A[u-1],B[g].index,e);)--u;A[u++]=B[g].index}e=[];for(l=0;u>l;++l)e.push(a[A[l]]);return e}var d=sa,f=va;return arguments.length?
c(a):(c.x=function(a){return arguments.length?(d=a,c):d},c.y=function(a){return arguments.length?(f=a,c):f},c)};n.geom.polygon=function(a){return a.area=function(){for(var c=0,d=a.length,f=a[d-1][1]*a[0][0]-a[d-1][0]*a[0][1];++c<d;)f+=a[c-1][1]*a[c][0]-a[c-1][0]*a[c][1];return 0.5*f},a.centroid=function(c){var d,f,g=-1,q=a.length,l=0,s=0,n=a[q-1];for(arguments.length||(c=-1/(6*a.area()));++g<q;)d=n,n=a[g],f=d[0]*n[1]-n[0]*d[1],l+=(d[0]+n[0])*f,s+=(d[1]+n[1])*f;return[l*c,s*c]},a.clip=function(c){for(var d,
f,g,q,l,s,n=-1,p=a.length,r=a[p-1];++n<p;){d=c.slice();c.length=0;q=a[n];l=d[(g=d.length)-1];for(f=-1;++f<g;)s=d[f],yc(s,r,q)?(yc(l,r,q)||c.push(Zd(l,s,r,q)),c.push(s)):yc(l,r,q)&&c.push(Zd(l,s,r,q)),l=s;r=q}return c},a};n.geom.delaunay=function(a){var c=a.map(function(){return[]}),d=[];return zc(a,function(d){c[d.region.l.index].push(a[d.region.r.index])}),c.forEach(function(c,f){var g=a[f],l=g[0],s=g[1];c.forEach(function(a){a.angle=Math.atan2(a[0]-l,a[1]-s)});c.sort(function(a,e){return a.angle-
e.angle});for(var u=0,n=c.length-1;n>u;u++)d.push([g,c[u],c[u+1]])}),d};n.geom.voronoi=function(a){function c(a){var e,f,l,u=a.map(function(){return[]}),p=N(g),r=N(q),L=a.length;if(p===sa&&r===va)e=a;else{e=[];for(l=0;L>l;++l)e.push([+p.call(this,f=a[l],l),+r.call(this,f,l)])}if(zc(e,function(a){var e,c,d,f,m,g;1===a.a&&0<=a.b?(e=a.ep.r,c=a.ep.l):(e=a.ep.l,c=a.ep.r);1===a.a?(m=e?e.y:-1E6,d=a.c-a.b*m,g=c?c.y:1E6,f=a.c-a.b*g):(d=e?e.x:-1E6,m=a.c-a.a*d,f=c?c.x:1E6,g=a.c-a.a*f);e=[d,m];f=[f,g];u[a.region.l.index].push(e,
f);u[a.region.r.index].push(e,f)}),u=u.map(function(a,c){var d=e[c][0],f=e[c][1],m=a.map(function(a){return Math.atan2(a[0]-d,a[1]-f)}),g=n.range(a.length).sort(function(a,e){return m[a]-m[e]});return g.filter(function(a,e){return!e||m[a]-m[g[e-1]]>M}).map(function(e){return a[e]})}),u.forEach(function(a,c){var d=a.length;if(!d)return a.push([-1E6,-1E6],[-1E6,1E6],[1E6,1E6],[1E6,-1E6]);if(!(2<d)){var f=e[c],m=a[0],g=a[1],d=f[0],f=f[1],l=m[0],m=m[1],q=g[0],u=g[1],n=Math.abs(q-l),g=u-m;Math.abs(g)<
M?(d=m>f?-1E6:1E6,a.push([-1E6,d],[1E6,d])):M>n?(d=l>d?-1E6:1E6,a.push([d,-1E6],[d,1E6])):(d=(l-d)*(u-m)>(q-l)*(m-f)?1E6:-1E6,f=Math.abs(g)-n,Math.abs(f)<M?a.push([0>g?d:-d,d]):(0<f&&(d*=-1),a.push([-1E6,d],[1E6,d])))}}),d)for(l=0;L>l;++l)d(u[l]);for(l=0;L>l;++l)u[l].point=a[l];return u}var d,f=null,g=sa,q=va;return arguments.length?c(a):(c.x=function(a){return arguments.length?(g=a,c):g},c.y=function(a){return arguments.length?(q=a,c):q},c.size=function(a){return arguments.length?(null==a?d=null:
(f=[+a[0],+a[1]],d=n.geom.polygon([[0,0],[0,f[1]],f,[f[0],0]]).clip),c):f},c.links=function(a){var e,c,d,f=a.map(function(){return[]}),m=[],l=N(g),u=N(q),n=a.length;if(l===sa&&u===va)e=a;else for(d=0;n>d;++d)e.push([+l.call(this,c=a[d],d),+u.call(this,c,d)]);return zc(e,function(e){var c=e.region.l.index;e=e.region.r.index;f[c][e]||(f[c][e]=f[e][c]=!0,m.push({source:a[c],target:a[e]}))}),m},c.triangles=function(a){if(g===sa&&q===va)return n.geom.delaunay(a);var e,c,d,f,m,l=N(g),u=N(q);f=0;e=[];for(m=
a.length;m>f;++f)c=[+l.call(this,d=a[f],f),+u.call(this,d,f)],c.data=d,e.push(c);return n.geom.delaunay(e).map(function(a){return a.map(function(a){return a.data})})},c)};var Ac={l:"r",r:"l"};n.geom.quadtree=function(a,c,d,f,g){function l(a){function e(a,c,d,f,m,g,l,s){if(!isNaN(d)&&!isNaN(f))if(a.leaf){var u=a.x,n=a.y;if(null!=u){if(!(0.01>Math.abs(u-d)+Math.abs(n-f))){var p=a.point;a.x=a.y=a.point=null;q(a,p,u,n,m,g,l,s)}q(a,c,d,f,m,g,l,s)}else a.x=d,a.y=f,a.point=c}else q(a,c,d,f,m,g,l,s)}function q(a,
c,d,f,m,g,l,s){var u=0.5*(m+l),n=0.5*(g+s),p=d>=u,r=f>=n,v=(r<<1)+p;a.leaf=!1;a=a.nodes[v]||(a.nodes[v]=$d());p?m=u:l=u;r?g=n:s=n;e(a,c,d,f,m,g,l,s)}var r,t,D,z,B,A,H,O,G,x=N(s),y=N(p);if(null!=c)A=c,H=d,O=f,G=g;else if(O=G=-(A=H=1/0),t=[],D=[],B=a.length,n)for(z=0;B>z;++z)r=a[z],r.x<A&&(A=r.x),r.y<H&&(H=r.y),r.x>O&&(O=r.x),r.y>G&&(G=r.y),t.push(r.x),D.push(r.y);else for(z=0;B>z;++z){var X=+x(r=a[z],z);r=+y(r,z);A>X&&(A=X);H>r&&(H=r);X>O&&(O=X);r>G&&(G=r);t.push(X);D.push(r)}X=O-A;r=G-H;X>r?G=H+X:
O=A+r;var C=$d();if(C.add=function(a){e(C,a,+x(a,++z),+y(a,z),A,H,O,G)},C.visit=function(a){$a(a,C,A,H,O,G)},z=-1,null==c){for(;++z<B;)e(C,a[z],t[z],D[z],A,H,O,G);--z}else a.forEach(C.add);return t=D=a=r=null,C}var n,s=sa,p=va;return(n=arguments.length)?(s=Nf,p=Of,3===n&&(g=d,f=c,d=c=0),l(a)):(l.x=function(a){return arguments.length?(s=a,l):s},l.y=function(a){return arguments.length?(p=a,l):p},l.size=function(a){return arguments.length?(null==a?c=d=f=g=null:(c=d=0,f=+a[0],g=+a[1]),l):null==c?null:
[f,g]},l)};n.interpolateRgb=Bc;n.transform=function(a){var c=la.createElementNS(n.ns.prefix.svg,"g");return(n.transform=function(a){c.setAttribute("transform",a);a=c.transform.baseVal.consolidate();return new ae(a?a.matrix:Yg)})(a)};ae.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Yg={a:1,b:0,c:0,d:1,e:0,f:0};n.interpolateNumber=wa;n.interpolateTransform=xb;n.interpolateObject=ce;n.interpolateString=de;var yb=
/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;n.interpolate=Ga;n.interpolators=[function(a,c){var d=typeof c;return("string"===d||d!==typeof a?ib.has(c)||/^(#|rgb\(|hsl\()/.test(c)?Bc:de:c instanceof La?Bc:"object"===d?Array.isArray(c)?ee:ce:wa)(a,c)}];n.interpolateArray=ee;var ef=function(){return na},Zg=n.map({linear:ef,poly:function(a){return function(c){return Math.pow(c,a)}},quad:function(){return Qf},cubic:function(){return Rf},sin:function(){return Sf},exp:function(){return Tf},circle:function(){return Uf},
elastic:function(a,c){var d;return 2>arguments.length&&(c=0.45),arguments.length?d=c/(2*C)*Math.asin(1/a):(a=1,d=c/4),function(f){return 1+a*Math.pow(2,10*-f)*Math.sin(2*(f-d)*C/c)}},back:function(a){return a||(a=1.70158),function(c){return c*c*((a+1)*c-a)}},bounce:function(){return Vf}}),$g=n.map({"in":na,out:fe,"in-out":ge,"out-in":function(a){return ge(fe(a))}});n.ease=function(a){var c=a.indexOf("-"),d=0<=c?a.substring(0,c):a,c=0<=c?a.substring(c+1):"in";return d=Zg.get(d)||ef,c=$g.get(c)||na,
Pf(c(d.apply(null,Array.prototype.slice.call(arguments,1))))};n.interpolateHcl=function(a,c){a=n.hcl(a);c=n.hcl(c);var d=a.h,f=a.c,g=a.l,l=c.h-d,p=c.c-f,s=c.l-g;return 180<l?l-=360:-180>l&&(l+=360),function(a){return Vb(d+l*a,f+p*a,g+s*a)+""}};n.interpolateHsl=function(a,c){a=n.hsl(a);c=n.hsl(c);var d=a.h,f=a.s,g=a.l,l=c.h-d,p=c.s-f,s=c.l-g;return 180<l?l-=360:-180>l&&(l+=360),function(a){return fb(d+l*a,f+p*a,g+s*a)+""}};n.interpolateLab=function(a,c){a=n.lab(a);c=n.lab(c);var d=a.l,f=a.a,g=a.b,
l=c.l-d,p=c.a-f,s=c.b-g;return function(a){return md(d+l*a,f+p*a,g+s*a)+""}};n.interpolateRound=he;n.layout={};n.layout.bundle=function(){return function(a){for(var c=[],d=-1,f=a.length;++d<f;)c.push(Yf(a[d]));return c}};n.layout.chord=function(){function a(){var e,t,x,D,z,B={},A=[],H=n.range(l),O=[];d=[];f=[];e=0;for(D=-1;++D<l;){t=0;for(z=-1;++z<l;)t+=g[D][z];A.push(t);O.push(n.range(l));e+=t}p&&H.sort(function(a,e){return p(A[a],A[e])});s&&O.forEach(function(a,e){a.sort(function(a,c){return s(g[e][a],
g[e][c])})});e=(2*C-F*l)/e;t=0;for(D=-1;++D<l;){x=t;for(z=-1;++z<l;){var G=H[D],y=O[G][z],jd=g[G][y],X=t,I=t+=jd*e;B[G+"-"+y]={index:G,subindex:y,startAngle:X,endAngle:I,value:jd}}f[G]={index:G,startAngle:x,endAngle:t,value:(t-x)/e};t+=F}for(D=-1;++D<l;)for(z=D-1;++z<l;)e=B[D+"-"+z],t=B[z+"-"+D],(e.value||t.value)&&d.push(e.value<t.value?{source:t,target:e}:{source:e,target:t});r&&c()}function c(){d.sort(function(a,e){return r((a.source.value+a.target.value)/2,(e.source.value+e.target.value)/2)})}
var d,f,g,l,p,s,r,t={},F=0;return t.matrix=function(a){return arguments.length?(l=(g=a)&&g.length,d=f=null,t):g},t.padding=function(a){return arguments.length?(F=a,d=f=null,t):F},t.sortGroups=function(a){return arguments.length?(p=a,d=f=null,t):p},t.sortSubgroups=function(a){return arguments.length?(s=a,d=null,t):s},t.sortChords=function(a){return arguments.length?(r=a,d&&c(),t):r},t.chords=function(){return d||a(),d},t.groups=function(){return f||a(),f},t};n.layout.force=function(){function a(e){return function(a,
c,d,f){if(a.point!==e){d=a.cx-e.x;var g=a.cy-e.y,m=1/Math.sqrt(d*d+g*g);if(z>(f-c)*m)return c=a.charge*m*m,e.px-=d*c,e.py-=g*c,!0;a.point&&isFinite(m)&&(c=a.pointCharge*m*m,e.px-=d*c,e.py-=g*c)}return!a.charge}}function c(a){a.px=n.event.x;a.py=n.event.y;s.resume()}var d,f,g,l,p,s={},r=n.dispatch("start","tick","end"),t=[1,1],F=0.9,x=ah,E=bh,y=-30,D=0.1,z=0.8,B=[],A=[];return s.tick=function(){if(0.005>(f*=0.99))return r.end({type:"end",alpha:f=0}),!0;var c,d,m,s,u,z,E,x,R=B.length,C=A.length;for(d=
0;C>d;++d)m=A[d],c=m.source,s=m.target,E=s.x-c.x,x=s.y-c.y,(u=E*E+x*x)&&(u=f*l[d]*((u=Math.sqrt(u))-g[d])/u,E*=u,x*=u,s.x-=E*(z=c.weight/(s.weight+c.weight)),s.y-=x*z,c.x+=E*(z=1-z),c.y+=x*z);if((z=f*D)&&(E=t[0]/2,x=t[1]/2,d=-1,z))for(;++d<R;)m=B[d],m.x+=(E-m.x)*z,m.y+=(x-m.y)*z;if(y){je(c=n.geom.quadtree(B),f,p);for(d=-1;++d<R;)(m=B[d]).fixed||c.visit(a(m))}for(d=-1;++d<R;)m=B[d],m.fixed?(m.x=m.px,m.y=m.py):(m.x-=(m.px-(m.px=m.x))*F,m.y-=(m.py-(m.py=m.y))*F);r.tick({type:"tick",alpha:f})},s.nodes=
function(a){return arguments.length?(B=a,s):B},s.links=function(a){return arguments.length?(A=a,s):A},s.size=function(a){return arguments.length?(t=a,s):t},s.linkDistance=function(a){return arguments.length?(x="function"==typeof a?a:+a,s):x},s.distance=s.linkDistance,s.linkStrength=function(a){return arguments.length?(E="function"==typeof a?a:+a,s):E},s.friction=function(a){return arguments.length?(F=+a,s):F},s.charge=function(a){return arguments.length?(y="function"==typeof a?a:+a,s):y},s.gravity=
function(a){return arguments.length?(D=+a,s):D},s.theta=function(a){return arguments.length?(z=+a,s):z},s.alpha=function(a){return arguments.length?(a=+a,f?f=0<a?a:0:0<a&&(r.start({type:"start",alpha:f=a}),n.timer(s.tick)),s):f},s.start=function(){function a(f,g){var l,q;if(!d){d=[];for(c=0;m>c;++c)d[c]=[];for(c=0;n>c;++c)l=A[c],d[l.source.index].push(l.target),d[l.target.index].push(l.source)}q=d[e];for(var s=-1,u=q.length;++s<u;)if(!isNaN(l=q[s][f]))return l;return Math.random()*g}var e,c,d,f,m=
B.length,n=A.length,u=t[0],r=t[1];for(e=0;m>e;++e)(f=B[e]).index=e,f.weight=0;for(e=0;n>e;++e)f=A[e],"number"==typeof f.source&&(f.source=B[f.source]),"number"==typeof f.target&&(f.target=B[f.target]),++f.source.weight,++f.target.weight;for(e=0;m>e;++e)f=B[e],isNaN(f.x)&&(f.x=a("x",u)),isNaN(f.y)&&(f.y=a("y",r)),isNaN(f.px)&&(f.px=f.x),isNaN(f.py)&&(f.py=f.y);if(g=[],"function"==typeof x)for(e=0;n>e;++e)g[e]=+x.call(this,A[e],e);else for(e=0;n>e;++e)g[e]=x;if(l=[],"function"==typeof E)for(e=0;n>e;++e)l[e]=
+E.call(this,A[e],e);else for(e=0;n>e;++e)l[e]=E;if(p=[],"function"==typeof y)for(e=0;m>e;++e)p[e]=+y.call(this,B[e],e);else for(e=0;m>e;++e)p[e]=y;return s.resume()},s.resume=function(){return s.alpha(0.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){return d||(d=n.behavior.drag().origin(na).on("dragstart.force",Zf).on("drag.force",c).on("dragend.force",$f)),arguments.length?(this.on("mouseover.force",ag).on("mouseout.force",bg).call(d),void 0):d},n.rebind(s,r,"on")};var ah=20,bh=1;n.layout.hierarchy=
function(){function a(c,s,n){var u=g.call(d,c,s);if(c.depth=s,n.push(c),u&&(p=u.length)){for(var p,r=-1,t=c.children=[],x=0,D=s+1;++r<p;)s=a(u[r],D,n),s.parent=c,t.push(s),x+=s.value;f&&t.sort(f);l&&(c.value=x)}else l&&(c.value=+l.call(d,c,s)||0);return c}function c(a,e){var f=a.children,g=0;if(f&&(n=f.length))for(var n,p=-1,r=e+1;++p<n;)g+=c(f[p],r);else l&&(g=+l.call(d,a,e)||0);return l&&(a.value=g),g}function d(c){var f=[];return a(c,0,f),f}var f=fg,g=dg,l=eg;return d.sort=function(a){return arguments.length?
(f=a,d):f},d.children=function(a){return arguments.length?(g=a,d):g},d.value=function(a){return arguments.length?(l=a,d):l},d.revalue=function(a){return c(a,0),a},d};n.layout.partition=function(){function a(c,d,f,m){var g=c.children;if(c.x=d,c.y=c.depth*m,c.dx=f,c.dy=m,g&&(l=g.length)){var l,n,u=-1;for(f=c.value?f/c.value:0;++u<l;)a(n=g[u],d,c=n.value*f,m),d+=c}}function c(a){a=a.children;var e=0;if(a&&(d=a.length))for(var d,f=-1;++f<d;)e=Math.max(e,c(a[f]));return 1+e}function d(m,l){var s=f.call(this,
m,l);return a(s[0],0,g[0],g[1]/c(s[0])),s}var f=n.layout.hierarchy(),g=[1,1];return d.size=function(a){return arguments.length?(g=a,d):g},ab(d,f)};n.layout.pie=function(){function a(l){var p=l.map(function(d,f){return+c.call(a,d,f)}),s=+("function"==typeof f?f.apply(this,arguments):f),r=(("function"==typeof g?g.apply(this,arguments):g)-s)/n.sum(p),t=n.range(l.length);null!=d&&t.sort(d===ff?function(a,e){return p[e]-p[a]}:function(a,e){return d(l[a],l[e])});var x=[];return t.forEach(function(a){var e;
x[a]={data:l[a],value:e=p[a],startAngle:s,endAngle:s+=e*r}}),x}var c=Number,d=ff,f=0,g=2*C;return a.value=function(d){return arguments.length?(c=d,a):c},a.sort=function(c){return arguments.length?(d=c,a):d},a.startAngle=function(c){return arguments.length?(f=c,a):f},a.endAngle=function(c){return arguments.length?(g=c,a):g},a};var ff={};n.layout.stack=function(){function a(s,r){var t=s.map(function(d,f){return c.call(a,d,f)}),x=t.map(function(c){return c.map(function(c,d){return[l.call(a,c,d),p.call(a,
c,d)]})}),y=d.call(a,x,r),t=n.permute(t,y),x=n.permute(x,y),E,W,D=f.call(a,x,r),z=t.length,B=t[0].length;for(E=0;B>E;++E){g.call(a,t[0][E],W=D[E],x[0][E][1]);for(y=1;z>y;++y)g.call(a,t[y][E],W+=x[y-1][E][1],x[y][E][1])}return s}var c=na,d=Cc,f=Dc,g=ig,l=gg,p=hg;return a.values=function(d){return arguments.length?(c=d,a):c},a.order=function(c){return arguments.length?(d="function"==typeof c?c:ch.get(c)||Cc,a):d},a.offset=function(c){return arguments.length?(f="function"==typeof c?c:dh.get(c)||Dc,a):
f},a.x=function(c){return arguments.length?(l=c,a):l},a.y=function(c){return arguments.length?(p=c,a):p},a.out=function(c){return arguments.length?(g=c,a):g},a};var ch=n.map({"inside-out":function(a){var c,d=a.length,f=a.map(jg),g=a.map(kg),l=n.range(d).sort(function(a,e){return f[a]-f[e]}),p=0,s=0,r=[],t=[];for(a=0;d>a;++a)c=l[a],s>p?(p+=g[c],r.push(c)):(s+=g[c],t.push(c));return t.reverse().concat(r)},reverse:function(a){return n.range(a.length).reverse()},"default":Cc}),dh=n.map({silhouette:function(a){var c,
d,f,g=a.length,l=a[0].length,n=[],s=0,p=[];for(d=0;l>d;++d){for(f=c=0;g>c;c++)f+=a[c][d][1];f>s&&(s=f);n.push(f)}for(d=0;l>d;++d)p[d]=(s-n[d])/2;return p},wiggle:function(a){var c,d,f,g,l,n,s,p,r,t=a.length,x=a[0],E=x.length,y=[];y[0]=p=r=0;for(d=1;E>d;++d){for(g=c=0;t>c;++c)g+=a[c][d][1];l=c=0;for(s=x[d][0]-x[d-1][0];t>c;++c){f=0;for(n=(a[c][d][1]-a[c][d-1][1])/(2*s);c>f;++f)n+=(a[f][d][1]-a[f][d-1][1])/s;l+=n*a[c][d][1]}y[d]=p-=g?l/g*s:0;r>p&&(r=p)}for(d=0;E>d;++d)y[d]-=r;return y},expand:function(a){var c,
d,f,g=a.length,l=a[0].length,n=1/g,s=[];for(d=0;l>d;++d){for(f=c=0;g>c;c++)f+=a[c][d][1];if(f)for(c=0;g>c;c++)a[c][d][1]/=f;else for(c=0;g>c;c++)a[c][d][1]=n}for(d=0;l>d;++d)s[d]=0;return s},zero:Dc});n.layout.histogram=function(){function a(e,l){var s,p,r=[],t=e.map(d,this),x=f.call(this,t,l),E=g.call(this,x,t,l);l=-1;for(var y=t.length,D=E.length-1,z=c?1:1/y;++l<D;)s=r[l]=[],s.dx=E[l+1]-(s.x=E[l]),s.y=0;if(0<D)for(l=-1;++l<y;)p=t[l],p>=x[0]&&p<=x[1]&&(s=r[n.bisect(E,p,1,D)-1],s.y+=z,s.push(e[l]));
return r}var c=!0,d=Number,f=ng,g=mg;return a.value=function(c){return arguments.length?(d=c,a):d},a.range=function(c){return arguments.length?(f=N(c),a):f},a.bins=function(c){return arguments.length?(g="number"==typeof c?function(a){return ke(a,c)}:N(c),a):g},a.frequency=function(d){return arguments.length?(c=!!d,a):c},a};n.layout.tree=function(){function a(e,g){function l(a,e){var c=a.children,f=a._tree;if(c&&(g=c.length)){for(var g,q,n,s=c[0],p=s,r=-1;++r<g;){n=c[r];l(n,q);var u=n;if(q){for(var v=
void 0,t=u,x=u,D=u.parent.children[0],z=t._tree.mod,L=x._tree.mod,E=q._tree.mod,y=D._tree.mod;q=Fc(q),t=Ec(t),q&&t;){D=Ec(D);x=Fc(x);x._tree.ancestor=u;v=q._tree.prelim+E-t._tree.prelim-z+d(q,t);if(0<v){var J=q._tree.ancestor.parent==u.parent?q._tree.ancestor:p,F=u,R=v,J=J._tree,F=F._tree,C=R/(F.number-J.number);J.change+=C;F.change-=C;F.shift+=R;F.prelim+=R;F.mod+=R;z+=v;L+=v}E+=q._tree.mod;z+=t._tree.mod;y+=D._tree.mod;L+=x._tree.mod}q&&!Fc(x)&&(x._tree.thread=q,x._tree.mod+=E-L);t&&!Ec(D)&&(D._tree.thread=
t,D._tree.mod+=z-y,p=u)}q=n}r=g=0;u=a.children;for(p=u.length;0<=--p;)c=u[p]._tree,c.prelim+=g,c.mod+=g,g+=c.shift+(r+=c.change);n=0.5*(s._tree.prelim+n._tree.prelim);e?(f.prelim=e._tree.prelim+d(a,e),f.mod=f.prelim-n):f.prelim=n}else e&&(f.prelim=e._tree.prelim+d(a,e))}function n(a,e){a.x=a._tree.prelim+e;var c=a.children;if(c&&(d=c.length)){var d,f=-1;for(e+=a._tree.mod;++f<d;)n(c[f],e)}}var p=c.call(this,e,g),r=p[0];xa(r,function(a,e){a._tree={ancestor:a,prelim:0,mod:0,change:0,shift:0,number:e?
e._tree.number+1:0}});l(r);n(r,-r._tree.prelim);var t=zb(r,pg),x=zb(r,og),E=zb(r,qg),y=t.x-d(t,x)/2,D=x.x+d(x,t)/2,z=E.depth||1;return xa(r,function(a){a.x=(a.x-y)/(D-y)*f[0];a.y=a.depth/z*f[1];delete a._tree}),p}var c=n.layout.hierarchy().sort(null).value(null),d=le,f=[1,1];return a.separation=function(c){return arguments.length?(d=c,a):d},a.size=function(c){return arguments.length?(f=c,a):f},ab(a,c)};n.layout.pack=function(){function a(e,g){var l=c.call(this,e,g),n=l[0];n.x=0;n.y=0;xa(n,function(a){a.r=
Math.sqrt(a.value)});xa(n,oe);var p=f[0],r=f[1],t=Math.max(2*n.r/p,2*n.r/r);if(0<d){var x=d*t/2;xa(n,function(a){a.r+=x});xa(n,oe);xa(n,function(a){a.r-=x});t=Math.max(2*n.r/p,2*n.r/r)}return qe(n,p/2,r/2,1/t),l}var c=n.layout.hierarchy().sort(rg),d=0,f=[1,1];return a.size=function(c){return arguments.length?(f=c,a):f},a.padding=function(c){return arguments.length?(d=+c,a):d},ab(a,c)};n.layout.cluster=function(){function a(e,g){var l,n=c.call(this,e,g),p=n[0],r=0;xa(p,function(a){var c=a.children;
c&&c.length?(a.x=vg(c),a.y=ug(c)):(a.x=l?r+=d(a,l):0,a.y=0,l=a)});var t=re(p),x=se(p),y=t.x-d(t,x)/2,C=x.x+d(x,t)/2;return xa(p,function(a){a.x=(a.x-y)/(C-y)*f[0];a.y=(1-(p.y?a.y/p.y:1))*f[1]}),n}var c=n.layout.hierarchy().sort(null).value(null),d=le,f=[1,1];return a.separation=function(c){return arguments.length?(d=c,a):d},a.size=function(c){return arguments.length?(f=c,a):f},ab(a,c)};n.layout.treemap=function(){function a(c,e){for(var d,f,g=-1,m=c.length;++g<m;)f=(d=c[g]).value*(0>e?0:e),d.area=
isNaN(f)||0>=f?0:f}function c(d){var g=d.children;if(g&&g.length){var m,l=x(d),q=[],n=g.slice(),s=1/0,p="slice"===E?l.dx:"dice"===E?l.dy:"slice-dice"===E?d.depth&1?l.dy:l.dx:Math.min(l.dx,l.dy);a(n,l.dx*l.dy/d.value);for(q.area=0;0<(d=n.length);){q.push(d=n[d-1]);q.area+=d.area;var r;if(!(r="squarify"!==E)){d=p;m=void 0;var v=q.area;r=0;for(var t=1/0,y=-1,J=q.length;++y<J;)(m=q[y].area)&&(t>m&&(t=m),m>r&&(r=m));r=(m=(v*=v,d*=d,v?Math.max(d*r*C/v,v/(d*t*C)):1/0))<=s}r?(n.pop(),s=m):(q.area-=q.pop().area,
f(q,p,l,!1),p=Math.min(l.dx,l.dy),q.length=q.area=0,s=1/0)}q.length&&(f(q,p,l,!0),q.length=q.area=0);g.forEach(c)}}function d(c){var g=c.children;if(g&&g.length){var l=x(c),q=g.slice(),n=[];a(q,l.dx*l.dy/c.value);for(n.area=0;c=q.pop();)n.push(c),n.area+=c.area,null!=c.z&&(f(n,c.z?l.dx:l.dy,l,!q.length),n.length=n.area=0);g.forEach(d)}}function f(a,c,e,d){var g,m=-1,l=a.length,q=e.x,n=e.y,p=c?s(a.area/c):0;if(c==e.dx){for((d||p>e.dy)&&(p=e.dy);++m<l;)g=a[m],g.x=q,g.y=n,g.dy=p,q+=g.dx=Math.min(e.x+
e.dx-q,p?s(g.area/p):0);g.z=!0;g.dx+=e.x+e.dx-q;e.y+=p;e.dy-=p}else{for((d||p>e.dx)&&(p=e.dx);++m<l;)g=a[m],g.x=q,g.y=n,g.dx=p,n+=g.dy=Math.min(e.y+e.dy-n,p?s(g.area/p):0);g.z=!1;g.dy+=e.y+e.dy-n;e.x+=p;e.dx-=p}}function g(f){f=l||p(f);var n=f[0];return n.x=0,n.y=0,n.dx=r[0],n.dy=r[1],l&&p.revalue(n),a([n],n.dx*n.dy/n.value),(l?d:c)(n),y&&(l=f),f}var l,p=n.layout.hierarchy(),s=Math.round,r=[1,1],t=null,x=Hc,y=!1,E="squarify",C=0.5*(1+Math.sqrt(5));return g.size=function(a){return arguments.length?
(r=a,g):r},g.padding=function(a){function c(e){var d=a.call(g,e,e.depth);return null==d?Hc(e):te(e,"number"==typeof d?[d,d,d,d]:d)}function e(c){return te(c,a)}if(!arguments.length)return t;var d;return x=null==(t=a)?Hc:"function"==(d=typeof a)?c:"number"===d?(a=[a,a,a,a],e):e,g},g.round=function(a){return arguments.length?(s=a?Math.round:Number,g):s!=Number},g.sticky=function(a){return arguments.length?(y=a,l=null,g):y},g.ratio=function(a){return arguments.length?(C=a,g):C},g.mode=function(a){return arguments.length?
(E=a+"",g):E},ab(g,p)};n.random={normal:function(a,c){var d=arguments.length;return 2>d&&(c=1),1>d&&(a=0),function(){var d,f;do d=2*Math.random()-1,f=2*Math.random()-1,f=d*d+f*f;while(!f||1<f);return a+c*d*Math.sqrt(-2*Math.log(f)/f)}},logNormal:function(){var a=n.random.normal.apply(n,arguments);return function(){return Math.exp(a())}},irwinHall:function(a){return function(){for(var c=0,d=0;a>d;d++)c+=Math.random();return c/a}}};n.scale={};n.scale.linear=function(){return ue([0,1],[0,1],Ga,!1)};
n.scale.log=function(){return ze(n.scale.linear().domain([0,Math.LN10]),10,Ae,Be)};var Ag=n.format(".0e");n.scale.pow=function(){return Ce(n.scale.linear(),1)};n.scale.sqrt=function(){return n.scale.pow().exponent(0.5)};n.scale.ordinal=function(){return De([],{t:"range",a:[[]]})};n.scale.category10=function(){return n.scale.ordinal().range(eh)};n.scale.category20=function(){return n.scale.ordinal().range(fh)};n.scale.category20b=function(){return n.scale.ordinal().range(gh)};n.scale.category20c=function(){return n.scale.ordinal().range(hh)};
var eh="#1f77b4 #ff7f0e #2ca02c #d62728 #9467bd #8c564b #e377c2 #7f7f7f #bcbd22 #17becf".split(" "),fh="#1f77b4 #aec7e8 #ff7f0e #ffbb78 #2ca02c #98df8a #d62728 #ff9896 #9467bd #c5b0d5 #8c564b #c49c94 #e377c2 #f7b6d2 #7f7f7f #c7c7c7 #bcbd22 #dbdb8d #17becf #9edae5".split(" "),gh="#393b79 #5254a3 #6b6ecf #9c9ede #637939 #8ca252 #b5cf6b #cedb9c #8c6d31 #bd9e39 #e7ba52 #e7cb94 #843c39 #ad494a #d6616b #e7969c #7b4173 #a55194 #ce6dbd #de9ed6".split(" "),hh="#3182bd #6baed6 #9ecae1 #c6dbef #e6550d #fd8d3c #fdae6b #fdd0a2 #31a354 #74c476 #a1d99b #c7e9c0 #756bb1 #9e9ac8 #bcbddc #dadaeb #636363 #969696 #bdbdbd #d9d9d9".split(" ");
n.scale.quantile=function(){return Ee([],[])};n.scale.quantize=function(){return Fe(0,1,[0,1])};n.scale.threshold=function(){return Ge([0.5],[0,1])};n.scale.identity=function(){return He([0,1])};n.svg.arc=function(){function a(){var e=c.apply(this,arguments),l=d.apply(this,arguments),n=f.apply(this,arguments)+Ha,p=g.apply(this,arguments)+Ha,r=(n>p&&(r=n,n=p,p=r),p-n),t=C>r?"0":"1",x=Math.cos(n),n=Math.sin(n),y=Math.cos(p),p=Math.sin(p);return r>=ih?e?"M0,"+l+"A"+l+","+l+" 0 1,1 0,"+-l+"A"+l+","+l+
" 0 1,1 0,"+l+"M0,"+e+"A"+e+","+e+" 0 1,0 0,"+-e+"A"+e+","+e+" 0 1,0 0,"+e+"Z":"M0,"+l+"A"+l+","+l+" 0 1,1 0,"+-l+"A"+l+","+l+" 0 1,1 0,"+l+"Z":e?"M"+l*x+","+l*n+"A"+l+","+l+" 0 "+t+",1 "+l*y+","+l*p+"L"+e*y+","+e*p+"A"+e+","+e+" 0 "+t+",0 "+e*x+","+e*n+"Z":"M"+l*x+","+l*n+"A"+l+","+l+" 0 "+t+",1 "+l*y+","+l*p+"L0,0Z"}var c=Bg,d=Cg,f=Ie,g=Je;return a.innerRadius=function(d){return arguments.length?(c=N(d),a):c},a.outerRadius=function(c){return arguments.length?(d=N(c),a):d},a.startAngle=function(c){return arguments.length?
(f=N(c),a):f},a.endAngle=function(c){return arguments.length?(g=N(c),a):g},a.centroid=function(){var a=(c.apply(this,arguments)+d.apply(this,arguments))/2,e=(f.apply(this,arguments)+g.apply(this,arguments))/2+Ha;return[Math.cos(e)*a,Math.sin(e)*a]},a};var Ha=-C/2,ih=2*C-1E-6;n.svg.line.radial=function(){var a=Vd(Ke);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a};uc.reverse=vc;vc.reverse=uc;n.svg.area=function(){return Le(na)};n.svg.area.radial=function(){var a=Le(Ke);return a.radius=a.x,
delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a};n.svg.chord=function(){function a(e,g){var l=c(this,d,e,g),n=c(this,f,e,g);return"M"+l.p0+("A"+l.r+","+l.r+" 0 "+ +(l.a1-l.a0>C)+",1 "+l.p1)+(l.a0==n.a0&&l.a1==n.a1?"Q 0,0 "+l.p0:"Q 0,0 "+n.p0+("A"+n.r+","+n.r+" 0 "+ +(n.a1-n.a0>C)+",1 "+n.p1)+("Q 0,0 "+l.p0))+"Z"}function c(a,e,d,f){var m=e.call(a,d,f);e=g.call(a,m,f);d=l.call(a,m,f)+Ha;a=n.call(a,
m,f)+Ha;return{r:e,a0:d,a1:a,p0:[e*Math.cos(d),e*Math.sin(d)],p1:[e*Math.cos(a),e*Math.sin(a)]}}var d=nc,f=oc,g=Dg,l=Ie,n=Je;return a.radius=function(c){return arguments.length?(g=N(c),a):g},a.source=function(c){return arguments.length?(d=N(c),a):d},a.target=function(c){return arguments.length?(f=N(c),a):f},a.startAngle=function(c){return arguments.length?(l=N(c),a):l},a.endAngle=function(c){return arguments.length?(n=N(c),a):n},a};n.svg.diagonal=function(){function a(e,g){var l=c.call(this,e,g),
n=d.call(this,e,g),p=(l.y+n.y)/2,l=[l,{x:l.x,y:p},{x:n.x,y:p},n];return l=l.map(f),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var c=nc,d=oc,f=Me;return a.source=function(d){return arguments.length?(c=N(d),a):c},a.target=function(c){return arguments.length?(d=N(c),a):d},a.projection=function(c){return arguments.length?(f=c,a):f},a};n.svg.diagonal.radial=function(){var a=n.svg.diagonal(),c=Me,d=a.projection;return a.projection=function(a){return arguments.length?d(Eg(c=a)):c},a};n.svg.symbol=function(){function a(e,
f){return(gf.get(c.call(this,e,f))||Ne)(d.call(this,e,f))}var c=Gg,d=Fg;return a.type=function(d){return arguments.length?(c=N(d),a):c},a.size=function(c){return arguments.length?(d=N(c),a):d},a};var gf=n.map({circle:Ne,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*hf));var c=a*hf;return"M0,"+-a+"L"+c+",0 0,"+a+" "+-c+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+
-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/Pb);var c=a*Pb/2;return"M0,"+c+"L"+a+","+-c+" "+-a+","+-c+"Z"},"triangle-up":function(a){a=Math.sqrt(a/Pb);var c=a*Pb/2;return"M0,"+-c+"L"+a+","+c+" "+-a+","+c+"Z"}});n.svg.symbolTypes=gf.keys();var eb,Pb=Math.sqrt(3),hf=Math.tan(30*K),ea=[],Xe=0,Ib={ease:function(a){if(0>=a)return 0;if(1<=a)return 1;var c=a*a,d=c*a;return 4*(0.5>a?d:3*(a-c)+d-0.75)},delay:0,duration:250};ea.call=S.call;ea.empty=S.empty;
ea.node=S.node;n.transition=function(a){return arguments.length?eb?a.transition():a:db.transition()};n.transition.prototype=ea;ea.select=function(a){var c,d,f,g=this.id,l=[];"function"!=typeof a&&(a=Q(a));for(var n=-1,p=this.length;++n<p;){l.push(c=[]);for(var r=this[n],t=-1,x=r.length;++t<x;)(f=r[t])&&(d=a.call(f,f.__data__,t))?("__data__"in f&&(d.__data__=f.__data__),Db(d,t,g,f.__transition__[g]),c.push(d)):c.push(null)}return cb(l,g)};ea.selectAll=function(a){var c,d,f,g,l=this.id,n=[];"function"!=
typeof a&&(a=Y(a));for(var p=-1,r=this.length;++p<r;)for(var t=this[p],x=-1,y=t.length;++x<y;)if(c=t[x]){g=c.__transition__[l];d=a.call(c,c.__data__,x);n.push(c=[]);for(var E=-1,C=d.length;++E<C;)Db(f=d[E],E,l,g),c.push(f)}return cb(n,l)};ea.filter=function(a){var c,d,f,g=[];"function"!=typeof a&&(a=fd(a));for(var l=0,n=this.length;n>l;l++){g.push(c=[]);d=this[l];for(var p=0,r=d.length;r>p;p++)(f=d[p])&&a.call(f,f.__data__,p)&&c.push(f)}return cb(g,this.id,this.time).ease(this.ease())};ea.tween=function(a,
c){var d=this.id;return 2>arguments.length?this.node().__transition__[d].tween.get(a):Aa(this,null==c?function(c){c.__transition__[d].tween.remove(a)}:function(f){f.__transition__[d].tween.set(a,c)})};ea.attr=function(a,c){function d(){this.removeAttribute(l)}function f(){this.removeAttributeNS(l.space,l.local)}if(2>arguments.length){for(c in a)this.attr(c,a[c]);return this}var g="transform"==a?xb:Ga,l=n.ns.qualify(a);return Lc(this,"attr."+a,c,function(a){function c(){var e,d=this.getAttribute(l);
return d!==a&&(e=g(d,a),function(a){this.setAttribute(l,e(a))})}function e(){var c,d=this.getAttributeNS(l.space,l.local);return d!==a&&(c=g(d,a),function(a){this.setAttributeNS(l.space,l.local,c(a))})}return null==a?l.local?f:d:(a+="",l.local?e:c)})};ea.attrTween=function(a,c){function d(a,e){var f=c.call(this,a,e,this.getAttribute(g));return f&&function(a){this.setAttribute(g,f(a))}}function f(a,e){var d=c.call(this,a,e,this.getAttributeNS(g.space,g.local));return d&&function(a){this.setAttributeNS(g.space,
g.local,d(a))}}var g=n.ns.qualify(a);return this.tween("attr."+a,g.local?f:d)};ea.style=function(a,c,d){function f(){this.style.removeProperty(a)}var g=arguments.length;if(3>g){if("string"!=typeof a){2>g&&(c="");for(d in a)this.style(d,a[d],c);return this}d=""}var l="transform"==a?xb:Ga;return Lc(this,"style."+a,c,function(c){function g(){var f,n=ha.getComputedStyle(this,null).getPropertyValue(a);return n!==c&&(f=l(n,c),function(c){this.style.setProperty(a,f(c),d)})}return null==c?f:(c+="",g)})};
ea.styleTween=function(a,c,d){return 3>arguments.length&&(d=""),this.tween("style."+a,function(f,g){var l=c.call(this,f,g,ha.getComputedStyle(this,null).getPropertyValue(a));return l&&function(c){this.style.setProperty(a,l(c),d)}})};ea.text=function(a){return Lc(this,"text",a,Hg)};ea.remove=function(){return this.each("end.transition",function(){var a;!this.__transition__&&(a=this.parentNode)&&a.removeChild(this)})};ea.ease=function(a){var c=this.id;return 1>arguments.length?this.node().__transition__[c].ease:
("function"!=typeof a&&(a=n.ease.apply(n,arguments)),Aa(this,function(d){d.__transition__[c].ease=a}))};ea.delay=function(a){var c=this.id;return Aa(this,"function"==typeof a?function(d,f,g){d.__transition__[c].delay=a.call(d,d.__data__,f,g)|0}:(a|=0,function(d){d.__transition__[c].delay=a}))};ea.duration=function(a){var c=this.id;return Aa(this,"function"==typeof a?function(d,f,g){d.__transition__[c].duration=Math.max(1,a.call(d,d.__data__,f,g)|0)}:(a=Math.max(1,0|a),function(d){d.__transition__[c].duration=
a}))};ea.each=function(a,c){var d=this.id;if(2>arguments.length){var f=Ib,g=eb;eb=d;Aa(this,function(c,f,g){Ib=c.__transition__[d];a.call(c,c.__data__,f,g)});Ib=f;eb=g}else Aa(this,function(f){f.__transition__[d].event.on(a,c)});return this};ea.transition=function(){for(var a,c,d,f,g=this.id,l=++Xe,n=[],p=0,r=this.length;r>p;p++){n.push(a=[]);c=this[p];for(var t=0,x=c.length;x>t;t++)(d=c[t])&&(f=Object.create(d.__transition__[g]),f.delay+=f.duration,Db(d,t,l,f)),a.push(d)}return cb(n,l)};n.svg.axis=
function(){function a(e){e.each(function(){var a,e=n.select(this),D=null==x?d.ticks?d.ticks.apply(d,t):d.domain():x,z=null==c?d.tickFormat?d.tickFormat.apply(d,t):String:c,B=Ig(d,D,y),A=e.selectAll(".tick.minor").data(B,String),B=A.enter().insert("line",".tick").attr("class","tick minor").style("opacity",1E-6),C=n.transition(A.exit()).style("opacity",1E-6).remove(),A=n.transition(A).style("opacity",1),R=e.selectAll(".tick.major").data(D,String),D=R.enter().insert("g","path").attr("class","tick major").style("opacity",
1E-6),G=n.transition(R.exit()).style("opacity",1E-6).remove(),I=n.transition(R).style("opacity",1),K=Ab(d),e=e.selectAll(".domain").data([0]),e=(e.enter().append("path").attr("class","domain"),n.transition(e)),M=d.copy(),Q=this.__chart__||M;this.__chart__=M;D.append("line");D.append("text");var P=D.select("line"),N=I.select("line"),z=R.select("text").text(z),R=D.select("text"),S=I.select("text");switch(f){case "bottom":a=Oe;B.attr("y2",l);A.attr("x2",0).attr("y2",l);P.attr("y2",g);R.attr("y",Math.max(g,
0)+r);N.attr("x2",0).attr("y2",g);S.attr("x",0).attr("y",Math.max(g,0)+r);z.attr("dy",".71em").style("text-anchor","middle");e.attr("d","M"+K[0]+","+p+"V0H"+K[1]+"V"+p);break;case "top":a=Oe;B.attr("y2",-l);A.attr("x2",0).attr("y2",-l);P.attr("y2",-g);R.attr("y",-(Math.max(g,0)+r));N.attr("x2",0).attr("y2",-g);S.attr("x",0).attr("y",-(Math.max(g,0)+r));z.attr("dy","0em").style("text-anchor","middle");e.attr("d","M"+K[0]+","+-p+"V0H"+K[1]+"V"+-p);break;case "left":a=Pe;B.attr("x2",-l);A.attr("x2",
-l).attr("y2",0);P.attr("x2",-g);R.attr("x",-(Math.max(g,0)+r));N.attr("x2",-g).attr("y2",0);S.attr("x",-(Math.max(g,0)+r)).attr("y",0);z.attr("dy",".32em").style("text-anchor","end");e.attr("d","M"+-p+","+K[0]+"H0V"+K[1]+"H"+-p);break;case "right":a=Pe,B.attr("x2",l),A.attr("x2",l).attr("y2",0),P.attr("x2",g),R.attr("x",Math.max(g,0)+r),N.attr("x2",g).attr("y2",0),S.attr("x",Math.max(g,0)+r).attr("y",0),z.attr("dy",".32em").style("text-anchor","start"),e.attr("d","M"+p+","+K[0]+"H0V"+K[1]+"H"+p)}if(d.ticks)D.call(a,
Q),I.call(a,M),G.call(a,M),B.call(a,Q),A.call(a,M),C.call(a,M);else{var T=M.rangeBand()/2,B=function(a){return M(a)+T};D.call(a,B);I.call(a,B)}})}var c,d=n.scale.linear(),f=jf,g=6,l=6,p=6,r=3,t=[10],x=null,y=0;return a.scale=function(c){return arguments.length?(d=c,a):d},a.orient=function(c){return arguments.length?(f=c in jh?c+"":jf,a):f},a.ticks=function(){return arguments.length?(t=arguments,a):t},a.tickValues=function(c){return arguments.length?(x=c,a):x},a.tickFormat=function(d){return arguments.length?
(c=d,a):c},a.tickSize=function(c,d){if(!arguments.length)return g;var f=arguments.length-1;return g=+c,l=1<f?+d:g,p=0<f?+arguments[f]:g,a},a.tickPadding=function(c){return arguments.length?(r=+c,a):r},a.tickSubdivide=function(c){return arguments.length?(y=+c,a):y},a};var jf="bottom",jh={top:1,right:1,bottom:1,left:1};n.svg.brush=function(){function a(l){l.each(function(){var l,p=n.select(this),q=p.selectAll(".background").data([0]),x=p.selectAll(".extent").data([0]),y=p.selectAll(".resize").data(C,
String);p.style("pointer-events","all").on("mousedown.brush",g).on("touchstart.brush",g);q.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");x.enter().append("rect").attr("class","extent").style("cursor","move");y.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return kh[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",
6).attr("height",6).style("visibility","hidden");y.style("display",a.empty()?"none":null);y.exit().remove();r&&(l=Ab(r),q.attr("x",l[0]).attr("width",l[1]-l[0]),d(p));t&&(l=Ab(t),q.attr("y",l[0]).attr("height",l[1]-l[0]),f(p));c(p)})}function c(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+F[+/e$/.test(a)][0]+","+F[+/^s/.test(a)][1]+")"})}function d(a){a.select(".extent").attr("x",F[0][0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",F[1][0]-F[0][0])}function f(a){a.select(".extent").attr("y",
F[0][1]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",F[1][1]-F[0][1])}function g(){function v(){var a=n.event.changedTouches;return a?n.touches(A,a)[0]:n.mouse(A)}function x(){var a=v(),e=!1;B&&(a[0]+=B[0],a[1]+=B[1]);P||(n.event.altKey?(z||(z=[(F[0][0]+F[1][0])/2,(F[0][1]+F[1][1])/2]),N[0]=F[+(a[0]<z[0])][0],N[1]=F[+(a[1]<z[1])][1]):z=null);M&&C(a,r,0)&&(d(G),e=!0);Q&&C(a,t,1)&&(f(G),e=!0);e&&(c(G),I({type:"brush",mode:P?"move":"resize"}))}function C(a,c,e){var d,f,g=Ab(c);c=g[0];var g=
g[1],m=N[e],n=F[1][e]-F[0][e];return P&&(c-=m,g-=n+m),d=Math.max(c,Math.min(g,a[e])),P?f=(d+=m)+n:(z&&(m=Math.max(c,Math.min(g,2*z[e]-d))),d>m?(f=d,d=m):f=m),F[0][e]!==d||F[1][e]!==f?(l=null,F[0][e]=d,F[1][e]=f,!0):void 0}function D(){x();G.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);n.select("body").style("cursor",null);S.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",
null);I({type:"brushend"});y()}var z,B,A=this,H=n.select(n.event.target),I=p.of(A,arguments),G=n.select(A),K=H.datum(),M=!/^(n|s)$/.test(K)&&r,Q=!/^(e|w)$/.test(K)&&t,P=H.classed("extent"),N=v(),S=n.select(ha).on("mousemove.brush",x).on("mouseup.brush",D).on("touchmove.brush",x).on("touchend.brush",D).on("keydown.brush",function(){32==n.event.keyCode&&(P||(z=null,N[0]-=F[1][0],N[1]-=F[1][1],P=2),y())}).on("keyup.brush",function(){32==n.event.keyCode&&2==P&&(N[0]+=F[1][0],N[1]+=F[1][1],P=0,y())});
if(P)N[0]=F[0][0]-N[0],N[1]=F[0][1]-N[1];else if(K){var T=+/w$/.test(K),K=+/^n/.test(K);B=[F[1-T][0]-N[0],F[1-K][1]-N[1]];N[0]=F[T][0];N[1]=F[K][1]}else n.event.altKey&&(z=N.slice());G.style("pointer-events","none").selectAll(".resize").style("display",null);n.select("body").style("cursor",H.style("cursor"));I({type:"brushstart"});x();y()}var l,p=x(a,"brushstart","brush","brushend"),r=null,t=null,C=Wc[0],F=[[0,0],[0,0]];return a.x=function(c){return arguments.length?(r=c,C=Wc[!r<<1|!t],a):r},a.y=
function(c){return arguments.length?(t=c,C=Wc[!r<<1|!t],a):t},a.extent=function(c){var d,f,g,m,n;return arguments.length?(l=[[0,0],[0,0]],r&&(d=c[0],f=c[1],t&&(d=d[0],f=f[0]),l[0][0]=d,l[1][0]=f,r.invert&&(d=r(d),f=r(f)),d>f&&(n=d,d=f,f=n),F[0][0]=0|d,F[1][0]=0|f),t&&(g=c[0],m=c[1],r&&(g=g[1],m=m[1]),l[0][1]=g,l[1][1]=m,t.invert&&(g=t(g),m=t(m)),g>m&&(n=g,g=m,m=n),F[0][1]=0|g,F[1][1]=0|m),a):(c=l||F,r&&(d=c[0][0],f=c[1][0],l||(d=F[0][0],f=F[1][0],r.invert&&(d=r.invert(d),f=r.invert(f)),d>f&&(n=d,
d=f,f=n))),t&&(g=c[0][1],m=c[1][1],l||(g=F[0][1],m=F[1][1],t.invert&&(g=t.invert(g),m=t.invert(m)),g>m&&(n=g,g=m,m=n))),r&&t?[[d,g],[f,m]]:r?[d,f]:t&&[g,m])},a.clear=function(){return l=null,F[0][0]=F[0][1]=F[1][0]=F[1][1]=0,a},a.empty=function(){return r&&F[0][0]===F[1][0]||t&&F[0][1]===F[1][1]},n.rebind(a,p,"on")};var kh={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Wc=["n e s w nw ne se sw".split(" "),["e","w"],["n",
"s"],[]];n.time={};var ja=Date;Ia.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},
getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ya.setUTCDate.apply(this._,arguments)},setDay:function(){ya.setUTCDay.apply(this._,arguments)},setFullYear:function(){ya.setUTCFullYear.apply(this._,arguments)},setHours:function(){ya.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ya.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ya.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ya.setUTCMonth.apply(this._,
arguments)},setSeconds:function(){ya.setUTCSeconds.apply(this._,arguments)},setTime:function(){ya.setTime.apply(this._,arguments)}};var ya=Date.prototype,kf="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),lf="Sun Mon Tue Wed Thu Fri Sat".split(" "),Xc="January February March April May June July August September October November December".split(" "),Yc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");n.time.year=Ja(function(a){return a=n.time.day(a),a.setMonth(0,1),
a},function(a,c){a.setFullYear(a.getFullYear()+c)},function(a){return a.getFullYear()});n.time.years=n.time.year.range;n.time.years.utc=n.time.year.utc.range;n.time.day=Ja(function(a){var c=new ja(1970,0);return c.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),c},function(a,c){a.setDate(a.getDate()+c)},function(a){return a.getDate()-1});n.time.days=n.time.day.range;n.time.days.utc=n.time.day.utc.range;n.time.dayOfYear=function(a){var c=n.time.year(a);return Math.floor((a-c-6E4*(a.getTimezoneOffset()-
c.getTimezoneOffset()))/864E5)};"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ").forEach(function(a,c){a=a.toLowerCase();c=7-c;var d=n.time[a]=Ja(function(a){return(a=n.time.day(a)).setDate(a.getDate()-(a.getDay()+c)%7),a},function(a,c){a.setDate(a.getDate()+7*Math.floor(c))},function(a){var e=n.time.year(a).getDay();return Math.floor((n.time.dayOfYear(a)+(e+c)%7)/7)-(e!==c)});n.time[a+"s"]=d.range;n.time[a+"s"].utc=d.utc.range;n.time[a+"OfYear"]=function(a){var e=n.time.year(a).getDay();
return Math.floor((n.time.dayOfYear(a)+(e+c)%7)/7)}});n.time.week=n.time.sunday;n.time.weeks=n.time.sunday.range;n.time.weeks.utc=n.time.sunday.utc.range;n.time.weekOfYear=n.time.sundayOfYear;n.time.format=function(a){function c(f){for(var g,l,n,p=[],r=-1,u=0;++r<d;)37===a.charCodeAt(r)&&(p.push(a.substring(u,r)),null!=(l=lh[g=a.charAt(++r)])&&(g=a.charAt(++r)),(n=Qb[g])&&(g=n(f,null==l?"e"===g?" ":"0":l)),p.push(g),u=r+1);return p.push(a.substring(u,r)),p.join("")}var d=a.length;return c.parse=function(c){var d=
{y:1900,m:0,d:1,H:0,M:0,S:0,L:0};if(Fb(d,a,c,0)!=c.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);c=new ja;return c.setFullYear(d.y,d.m,d.d),c.setHours(d.H,d.M,d.S,d.L),c},c.toString=function(){return a},c};var mf=Gb(kf),nf=Gb(lf),of=Gb(Xc),mh=Qe(Xc),pf=Gb(Yc),nh=Qe(Yc),lh={"-":"",_:" ","0":"0"},Qb={a:function(a){return lf[a.getDay()]},A:function(a){return kf[a.getDay()]},b:function(a){return Yc[a.getMonth()]},B:function(a){return Xc[a.getMonth()]},c:n.time.format("%a %b %e %X %Y"),d:function(a,
c){return ma(a.getDate(),c,2)},e:function(a,c){return ma(a.getDate(),c,2)},H:function(a,c){return ma(a.getHours(),c,2)},I:function(a,c){return ma(a.getHours()%12||12,c,2)},j:function(a,c){return ma(1+n.time.dayOfYear(a),c,3)},L:function(a,c){return ma(a.getMilliseconds(),c,3)},m:function(a,c){return ma(a.getMonth()+1,c,2)},M:function(a,c){return ma(a.getMinutes(),c,2)},p:function(a){return 12<=a.getHours()?"PM":"AM"},S:function(a,c){return ma(a.getSeconds(),c,2)},U:function(a,c){return ma(n.time.sundayOfYear(a),
c,2)},w:function(a){return a.getDay()},W:function(a,c){return ma(n.time.mondayOfYear(a),c,2)},x:n.time.format("%m/%d/%Y"),X:n.time.format("%H:%M:%S"),y:function(a,c){return ma(a.getFullYear()%100,c,2)},Y:function(a,c){return ma(a.getFullYear()%1E4,c,4)},Z:function(a){var c=a.getTimezoneOffset();a=0<c?"-":"+";var d=~~(Math.abs(c)/60),c=Math.abs(c)%60;return a+ma(d,"0",2)+ma(c,"0",2)},"%":function(){return"%"}},Jg={a:function(a,c,d){nf.lastIndex=0;return(a=nf.exec(c.substring(d)))?d+a[0].length:-1},
A:function(a,c,d){mf.lastIndex=0;return(a=mf.exec(c.substring(d)))?d+a[0].length:-1},b:function(a,c,d){pf.lastIndex=0;return(c=pf.exec(c.substring(d)))?(a.m=nh.get(c[0].toLowerCase()),d+c[0].length):-1},B:function(a,c,d){of.lastIndex=0;return(c=of.exec(c.substring(d)))?(a.m=mh.get(c[0].toLowerCase()),d+c[0].length):-1},c:function(a,c,d){return Fb(a,""+Qb.c,c,d)},d:Re,e:Re,H:Se,I:Se,L:function(a,c,d){ka.lastIndex=0;return(c=ka.exec(c.substring(d,d+3)))?(a.L=+c[0],d+c[0].length):-1},m:function(a,c,
d){ka.lastIndex=0;return(c=ka.exec(c.substring(d,d+2)))?(a.m=c[0]-1,d+c[0].length):-1},M:function(a,c,d){ka.lastIndex=0;return(c=ka.exec(c.substring(d,d+2)))?(a.M=+c[0],d+c[0].length):-1},p:function(a,c,d){c=oh.get(c.substring(d,d+=2).toLowerCase());return null==c?-1:(a.p=c,d)},S:function(a,c,d){ka.lastIndex=0;return(c=ka.exec(c.substring(d,d+2)))?(a.S=+c[0],d+c[0].length):-1},x:function(a,c,d){return Fb(a,""+Qb.x,c,d)},X:function(a,c,d){return Fb(a,""+Qb.X,c,d)},y:function(a,c,d){ka.lastIndex=0;
return(c=ka.exec(c.substring(d,d+2)))?(a.y=+c[0]+(68<+c[0]?1900:2E3),d+c[0].length):-1},Y:function(a,c,d){ka.lastIndex=0;return(c=ka.exec(c.substring(d,d+4)))?(a.y=+c[0],d+c[0].length):-1}},ka=/^\s*\d+/,oh=n.map({am:0,pm:1});n.time.format.utc=function(a){function c(a){try{ja=Ia;var e=new ja;return e._=a,d(e)}finally{ja=Date}}var d=n.time.format(a);return c.parse=function(a){try{ja=Ia;var c=d.parse(a);return c&&c._}finally{ja=Date}},c.toString=d.toString,c};var qf=n.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");
n.time.format.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Mc:qf;Mc.parse=function(a){a=new Date(a);return isNaN(a)?null:a};Mc.toString=qf.toString;n.time.second=Ja(function(a){return new ja(1E3*Math.floor(a/1E3))},function(a,c){a.setTime(a.getTime()+1E3*Math.floor(c))},function(a){return a.getSeconds()});n.time.seconds=n.time.second.range;n.time.seconds.utc=n.time.second.utc.range;n.time.minute=Ja(function(a){return new ja(6E4*Math.floor(a/6E4))},function(a,c){a.setTime(a.getTime()+
6E4*Math.floor(c))},function(a){return a.getMinutes()});n.time.minutes=n.time.minute.range;n.time.minutes.utc=n.time.minute.utc.range;n.time.hour=Ja(function(a){var c=a.getTimezoneOffset()/60;return new ja(36E5*(Math.floor(a/36E5-c)+c))},function(a,c){a.setTime(a.getTime()+36E5*Math.floor(c))},function(a){return a.getHours()});n.time.hours=n.time.hour.range;n.time.hours.utc=n.time.hour.utc.range;n.time.month=Ja(function(a){return a=n.time.day(a),a.setDate(1),a},function(a,c){a.setMonth(a.getMonth()+
c)},function(a){return a.getMonth()});n.time.months=n.time.month.range;n.time.months.utc=n.time.month.utc.range;var Hb=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Zc=[[n.time.second,1],[n.time.second,5],[n.time.second,15],[n.time.second,30],[n.time.minute,1],[n.time.minute,5],[n.time.minute,15],[n.time.minute,30],[n.time.hour,1],[n.time.hour,3],[n.time.hour,6],[n.time.hour,12],[n.time.day,1],[n.time.day,2],[n.time.week,1],[n.time.month,1],[n.time.month,
3],[n.time.year,1]],ph=[[n.time.format("%Y"),Wa],[n.time.format("%B"),function(a){return a.getMonth()}],[n.time.format("%b %d"),function(a){return 1!=a.getDate()}],[n.time.format("%a %d"),function(a){return a.getDay()&&1!=a.getDate()}],[n.time.format("%I %p"),function(a){return a.getHours()}],[n.time.format("%I:%M"),function(a){return a.getMinutes()}],[n.time.format(":%S"),function(a){return a.getSeconds()}],[n.time.format(".%L"),function(a){return a.getMilliseconds()}]],rf=n.scale.linear(),qh=Te(ph);
Zc.year=function(a,c){return rf.domain(a.map(Kg)).ticks(c).map(Pc)};n.time.scale=function(){return Nc(n.scale.linear(),Zc,qh)};var sf=Zc.map(function(a){return[a[0].utc,a[1]]}),rh=[[n.time.format.utc("%Y"),Wa],[n.time.format.utc("%B"),function(a){return a.getUTCMonth()}],[n.time.format.utc("%b %d"),function(a){return 1!=a.getUTCDate()}],[n.time.format.utc("%a %d"),function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],[n.time.format.utc("%I %p"),function(a){return a.getUTCHours()}],[n.time.format.utc("%I:%M"),
function(a){return a.getUTCMinutes()}],[n.time.format.utc(":%S"),function(a){return a.getUTCSeconds()}],[n.time.format.utc(".%L"),function(a){return a.getUTCMilliseconds()}]],sh=Te(rh);return sf.year=function(a,c){return rf.domain(a.map(Lg)).ticks(c).map(Qc)},n.time.scale.utc=function(){return Nc(n.scale.linear(),sf,sh)},n.text=function(){return n.xhr.apply(n,arguments).response(Mg)},n.json=function(a,c){return n.xhr(a,"application/json",c).response(Ng)},n.html=function(a,c){return n.xhr(a,"text/html",
c).response(Og)},n.xml=function(){return n.xhr.apply(n,arguments).response(Pg)},n}();
