window.log=function(){log.history=log.history||[];log.history.push(arguments);if(this.console){arguments.callee=arguments.callee.caller;var d=[].slice.call(arguments);"object"===typeof console.log?log.apply.call(console.log,console,d):console.log.apply(console,d)}};
(function(d){function n(){}for(var q="assert count debug dir dirxml error exception group groupCollapsed groupEnd info log timeStamp profile profileEnd time timeEnd trace warn".split(" "),c;c=q.pop();)d[c]=d[c]||n})(function(){try{return console.log(),window.console}catch(d){return window.console={}}}());
(function(d){function n(n){if("string"===typeof n.data){var c=n.handler,a=n.data.toLowerCase().split(" ");n.handler=function(g){if(this===g.target||!/textarea|select/i.test(g.target.nodeName)&&"text"!==g.target.type){var l="keypress"!==g.type&&d.hotkeys.specialKeys[g.which],f=String.fromCharCode(g.which).toLowerCase(),p="",B={};g.altKey&&"alt"!==l&&(p+="alt+");g.ctrlKey&&"ctrl"!==l&&(p+="ctrl+");g.metaKey&&(!g.ctrlKey&&"meta"!==l)&&(p+="meta+");g.shiftKey&&"shift"!==l&&(p+="shift+");l?B[p+l]=!0:(B[p+
f]=!0,B[p+d.hotkeys.shiftNums[f]]=!0,"shift+"===p&&(B[d.hotkeys.shiftNums[f]]=!0));l=0;for(f=a.length;l<f;l++)if(B[a[l]])return c.apply(this,arguments)}}}}d.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",
110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};d.each(["keydown","keyup","keypress"],function(){d.event.special[this]={add:n}})})(jQuery);"use strict";
(function(){if(!jQuery||!jQuery.jstree){var d=!1,n=!1,q=!1;(function(c){c.vakata={};c.vakata.css={get_css:function(p,c,a){p=p.toLowerCase();var f=a.cssRules||a.rules,g=0;do{if(f.length&&g>f.length+5)break;if(f[g].selectorText&&f[g].selectorText.toLowerCase()==p)return!0===c?(a.removeRule&&a.removeRule(g),a.deleteRule&&a.deleteRule(g),!0):f[g]}while(f[++g]);return!1},add_css:function(p,a){if(c.jstree.css.get_css(p,!1,a))return!1;a.insertRule?a.insertRule(p+" { }",0):a.addRule(p,null,0);return c.vakata.css.get_css(p)},
remove_css:function(p,a){return c.vakata.css.get_css(p,!0,a)},add_sheet:function(p){var a=!1,f=!0;if(p.str)return p.title&&(a=c("style[id='"+p.title+"-stylesheet']")[0]),a?f=!1:(a=document.createElement("style"),a.setAttribute("type","text/css"),p.title&&a.setAttribute("id",p.title+"-stylesheet")),a.styleSheet?f?(document.getElementsByTagName("head")[0].appendChild(a),a.styleSheet.cssText=p.str):a.styleSheet.cssText=a.styleSheet.cssText+" "+p.str:(a.appendChild(document.createTextNode(p.str)),document.getElementsByTagName("head")[0].appendChild(a)),
a.sheet||a.styleSheet;if(p.url)if(document.createStyleSheet)try{document.createStyleSheet(p.url)}catch(g){}else return a=document.createElement("link"),a.rel="stylesheet",a.type="text/css",a.media="all",a.href=p.url,document.getElementsByTagName("head")[0].appendChild(a),a.styleSheet}};var a=[],g=-1,l={},f={};c.fn.jstree=function(p){var f="string"==typeof p,g=Array.prototype.slice.call(arguments,1),d=this;if(f){if("_"==p.substring(0,1))return d;this.each(function(){var f=a[c.data(this,"jstree_instance_id")],
f=f&&c.isFunction(f[p])?f[p].apply(f,g):f;if("undefined"!==typeof f&&(0===p.indexOf("is_")||!0!==f&&!1!==f))return d=f,!1})}else this.each(function(){var f=c.data(this,"jstree_instance_id"),B=[],d=p?c.extend({},!0,p):{},v=c(this),n=!1,q=[],B=B.concat(g);v.data("jstree")&&B.push(v.data("jstree"));d=B.length?c.extend.apply(null,[!0,d].concat(B)):d;"undefined"!==typeof f&&a[f]&&a[f].destroy();f=parseInt(a.push({}),10)-1;c.data(this,"jstree_instance_id",f);d.plugins=c.isArray(d.plugins)?d.plugins:c.jstree.defaults.plugins.slice();
d.plugins.unshift("core");d.plugins=d.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");n=c.extend(!0,{},c.jstree.defaults,d);n.plugins=d.plugins;c.each(l,function(a,p){-1===c.inArray(a,n.plugins)?(n[a]=null,delete n[a]):q.push(a)});n.plugins=q;a[f]=new c.jstree._instance(f,c(this).addClass("jstree jstree-"+f),n);c.each(a[f]._get_settings().plugins,function(p,c){a[f].data[c]={}});c.each(a[f]._get_settings().plugins,function(p,c){l[c]&&
l[c].__init.apply(a[f])});setTimeout(function(){a[f]&&a[f].init()},0)});return d};c.jstree={defaults:{plugins:[]},_focused:function(){return a[g]||null},_reference:function(p){if(a[p])return a[p];var f=c(p);f.length||"string"!==typeof p||(f=c("#"+p));return f.length?a[f.closest(".jstree").data("jstree_instance_id")]||null:null},_instance:function(a,f,g){this.data={core:{}};this.get_settings=function(){return c.extend(!0,{},g)};this._get_settings=function(){return g};this.get_index=function(){return a};
this.get_container=function(){return f};this.get_container_ul=function(){return f.children("ul:eq(0)")};this._set_settings=function(a){g=c.extend(!0,{},g,a)}},_fn:{},plugin:function(a,f){f=c.extend({},{__init:c.noop,__destroy:c.noop,_fn:{},defaults:!1},f);l[a]=f;c.jstree.defaults[a]=f.defaults;c.each(f._fn,function(f,g){g.plugin=a;g.old=c.jstree._fn[f];c.jstree._fn[f]=function(){var a,p=g,l=Array.prototype.slice.call(arguments);a=new c.Event("before.jstree");var B=!1;if(!0!==this.data.core.locked||
"unlock"===f||"is_locked"===f){do{if(p&&p.plugin&&-1!==c.inArray(p.plugin,this._get_settings().plugins))break;p=p.old}while(p);if(p){if(0===f.indexOf("_"))a=p.apply(this,l);else{a=this.get_container().triggerHandler(a,{func:f,inst:this,args:l,plugin:p.plugin});if(!1===a)return;"undefined"!==typeof a&&(l=a);a=p.apply(c.extend({},this,{__callback:function(a){this.get_container().triggerHandler(f+".jstree",{inst:this,args:l,rslt:a,rlbk:B})},__rollback:function(){return B=this.get_rollback()},__call_old:function(a){return p.old.apply(this,
a?Array.prototype.slice.call(arguments,1):l)}}),l)}return a}}};c.jstree._fn[f].old=g.old;c.jstree._fn[f].plugin=a})},rollback:function(p){p&&(c.isArray(p)||(p=[p]),c.each(p,function(p,c){a[c.i].set_rollback(c.h,c.d)}))}};c.jstree._fn=c.jstree._instance.prototype={};c(function(){var a=navigator.userAgent.toLowerCase(),f=(a.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],g=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a > ins { height:16px; width:16px; } .jstree a > .jstree-icon { margin-right:3px; } .jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } ";
if(/msie/.test(a)&&6==parseInt(f,10)){d=!0;try{document.execCommand("BackgroundImageCache",!1,!0)}catch(l){}g+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}/msie/.test(a)&&
7==parseInt(f,10)&&(n=!0,g+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } ");!/compatible/.test(a)&&(/mozilla/.test(a)&&1.9>parseFloat(f,10))&&(q=!0,g+=".jstree ins { display:-moz-inline-box; } .jstree li { line-height:12px; } .jstree a { display:-moz-inline-box; } .jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } ");c.vakata.css.add_sheet({str:g,title:"jstree"})});c.jstree.plugin("core",{__init:function(){this.data.core.locked=!1;this.data.core.to_open=
this.get_settings().core.initially_open;this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:!1,animation:500,initially_open:[],initially_load:[],open_parents:!0,notify_plugins:!0,rtl:!1,load_open:!1,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus();this._get_settings().core.rtl&&this.get_container().addClass("jstree-rtl").css("direction","rtl");this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+
this._get_string("loading")+"</a></li></ul>");this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18;this.get_container().delegate("li > ins","click.jstree",c.proxy(function(a){a=c(a.target);this.toggle_node(a)},this)).bind("mousedown.jstree",c.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(a){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){a=window.getSelection();
try{a.removeAllRanges(),a.collapse()}catch(c){}}});this._get_settings().core.notify_plugins&&this.get_container().bind("load_node.jstree",c.proxy(function(a,f){var g=this._get_node(f.rslt.obj),l=this;-1===g&&(g=this.get_container_ul());g.length&&g.find("li").each(function(){var a=c(this);a.data("jstree")&&c.each(a.data("jstree"),function(p,f){l.data[p]&&c.isFunction(l["_"+p+"_notify"])&&l["_"+p+"_notify"].call(l,a,f)})})},this));this._get_settings().core.load_open&&this.get_container().bind("load_node.jstree",
c.proxy(function(a,f){var g=this._get_node(f.rslt.obj),l=this;-1===g&&(g=this.get_container_ul());g.length&&g.find("li.jstree-open:not(:has(ul))").each(function(){l.load_node(this,c.noop,c.noop)})},this));this.__callback();this.load_node(-1,function(){this.loaded();this.reload_nodes()})},destroy:function(){var p,f=this.get_index(),d=this._get_settings(),v=this;c.each(d.plugins,function(a,p){try{l[p].__destroy.apply(v)}catch(c){}});this.__callback();if(this.is_focused())for(p in a)if(a.hasOwnProperty(p)&&
p!=f){a[p].set_focus();break}f===g&&(g=-1);this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")});c(document).unbind(".jstree-"+f).undelegate(".jstree-"+f);a[f]=null;delete a[f]},_core_notify:function(a,c){c.opened&&this.open_node(a,!1,!0)},lock:function(){this.data.core.locked=!0;this.get_container().children("ul").addClass("jstree-locked").css("opacity",
"0.7");this.__callback({})},unlock:function(){this.data.core.locked=!1;this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1");this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var a=this;this.data.core.to_open=[];this.get_container_ul().find("li.jstree-open").each(function(){this.id&&a.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,
"\\.").replace(/\:/g,"\\:"))});this.__callback(a.data.core.to_open)},save_loaded:function(){},reload_nodes:function(a){var f=this,g=!0,l=[],d=[];a||(this.data.core.reopen=!1,this.data.core.refreshing=!0,this.data.core.to_open=c.map(c.makeArray(this.data.core.to_open),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_load=c.map(c.makeArray(this.data.core.to_load),function(a){return"#"+
a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_open.length&&(this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open)));this.data.core.to_load.length&&(c.each(this.data.core.to_load,function(a,p){if("#"==p)return!0;c(p).length?l.push(p):d.push(p)}),l.length&&(this.data.core.to_load=d,c.each(l,function(a,c){f._is_loaded(c)||(f.load_node(c,function(){f.reload_nodes(!0)},function(){f.reload_nodes(!0)}),
g=!1)})));this.data.core.to_open.length&&c.each(this.data.core.to_open,function(a,c){f.open_node(c,!1,!0)});g&&(this.data.core.reopen&&clearTimeout(this.data.core.reopen),this.data.core.reopen=setTimeout(function(){f.__callback({},f)},50),this.data.core.refreshing=!1,this.reopen())},reopen:function(){var a=this;this.data.core.to_open.length&&c.each(this.data.core.to_open,function(c,f){a.open_node(f,!1,!0)});this.__callback({})},refresh:function(a){var c=this;this.save_opened();a||(a=-1);(a=this._get_node(a))||
(a=-1);-1!==a?a.children("UL").remove():this.get_container_ul().empty();this.load_node(a,function(){c.__callback({obj:a});c.reload_nodes()})},loaded:function(){this.__callback()},set_focus:function(){if(!this.is_focused()){var a=c.jstree._focused();a&&a.unset_focus();this.get_container().addClass("jstree-focused");g=this.get_index();this.__callback()}},is_focused:function(){return g==this.get_index()},unset_focus:function(){this.is_focused()&&(this.get_container().removeClass("jstree-focused"),g=
-1);this.__callback()},_get_node:function(a){var f=c(a,this.get_container());if(f.is(".jstree")||-1==a)return-1;f=f.closest("li",this.get_container());return f.length?f:!1},_get_next:function(a,c){a=this._get_node(a);return-1===a?this.get_container().find("> ul > li:first-child"):a.length?c?0<a.nextAll("li").size()?a.nextAll("li:eq(0)"):!1:a.hasClass("jstree-open")?a.find("li:eq(0)"):0<a.nextAll("li").size()?a.nextAll("li:eq(0)"):a.parentsUntil(".jstree","li").next("li").eq(0):!1},_get_prev:function(a,
c){a=this._get_node(a);if(-1===a)return this.get_container().find("> ul > li:last-child");if(!a.length)return!1;if(c)return 0<a.prevAll("li").length?a.prevAll("li:eq(0)"):!1;if(a.prev("li").length){for(a=a.prev("li").eq(0);a.hasClass("jstree-open");)a=a.children("ul:eq(0)").children("li:last");return a}var f=a.parentsUntil(".jstree","li:eq(0)");return f.length?f:!1},_get_parent:function(a){a=this._get_node(a);if(-1==a||!a.length)return!1;a=a.parentsUntil(".jstree","li:eq(0)");return a.length?a:-1},
_get_children:function(a){a=this._get_node(a);return-1===a?this.get_container().children("ul:eq(0)").children("li"):a.length?a.children("ul:eq(0)").children("li"):!1},get_path:function(a,c){var f=[],g=this;a=this._get_node(a);if(-1===a||!a||!a.length)return!1;a.parentsUntil(".jstree","li").each(function(){f.push(c?this.id:g.get_text(this))});f.reverse();f.push(c?a.attr("id"):this.get_text(a));return f},_get_string:function(a){return this._get_settings().core.strings[a]||a},is_open:function(a){return(a=
this._get_node(a))&&-1!==a&&a.hasClass("jstree-open")},is_closed:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-closed")},is_leaf:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-leaf")},correct_state:function(a){a=this._get_node(a);if(!a||-1===a)return!1;a.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:a})},open_node:function(a,c,f){a=this._get_node(a);if(!a.length)return!1;if(!a.hasClass("jstree-closed"))return c&&
c.call(),!1;var g=f||d?0:this._get_settings().core.animation,l=this;this._is_loaded(a)?(this._get_settings().core.open_parents&&a.parentsUntil(".jstree",".jstree-closed").each(function(){l.open_node(this,!1,!0)}),g&&a.children("ul").css("display","none"),a.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading"),g?a.children("ul").stop(!0,!0).slideDown(g,function(){this.style.display="";l.after_open(a)}):l.after_open(a),this.__callback({obj:a}),c&&c.call()):
(a.children("a").addClass("jstree-loading"),this.load_node(a,function(){l.open_node(a,c,f)},c))},after_open:function(a){this.__callback({obj:a})},close_node:function(a,c){a=this._get_node(a);var f=c||d?0:this._get_settings().core.animation,g=this;if(!a.length||!a.hasClass("jstree-open"))return!1;f&&a.children("ul").attr("style","display:block !important");a.removeClass("jstree-open").addClass("jstree-closed");f?a.children("ul").stop(!0,!0).slideUp(f,function(){this.style.display="";g.after_close(a)}):
g.after_close(a);this.__callback({obj:a})},after_close:function(a){this.__callback({obj:a})},toggle_node:function(a){a=this._get_node(a);if(a.hasClass("jstree-closed"))return this.open_node(a);if(a.hasClass("jstree-open"))return this.close_node(a)},open_all:function(a,c,f){(a=a?this._get_node(a):-1)&&-1!==a||(a=this.get_container_ul());f?a=a.find("li.jstree-closed"):(f=a,a=a.is(".jstree-closed")?a.find("li.jstree-closed").addBack():a.find("li.jstree-closed"));var g=this;a.each(function(){var a=this;
g._is_loaded(this)?g.open_node(this,!1,!c):g.open_node(this,function(){g.open_all(a,c,f)},!c)});0===f.find("li.jstree-closed").length&&this.__callback({obj:f})},close_all:function(a,c){var f=this;(a=a?this._get_node(a):this.get_container())&&-1!==a||(a=this.get_container_ul());a.find("li.jstree-open").addBack().each(function(){f.close_node(this,!c)});this.__callback({obj:a})},clean_node:function(a){a=a&&-1!=a?c(a):this.get_container_ul();a=a.is("li")?a.find("li").addBack():a.find("li");a.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed");
a.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:a})},get_rollback:function(){this.__callback();return{i:this.get_index(),h:this.get_container().children("ul").clone(!0),d:this.data}},set_rollback:function(a,c){this.get_container().empty().append(a);this.data=c;this.__callback()},load_node:function(a,c,f){this.__callback({obj:a})},_is_loaded:function(a){return!0},create_node:function(a,f,g,l,d){a=this._get_node(a);f="undefined"===typeof f?
"last":f;var u=c("<li />"),n=this._get_settings().core,q;if(-1!==a&&!a.length)return!1;if(!d&&!this._is_loaded(a))return this.load_node(a,function(){this.create_node(a,f,g,l,!0)}),!1;this.__rollback();"string"===typeof g&&(g={data:g});g||(g={});g.attr&&u.attr(g.attr);g.metadata&&u.data(g.metadata);g.state&&u.addClass("jstree-"+g.state);g.data||(g.data=this._get_string("new_node"));c.isArray(g.data)||(q=g.data,g.data=[],g.data.push(q));c.each(g.data,function(a,f){q=c("<a />");c.isFunction(f)&&(f=f.call(this,
g));if("string"==typeof f)q.attr("href","#")[n.html_titles?"html":"text"](f);else f.attr||(f.attr={}),f.attr.href||(f.attr.href="#"),q.attr(f.attr)[n.html_titles?"html":"text"](f.title),f.language&&q.addClass(f.language);q.prepend("<ins class='jstree-icon'>&#160;</ins>");!f.icon&&g.icon&&(f.icon=g.icon);f.icon&&(-1===f.icon.indexOf("/")?q.children("ins").addClass(f.icon):q.children("ins").css("background","url('"+f.icon+"') center center no-repeat"));u.append(q)});u.prepend("<ins class='jstree-icon'>&#160;</ins>");
-1===a&&(a=this.get_container(),"before"===f&&(f="first"),"after"===f&&(f="last"));switch(f){case "before":a.before(u);q=this._get_parent(a);break;case "after":a.after(u);q=this._get_parent(a);break;case "inside":case "first":a.children("ul").length||a.append("<ul />");a.children("ul").prepend(u);q=a;break;case "last":a.children("ul").length||a.append("<ul />");a.children("ul").append(u);q=a;break;default:a.children("ul").length||a.append("<ul />"),f||(f=0),q=a.children("ul").children("li").eq(f),
q.length?q.before(u):a.children("ul").append(u),q=a}if(-1===q||q.get(0)===this.get_container().get(0))q=-1;this.clean_node(q);this.__callback({obj:u,parent:q});l&&l.call(this,u);return u},get_text:function(a){a=this._get_node(a);if(!a.length)return!1;var c=this._get_settings().core.html_titles;a=a.children("a:eq(0)");if(c)return a=a.clone(),a.children("INS").remove(),a.html();a=a.contents().filter(function(){return 3==this.nodeType})[0];return a.nodeValue},set_text:function(a,c){a=this._get_node(a);
if(!a.length)return!1;a=a.children("a:eq(0)");if(this._get_settings().core.html_titles){var f=a.children("INS").clone();a.html(c).prepend(f);this.__callback({obj:a,name:c});return!0}a=a.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:a,name:c});return a.nodeValue=c},rename_node:function(a,c){a=this._get_node(a);this.__rollback();a&&(a.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments)))&&this.__callback({obj:a,name:c})},delete_node:function(a){a=
this._get_node(a);if(!a.length)return!1;this.__rollback();var f=this._get_parent(a),g=c([]),l=this;a.each(function(){g=g.add(l._get_prev(this))});a=a.detach();-1!==f&&0===f.find("> ul > li").length&&f.removeClass("jstree-open jstree-closed").addClass("jstree-leaf");this.clean_node(f);this.__callback({obj:a,prev:g,parent:f});return a},prepare_move:function(a,g,l,d,q){var u={};u.ot=c.jstree._reference(a)||this;u.o=u.ot._get_node(a);u.r=-1===g?-1:this._get_node(g);u.p="undefined"===typeof l||!1===l?
"last":l;if(q||!f.o||f.o[0]!==u.o[0]||f.r[0]!==u.r[0]||f.p!==u.p){u.ot=c.jstree._reference(u.o)||this;u.rt=c.jstree._reference(u.r)||this;if(-1!==u.r&&u.r){if(!/^(before|after)$/.test(u.p)&&!this._is_loaded(u.r))return this.load_node(u.r,function(){this.prepare_move(a,g,l,d,!0)});switch(u.p){case "before":u.cp=u.r.index();u.cr=u.rt._get_parent(u.r);break;case "after":u.cp=u.r.index()+1;u.cr=u.rt._get_parent(u.r);break;case "inside":case "first":u.cp=0;u.cr=u.r;break;case "last":u.cp=u.r.find(" > ul > li").length;
u.cr=u.r;break;default:u.cp=u.p,u.cr=u.r}}else switch(u.cr=-1,u.p){case "first":case "before":case "inside":u.cp=0;break;case "after":case "last":u.cp=u.rt.get_container().find(" > ul > li").length;break;default:u.cp=u.p}u.np=-1==u.cr?u.rt.get_container():u.cr;u.op=u.ot._get_parent(u.o);u.cop=u.o.index();-1===u.op&&(u.op=u.ot?u.ot.get_container():this.get_container());!/^(before|after)$/.test(u.p)&&(u.op&&u.np&&u.op[0]===u.np[0]&&u.o.index()<u.cp)&&u.cp++;u.or=u.np.find(" > ul > li:nth-child("+(u.cp+
1)+")");f=u}this.__callback(f);d&&d.call(this,f)},check_move:function(){var a=f,c=!0,g=-1===a.r?this.get_container():a.r;if(!a||!a.o||a.or[0]===a.o[0])return!1;if(!a.cy){if(a.op&&a.np&&a.op[0]===a.np[0]&&a.cp-1===a.o.index())return!1;a.o.each(function(){if(-1!==g.parentsUntil(".jstree","li").addBack().index(this))return c=!1})}return c},move_node:function(a,g,l,d,q,u){if(!q)return this.prepare_move(a,g,l,function(a){this.move_node(a,!1,!1,d,!0,u)});d&&(f.cy=!0);if(!u&&!this.check_move())return!1;
this.__rollback();g=!1;d?(g=a.o.clone(!0),g.find("*[id]").addBack().each(function(){this.id&&(this.id="copy_"+this.id)})):g=a.o;a.or.length?a.or.before(g):(a.np.children("ul").length||c("<ul />").appendTo(a.np),a.np.children("ul:eq(0)").append(g));try{a.ot.clean_node(a.op),a.rt.clean_node(a.np),a.op.find("> ul > li").length||a.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(n){}d&&(f.cy=!0,f.oc=g);this.__callback(f);return f},_get_move:function(){return f}}})})(jQuery);
(function(c){var a,g,l;c(function(){/msie/.test(navigator.userAgent.toLowerCase())?(g=c('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),l=c('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),a=g.width()-l.width(),g.add(l).remove()):(g=c("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1E3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",
height:200}),a=100-g.width(),g.parent().remove())});c.jstree.plugin("ui",{__init:function(){this.data.ui.selected=c();this.data.ui.last_selected=!1;this.data.ui.hovered=null;this.data.ui.to_select=this.get_settings().ui.initially_select;this.get_container().delegate("a","click.jstree",c.proxy(function(a){a.preventDefault();a.currentTarget.blur();c(a.currentTarget).hasClass("jstree-loading")||this.select_node(a.currentTarget,!0,a)},this)).delegate("a","mouseenter.jstree",c.proxy(function(a){c(a.currentTarget).hasClass("jstree-loading")||
this.hover_node(a.target)},this)).delegate("a","mouseleave.jstree",c.proxy(function(a){c(a.currentTarget).hasClass("jstree-loading")||this.dehover_node(a.target)},this)).bind("reopen.jstree",c.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",c.proxy(function(){this.dehover_node();this.save_selected()},this)).bind("set_rollback.jstree",c.proxy(function(){this.reselect()},this)).bind("close_node.jstree",c.proxy(function(a,g){var l=this._get_settings().ui,d=this._get_node(g.rslt.obj),
v=d&&d.length?d.children("ul").find("a.jstree-clicked"):c(),q=this;!1!==l.selected_parent_close&&v.length&&v.each(function(){q.deselect_node(this);"select_parent"===l.selected_parent_close&&q.select_node(d)})},this)).bind("delete_node.jstree",c.proxy(function(a,c){var g=this._get_settings().ui.select_prev_on_delete,l=this._get_node(c.rslt.obj),l=l&&l.length?l.find("a.jstree-clicked"):[],d=this;l.each(function(){d.deselect_node(this)});g&&l.length&&c.rslt.prev.each(function(){if(this.parentNode)return d.select_node(this),
!1})},this)).bind("move_node.jstree",c.proxy(function(a,c){c.rslt.cy&&c.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:!0,select_prev_on_delete:!0,disable_selecting_children:!1,initially_select:[]},_fn:{_get_node:function(a,g){if("undefined"===typeof a||null===a)return g?this.data.ui.selected:this.data.ui.last_selected;var l=c(a,
this.get_container());if(l.is(".jstree")||-1==a)return-1;l=l.closest("li",this.get_container());return l.length?l:!1},_ui_notify:function(a,c){c.selected&&this.select_node(a,!1)},save_selected:function(){var a=this;this.data.ui.to_select=[];this.data.ui.selected.each(function(){this.id&&a.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))});this.__callback(this.data.ui.to_select)},
reselect:function(){var a=this,g=this.data.ui.to_select,g=c.map(c.makeArray(g),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});c.each(g,function(c,g){g&&"#"!==g&&a.select_node(g)});this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode});this.__callback()},refresh:function(a){this.save_selected();return this.__call_old()},hover_node:function(a){a=this._get_node(a);
if(!a.length)return!1;a.hasClass("jstree-hovered")||this.dehover_node();this.data.ui.hovered=a.children("a").addClass("jstree-hovered").parent();this._fix_scroll(a);this.__callback({obj:a})},dehover_node:function(){var a=this.data.ui.hovered,c;if(!a||!a.length)return!1;c=a.children("a").removeClass("jstree-hovered").parent();this.data.ui.hovered[0]===c[0]&&(this.data.ui.hovered=null);this.__callback({obj:a})},select_node:function(a,c,g){a=this._get_node(a);if(-1==a||!a||!a.length)return!1;var l=this._get_settings().ui,
d="on"==l.select_multiple_modifier||!1!==l.select_multiple_modifier&&g&&g[l.select_multiple_modifier+"Key"],q=!1!==l.select_range_modifier&&g&&g[l.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==a[0]&&this.data.ui.last_selected.parent()[0]===a.parent()[0],u=this.is_selected(a),n=!0,O=this;if(c){if(l.disable_selecting_children&&d&&(a.parentsUntil(".jstree","li").children("a.jstree-clicked").length||a.children("ul").find("a.jstree-clicked:eq(0)").length))return!1;
n=!1;switch(!0){case q:this.data.ui.last_selected.addClass("jstree-last-selected");a=a[a.index()<this.data.ui.last_selected.index()?"nextUntil":"prevUntil"](".jstree-last-selected").addBack();-1==l.select_limit||a.length<l.select_limit?(this.data.ui.last_selected.removeClass("jstree-last-selected"),this.data.ui.selected.each(function(){this!==O.data.ui.last_selected[0]&&O.deselect_node(this)}),u=!1,n=!0):n=!1;break;case u&&!d:this.deselect_all();u=!1;n=!0;break;case !u&&!d:if(-1==l.select_limit||
0<l.select_limit)this.deselect_all(),n=!0;break;case u&&d:this.deselect_node(a);break;case !u&&d:if(-1==l.select_limit||this.data.ui.selected.length+1<=l.select_limit)n=!0}}n&&!u&&(q||(this.data.ui.last_selected=a),a.children("a").addClass("jstree-clicked"),l.selected_parent_open&&a.parents(".jstree-closed").each(function(){O.open_node(this,!1,!0)}),this.data.ui.selected=this.data.ui.selected.add(a),this._fix_scroll(a.eq(0)),this.__callback({obj:a,e:g}))},_fix_scroll:function(c){var g=this.get_container()[0];
g.scrollHeight>g.offsetHeight&&(c=this._get_node(c))&&(-1!==c&&c.length&&c.is(":visible"))&&(c=c.offset().top-this.get_container().offset().top,0>c&&(g.scrollTop=g.scrollTop+c-1),c+this.data.core.li_height+(g.scrollWidth>g.offsetWidth?a:0)>g.offsetHeight&&(g.scrollTop+=c-g.offsetHeight+this.data.core.li_height+1+(g.scrollWidth>g.offsetWidth?a:0)))},deselect_node:function(a){a=this._get_node(a);if(!a.length)return!1;this.is_selected(a)&&(a.children("a").removeClass("jstree-clicked"),this.data.ui.selected=
this.data.ui.selected.not(a),this.data.ui.last_selected.get(0)===a.get(0)&&(this.data.ui.last_selected=this.data.ui.selected.eq(0)),this.__callback({obj:a}))},toggle_select:function(a){a=this._get_node(a);if(!a.length)return!1;this.is_selected(a)?this.deselect_node(a):this.select_node(a)},is_selected:function(a){return 0<=this.data.ui.selected.index(this._get_node(a))},get_selected:function(a){return a?c(a).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(a){a=a?c(a).find("a.jstree-clicked").parent():
this.get_container().find("a.jstree-clicked").parent();a.children("a.jstree-clicked").removeClass("jstree-clicked");this.data.ui.selected=c([]);this.data.ui.last_selected=!1;this.__callback({obj:a})}}});c.jstree.defaults.plugins.push("ui")})(jQuery);(function(c){c.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",c.proxy(function(a,c){if(this._get_settings().crrm.move.open_onmove){var l=this;c.rslt.np.parentsUntil(".jstree").addBack().filter(".jstree-closed").each(function(){l.open_node(this,
!1,!0)})}},this))},defaults:{input_width_limit:200,move:{always_copy:!1,open_onmove:!0,default_position:"last",check_move:function(a){return!0}}},_fn:{_show_input:function(a,g){a=this._get_node(a);var l=this._get_settings().core.rtl,f=this._get_settings().crrm.input_width_limit,p=a.children("ins").width(),d=a.find("> a:visible > ins").width()*a.find("> a:visible > ins").length,P=this.get_text(a),q=c("<div />",{css:{position:"absolute",top:"-200px",left:l?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),
n=a.css("position","relative").append(c("<input />",{value:P,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:l?"auto":p+d+4+"px",right:l?p+d+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:c.proxy(function(){var c=a.children(".jstree-rename-input"),f=c.val();""===f&&(f=P);q.remove();c.remove();this.set_text(a,P);this.rename_node(a,f);g.call(this,a,f,P);a.css("position","")},
this),keyup:function(a){a=a.keyCode||a.which;27==a?(this.value=P,this.blur()):13==a?this.blur():n.width(Math.min(q.text("pW"+this.value).width(),f))},keypress:function(a){if(13==(a.keyCode||a.which))return!1}})).children(".jstree-rename-input");this.set_text(a,"");q.css({fontFamily:n.css("fontFamily")||"",fontSize:n.css("fontSize")||"",fontWeight:n.css("fontWeight")||"",fontStyle:n.css("fontStyle")||"",fontStretch:n.css("fontStretch")||"",fontVariant:n.css("fontVariant")||"",letterSpacing:n.css("letterSpacing")||
"",wordSpacing:n.css("wordSpacing")||""});n.width(Math.min(q.text("pW"+n[0].value).width(),f))[0].select()},rename:function(a){a=this._get_node(a);this.__rollback();var c=this.__callback;this._show_input(a,function(a,f,p){c.call(this,{obj:a,new_name:f,old_name:p})})},create:function(a,g,l,f,p){var d=this;(a=this._get_node(a))||(a=-1);this.__rollback();return this.create_node(a,g,l,function(a){var g=this._get_parent(a),l=c(a).index();f&&f.call(this,a);g.length&&g.hasClass("jstree-closed")&&this.open_node(g,
!1,!0);p?d.__callback({obj:a,name:this.get_text(a),parent:g,position:l}):this._show_input(a,function(a,c,f){d.__callback({obj:a,name:c,parent:g,position:l})})})},remove:function(a){a=this._get_node(a,!0);var c=this._get_parent(a),l=this._get_prev(a);this.__rollback();a=this.delete_node(a);!1!==a&&this.__callback({obj:a,prev:l,parent:c})},check_move:function(){return this.__call_old()&&this._get_settings().crrm.move.check_move.call(this,this._get_move())?!0:!1},move_node:function(a,c,l,f,p,d){var n=
this._get_settings().crrm.move;if(!p)return"undefined"===typeof l&&(l=n.default_position),"inside"!==l||n.default_position.match(/^(before|after)$/)||(l=n.default_position),this.__call_old(!0,a,c,l,f,!1,d);if(!0===n.always_copy||"multitree"===n.always_copy&&a.rt.get_index()!==a.ot.get_index())f=!0;this.__call_old(!0,a,c,l,f,!0,d)},cut:function(a){a=this._get_node(a,!0);if(!a||!a.length)return!1;this.data.crrm.cp_nodes=!1;this.data.crrm.ct_nodes=a;this.__callback({obj:a})},copy:function(a){a=this._get_node(a,
!0);if(!a||!a.length)return!1;this.data.crrm.ct_nodes=!1;this.data.crrm.cp_nodes=a;this.__callback({obj:a})},paste:function(a){a=this._get_node(a);if(!a||!a.length)return!1;var c=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:this.data.crrm.cp_nodes;if(!this.data.crrm.ct_nodes&&!this.data.crrm.cp_nodes)return!1;this.data.crrm.ct_nodes&&(this.move_node(this.data.crrm.ct_nodes,a),this.data.crrm.ct_nodes=!1);this.data.crrm.cp_nodes&&this.move_node(this.data.crrm.cp_nodes,a,!1,!0);this.__callback({obj:a,
nodes:c})}}})})(jQuery);(function(c){var a=[];c.jstree._themes=!1;c.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",c.proxy(function(){var a=this._get_settings().themes;this.data.themes.dots=a.dots;this.data.themes.icons=a.icons;this.set_theme(a.theme,a.url)},this)).bind("loaded.jstree",c.proxy(function(){this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons()},this))},defaults:{theme:"default",url:!1,dots:!0,
icons:!0},_fn:{set_theme:function(g,l){if(!g)return!1;l||(l=c.jstree._themes+g+"/style.css");-1==c.inArray(l,a)&&(c.vakata.css.add_sheet({url:l}),a.push(l));this.data.themes.theme!=g&&(this.get_container().removeClass("jstree-"+this.data.themes.theme),this.data.themes.theme=g);this.get_container().addClass("jstree-"+g);this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons();this.__callback()},get_theme:function(){return this.data.themes.theme},
show_dots:function(){this.data.themes.dots=!0;this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=!1;this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons=!0;this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=!1;this.get_container().children("ul").addClass("jstree-no-icons")},
toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()}}});c(function(){!1===c.jstree._themes&&c("script").each(function(){if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/))return c.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/",!1});!1===c.jstree._themes&&(c.jstree._themes="themes/")});c.jstree.defaults.plugins.push("themes")})(jQuery);(function(c){var a=[];c.jstree.plugin("hotkeys",{__init:function(){if("undefined"===
typeof c.hotkeys)throw"jsTree hotkeys: jQuery hotkeys plugin not included.";if(!this.data.ui)throw"jsTree hotkeys: jsTree UI plugin not included.";c.each(this._get_settings().hotkeys,function(g,l){!1!==l&&-1==c.inArray(g,a)&&(c(document).bind("keydown",g,function(a){a:{var l=c.jstree._focused(),d;if(l&&(l.data&&l.data.hotkeys&&l.data.hotkeys.enabled)&&(d=l._get_settings().hotkeys[g])){a=d.call(l,a);break a}a=void 0}return a}),a.push(g))});this.get_container().bind("lock.jstree",c.proxy(function(){this.data.hotkeys.enabled&&
(this.data.hotkeys.enabled=!1,this.data.hotkeys.revert=!0)},this)).bind("unlock.jstree",c.proxy(function(){this.data.hotkeys.revert&&(this.data.hotkeys.enabled=!0)},this));this.enable_hotkeys()},defaults:{up:function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"ctrl+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||
this.data.ui.last_selected||-1));return!1},down:function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"ctrl+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},left:function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):
this.hover_node(this._get_prev(a)));return!1},"ctrl+left":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},"shift+left":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},right:function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?
this.open_node(a):this.hover_node(this._get_next(a)));return!1},"ctrl+right":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},"shift+right":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},space:function(){this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").click();
return!1},"ctrl+space":function(a){a.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(a);return!1},"shift+space":function(a){a.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(a);return!1},f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled=!0},disable_hotkeys:function(){this.data.hotkeys.enabled=
!1}}})})(jQuery);(function(c){c.jstree.plugin("json_data",{__init:function(){this._get_settings().json_data.progressive_unload&&this.get_container().bind("after_close.jstree",function(a,c){c.rslt.obj.children("ul").remove()})},defaults:{data:!1,ajax:!1,correct_state:!0,progressive_render:!1,progressive_unload:!1},_fn:{load_node:function(a,c,l){var f=this;this.load_node_json(a,function(){f.__callback({obj:f._get_node(a)});c.call(this)},l)},_is_loaded:function(a){var g=this._get_settings().json_data;
a=this._get_node(a);return-1==a||!a||!g.ajax&&!g.progressive_render&&!c.isFunction(g.data)||a.is(".jstree-open, .jstree-leaf")||0<a.children("ul").children("li").length},refresh:function(a){a=this._get_node(a);var g=this._get_settings().json_data;a&&(-1!==a&&g.progressive_unload&&(c.isFunction(g.data)||g.ajax))&&a.removeData("jstree_children");return this.__call_old()},load_node_json:function(a,g,l){var f=this.get_settings().json_data,p,d=function(){};p=function(){};if((a=this._get_node(a))&&-1!==
a&&(f.progressive_render||f.progressive_unload)&&!a.is(".jstree-open, .jstree-leaf")&&0===a.children("ul").children("li").length&&a.data("jstree_children")){if(p=this._parse_json(a.data("jstree_children"),a))a.append(p),f.progressive_unload||a.removeData("jstree_children");this.clean_node(a);g&&g.call(this)}else{if(a&&-1!==a){if(a.data("jstree_is_loading"))return;a.data("jstree_is_loading",!0)}switch(!0){case !f.data&&!f.ajax:throw"Neither data nor ajax settings supplied.";case c.isFunction(f.data):f.data.call(this,
a,c.proxy(function(c){(c=this._parse_json(c,a))?(-1!==a&&a?(a.append(c).children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(c.children()),this.clean_node(a),g&&g.call(this)):(-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),f.correct_state&&this.correct_state(a)):f.correct_state&&this.get_container().children("ul").empty(),l&&l.call(this))},this));break;
case !!f.data&&!f.ajax||!!f.data&&!!f.ajax&&(!a||-1===a):a&&-1!=a||((p=this._parse_json(f.data,a))?(this.get_container().children("ul").empty().append(p.children()),this.clean_node()):f.correct_state&&this.get_container().children("ul").empty());g&&g.call(this);break;case !f.data&&!!f.ajax||!!f.data&&!!f.ajax&&a&&-1!==a:d=function(c,g,p){var d=this.get_settings().json_data.ajax.error;d&&d.call(this,c,g,p);-1!=a&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),
"success"===g&&f.correct_state&&this.correct_state(a)):"success"===g&&f.correct_state&&this.get_container().children("ul").empty();l&&l.call(this)},p=function(l,p,n){var u=this.get_settings().json_data.ajax.success;u&&(l=u.call(this,l,p,n)||l);if(""===l||l&&l.toString&&""===l.toString().replace(/^[\s\n]+$/,"")||!c.isArray(l)&&!c.isPlainObject(l))return d.call(this,n,p,"");(l=this._parse_json(l,a))?(-1!==a&&a?(a.append(l).children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading")):
this.get_container().children("ul").empty().append(l.children()),this.clean_node(a),g&&g.call(this)):-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),f.correct_state&&(this.correct_state(a),g&&g.call(this))):f.correct_state&&(this.get_container().children("ul").empty(),g&&g.call(this))},f.ajax.context=this,f.ajax.error=d,f.ajax.success=p,f.ajax.dataType||(f.ajax.dataType="json"),c.isFunction(f.ajax.url)&&(f.ajax.url=f.ajax.url.call(this,a)),
c.isFunction(f.ajax.data)&&(f.ajax.data=f.ajax.data.call(this,a)),c.ajax(f.ajax)}}},_parse_json:function(a,g,l){var f=!1,p=this._get_settings(),d=p.json_data,n=p.core.html_titles,q;if(!a)return f;d.progressive_unload&&(g&&-1!==g)&&g.data("jstree_children",f);if(c.isArray(a)){f=c("<ul>");if(!a.length)return!1;p=0;for(d=a.length;p<d;p++)q=this._parse_json(a[p],g,!0),q.length&&(f=f.append(q));f=f.children()}else{"string"==typeof a&&(a={data:a});if(!a.data&&""!==a.data)return f;f=c("<li />");a.attr&&
f.attr(a.attr);a.metadata&&f.data(a.metadata);a.state&&f.addClass("jstree-"+a.state);c.isArray(a.data)||(q=a.data,a.data=[],a.data.push(q));c.each(a.data,function(g,l){q=c("<a />");c.isFunction(l)&&(l=l.call(this,a));if("string"==typeof l)q.attr("href","#")[n?"html":"text"](l);else l.attr||(l.attr={}),l.attr.href||(l.attr.href="#"),q.attr(l.attr)[n?"html":"text"](l.title),l.language&&q.addClass(l.language);q.prepend("<ins class='jstree-icon'>&#160;</ins>");!l.icon&&a.icon&&(l.icon=a.icon);l.icon&&
(-1===l.icon.indexOf("/")?q.children("ins").addClass(l.icon):q.children("ins").css("background","url('"+l.icon+"') center center no-repeat"));f.append(q)});f.prepend("<ins class='jstree-icon'>&#160;</ins>");a.children&&(d.progressive_render&&"open"!==a.state?f.addClass("jstree-closed").data("jstree_children",a.children):(d.progressive_unload&&f.data("jstree_children",a.children),c.isArray(a.children)&&a.children.length&&(q=this._parse_json(a.children,g,!0),q.length&&(g=c("<ul />"),g.append(q),f.append(g)))))}l||
(l=c("<ul />"),l.append(f),f=l);return f},get_json:function(a,g,l,f){var p=[],d=this._get_settings(),q=this,n,x,u,I,O,M;(a=this._get_node(a))&&-1!==a||(a=this.get_container().find("> ul > li"));g=c.isArray(g)?g:["id","class"];!f&&this.data.types&&g.push(d.types.type_attr);l=c.isArray(l)?l:[];a.each(function(){u=c(this);n={data:[]};g.length&&(n.attr={});c.each(g,function(a,c){(x=u.attr(c))&&(x.length&&x.replace(/jstree[^ ]*/ig,"").length)&&(n.attr[c]=(" "+x).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig,
" ").replace(/^ /,"").replace(/ $/,""))});u.hasClass("jstree-open")&&(n.state="open");u.hasClass("jstree-closed")&&(n.state="closed");u.data()&&(n.metadata=u.data());I=u.children("a");I.each(function(){O=c(this);l.length||-1!==c.inArray("languages",d.plugins)||O.children("ins").get(0).style.backgroundImage.length||O.children("ins").get(0).className&&O.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").length?(M=!1,-1!==c.inArray("languages",d.plugins)&&(c.isArray(d.languages)&&d.languages.length)&&
c.each(d.languages,function(a,c){if(O.hasClass(c))return M=c,!1}),x={attr:{},title:q.get_text(O,M)},c.each(l,function(a,c){x.attr[c]=(" "+(O.attr(c)||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")}),-1!==c.inArray("languages",d.plugins)&&(c.isArray(d.languages)&&d.languages.length)&&c.each(d.languages,function(a,c){if(O.hasClass(c))return x.language=c,!0}),O.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(x.icon=
O.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")),O.children("ins").get(0).style.backgroundImage.length&&(x.icon=O.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")",""))):x=q.get_text(O);1<I.length?n.data.push(x):n.data=x});u=u.find("> ul > li");u.length&&(n.children=q.get_json(u,g,l,!0));p.push(n)});return p}}})})(jQuery);(function(c){var a=!1;c.jstree.plugin("languages",{__init:function(){this._load_css()},
defaults:[],_fn:{set_lang:function(g){var l=this._get_settings().languages,f=!1,p=".jstree-"+this.get_index()+" a";if(!c.isArray(l)||0===l.length)return!1;if(-1==c.inArray(g,l))if(l[g])g=l[g];else return!1;if(g==this.data.languages.current_language)return!0;f=c.vakata.css.get_css(p+"."+this.data.languages.current_language,!1,a);!1!==f&&(f.style.display="none");f=c.vakata.css.get_css(p+"."+g,!1,a);!1!==f&&(f.style.display="");this.data.languages.current_language=g;this.__callback(g);return!0},get_lang:function(){return this.data.languages.current_language},
_get_string:function(a,l){var f=this._get_settings().languages,p=this._get_settings().core.strings;c.isArray(f)&&f.length&&(l=l&&-1!=c.inArray(l,f)?l:this.data.languages.current_language);return p[l]&&p[l][a]?p[l][a]:p[a]?p[a]:a},get_text:function(a,l){a=this._get_node(a)||this.data.ui.last_selected;if(!a.size())return!1;var f=this._get_settings().languages,p=this._get_settings().core.html_titles;c.isArray(f)&&f.length?(l=l&&-1!=c.inArray(l,f)?l:this.data.languages.current_language,a=a.children("a."+
l)):a=a.children("a:eq(0)");if(p)return a=a.clone(),a.children("INS").remove(),a.html();a=a.contents().filter(function(){return 3==this.nodeType})[0];return a.nodeValue},set_text:function(a,l,f){a=this._get_node(a)||this.data.ui.last_selected;if(!a.size())return!1;var p=this._get_settings().languages,d=this._get_settings().core.html_titles;c.isArray(p)&&p.length?(f=f&&-1!=c.inArray(f,p)?f:this.data.languages.current_language,a=a.children("a."+f)):a=a.children("a:eq(0)");if(d)return p=a.children("INS").clone(),
a.html(l).prepend(p),this.__callback({obj:a,name:l,lang:f}),!0;a=a.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:a,name:l,lang:f});return a.nodeValue=l},_load_css:function(){var g=this._get_settings().languages,l="/* languages css */",f=".jstree-"+this.get_index()+" a",p;if(c.isArray(g)&&g.length){this.data.languages.current_language=g[0];for(p=0;p<g.length;p++)l+=f+"."+g[p]+" {",g[p]!=this.data.languages.current_language&&(l+=" display:none; "),l+=" } ";a=c.vakata.css.add_sheet({str:l,
title:"jstree-languages"})}},create_node:function(a,l,f,p){return this.__call_old(!0,a,l,f,function(a){var f=this._get_settings().languages,l=a.children("a"),g;if(c.isArray(f)&&f.length){for(g=0;g<f.length;g++)l.is("."+f[g])||a.append(l.eq(0).clone().removeClass(f.join(" ")).addClass(f[g]));l.not("."+f.join(", .")).remove()}p&&p.call(this,a)})}}})})(jQuery);(function(c){c.jstree.plugin("cookies",{__init:function(){if("undefined"===typeof c.cookie)throw"jsTree cookie: jQuery cookie plugin not included.";
var a=this._get_settings().cookies,g;a.save_loaded&&(g=c.cookie(a.save_loaded))&&g.length&&(this.data.core.to_load=g.split(","));a.save_opened&&(g=c.cookie(a.save_opened))&&g.length&&(this.data.core.to_open=g.split(","));a.save_selected&&(g=c.cookie(a.save_selected))&&(g.length&&this.data.ui)&&(this.data.ui.to_select=g.split(","));this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",c.proxy(function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",
c.proxy(function(a){this._get_settings().cookies.auto_save&&this.save_cookie((a.handleObj.namespace+a.handleObj.type).replace("jstree",""))},this))},this))},defaults:{save_loaded:"jstree_load",save_opened:"jstree_open",save_selected:"jstree_select",auto_save:!0,cookie_options:{}},_fn:{save_cookie:function(a){if(!this.data.core.refreshing){var g=this._get_settings().cookies;if(a)switch(a){case "open_node":case "close_node":g.save_opened&&(this.save_opened(),c.cookie(g.save_opened,this.data.core.to_open.join(","),
g.cookie_options));g.save_loaded&&(this.save_loaded(),c.cookie(g.save_loaded,this.data.core.to_load.join(","),g.cookie_options));break;case "select_node":case "deselect_node":g.save_selected&&this.data.ui&&(this.save_selected(),c.cookie(g.save_selected,this.data.ui.to_select.join(","),g.cookie_options))}else g.save_loaded&&(this.save_loaded(),c.cookie(g.save_loaded,this.data.core.to_load.join(","),g.cookie_options)),g.save_opened&&(this.save_opened(),c.cookie(g.save_opened,this.data.core.to_open.join(","),
g.cookie_options)),g.save_selected&&this.data.ui&&(this.save_selected(),c.cookie(g.save_selected,this.data.ui.to_select.join(","),g.cookie_options))}}}})})(jQuery);(function(c){c.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",c.proxy(function(a,c){var l=this._get_node(c.rslt.obj),l=-1===l?this.get_container().children("ul"):l.children("ul");this.sort(l)},this)).bind("rename_node.jstree create_node.jstree create.jstree",c.proxy(function(a,c){this.sort(c.rslt.obj.parent())},
this)).bind("move_node.jstree",c.proxy(function(a,c){var l=-1==c.rslt.np?this.get_container():c.rslt.np;this.sort(l.children("ul"))},this))},defaults:function(a,c){return this.get_text(a)>this.get_text(c)?1:-1},_fn:{sort:function(a){var g=this._get_settings().sort,l=this;a.append(c.makeArray(a.children("li")).sort(c.proxy(g,l)));a.find("> li > ul").each(function(){l.sort(c(this))});this.clean_node(a)}}})})(jQuery);(function(c){var a=!1,g=!1,l=!1,f=!1,p=!1,d=!1,n=!1,q=!1,x=!1;c.vakata.dnd={is_down:!1,
is_drag:!1,helper:!1,scroll_spd:10,init_x:0,init_y:0,threshold:5,helper_left:5,helper_top:10,user_data:{},drag_start:function(a,f,l){c.vakata.dnd.is_drag&&c.vakata.drag_stop({});try{a.currentTarget.unselectable="on",a.currentTarget.onselectstart=function(){return!1},a.currentTarget.style&&(a.currentTarget.style.MozUserSelect="none")}catch(g){}c.vakata.dnd.init_x=a.pageX;c.vakata.dnd.init_y=a.pageY;c.vakata.dnd.user_data=f;c.vakata.dnd.is_down=!0;c.vakata.dnd.helper=c("<div id='vakata-dragged' />").html(l);
c(document).bind("mousemove",c.vakata.dnd.drag);c(document).bind("mouseup",c.vakata.dnd.drag_stop);return!1},drag:function(a){if(c.vakata.dnd.is_down){if(!c.vakata.dnd.is_drag)if(5<Math.abs(a.pageX-c.vakata.dnd.init_x)||5<Math.abs(a.pageY-c.vakata.dnd.init_y))c.vakata.dnd.helper.appendTo("body"),c.vakata.dnd.is_drag=!0,c(document).triggerHandler("drag_start.vakata",{event:a,data:c.vakata.dnd.user_data});else return;if("mousemove"===a.type){var f=c(document),l=f.scrollTop(),f=f.scrollLeft();20>a.pageY-
l?(d&&"down"===n&&(clearInterval(d),d=!1),d||(n="up",d=setInterval(function(){c(document).scrollTop(c(document).scrollTop()-c.vakata.dnd.scroll_spd)},150))):d&&"up"===n&&(clearInterval(d),d=!1);20>c(window).height()-(a.pageY-l)?(d&&"up"===n&&(clearInterval(d),d=!1),d||(n="down",d=setInterval(function(){c(document).scrollTop(c(document).scrollTop()+c.vakata.dnd.scroll_spd)},150))):d&&"down"===n&&(clearInterval(d),d=!1);20>a.pageX-f?(p&&"right"===q&&(clearInterval(p),p=!1),p||(q="left",p=setInterval(function(){c(document).scrollLeft(c(document).scrollLeft()-
c.vakata.dnd.scroll_spd)},150))):p&&"left"===q&&(clearInterval(p),p=!1);20>c(window).width()-(a.pageX-f)?(p&&"left"===q&&(clearInterval(p),p=!1),p||(q="right",p=setInterval(function(){c(document).scrollLeft(c(document).scrollLeft()+c.vakata.dnd.scroll_spd)},150))):p&&"right"===q&&(clearInterval(p),p=!1)}c.vakata.dnd.helper.css({left:a.pageX+c.vakata.dnd.helper_left+"px",top:a.pageY+c.vakata.dnd.helper_top+"px"});c(document).triggerHandler("drag.vakata",{event:a,data:c.vakata.dnd.user_data})}},drag_stop:function(a){p&&
clearInterval(p);d&&clearInterval(d);c(document).unbind("mousemove",c.vakata.dnd.drag);c(document).unbind("mouseup",c.vakata.dnd.drag_stop);c(document).triggerHandler("drag_stop.vakata",{event:a,data:c.vakata.dnd.user_data});c.vakata.dnd.helper.remove();c.vakata.dnd.init_x=0;c.vakata.dnd.init_y=0;c.vakata.dnd.user_data={};c.vakata.dnd.is_down=!1;c.vakata.dnd.is_drag=!1}};c(function(){c.vakata.css.add_sheet({str:"#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } ",
title:"vakata"})});c.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:!1,after:!1,inside:!1,before:!1,off:!1,prepared:!1,w:0,to1:!1,to2:!1,cof:!1,cw:!1,ch:!1,i1:!1,i2:!1,mto:!1};this.get_container().bind("mouseenter.jstree",c.proxy(function(g){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&(this.data.themes&&(l.attr("class","jstree-"+this.data.themes.theme),f&&f.attr("class","jstree-"+this.data.themes.theme),c.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),
g.currentTarget===g.target&&(c.vakata.dnd.user_data.obj&&c(c.vakata.dnd.user_data.obj).length&&c(c.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==g.target)&&(g=c.jstree._reference(g.target),g.data.dnd.foreign?(g=g._get_settings().dnd.drag_check.call(this,{o:a,r:g.get_container(),is_root:!0}),!0!==g&&!0!==g.inside&&!0!==g.before&&!0!==g.after||c.vakata.dnd.helper.children("ins").attr("class","jstree-ok")):(g.prepare_move(a,g.get_container(),"last"),g.check_move()&&c.vakata.dnd.helper.children("ins").attr("class",
"jstree-ok"))))},this)).bind("mouseup.jstree",c.proxy(function(f){if(c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&f.currentTarget===f.target&&c.vakata.dnd.user_data.obj&&c(c.vakata.dnd.user_data.obj).length&&c(c.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==f.target){var l=c.jstree._reference(f.currentTarget);l.data.dnd.foreign?(f=l._get_settings().dnd.drag_check.call(this,{o:a,r:l.get_container(),is_root:!0}),!0!==f&&!0!==f.inside&&!0!==f.before&&!0!==f.after||l._get_settings().dnd.drag_finish.call(this,
{o:a,r:l.get_container(),is_root:!0})):l.move_node(a,l.get_container(),"last",f[l._get_settings().dnd.copy_modifier+"Key"])}},this)).bind("mouseleave.jstree",c.proxy(function(a){if(a.relatedTarget&&a.relatedTarget.id&&"jstree-marker-line"===a.relatedTarget.id)return!1;c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),
c.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"))},this)).bind("mousemove.jstree",c.proxy(function(a){if(c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree){var f=this.get_container()[0];a.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(c.proxy(function(){this.scrollLeft+=c.vakata.dnd.scroll_spd},f),100)):a.pageX-24<this.data.dnd.cof.left?(this.data.dnd.i1&&
clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(c.proxy(function(){this.scrollLeft-=c.vakata.dnd.scroll_spd},f),100)):this.data.dnd.i1&&clearInterval(this.data.dnd.i1);a.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(c.proxy(function(){this.scrollTop+=c.vakata.dnd.scroll_spd},f),100)):a.pageY-24<this.data.dnd.cof.top?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(c.proxy(function(){this.scrollTop-=
c.vakata.dnd.scroll_spd},f),100)):this.data.dnd.i2&&clearInterval(this.data.dnd.i2)}},this)).bind("scroll.jstree",c.proxy(function(a){c.vakata.dnd.is_drag&&(c.vakata.dnd.user_data.jstree&&l&&f)&&(l.hide(),f.hide())},this)).delegate("a","mousedown.jstree",c.proxy(function(a){if(1===a.which)return this.start_drag(a.currentTarget,a),!1},this)).delegate("a","mouseenter.jstree",c.proxy(function(a){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&this.dnd_enter(a.currentTarget)},this)).delegate("a",
"mousemove.jstree",c.proxy(function(a){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&(g&&g.length&&g.children("a")[0]===a.currentTarget||this.dnd_enter(a.currentTarget),"undefined"===typeof this.data.dnd.off.top&&(this.data.dnd.off=c(a.target).offset()),this.data.dnd.w=(a.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height,0>this.data.dnd.w&&(this.data.dnd.w+=this.data.core.li_height),this.dnd_show())},this)).delegate("a","mouseleave.jstree",c.proxy(function(a){if(c.vakata.dnd.is_drag&&
c.vakata.dnd.user_data.jstree){if(a.relatedTarget&&a.relatedTarget.id&&"jstree-marker-line"===a.relatedTarget.id)return!1;l&&l.hide();f&&f.hide();this.data.dnd.mto=setTimeout(function(c){return function(){c.dnd_leave(a)}}(this),0)}},this)).delegate("a","mouseup.jstree",c.proxy(function(a){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&this.dnd_finish(a)},this));c(document).bind("drag_stop.vakata",c.proxy(function(){this.data.dnd.to1&&clearTimeout(this.data.dnd.to1);this.data.dnd.to2&&clearTimeout(this.data.dnd.to2);
this.data.dnd.i1&&clearInterval(this.data.dnd.i1);this.data.dnd.i2&&clearInterval(this.data.dnd.i2);this.data.dnd.after=!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;this.data.dnd.off=!1;this.data.dnd.prepared=!1;this.data.dnd.w=!1;this.data.dnd.to1=!1;this.data.dnd.to2=!1;this.data.dnd.i1=!1;this.data.dnd.i2=!1;this.data.dnd.active=!1;this.data.dnd.foreign=!1;l&&l.css({top:"-2000px"});f&&f.css({top:"-2000px"})},this)).bind("drag_start.vakata",c.proxy(function(a,f){if(f.data.jstree){var l=c(f.event.target);
l.closest(".jstree").hasClass("jstree-"+this.get_index())&&this.dnd_enter(l)}},this));var d=this._get_settings().dnd;d.drag_target&&c(document).delegate(d.drag_target,"mousedown.jstree-"+this.get_index(),c.proxy(function(g){a=g.target;c.vakata.dnd.drag_start(g,{jstree:!0,obj:g.target},"<ins class='jstree-icon'></ins>"+c(g.target).text());this.data.themes&&(l&&l.attr("class","jstree-"+this.data.themes.theme),f&&f.attr("class","jstree-"+this.data.themes.theme),c.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+
this.data.themes.theme));c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var d=this.get_container();this.data.dnd.cof=d.offset();this.data.dnd.cw=parseInt(d.width(),10);this.data.dnd.ch=parseInt(d.height(),10);this.data.dnd.foreign=!0;g.preventDefault()},this));d.drop_target&&c(document).delegate(d.drop_target,"mouseenter.jstree-"+this.get_index(),c.proxy(function(f){this.data.dnd.active&&this._get_settings().dnd.drop_check.call(this,{o:a,r:c(f.target),e:f})&&c.vakata.dnd.helper.children("ins").attr("class",
"jstree-ok")},this)).delegate(d.drop_target,"mouseleave.jstree-"+this.get_index(),c.proxy(function(a){this.data.dnd.active&&c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")},this)).delegate(d.drop_target,"mouseup.jstree-"+this.get_index(),c.proxy(function(f){this.data.dnd.active&&c.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&this._get_settings().dnd.drop_finish.call(this,{o:a,r:c(f.target),e:f})},this))},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,
drop_target:".jstree-drop",drop_check:function(a){return!0},drop_finish:c.noop,drag_target:".jstree-draggable",drag_finish:c.noop,drag_check:function(a){return{after:!1,before:!1,inside:!0}}},_fn:{dnd_prepare:function(){if(g&&g.length){this.data.dnd.off=g.offset();this._get_settings().core.rtl&&(this.data.dnd.off.right=this.data.dnd.off.left+g.width());if(this.data.dnd.foreign){var c=this._get_settings().dnd.drag_check.call(this,{o:a,r:g});this.data.dnd.after=c.after;this.data.dnd.before=c.before;
this.data.dnd.inside=c.inside;this.data.dnd.prepared=!0;return this.dnd_show()}this.prepare_move(a,g,"before");this.data.dnd.before=this.check_move();this.prepare_move(a,g,"after");this.data.dnd.after=this.check_move();this._is_loaded(g)?(this.prepare_move(a,g,"inside"),this.data.dnd.inside=this.check_move()):this.data.dnd.inside=!1;this.data.dnd.prepared=!0;return this.dnd_show()}},dnd_show:function(){if(this.data.dnd.prepared){var a=["before","inside","after"],g=!1,d=this._get_settings().core.rtl,
a=this.data.dnd.w<this.data.core.li_height/3?["before","inside","after"]:this.data.dnd.w<=2*this.data.core.li_height/3?this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"]:["after","inside","before"];c.each(a,c.proxy(function(a,f){if(this.data.dnd[f])return c.vakata.dnd.helper.children("ins").attr("class","jstree-ok"),g=f,!1},this));!1===g&&c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");a=d?this.data.dnd.off.right-18:this.data.dnd.off.left+
10;switch(g){case "before":l.css({left:a+"px",top:this.data.dnd.off.top-6+"px"}).show();f&&f.css({left:a+8+"px",top:this.data.dnd.off.top-1+"px"}).show();break;case "after":l.css({left:a+"px",top:this.data.dnd.off.top+this.data.core.li_height-6+"px"}).show();f&&f.css({left:a+8+"px",top:this.data.dnd.off.top+this.data.core.li_height-1+"px"}).show();break;case "inside":l.css({left:a+(d?-4:4)+"px",top:this.data.dnd.off.top+this.data.core.li_height/2-5+"px"}).show();f&&f.hide();break;default:l.hide(),
f&&f.hide()}return x=g}},dnd_open:function(){this.data.dnd.to2=!1;this.open_node(g,c.proxy(this.dnd_prepare,this),!0)},dnd_finish:function(c){this.data.dnd.foreign?(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside)&&this._get_settings().dnd.drag_finish.call(this,{o:a,r:g,p:x}):(this.dnd_prepare(),this.move_node(a,g,x,c[this._get_settings().dnd.copy_modifier+"Key"]));g=a=!1;l.hide();f&&f.hide()},dnd_enter:function(a){this.data.dnd.mto&&(clearTimeout(this.data.dnd.mto),this.data.dnd.mto=
!1);var f=this._get_settings().dnd;this.data.dnd.prepared=!1;g=this._get_node(a);f.check_timeout?(this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to1=setTimeout(c.proxy(this.dnd_prepare,this),f.check_timeout)):this.dnd_prepare();f.open_timeout?(this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),g&&(g.length&&g.hasClass("jstree-closed"))&&(this.data.dnd.to2=setTimeout(c.proxy(this.dnd_open,this),f.open_timeout))):g&&(g.length&&g.hasClass("jstree-closed"))&&this.dnd_open()},dnd_leave:function(a){this.data.dnd.after=
!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");l.hide();f&&f.hide();g&&g[0]===a.target.parentNode&&(this.data.dnd.to1&&(clearTimeout(this.data.dnd.to1),this.data.dnd.to1=!1),this.data.dnd.to2&&(clearTimeout(this.data.dnd.to2),this.data.dnd.to2=!1))},start_drag:function(g,d){a=this._get_node(g);this.data.ui&&this.is_selected(a)&&(a=this._get_node(null,!0));var p=1<a.length?this._get_string("multiple_selection"):this.get_text(a),
n=this.get_container();this._get_settings().core.html_titles||(p=p.replace(/</ig,"&lt;").replace(/>/ig,"&gt;"));c.vakata.dnd.drag_start(d,{jstree:!0,obj:a},"<ins class='jstree-icon'></ins>"+p);this.data.themes&&(l&&l.attr("class","jstree-"+this.data.themes.theme),f&&f.attr("class","jstree-"+this.data.themes.theme),c.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme));this.data.dnd.cof=n.offset();this.data.dnd.cw=parseInt(n.width(),10);this.data.dnd.ch=parseInt(n.height(),
10);this.data.dnd.active=!0}}});c(function(){c.vakata.css.add_sheet({str:"#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px;  -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; } #vakata-dragged .jstree-ok { background:green; } #vakata-dragged .jstree-invalid { background:red; } #jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } #jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43;  cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666;  -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; }",
title:"jstree"});l=c("<div />").attr({id:"jstree-marker"}).hide().html("&raquo;").bind("mouseleave mouseenter",function(a){l.hide();f.hide();a.preventDefault();a.stopImmediatePropagation();return!1}).appendTo("body");f=c("<div />").attr({id:"jstree-marker-line"}).hide().bind("mouseup",function(a){if(g&&g.length)return g.children("a").trigger(a),a.preventDefault(),a.stopImmediatePropagation(),!1}).bind("mouseleave",function(a){var d=c(a.relatedTarget);if((d.is(".jstree")||0===d.closest(".jstree").length)&&
g&&g.length)return g.children("a").trigger(a),l.hide(),f.hide(),a.preventDefault(),a.stopImmediatePropagation(),!1}).appendTo("body");c(document).bind("drag_start.vakata",function(a,c){c.data.jstree&&(l.show(),f&&f.show())});c(document).bind("drag_stop.vakata",function(a,c){c.data.jstree&&(l.hide(),f&&f.hide())})})})(jQuery);(function(c){c.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui;this.data.ui&&this.data.checkbox.noui&&(this.select_node=
this.deselect_node=this.deselect_all=c.noop,this.get_selected=this.get_checked);this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",c.proxy(function(a,c){this._prepare_checkboxes(c.rslt.obj)},this)).bind("loaded.jstree",c.proxy(function(a){this._prepare_checkboxes()},this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",c.proxy(function(a){a.preventDefault();this._get_node(a.target).hasClass("jstree-checked")?this.uncheck_node(a.target):
this.check_node(a.target);if(this.data.ui&&this.data.checkbox.noui)this.save_selected(),this.data.cookies&&this.save_cookie("select_node");else return a.stopImmediatePropagation(),!1},this))},defaults:{override_ui:!1,two_state:!1,real_checkboxes:!1,checked_parent_open:!0,real_checkboxes_names:function(a){return["check_"+(a[0].id||Math.ceil(1E4*Math.random())),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},
_fn:{_checkbox_notify:function(a,c){c.checked&&this.check_node(a,!1)},_prepare_checkboxes:function(a){a=a&&-1!=a?this._get_node(a):this.get_container().find("> ul > li");if(!1!==a){var g,l=this,f,d=this._get_settings().checkbox.two_state,n=this._get_settings().checkbox.real_checkboxes,q=this._get_settings().checkbox.real_checkboxes_names;a.each(function(){f=c(this);g=f.is("li")&&(f.hasClass("jstree-checked")||n&&f.children(":checked").length)?"jstree-checked":"jstree-unchecked";f.find("li").addBack().each(function(){var a=
c(this),f;a.children("a"+(l.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(d?"jstree-unchecked":g);n&&(a.children(":checkbox").length?a.children(":checkbox").addClass("jstree-real-checkbox"):(f=q.call(l,a),a.prepend("<input type='checkbox' class='jstree-real-checkbox' id='"+f[0]+"' name='"+f[0]+"' value='"+f[1]+"' />")));d?(a.hasClass("jstree-checked")||a.children(":checked").length)&&
a.addClass("jstree-checked").children(":checkbox").prop("checked",!0):("jstree-checked"===g||a.hasClass("jstree-checked")||a.children(":checked").length)&&a.find("li").addBack().addClass("jstree-checked").children(":checkbox").prop("checked",!0)})});d||a.find(".jstree-checked").parent().parent().each(function(){l._repair_state(this)})}},change_state:function(a,g){a=this._get_node(a);var l=!1,f=this._get_settings().checkbox.real_checkboxes;if(!a||-1===a)return!1;g=!1===g||!0===g?g:a.hasClass("jstree-checked");
if(this._get_settings().checkbox.two_state)g?(a.removeClass("jstree-checked").addClass("jstree-unchecked"),f&&a.children(":checkbox").prop("checked",!1)):(a.removeClass("jstree-unchecked").addClass("jstree-checked"),f&&a.children(":checkbox").prop("checked",!0));else{if(g){l=a.find("li").addBack();if(!l.filter(".jstree-checked, .jstree-undetermined").length)return!1;l.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");f&&l.children(":checkbox").prop("checked",!1)}else{l=
a.find("li").addBack();if(!l.filter(".jstree-unchecked, .jstree-undetermined").length)return!1;l.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");f&&l.children(":checkbox").prop("checked",!0);this.data.ui&&(this.data.ui.last_selected=a);this.data.checkbox.last_selected=a}a.parentsUntil(".jstree","li").each(function(){var a=c(this);if(g){if(a.children("ul").children("li.jstree-checked, li.jstree-undetermined").length)return a.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),
f&&a.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",!1),!1;a.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");f&&a.children(":checkbox").prop("checked",!1)}else{if(a.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length)return a.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),f&&a.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",
!1),!1;a.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");f&&a.children(":checkbox").prop("checked",!0)}})}this.data.ui&&this.data.checkbox.noui&&(this.data.ui.selected=this.get_checked());this.__callback(a);return!0},check_node:function(a){if(this.change_state(a,!1)){a=this._get_node(a);if(this._get_settings().checkbox.checked_parent_open){var c=this;a.parents(".jstree-closed").each(function(){c.open_node(this,!1,!0)})}this.__callback({obj:a})}},uncheck_node:function(a){this.change_state(a,
!0)&&this.__callback({obj:this._get_node(a)})},check_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!1)});this.__callback()},uncheck_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!0)});this.__callback()},is_checked:function(a){a=this._get_node(a);
return a.length?a.is(".jstree-checked"):!1},get_checked:function(a,c){a=a&&-1!==a?this._get_node(a):this.get_container();return c||this._get_settings().checkbox.two_state?a.find(".jstree-checked"):a.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(a,c){a=a&&-1!==a?this._get_node(a):this.get_container();return c||this._get_settings().checkbox.two_state?a.find(".jstree-unchecked"):a.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},
show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(a){a=this._get_node(a);if(a.length)if(this._get_settings().checkbox.two_state)a.find("li").addBack().not(".jstree-checked").removeClass("jstree-undetermined").addClass("jstree-unchecked").children(":checkbox").prop("checked",!0);else{var c=this._get_settings().checkbox.real_checkboxes,
l=a.find("> ul > .jstree-checked").length,f=a.find("> ul > .jstree-undetermined").length,d=a.find("> ul > li").length;0===d?a.hasClass("jstree-undetermined")&&this.change_state(a,!1):0===l&&0===f?this.change_state(a,!0):l===d?this.change_state(a,!1):(a.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),c&&a.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",!1))}},reselect:function(){if(this.data.ui&&this.data.checkbox.noui){var a=
this,g=this.data.ui.to_select,g=c.map(c.makeArray(g),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});this.deselect_all();c.each(g,function(c,f){a.check_node(f)});this.__callback()}else this.__call_old()},save_loaded:function(){var a=this;this.data.core.to_load=[];this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){this.id&&a.data.core.to_load.push("#"+this.id)})}}});
c(function(){c.vakata.css.add_sheet({str:".jstree .jstree-real-checkbox { display:none; } ",title:"jstree"})})})(jQuery);(function(c){c.vakata.xslt=function(a,f,g){var d=!1,n,q,x;if(!1===d&&window.ActiveXObject)try{d=new ActiveXObject("Msxml2.XSLTemplate"),q=new ActiveXObject("Msxml2.DOMDocument"),q.loadXML(a),x=new ActiveXObject("Msxml2.FreeThreadedDOMDocument"),x.loadXML(f),d.stylesheet=x,n=d.createProcessor(),n.input=q,n.transform(),d=n.output}catch(u){}a=c.parseXML(a);f=c.parseXML(f);!1===d&&
"undefined"!==typeof XSLTProcessor&&(n=new XSLTProcessor,n.importStylesheet(f),d=n.transformToFragment(a,document),d=c("<div />").append(d).html());!1===d&&"undefined"!==typeof a.transformNode&&(d=a.transformNode(f));g.call(null,d)};var a={nest:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/html" /><xsl:template match="/">\t<xsl:call-template name="nodes">\t\t<xsl:with-param name="node" select="/root" />\t</xsl:call-template></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<ul>\t<xsl:for-each select="$node/item">\t\t<xsl:variable name="children" select="count(./item) &gt; 0" />\t\t<li>\t\t\t<xsl:attribute name="class">\t\t\t\t<xsl:if test="position() = last()">jstree-last </xsl:if>\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t\t\t</xsl:choose>\t\t\t\t<xsl:value-of select="@class" />\t\t\t</xsl:attribute>\t\t\t<xsl:for-each select="@*">\t\t\t\t<xsl:if test="name() != \'class\' and name() != \'state\' and name() != \'hasChildren\'">\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t</xsl:if>\t\t\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t\t\t<xsl:for-each select="content/name">\t\t\t\t<a>\t\t\t\t<xsl:attribute name="href">\t\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t\t\t</xsl:choose>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t\t\t<xsl:for-each select="@*">\t\t\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t\t</xsl:if>\t\t\t\t</xsl:for-each>\t\t\t\t\t<ins>\t\t\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t\t\t</xsl:attribute>\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t\t\t</ins>\t\t\t\t\t<xsl:copy-of select="./child::node()" />\t\t\t\t</a>\t\t\t</xsl:for-each>\t\t\t<xsl:if test="$children or @hasChildren"><xsl:call-template name="nodes"><xsl:with-param name="node" select="current()" /></xsl:call-template></xsl:if>\t\t</li>\t</xsl:for-each>\t</ul></xsl:template></xsl:stylesheet>',
flat:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/xml" /><xsl:template match="/">\t<ul>\t<xsl:for-each select="//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]">\t\t<xsl:call-template name="nodes">\t\t\t<xsl:with-param name="node" select="." />\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t</xsl:call-template>\t</xsl:for-each>\t</ul></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<xsl:param name="is_last" />\t<xsl:variable name="children" select="count(//item[@parent_id=$node/attribute::id]) &gt; 0" />\t<li>\t<xsl:attribute name="class">\t\t<xsl:if test="$is_last = true()">jstree-last </xsl:if>\t\t<xsl:choose>\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t</xsl:choose>\t\t<xsl:value-of select="@class" />\t</xsl:attribute>\t<xsl:for-each select="@*">\t\t<xsl:if test="name() != \'parent_id\' and name() != \'hasChildren\' and name() != \'class\' and name() != \'state\'">\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t</xsl:if>\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t<xsl:for-each select="content/name">\t\t<a>\t\t<xsl:attribute name="href">\t\t\t<xsl:choose>\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t</xsl:choose>\t\t</xsl:attribute>\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t<xsl:for-each select="@*">\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t</xsl:if>\t\t</xsl:for-each>\t\t\t<ins>\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t</ins>\t\t\t<xsl:copy-of select="./child::node()" />\t\t</a>\t</xsl:for-each>\t<xsl:if test="$children">\t\t<ul>\t\t<xsl:for-each select="//item[@parent_id=$node/attribute::id]">\t\t\t<xsl:call-template name="nodes">\t\t\t\t<xsl:with-param name="node" select="." />\t\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t\t</xsl:call-template>\t\t</xsl:for-each>\t\t</ul>\t</xsl:if>\t</li></xsl:template></xsl:stylesheet>'},
g=function(a){return a.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};c.jstree.plugin("xml_data",{defaults:{data:!1,ajax:!1,xsl:"flat",clean_node:!1,correct_state:!0,get_skip_empty:!1,get_include_preamble:!0},_fn:{load_node:function(a,c,g){var d=this;this.load_node_xml(a,function(){d.__callback({obj:d._get_node(a)});c.call(this)},g)},_is_loaded:function(a){var f=this._get_settings().xml_data;a=this._get_node(a);return-1==a||
!a||!f.ajax&&!c.isFunction(f.data)||a.is(".jstree-open, .jstree-leaf")||0<a.children("ul").children("li").size()},load_node_xml:function(a,f,g){var d=this.get_settings().xml_data,n=function(){},q=function(){};if((a=this._get_node(a))&&-1!==a){if(a.data("jstree_is_loading"))return;a.data("jstree_is_loading",!0)}switch(!0){case !d.data&&!d.ajax:throw"Neither data nor ajax settings supplied.";case c.isFunction(d.data):d.data.call(this,a,c.proxy(function(g){this.parse_xml(g,c.proxy(function(g){g&&(g=
g.replace(/ ?xmlns="[^"]*"/ig,""),10<g.length?(g=c(g),-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(g),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(g.children()),d.clean_node&&this.clean_node(a),f&&f.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),d.correct_state&&(this.correct_state(a),f&&f.call(this))):d.correct_state&&(this.get_container().children("ul").empty(),
f&&f.call(this)))},this))},this));break;case !!d.data&&!d.ajax||!!d.data&&!!d.ajax&&(!a||-1===a):a&&-1!=a||this.parse_xml(d.data,c.proxy(function(g){g?(g=g.replace(/ ?xmlns="[^"]*"/ig,""),10<g.length&&(g=c(g),this.get_container().children("ul").empty().append(g.children()),d.clean_node&&this.clean_node(a),f&&f.call(this))):d.correct_state&&(this.get_container().children("ul").empty(),f&&f.call(this))},this));break;case !d.data&&!!d.ajax||!!d.data&&!!d.ajax&&a&&-1!==a:n=function(c,f,n){var q=this.get_settings().xml_data.ajax.error;
q&&q.call(this,c,f,n);-1!==a&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),"success"===f&&d.correct_state&&this.correct_state(a)):"success"===f&&d.correct_state&&this.get_container().children("ul").empty();g&&g.call(this)},q=function(g,p,q){g=q.responseText;var v=this.get_settings().xml_data.ajax.success;v&&(g=v.call(this,g,p,q)||g);if(""===g||g&&g.toString&&""===g.toString().replace(/^[\s\n]+$/,""))return n.call(this,q,p,"");this.parse_xml(g,
c.proxy(function(g){g&&(g=g.replace(/ ?xmlns="[^"]*"/ig,""),10<g.length?(g=c(g),-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(g),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(g.children()),d.clean_node&&this.clean_node(a),f&&f.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),d.correct_state&&(this.correct_state(a),f&&f.call(this))):d.correct_state&&(this.get_container().children("ul").empty(),
f&&f.call(this)))},this))},d.ajax.context=this,d.ajax.error=n,d.ajax.success=q,d.ajax.dataType||(d.ajax.dataType="xml"),c.isFunction(d.ajax.url)&&(d.ajax.url=d.ajax.url.call(this,a)),c.isFunction(d.ajax.data)&&(d.ajax.data=d.ajax.data.call(this,a)),c.ajax(d.ajax)}},parse_xml:function(g,f){var d=this._get_settings().xml_data;c.vakata.xslt(g,a[d.xsl],f)},get_xml:function(a,f,d,n,q){var v="",x=this._get_settings(),u=this,I,O,M,Ta,Ga;a||(a="flat");q||(q=0);(f=this._get_node(f))&&-1!==f||(f=this.get_container().find("> ul > li"));
d=c.isArray(d)?d:["id","class"];!q&&(this.data.types&&-1===c.inArray(x.types.type_attr,d))&&d.push(x.types.type_attr);n=c.isArray(n)?n:[];q||(x.xml_data.get_include_preamble&&(v+='<?xml version="1.0" encoding="UTF-8"?>'),v+="<root>");f.each(function(){v+="<item";M=c(this);c.each(d,function(a,c){var f=M.attr(c);x.xml_data.get_skip_empty&&"undefined"===typeof f||(v+=" "+c+'="'+g((" "+(f||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"')});M.hasClass("jstree-open")&&
(v+=' state="open"');M.hasClass("jstree-closed")&&(v+=' state="closed"');"flat"===a&&(v+=' parent_id="'+g(q)+'"');v+=">";v+="<content>";Ta=M.children("a");Ta.each(function(){I=c(this);Ga=!1;v+="<name";-1!==c.inArray("languages",x.plugins)&&c.each(x.languages,function(a,c){if(I.hasClass(c))return v+=' lang="'+g(c)+'"',Ga=c,!1});n.length&&c.each(n,function(a,c){var f=I.attr(c);x.xml_data.get_skip_empty&&"undefined"===typeof f||(v+=" "+c+'="'+g((" "+f||"").replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig,
" ").replace(/^ /,"").replace(/ $/,""))+'"')});I.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(v+=' icon="'+g(I.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"');I.children("ins").get(0).style.backgroundImage.length&&(v+=' icon="'+g(I.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/ig,"").replace(/"/ig,""))+'"');v+=">";v+="<![CDATA["+
u.get_text(I,Ga)+"]]\x3e";v+="</name>"});v+="</content>";O=M[0].id||!0;M=M.find("> ul > li");O=M.length?u.get_xml(a,M,d,n,O):"";"nest"==a&&(v+=O);v+="</item>";"flat"==a&&(v+=O)});q||(v+="</root>");return v}}})})(jQuery);(function(c){8<=c().jquery.split(".")[1]?(c.expr[":"].jstree_contains=c.expr.createPseudo(function(a){return function(c){return 0<=(c.textContent||c.innerText||"").toLowerCase().indexOf(a.toLowerCase())}}),c.expr[":"].jstree_title_contains=c.expr.createPseudo(function(a){return function(c){return 0<=
(c.getAttribute("title")||"").toLowerCase().indexOf(a.toLowerCase())}})):(c.expr[":"].jstree_contains=function(a,c,d){return 0<=(a.textContent||a.innerText||"").toLowerCase().indexOf(d[3].toLowerCase())},c.expr[":"].jstree_title_contains=function(a,c,d){return 0<=(a.getAttribute("title")||"").toLowerCase().indexOf(d[3].toLowerCase())});c.jstree.plugin("search",{__init:function(){this.data.search.str="";this.data.search.result=c();this._get_settings().search.show_only_matches&&this.get_container().bind("search.jstree",
function(a,g){c(this).children("ul").find("li").hide().removeClass("jstree-last");g.rslt.nodes.parentsUntil(".jstree").addBack().show().filter("ul").each(function(){c(this).children("li:visible").eq(-1).addClass("jstree-last")})}).bind("clear_search.jstree",function(){c(this).children("ul").find("li").css("display","").end().end().jstree("clean_node",-1)})},defaults:{ajax:!1,search_method:"jstree_contains",show_only_matches:!1},_fn:{search:function(a,g){if(""===c.trim(a))this.clear_search();else{var d=
this.get_settings().search,f=this,p=function(){};this.data.search.str=a;if(!g&&!1!==d.ajax&&0<this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length){this.search.supress_callback=!0;p=function(a,c,f){var g=this.get_settings().search.ajax.success;g&&(a=g.call(this,a,c,f)||a);this.data.search.to_open=a;this._search_open()};d.ajax.context=this;d.ajax.error=function(){};d.ajax.success=p;c.isFunction(d.ajax.url)&&(d.ajax.url=d.ajax.url.call(this,a));c.isFunction(d.ajax.data)&&(d.ajax.data=
d.ajax.data.call(this,a));d.ajax.data||(d.ajax.data={search_string:a});if(!d.ajax.dataType||/^json/.exec(d.ajax.dataType))d.ajax.dataType="json";c.ajax(d.ajax)}else this.data.search.result.length&&this.clear_search(),this.data.search.result=this.get_container().find("a"+(this.data.languages?"."+this.get_lang():"")+":"+d.search_method+"("+this.data.search.str+")"),this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function(){f.open_node(this,!1,!0)}),this.__callback({nodes:this.data.search.result,
str:a})}},clear_search:function(a){this.data.search.result.removeClass("jstree-search");this.__callback(this.data.search.result);this.data.search.result=c()},_search_open:function(a){var g=this;a=!0;var d=[],f=[];this.data.search.to_open.length&&(c.each(this.data.search.to_open,function(a,g){if("#"==g)return!0;c(g).length&&c(g).is(".jstree-closed")?d.push(g):f.push(g)}),d.length&&(this.data.search.to_open=f,c.each(d,function(a,c){g.open_node(c,function(){g._search_open(!0)})}),a=!1));a&&this.search(this.data.search.str,
!0)}}})})(jQuery);(function(c){c.vakata.context={hide_on_mouseleave:!1,cnt:c("<div id='vakata-contextmenu' />"),vis:!1,tgt:!1,par:!1,func:!1,data:!1,rtl:!1,show:function(a,g,d,f,p,n,q){c.vakata.context.rtl=!!q;if(a=c.vakata.context.parse(a)){c.vakata.context.vis=!0;c.vakata.context.tgt=g;c.vakata.context.par=n||g||null;c.vakata.context.data=p||null;c.vakata.context.cnt.html(a).css({visibility:"hidden",display:"block",left:0,top:0});if(c.vakata.context.hide_on_mouseleave)c.vakata.context.cnt.one("mouseleave",
function(a){c.vakata.context.hide()});p=c.vakata.context.cnt.height();n=c.vakata.context.cnt.width();d+n>c(document).width()&&(d=c(document).width()-(n+5),c.vakata.context.cnt.find("li > ul").addClass("right"));f+p>c(document).height()&&(f-=p+g[0].offsetHeight,c.vakata.context.cnt.find("li > ul").addClass("bottom"));c.vakata.context.cnt.css({left:d,top:f}).find("li:has(ul)").bind("mouseenter",function(a){a=c(document).width();var f=c(document).height(),g=c(this).children("ul").show();a!==c(document).width()&&
g.toggleClass("right");f!==c(document).height()&&g.toggleClass("bottom")}).bind("mouseleave",function(a){c(this).children("ul").hide()}).end().css({visibility:"visible"}).show();c(document).triggerHandler("context_show.vakata")}},hide:function(){c.vakata.context.vis=!1;c.vakata.context.cnt.attr("class","").css({visibility:"hidden"});c(document).triggerHandler("context_hide.vakata")},parse:function(a,g){if(!a)return!1;var d="",f=!1,p=!0;g||(c.vakata.context.func={});d+="<ul>";c.each(a,function(a,g){if(!g)return!0;
c.vakata.context.func[a]=g.action;!p&&g.separator_before&&(d+="<li class='vakata-separator vakata-separator-before'></li>");p=!1;d+="<li class='"+(g._class||"")+(g._disabled?" jstree-contextmenu-disabled ":"")+"'><ins ";g.icon&&-1===g.icon.indexOf("/")&&(d+=" class='"+g.icon+"' ");g.icon&&-1!==g.icon.indexOf("/")&&(d+=" style='background:url("+g.icon+") center center no-repeat;' ");d+=">&#160;</ins><a href='#' rel='"+a+"'>";g.submenu&&(d+="<span style='float:"+(c.vakata.context.rtl?"left":"right")+
";'>&raquo;</span>");d+=g.label+"</a>";g.submenu&&(f=c.vakata.context.parse(g.submenu,!0))&&(d+=f);d+="</li>";g.separator_after&&(d+="<li class='vakata-separator vakata-separator-after'></li>",p=!0)});d=d.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,"");d+="</ul>";c(document).triggerHandler("context_parse.vakata");return 10<d.length?d:!1},exec:function(a){return c.isFunction(c.vakata.context.func[a])?(c.vakata.context.func[a].call(c.vakata.context.data,c.vakata.context.par),
!0):!1}};c(function(){c.vakata.css.add_sheet({str:"#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; *width:180px; } #vakata-contextmenu ul { min-width:180px; *width:180px; } #vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } #vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } #vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } #vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } #vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover > a { background:gray; color:white; } #vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } #vakata-contextmenu .right { right:100%; left:auto; } #vakata-contextmenu .bottom { bottom:-1px; top:auto; } #vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ",
title:"vakata"});c.vakata.context.cnt.delegate("a","click",function(a){a.preventDefault()}).delegate("a","mouseup",function(a){!c(this).parent().hasClass("jstree-contextmenu-disabled")&&c.vakata.context.exec(c(this).attr("rel"))?c.vakata.context.hide():c(this).blur()}).delegate("a","mouseover",function(){c.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body");c(document).bind("mousedown",function(a){c.vakata.context.vis&&!c.contains(c.vakata.context.cnt[0],a.target)&&
c.vakata.context.hide()});"undefined"!==typeof c.hotkeys&&c(document).bind("keydown","up",function(a){if(c.vakata.context.vis){var g=c.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();g.length||(g=c.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last());g.addClass("vakata-hover");a.stopImmediatePropagation();a.preventDefault()}}).bind("keydown","down",function(a){if(c.vakata.context.vis){var g=
c.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();g.length||(g=c.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first());g.addClass("vakata-hover");a.stopImmediatePropagation();a.preventDefault()}}).bind("keydown","right",function(a){c.vakata.context.vis&&(c.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover"),
a.stopImmediatePropagation(),a.preventDefault())}).bind("keydown","left",function(a){c.vakata.context.vis&&(c.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover"),a.stopImmediatePropagation(),a.preventDefault())}).bind("keydown","esc",function(a){c.vakata.context.hide();a.preventDefault()}).bind("keydown","space",function(a){c.vakata.context.cnt.find(".vakata-hover").last().children("a").click();a.preventDefault()})});c.jstree.plugin("contextmenu",
{__init:function(){this.get_container().delegate("a","contextmenu.jstree",c.proxy(function(a){a.preventDefault();c(a.currentTarget).hasClass("jstree-loading")||this.show_contextmenu(a.currentTarget,a.pageX,a.pageY)},this)).delegate("a","click.jstree",c.proxy(function(a){this.data.contextmenu&&c.vakata.context.hide()},this)).bind("destroy.jstree",c.proxy(function(){this.data.contextmenu&&c.vakata.context.hide()},this));c(document).bind("context_hide.vakata",c.proxy(function(){this.data.contextmenu=
!1},this))},defaults:{select_node:!1,show_at_node:!0,items:{create:{separator_before:!1,separator_after:!0,label:"Create",action:function(a){this.create(a)}},rename:{separator_before:!1,separator_after:!1,label:"Rename",action:function(a){this.rename(a)}},remove:{separator_before:!1,icon:!1,separator_after:!1,label:"Delete",action:function(a){this.is_selected(a)?this.remove():this.remove(a)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,
separator_after:!1,label:"Cut",action:function(a){this.cut(a)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(a){this.copy(a)}},paste:{separator_before:!1,icon:!1,separator_after:!1,label:"Paste",action:function(a){this.paste(a)}}}}}},_fn:{show_contextmenu:function(a,g,d){a=this._get_node(a);var f=this.get_settings().contextmenu,p=a.children("a:visible:eq(0)"),n=!1,n=!1;f.select_node&&(this.data.ui&&!this.is_selected(a))&&(this.deselect_all(),this.select_node(a,
!0));if(f.show_at_node||"undefined"===typeof g||"undefined"===typeof d)n=p.offset(),g=n.left,d=n.top+this.data.core.li_height;n=a.data("jstree")&&a.data("jstree").contextmenu?a.data("jstree").contextmenu:f.items;c.isFunction(n)&&(n=n.call(this,a));this.data.contextmenu=!0;c.vakata.context.show(n,p,g,d,this,a,this._get_settings().core.rtl);this.data.themes&&c.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}})})(jQuery);(function(c){c.jstree.plugin("types",{__init:function(){var a=
this._get_settings().types;this.data.types.attach_to=[];this.get_container().bind("init.jstree",c.proxy(function(){var g=a.type_attr,d="",f=this;c.each(a.types,function(a,n){c.each(n,function(a,c){/^(max_depth|max_children|icon|valid_children)$/.test(a)||f.data.types.attach_to.push(a)});if(!n.icon)return!0;if(n.icon.image||n.icon.position)d="default"==a?d+(".jstree-"+f.get_index()+" a > .jstree-icon { "):d+(".jstree-"+f.get_index()+" li["+g+'="'+a+'"] > a > .jstree-icon { '),n.icon.image&&(d+=" background-image:url("+
n.icon.image+"); "),d=n.icon.position?d+(" background-position:"+n.icon.position+"; "):d+" background-position:0 0; ",d+="} "});""!==d&&c.vakata.css.add_sheet({str:d,title:"jstree-types"})},this)).bind("before.jstree",c.proxy(function(a,d){var f,p;if((f=(f=this._get_settings().types.use_data?this._get_node(d.args[0]):!1)&&-1!==f&&f.length?f.data("jstree"):!1)&&f.types&&!1===f.types[d.func]||-1!==c.inArray(d.func,this.data.types.attach_to)&&(d.args[0]&&(d.args[0].tagName||d.args[0].jquery))&&(f=this._get_settings().types.types,
p=this._get_type(d.args[0]),(f[p]&&"undefined"!==typeof f[p][d.func]||f["default"]&&"undefined"!==typeof f["default"][d.func])&&!1===this._check(d.func,d.args[0])))return a.stopImmediatePropagation(),!1},this));d&&this.get_container().bind("load_node.jstree set_type.jstree",c.proxy(function(a,d){var f=d&&d.rslt&&d.rslt.obj&&-1!==d.rslt.obj?this._get_node(d.rslt.obj).parent():this.get_container_ul(),p=!1,n=this._get_settings().types;c.each(n.types,function(a,c){c.icon&&(c.icon.image||c.icon.position)&&
(p="default"===a?f.find("li > a > .jstree-icon"):f.find("li["+n.type_attr+"='"+a+"'] > a > .jstree-icon"),c.icon.image&&p.css("backgroundImage","url("+c.icon.image+")"),p.css("backgroundPosition",c.icon.position||"0 0"))})},this))},defaults:{max_children:-1,max_depth:-1,valid_children:"all",use_data:!1,type_attr:"rel",types:{"default":{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_types_notify:function(a,c){c.type&&this._get_settings().types.use_data&&this.set_type(c.type,a)},_get_type:function(a){return(a=
this._get_node(a))&&a.length?a.attr(this._get_settings().types.type_attr)||"default":!1},set_type:function(a,c){c=this._get_node(c);var d=c.length&&a?c.attr(this._get_settings().types.type_attr,a):!1;d&&this.__callback({obj:c,type:a});return d},_check:function(a,g,d){g=this._get_node(g);var f=!1,p=this._get_type(g),n=0,q=this,v=this._get_settings().types,x=!1;if(-1===g)if(v[a])f=v[a];else return;else{if(!1===p)return;(x=v.use_data?g.data("jstree"):!1)&&x.types&&"undefined"!==typeof x.types[a]?f=x.types[a]:
v.types[p]&&"undefined"!==typeof v.types[p][a]?f=v.types[p][a]:v.types["default"]&&"undefined"!==typeof v.types["default"][a]&&(f=v.types["default"][a])}c.isFunction(f)&&(f=f.call(this,g));"max_depth"===a&&(-1!==g&&!1!==d&&-2!==v.max_depth&&0!==f)&&g.children("a:eq(0)").parentsUntil(".jstree","li").each(function(c){if(-1!==v.max_depth&&0>=v.max_depth-(c+1))return f=0,!1;n=0===c?f:q._check(a,this,!1);if(-1!==n&&0>=n-(c+1))return f=0,!1;0<=n&&(n-(c+1)<f||0>f)&&(f=n-(c+1));0<=v.max_depth&&(v.max_depth-
(c+1)<f||0>f)&&(f=v.max_depth-(c+1))});return f},check_move:function(){if(!this.__call_old())return!1;var a=this._get_move(),g=a.rt._get_settings().types,d=a.rt._check("max_children",a.cr),f=a.rt._check("max_depth",a.cr),p=a.rt._check("valid_children",a.cr),n=0,q=1;if("none"===p||c.isArray(p)&&(a.ot&&a.ot._get_type)&&(a.o.each(function(){if(-1===c.inArray(a.ot._get_type(this),p))return q=!1}),!1===q)||-2!==g.max_children&&-1!==d&&(n=-1===a.cr?this.get_container().find("> ul > li").not(a.o).length:
a.cr.find("> ul > li").not(a.o).length,n+a.o.length>d))return!1;if(-2!==g.max_depth&&-1!==f){q=0;if(0===f)return!1;if("undefined"===typeof a.o.d){for(g=a.o;0<g.length;)g=g.find("> ul > li"),q++;a.o.d=q}if(0>f-a.o.d)return!1}return!0},create_node:function(a,g,d,f,p,n){if(!n&&(p||this._is_loaded(a))){var q="string"==typeof g&&g.match(/^before|after$/i)&&-1!==a?this._get_parent(a):this._get_node(a),v=this._get_settings().types,x=this._check("max_children",q),u=this._check("max_depth",q),I=this._check("valid_children",
q);"string"===typeof d&&(d={data:d});d||(d={});if("none"===I)return!1;if(c.isArray(I))if(!d.attr||!d.attr[v.type_attr])d.attr||(d.attr={}),d.attr[v.type_attr]=I[0];else if(-1===c.inArray(d.attr[v.type_attr],I))return!1;if(-2!==v.max_children&&-1!==x&&(q=-1===q?this.get_container().find("> ul > li").length:q.find("> ul > li").length,q+1>x)||-2!==v.max_depth&&-1!==u&&0>u-1)return!1}return this.__call_old(!0,a,g,d,f,p,n)}}})})(jQuery);(function(c){c.jstree.plugin("html_data",{__init:function(){this.data.html_data.original_container_html=
this.get_container().find(" > ul > li").clone(!0);this.data.html_data.original_container_html.find("li").addBack().contents().filter(function(){return 3==this.nodeType}).remove()},defaults:{data:!1,ajax:!1,correct_state:!0},_fn:{load_node:function(a,c,d){var f=this;this.load_node_html(a,function(){f.__callback({obj:f._get_node(a)});c.call(this)},d)},_is_loaded:function(a){a=this._get_node(a);return-1==a||!a||!this._get_settings().html_data.ajax&&!c.isFunction(this._get_settings().html_data.data)||
a.is(".jstree-open, .jstree-leaf")||0<a.children("ul").children("li").size()},load_node_html:function(a,d,l){var f,p=this.get_settings().html_data,n=function(){};f=function(){};if((a=this._get_node(a))&&-1!==a){if(a.data("jstree_is_loading"))return;a.data("jstree_is_loading",!0)}switch(!0){case c.isFunction(p.data):p.data.call(this,a,c.proxy(function(f){f&&""!==f&&f.toString&&""!==f.toString().replace(/^[\s\n]+$/,"")?(f=c(f),f.is("ul")||(f=c("<ul />").append(f)),-1!=a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),
a.append(f).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(f.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),
this.clean_node(a),d&&d.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),p.correct_state&&(this.correct_state(a),d&&d.call(this))):p.correct_state&&(this.get_container().children("ul").empty(),d&&d.call(this))},this));break;case !p.data&&!p.ajax:a&&-1!=a||(this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||
"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node());d&&d.call(this);break;case !!p.data&&!p.ajax||!!p.data&&!!p.ajax&&(!a||-1===a):a&&-1!=a||(f=c(p.data),f.is("ul")||(f=c("<ul />").append(f)),this.get_container().children("ul").empty().append(f.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),
this.clean_node());d&&d.call(this);break;case !p.data&&!!p.ajax||!!p.data&&!!p.ajax&&a&&-1!==a:a=this._get_node(a),n=function(c,f,d){var g=this.get_settings().html_data.ajax.error;g&&g.call(this,c,f,d);-1!=a&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),"success"===f&&p.correct_state&&this.correct_state(a)):"success"===f&&p.correct_state&&this.get_container().children("ul").empty();l&&l.call(this)},f=function(f,l,q){var u=this.get_settings().html_data.ajax.success;
u&&(f=u.call(this,f,l,q)||f);if(""===f||f&&f.toString&&""===f.toString().replace(/^[\s\n]+$/,""))return n.call(this,q,l,"");f?(f=c(f),f.is("ul")||(f=c("<ul />").append(f)),-1!=a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(f).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),
a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(f.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(a),d&&d.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),p.correct_state&&
(this.correct_state(a),d&&d.call(this))):p.correct_state&&(this.get_container().children("ul").empty(),d&&d.call(this))},p.ajax.context=this,p.ajax.error=n,p.ajax.success=f,p.ajax.dataType||(p.ajax.dataType="html"),c.isFunction(p.ajax.url)&&(p.ajax.url=p.ajax.url.call(this,a)),c.isFunction(p.ajax.data)&&(p.ajax.data=p.ajax.data.call(this,a)),c.ajax(p.ajax)}}}});c.jstree.defaults.plugins.push("html_data")})(jQuery);(function(c){c.jstree.plugin("themeroller",{__init:function(){var a=this._get_settings().themeroller;
this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a","mouseenter.jstree",function(d){c(d.currentTarget).hasClass("jstree-loading")||c(this).addClass(a.item_h)}).delegate("a","mouseleave.jstree",function(){c(this).removeClass(a.item_h)}).bind("init.jstree",c.proxy(function(a,c){c.inst.get_container().find("> ul > li > .jstree-loading > ins").addClass("ui-icon-refresh");this._themeroller(c.inst.get_container().find("> ul > li"))},this)).bind("open_node.jstree create_node.jstree",
c.proxy(function(a,c){this._themeroller(c.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",c.proxy(function(a){this._themeroller()},this)).bind("close_node.jstree",c.proxy(function(a,c){this._themeroller(c.rslt.obj)},this)).bind("delete_node.jstree",c.proxy(function(a,c){this._themeroller(c.rslt.parent)},this)).bind("correct_state.jstree",c.proxy(function(c,d){d.rslt.obj.children("ins.jstree-icon").removeClass(a.opened+" "+a.closed+" ui-icon").end().find("> a > ins.ui-icon").filter(function(){return-1===
this.className.toString().replace(a.item_clsd,"").replace(a.item_open,"").replace(a.item_leaf,"").indexOf("ui-icon-")}).removeClass(a.item_open+" "+a.item_clsd).addClass(a.item_leaf||"jstree-no-icon")},this)).bind("select_node.jstree",c.proxy(function(c,d){d.rslt.obj.children("a").addClass(a.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",c.proxy(function(c,d){this.get_container().find("a."+a.item_a).removeClass(a.item_a).end().find("a.jstree-clicked").addClass(a.item_a)},this)).bind("dehover_node.jstree",
c.proxy(function(c,d){d.rslt.obj.children("a").removeClass(a.item_h)},this)).bind("hover_node.jstree",c.proxy(function(c,d){this.get_container().find("a."+a.item_h).not(d.rslt.obj).removeClass(a.item_h);d.rslt.obj.children("a").addClass(a.item_h)},this)).bind("move_node.jstree",c.proxy(function(a,c){this._themeroller(c.rslt.o);this._themeroller(c.rslt.op)},this))},__destroy:function(){var a=this._get_settings().themeroller,d=["ui-icon"];c.each(a,function(a,c){c=c.split(" ");c.length&&(d=d.concat(c))});
this.get_container().removeClass("ui-widget-content").find("."+d.join(", .")).removeClass(d.join(" "))},_fn:{_themeroller:function(a){var c=this._get_settings().themeroller;a=(a=a&&-1!=a?this._get_node(a):this.get_container_ul())&&-1!=a?a.parent():this.get_container_ul();a.find("li.jstree-closed").children("ins.jstree-icon").removeClass(c.opened).addClass("ui-icon "+c.closed).end().children("a").addClass(c.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(c.item_clsd,
"").replace(c.item_open,"").replace(c.item_leaf,"").indexOf("ui-icon-")}).removeClass(c.item_leaf+" "+c.item_open).addClass(c.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(c.closed).addClass("ui-icon "+c.opened).end().children("a").addClass(c.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(c.item_clsd,"").replace(c.item_open,"").replace(c.item_leaf,"").indexOf("ui-icon-")}).removeClass(c.item_leaf+
" "+c.item_clsd).addClass(c.item_open||"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(c.closed+" ui-icon "+c.opened).end().children("a").addClass(c.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(c.item_clsd,"").replace(c.item_open,"").replace(c.item_leaf,"").indexOf("ui-icon-")}).removeClass(c.item_clsd+" "+c.item_open).addClass(c.item_leaf||"jstree-no-icon")}},defaults:{opened:"ui-icon-triangle-1-se",
closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_open:"ui-icon-folder-open",item_clsd:"ui-icon-folder-collapsed",item_leaf:"ui-icon-document"}});c(function(){c.vakata.css.add_sheet({str:".jstree-themeroller .ui-icon { overflow:visible; } .jstree-themeroller a { padding:0 2px; } .jstree-themeroller .jstree-no-icon { display:none; }",title:"jstree"})})})(jQuery);(function(c){c.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",
c.proxy(function(a,d){var l=[],f=!0,p;"move_node"==d.func&&(!0===d.args[4]&&d.args[0].o&&d.args[0].o.length)&&(d.args[0].o.children("a").each(function(){l.push(c(this).text().replace(/^\s+/g,""))}),f=this._check_unique(l,d.args[0].np.find("> ul > li").not(d.args[0].o),"move_node"));"create_node"==d.func&&(d.args[4]||this._is_loaded(d.args[0]))&&(f=this._get_node(d.args[0]),!d.args[1]||"before"!==d.args[1]&&"after"!==d.args[1]||(f=this._get_parent(d.args[0]))&&-1!==f||(f=this.get_container()),"string"===
typeof d.args[2]?l.push(d.args[2]):d.args[2]&&d.args[2].data?l.push(d.args[2].data):l.push(this._get_string("new_node")),f=this._check_unique(l,f.find("> ul > li"),"create_node"));"rename_node"==d.func&&(l.push(d.args[1]),p=this._get_node(d.args[0]),(f=this._get_parent(p))&&-1!==f||(f=this.get_container()),f=this._check_unique(l,f.find("> ul > li").not(p),"rename_node"));if(!f)return a.stopPropagation(),!1},this))},defaults:{error_callback:c.noop},_fn:{_check_unique:function(a,d,l){var f=[],p=!0;
d.children("a").each(function(){f.push(c(this).text().replace(/^\s+/g,""))});if(!f.length||!a.length)return!0;c.each(a,function(a,d){if(-1!==c.inArray(d,f))return p=!1});p||this._get_settings().unique.error_callback.call(null,a,d,l);return p},check_move:function(){if(!this.__call_old())return!1;var a=this._get_move(),d=[];return a.o&&a.o.length?(a.o.children("a").each(function(){d.push(c(this).text().replace(/^\s+/g,""))}),this._check_unique(d,a.np.find("> ul > li").not(a.o),"check_move")):!0}}})})(jQuery);
(function(c){c.jstree.plugin("wholerow",{__init:function(){if(!this.data.ui)throw"jsTree wholerow: jsTree UI plugin not included.";this.data.wholerow.html=!1;this.data.wholerow.to=!1;this.get_container().bind("init.jstree",c.proxy(function(a,c){this._get_settings().core.animation=0},this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",c.proxy(function(a,c){this._prepare_wholerow_span(c&&c.rslt&&c.rslt.obj?c.rslt.obj:-1)},this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",
c.proxy(function(a,c){this.data.to&&clearTimeout(this.data.to);this.data.to=setTimeout(function(a,c){return function(){a._prepare_wholerow_ul(c)}}(this,c&&c.rslt&&c.rslt.obj?c.rslt.obj:-1),0)},this)).bind("deselect_all.jstree",c.proxy(function(a,c){this.get_container().find(" > .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+(this.data.themeroller?this._get_settings().themeroller.item_a:""))},this)).bind("select_node.jstree deselect_node.jstree ",c.proxy(function(a,d){d.rslt.obj.each(function(){d.inst.get_container().find(" > .jstree-wholerow li:visible:eq("+
parseInt((c(this).offset().top-d.inst.get_container().offset().top+d.inst.get_container()[0].scrollTop)/d.inst.data.core.li_height,10)+")").children("a").attr("class",d.rslt.obj.children("a").attr("class"))})},this)).bind("hover_node.jstree dehover_node.jstree",c.proxy(function(a,c){this.get_container().find(" > .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+(this.data.themeroller?this._get_settings().themeroller.item_h:""));"hover_node"===a.type&&this.get_container().find(" > .jstree-wholerow li:visible:eq("+
parseInt((c.rslt.obj.offset().top-this.get_container().offset().top+this.get_container()[0].scrollTop)/this.data.core.li_height,10)+")").children("a").attr("class",c.rslt.obj.children(".jstree-hovered").attr("class"))},this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li","click.jstree",function(a){var d=c(a.currentTarget);"A"===a.target.tagName||"INS"===a.target.tagName&&d.closest("li").is(".jstree-open, .jstree-closed")||(d.closest("li").children("a:visible:eq(0)").click(),a.stopImmediatePropagation())}).delegate("li",
"mouseover.jstree",c.proxy(function(a){a.stopImmediatePropagation();if(c(a.currentTarget).children(".jstree-hovered, .jstree-clicked").length)return!1;this.hover_node(a.currentTarget);return!1},this)).delegate("li","mouseleave.jstree",c.proxy(function(a){c(a.currentTarget).children("a").hasClass("jstree-hovered").length||this.dehover_node(a.currentTarget)},this));(n||d)&&c.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove();
this.get_container().find(".jstree-wholerow-span").remove()},_fn:{_prepare_wholerow_span:function(a){a=a&&-1!=a?this._get_node(a):this.get_container().find("> ul > li");!1!==a&&a.each(function(){c(this).find("li").addBack().each(function(){var a=c(this);if(a.children(".jstree-wholerow-span").length)return!0;a.prepend("<span class='jstree-wholerow-span' style='width:"+18*a.parentsUntil(".jstree","li").length+"px;'>&#160;</span>")})})},_prepare_wholerow_ul:function(){var a=this.get_container().children("ul").eq(0),
c=a.html();a.addClass("jstree-wholerow-real");this.data.wholerow.last_html!==c&&(this.data.wholerow.last_html=c,this.get_container().children(".jstree-wholerow").remove(),this.get_container().append(a.clone().removeClass("jstree-wholerow-real").wrapAll("<div class='jstree-wholerow' />").parent().width(a.parent()[0].scrollWidth).css("top",-1*(a.height()+(n?5:0))).find("li[id]").each(function(){this.removeAttribute("id")}).end()))}}});c(function(){var a=".jstree .jstree-wholerow-real { position:relative; z-index:1; } .jstree .jstree-wholerow-real li { cursor:pointer; } .jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } .jstree .jstree-wholerow { position:relative; z-index:0; height:0; } .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }.jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }.jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px; !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } .jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";
q&&(a+=".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } .jstree .jstree-wholerow-real a { border-color:transparent !important; } ");if(n||d)a+=".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } .jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } ";c.vakata.css.add_sheet({str:a,title:"jstree"})})})(jQuery);(function(c){var a=
["getChildren","getChildrenCount","getAttr","getName","getProps"],d=function(a,d){var g=!0;a=a||{};d=[].concat(d);c.each(d,function(d,f){if(!c.isFunction(a[f]))return g=!1});return g};c.jstree.plugin("model",{__init:function(){if(!this.data.json_data)throw"jsTree model: jsTree json_data plugin not included.";this._get_settings().json_data.data=function(l,f){var p=-1==l?this._get_settings().model.object:l.data("jstree_model");if(!d(p,a))return f.call(null,!1);this._get_settings().model.async?p.getChildren(c.proxy(function(a){this.model_done(a,
f)},this)):this.model_done(p.getChildren(),f)}},defaults:{object:!1,id_prefix:!1,async:!1},_fn:{model_done:function(a,d){var g=[],n=this._get_settings(),q=this;c.isArray(a)||(a=[a]);c.each(a,function(a,d){var f=d.getProps()||{};f.attr=d.getAttr()||{};d.getChildrenCount()&&(f.state="closed");f.data=d.getName();c.isArray(f.data)||(f.data=[f.data]);q.data.types&&c.isFunction(d.getType)&&(f.attr[n.types.type_attr]=d.getType());f.attr.id&&n.model.id_prefix&&(f.attr.id=n.model.id_prefix+f.attr.id);f.metadata||
(f.metadata={});f.metadata.jstree_model=d;g.push(f)});d.call(null,g)}}})})(jQuery)}})();
(function(d){d.color={};d.color.make=function(n,c,a,g){var l={};l.r=n||0;l.g=c||0;l.b=a||0;l.a=null!=g?g:1;l.add=function(a,c){for(var d=0;d<a.length;++d)l[a.charAt(d)]+=c;return l.normalize()};l.scale=function(a,c){for(var d=0;d<a.length;++d)l[a.charAt(d)]*=c;return l.normalize()};l.toString=function(){return 1<=l.a?"rgb("+[l.r,l.g,l.b].join()+")":"rgba("+[l.r,l.g,l.b,l.a].join()+")"};l.normalize=function(){function a(c,d,f){return d<c?c:d>f?f:d}l.r=a(0,parseInt(l.r),255);l.g=a(0,parseInt(l.g),255);
l.b=a(0,parseInt(l.b),255);l.a=a(0,l.a,1);return l};l.clone=function(){return d.color.make(l.r,l.b,l.g,l.a)};return l.normalize()};d.color.extract=function(n,c){var a;do{a=n.css(c).toLowerCase();if(""!=a&&"transparent"!=a)break;n=n.parent()}while(!d.nodeName(n.get(0),"body"));"rgba(0, 0, 0, 0)"==a&&(a="transparent");return d.color.parse(a)};d.color.parse=function(q){var c,a=d.color.make;if(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(q))return a(parseInt(c[1],10),parseInt(c[2],
10),parseInt(c[3],10));if(c=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(q))return a(parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10),parseFloat(c[4]));if(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(q))return a(2.55*parseFloat(c[1]),2.55*parseFloat(c[2]),2.55*parseFloat(c[3]));if(c=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(q))return a(2.55*
parseFloat(c[1]),2.55*parseFloat(c[2]),2.55*parseFloat(c[3]),parseFloat(c[4]));if(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(q))return a(parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16));if(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(q))return a(parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16));q=d.trim(q).toLowerCase();if("transparent"==q)return a(255,255,255,0);c=n[q]||[0,0,0];return a(c[0],c[1],c[2])};var n={aqua:[0,255,255],azure:[240,255,255],beige:[245,
245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,
144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);
(function(d,n,q){var c=n.event,a;c.special.smartresize={setup:function(){n(this).bind("resize",c.special.smartresize.handler)},teardown:function(){n(this).unbind("resize",c.special.smartresize.handler)},handler:function(c,d){var g=this,l=arguments;c.type="smartresize";a&&clearTimeout(a);a=setTimeout(function(){jQuery.event.handle.apply(g,l)},"execAsap"===d?0:100)}};n.fn.smartresize=function(a){return a?this.bind("smartresize",a):this.trigger("smartresize",["execAsap"])};n.Mason=function(a,c){this.element=
n(c);this._create(a);this._init()};var g=["position","height"];n.Mason.settings={isResizable:!0,isAnimated:!1,animationOptions:{queue:!1,duration:500},gutterWidth:0,isRTL:!1,isFitWidth:!1};n.Mason.prototype={_filterFindBricks:function(a){var c=this.options.itemSelector;return c?a.filter(c).add(a.find(c)):a},_getBricks:function(a){return this._filterFindBricks(a).css({position:"absolute"}).addClass("masonry-brick")},_create:function(a){this.options=n.extend(!0,{},n.Mason.settings,a);this.styleQueue=
[];this.reloadItems();a=this.element[0].style;this.originalStyle={};for(var c=0,l=g.length;c<l;c++){var q=g[c];this.originalStyle[q]=a[q]||""}this.element.css({position:"relative"});this.horizontalDirection=this.options.isRTL?"right":"left";this.offset={};a=n(document.createElement("div"));this.element.prepend(a);this.offset.y=Math.round(a.position().top);this.options.isRTL?(a.css({"float":"right",display:"inline-block"}),this.offset.x=Math.round(this.element.outerWidth()-a.position().left)):this.offset.x=
Math.round(a.position().left);a.remove();var v=this;setTimeout(function(){v.element.addClass("masonry")},0);this.options.isResizable&&n(d).bind("smartresize.masonry",function(){v.resize()})},_init:function(a){this._getColumns("masonry");this._reLayout(a)},option:function(a,c){n.isPlainObject(a)&&(this.options=n.extend(!0,this.options,a))},layout:function(a,c){for(var d,g,l,q,u,I,O=0,M=a.length;O<M;O++)if(d=n(a[O]),g=Math.ceil(d.outerWidth(!0)/this.columnWidth),g=Math.min(g,this.cols),1===g)this._placeBrick(d,
this.colYs);else{l=this.cols+1-g;q=[];for(I=0;I<l;I++)u=this.colYs.slice(I,I+g),q[I]=Math.max.apply(Math,u);this._placeBrick(d,q)}M={};M.height=Math.max.apply(Math,this.colYs)-this.offset.y;if(this.options.isFitWidth){d=0;for(O=this.cols;--O&&this.colYs[O]===this.offset.y;)d++;M.width=(this.cols-d)*this.columnWidth-this.options.gutterWidth}this.styleQueue.push({$el:this.element,style:M});d=this.isLaidOut?this.options.isAnimated?"animate":"css":"css";g=this.options.animationOptions;O=0;for(M=this.styleQueue.length;O<
M;O++)l=this.styleQueue[O],l.$el[d](l.style,g);this.styleQueue=[];c&&c.call(a);this.isLaidOut=!0},_getColumns:function(){var a=(this.options.isFitWidth?this.element.parent():this.element).width();this.columnWidth=this.options.columnWidth||this.$bricks.outerWidth(!0)||a;this.columnWidth+=this.options.gutterWidth;this.cols=Math.floor((a+this.options.gutterWidth)/this.columnWidth);this.cols=Math.max(this.cols,1)},_placeBrick:function(a,c){for(var d=Math.min.apply(Math,c),g=0,l=0,n=c.length;l<n;l++)if(c[l]===
d){g=l;break}l={top:d};l[this.horizontalDirection]=this.columnWidth*g+this.offset.x;this.styleQueue.push({$el:a,style:l});d+=a.outerHeight(!0);n=this.cols+1-n;for(l=0;l<n;l++)this.colYs[g+l]=d},resize:function(){var a=this.cols;this._getColumns("masonry");this.cols!==a&&this._reLayout()},_reLayout:function(a){var c=this.cols;for(this.colYs=[];c--;)this.colYs.push(this.offset.y);this.layout(this.$bricks,a)},reloadItems:function(){this.$bricks=this._getBricks(this.element.children())},reload:function(a){this.reloadItems();
this._init(a)},appended:function(a,c,d){if(c){this._filterFindBricks(a).css({top:this.element.height()});var g=this;setTimeout(function(){g._appended(a,d)},1)}else this._appended(a,d)},_appended:function(a,c){var d=this._getBricks(a);this.$bricks=this.$bricks.add(d);this.layout(d,c)},remove:function(a){this.$bricks=this.$bricks.not(a);a.remove()},destroy:function(){this.$bricks.removeClass("masonry-brick").each(function(){this.style.position="";this.style.top="";this.style.left=""});for(var a=this.element[0].style,
c=0,l=g.length;c<l;c++){var q=g[c];a[q]=this.originalStyle[q]}this.element.unbind(".masonry").removeClass("masonry").removeData("masonry");n(d).unbind(".masonry")}};n.fn.imagesLoaded=function(a){function c(){0>=--n&&this.src!==u&&(setTimeout(d),l.unbind("load error",c))}function d(){a.call(g,l)}var g=this,l=g.find("img").add(g.filter("img")),n=l.length,u="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";n||d();l.bind("load error",c).each(function(){if(this.complete||this.complete===
q){var a=this.src;this.src=u;this.src=a}});return g};var l=function(a){this.console&&console.error(a)};n.fn.masonry=function(a){if("string"==typeof a){var c=Array.prototype.slice.call(arguments,1);this.each(function(){var d=n.data(this,"masonry");d?n.isFunction(d[a])&&"_"!==a.charAt(0)?d[a].apply(d,c):l("no such method '"+a+"' for masonry instance"):l("cannot call methods on masonry prior to initialization; attempted to call method '"+a+"'")})}else this.each(function(){var c=n.data(this,"masonry");
c?(c.option(a||{}),c._init()):n.data(this,"masonry",new n.Mason(a,this))});return this}})(window,jQuery);
jQuery.cookie=function(d,n,q){if(1<arguments.length&&"[object Object]"!==String(n)){q=jQuery.extend({},q);if(null===n||void 0===n)q.expires=-1;if("number"===typeof q.expires){var c=q.expires,a=q.expires=new Date;a.setDate(a.getDate()+c)}n=String(n);return document.cookie=[encodeURIComponent(d),"=",q.raw?n:encodeURIComponent(n),q.expires?"; expires="+q.expires.toUTCString():"",q.path?"; path="+q.path:"",q.domain?"; domain="+q.domain:"",q.secure?"; secure":""].join("")}q=n||{};a=q.raw?function(a){return a}:
decodeURIComponent;return(c=RegExp("(?:^|; )"+encodeURIComponent(d)+"=([^;]*)").exec(document.cookie))?a(c[1]):null};
d3=function(){function d(e){return null!=e&&!isNaN(e)}function n(e){return e.length}function q(e,a){try{for(var h in a)Object.defineProperty(e.prototype,h,{value:a[h],enumerable:!1})}catch(c){e.prototype=a}}function c(){}function a(){}function g(e,a,h){return function(){var c=h.apply(a,arguments);return c===a?e:c}}function l(){}function f(e){function a(){for(var w,c=h,J=-1,d=c.length;++J<d;)(w=c[J].on)&&w.apply(this,arguments);return e}var h=[],J=new c;return a.on=function(a,w){var c,d=J.get(a);return 2>
arguments.length?d&&d.on:(d&&(d.on=null,h=h.slice(0,c=h.indexOf(d)).concat(h.slice(c+1)),J.remove(a)),w&&h.push(J.set(a,{on:w})),e)},a}function p(){m.event.stopPropagation();m.event.preventDefault()}function B(){for(var e,a=m.event;e=a.sourceEvent;)a=e;return a}function P(e,a){function h(){e.on(a,null)}e.on(a,function(){p();h()},!0);setTimeout(h,0)}function v(e){for(var a=new l,h=0,c=arguments.length;++h<c;)a[arguments[h]]=f(a);return a.of=function(h,c){return function(J){try{var d=J.sourceEvent=
m.event;J.target=e;m.event=J;a[J.type].apply(h,c)}finally{m.event=d}}},a}function x(e,a){var h=e.ownerSVGElement||e;if(h.createSVGPoint){var c=h.createSVGPoint();if(0>Qb&&(aa.scrollX||aa.scrollY)){var h=m.select(ea.body).append("svg").style("position","absolute").style("top",0).style("left",0),t=h[0][0].getScreenCTM();Qb=!(t.f||t.e);h.remove()}return Qb?(c.x=a.pageX,c.y=a.pageY):(c.x=a.clientX,c.y=a.clientY),c=c.matrixTransform(e.getScreenCTM().inverse()),[c.x,c.y]}h=e.getBoundingClientRect();return[a.clientX-
h.left-e.clientLeft,a.clientY-h.top-e.clientTop]}function u(e){for(var a=-1,h=e.length,c=[];++a<h;)c.push(e[a]);return c}function I(e){return Rb(e,N),e}function O(e){return function(){return ad(e,this)}}function M(e){return function(){return bd(e,this)}}function Ta(e,a){function h(){this.removeAttribute(e)}function c(){this.removeAttributeNS(e.space,e.local)}function t(){this.setAttribute(e,a)}function r(){this.setAttributeNS(e.space,e.local,a)}function d(){var h=a.apply(this,arguments);null==h?this.removeAttribute(e):
this.setAttribute(e,h)}function s(){var h=a.apply(this,arguments);null==h?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,h)}return e=m.ns.qualify(e),null==a?e.local?c:h:"function"==typeof a?e.local?s:d:e.local?r:t}function Ga(e){return e.trim().replace(/\s+/g," ")}function Zc(e){return RegExp("(?:^|\\s+)"+m.requote(e)+"(?:\\s+|$)","g")}function $c(e,a){function h(){for(var h=-1;++h<t;)e[h](this,a)}function c(){for(var h=-1,J=a.apply(this,arguments);++h<t;)e[h](this,J)}
e=e.trim().split(/\s+/).map(rf);var t=e.length;return"function"==typeof a?c:h}function rf(e){var a=Zc(e);return function(h,c){if(t=h.classList)return c?t.add(e):t.remove(e);var t=h.getAttribute("class")||"";c?(a.lastIndex=0,a.test(t)||h.setAttribute("class",Ga(t+" "+e))):h.setAttribute("class",Ga(t.replace(a," ")))}}function cd(e,a,h){function c(){this.style.removeProperty(e)}function t(){this.style.setProperty(e,a,h)}function r(){var c=a.apply(this,arguments);null==c?this.style.removeProperty(e):
this.style.setProperty(e,c,h)}return null==a?c:"function"==typeof a?r:t}function dd(e,a){function h(){delete this[e]}function c(){this[e]=a}function t(){var h=a.apply(this,arguments);null==h?delete this[e]:this[e]=h}return null==a?h:"function"==typeof a?t:c}function ed(e){return function(){return fd(this,e)}}function sf(e){return arguments.length||(e=m.ascending),function(a,h){return!a-!h||e(a.__data__,h.__data__)}}function X(){}function gd(e,a,h){function c(){var a=this[d];a&&(this.removeEventListener(e,
a,a.$),delete this[d])}function t(){var t=L(a,ua(arguments));c.call(this);this.addEventListener(e,this[d]=t,t.$=h);t._=a}function r(){var a,w=RegExp("^__on([^.]+)"+m.requote(e)+"$"),h;for(h in this)if(a=h.match(w)){var c=this[h];this.removeEventListener(a[1],c,c.$);delete this[h]}}var d="__on"+e,s=e.indexOf("."),L=hd;0<s&&(e=e.substring(0,s));var f=Sb.get(e);return f&&(e=f,L=tf),s?a?t:c:a?X:r}function hd(e,a){return function(h){var c=m.event;m.event=h;a[0]=this.__data__;try{e.apply(this,a)}finally{m.event=
c}}}function tf(e,a){var h=hd(e,a);return function(e){var a=e.relatedTarget;a&&(a===this||a.compareDocumentPosition(this)&8)||h.call(this,e)}}function wa(e,a){for(var h=0,c=e.length;c>h;h++)for(var t,r=e[h],d=0,s=r.length;s>d;d++)(t=r[d])&&a(t,d,h);return e}function id(e){return Rb(e,Ba),e}function Ia(){}function Ja(e,a,h){return new Tb(e,a,h)}function Tb(e,a,h){this.h=e;this.s=a;this.l=h}function eb(e,a,h){function c(e){return 360<e?e-=360:0>e&&(e+=360),60>e?t+(r-t)*e/60:180>e?r:240>e?t+(r-t)*(240-
e)/60:t}var t,r;return e%=360,0>e&&(e+=360),a=0>a?0:1<a?1:a,h=0>h?0:1<h?1:h,r=0.5>=h?h*(1+a):h+a-h*a,t=2*h-r,pa(Math.round(255*c(e+120)),Math.round(255*c(e)),Math.round(255*c(e-120)))}function jd(e){return(e=Math.sin(e/2))*e}function Ka(e,a,h){return new fb(e,a,h)}function fb(e,a,h){this.h=e;this.c=a;this.l=h}function Ub(e,a,h){return La(h,Math.cos(e*=G)*a,Math.sin(e)*a)}function La(e,a,h){return new gb(e,a,h)}function gb(e,a,h){this.l=e;this.a=a;this.b=h}function kd(e,a,h){e=(e+16)/116;a=e+a/500;
h=e-h/200;return a=Vb(a)*ld,e=Vb(e)*md,h=Vb(h)*nd,pa(Wb(3.2404542*a-1.5371385*e-0.4985314*h),Wb(-0.969266*a+1.8760108*e+0.041556*h),Wb(0.0556434*a-0.2040259*e+1.0572252*h))}function Vb(e){return 0.206893034<e?e*e*e:(e-4/29)/7.787037}function Xb(e){return 0.008856<e?Math.pow(e,1/3):7.787037*e+4/29}function Wb(e){return Math.round(255*(0.00304>=e?12.92*e:1.055*Math.pow(e,1/2.4)-0.055))}function pa(e,a,h){return new Yb(e,a,h)}function Yb(e,a,h){this.r=e;this.g=a;this.b=h}function Ma(e){return 16>e?"0"+
Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function Zb(e,a,h){var c,t,r,d=0,s=0,L=0;if(c=/([a-z]+)\((.*)\)/i.exec(e))switch(t=c[2].split(","),c[1]){case "hsl":return h(parseFloat(t[0]),parseFloat(t[1])/100,parseFloat(t[2])/100);case "rgb":return a($b(t[0]),$b(t[1]),$b(t[2]))}return(r=hb.get(e))?a(r.r,r.g,r.b):(null!=e&&"#"===e.charAt(0)&&(4===e.length?(d=e.charAt(1),d+=d,s=e.charAt(2),s+=s,L=e.charAt(3),L+=L):7===e.length&&(d=e.substring(1,3),s=e.substring(3,5),L=e.substring(5,7)),d=
parseInt(d,16),s=parseInt(s,16),L=parseInt(L,16)),a(d,s,L))}function od(e,a,h){var c,t,r=Math.min(e/=255,a/=255,h/=255),d=Math.max(e,a,h),s=d-r,L=(d+r)/2;return s?(t=0.5>L?s/(d+r):s/(2-d-r),c=e==d?(a-h)/s+(h>a?6:0):a==d?(h-e)/s+2:(e-a)/s+4,c*=60):t=c=0,Ja(c,t,L)}function pd(e,a,h){e=ac(e);a=ac(a);h=ac(h);var c=Xb((0.4124564*e+0.3575761*a+0.1804375*h)/ld),t=Xb((0.2126729*e+0.7151522*a+0.072175*h)/md);e=Xb((0.0193339*e+0.119192*a+0.9503041*h)/nd);return La(116*t-16,500*(c-t),200*(t-e))}function ac(e){return 0.04045>=
(e/=255)?e/12.92:Math.pow((e+0.055)/1.055,2.4)}function $b(e){var a=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*a):a}function Q(e){return"function"==typeof e?e:function(){return e}}function ga(e){return e}function uf(e){return 1===e.length?function(a,h){e(null==a?h:null)}:e}function qd(e,w){function h(e,a,h){3>arguments.length&&(h=a,a=null);var r=m.xhr(e,w,h);return r.row=function(e){return arguments.length?r.response(null==(a=e)?c:t(e)):a},r.row(a)}function c(e){return h.parse(e.responseText)}
function t(e){return function(a){return h.parse(a.responseText,e)}}function r(a){return a.map(d).join(e)}function d(e){return s.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var s=RegExp('["'+e+"\n]"),L=e.charCodeAt(0);return h.parse=function(e,a){var w;return h.parseRows(e,function(e,h){if(w)return w(e,h-1);var c=Function("d","return {"+e.map(function(e,a){return JSON.stringify(e)+": d["+a+"]"}).join(",")+"}");w=a?function(e,w){return a(c(e),w)}:c})},h.parseRows=function(e,a){function w(){if(s>=d)return t;
if(c)return c=!1,J;var a=s;if(34===e.charCodeAt(a)){for(var h=a;h++<d;)if(34===e.charCodeAt(h)){if(34!==e.charCodeAt(h+1))break;++h}s=h+2;var r=e.charCodeAt(h+1);return 13===r?(c=!0,10===e.charCodeAt(h+2)&&++s):10===r&&(c=!0),e.substring(a+1,h).replace(/""/g,'"')}for(;d>s;){r=e.charCodeAt(s++);h=1;if(10===r)c=!0;else if(13===r)c=!0,10===e.charCodeAt(s)&&(++s,++h);else if(r!==L)continue;return e.substring(a,s-h)}return e.substring(a)}for(var h,c,J={},t={},r=[],d=e.length,s=0,S=0;(h=w())!==t;){for(var f=
[];h!==J&&h!==t;)f.push(h),h=w();a&&!(f=a(f,S++))||r.push(f)}return r},h.format=function(w){if(Array.isArray(w[0]))return h.formatRows(w);var c=new a,J=[];return w.forEach(function(e){for(var a in e)c.has(a)||J.push(c.add(a))}),[J.map(d).join(e)].concat(w.map(function(a){return J.map(function(e){return d(a[e])}).join(e)})).join("\n")},h.formatRows=function(e){return e.map(r).join("\n")},h}function bc(){for(var e,a=Date.now(),h=Oa;h;)e=a-h.then,e>=h.delay&&(h.flush=h.callback(e)),h=h.next;e=rd()-a;
24<e?(isFinite(e)&&(clearTimeout(ib),ib=setTimeout(bc,e)),jb=0):(jb=1,sd(bc))}function rd(){for(var e=null,a=Oa,h=1/0;a;)a.flush?(delete cc[a.callback.id],a=e?e.next=a.next:Oa=a.next):(h=Math.min(h,a.then+a.delay),a=(e=a).next);return h}function dc(e,a){return a-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function vf(e){return e+""}function kb(e,a){e&&td.hasOwnProperty(e.type)&&td[e.type](e,a)}function ec(e,a,h){var c=-1,t=e.length-h;for(a.lineStart();++c<t;)h=e[c],a.point(h[0],h[1]);a.lineEnd()}function ud(e,
a){var h=-1,c=e.length;for(a.polygonStart();++h<c;)ec(e[h],a,1);a.polygonEnd()}function wf(){function e(e,a){e*=G;a=a*G/2+C/4;var h=e-c,w=Math.cos(a),d=Math.sin(a),f=r*d,g=lb,m=mb,l=t*w+f*Math.cos(h),h=f*Math.sin(h);lb=g*l-m*h;mb=m*l+g*h;c=e;t=w;r=d}var a,h,c,t,r;xa.point=function(d,s){xa.point=e;c=(a=d)*G;t=Math.cos(s=(h=s)*G/2+C/4);r=Math.sin(s)};xa.lineEnd=function(){e(a,h)}}function vd(e){function a(e,h){c>e&&(c=e);e>r&&(r=e);t>h&&(t=h);h>d&&(d=h)}function h(){s.point=s.lineEnd=X}var c,t,r,d,
s={point:a,lineStart:X,lineEnd:X,polygonStart:function(){s.lineEnd=h},polygonEnd:function(){s.point=a}};return function(a){return d=r=-(c=t=1/0),m.geo.stream(a,e(s)),[[c,t],[r,d]]}}function wd(e,a){if(!Z){++ia;e*=G;var h=Math.cos(a*=G);V+=(h*Math.cos(e)-V)/ia;W+=(h*Math.sin(e)-W)/ia;U+=(Math.sin(a)-U)/ia}}function xf(){var e,a;Z=1;fc();Z=2;var h=ja.point;ja.point=function(c,t){h(e=c,a=t)};ja.lineEnd=function(){ja.point(e,a);gc();ja.lineEnd=gc}}function fc(){function e(e,r){e*=G;var d=Math.cos(r*=
G),s=d*Math.cos(e),d=d*Math.sin(e),L=Math.sin(r),f=Math.atan2(Math.sqrt((f=h*L-c*d)*f+(f=c*s-a*L)*f+(f=a*d-h*s)*f),a*s+h*d+c*L);ia+=f;V+=f*(a+(a=s));W+=f*(h+(h=d));U+=f*(c+(c=L))}var a,h,c;1<Z||(1>Z&&(Z=1,ia=V=W=U=0),ja.point=function(t,r){t*=G;var d=Math.cos(r*=G);a=d*Math.cos(t);h=d*Math.sin(t);c=Math.sin(r);ja.point=e})}function gc(){ja.point=wd}function nb(e){var a=e[0];e=e[1];var h=Math.cos(e);return[h*Math.cos(a),h*Math.sin(a),Math.sin(e)]}function ob(e,a){return e[0]*a[0]+e[1]*a[1]+e[2]*a[2]}
function xd(e,a){return[e[1]*a[2]-e[2]*a[1],e[2]*a[0]-e[0]*a[2],e[0]*a[1]-e[1]*a[0]]}function hc(e,a){e[0]+=a[0];e[1]+=a[1];e[2]+=a[2]}function pb(e,a){return[e[0]*a,e[1]*a,e[2]*a]}function Ua(){return!0}function ic(e){return[Math.atan2(e[1],e[0]),Math.asin(Math.max(-1,Math.min(1,e[2])))]}function qb(e,a){return Math.abs(e[0]-a[0])<H&&Math.abs(e[1]-a[1])<H}function yd(e,a,h,c,t){var r=[],d=[];if(e.forEach(function(e){if(!(0>=(a=e.length-1))){var a,h=e[0],w=e[a];if(qb(h,w)){t.lineStart();for(w=0;a>
w;++w)t.point((h=e[w])[0],h[1]);return t.lineEnd(),void 0}e={point:h,points:e,other:null,visited:!1,entry:!0,subject:!0};h={point:h,points:[h],other:e,visited:!1,entry:!1,subject:!1};e.other=h;r.push(e);d.push(h);e={point:w,points:[w],other:null,visited:!1,entry:!1,subject:!0};h={point:w,points:[w],other:e,visited:!1,entry:!0,subject:!1};e.other=h;r.push(e);d.push(h)}}),d.sort(a),zd(r),zd(d),r.length){if(h)for(e=1,h=!h(d[0].point),a=d.length;a>e;++e)d[e].entry=h=!h;for(var s,L=r[0];;){for(h=L;h.visited;)if((h=
h.next)===L)return;a=h.points;t.lineStart();do{if(h.visited=h.other.visited=!0,h.entry){if(h.subject)for(e=0;e<a.length;e++)t.point((s=a[e])[0],s[1]);else c(h.point,h.next.point,1,t);h=h.next}else{if(h.subject)for(a=h.prev.points,e=a.length;0<=--e;)t.point((s=a[e])[0],s[1]);else c(h.point,h.prev.point,-1,t);h=h.prev}h=h.other;a=h.points}while(!h.visited);t.lineEnd()}}}function zd(e){if(a=e.length){for(var a,h,c=0,t=e[0];++c<a;)t.next=h=e[c],h.prev=t,t=h;t.next=h=e[0];h.prev=t}}function Ad(e,a,h){return function(c){function t(a,
h){e(a,h)&&c.point(a,h)}function r(e,a){z.point(e,a)}function d(){A.point=r;z.lineStart()}function s(){A.point=t;z.lineEnd()}function L(e,a){K.point(e,a);y.push([e,a])}function f(){K.lineStart();y=[]}function g(){L(y[0][0],y[0][1]);K.lineEnd();var e;e=K.clean();var a=F.buffer(),h=a.length;if(!h)return q=!0,n+=Bd(y,-1),y=null,void 0;if(y=null,1&e){e=a[0];p+=Bd(e,1);var w,h=e.length-1,a=-1;for(c.lineStart();++a<h;)c.point((w=e[a])[0],w[1]);return c.lineEnd(),void 0}1<h&&2&e&&a.push(a.pop().concat(a.shift()));
l.push(a.filter(yf))}var l,p,n,q,y,z=a(c),A={point:t,lineStart:d,lineEnd:s,polygonStart:function(){A.point=L;A.lineStart=f;A.lineEnd=g;q=!1;n=p=0;l=[];c.polygonStart()},polygonEnd:function(){A.point=t;A.lineStart=d;A.lineEnd=s;l=m.merge(l);l.length?yd(l,zf,null,h,c):(-H>p||q&&-H>n)&&(c.lineStart(),h(null,null,1,c),c.lineEnd());c.polygonEnd();l=null},sphere:function(){c.polygonStart();c.lineStart();h(null,null,1,c);c.lineEnd();c.polygonEnd()}},F=Cd(),K=a(F);return A}}function yf(e){return 1<e.length}
function Cd(){var e,a=[];return{lineStart:function(){a.push(e=[])},point:function(a,w){e.push([a,w])},lineEnd:X,buffer:function(){var h=a;return a=[],e=null,h},rejoin:function(){1<a.length&&a.push(a.pop().concat(a.shift()))}}}function Bd(e,a){if(!(h=e.length))return 0;var h,c,t,r=0,d=0;c=e[0];t=c[0];for(var s=c[1],L=Math.cos(s),f=Math.atan2(a*Math.sin(t)*L,Math.sin(s)),g=1-a*Math.cos(t)*L,m=f;++r<h;)c=e[r],L=Math.cos(s=c[1]),c=Math.atan2(a*Math.sin(t=c[0])*L,Math.sin(s)),t=1-a*Math.cos(t)*L,Math.abs(g-
2)<H&&Math.abs(t-2)<H||(Math.abs(t)<H||Math.abs(g)<H||(Math.abs(Math.abs(c-f)-C)<H?2<t+g&&(d+=4*(c-f)):d+=Math.abs(g-2)<H?4*(c-m):((3*C+c-f)%(2*C)-C)*(g+t)),m=f,f=c,g=t);return d}function zf(e,a){return(0>(e=e.point)[0]?e[1]-C/2-H:C/2-e[1])-(0>(a=a.point)[0]?a[1]-C/2-H:C/2-a[1])}function Af(e){function a(e,h){return Math.cos(e)*Math.cos(h)>t}function h(e,a,h){var w=nb(e),c=nb(a),J=[1,0,0],c=xd(w,c),r=ob(c,c),w=c[0],d=r-w*w;if(!d)return!h&&e;r=t*r/d;d=-t*w/d;w=xd(J,c);J=pb(J,r);c=pb(c,d);hc(J,c);c=
ob(J,w);r=ob(w,w);d=c*c-r*(ob(J,J)-1);if(!(0>d)){var s=Math.sqrt(d),d=pb(w,(-c-s)/r);if(hc(d,J),d=ic(d),!h)return d;var f;h=e[0];var S=a[0];e=e[1];a=a[1];h>S&&(f=h,h=S,S=f);var g=S-h,m=Math.abs(g-C)<H,l=m||H>g;if(!m&&e>a&&(f=e,e=a,a=f),l?m?0<e+a^d[1]<(Math.abs(d[0]-h)<H?e:a):e<=d[1]&&d[1]<=a:g>C^(h<=d[0]&&d[0]<=S))return f=pb(w,(-c+s)/r),hc(f,J),[d,ic(f)]}}function c(a,h){var w=r?e:C-e,t=0;return-w>a?t|=1:a>w&&(t|=2),-w>h?t|=4:h>w&&(t|=8),t}var t=Math.cos(e),r=0<t,d=Math.abs(t)>H,s=jc(e,6*G);return Ad(a,
function(e){var t,s,f,g,m;return{lineStart:function(){g=f=!1;m=1},point:function(l,p){var n,q=[l,p],F=a(l,p),K=r?F?0:c(l,p):F?c(l+(0>l?C:-C),p):0;if(!t&&(g=f=F)&&e.lineStart(),F!==f&&(n=h(t,q),(qb(t,n)||qb(q,n))&&(q[0]+=H,q[1]+=H,F=a(q[0],q[1]))),F!==f)m=0,F?(e.lineStart(),n=h(q,t),e.point(n[0],n[1])):(n=h(t,q),e.point(n[0],n[1]),e.lineEnd()),t=n;else if(d&&t&&r^F){var R;K&s||!(R=h(q,t,!0))||(m=0,r?(e.lineStart(),e.point(R[0][0],R[0][1]),e.point(R[1][0],R[1][1]),e.lineEnd()):(e.point(R[1][0],R[1][1]),
e.lineEnd(),e.lineStart(),e.point(R[0][0],R[0][1])))}!F||t&&qb(t,q)||e.point(q[0],q[1]);t=q;f=F;s=K},lineEnd:function(){f&&e.lineEnd();t=null},clean:function(){return m|(g&&f)<<1}}},s)}function Bf(e,a,h,c){function t(c,t){return Math.abs(c[0]-e)<H?0<t?0:3:Math.abs(c[0]-h)<H?0<t?2:1:Math.abs(c[1]-a)<H?0<t?1:0:0<t?3:2}function r(e,a){return d(e.point,a.point)}function d(e,a){var h=t(e,1),w=t(a,1);return h!==w?h-w:0===h?a[1]-e[1]:1===h?e[0]-a[0]:2===h?e[1]-a[1]:a[0]-e[0]}return function(s){function f(r){r=
t(r,-1);return g([0===r||3===r?e:h,1<r?c:a])}function g(e){for(var a=0,h=E.length,w=e[1],c=0;h>c;++c)for(var t=1,r=E[c],J=r.length,d=r[0];J>t;++t)b=r[t],d[1]<=w?b[1]>w&&0<(b[0]-d[0])*(e[1]-d[1])-(e[0]-d[0])*(b[1]-d[1])&&++a:b[1]<=w&&0>(b[0]-d[0])*(e[1]-d[1])-(e[0]-d[0])*(b[1]-d[1])&&--a,d=b;return 0!==a}function l(r,s,f,L){var g=0,m=0;if(null==r||(g=t(r,f))!==(m=t(s,f))||0>d(r,s)^0<f){do L.point(0===g||3===g?e:h,1<g?c:a);while((g=(g+f+4)%4)!==m)}else L.point(s[0],s[1])}function n(t,r){t>=e&&(h>=t&&
r>=a&&c>=r)&&s.point(t,r)}function p(t,r){t=Math.max(-rb,Math.min(rb,t));r=Math.max(-rb,Math.min(rb,r));var d=t>=e&&h>=t&&r>=a&&c>=r;if(E&&y.push([t,r]),ba)z=t,A=r,F=d,ba=!1,d&&(s.lineStart(),s.point(t,r));else if(d&&Na)s.point(t,r);else{var f=[K,R],S=[t,r],L=S[0]-f[0],g=S[1]-f[1],m=[0,1];(Math.abs(L)<H&&Math.abs(g)<H?e<=f[0]&&f[0]<=h&&a<=f[1]&&f[1]<=c:sb(e-f[0],L,m)&&(sb(f[0]-h,-L,m)&&sb(a-f[1],g,m)&&sb(f[1]-c,-g,m))&&(1>m[1]&&(S[0]=f[0]+m[1]*L,S[1]=f[1]+m[1]*g),0<m[0]&&(f[0]+=m[0]*L,f[1]+=m[0]*
g),!0))?(Na||(s.lineStart(),s.point(f[0],f[1])),s.point(S[0],S[1]),d||s.lineEnd()):(s.lineStart(),s.point(t,r))}K=t;R=r;Na=d}var q,E,y,z,A,F,K,R,Na,ba,ma=s,u=Cd(),v={point:n,lineStart:function(){v.point=p;E&&E.push(y=[]);ba=!0;Na=!1;K=R=0/0},lineEnd:function(){q&&(p(z,A),F&&Na&&u.rejoin(),q.push(u.buffer()));v.point=n;Na&&s.lineEnd()},polygonStart:function(){s=u;q=[];E=[]},polygonEnd:function(){s=ma;(q=m.merge(q)).length?(s.polygonStart(),yd(q,r,f,l,s),s.polygonEnd()):g([e,a])&&(s.polygonStart(),
s.lineStart(),l(null,null,1,s),s.lineEnd(),s.polygonEnd());q=E=y=null}};return v}}function sb(e,a,h){if(Math.abs(a)<H)return 0>=e;e/=a;if(0<a){if(e>h[1])return!1;e>h[0]&&(h[0]=e)}else{if(e<h[0])return!1;e<h[1]&&(h[1]=e)}return!0}function Dd(e,a){function h(h,c){return h=e(h,c),a(h[0],h[1])}return e.invert&&a.invert&&(h.invert=function(h,c){return h=a.invert(h,c),h&&e.invert(h[0],h[1])}),h}function Ed(e){function a(w){function c(a,h){a=e(a,h);w.point(a[0],a[1])}function J(){l=0/0;A.point=d;w.lineStart()}
function d(a,c){var J=nb([a,c]),s=e(a,c);h(l,n,m,p,q,z,l=s[0],n=s[1],m=a,p=J[0],q=J[1],z=J[2],t,w);w.point(l,n)}function f(){A.point=c;w.lineEnd()}function g(){var e,a,c,S,la,u;J();A.point=function(h,w){d(e=h,w);a=l;c=n;S=p;la=q;u=z;A.point=d};A.lineEnd=function(){h(l,n,m,p,q,z,a,c,e,S,la,u,t,w);A.lineEnd=f;f()}}var m,l,n,p,q,z,A={point:c,lineStart:J,lineEnd:f,polygonStart:function(){w.polygonStart();A.lineStart=g},polygonEnd:function(){w.polygonEnd();A.lineStart=J}};return A}function h(a,w,t,d,f,
g,m,l,n,p,q,z,A,F){var K=m-a,R=l-w,u=K*K+R*R;if(u>4*c&&A--){var ba=d+p,ma=f+q,v=g+z,Va=Math.sqrt(ba*ba+ma*ma+v*v),B=Math.asin(v/=Va),x=Math.abs(Math.abs(v)-1)<H?(t+n)/2:Math.atan2(ma,ba),C=e(x,B),B=C[0],C=C[1],P=B-a,I=C-w,G=R*P-K*I;(G*G/u>c||0.3<Math.abs((K*P+R*I)/u-0.5))&&(h(a,w,t,d,f,g,B,C,x,ba/=Va,ma/=Va,v,A,F),F.point(B,C),h(B,C,x,ba,ma,v,m,l,n,p,q,z,A,F))}}var c=0.5,t=16;return a.precision=function(e){return arguments.length?(t=0<(c=e*e)&&16,a):Math.sqrt(c)},a}function ya(e){return kc(function(){return e})()}
function kc(e){function a(e){return e=d(e[0]*G,e[1]*G),[e[0]*l+s,f-e[1]*l]}function h(e){return e=d.invert((e[0]-s)/l,(f-e[1])/l),e&&[e[0]*T,e[1]*T]}function c(){d=Dd(r=lc(y,z,A),t);var e=t(q,E);return s=n-e[0]*l,f=p+e[1]*l,a}var t,r,d,s,f,g=Ed(function(e,a){return e=t(e,a),[e[0]*l+s,f-e[1]*l]}),l=150,n=480,p=250,q=0,E=0,y=0,z=0,A=0,F=Fd,K=ga,R=null,u=null;return a.stream=function(e){return Cf(r,F(g(K(e))))},a.clipAngle=function(e){return arguments.length?(F=null==e?(R=e,Fd):Af((R=+e)*G),a):R},a.clipExtent=
function(e){return arguments.length?(u=e,K=null==e?ga:Bf(e[0][0],e[0][1],e[1][0],e[1][1]),a):u},a.scale=function(e){return arguments.length?(l=+e,c()):l},a.translate=function(e){return arguments.length?(n=+e[0],p=+e[1],c()):[n,p]},a.center=function(e){return arguments.length?(q=e[0]%360*G,E=e[1]%360*G,c()):[q*T,E*T]},a.rotate=function(e){return arguments.length?(y=e[0]%360*G,z=e[1]%360*G,A=2<e.length?e[2]%360*G:0,c()):[y*T,z*T,A*T]},m.rebind(a,g,"precision"),function(){return t=e.apply(this,arguments),
a.invert=t.invert&&h,c()}}function Cf(e,a){return{point:function(h,c){c=e(h*G,c*G);h=c[0];a.point(h>C?h-2*C:-C>h?h+2*C:h,c[1])},sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function Wa(e,a){return[e,a]}function lc(e,a,h){return e?a||h?Dd(Gd(e),Hd(a,h)):Gd(e):a||h?Hd(a,h):Wa}function Id(e){return function(a,h){return a+=e,[a>C?a-2*C:-C>a?a+2*C:a,h]}}function Gd(e){var a=
Id(e);return a.invert=Id(-e),a}function Hd(e,a){function h(e,a){var h=Math.cos(a),w=Math.cos(e)*h,h=Math.sin(e)*h,f=Math.sin(a),g=f*c+w*t;return[Math.atan2(h*r-g*d,w*c-f*t),Math.asin(Math.max(-1,Math.min(1,g*r+h*d)))]}var c=Math.cos(e),t=Math.sin(e),r=Math.cos(a),d=Math.sin(a);return h.invert=function(e,a){var h=Math.cos(a),w=Math.cos(e)*h,h=Math.sin(e)*h,f=Math.sin(a),g=f*r-h*d;return[Math.atan2(h*r+f*d,w*c+g*t),Math.asin(Math.max(-1,Math.min(1,g*c-w*t)))]},h}function jc(e,a){var h=Math.cos(e),c=
Math.sin(e);return function(t,r,d,s){null!=t?(t=Jd(h,t),r=Jd(h,r),(0<d?r>t:t>r)&&(t+=2*d*C)):(t=e+2*d*C,r=e);for(var f,g=d*a;0<d?t>r:r>t;t-=g)s.point((f=ic([h,-c*Math.cos(t),-c*Math.sin(t)]))[0],f[1])}}function Jd(e,a){var h=nb(a);h[0]-=e;var c=Math.sqrt(h[0]*h[0]+h[1]*h[1]+h[2]*h[2]);h[0]/=c;h[1]/=c;h[2]/=c;c=Math.acos(Math.max(-1,Math.min(1,-h[1])));return((0>-h[2]?-c:c)+2*Math.PI-H)%(2*Math.PI)}function Kd(e,a,h){var c=m.range(e,a-H,h).concat(a);return function(e){return c.map(function(a){return[e,
a]})}}function Ld(e,a,h){var c=m.range(e,a-H,h).concat(a);return function(e){return c.map(function(a){return[a,e]})}}function mc(e){return e.source}function nc(e){return e.target}function Df(e,a,h,c){var t=Math.cos(a),r=Math.sin(a),d=Math.cos(c),s=Math.sin(c),f=t*Math.cos(e),g=t*Math.sin(e),m=d*Math.cos(h),l=d*Math.sin(h),n=2*Math.asin(Math.sqrt(jd(c-a)+t*d*jd(h-e))),p=1/Math.sin(n);h=n?function(e){var a=Math.sin(e*=n)*p,h=Math.sin(n-e)*p;e=h*f+a*m;var w=h*g+a*l,a=h*r+a*s;return[Math.atan2(w,e)*T,
Math.atan2(a,Math.sqrt(e*e+w*w))*T]}:function(){return[e*T,a*T]};return h.distance=n,h}function oc(e){var a=0,h=C/3,c=kc(e);e=c(a,h);return e.parallels=function(e){return arguments.length?c(a=e[0]*C/180,h=e[1]*C/180):[180*(a/C),180*(h/C)]},e}function Md(e,a){function h(e,a){var h=Math.sqrt(r-2*t*Math.sin(a))/t;return[h*Math.sin(e*=t),d-h*Math.cos(e)]}var c=Math.sin(e),t=(c+Math.sin(a))/2,r=1+c*(2*t-c),d=Math.sqrt(r)/t;return h.invert=function(e,a){var h=d-a;return[Math.atan2(e,h)/t,Math.asin((r-(e*
e+h*h)*t*t)/(2*t))]},h}function pc(e,a){var h=e(a[0]),c=e([0.5*(a[0][0]+a[1][0]),a[0][1]]),t=e([a[1][0],a[0][1]]),d=e(a[1]),f=(c[1]-h[1])/(c[0]-h[0]),s=(t[1]-c[1])/(t[0]-c[0]),g=0.5*(f*s*(h[1]-t[1])+s*(h[0]+c[0])-f*(c[0]+t[0]))/(s-f),m=(0.5*(h[0]+c[0])-g)/f+0.5*(h[1]+c[1]),c=d[0]-g,d=d[1]-m,t=h[0]-g,h=h[1]-m,l=c*c+d*d,n=t*t+h*h,p=Math.atan2(d,c),q=Math.atan2(h,t);return function(a){var h=a[0]-g,w=a[1]-m,c=h*h+w*w,h=Math.atan2(w,h);return c>l&&n>c&&h>p&&q>h?e.invert(a):void 0}}function Ef(){function e(e,
a){tb+=t*e-c*a;c=e;t=a}var a,h,c,t;za.point=function(d,f){za.point=e;a=c=d;h=t=f};za.lineEnd=function(){e(a,h)}}function Ff(){function e(e,a){f.push("M",e,",",a,d)}function a(e,w){f.push("M",e,",",w);s.point=h}function h(e,a){f.push("L",e,",",a)}function c(){s.point=e}function t(){f.push("Z")}var d=Nd(4.5),f=[],s={point:e,lineStart:function(){s.point=a},lineEnd:c,polygonStart:function(){s.lineEnd=t},polygonEnd:function(){s.lineEnd=c;s.point=e},pointRadius:function(e){return d=Nd(e),s},result:function(){if(f.length){var e=
f.join("");return f=[],e}}};return s}function qc(e,a){Z||(V+=e,W+=a,++U)}function Od(){function e(e,c){var d=e-a,f=c-h,d=Math.sqrt(d*d+f*f);V+=d*(a+e)/2;W+=d*(h+c)/2;U+=d;a=e;h=c}var a,h;if(1!==Z){if(!(1>Z))return;Z=1;V=W=U=0}ka.point=function(c,t){ka.point=e;a=c;h=t}}function Pd(){ka.point=qc}function Gf(){function e(e,a){var h=t*e-c*a;V+=h*(c+e);W+=h*(t+a);U+=3*h;c=e;t=a}var a,h,c,t;2>Z&&(Z=2,V=W=U=0);ka.point=function(d,f){ka.point=e;a=c=d;h=t=f};ka.lineEnd=function(){e(a,h)}}function Hf(e){function a(h,
c){e.moveTo(h,c);e.arc(h,c,f,0,2*C)}function h(a,h){e.moveTo(a,h);s.point=c}function c(a,h){e.lineTo(a,h)}function t(){s.point=a}function d(){e.closePath()}var f=4.5,s={point:a,lineStart:function(){s.point=h},lineEnd:t,polygonStart:function(){s.lineEnd=d},polygonEnd:function(){s.lineEnd=t;s.point=a},pointRadius:function(e){return f=e,s},result:X};return s}function Nd(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function If(e){var a=Ed(function(a,c){return e([a*T,c*
T])});return function(e){return e=a(e),{point:function(a,c){e.point(a*G,c*G)},sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}}function Xa(e,a){function h(a,h){var c=Math.cos(a),w=Math.cos(h),c=e(c*w);return[c*w*Math.sin(a),c*Math.sin(h)]}return h.invert=function(e,h){var c=Math.sqrt(e*e+h*h),d=a(c),f=Math.sin(d),d=Math.cos(d);return[Math.atan2(e*f,c*d),Math.asin(c&&h*
f/c)]},h}function Qd(e,a){function h(e,a){var h=Math.abs(Math.abs(a)-C/2)<H?0:d/Math.pow(Math.tan(C/4+a/2),t);return[h*Math.sin(t*e),d-h*Math.cos(t*e)]}var c=Math.cos(e),t=e===a?Math.sin(e):Math.log(c/Math.cos(a))/Math.log(Math.tan(C/4+a/2)/Math.tan(C/4+e/2)),d=c*Math.pow(Math.tan(C/4+e/2),t)/t;return t?(h.invert=function(e,a){var h=d-a,c=(0<t?1:0>t?-1:0)*Math.sqrt(e*e+h*h);return[Math.atan2(e,h)/t,2*Math.atan(Math.pow(d/c,1/t))-C/2]},h):ub}function Rd(e,a){function h(e,a){var h=d-a;return[h*Math.sin(t*
e),d-h*Math.cos(t*e)]}var c=Math.cos(e),t=e===a?Math.sin(e):(c-Math.cos(a))/(a-e),d=c/t+e;return Math.abs(t)<H?Wa:(h.invert=function(e,a){var h=d-a;return[Math.atan2(e,h)/t,d-(0<t?1:0>t?-1:0)*Math.sqrt(e*e+h*h)]},h)}function ub(e,a){return[e,Math.log(Math.tan(C/4+a/2))]}function Sd(e){var a,h=ya(e),c=h.scale,t=h.translate,d=h.clipExtent;return h.scale=function(){var e=c.apply(h,arguments);return e===h?a?h.clipExtent(null):h:e},h.translate=function(){var e=t.apply(h,arguments);return e===h?a?h.clipExtent(null):
h:e},h.clipExtent=function(e){var f=d.apply(h,arguments);if(f===h){if(a=null==e){var g=C*c(),m=t();d([[m[0]-g,m[1]-g],[m[0]+g,m[1]+g]])}}else a&&(f=null);return f},h.clipExtent(null)}function rc(e,a){var h=Math.cos(a)*Math.sin(e);return[Math.log((1+h)/(1-h))/2,Math.atan2(Math.tan(a),Math.cos(e))]}function Td(e){function a(w){function f(){S.push("M",d(e(m),s))}for(var g,S=[],m=[],l=-1,n=w.length,p=Q(h),q=Q(c);++l<n;)t.call(this,g=w[l],l)?m.push([+p.call(this,g,l),+q.call(this,g,l)]):m.length&&(f(),
m=[]);return m.length&&f(),S.length?S.join(""):null}var h=na,c=qa,t=Ua,d=ha,f=d.key,s=0.7;return a.x=function(e){return arguments.length?(h=e,a):h},a.y=function(e){return arguments.length?(c=e,a):c},a.defined=function(e){return arguments.length?(t=e,a):t},a.interpolate=function(e){return arguments.length?(f="function"==typeof e?d=e:(d=sc.get(e)||ha).key,a):f},a.tension=function(e){return arguments.length?(s=e,a):s},a}function na(e){return e[0]}function qa(e){return e[1]}function ha(e){return e.join("L")}
function tc(e){for(var a=0,h=e.length,c=e[0],t=[c[0],",",c[1]];++a<h;)t.push("V",(c=e[a])[1],"H",c[0]);return t.join("")}function uc(e){for(var a=0,h=e.length,c=e[0],t=[c[0],",",c[1]];++a<h;)t.push("H",(c=e[a])[0],"V",c[1]);return t.join("")}function vb(e,a){if(1>a.length||e.length!=a.length&&e.length!=a.length+2)return ha(e);var h=e.length!=a.length,c="",t=e[0],d=e[1],f=a[0],s=f,g=1;if(h&&(c+="Q"+(d[0]-2*f[0]/3)+","+(d[1]-2*f[1]/3)+","+d[0]+","+d[1],t=e[1],g=2),1<a.length)for(s=a[1],d=e[g],g++,c+=
"C"+(t[0]+f[0])+","+(t[1]+f[1])+","+(d[0]-s[0])+","+(d[1]-s[1])+","+d[0]+","+d[1],t=2;t<a.length;t++,g++)d=e[g],s=a[t],c+="S"+(d[0]-s[0])+","+(d[1]-s[1])+","+d[0]+","+d[1];h&&(h=e[g],c+="Q"+(d[0]+2*s[0]/3)+","+(d[1]+2*s[1]/3)+","+h[0]+","+h[1]);return c}function vc(e,a){for(var h,c=[],t=(1-a)/2,d=e[0],f=e[1],s=1,g=e.length;++s<g;)h=d,d=f,f=e[s],c.push([t*(f[0]-h[0]),t*(f[1]-h[1])]);return c}function Ud(e){if(3>e.length)return ha(e);var a=1,h=e.length,c=e[0],t=c[0],d=c[1],f=[t,t,t,(c=e[1])[0]],s=[d,
d,d,c[1]],t=[t,",",d];for(Ya(t,f,s);++a<h;)c=e[a],f.shift(),f.push(c[0]),s.shift(),s.push(c[1]),Ya(t,f,s);for(a=-1;2>++a;)f.shift(),f.push(c[0]),s.shift(),s.push(c[1]),Ya(t,f,s);return t.join("")}function oa(e,a){return e[0]*a[0]+e[1]*a[1]+e[2]*a[2]+e[3]*a[3]}function Ya(e,a,h){e.push("C",oa(Vd,a),",",oa(Vd,h),",",oa(Wd,a),",",oa(Wd,h),",",oa(Pa,a),",",oa(Pa,h))}function wc(e,a){return(a[1]-e[1])/(a[0]-e[0])}function Jf(e,a,h,c){var d,r,f,s,g,m,l;return d=c[e],r=d[0],f=d[1],d=c[a],s=d[0],g=d[1],d=
c[h],m=d[0],l=d[1],0<(l-f)*(s-r)-(g-f)*(m-r)}function xc(e,a,h){return(h[0]-a[0])*(e[1]-a[1])<(h[1]-a[1])*(e[0]-a[0])}function Xd(e,a,h,c){var d=e[0],r=h[0],f=a[0]-d,s=c[0]-r;e=e[1];h=h[1];a=a[1]-e;c=c[1]-h;r=(s*(e-h)-c*(d-r))/(c*f-s*a);return[d+r*f,e+r*a]}function yc(e,a){var h=e.map(function(e,a){return{index:a,x:e[0],y:e[1]}}).sort(function(e,a){return e.y<a.y?-1:e.y>a.y?1:e.x<a.x?-1:e.x>a.x?1:0}),c=null,d={list:[],leftEnd:null,rightEnd:null,init:function(){d.leftEnd=d.createHalfEdge(null,"l");
d.rightEnd=d.createHalfEdge(null,"l");d.leftEnd.r=d.rightEnd;d.rightEnd.l=d.leftEnd;d.list.unshift(d.leftEnd,d.rightEnd)},createHalfEdge:function(e,a){return{edge:e,side:a,vertex:null,l:null,r:null}},insert:function(e,a){a.l=e;a.r=e.r;e.r.l=a;e.r=a},leftBound:function(e){var a=d.leftEnd;do a=a.r;while(a!=d.rightEnd&&r.rightOf(a,e));return a.l},del:function(e){e.l.r=e.r;e.r.l=e.l;e.edge=null},right:function(e){return e.r},left:function(e){return e.l},leftRegion:function(e){return null==e.edge?c:e.edge.region[e.side]},
rightRegion:function(e){return null==e.edge?c:e.edge.region[zc[e.side]]}},r={bisect:function(e,a){var h={region:{l:e,r:a},ep:{l:null,r:null}},c=a.x-e.x,w=a.y-e.y;return h.c=e.x*c+e.y*w+0.5*(c*c+w*w),(0<c?c:-c)>(0<w?w:-w)?(h.a=1,h.b=w/c,h.c/=c):(h.b=1,h.a=c/w,h.c/=w),h},intersect:function(e,a){var h=e.edge,c=a.edge;if(!h||!c||h.region.r==c.region.r)return null;var w=h.a*c.b-h.b*c.a;if(1E-10>Math.abs(w))return null;var d,t,r=(h.c*c.b-c.c*h.b)/w,w=(c.c*h.a-h.c*c.a)/w,f=h.region.r,J=c.region.r;f.y<J.y||
f.y==J.y&&f.x<J.x?(d=e,t=h):(d=a,t=c);return(h=r>=t.region.r.x)&&"l"===d.side||!h&&"r"===d.side?null:{x:r,y:w}},rightOf:function(e,a){var h=e.edge,c=h.region.r,w=a.x>c.x;if(w&&"l"===e.side)return 1;if(!w&&"r"===e.side)return 0;if(1===h.a){var d=a.y-c.y,t=a.x-c.x,r=0,f=0;(!w&&0>h.b||w&&0<=h.b?f=r=d>=h.b*t:(f=a.x+a.y*h.b>h.c,0>h.b&&(f=!f),f||(r=1)),r)||(c=c.x-h.region.l.x,f=h.b*(t*t-d*d)<c*d*(1+2*t/c+h.b*h.b),0>h.b&&(f=!f))}else t=h.c-h.a*a.x,h=a.y-t,d=a.x-c.x,c=t-c.y,f=h*h>d*d+c*c;return"l"===e.side?
f:!f},endPoint:function(e,h,c){e.ep[h]=c;e.ep[zc[h]]&&a(e)},distance:function(e,a){var h=e.x-a.x,c=e.y-a.y;return Math.sqrt(h*h+c*c)}},f={list:[],insert:function(e,a,h){e.vertex=a;e.ystar=a.y+h;h=0;for(var c=f.list,w=c.length;w>h;h++){var d=c[h];if(!(e.ystar>d.ystar||e.ystar==d.ystar&&a.x>d.vertex.x))break}c.splice(h,0,e)},del:function(e){for(var a=0,h=f.list,c=h.length;c>a&&h[a]!=e;++a);h.splice(a,1)},empty:function(){return 0===f.list.length},nextEvent:function(e){for(var a=0,h=f.list,c=h.length;c>
a;++a)if(h[a]==e)return h[a+1];return null},min:function(){var e=f.list[0];return{x:e.vertex.x,y:e.ystar}},extractMin:function(){return f.list.shift()}};d.init();for(var c=h.shift(),s,g,m,l,n,p,q,E,y,z,A=h.shift();;)if(f.empty()||(s=f.min()),A&&(f.empty()||A.y<s.y||A.y==s.y&&A.x<s.x))g=d.leftBound(A),m=d.right(g),q=d.rightRegion(g),z=r.bisect(q,A),p=d.createHalfEdge(z,"l"),d.insert(g,p),(y=r.intersect(g,p))&&(f.del(g),f.insert(g,y,r.distance(y,A))),g=p,p=d.createHalfEdge(z,"r"),d.insert(g,p),(y=r.intersect(p,
m))&&f.insert(p,y,r.distance(y,A)),A=h.shift();else{if(f.empty())break;g=f.extractMin();l=d.left(g);m=d.right(g);n=d.right(m);q=d.leftRegion(g);p=d.rightRegion(m);y=g.vertex;r.endPoint(g.edge,g.side,y);r.endPoint(m.edge,m.side,y);d.del(g);f.del(m);d.del(m);g="l";q.y>p.y&&(E=q,q=p,p=E,g="r");z=r.bisect(q,p);p=d.createHalfEdge(z,g);d.insert(l,p);r.endPoint(z,zc[g],y);(y=r.intersect(l,p))&&(f.del(l),f.insert(l,y,r.distance(y,q)));(y=r.intersect(p,n))&&f.insert(p,y,r.distance(y,q))}for(g=d.right(d.leftEnd);g!=
d.rightEnd;g=d.right(g))a(g.edge)}function Kf(e){return e.x}function Lf(e){return e.y}function Yd(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Za(e,a,h,c,d,r){if(!e(a,h,c,d,r)){var f=0.5*(h+d),s=0.5*(c+r);a=a.nodes;a[0]&&Za(e,a[0],h,c,f,s);a[1]&&Za(e,a[1],f,c,d,s);a[2]&&Za(e,a[2],h,s,f,r);a[3]&&Za(e,a[3],f,s,d,r)}}function Ac(e,a){e=m.rgb(e);a=m.rgb(a);var h=e.r,c=e.g,d=e.b,r=a.r-h,f=a.g-c,s=a.b-d;return function(e){return"#"+Ma(Math.round(h+r*e))+Ma(Math.round(c+f*e))+Ma(Math.round(d+
s*e))}}function Zd(e){var a=[e.a,e.b],h=[e.c,e.d],c=$d(a),d=a[0]*h[0]+a[1]*h[1],r=$d((h[0]+=-d*a[0],h[1]+=-d*a[1],h))||0;a[0]*h[1]<h[0]*a[1]&&(a[0]*=-1,a[1]*=-1,c*=-1,d*=-1);this.rotate=(c?Math.atan2(a[1],a[0]):Math.atan2(-h[0],h[1]))*T;this.translate=[e.e,e.f];this.scale=[c,r];this.skew=r?Math.atan2(d,r)*T:0}function $d(e){var a=Math.sqrt(e[0]*e[0]+e[1]*e[1]);return a&&(e[0]/=a,e[1]/=a),a}function ra(e,a){return a-=e=+e,function(h){return e+a*h}}function wb(e,a){var h,c=[],d=[],r=m.transform(e),
f=m.transform(a),s=r.translate,g=f.translate,l=r.rotate,p=f.rotate,n=r.skew,q=f.skew,r=r.scale,f=f.scale;return s[0]!=g[0]||s[1]!=g[1]?(c.push("translate(",null,",",null,")"),d.push({i:1,x:ra(s[0],g[0])},{i:3,x:ra(s[1],g[1])})):g[0]||g[1]?c.push("translate("+g+")"):c.push(""),l!=p?(180<l-p?p+=360:180<p-l&&(l+=360),d.push({i:c.push(c.pop()+"rotate(",null,")")-2,x:ra(l,p)})):p&&c.push(c.pop()+"rotate("+p+")"),n!=q?d.push({i:c.push(c.pop()+"skewX(",null,")")-2,x:ra(n,q)}):q&&c.push(c.pop()+"skewX("+
q+")"),r[0]!=f[0]||r[1]!=f[1]?(h=c.push(c.pop()+"scale(",null,",",null,")"),d.push({i:h-4,x:ra(r[0],f[0])},{i:h-2,x:ra(r[1],f[1])})):(1!=f[0]||1!=f[1])&&c.push(c.pop()+"scale("+f+")"),h=d.length,function(e){for(var a,w=-1;++w<h;)c[(a=d[w]).i]=a.x(e);return c.join("")}}function ae(e,a){var h,c={},d={};for(h in e)h in a?c[h]=("transform"==h?wb:Ca)(e[h],a[h]):d[h]=e[h];for(h in a)h in e||(d[h]=a[h]);return function(e){for(h in c)d[h]=c[h](e);return d}}function be(e,a){var h,c,d,r,f=0,s=[],g=[];e+="";
a+="";for(c=xb.lastIndex=0;h=xb.exec(a);++c)h.index&&s.push(a.substring(f,h.index)),g.push({i:s.length,x:h[0]}),s.push(null),f=xb.lastIndex;f<a.length&&s.push(a.substring(f));c=0;for(d=g.length;(h=xb.exec(e))&&d>c;++c)if(r=g[c],r.x==h[0]){if(r.i)if(null==s[r.i+1])for(s[r.i-1]+=r.x,s.splice(r.i,1),h=c+1;d>h;++h)g[h].i--;else for(s[r.i-1]+=r.x+s[r.i+1],s.splice(r.i,2),h=c+1;d>h;++h)g[h].i-=2;else if(null==s[r.i+1])s[r.i]=r.x;else for(s[r.i]=r.x+s[r.i+1],s.splice(r.i+1,1),h=c+1;d>h;++h)g[h].i--;g.splice(c,
1);d--;c--}else r.x=ra(parseFloat(h[0]),parseFloat(r.x));for(;d>c;)r=g.pop(),null==s[r.i+1]?s[r.i]=r.x:(s[r.i]=r.x+s[r.i+1],s.splice(r.i+1,1)),d--;return 1===s.length?null==s[0]?g[0].x:function(){return a}:function(e){for(c=0;d>c;++c)s[(r=g[c]).i]=r.x(e);return s.join("")}}function Ca(e,a){for(var h,c=m.interpolators.length;0<=--c&&!(h=m.interpolators[c](e,a)););return h}function ce(e,a){var h,c=[],d=[],r=e.length,f=a.length,s=Math.min(e.length,a.length);for(h=0;s>h;++h)c.push(Ca(e[h],a[h]));for(;r>
h;++h)d[h]=e[h];for(;f>h;++h)d[h]=a[h];return function(e){for(h=0;s>h;++h)d[h]=c[h](e);return d}}function Mf(e){return function(a){return 0>=a?0:1<=a?1:e(a)}}function de(e){return function(a){return 1-e(1-a)}}function ee(e){return function(a){return 0.5*(0.5>a?e(2*a):2-e(2-2*a))}}function Nf(e){return e*e}function Of(e){return e*e*e}function Pf(e){return 1-Math.cos(e*C/2)}function Qf(e){return Math.pow(2,10*(e-1))}function Rf(e){return 1-Math.sqrt(1-e*e)}function Sf(e){return 1/2.75>e?7.5625*e*e:
2/2.75>e?7.5625*(e-=1.5/2.75)*e+0.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+0.9375:7.5625*(e-=2.625/2.75)*e+0.984375}function fe(e,a){return a-=e,function(h){return Math.round(e+a*h)}}function Tf(e,a){return a=a-(e=+e)?1/(a-e):0,function(h){return(h-e)*a}}function Uf(e,a){return a=a-(e=+e)?1/(a-e):0,function(h){return Math.max(0,Math.min(1,(h-e)*a))}}function Vf(e){var a=e.source;e=e.target;var h;var c=e;if(a===c)h=a;else{h=ge(a);for(var c=ge(c),d=h.pop(),r=c.pop(),f=null;d===r;)f=d,d=h.pop(),r=c.pop();
h=f}for(c=[a];a!==h;)a=a.parent,c.push(a);for(a=c.length;e!==h;)c.splice(a,0,e),e=e.parent;return c}function ge(e){for(var a=[],h=e.parent;null!=h;)a.push(e),e=h,h=h.parent;return a.push(e),a}function Wf(e){e.fixed|=2}function Xf(e){e.fixed&=-7}function Yf(e){e.fixed|=4;e.px=e.x;e.py=e.y}function Zf(e){e.fixed&=-5}function he(e,a,h){var c=0,d=0;if(e.charge=0,!e.leaf)for(var r,f=e.nodes,s=f.length,g=-1;++g<s;)r=f[g],null!=r&&(he(r,a,h),e.charge+=r.charge,c+=r.charge*r.cx,d+=r.charge*r.cy);e.point&&
(e.leaf||(e.point.x+=Math.random()-0.5,e.point.y+=Math.random()-0.5),a*=h[e.point.index],e.charge+=e.pointCharge=a,c+=a*e.point.x,d+=a*e.point.y);e.cx=c/e.charge;e.cy=d/e.charge}function $a(e,a){return m.rebind(e,a,"sort","children","value"),e.nodes=e,e.links=$f,e}function ag(e){return e.children}function bg(e){return e.value}function cg(e,a){return a.value-e.value}function $f(e){return m.merge(e.map(function(e){return(e.children||[]).map(function(a){return{source:e,target:a}})}))}function dg(e){return e.x}
function eg(e){return e.y}function fg(e,a,h){e.y0=a;e.y=h}function Bc(e){return m.range(e.length)}function Cc(e){var a=-1;e=e[0].length;for(var h=[];++a<e;)h[a]=0;return h}function gg(e){for(var a,h=1,c=0,d=e[0][1],r=e.length;r>h;++h)(a=e[h][1])>d&&(c=h,d=a);return c}function hg(e){return e.reduce(ig,0)}function ig(e,a){return e+a[1]}function jg(e,a){return ie(e,Math.ceil(Math.log(a.length)/Math.LN2+1))}function ie(e,a){for(var h=-1,c=+e[0],d=(e[1]-c)/a,r=[];++h<=a;)r[h]=d*h+c;return r}function kg(e){return[m.min(e),
m.max(e)]}function je(e,a){return e.parent==a.parent?1:2}function Dc(e){var a=e.children;return a&&a.length?a[0]:e._tree.thread}function Ec(e){var a,h=e.children;return h&&(a=h.length)?h[a-1]:e._tree.thread}function yb(e,a){var h=e.children;if(h&&(d=h.length))for(var c,d,r=-1;++r<d;)0<a(c=yb(h[r],a),e)&&(e=c);return e}function lg(e,a){return e.x-a.x}function mg(e,a){return a.x-e.x}function ng(e,a){return e.depth-a.depth}function sa(e,a){function h(e,c){var d=e.children;if(d&&(s=d.length))for(var f,
s,g=null,m=-1;++m<s;)f=d[m],h(f,g),g=f;a(e,c)}h(e,null)}function og(e,a){return e.value-a.value}function Fc(e,a){var h=e._pack_next;e._pack_next=a;a._pack_prev=e;a._pack_next=h;h._pack_prev=a}function ke(e,a){e._pack_next=a;a._pack_prev=e}function le(e,a){var h=a.x-e.x,c=a.y-e.y,d=e.r+a.r;return 0.001<d*d-h*h-c*c}function me(e){function a(e){l=Math.min(e.x-e.r,l);p=Math.max(e.x+e.r,p);n=Math.min(e.y-e.r,n);q=Math.max(e.y+e.r,q)}if((h=e.children)&&(m=h.length)){var h,c,d,r,f,s,g,m,l=1/0,p=-1/0,n=1/
0,q=-1/0;if(h.forEach(pg),c=h[0],c.x=-c.r,c.y=0,a(c),1<m&&(d=h[1],d.x=d.r,d.y=0,a(d),2<m))for(r=h[2],ne(c,d,r),a(r),Fc(c,r),c._pack_prev=r,Fc(r,d),d=c._pack_next,f=3;m>f;f++){ne(c,d,r=h[f]);var E=0,y=1,z=1;for(s=d._pack_next;s!==d;s=s._pack_next,y++)if(le(s,r)){E=1;break}if(1==E)for(g=c._pack_prev;g!==s._pack_prev&&!le(g,r);g=g._pack_prev,z++);E?(z>y||y==z&&d.r<c.r?ke(c,d=s):ke(c=g,d),f--):(Fc(c,r),d=r,a(r))}c=(l+p)/2;d=(n+q)/2;for(f=s=0;m>f;f++)r=h[f],r.x-=c,r.y-=d,s=Math.max(s,r.r+Math.sqrt(r.x*
r.x+r.y*r.y));e.r=s;h.forEach(qg)}}function pg(e){e._pack_next=e._pack_prev=e}function qg(e){delete e._pack_next;delete e._pack_prev}function oe(e,a,h,c){var d=e.children;if(e.x=a+=c*e.x,e.y=h+=c*e.y,e.r*=c,d){e=-1;for(var f=d.length;++e<f;)oe(d[e],a,h,c)}}function ne(e,a,h){var c=e.r+h.r,d=a.x-e.x,f=a.y-e.y;if(c&&(d||f)){var g=a.r+h.r,s=d*d+f*f,g=g*g,c=c*c;a=0.5+(c-g)/(2*s);g=Math.sqrt(Math.max(0,2*g*(c+s)-(c-=s)*c-g*g))/(2*s);h.x=e.x+a*d+g*f;h.y=e.y+a*f-g*d}else h.x=e.x+c,h.y=e.y}function rg(e){return 1+
m.max(e,function(e){return e.y})}function sg(e){return e.reduce(function(e,a){return e+a.x},0)/e.length}function pe(e){var a=e.children;return a&&a.length?pe(a[0]):e}function qe(e){var a,h=e.children;return h&&(a=h.length)?qe(h[a-1]):e}function Gc(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function re(e,a){var h=e.x+a[3],c=e.y+a[0],d=e.dx-a[1]-a[3],f=e.dy-a[0]-a[2];return 0>d&&(h+=d/2,d=0),0>f&&(c+=f/2,f=0),{x:h,y:c,dx:d,dy:f}}function ab(e){var a=e[0];e=e[e.length-1];return e>a?[a,e]:[e,a]}function zb(e){return e.rangeExtent?
e.rangeExtent():ab(e.range())}function tg(e,a,h,c){var d=h(e[0],e[1]),f=c(a[0],a[1]);return function(e){return f(d(e))}}function Ab(e,a){var h,c=0,d=e.length-1,f=e[c],g=e[d];return f>g&&(h=c,c=d,d=h,h=f,f=g,g=h),(a=a(g-f))&&(e[c]=a.floor(f),e[d]=a.ceil(g)),e}function ug(e,a,h,c){var d=[],f=[],g=0,s=Math.min(e.length,a.length)-1;for(e[s]<e[0]&&(e=e.slice().reverse(),a=a.slice().reverse());++g<=s;)d.push(h(e[g-1],e[g])),f.push(c(a[g-1],a[g]));return function(a){var h=m.bisect(e,a,1,s)-1;return f[h](d[h](a))}}
function se(e,a,h,c){function d(){var t=2<Math.min(e.length,a.length)?ug:tg,m=c?Uf:Tf;return g=t(e,a,m,h),s=t(a,e,m,Ca),f}function f(e){return g(e)}var g,s;return f.invert=function(e){return s(e)},f.domain=function(a){return arguments.length?(e=a.map(Number),d()):e},f.range=function(e){return arguments.length?(a=e,d()):a},f.rangeRound=function(e){return f.range(e).interpolate(fe)},f.clamp=function(e){return arguments.length?(c=e,d()):c},f.interpolate=function(e){return arguments.length?(h=e,d()):
h},f.ticks=function(a){return Hc(e,a)},f.tickFormat=function(a,h){return Ic(e,a,h)},f.nice=function(){return Ab(e,te),d()},f.copy=function(){return se(e,a,h,c)},d()}function ue(e,a){return m.rebind(e,a,"range","rangeRound","interpolate","clamp")}function te(e){return e=Math.pow(10,Math.round(Math.log(e)/Math.LN10)-1),e&&{floor:function(a){return Math.floor(a/e)*e},ceil:function(a){return Math.ceil(a/e)*e}}}function ve(e,a){var h=ab(e),c=h[1]-h[0],d=Math.pow(10,Math.floor(Math.log(c/a)/Math.LN10)),
c=a/c*d;return 0.15>=c?d*=10:0.35>=c?d*=5:0.75>=c&&(d*=2),h[0]=Math.ceil(h[0]/d)*d,h[1]=Math.floor(h[1]/d)*d+0.5*d,h[2]=d,h}function Hc(e,a){return m.range.apply(m,ve(e,a))}function Ic(e,a,h){var c=-Math.floor(Math.log(ve(e,a)[2])/Math.LN10+0.01);return m.format(h?h.replace(we,function(e,a,h,d,w,f,g,m,l,p){return[a,h,d,w,f,g,m,l||"."+(c-2*("%"===p)),p].join("")}):",."+c+"f")}function xe(e,a,h,c){function d(a){return e(h(a))}return d.invert=function(a){return c(e.invert(a))},d.domain=function(a){return arguments.length?
(0>a[0]?(h=Jc,c=vg):(h=ye,c=ze),e.domain(a.map(h)),d):e.domain().map(c)},d.base=function(e){return arguments.length?(a=+e,d):a},d.nice=function(){return e.domain(Ab(e.domain(),wg(a))),d},d.ticks=function(){var d=ab(e.domain()),f=[];if(d.every(isFinite)){var t=Math.log(a),g=Math.floor(d[0]/t),t=Math.ceil(d[1]/t),m=c(d[0]),d=c(d[1]),l=a%1?2:a;if(h===Jc)for(f.push(-Math.pow(a,-g));g++<t;)for(var p=l-1;0<p;p--)f.push(-Math.pow(a,-g)*p);else{for(;t>g;g++)for(p=1;l>p;p++)f.push(Math.pow(a,g)*p);f.push(Math.pow(a,
g))}for(g=0;f[g]<m;g++);for(t=f.length;f[t-1]>d;t--);f=f.slice(g,t)}return f},d.tickFormat=function(e,f){if(2>arguments.length&&(f=xg),!arguments.length)return f;var g,m=Math.log(a),l=Math.max(0.1,e/d.ticks().length),p=h===Jc?(g=-1E-12,Math.floor):(g=1E-12,Math.ceil);return function(e){return e/c(m*p(h(e)/m+g))<=l?f(e):""}},d.copy=function(){return xe(e.copy(),a,h,c)},ue(d,e)}function ye(e){return Math.log(0>e?0:e)}function ze(e){return Math.exp(e)}function Jc(e){return-Math.log(0<e?0:-e)}function vg(e){return-Math.exp(-e)}
function wg(e){e=Math.log(e);var a={floor:function(a){return Math.floor(a/e)*e},ceil:function(a){return Math.ceil(a/e)*e}};return function(){return a}}function Ae(e,a){function h(a){return e(c(a))}var c=Bb(a),d=Bb(1/a);return h.invert=function(a){return d(e.invert(a))},h.domain=function(a){return arguments.length?(e.domain(a.map(c)),h):e.domain().map(d)},h.ticks=function(e){return Hc(h.domain(),e)},h.tickFormat=function(e,a){return Ic(h.domain(),e,a)},h.nice=function(){return h.domain(Ab(h.domain(),
te))},h.exponent=function(e){if(!arguments.length)return a;var f=h.domain();return c=Bb(a=e),d=Bb(1/a),h.domain(f)},h.copy=function(){return Ae(e.copy(),a)},ue(h,e)}function Bb(e){return function(a){return 0>a?-Math.pow(-a,e):Math.pow(a,e)}}function Be(e,a){function h(a){return r[((f.get(a)||f.set(a,e.push(a)))-1)%r.length]}function d(a,h){return m.range(e.length).map(function(e){return a+h*e})}var f,r,g;return h.domain=function(d){if(!arguments.length)return e;e=[];f=new c;for(var r,g=-1,J=d.length;++g<
J;)f.has(r=d[g])||f.set(r,e.push(r));return h[a.t].apply(h,a.a)},h.range=function(e){return arguments.length?(r=e,g=0,a={t:"range",a:arguments},h):r},h.rangePoints=function(c,f){2>arguments.length&&(f=0);var t=c[0],m=c[1],l=(m-t)/(Math.max(1,e.length-1)+f);return r=d(2>e.length?(t+m)/2:t+l*f/2,l),g=0,a={t:"rangePoints",a:arguments},h},h.rangeBands=function(c,f,t){2>arguments.length&&(f=0);3>arguments.length&&(t=f);var m=c[1]<c[0],l=c[m-0],p=(c[1-m]-l)/(e.length-f+2*t);return r=d(l+p*t,p),m&&r.reverse(),
g=p*(1-f),a={t:"rangeBands",a:arguments},h},h.rangeRoundBands=function(c,f,t){2>arguments.length&&(f=0);3>arguments.length&&(t=f);var m=c[1]<c[0],l=c[m-0],p=c[1-m],n=Math.floor((p-l)/(e.length-f+2*t));return r=d(l+Math.round((p-l-(e.length-f)*n)/2),n),m&&r.reverse(),g=Math.round(n*(1-f)),a={t:"rangeRoundBands",a:arguments},h},h.rangeBand=function(){return g},h.rangeExtent=function(){return ab(a.a[0])},h.copy=function(){return Be(e,a)},h.domain(e)}function Ce(e,a){function h(){var h=0,f=a.length;for(d=
[];++h<f;)d[h-1]=m.quantile(e,h/f);return c}function c(e){return isNaN(e=+e)?0/0:a[m.bisect(d,e)]}var d;return c.domain=function(a){return arguments.length?(e=a.filter(function(e){return!isNaN(e)}).sort(m.ascending),h()):e},c.range=function(e){return arguments.length?(a=e,h()):a},c.quantiles=function(){return d},c.copy=function(){return Ce(e,a)},h()}function De(e,a,c){function d(a){return c[Math.max(0,Math.min(g,Math.floor(r*(a-e))))]}function f(){return r=c.length/(a-e),g=c.length-1,d}var r,g;return d.domain=
function(c){return arguments.length?(e=+c[0],a=+c[c.length-1],f()):[e,a]},d.range=function(e){return arguments.length?(c=e,f()):c},d.copy=function(){return De(e,a,c)},f()}function Ee(e,a){function c(h){return a[m.bisect(e,h)]}return c.domain=function(a){return arguments.length?(e=a,c):e},c.range=function(e){return arguments.length?(a=e,c):a},c.copy=function(){return Ee(e,a)},c}function Fe(e){function a(e){return+e}return a.invert=a,a.domain=a.range=function(c){return arguments.length?(e=c.map(a),
a):e},a.ticks=function(a){return Hc(e,a)},a.tickFormat=function(a,c){return Ic(e,a,c)},a.copy=function(){return Fe(e)},a}function yg(e){return e.innerRadius}function zg(e){return e.outerRadius}function Ge(e){return e.startAngle}function He(e){return e.endAngle}function Ie(e){for(var a,c,d,f=-1,r=e.length;++f<r;)a=e[f],c=a[0],d=a[1]+Da,a[0]=c*Math.cos(d),a[1]=c*Math.sin(d);return e}function Je(e){function a(w){function m(){A.push("M",s(e(K),n),p,l(e(F.reverse()),n),"Z")}for(var L,q,z,A=[],F=[],K=[],
u=-1,v=w.length,B=Q(c),ma=Q(f),x=c===d?function(){return q}:Q(d),Va=f===r?function(){return z}:Q(r);++u<v;)g.call(this,L=w[u],u)?(F.push([q=+B.call(this,L,u),z=+ma.call(this,L,u)]),K.push([+x.call(this,L,u),+Va.call(this,L,u)])):F.length&&(m(),F=[],K=[]);return F.length&&m(),A.length?A.join(""):null}var c=na,d=na,f=0,r=qa,g=Ua,s=ha,m=s.key,l=s,p="L",n=0.7;return a.x=function(e){return arguments.length?(c=d=e,a):d},a.x0=function(e){return arguments.length?(c=e,a):c},a.x1=function(e){return arguments.length?
(d=e,a):d},a.y=function(e){return arguments.length?(f=r=e,a):r},a.y0=function(e){return arguments.length?(f=e,a):f},a.y1=function(e){return arguments.length?(r=e,a):r},a.defined=function(e){return arguments.length?(g=e,a):g},a.interpolate=function(e){return arguments.length?(m="function"==typeof e?s=e:(s=sc.get(e)||ha).key,l=s.reverse||s,p=s.closed?"M":"L",a):m},a.tension=function(e){return arguments.length?(n=e,a):n},a}function Ag(e){return e.radius}function Ke(e){return[e.x,e.y]}function Bg(e){return function(){var a=
e.apply(this,arguments),c=a[0],a=a[1]+Da;return[c*Math.cos(a),c*Math.sin(a)]}}function Cg(){return 64}function Dg(){return"circle"}function Le(e){e=Math.sqrt(e/C);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function bb(e,a){return Rb(e,Y),e.id=a,e}function Kc(e,a,c,d){var f=e.id;return wa(e,"function"==typeof c?function(e,g,s){e.__transition__[f].tween.set(a,d(c.call(e,e.__data__,g,s)))}:(c=d(c),function(e){e.__transition__[f].tween.set(a,c)}))}function Eg(e){return null==
e&&(e=""),function(){this.textContent=e}}function Cb(e,a,h,d){var f=e.__transition__||(e.__transition__={active:0,count:0}),r=f[h];if(!r){var g=d.time;return r=f[h]={tween:new c,event:m.dispatch("start","end"),time:g,ease:d.ease,delay:d.delay,duration:d.duration},++f.count,m.timer(function(c){function d(c){return f.active>h?l():(f.active=h,q.start.call(e,p,a),r.tween.forEach(function(c,h){(h=h.call(e,p,a))&&z.push(h)}),J(c)||m.timer(J,0,g),1)}function J(c){if(f.active!==h)return l();c=(c-E)/y;for(var d=
n(c),r=z.length;0<r;)z[--r].call(e,d);return 1<=c?(l(),q.end.call(e,p,a),1):void 0}function l(){return--f.count?delete f[h]:delete e.__transition__,1}var p=e.__data__,n=r.ease,q=r.event,E=r.delay,y=r.duration,z=[];return c>=E?d(c):m.timer(d,E,g),1},0,g),r}}function Me(e,a){e.attr("transform",function(e){return"translate("+a(e)+",0)"})}function Ne(e,a){e.attr("transform",function(e){return"translate(0,"+a(e)+")"})}function Fg(e,a,c){if(d=[],c&&1<a.length){for(var d,f,r=ab(e.domain()),g=-1,s=a.length,
m=(a[1]-a[0])/++c;++g<s;)for(e=c;0<--e;)(f=+a[g]-e*m)>=r[0]&&d.push(f);--g;for(e=0;++e<c&&(f=+a[g]+e*m)<r[1];)d.push(f)}return d}function Ea(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function Fa(e,a,c){function d(a){var c=e(a),h=r(c,1);return h-a>a-c?c:h}function f(c){return a(c=e(new ca(c-1)),1),c}function r(e,c){return a(e=new ca(+e),c),e}function g(e,d,r){e=f(e);var s=[];if(1<r)for(;d>e;)c(e)%r||s.push(new Date(+e)),a(e,1);else for(;d>e;)s.push(new Date(+e)),
a(e,1);return s}e.floor=e;e.round=d;e.ceil=f;e.offset=r;e.range=g;var s=e.utc=Db(e);return s.floor=s,s.round=Db(d),s.ceil=Db(f),s.offset=Db(r),s.range=function(e,a,c){try{ca=Ea;var h=new Ea;return h._=e,g(h,a,c)}finally{ca=Date}},e}function Db(e){return function(a,c){try{ca=Ea;var d=new Ea;return d._=a,e(d,c)._}finally{ca=Date}}}function Eb(e,a,c,d){for(var f,r,g=0,s=a.length,m=c.length;s>g;){if(d>=m)return-1;if(f=a.charCodeAt(g++),37===f){if(r=Gg[a.charAt(g++)],!r||0>(d=r(e,c,d)))return-1}else if(f!=
c.charCodeAt(d++))return-1}return d}function Fb(e){return RegExp("^(?:"+e.map(m.requote).join("|")+")","i")}function Oe(e){for(var a=new c,h=-1,d=e.length;++h<d;)a.set(e[h].toLowerCase(),h);return a}function fa(e,a,c){e+="";var d=e.length;return c>d?Array(c-d+1).join(a)+e:e}function Pe(e,a,c){da.lastIndex=0;return(a=da.exec(a.substring(c,c+2)))?(e.d=+a[0],c+a[0].length):-1}function Qe(e,a,c){da.lastIndex=0;return(a=da.exec(a.substring(c,c+2)))?(e.H=+a[0],c+a[0].length):-1}function Lc(e){return e.toISOString()}
function Mc(e,a,c){function d(a){return e(a)}return d.invert=function(a){return Nc(e.invert(a))},d.domain=function(a){return arguments.length?(e.domain(a),d):e.domain().map(Nc)},d.nice=function(e){return d.domain(Ab(d.domain(),function(){return e}))},d.ticks=function(c,h){var f,g=d.domain();f=g[0];g=g[g.length-1];f=g>f?[f,g]:[g,f];if("function"!=typeof c){var g=(f[1]-f[0])/c,l=m.bisect(Gb,g);if(l==Gb.length)return a.year(f,c);if(!l)return e.ticks(c).map(Nc);Math.log(g/Gb[l-1])<Math.log(Gb[l]/g)&&
--l;c=a[l];h=c[1];c=c[0].range}return c(f[0],new Date(+f[1]+1),h)},d.tickFormat=function(){return c},d.copy=function(){return Mc(e.copy(),a,c)},m.rebind(d,e,"range","rangeRound","interpolate","clamp")}function Nc(e){return new Date(e)}function Re(e){return function(a){for(var c=e.length-1,d=e[c];!d[1](a);)d=e[--c];return d[0](a)}}function Oc(e){var a=new Date(e,0,1);return a.setFullYear(e),a}function Hg(e){var a=e.getFullYear(),c=Oc(a),d=Oc(a+1);return a+(e-c)/(d-c)}function Pc(e){var a=new Date(Date.UTC(e,
0,1));return a.setUTCFullYear(e),a}function Ig(e){var a=e.getUTCFullYear(),c=Pc(a),d=Pc(a+1);return a+(e-c)/(d-c)}function Jg(e){return e.responseText}function Kg(e){return JSON.parse(e.responseText)}function Lg(e){var a=ea.createRange();return a.selectNode(ea.body),a.createContextualFragment(e.responseText)}function Mg(e){return e.responseXML}var m={version:"3.1.5"};Date.now||(Date.now=function(){return+new Date});var ea=document,aa=window;try{ea.createElement("div").style.setProperty("opacity",
0,"")}catch(qh){var Se=aa.CSSStyleDeclaration.prototype,Ng=Se.setProperty;Se.setProperty=function(e,a,c){Ng.call(this,e,a+"",c)}}m.ascending=function(e,a){return a>e?-1:e>a?1:e>=a?0:0/0};m.descending=function(e,a){return e>a?-1:a>e?1:a>=e?0:0/0};m.min=function(e,a){var c,d,f=-1,r=e.length;if(1===arguments.length){for(;++f<r&&(null==(c=e[f])||c!=c);)c=void 0;for(;++f<r;)null!=(d=e[f])&&c>d&&(c=d)}else{for(;++f<r&&(null==(c=a.call(e,e[f],f))||c!=c);)c=void 0;for(;++f<r;)null!=(d=a.call(e,e[f],f))&&
c>d&&(c=d)}return c};m.max=function(e,a){var c,d,f=-1,r=e.length;if(1===arguments.length){for(;++f<r&&(null==(c=e[f])||c!=c);)c=void 0;for(;++f<r;)null!=(d=e[f])&&d>c&&(c=d)}else{for(;++f<r&&(null==(c=a.call(e,e[f],f))||c!=c);)c=void 0;for(;++f<r;)null!=(d=a.call(e,e[f],f))&&d>c&&(c=d)}return c};m.extent=function(e,a){var c,d,f,r=-1,g=e.length;if(1===arguments.length){for(;++r<g&&(null==(c=f=e[r])||c!=c);)c=f=void 0;for(;++r<g;)null!=(d=e[r])&&(c>d&&(c=d),d>f&&(f=d))}else{for(;++r<g&&(null==(c=f=
a.call(e,e[r],r))||c!=c);)c=void 0;for(;++r<g;)null!=(d=a.call(e,e[r],r))&&(c>d&&(c=d),d>f&&(f=d))}return[c,f]};m.sum=function(e,a){var c,d=0,f=e.length,r=-1;if(1===arguments.length)for(;++r<f;)isNaN(c=+e[r])||(d+=c);else for(;++r<f;)isNaN(c=+a.call(e,e[r],r))||(d+=c);return d};m.mean=function(e,a){var c,f=e.length,g=0,r=-1,m=0;if(1===arguments.length)for(;++r<f;)d(c=e[r])&&(g+=(c-g)/++m);else for(;++r<f;)d(c=a.call(e,e[r],r))&&(g+=(c-g)/++m);return m?g:void 0};m.quantile=function(e,a){var c=(e.length-
1)*a+1,d=Math.floor(c),f=+e[d-1];return(c-=d)?f+c*(e[d]-f):f};m.median=function(e,a){return 1<arguments.length&&(e=e.map(a)),e=e.filter(d),e.length?m.quantile(e.sort(m.ascending),0.5):void 0};m.bisector=function(e){return{left:function(a,c,d,f){3>arguments.length&&(d=0);for(4>arguments.length&&(f=a.length);f>d;){var g=d+f>>>1;e.call(a,a[g],g)<c?d=g+1:f=g}return d},right:function(a,c,d,f){3>arguments.length&&(d=0);for(4>arguments.length&&(f=a.length);f>d;){var g=d+f>>>1;c<e.call(a,a[g],g)?f=g:d=g+
1}return d}}};var Te=m.bisector(function(e){return e});m.bisectLeft=Te.left;m.bisect=m.bisectRight=Te.right;m.shuffle=function(e){for(var a,c,d=e.length;d;)c=Math.random()*d--|0,a=e[d],e[d]=e[c],e[c]=a;return e};m.permute=function(e,a){for(var c=[],d=-1,f=a.length;++d<f;)c[d]=e[a[d]];return c};m.zip=function(){if(!(d=arguments.length))return[];for(var e=-1,a=m.min(arguments,n),c=Array(a);++e<a;)for(var d,f=-1,g=c[e]=Array(d);++f<d;)g[f]=arguments[f][e];return c};m.transpose=function(e){return m.zip.apply(m,
e)};m.keys=function(e){var a=[],c;for(c in e)a.push(c);return a};m.values=function(e){var a=[],c;for(c in e)a.push(e[c]);return a};m.entries=function(e){var a=[],c;for(c in e)a.push({key:c,value:e[c]});return a};m.merge=function(e){return Array.prototype.concat.apply([],e)};m.range=function(e,a,c){if(3>arguments.length&&(c=1,2>arguments.length&&(a=e,e=0)),1/0===(a-e)/c)throw Error("infinite range");var d,f=[],g;d=Math.abs(c);for(g=1;d*g%1;)g*=10;var m=-1;if(e*=g,a*=g,c*=g,0>c)for(;(d=e+c*++m)>a;)f.push(d/
g);else for(;(d=e+c*++m)<a;)f.push(d/g);return f};m.map=function(e){var a=new c,h;for(h in e)a.set(h,e[h]);return a};q(c,{has:function(e){return Aa+e in this},get:function(e){return this[Aa+e]},set:function(e,a){return this[Aa+e]=a},remove:function(e){return e=Aa+e,e in this&&delete this[e]},keys:function(){var e=[];return this.forEach(function(a){e.push(a)}),e},values:function(){var e=[];return this.forEach(function(a,c){e.push(c)}),e},entries:function(){var e=[];return this.forEach(function(a,c){e.push({key:a,
value:c})}),e},forEach:function(e){for(var a in this)a.charCodeAt(0)===Ue&&e.call(this,a.substring(1),this[a])}});var Aa="\x00",Ue=Aa.charCodeAt(0);m.nest=function(){function e(a,w,m){if(m>=g.length)return d?d.call(f,w):h?w.sort(h):w;for(var l,p,n,q,S=-1,y=w.length,z=g[m++],A=new c;++S<y;)(q=A.get(l=z(p=w[S])))?q.push(p):A.set(l,[p]);return a?(p=a(),n=function(c,h){p.set(c,e(a,h,m))}):(p={},n=function(c,h){p[c]=e(a,h,m)}),A.forEach(n),p}function a(e,c){if(c>=g.length)return e;var h=[],d=l[c++];return e.forEach(function(e,
d){h.push({key:e,values:a(d,c)})}),d?h.sort(function(e,a){return d(e.key,a.key)}):h}var h,d,f={},g=[],l=[];return f.map=function(a,c){return e(c,a,0)},f.entries=function(c){return a(e(m.map,c,0),0)},f.key=function(e){return g.push(e),f},f.sortKeys=function(e){return l[g.length-1]=e,f},f.sortValues=function(e){return h=e,f},f.rollup=function(e){return d=e,f},f};m.set=function(e){var c=new a;if(e)for(var h=0;h<e.length;h++)c.add(e[h]);return c};q(a,{has:function(e){return Aa+e in this},add:function(e){return this[Aa+
e]=!0,e},remove:function(e){return e=Aa+e,e in this&&delete this[e]},values:function(){var e=[];return this.forEach(function(a){e.push(a)}),e},forEach:function(e){for(var a in this)a.charCodeAt(0)===Ue&&e.call(this,a.substring(1))}});m.behavior={};m.rebind=function(e,a){for(var c,d=1,f=arguments.length;++d<f;)e[c=arguments[d]]=g(e,a,a[c]);return e};m.dispatch=function(){for(var e=new l,a=-1,c=arguments.length;++a<c;)e[arguments[a]]=f(e);return e};l.prototype.on=function(e,a){var c=e.indexOf("."),
d="";if(0<=c&&(d=e.substring(c+1),e=e.substring(0,c)),e)return 2>arguments.length?this[e].on(d):this[e].on(d,a);if(2===arguments.length){if(null==a)for(e in this)this.hasOwnProperty(e)&&this[e].on(d,null);return this}};m.event=null;m.mouse=function(e){return x(e,B())};var Qb=/WebKit/.test(aa.navigator.userAgent)?-1:0,ua=function(e){return Array.prototype.slice.call(e)};try{ua(ea.documentElement.childNodes)[0].nodeType}catch(rh){ua=u}var Rb=[].__proto__?function(e,a){e.__proto__=a}:function(e,a){for(var c in a)e[c]=
a[c]};m.touches=function(a,c){return 2>arguments.length&&(c=B().touches),c?ua(c).map(function(c){var d=x(a,c);return d.identifier=c.identifier,d}):[]};m.behavior.drag=function(){function a(){this.on("mousedown.drag",c).on("touchstart.drag",c)}function c(){function a(){var e=g.parentNode;return null!=n?m.touches(e).filter(function(a){return a.identifier===n})[0]:m.mouse(e)}function e(){w({type:"dragend"});D&&(p(),m.event.target===l&&P(u,"click"));u.on(null!=n?"touchmove.drag-"+n:"mousemove.drag",null).on(null!=
n?"touchend.drag-"+n:"mouseup.drag",null)}var f,g=this,w=h.of(g,arguments),l=m.event.target,n=m.event.touches?m.event.changedTouches[0].identifier:null,q=a(),D=0,u=m.select(aa).on(null!=n?"touchmove.drag-"+n:"mousemove.drag",function(){if(!g.parentNode)return e();var c=a(),h=c[0]-q[0],d=c[1]-q[1];D|=h|d;q=c;p();w({type:"drag",x:c[0]+f[0],y:c[1]+f[1],dx:h,dy:d})}).on(null!=n?"touchend.drag-"+n:"mouseup.drag",e,!0);d?(f=d.apply(g,arguments),f=[f.x-q[0],f.y-q[1]]):f=[0,0];null==n&&p();w({type:"dragstart"})}
var h=v(a,"drag","dragstart","dragend"),d=null;return a.origin=function(c){return arguments.length?(d=c,a):d},m.rebind(a,h,"on")};var ad=function(a,c){return c.querySelector(a)},bd=function(a,c){return c.querySelectorAll(a)},Qa=ea.documentElement,Og=Qa.matchesSelector||Qa.webkitMatchesSelector||Qa.mozMatchesSelector||Qa.msMatchesSelector||Qa.oMatchesSelector,fd=function(a,c){return Og.call(a,c)};"function"==typeof Sizzle&&(ad=function(a,c){return Sizzle(a,c)[0]||null},bd=function(a,c){return Sizzle.uniqueSort(Sizzle(a,
c))},fd=Sizzle.matchesSelector);var N=[];m.selection=function(){return cb};m.selection.prototype=N;N.select=function(a){var c,h,d,f,g=[];"function"!=typeof a&&(a=O(a));for(var m=-1,s=this.length;++m<s;){g.push(c=[]);c.parentNode=(d=this[m]).parentNode;for(var l=-1,p=d.length;++l<p;)(f=d[l])?(c.push(h=a.call(f,f.__data__,l)),h&&"__data__"in f&&(h.__data__=f.__data__)):c.push(null)}return I(g)};N.selectAll=function(a){var c,h,d=[];"function"!=typeof a&&(a=M(a));for(var f=-1,g=this.length;++f<g;)for(var m=
this[f],s=-1,l=m.length;++s<l;)(h=m[s])&&(d.push(c=ua(a.call(h,h.__data__,s))),c.parentNode=h);return I(d)};var Qc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};m.ns={prefix:Qc,qualify:function(a){var c=a.indexOf(":"),h=a;return 0<=c&&(h=a.substring(0,c),a=a.substring(c+1)),Qc.hasOwnProperty(h)?{space:Qc[h],local:a}:a}};N.attr=function(a,c){if(2>arguments.length){if("string"==
typeof a){var h=this.node();return a=m.ns.qualify(a),a.local?h.getAttributeNS(a.space,a.local):h.getAttribute(a)}for(c in a)this.each(Ta(c,a[c]));return this}return this.each(Ta(a,c))};m.requote=function(a){return a.replace(Pg,"\\$&")};var Pg=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;N.classed=function(a,c){if(2>arguments.length){if("string"==typeof a){var h=this.node(),d=(a=a.trim().split(/^|\s+/g)).length,f=-1;if(c=h.classList)for(;++f<d;){if(!c.contains(a[f]))return!1}else for(c=h.getAttribute("class");++f<
d;)if(!Zc(a[f]).test(c))return!1;return!0}for(c in a)this.each($c(c,a[c]));return this}return this.each($c(a,c))};N.style=function(a,c,h){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(c="");for(h in a)this.each(cd(h,a[h],c));return this}if(2>d)return aa.getComputedStyle(this.node(),null).getPropertyValue(a);h=""}return this.each(cd(a,c,h))};N.property=function(a,c){if(2>arguments.length){if("string"==typeof a)return this.node()[a];for(c in a)this.each(dd(c,a[c]));return this}return this.each(dd(a,
c))};N.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var c=a.apply(this,arguments);this.textContent=null==c?"":c}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent};N.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var c=a.apply(this,arguments);this.innerHTML=null==c?"":c}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML};N.append=function(a){function c(){return this.appendChild(ea.createElementNS(this.namespaceURI,
a))}function h(){return this.appendChild(ea.createElementNS(a.space,a.local))}return a=m.ns.qualify(a),this.select(a.local?h:c)};N.insert=function(a,c){function h(h,d){return this.insertBefore(ea.createElementNS(this.namespaceURI,a),c.call(this,h,d))}function d(h,f){return this.insertBefore(ea.createElementNS(a.space,a.local),c.call(this,h,f))}return a=m.ns.qualify(a),"function"!=typeof c&&(c=O(c)),this.select(a.local?d:h)};N.remove=function(){return this.each(function(){var a=this.parentNode;a&&
a.removeChild(this)})};N.data=function(a,d){function h(a,e){var h,f,g,r=a.length,t=e.length,m=Math.min(r,t),n=Array(t),J=Array(t),q=Array(r);if(d){var S=new c,u=new c,v=[];for(h=-1;++h<r;)m=d.call(f=a[h],f.__data__,h),S.has(m)?q[h]=f:S.set(m,f),v.push(m);for(h=-1;++h<t;)m=d.call(e,g=e[h],h),(f=S.get(m))?(n[h]=f,f.__data__=g):u.has(m)||(J[h]={__data__:g}),u.set(m,g),S.remove(m);for(h=-1;++h<r;)S.has(v[h])&&(q[h]=a[h])}else{for(h=-1;++h<m;)f=a[h],g=e[h],f?(f.__data__=g,n[h]=f):J[h]={__data__:g};for(;t>
h;++h)J[h]={__data__:e[h]};for(;r>h;++h)q[h]=a[h]}J.update=n;J.parentNode=n.parentNode=q.parentNode=a.parentNode;s.push(J);l.push(n);p.push(q)}var f,g,r=-1,m=this.length;if(!arguments.length){for(a=Array(m=(f=this[0]).length);++r<m;)(g=f[r])&&(a[r]=g.__data__);return a}var s=id([]),l=I([]),p=I([]);if("function"==typeof a)for(;++r<m;)h(f=this[r],a.call(f,f.parentNode.__data__,r));else for(;++r<m;)h(f=this[r],a);return l.enter=function(){return s},l.exit=function(){return p},l};N.datum=function(a){return arguments.length?
this.property("__data__",a):this.property("__data__")};N.filter=function(a){var c,h,d,f=[];"function"!=typeof a&&(a=ed(a));for(var g=0,m=this.length;m>g;g++){f.push(c=[]);c.parentNode=(h=this[g]).parentNode;for(var s=0,l=h.length;l>s;s++)(d=h[s])&&a.call(d,d.__data__,s)&&c.push(d)}return I(f)};N.order=function(){for(var a=-1,c=this.length;++a<c;)for(var h,d=this[a],f=d.length-1,g=d[f];0<=--f;)(h=d[f])&&(g&&g!==h.nextSibling&&g.parentNode.insertBefore(h,g),g=h);return this};N.sort=function(a){a=sf.apply(this,
arguments);for(var c=-1,h=this.length;++c<h;)this[c].sort(a);return this.order()};N.on=function(a,c,h){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(c=!1);for(h in a)this.each(gd(h,a[h],c));return this}if(2>d)return(d=this.node()["__on"+a])&&d._;h=!1}return this.each(gd(a,c,h))};var Sb=m.map({mouseenter:"mouseover",mouseleave:"mouseout"});Sb.forEach(function(a){"on"+a in ea&&Sb.remove(a)});N.each=function(a){return wa(this,function(c,h,d){a.call(c,c.__data__,h,d)})};N.call=function(a){var c=
ua(arguments);return a.apply(c[0]=this,c),this};N.empty=function(){return!this.node()};N.node=function(){for(var a=0,c=this.length;c>a;a++)for(var h=this[a],d=0,f=h.length;f>d;d++){var g=h[d];if(g)return g}return null};var Ba=[];m.selection.enter=id;m.selection.enter.prototype=Ba;Ba.append=N.append;Ba.insert=N.insert;Ba.empty=N.empty;Ba.node=N.node;Ba.select=function(a){for(var c,h,d,f,g,m=[],s=-1,l=this.length;++s<l;){d=(f=this[s]).update;m.push(c=[]);c.parentNode=f.parentNode;for(var p=-1,n=f.length;++p<
n;)(g=f[p])?(c.push(d[p]=h=a.call(f.parentNode,g.__data__,p)),h.__data__=g.__data__):c.push(null)}return I(m)};N.transition=function(){var a,c,h=db||++Ve,d=[],f=Object.create(Hb);f.time=Date.now();for(var g=-1,m=this.length;++g<m;){d.push(a=[]);for(var s=this[g],l=-1,p=s.length;++l<p;)(c=s[l])&&Cb(c,l,h,f),a.push(c)}return bb(d,h)};var cb=I([[ea]]);cb[0].parentNode=Qa;m.select=function(a){return"string"==typeof a?cb.select(a):I([[a]])};m.selectAll=function(a){return"string"==typeof a?cb.selectAll(a):
I([ua(a)])};m.behavior.zoom=function(){function a(){this.on("mousedown.zoom",l).on("mousemove.zoom",n).on(Qg+".zoom",s).on("dblclick.zoom",q).on("touchstart.zoom",la).on("touchmove.zoom",va).on("touchend.zoom",la)}function c(a){return[(a[0]-K[0])/R,(a[1]-K[1])/R]}function h(a){R=Math.max(B[0],Math.min(B[1],a))}function d(a,e){e=[e[0]*R+K[0],e[1]*R+K[1]];K[0]+=a[0]-e[0];K[1]+=a[1]-e[1]}function f(){y&&y.domain(E.range().map(function(a){return(a-K[0])/R}).map(E.invert));A&&A.domain(z.range().map(function(a){return(a-
K[1])/R}).map(z.invert))}function g(a){f();m.event.preventDefault();a({type:"zoom",scale:R,translate:K})}function l(){var a=this,e=ba.of(a,arguments),h=m.event.target,f=0,t=m.select(aa).on("mousemove.zoom",function(){f=1;d(m.mouse(a),s);g(e)}).on("mouseup.zoom",function(){f&&p();t.on("mousemove.zoom",null).on("mouseup.zoom",null);f&&m.event.target===h&&P(t,"click.zoom")}),s=c(m.mouse(a));aa.focus();p()}function s(){D||(D=c(m.mouse(this)));h(Math.pow(2,0.002*Ib())*R);d(m.mouse(this),D);g(ba.of(this,
arguments))}function n(){D=null}function q(){var a=m.mouse(this),e=c(a),f=Math.log(R)/Math.LN2;h(Math.pow(2,m.event.shiftKey?Math.ceil(f)-1:Math.floor(f)+1));d(a,e);g(ba.of(this,arguments))}function la(){var a=m.touches(this),e=Date.now();if(u=R,D={},a.forEach(function(a){D[a.identifier]=c(a)}),p(),1===a.length){if(500>e-F){var f=a[0],a=c(a[0]);h(2*R);d(f,a);g(ba.of(this,arguments))}F=e}}function va(){var a=m.touches(this),e=a[0],c=D[e.identifier];if(a=a[1]){var f=D[a.identifier],e=[(e[0]+a[0])/2,
(e[1]+a[1])/2],c=[(c[0]+f[0])/2,(c[1]+f[1])/2];h(m.event.scale*u)}d(e,c);F=null;g(ba.of(this,arguments))}var D,u,E,y,z,A,F,K=[0,0],R=1,B=We,ba=v(a,"zoom");return a.translate=function(c){return arguments.length?(K=c.map(Number),f(),a):K},a.scale=function(c){return arguments.length?(R=+c,f(),a):R},a.scaleExtent=function(c){return arguments.length?(B=null==c?We:c.map(Number),a):B},a.x=function(c){return arguments.length?(y=c,E=c.copy(),K=[0,0],R=1,a):y},a.y=function(c){return arguments.length?(A=c,z=
c.copy(),K=[0,0],R=1,a):A},m.rebind(a,ba,"on")};var Ib,We=[0,1/0],Qg="onwheel"in ea?(Ib=function(){return-m.event.deltaY*(m.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ea?(Ib=function(){return m.event.wheelDelta},"mousewheel"):(Ib=function(){return-m.event.detail},"MozMousePixelScroll");Ia.prototype.toString=function(){return this.rgb()+""};m.hsl=function(a,c,h){return 1===arguments.length?a instanceof Tb?Ja(a.h,a.s,a.l):Zb(""+a,od,Ja):Ja(+a,+c,+h)};var Rc=Tb.prototype=new Ia;Rc.brighter=function(a){return a=
Math.pow(0.7,arguments.length?a:1),Ja(this.h,this.s,this.l/a)};Rc.darker=function(a){return a=Math.pow(0.7,arguments.length?a:1),Ja(this.h,this.s,a*this.l)};Rc.rgb=function(){return eb(this.h,this.s,this.l)};var C=Math.PI,H=1E-6,G=C/180,T=180/C;m.hcl=function(a,c,h){var d;if(1===arguments.length)if(a instanceof fb)d=Ka(a.h,a.c,a.l);else if(a instanceof gb)d=Ka(Math.atan2(a.b,a.a)*T,Math.sqrt(a.a*a.a+a.b*a.b),a.l);else{d=(a=pd((a=m.rgb(a)).r,a.g,a.b)).l;var f=a.a,g=a.b;d=Ka(Math.atan2(g,f)*T,Math.sqrt(f*
f+g*g),d)}else d=Ka(+a,+c,+h);return d};var Sc=fb.prototype=new Ia;Sc.brighter=function(a){return Ka(this.h,this.c,Math.min(100,this.l+Jb*(arguments.length?a:1)))};Sc.darker=function(a){return Ka(this.h,this.c,Math.max(0,this.l-Jb*(arguments.length?a:1)))};Sc.rgb=function(){return Ub(this.h,this.c,this.l).rgb()};m.lab=function(a,c,h){return 1===arguments.length?a instanceof gb?La(a.l,a.a,a.b):a instanceof fb?Ub(a.l,a.c,a.h):pd((a=m.rgb(a)).r,a.g,a.b):La(+a,+c,+h)};var Jb=18,ld=0.95047,md=1,nd=1.08883,
Tc=gb.prototype=new Ia;Tc.brighter=function(a){return La(Math.min(100,this.l+Jb*(arguments.length?a:1)),this.a,this.b)};Tc.darker=function(a){return La(Math.max(0,this.l-Jb*(arguments.length?a:1)),this.a,this.b)};Tc.rgb=function(){return kd(this.l,this.a,this.b)};m.rgb=function(a,c,h){return 1===arguments.length?a instanceof Yb?pa(a.r,a.g,a.b):Zb(""+a,pa,eb):pa(~~a,~~c,~~h)};var Kb=Yb.prototype=new Ia;Kb.brighter=function(a){a=Math.pow(0.7,arguments.length?a:1);var c=this.r,h=this.g,d=this.b;return c||
h||d?(c&&30>c&&(c=30),h&&30>h&&(h=30),d&&30>d&&(d=30),pa(Math.min(255,Math.floor(c/a)),Math.min(255,Math.floor(h/a)),Math.min(255,Math.floor(d/a)))):pa(30,30,30)};Kb.darker=function(a){return a=Math.pow(0.7,arguments.length?a:1),pa(Math.floor(a*this.r),Math.floor(a*this.g),Math.floor(a*this.b))};Kb.hsl=function(){return od(this.r,this.g,this.b)};Kb.toString=function(){return"#"+Ma(this.r)+Ma(this.g)+Ma(this.b)};var hb=m.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",
azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",
darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",
greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",
lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",
olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",
slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});hb.forEach(function(a,c){hb.set(a,Zb(c,pa,eb))});m.functor=Q;m.xhr=function(a,c,h){function d(){var a=p.status;!a&&p.responseText||200<=a&&300>a||304===a?g.load.call(f,s.call(f,p)):g.error.call(f,p)}var f={},g=
m.dispatch("progress","load","error"),l={},s=ga,p=new (aa.XDomainRequest&&/^(http(s)?:)?\/\//.test(a)?XDomainRequest:XMLHttpRequest);return"onload"in p?p.onload=p.onerror=d:p.onreadystatechange=function(){3<p.readyState&&d()},p.onprogress=function(a){var e=m.event;m.event=a;try{g.progress.call(f,p)}finally{m.event=e}},f.header=function(a,e){return a=(a+"").toLowerCase(),2>arguments.length?l[a]:(null==e?delete l[a]:l[a]=e+"",f)},f.mimeType=function(a){return arguments.length?(c=null==a?null:a+"",f):
c},f.response=function(a){return s=a,f},["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,[a].concat(ua(arguments)))}}),f.send=function(h,d,g){if(2===arguments.length&&"function"==typeof d&&(g=d,d=null),p.open(h,a,!0),null==c||"accept"in l||(l.accept=c+",*/*"),p.setRequestHeader)for(var r in l)p.setRequestHeader(r,l[r]);return null!=c&&p.overrideMimeType&&p.overrideMimeType(c),null!=g&&f.on("error",g).on("load",function(a){g(null,a)}),p.send(null==d?null:d),f},f.abort=function(){return p.abort(),
f},m.rebind(f,g,"on"),2===arguments.length&&"function"==typeof c&&(h=c,c=null),null==h?f:f.get(uf(h))};m.csv=qd(",","text/csv");m.tsv=qd("\t","text/tab-separated-values");var jb,ib,Rg=0,cc={},Oa=null;m.timer=function(a,c,h){if(3>arguments.length){if(2>arguments.length)c=0;else if(!isFinite(c))return;h=Date.now()}var d=cc[a.id];d&&d.callback===a?(d.then=h,d.delay=c):cc[a.id=++Rg]=Oa={callback:a,then:h,delay:c,next:Oa};jb||(ib=clearTimeout(ib),jb=1,sd(bc))};m.timer.flush=function(){for(var a,c=Date.now(),
h=Oa;h;)a=c-h.then,h.delay||(h.flush=h.callback(a)),h=h.next;rd()};var sd=aa.requestAnimationFrame||aa.webkitRequestAnimationFrame||aa.mozRequestAnimationFrame||aa.oRequestAnimationFrame||aa.msRequestAnimationFrame||function(a){setTimeout(a,17)},Lb=[3,3],Sg="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,c){var h=Math.pow(10,3*Math.abs(8-c));return{scale:8<c?function(a){return a/h}:function(a){return a*h},symbol:a}});m.formatPrefix=function(a,c){var h=0;return a&&(0>a&&(a*=-1),c&&
(a=m.round(a,dc(a,c))),h=1+Math.floor(1E-12+Math.log(a)/Math.LN10),h=Math.max(-24,Math.min(24,3*Math.floor((0>=h?h+1:h-1)/3)))),Sg[8+h/3]};m.round=function(a,c){return c?Math.round(a*(c=Math.pow(10,c)))/c:Math.round(a)};m.format=function(a){a=we.exec(a);var c=a[1]||" ",h=a[2]||">",d=a[3]||"",f=a[4]||"",g=a[5],l=+a[6],s=a[7],p=a[8],n=a[9],q=1,u="",D=!1;switch(p&&(p=+p.substring(1)),(g||"0"===c&&"="===h)&&(g=c="0",h="=",s&&(l-=Math.floor((l-1)/4))),n){case "n":s=!0;n="g";break;case "%":q=100;u="%";
n="f";break;case "p":q=100;u="%";n="r";break;case "b":case "o":case "x":case "X":f&&(f="0"+n.toLowerCase());case "c":case "d":D=!0;p=0;break;case "s":q=-1,n="r"}"#"===f&&(f="");"r"!=n||p||(n="g");null!=p&&("g"==n?p=Math.max(1,Math.min(21,p)):("e"==n||"f"==n)&&(p=Math.max(0,Math.min(20,p))));var n=Tg.get(n)||vf,v=g&&s;return function(a){if(D&&a%1)return"";var e=0>a||0===a&&0>1/a?(a=-a,"-"):d;if(0>q){var z=m.formatPrefix(a,p);a=z.scale(a);u=z.symbol}else a*=q;a=n(a,p);!g&&s&&(a=Uc(a));var z=f.length+
a.length+(v?0:e.length),A=l>z?Array(z=l-z+1).join(c):"";return v&&(a=Uc(A+a)),a.replace(".","."),e+=f,("<"===h?e+a+A:">"===h?A+e+a:"^"===h?A.substring(0,z>>=1)+e+a+A.substring(z):e+(v?a:A+a))+u}};var we=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Tg=m.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,
c){return a.toPrecision(c)},e:function(a,c){return a.toExponential(c)},f:function(a,c){return a.toFixed(c)},r:function(a,c){return(a=m.round(a,dc(a,c))).toFixed(Math.max(0,Math.min(20,dc(a*(1+1E-15),c))))}}),Uc=ga;if(Lb)var Ug=Lb.length,Uc=function(a){for(var c=a.lastIndexOf("."),h=0<=c?"."+a.substring(c+1):(c=a.length,""),d=[],f=0,g=Lb[0];0<c&&0<g;)d.push(a.substring(c-=g,c+g)),g=Lb[f=(f+1)%Ug];return d.reverse().join(",")+h};m.geo={};m.geo.stream=function(a,c){a&&Xe.hasOwnProperty(a.type)?Xe[a.type](a,
c):kb(a,c)};var Xe={Feature:function(a,c){kb(a.geometry,c)},FeatureCollection:function(a,c){for(var h=a.features,d=-1,f=h.length;++d<f;)kb(h[d].geometry,c)}},td={Sphere:function(a,c){c.sphere()},Point:function(a,c){var h=a.coordinates;c.point(h[0],h[1])},MultiPoint:function(a,c){for(var h,d=a.coordinates,f=-1,g=d.length;++f<g;)h=d[f],c.point(h[0],h[1])},LineString:function(a,c){ec(a.coordinates,c,0)},MultiLineString:function(a,c){for(var d=a.coordinates,f=-1,g=d.length;++f<g;)ec(d[f],c,0)},Polygon:function(a,
c){ud(a.coordinates,c)},MultiPolygon:function(a,c){for(var d=a.coordinates,f=-1,g=d.length;++f<g;)ud(d[f],c)},GeometryCollection:function(a,c){for(var d=a.geometries,f=-1,g=d.length;++f<g;)kb(d[f],c)}};m.geo.area=function(a){return Ra=0,m.geo.stream(a,xa),Ra};var Ra,lb,mb,xa={sphere:function(){Ra+=4*C},point:X,lineStart:X,lineEnd:X,polygonStart:function(){lb=1;mb=0;xa.lineStart=wf},polygonEnd:function(){var a=2*Math.atan2(mb,lb);Ra+=0>a?4*C+a:a;xa.lineStart=xa.lineEnd=xa.point=X}};m.geo.bounds=vd(ga);
m.geo.centroid=function(a){Z=ia=V=W=U=0;m.geo.stream(a,ja);var c;return ia&&Math.abs(c=Math.sqrt(V*V+W*W+U*U))>H?[Math.atan2(W,V)*T,Math.asin(Math.max(-1,Math.min(1,U/c)))*T]:void 0};var Z,ia,V,W,U,ja={sphere:function(){2>Z&&(Z=2,ia=V=W=U=0)},point:wd,lineStart:fc,lineEnd:gc,polygonStart:function(){2>Z&&(Z=2,ia=V=W=U=0);ja.lineStart=xf},polygonEnd:function(){ja.lineStart=fc}},Fd=Ad(Ua,function(a){var c,d=0/0,f=0/0,g=0/0;return{lineStart:function(){a.lineStart();c=1},point:function(r,m){var s=0<r?
C:-C,l=Math.abs(r-d);if(Math.abs(l-C)<H)a.point(d,f=0<(f+m)/2?C/2:-C/2),a.point(g,f),a.lineEnd(),a.lineStart(),a.point(s,f),a.point(r,f),c=0;else if(g!==s&&l>=C){Math.abs(d-g)<H&&(d-=g*H);Math.abs(r-s)<H&&(r-=s*H);var l=d,p=f,n=r,q,D,u=Math.sin(l-n);f=Math.abs(u)>H?Math.atan((Math.sin(p)*(D=Math.cos(m))*Math.sin(n)-Math.sin(m)*(q=Math.cos(p))*Math.sin(l))/(q*D*u)):(p+m)/2;a.point(g,f);a.lineEnd();a.lineStart();a.point(s,f);c=0}a.point(d=r,f=m);g=s},lineEnd:function(){a.lineEnd();d=f=0/0},clean:function(){return 2-
c}}},function(a,c,d,f){null==a?(d=d*C/2,f.point(-C,d),f.point(0,d),f.point(C,d),f.point(C,0),f.point(C,-d),f.point(0,-d),f.point(-C,-d),f.point(-C,0),f.point(-C,d)):Math.abs(a[0]-c[0])>H?(a=(a[0]<c[0]?1:-1)*C,d=d*a/2,f.point(-a,d),f.point(0,d),f.point(a,d)):f.point(c[0],c[1])}),rb=1E9;m.geo.projection=ya;m.geo.projectionMutator=kc;(m.geo.equirectangular=function(){return ya(Wa)}).raw=Wa.invert=Wa;m.geo.rotation=function(a){function c(d){return d=a(d[0]*G,d[1]*G),d[0]*=T,d[1]*=T,d}return a=lc(a[0]%
360*G,a[1]*G,2<a.length?a[2]*G:0),c.invert=function(c){return c=a.invert(c[0]*G,c[1]*G),c[0]*=T,c[1]*=T,c},c};m.geo.circle=function(){function a(){var e="function"==typeof f?f.apply(this,arguments):f,c=lc(-e[0]*G,-e[1]*G,0).invert,g=[];return d(null,null,1,{point:function(a,e){g.push(a=c(a,e));a[0]*=T;a[1]*=T}}),{type:"Polygon",coordinates:[g]}}var c,d,f=[0,0],g=6;return a.origin=function(c){return arguments.length?(f=c,a):f},a.angle=function(f){return arguments.length?(d=jc((c=+f)*G,g*G),a):c},a.precision=
function(f){return arguments.length?(d=jc(c*G,(g=+f)*G),a):g},a.angle(90)};m.geo.distance=function(a,c){var d,f=(c[0]-a[0])*G,g=a[1]*G,r=c[1]*G,m=Math.sin(f),f=Math.cos(f),s=Math.sin(g),g=Math.cos(g),l=Math.sin(r),r=Math.cos(r);return Math.atan2(Math.sqrt((d=r*m)*d+(d=g*l-s*r*f)*d),s*l+g*r*f)};m.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:c()}}function c(){return m.range(Math.ceil(r/z)*z,g,z).map(D).concat(m.range(Math.ceil(n/A)*A,p,A).map(v)).concat(m.range(Math.ceil(f/
E)*E,d,E).filter(function(a){return Math.abs(a%z)>H}).map(q)).concat(m.range(Math.ceil(s/y)*y,l,y).filter(function(a){return Math.abs(a%A)>H}).map(u))}var d,f,g,r,l,s,p,n,q,u,D,v,E=10,y=E,z=90,A=360,F=2.5;return a.lines=function(){return c().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[D(r).concat(v(p).slice(1),D(g).reverse().slice(1),v(n).reverse().slice(1))]}},a.extent=function(c){return arguments.length?a.majorExtent(c).minorExtent(c):
a.minorExtent()},a.majorExtent=function(c){return arguments.length?(r=+c[0][0],g=+c[1][0],n=+c[0][1],p=+c[1][1],r>g&&(c=r,r=g,g=c),n>p&&(c=n,n=p,p=c),a.precision(F)):[[r,n],[g,p]]},a.minorExtent=function(c){return arguments.length?(f=+c[0][0],d=+c[1][0],s=+c[0][1],l=+c[1][1],f>d&&(c=f,f=d,d=c),s>l&&(c=s,s=l,l=c),a.precision(F)):[[f,s],[d,l]]},a.step=function(c){return arguments.length?a.majorStep(c).minorStep(c):a.minorStep()},a.majorStep=function(c){return arguments.length?(z=+c[0],A=+c[1],a):[z,
A]},a.minorStep=function(c){return arguments.length?(E=+c[0],y=+c[1],a):[E,y]},a.precision=function(c){return arguments.length?(F=+c,q=Kd(s,l,90),u=Ld(f,d,F),D=Kd(n,p,90),v=Ld(r,g,F),a):F},a.majorExtent([[-180,-90+H],[180,90-H]]).minorExtent([[-180,-80-H],[180,80+H]])};m.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[c||f.apply(this,arguments),d||g.apply(this,arguments)]}}var c,d,f=mc,g=nc;return a.distance=function(){return m.geo.distance(c||f.apply(this,arguments),d||
g.apply(this,arguments))},a.source=function(d){return arguments.length?(f=d,c="function"==typeof d?null:d,a):f},a.target=function(c){return arguments.length?(g=c,d="function"==typeof c?null:c,a):g},a.precision=function(){return arguments.length?a:0},a};m.geo.interpolate=function(a,c){return Df(a[0]*G,a[1]*G,c[0]*G,c[1]*G)};m.geo.length=function(a){return Mb=0,m.geo.stream(a,Sa),Mb};var Mb,Sa={sphere:X,point:X,lineStart:function(){function a(e,g){var m=Math.sin(g*=G),s=Math.cos(g),l=Math.abs((e*=G)-
c),p=Math.cos(l);Mb+=Math.atan2(Math.sqrt((l=s*Math.sin(l))*l+(l=f*m-d*s*p)*l),d*m+f*s*p);c=e;d=m;f=s}var c,d,f;Sa.point=function(g,r){c=g*G;d=Math.sin(r*=G);f=Math.cos(r);Sa.point=a};Sa.lineEnd=function(){Sa.point=Sa.lineEnd=X}},lineEnd:X,polygonStart:X,polygonEnd:X};(m.geo.conicEqualArea=function(){return oc(Md)}).raw=Md;m.geo.albersUsa=function(){function a(e){var c=e[0],d=e[1];return(50<d?r:-140>c?l:21>d?s:g)(e)}var c,d,f,g=m.geo.conicEqualArea().rotate([98,0]).center([0,38]).parallels([29.5,
45.5]),r=m.geo.conicEqualArea().rotate([160,0]).center([0,60]).parallels([55,65]),l=m.geo.conicEqualArea().rotate([160,0]).center([0,20]).parallels([8,18]),s=m.geo.conicEqualArea().rotate([60,0]).center([0,10]).parallels([8,18]);return a.invert=function(a){return c(a)||d(a)||f(a)||g.invert(a)},a.scale=function(c){return arguments.length?(g.scale(c),r.scale(0.6*c),l.scale(c),s.scale(1.5*c),a.translate(g.translate())):g.scale()},a.translate=function(m){if(!arguments.length)return g.translate();var p=
g.scale(),n=m[0],q=m[1];return g.translate(m),r.translate([n-0.4*p,q+0.17*p]),l.translate([n-0.19*p,q+0.2*p]),s.translate([n+0.58*p,q+0.43*p]),c=pc(r,[[-180,50],[-130,72]]),d=pc(l,[[-164,18],[-154,24]]),f=pc(s,[[-67.5,17.5],[-65,19]]),a},a.scale(1E3)};var Nb,tb,za={point:X,lineStart:X,lineEnd:X,polygonStart:function(){tb=0;za.lineStart=Ef},polygonEnd:function(){za.lineStart=za.lineEnd=za.point=X;Nb+=Math.abs(tb/2)}},ka={point:qc,lineStart:Od,lineEnd:Pd,polygonStart:function(){ka.lineStart=Gf},polygonEnd:function(){ka.point=
qc;ka.lineStart=Od;ka.lineEnd=Pd}};m.geo.path=function(){function a(e){return e&&m.geo.stream(e,f(g.pointRadius("function"==typeof r?+r.apply(this,arguments):r))),g.result()}var c,d,f,g,r=4.5;return a.area=function(a){return Nb=0,m.geo.stream(a,f(za)),Nb},a.centroid=function(a){return Z=V=W=U=0,m.geo.stream(a,f(ka)),U?[V/U,W/U]:void 0},a.bounds=function(a){return vd(f)(a)},a.projection=function(d){return arguments.length?(f=(c=d)?d.stream||If(d):ga,a):c},a.context=function(c){return arguments.length?
(g=null==(d=c)?new Ff:new Hf(c),a):d},a.pointRadius=function(c){return arguments.length?(r="function"==typeof c?c:+c,a):r},a.projection(m.geo.albersUsa()).context(null)};m.geo.albers=function(){return m.geo.conicEqualArea().parallels([29.5,45.5]).rotate([98,0]).center([0,38]).scale(1E3)};var Ye=Xa(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(m.geo.azimuthalEqualArea=function(){return ya(Ye)}).raw=Ye;var Ze=Xa(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},ga);
(m.geo.azimuthalEquidistant=function(){return ya(Ze)}).raw=Ze;(m.geo.conicConformal=function(){return oc(Qd)}).raw=Qd;(m.geo.conicEquidistant=function(){return oc(Rd)}).raw=Rd;var $e=Xa(function(a){return 1/a},Math.atan);(m.geo.gnomonic=function(){return ya($e)}).raw=$e;ub.invert=function(a,c){return[a,2*Math.atan(Math.exp(c))-C/2]};(m.geo.mercator=function(){return Sd(ub)}).raw=ub;var af=Xa(function(){return 1},Math.asin);(m.geo.orthographic=function(){return ya(af)}).raw=af;var bf=Xa(function(a){return 1/
(1+a)},function(a){return 2*Math.atan(a)});(m.geo.stereographic=function(){return ya(bf)}).raw=bf;rc.invert=function(a,c){var d=Math.atan2((Math.exp(a)-Math.exp(-a))/2,Math.cos(c)),f;f=Math.sin(c)/((Math.exp(a)+Math.exp(-a))/2);f=1<f?C/2:-1>f?-C/2:Math.asin(f);return[d,f]};(m.geo.transverseMercator=function(){return Sd(rc)}).raw=rc;m.geom={};m.svg={};m.svg.line=function(){return Td(ga)};var sc=m.map({linear:ha,"linear-closed":function(a){return ha(a)+"Z"},"step-before":tc,"step-after":uc,basis:Ud,
"basis-open":function(a){if(4>a.length)return ha(a);for(var c,d=[],f=-1,g=a.length,r=[0],m=[0];3>++f;)c=a[f],r.push(c[0]),m.push(c[1]);d.push(oa(Pa,r)+","+oa(Pa,m));for(--f;++f<g;)c=a[f],r.shift(),r.push(c[0]),m.shift(),m.push(c[1]),Ya(d,r,m);return d.join("")},"basis-closed":function(a){for(var c,d,f=-1,g=a.length,r=g+4,m=[],s=[];4>++f;)d=a[f%g],m.push(d[0]),s.push(d[1]);c=[oa(Pa,m),",",oa(Pa,s)];for(--f;++f<r;)d=a[f%g],m.shift(),m.push(d[0]),s.shift(),s.push(d[1]),Ya(c,m,s);return c.join("")},bundle:function(a,
c){var d=a.length-1;if(d)for(var f,g,r=a[0][0],m=a[0][1],s=a[d][0]-r,l=a[d][1]-m,p=-1;++p<=d;)f=a[p],g=p/d,f[0]=c*f[0]+(1-c)*(r+g*s),f[1]=c*f[1]+(1-c)*(m+g*l);return Ud(a)},cardinal:function(a,c){return 3>a.length?ha(a):a[0]+vb(a,vc(a,c))},"cardinal-open":function(a,c){return 4>a.length?ha(a):a[1]+vb(a.slice(1,a.length-1),vc(a,c))},"cardinal-closed":function(a,c){return 3>a.length?ha(a):a[0]+vb((a.push(a[0]),a),vc([a[a.length-2]].concat(a,[a[1]]),c))},monotone:function(a){if(3>a.length)a=ha(a);else{var c=
a[0],d,f,g,r,m=[],s;d=0;s=a.length-1;for(var l=[],p=a[1],n=l[0]=wc(a[0],p);++d<s;)l[d]=(n+(n=wc(p,p=a[d+1])))/2;s=(l[d]=n,l);l=-1;for(p=a.length-1;++l<p;)d=wc(a[l],a[l+1]),1E-6>Math.abs(d)?s[l]=s[l+1]=0:(f=s[l]/d,g=s[l+1]/d,r=f*f+g*g,9<r&&(r=3*d/Math.sqrt(r),s[l]=r*f,s[l+1]=r*g));for(l=-1;++l<=p;)r=(a[Math.min(p,l+1)][0]-a[Math.max(0,l-1)][0])/(6*(1+s[l]*s[l])),m.push([r||0,s[l]*r||0]);a=c+vb(a,m)}return a}});sc.forEach(function(a,c){c.key=a;c.closed=/-closed$/.test(a)});var Vd=[0,2/3,1/3,0],Wd=[0,
1/3,2/3,0],Pa=[0,1/6,2/3,1/6];m.geom.hull=function(a){function c(a){if(3>a.length)return[];var e,g,s,l,m,p,w,n,q,E;n=Q(d);q=Q(f);E=a.length;var u=E-1,z=[],A=[],F=0;if(n===na&&f===qa)e=a;else for(s=0,e=[];E>s;++s)e.push([+n.call(this,g=a[s],s),+q.call(this,g,s)]);for(s=1;E>s;++s)e[s][1]<e[F][1]?F=s:e[s][1]==e[F][1]&&(F=e[s][0]<e[F][0]?s:F);for(s=0;E>s;++s)s!==F&&(m=e[s][1]-e[F][1],l=e[s][0]-e[F][0],z.push({angle:Math.atan2(m,l),index:s}));z.sort(function(a,e){return a.angle-e.angle});E=z[0].angle;
q=z[0].index;n=0;for(s=1;u>s;++s)g=z[s].index,E==z[s].angle?(l=e[q][0]-e[F][0],m=e[q][1]-e[F][1],p=e[g][0]-e[F][0],w=e[g][1]-e[F][1],l*l+m*m>=p*p+w*w?z[s].index=-1:(z[n].index=-1,E=z[s].angle,n=s,q=g)):(E=z[s].angle,n=s,q=g);A.push(F);for(g=s=0;2>s;++g)-1!==z[g].index&&(A.push(z[g].index),s++);for(l=A.length;u>g;++g)if(-1!==z[g].index){for(;!Jf(A[l-2],A[l-1],z[g].index,e);)--l;A[l++]=z[g].index}e=[];for(s=0;l>s;++s)e.push(a[A[s]]);return e}var d=na,f=qa;return arguments.length?c(a):(c.x=function(a){return arguments.length?
(d=a,c):d},c.y=function(a){return arguments.length?(f=a,c):f},c)};m.geom.polygon=function(a){return a.area=function(){for(var c=0,d=a.length,f=a[d-1][1]*a[0][0]-a[d-1][0]*a[0][1];++c<d;)f+=a[c-1][1]*a[c][0]-a[c-1][0]*a[c][1];return 0.5*f},a.centroid=function(c){var d,f,g=-1,r=a.length,l=0,s=0,m=a[r-1];for(arguments.length||(c=-1/(6*a.area()));++g<r;)d=m,m=a[g],f=d[0]*m[1]-m[0]*d[1],l+=(d[0]+m[0])*f,s+=(d[1]+m[1])*f;return[l*c,s*c]},a.clip=function(c){for(var d,f,g,r,l,s,m=-1,p=a.length,n=a[p-1];++m<
p;){d=c.slice();c.length=0;r=a[m];l=d[(g=d.length)-1];for(f=-1;++f<g;)s=d[f],xc(s,n,r)?(xc(l,n,r)||c.push(Xd(l,s,n,r)),c.push(s)):xc(l,n,r)&&c.push(Xd(l,s,n,r)),l=s;n=r}return c},a};m.geom.delaunay=function(a){var c=a.map(function(){return[]}),d=[];return yc(a,function(d){c[d.region.l.index].push(a[d.region.r.index])}),c.forEach(function(c,f){var g=a[f],l=g[0],s=g[1];c.forEach(function(a){a.angle=Math.atan2(a[0]-l,a[1]-s)});c.sort(function(a,e){return a.angle-e.angle});for(var m=0,p=c.length-1;p>
m;m++)d.push([g,c[m],c[m+1]])}),d};m.geom.voronoi=function(a){function c(a){var e,f,l,p=a.map(function(){return[]}),n=Q(g),w=Q(r),q=a.length;if(n===na&&w===qa)e=a;else for(e=[],l=0;q>l;++l)e.push([+n.call(this,f=a[l],l),+w.call(this,f,l)]);if(yc(e,function(a){var e,c,d,h,f,g;1===a.a&&0<=a.b?(e=a.ep.r,c=a.ep.l):(e=a.ep.l,c=a.ep.r);1===a.a?(f=e?e.y:-1E6,d=a.c-a.b*f,g=c?c.y:1E6,h=a.c-a.b*g):(d=e?e.x:-1E6,f=a.c-a.a*d,h=c?c.x:1E6,g=a.c-a.a*h);e=[d,f];h=[h,g];p[a.region.l.index].push(e,h);p[a.region.r.index].push(e,
h)}),p=p.map(function(a,c){var d=e[c][0],h=e[c][1],f=a.map(function(a){return Math.atan2(a[0]-d,a[1]-h)}),g=m.range(a.length).sort(function(a,e){return f[a]-f[e]});return g.filter(function(a,e){return!e||f[a]-f[g[e-1]]>H}).map(function(e){return a[e]})}),p.forEach(function(a,c){var d=a.length;if(!d)return a.push([-1E6,-1E6],[-1E6,1E6],[1E6,1E6],[1E6,-1E6]);if(!(2<d)){var h=e[c],f=a[0],g=a[1],d=h[0],h=h[1],l=f[0],f=f[1],r=g[0],m=g[1],p=Math.abs(r-l),g=m-f;Math.abs(g)<H?(d=f>h?-1E6:1E6,a.push([-1E6,
d],[1E6,d])):H>p?(d=l>d?-1E6:1E6,a.push([d,-1E6],[d,1E6])):(d=(l-d)*(m-f)>(r-l)*(f-h)?1E6:-1E6,h=Math.abs(g)-p,Math.abs(h)<H?a.push([0>g?d:-d,d]):(0<h&&(d*=-1),a.push([-1E6,d],[1E6,d])))}}),d)for(l=0;q>l;++l)d(p[l]);for(l=0;q>l;++l)p[l].point=a[l];return p}var d,f=null,g=na,r=qa;return arguments.length?c(a):(c.x=function(a){return arguments.length?(g=a,c):g},c.y=function(a){return arguments.length?(r=a,c):r},c.size=function(a){return arguments.length?(null==a?d=null:(f=[+a[0],+a[1]],d=m.geom.polygon([[0,
0],[0,f[1]],f,[f[0],0]]).clip),c):f},c.links=function(a){var e,c,d,h=a.map(function(){return[]}),f=[],l=Q(g),m=Q(r),p=a.length;if(l===na&&m===qa)e=a;else for(d=0;p>d;++d)e.push([+l.call(this,c=a[d],d),+m.call(this,c,d)]);return yc(e,function(e){var c=e.region.l.index;e=e.region.r.index;h[c][e]||(h[c][e]=h[e][c]=!0,f.push({source:a[c],target:a[e]}))}),f},c.triangles=function(a){if(g===na&&r===qa)return m.geom.delaunay(a);var e,c,d,h,f,l=Q(g),p=Q(r);h=0;e=[];for(f=a.length;f>h;++h)c=[+l.call(this,d=
a[h],h),+p.call(this,d,h)],c.data=d,e.push(c);return m.geom.delaunay(e).map(function(a){return a.map(function(a){return a.data})})},c)};var zc={l:"r",r:"l"};m.geom.quadtree=function(a,c,d,f,g){function l(a){function e(a,c,d,h,f,g,l,m){if(!isNaN(d)&&!isNaN(h))if(a.leaf){var s=a.x,p=a.y;if(null!=s){if(!(0.01>Math.abs(s-d)+Math.abs(p-h))){var t=a.point;a.x=a.y=a.point=null;r(a,t,s,p,f,g,l,m)}r(a,c,d,h,f,g,l,m)}else a.x=d,a.y=h,a.point=c}else r(a,c,d,h,f,g,l,m)}function r(a,c,d,h,f,g,l,m){var s=0.5*(f+
l),p=0.5*(g+m),t=d>=s,n=h>=p,w=(n<<1)+t;a.leaf=!1;a=a.nodes[w]||(a.nodes[w]=Yd());t?f=s:l=s;n?g=p:m=p;e(a,c,d,h,f,g,l,m)}var n,q,u,y,z,A,F,K,v,B=Q(s),x=Q(p);if(null!=c)A=c,F=d,K=f,v=g;else if(K=v=-(A=F=1/0),q=[],u=[],z=a.length,m)for(y=0;z>y;++y)n=a[y],n.x<A&&(A=n.x),n.y<F&&(F=n.y),n.x>K&&(K=n.x),n.y>v&&(v=n.y),q.push(n.x),u.push(n.y);else for(y=0;z>y;++y){var C=+B(n=a[y],y);n=+x(n,y);A>C&&(A=C);F>n&&(F=n);C>K&&(K=C);n>v&&(v=n);q.push(C);u.push(n)}C=K-A;n=v-F;C>n?v=F+C:K=A+n;var P=Yd();if(P.add=function(a){e(P,
a,+B(a,++y),+x(a,y),A,F,K,v)},P.visit=function(a){Za(a,P,A,F,K,v)},y=-1,null==c){for(;++y<z;)e(P,a[y],q[y],u[y],A,F,K,v);--y}else a.forEach(P.add);return q=u=a=n=null,P}var m,s=na,p=qa;return(m=arguments.length)?(s=Kf,p=Lf,3===m&&(g=d,f=c,d=c=0),l(a)):(l.x=function(a){return arguments.length?(s=a,l):s},l.y=function(a){return arguments.length?(p=a,l):p},l.size=function(a){return arguments.length?(null==a?c=d=f=g=null:(c=d=0,f=+a[0],g=+a[1]),l):null==c?null:[f,g]},l)};m.interpolateRgb=Ac;m.transform=
function(a){var c=ea.createElementNS(m.ns.prefix.svg,"g");return(m.transform=function(a){c.setAttribute("transform",a);a=c.transform.baseVal.consolidate();return new Zd(a?a.matrix:Vg)})(a)};Zd.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Vg={a:1,b:0,c:0,d:1,e:0,f:0};m.interpolateNumber=ra;m.interpolateTransform=wb;m.interpolateObject=ae;m.interpolateString=be;var xb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;
m.interpolate=Ca;m.interpolators=[function(a,c){var d=typeof c;return("string"===d||d!==typeof a?hb.has(c)||/^(#|rgb\(|hsl\()/.test(c)?Ac:be:c instanceof Ia?Ac:"object"===d?Array.isArray(c)?ce:ae:ra)(a,c)}];m.interpolateArray=ce;var cf=function(){return ga},Wg=m.map({linear:cf,poly:function(a){return function(c){return Math.pow(c,a)}},quad:function(){return Nf},cubic:function(){return Of},sin:function(){return Pf},exp:function(){return Qf},circle:function(){return Rf},elastic:function(a,c){var d;
return 2>arguments.length&&(c=0.45),arguments.length?d=c/(2*C)*Math.asin(1/a):(a=1,d=c/4),function(f){return 1+a*Math.pow(2,10*-f)*Math.sin(2*(f-d)*C/c)}},back:function(a){return a||(a=1.70158),function(c){return c*c*((a+1)*c-a)}},bounce:function(){return Sf}}),Xg=m.map({"in":ga,out:de,"in-out":ee,"out-in":function(a){return ee(de(a))}});m.ease=function(a){var c=a.indexOf("-"),d=0<=c?a.substring(0,c):a,c=0<=c?a.substring(c+1):"in";return d=Wg.get(d)||cf,c=Xg.get(c)||ga,Mf(c(d.apply(null,Array.prototype.slice.call(arguments,
1))))};m.interpolateHcl=function(a,c){a=m.hcl(a);c=m.hcl(c);var d=a.h,f=a.c,g=a.l,l=c.h-d,p=c.c-f,s=c.l-g;return 180<l?l-=360:-180>l&&(l+=360),function(a){return Ub(d+l*a,f+p*a,g+s*a)+""}};m.interpolateHsl=function(a,c){a=m.hsl(a);c=m.hsl(c);var d=a.h,f=a.s,g=a.l,l=c.h-d,p=c.s-f,s=c.l-g;return 180<l?l-=360:-180>l&&(l+=360),function(a){return eb(d+l*a,f+p*a,g+s*a)+""}};m.interpolateLab=function(a,c){a=m.lab(a);c=m.lab(c);var d=a.l,f=a.a,g=a.b,l=c.l-d,p=c.a-f,s=c.b-g;return function(a){return kd(d+
l*a,f+p*a,g+s*a)+""}};m.interpolateRound=fe;m.layout={};m.layout.bundle=function(){return function(a){for(var c=[],d=-1,f=a.length;++d<f;)c.push(Vf(a[d]));return c}};m.layout.chord=function(){function a(){var e,q,v,E,y,z={},A=[],F=m.range(l),K=[];d=[];f=[];e=0;for(E=-1;++E<l;){q=0;for(y=-1;++y<l;)q+=g[E][y];A.push(q);K.push(m.range(l));e+=q}p&&F.sort(function(a,e){return p(A[a],A[e])});s&&K.forEach(function(a,e){a.sort(function(a,c){return s(g[e][a],g[e][c])})});e=(2*C-u*l)/e;q=0;for(E=-1;++E<l;){v=
q;for(y=-1;++y<l;){var Ha=F[E],B=K[Ha][y],x=g[Ha][B],P=q,I=q+=x*e;z[Ha+"-"+B]={index:Ha,subindex:B,startAngle:P,endAngle:I,value:x}}f[Ha]={index:Ha,startAngle:v,endAngle:q,value:(q-v)/e};q+=u}for(E=-1;++E<l;)for(y=E-1;++y<l;)e=z[E+"-"+y],q=z[y+"-"+E],(e.value||q.value)&&d.push(e.value<q.value?{source:q,target:e}:{source:e,target:q});n&&c()}function c(){d.sort(function(a,e){return n((a.source.value+a.target.value)/2,(e.source.value+e.target.value)/2)})}var d,f,g,l,p,s,n,q={},u=0;return q.matrix=function(a){return arguments.length?
(l=(g=a)&&g.length,d=f=null,q):g},q.padding=function(a){return arguments.length?(u=a,d=f=null,q):u},q.sortGroups=function(a){return arguments.length?(p=a,d=f=null,q):p},q.sortSubgroups=function(a){return arguments.length?(s=a,d=null,q):s},q.sortChords=function(a){return arguments.length?(n=a,d&&c(),q):n},q.chords=function(){return d||a(),d},q.groups=function(){return f||a(),f},q};m.layout.force=function(){function a(e){return function(a,c,d,f){if(a.point!==e){d=a.cx-e.x;var h=a.cy-e.y,g=1/Math.sqrt(d*
d+h*h);if(y>(f-c)*g)return c=a.charge*g*g,e.px-=d*c,e.py-=h*c,!0;a.point&&isFinite(g)&&(c=a.pointCharge*g*g,e.px-=d*c,e.py-=h*c)}return!a.charge}}function c(a){a.px=m.event.x;a.py=m.event.y;s.resume()}var d,f,g,l,p,s={},n=m.dispatch("start","tick","end"),q=[1,1],u=0.9,v=Yg,D=Zg,B=-30,E=0.1,y=0.8,z=[],A=[];return s.tick=function(){if(0.005>(f*=0.99))return n.end({type:"end",alpha:f=0}),!0;var c,d,h,s,w,v,y,D,va=z.length,x=A.length;for(d=0;x>d;++d)h=A[d],c=h.source,s=h.target,y=s.x-c.x,D=s.y-c.y,(w=
y*y+D*D)&&(w=f*l[d]*((w=Math.sqrt(w))-g[d])/w,y*=w,D*=w,s.x-=y*(v=c.weight/(s.weight+c.weight)),s.y-=D*v,c.x+=y*(v=1-v),c.y+=D*v);if((v=f*E)&&(y=q[0]/2,D=q[1]/2,d=-1,v))for(;++d<va;)h=z[d],h.x+=(y-h.x)*v,h.y+=(D-h.y)*v;if(B)for(he(c=m.geom.quadtree(z),f,p),d=-1;++d<va;)(h=z[d]).fixed||c.visit(a(h));for(d=-1;++d<va;)h=z[d],h.fixed?(h.x=h.px,h.y=h.py):(h.x-=(h.px-(h.px=h.x))*u,h.y-=(h.py-(h.py=h.y))*u);n.tick({type:"tick",alpha:f})},s.nodes=function(a){return arguments.length?(z=a,s):z},s.links=function(a){return arguments.length?
(A=a,s):A},s.size=function(a){return arguments.length?(q=a,s):q},s.linkDistance=function(a){return arguments.length?(v="function"==typeof a?a:+a,s):v},s.distance=s.linkDistance,s.linkStrength=function(a){return arguments.length?(D="function"==typeof a?a:+a,s):D},s.friction=function(a){return arguments.length?(u=+a,s):u},s.charge=function(a){return arguments.length?(B="function"==typeof a?a:+a,s):B},s.gravity=function(a){return arguments.length?(E=+a,s):E},s.theta=function(a){return arguments.length?
(y=+a,s):y},s.alpha=function(a){return arguments.length?(a=+a,f?f=0<a?a:0:0<a&&(n.start({type:"start",alpha:f=a}),m.timer(s.tick)),s):f},s.start=function(){function a(f,g){var l,s;if(!d){d=[];for(c=0;h>c;++c)d[c]=[];for(c=0;m>c;++c)l=A[c],d[l.source.index].push(l.target),d[l.target.index].push(l.source)}s=d[e];for(var r=-1,p=s.length;++r<p;)if(!isNaN(l=s[r][f]))return l;return Math.random()*g}var e,c,d,f,h=z.length,m=A.length,n=q[0],w=q[1];for(e=0;h>e;++e)(f=z[e]).index=e,f.weight=0;for(e=0;m>e;++e)f=
A[e],"number"==typeof f.source&&(f.source=z[f.source]),"number"==typeof f.target&&(f.target=z[f.target]),++f.source.weight,++f.target.weight;for(e=0;h>e;++e)f=z[e],isNaN(f.x)&&(f.x=a("x",n)),isNaN(f.y)&&(f.y=a("y",w)),isNaN(f.px)&&(f.px=f.x),isNaN(f.py)&&(f.py=f.y);if(g=[],"function"==typeof v)for(e=0;m>e;++e)g[e]=+v.call(this,A[e],e);else for(e=0;m>e;++e)g[e]=v;if(l=[],"function"==typeof D)for(e=0;m>e;++e)l[e]=+D.call(this,A[e],e);else for(e=0;m>e;++e)l[e]=D;if(p=[],"function"==typeof B)for(e=0;h>
e;++e)p[e]=+B.call(this,z[e],e);else for(e=0;h>e;++e)p[e]=B;return s.resume()},s.resume=function(){return s.alpha(0.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){return d||(d=m.behavior.drag().origin(ga).on("dragstart.force",Wf).on("drag.force",c).on("dragend.force",Xf)),arguments.length?(this.on("mouseover.force",Yf).on("mouseout.force",Zf).call(d),void 0):d},m.rebind(s,n,"on")};var Yg=20,Zg=1;m.layout.hierarchy=function(){function a(c,m,p){var n=g.call(d,c,m);if(c.depth=m,p.push(c),
n&&(q=n.length)){for(var q,w=-1,u=c.children=[],v=0,E=m+1;++w<q;)m=a(n[w],E,p),m.parent=c,u.push(m),v+=m.value;f&&u.sort(f);l&&(c.value=v)}else l&&(c.value=+l.call(d,c,m)||0);return c}function c(a,e){var f=a.children,g=0;if(f&&(m=f.length))for(var m,p=-1,n=e+1;++p<m;)g+=c(f[p],n);else l&&(g=+l.call(d,a,e)||0);return l&&(a.value=g),g}function d(c){var f=[];return a(c,0,f),f}var f=cg,g=ag,l=bg;return d.sort=function(a){return arguments.length?(f=a,d):f},d.children=function(a){return arguments.length?
(g=a,d):g},d.value=function(a){return arguments.length?(l=a,d):l},d.revalue=function(a){return c(a,0),a},d};m.layout.partition=function(){function a(c,d,f,h){var g=c.children;if(c.x=d,c.y=c.depth*h,c.dx=f,c.dy=h,g&&(l=g.length)){var l,m,p=-1;for(f=c.value?f/c.value:0;++p<l;)a(m=g[p],d,c=m.value*f,h),d+=c}}function c(a){a=a.children;var e=0;if(a&&(d=a.length))for(var d,f=-1;++f<d;)e=Math.max(e,c(a[f]));return 1+e}function d(h,l){var m=f.call(this,h,l);return a(m[0],0,g[0],g[1]/c(m[0])),m}var f=m.layout.hierarchy(),
g=[1,1];return d.size=function(a){return arguments.length?(g=a,d):g},$a(d,f)};m.layout.pie=function(){function a(l){var p=l.map(function(d,f){return+c.call(a,d,f)}),s=+("function"==typeof f?f.apply(this,arguments):f),n=(("function"==typeof g?g.apply(this,arguments):g)-s)/m.sum(p),q=m.range(l.length);null!=d&&q.sort(d===df?function(a,e){return p[e]-p[a]}:function(a,e){return d(l[a],l[e])});var u=[];return q.forEach(function(a){var e;u[a]={data:l[a],value:e=p[a],startAngle:s,endAngle:s+=e*n}}),u}var c=
Number,d=df,f=0,g=2*C;return a.value=function(d){return arguments.length?(c=d,a):c},a.sort=function(c){return arguments.length?(d=c,a):d},a.startAngle=function(c){return arguments.length?(f=c,a):f},a.endAngle=function(c){return arguments.length?(g=c,a):g},a};var df={};m.layout.stack=function(){function a(s,n){var q=s.map(function(d,f){return c.call(a,d,f)}),u=q.map(function(c){return c.map(function(c,d){return[l.call(a,c,d),p.call(a,c,d)]})}),v=d.call(a,u,n),q=m.permute(q,v),u=m.permute(u,v),D,B,
E=f.call(a,u,n),y=q.length,z=q[0].length;for(D=0;z>D;++D)for(g.call(a,q[0][D],B=E[D],u[0][D][1]),v=1;y>v;++v)g.call(a,q[v][D],B+=u[v-1][D][1],u[v][D][1]);return s}var c=ga,d=Bc,f=Cc,g=fg,l=dg,p=eg;return a.values=function(d){return arguments.length?(c=d,a):c},a.order=function(c){return arguments.length?(d="function"==typeof c?c:$g.get(c)||Bc,a):d},a.offset=function(c){return arguments.length?(f="function"==typeof c?c:ah.get(c)||Cc,a):f},a.x=function(c){return arguments.length?(l=c,a):l},a.y=function(c){return arguments.length?
(p=c,a):p},a.out=function(c){return arguments.length?(g=c,a):g},a};var $g=m.map({"inside-out":function(a){var c,d=a.length,f=a.map(gg),g=a.map(hg),l=m.range(d).sort(function(a,c){return f[a]-f[c]}),p=0,s=0,n=[],q=[];for(a=0;d>a;++a)c=l[a],s>p?(p+=g[c],n.push(c)):(s+=g[c],q.push(c));return q.reverse().concat(n)},reverse:function(a){return m.range(a.length).reverse()},"default":Bc}),ah=m.map({silhouette:function(a){var c,d,f,g=a.length,l=a[0].length,m=[],p=0,n=[];for(d=0;l>d;++d){for(f=c=0;g>c;c++)f+=
a[c][d][1];f>p&&(p=f);m.push(f)}for(d=0;l>d;++d)n[d]=(p-m[d])/2;return n},wiggle:function(a){var c,d,f,g,l,m,p,n,q,u=a.length,v=a[0],D=v.length,B=[];B[0]=n=q=0;for(d=1;D>d;++d){for(g=c=0;u>c;++c)g+=a[c][d][1];l=c=0;for(p=v[d][0]-v[d-1][0];u>c;++c){f=0;for(m=(a[c][d][1]-a[c][d-1][1])/(2*p);c>f;++f)m+=(a[f][d][1]-a[f][d-1][1])/p;l+=m*a[c][d][1]}B[d]=n-=g?l/g*p:0;q>n&&(q=n)}for(d=0;D>d;++d)B[d]-=q;return B},expand:function(a){var c,d,f,g=a.length,l=a[0].length,m=1/g,p=[];for(d=0;l>d;++d){for(f=c=0;g>
c;c++)f+=a[c][d][1];if(f)for(c=0;g>c;c++)a[c][d][1]/=f;else for(c=0;g>c;c++)a[c][d][1]=m}for(d=0;l>d;++d)p[d]=0;return p},zero:Cc});m.layout.histogram=function(){function a(e,l){var p,n,q=[],u=e.map(d,this),v=f.call(this,u,l),D=g.call(this,v,u,l);l=-1;for(var B=u.length,E=D.length-1,y=c?1:1/B;++l<E;)p=q[l]=[],p.dx=D[l+1]-(p.x=D[l]),p.y=0;if(0<E)for(l=-1;++l<B;)n=u[l],n>=v[0]&&n<=v[1]&&(p=q[m.bisect(D,n,1,E)-1],p.y+=y,p.push(e[l]));return q}var c=!0,d=Number,f=kg,g=jg;return a.value=function(c){return arguments.length?
(d=c,a):d},a.range=function(c){return arguments.length?(f=Q(c),a):f},a.bins=function(c){return arguments.length?(g="number"==typeof c?function(a){return ie(a,c)}:Q(c),a):g},a.frequency=function(d){return arguments.length?(c=!!d,a):c},a};m.layout.tree=function(){function a(e,g){function l(a,c){var e=a.children,f=a._tree;if(e&&(g=e.length)){for(var g,m,p,s=e[0],n=s,r=-1;++r<g;){p=e[r];l(p,m);var q=p;if(m){for(var t=void 0,w=q,u=q,v=q.parent.children[0],E=w._tree.mod,y=u._tree.mod,J=m._tree.mod,L=v._tree.mod;m=
Ec(m),w=Dc(w),m&&w;){v=Dc(v);u=Ec(u);u._tree.ancestor=q;t=m._tree.prelim+J-w._tree.prelim-E+d(m,w);if(0<t){var B=m._tree.ancestor.parent==q.parent?m._tree.ancestor:n,D=q,la=t,B=B._tree,D=D._tree,x=la/(D.number-B.number);B.change+=x;D.change-=x;D.shift+=la;D.prelim+=la;D.mod+=la;E+=t;y+=t}J+=m._tree.mod;E+=w._tree.mod;L+=v._tree.mod;y+=u._tree.mod}m&&!Ec(u)&&(u._tree.thread=m,u._tree.mod+=J-y);w&&!Dc(v)&&(v._tree.thread=w,v._tree.mod+=E-L,n=q)}m=p}r=g=0;q=a.children;for(n=q.length;0<=--n;)e=q[n]._tree,
e.prelim+=g,e.mod+=g,g+=e.shift+(r+=e.change);p=0.5*(s._tree.prelim+p._tree.prelim);c?(f.prelim=c._tree.prelim+d(a,c),f.mod=f.prelim-p):f.prelim=p}else c&&(f.prelim=c._tree.prelim+d(a,c))}function m(a,c){a.x=a._tree.prelim+c;var e=a.children;if(e&&(d=e.length)){var d,f=-1;for(c+=a._tree.mod;++f<d;)m(e[f],c)}}var p=c.call(this,e,g),n=p[0];sa(n,function(a,c){a._tree={ancestor:a,prelim:0,mod:0,change:0,shift:0,number:c?c._tree.number+1:0}});l(n);m(n,-n._tree.prelim);var q=yb(n,mg),u=yb(n,lg),v=yb(n,
ng),B=q.x-d(q,u)/2,E=u.x+d(u,q)/2,y=v.depth||1;return sa(n,function(a){a.x=(a.x-B)/(E-B)*f[0];a.y=a.depth/y*f[1];delete a._tree}),p}var c=m.layout.hierarchy().sort(null).value(null),d=je,f=[1,1];return a.separation=function(c){return arguments.length?(d=c,a):d},a.size=function(c){return arguments.length?(f=c,a):f},$a(a,c)};m.layout.pack=function(){function a(e,g){var l=c.call(this,e,g),m=l[0];m.x=0;m.y=0;sa(m,function(a){a.r=Math.sqrt(a.value)});sa(m,me);var p=f[0],n=f[1],q=Math.max(2*m.r/p,2*m.r/
n);if(0<d){var u=d*q/2;sa(m,function(a){a.r+=u});sa(m,me);sa(m,function(a){a.r-=u});q=Math.max(2*m.r/p,2*m.r/n)}return oe(m,p/2,n/2,1/q),l}var c=m.layout.hierarchy().sort(og),d=0,f=[1,1];return a.size=function(c){return arguments.length?(f=c,a):f},a.padding=function(c){return arguments.length?(d=+c,a):d},$a(a,c)};m.layout.cluster=function(){function a(e,g){var l,m=c.call(this,e,g),p=m[0],n=0;sa(p,function(a){var c=a.children;c&&c.length?(a.x=sg(c),a.y=rg(c)):(a.x=l?n+=d(a,l):0,a.y=0,l=a)});var q=
pe(p),u=qe(p),v=q.x-d(q,u)/2,B=u.x+d(u,q)/2;return sa(p,function(a){a.x=(a.x-v)/(B-v)*f[0];a.y=(1-(p.y?a.y/p.y:1))*f[1]}),m}var c=m.layout.hierarchy().sort(null).value(null),d=je,f=[1,1];return a.separation=function(c){return arguments.length?(d=c,a):d},a.size=function(c){return arguments.length?(f=c,a):f},$a(a,c)};m.layout.treemap=function(){function a(c,e){for(var d,f,h=-1,g=c.length;++h<g;)f=(d=c[h]).value*(0>e?0:e),d.area=isNaN(f)||0>=f?0:f}function c(d){var h=d.children;if(h&&h.length){var g,
l=v(d),m=[],p=h.slice(),n=1/0,s="slice"===D?l.dx:"dice"===D?l.dy:"slice-dice"===D?d.depth&1?l.dy:l.dx:Math.min(l.dx,l.dy);a(p,l.dx*l.dy/d.value);for(m.area=0;0<(d=p.length);){m.push(d=p[d-1]);m.area+=d.area;var r;if(!(r="squarify"!==D)){d=s;g=void 0;var q=m.area;r=0;for(var t=1/0,u=-1,B=m.length;++u<B;)(g=m[u].area)&&(t>g&&(t=g),g>r&&(r=g));r=(g=(q*=q,d*=d,q?Math.max(d*r*x/q,q/(d*t*x)):1/0))<=n}r?(p.pop(),n=g):(m.area-=m.pop().area,f(m,s,l,!1),s=Math.min(l.dx,l.dy),m.length=m.area=0,n=1/0)}m.length&&
(f(m,s,l,!0),m.length=m.area=0);h.forEach(c)}}function d(c){var g=c.children;if(g&&g.length){var l=v(c),m=g.slice(),p=[];a(m,l.dx*l.dy/c.value);for(p.area=0;c=m.pop();)p.push(c),p.area+=c.area,null!=c.z&&(f(p,c.z?l.dx:l.dy,l,!m.length),p.length=p.area=0);g.forEach(d)}}function f(a,c,e,d){var h,g=-1,l=a.length,m=e.x,p=e.y,r=c?n(a.area/c):0;if(c==e.dx){for((d||r>e.dy)&&(r=e.dy);++g<l;)h=a[g],h.x=m,h.y=p,h.dy=r,m+=h.dx=Math.min(e.x+e.dx-m,r?n(h.area/r):0);h.z=!0;h.dx+=e.x+e.dx-m;e.y+=r;e.dy-=r}else{for((d||
r>e.dx)&&(r=e.dx);++g<l;)h=a[g],h.x=m,h.y=p,h.dx=r,p+=h.dy=Math.min(e.y+e.dy-p,r?n(h.area/r):0);h.z=!1;h.dy+=e.y+e.dy-p;e.x+=r;e.dx-=r}}function g(f){f=l||p(f);var m=f[0];return m.x=0,m.y=0,m.dx=q[0],m.dy=q[1],l&&p.revalue(m),a([m],m.dx*m.dy/m.value),(l?d:c)(m),B&&(l=f),f}var l,p=m.layout.hierarchy(),n=Math.round,q=[1,1],u=null,v=Gc,B=!1,D="squarify",x=0.5*(1+Math.sqrt(5));return g.size=function(a){return arguments.length?(q=a,g):q},g.padding=function(a){function c(e){var d=a.call(g,e,e.depth);return null==
d?Gc(e):re(e,"number"==typeof d?[d,d,d,d]:d)}function e(c){return re(c,a)}if(!arguments.length)return u;var d;return v=null==(u=a)?Gc:"function"==(d=typeof a)?c:"number"===d?(a=[a,a,a,a],e):e,g},g.round=function(a){return arguments.length?(n=a?Math.round:Number,g):n!=Number},g.sticky=function(a){return arguments.length?(B=a,l=null,g):B},g.ratio=function(a){return arguments.length?(x=a,g):x},g.mode=function(a){return arguments.length?(D=a+"",g):D},$a(g,p)};m.random={normal:function(a,c){var d=arguments.length;
return 2>d&&(c=1),1>d&&(a=0),function(){var d,f;do d=2*Math.random()-1,f=2*Math.random()-1,f=d*d+f*f;while(!f||1<f);return a+c*d*Math.sqrt(-2*Math.log(f)/f)}},logNormal:function(){var a=m.random.normal.apply(m,arguments);return function(){return Math.exp(a())}},irwinHall:function(a){return function(){for(var c=0,d=0;a>d;d++)c+=Math.random();return c/a}}};m.scale={};m.scale.linear=function(){return se([0,1],[0,1],Ca,!1)};m.scale.log=function(){return xe(m.scale.linear().domain([0,Math.LN10]),10,ye,
ze)};var xg=m.format(".0e");m.scale.pow=function(){return Ae(m.scale.linear(),1)};m.scale.sqrt=function(){return m.scale.pow().exponent(0.5)};m.scale.ordinal=function(){return Be([],{t:"range",a:[[]]})};m.scale.category10=function(){return m.scale.ordinal().range(bh)};m.scale.category20=function(){return m.scale.ordinal().range(ch)};m.scale.category20b=function(){return m.scale.ordinal().range(dh)};m.scale.category20c=function(){return m.scale.ordinal().range(eh)};var bh="#1f77b4 #ff7f0e #2ca02c #d62728 #9467bd #8c564b #e377c2 #7f7f7f #bcbd22 #17becf".split(" "),
ch="#1f77b4 #aec7e8 #ff7f0e #ffbb78 #2ca02c #98df8a #d62728 #ff9896 #9467bd #c5b0d5 #8c564b #c49c94 #e377c2 #f7b6d2 #7f7f7f #c7c7c7 #bcbd22 #dbdb8d #17becf #9edae5".split(" "),dh="#393b79 #5254a3 #6b6ecf #9c9ede #637939 #8ca252 #b5cf6b #cedb9c #8c6d31 #bd9e39 #e7ba52 #e7cb94 #843c39 #ad494a #d6616b #e7969c #7b4173 #a55194 #ce6dbd #de9ed6".split(" "),eh="#3182bd #6baed6 #9ecae1 #c6dbef #e6550d #fd8d3c #fdae6b #fdd0a2 #31a354 #74c476 #a1d99b #c7e9c0 #756bb1 #9e9ac8 #bcbddc #dadaeb #636363 #969696 #bdbdbd #d9d9d9".split(" ");
m.scale.quantile=function(){return Ce([],[])};m.scale.quantize=function(){return De(0,1,[0,1])};m.scale.threshold=function(){return Ee([0.5],[0,1])};m.scale.identity=function(){return Fe([0,1])};m.svg.arc=function(){function a(){var e=c.apply(this,arguments),l=d.apply(this,arguments),m=f.apply(this,arguments)+Da,p=g.apply(this,arguments)+Da,n=(m>p&&(n=m,m=p,p=n),p-m),q=C>n?"0":"1",u=Math.cos(m),m=Math.sin(m),v=Math.cos(p),p=Math.sin(p);return n>=fh?e?"M0,"+l+"A"+l+","+l+" 0 1,1 0,"+-l+"A"+l+","+l+
" 0 1,1 0,"+l+"M0,"+e+"A"+e+","+e+" 0 1,0 0,"+-e+"A"+e+","+e+" 0 1,0 0,"+e+"Z":"M0,"+l+"A"+l+","+l+" 0 1,1 0,"+-l+"A"+l+","+l+" 0 1,1 0,"+l+"Z":e?"M"+l*u+","+l*m+"A"+l+","+l+" 0 "+q+",1 "+l*v+","+l*p+"L"+e*v+","+e*p+"A"+e+","+e+" 0 "+q+",0 "+e*u+","+e*m+"Z":"M"+l*u+","+l*m+"A"+l+","+l+" 0 "+q+",1 "+l*v+","+l*p+"L0,0Z"}var c=yg,d=zg,f=Ge,g=He;return a.innerRadius=function(d){return arguments.length?(c=Q(d),a):c},a.outerRadius=function(c){return arguments.length?(d=Q(c),a):d},a.startAngle=function(c){return arguments.length?
(f=Q(c),a):f},a.endAngle=function(c){return arguments.length?(g=Q(c),a):g},a.centroid=function(){var a=(c.apply(this,arguments)+d.apply(this,arguments))/2,e=(f.apply(this,arguments)+g.apply(this,arguments))/2+Da;return[Math.cos(e)*a,Math.sin(e)*a]},a};var Da=-C/2,fh=2*C-1E-6;m.svg.line.radial=function(){var a=Td(Ie);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a};tc.reverse=uc;uc.reverse=tc;m.svg.area=function(){return Je(ga)};m.svg.area.radial=function(){var a=Je(Ie);return a.radius=a.x,
delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a};m.svg.chord=function(){function a(e,g){var l=c(this,d,e,g),m=c(this,f,e,g);return"M"+l.p0+("A"+l.r+","+l.r+" 0 "+ +(l.a1-l.a0>C)+",1 "+l.p1)+(l.a0==m.a0&&l.a1==m.a1?"Q 0,0 "+l.p0:"Q 0,0 "+m.p0+("A"+m.r+","+m.r+" 0 "+ +(m.a1-m.a0>C)+",1 "+m.p1)+("Q 0,0 "+l.p0))+"Z"}function c(a,e,d,f){var h=e.call(a,d,f);e=g.call(a,h,f);d=l.call(a,h,f)+Da;a=m.call(a,
h,f)+Da;return{r:e,a0:d,a1:a,p0:[e*Math.cos(d),e*Math.sin(d)],p1:[e*Math.cos(a),e*Math.sin(a)]}}var d=mc,f=nc,g=Ag,l=Ge,m=He;return a.radius=function(c){return arguments.length?(g=Q(c),a):g},a.source=function(c){return arguments.length?(d=Q(c),a):d},a.target=function(c){return arguments.length?(f=Q(c),a):f},a.startAngle=function(c){return arguments.length?(l=Q(c),a):l},a.endAngle=function(c){return arguments.length?(m=Q(c),a):m},a};m.svg.diagonal=function(){function a(e,g){var l=c.call(this,e,g),
m=d.call(this,e,g),p=(l.y+m.y)/2,l=[l,{x:l.x,y:p},{x:m.x,y:p},m];return l=l.map(f),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var c=mc,d=nc,f=Ke;return a.source=function(d){return arguments.length?(c=Q(d),a):c},a.target=function(c){return arguments.length?(d=Q(c),a):d},a.projection=function(c){return arguments.length?(f=c,a):f},a};m.svg.diagonal.radial=function(){var a=m.svg.diagonal(),c=Ke,d=a.projection;return a.projection=function(a){return arguments.length?d(Bg(c=a)):c},a};m.svg.symbol=function(){function a(e,
f){return(ef.get(c.call(this,e,f))||Le)(d.call(this,e,f))}var c=Dg,d=Cg;return a.type=function(d){return arguments.length?(c=Q(d),a):c},a.size=function(c){return arguments.length?(d=Q(c),a):d},a};var ef=m.map({circle:Le,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*ff));var c=a*ff;return"M0,"+-a+"L"+c+",0 0,"+a+" "+-c+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+
-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/Ob);var c=a*Ob/2;return"M0,"+c+"L"+a+","+-c+" "+-a+","+-c+"Z"},"triangle-up":function(a){a=Math.sqrt(a/Ob);var c=a*Ob/2;return"M0,"+-c+"L"+a+","+c+" "+-a+","+c+"Z"}});m.svg.symbolTypes=ef.keys();var db,Ob=Math.sqrt(3),ff=Math.tan(30*G),Y=[],Ve=0,Hb={ease:function(a){if(0>=a)return 0;if(1<=a)return 1;var c=a*a,d=c*a;return 4*(0.5>a?d:3*(a-c)+d-0.75)},delay:0,duration:250};Y.call=N.call;Y.empty=N.empty;Y.node=
N.node;m.transition=function(a){return arguments.length?db?a.transition():a:cb.transition()};m.transition.prototype=Y;Y.select=function(a){var c,d,f,g=this.id,l=[];"function"!=typeof a&&(a=O(a));for(var m=-1,p=this.length;++m<p;){l.push(c=[]);for(var n=this[m],q=-1,u=n.length;++q<u;)(f=n[q])&&(d=a.call(f,f.__data__,q))?("__data__"in f&&(d.__data__=f.__data__),Cb(d,q,g,f.__transition__[g]),c.push(d)):c.push(null)}return bb(l,g)};Y.selectAll=function(a){var c,d,f,g,l=this.id,m=[];"function"!=typeof a&&
(a=M(a));for(var p=-1,n=this.length;++p<n;)for(var q=this[p],u=-1,v=q.length;++u<v;)if(c=q[u]){g=c.__transition__[l];d=a.call(c,c.__data__,u);m.push(c=[]);for(var B=-1,x=d.length;++B<x;)Cb(f=d[B],B,l,g),c.push(f)}return bb(m,l)};Y.filter=function(a){var c,d,f,g=[];"function"!=typeof a&&(a=ed(a));for(var l=0,m=this.length;m>l;l++){g.push(c=[]);d=this[l];for(var p=0,n=d.length;n>p;p++)(f=d[p])&&a.call(f,f.__data__,p)&&c.push(f)}return bb(g,this.id,this.time).ease(this.ease())};Y.tween=function(a,c){var d=
this.id;return 2>arguments.length?this.node().__transition__[d].tween.get(a):wa(this,null==c?function(c){c.__transition__[d].tween.remove(a)}:function(f){f.__transition__[d].tween.set(a,c)})};Y.attr=function(a,c){function d(){this.removeAttribute(l)}function f(){this.removeAttributeNS(l.space,l.local)}if(2>arguments.length){for(c in a)this.attr(c,a[c]);return this}var g="transform"==a?wb:Ca,l=m.ns.qualify(a);return Kc(this,"attr."+a,c,function(a){function c(){var e,d=this.getAttribute(l);return d!==
a&&(e=g(d,a),function(a){this.setAttribute(l,e(a))})}function e(){var c,d=this.getAttributeNS(l.space,l.local);return d!==a&&(c=g(d,a),function(a){this.setAttributeNS(l.space,l.local,c(a))})}return null==a?l.local?f:d:(a+="",l.local?e:c)})};Y.attrTween=function(a,c){function d(a,e){var f=c.call(this,a,e,this.getAttribute(g));return f&&function(a){this.setAttribute(g,f(a))}}function f(a,e){var d=c.call(this,a,e,this.getAttributeNS(g.space,g.local));return d&&function(a){this.setAttributeNS(g.space,
g.local,d(a))}}var g=m.ns.qualify(a);return this.tween("attr."+a,g.local?f:d)};Y.style=function(a,c,d){function f(){this.style.removeProperty(a)}var g=arguments.length;if(3>g){if("string"!=typeof a){2>g&&(c="");for(d in a)this.style(d,a[d],c);return this}d=""}var l="transform"==a?wb:Ca;return Kc(this,"style."+a,c,function(c){function g(){var f,m=aa.getComputedStyle(this,null).getPropertyValue(a);return m!==c&&(f=l(m,c),function(c){this.style.setProperty(a,f(c),d)})}return null==c?f:(c+="",g)})};Y.styleTween=
function(a,c,d){return 3>arguments.length&&(d=""),this.tween("style."+a,function(f,g){var l=c.call(this,f,g,aa.getComputedStyle(this,null).getPropertyValue(a));return l&&function(c){this.style.setProperty(a,l(c),d)}})};Y.text=function(a){return Kc(this,"text",a,Eg)};Y.remove=function(){return this.each("end.transition",function(){var a;!this.__transition__&&(a=this.parentNode)&&a.removeChild(this)})};Y.ease=function(a){var c=this.id;return 1>arguments.length?this.node().__transition__[c].ease:("function"!=
typeof a&&(a=m.ease.apply(m,arguments)),wa(this,function(d){d.__transition__[c].ease=a}))};Y.delay=function(a){var c=this.id;return wa(this,"function"==typeof a?function(d,f,g){d.__transition__[c].delay=a.call(d,d.__data__,f,g)|0}:(a|=0,function(d){d.__transition__[c].delay=a}))};Y.duration=function(a){var c=this.id;return wa(this,"function"==typeof a?function(d,f,g){d.__transition__[c].duration=Math.max(1,a.call(d,d.__data__,f,g)|0)}:(a=Math.max(1,0|a),function(d){d.__transition__[c].duration=a}))};
Y.each=function(a,c){var d=this.id;if(2>arguments.length){var f=Hb,g=db;db=d;wa(this,function(c,f,g){Hb=c.__transition__[d];a.call(c,c.__data__,f,g)});Hb=f;db=g}else wa(this,function(f){f.__transition__[d].event.on(a,c)});return this};Y.transition=function(){for(var a,c,d,f,g=this.id,l=++Ve,m=[],p=0,n=this.length;n>p;p++){m.push(a=[]);c=this[p];for(var q=0,u=c.length;u>q;q++)(d=c[q])&&(f=Object.create(d.__transition__[g]),f.delay+=f.duration,Cb(d,q,l,f)),a.push(d)}return bb(m,l)};m.svg.axis=function(){function a(e){e.each(function(){var a,
e=m.select(this),B=null==u?d.ticks?d.ticks.apply(d,q):d.domain():u,y=null==c?d.tickFormat?d.tickFormat.apply(d,q):String:c,z=Fg(d,B,v),A=e.selectAll(".tick.minor").data(z,String),z=A.enter().insert("line",".tick").attr("class","tick minor").style("opacity",1E-6),x=m.transition(A.exit()).style("opacity",1E-6).remove(),A=m.transition(A).style("opacity",1),C=e.selectAll(".tick.major").data(B,String),B=C.enter().insert("g","path").attr("class","tick major").style("opacity",1E-6),P=m.transition(C.exit()).style("opacity",
1E-6).remove(),I=m.transition(C).style("opacity",1),G=zb(d),e=e.selectAll(".domain").data([0]),e=(e.enter().append("path").attr("class","domain"),m.transition(e)),H=d.copy(),va=this.__chart__||H;this.__chart__=H;B.append("line");B.append("text");var O=B.select("line"),Q=I.select("line"),y=C.select("text").text(y),C=B.select("text"),N=I.select("text");switch(f){case "bottom":a=Me;z.attr("y2",l);A.attr("x2",0).attr("y2",l);O.attr("y2",g);C.attr("y",Math.max(g,0)+n);Q.attr("x2",0).attr("y2",g);N.attr("x",
0).attr("y",Math.max(g,0)+n);y.attr("dy",".71em").style("text-anchor","middle");e.attr("d","M"+G[0]+","+p+"V0H"+G[1]+"V"+p);break;case "top":a=Me;z.attr("y2",-l);A.attr("x2",0).attr("y2",-l);O.attr("y2",-g);C.attr("y",-(Math.max(g,0)+n));Q.attr("x2",0).attr("y2",-g);N.attr("x",0).attr("y",-(Math.max(g,0)+n));y.attr("dy","0em").style("text-anchor","middle");e.attr("d","M"+G[0]+","+-p+"V0H"+G[1]+"V"+-p);break;case "left":a=Ne;z.attr("x2",-l);A.attr("x2",-l).attr("y2",0);O.attr("x2",-g);C.attr("x",-(Math.max(g,
0)+n));Q.attr("x2",-g).attr("y2",0);N.attr("x",-(Math.max(g,0)+n)).attr("y",0);y.attr("dy",".32em").style("text-anchor","end");e.attr("d","M"+-p+","+G[0]+"H0V"+G[1]+"H"+-p);break;case "right":a=Ne,z.attr("x2",l),A.attr("x2",l).attr("y2",0),O.attr("x2",g),C.attr("x",Math.max(g,0)+n),Q.attr("x2",g).attr("y2",0),N.attr("x",Math.max(g,0)+n).attr("y",0),y.attr("dy",".32em").style("text-anchor","start"),e.attr("d","M"+p+","+G[0]+"H0V"+G[1]+"H"+p)}if(d.ticks)B.call(a,va),I.call(a,H),P.call(a,H),z.call(a,
va),A.call(a,H),x.call(a,H);else{var M=H.rangeBand()/2,z=function(a){return H(a)+M};B.call(a,z);I.call(a,z)}})}var c,d=m.scale.linear(),f=gf,g=6,l=6,p=6,n=3,q=[10],u=null,v=0;return a.scale=function(c){return arguments.length?(d=c,a):d},a.orient=function(c){return arguments.length?(f=c in gh?c+"":gf,a):f},a.ticks=function(){return arguments.length?(q=arguments,a):q},a.tickValues=function(c){return arguments.length?(u=c,a):u},a.tickFormat=function(d){return arguments.length?(c=d,a):c},a.tickSize=function(c,
d){if(!arguments.length)return g;var f=arguments.length-1;return g=+c,l=1<f?+d:g,p=0<f?+arguments[f]:g,a},a.tickPadding=function(c){return arguments.length?(n=+c,a):n},a.tickSubdivide=function(c){return arguments.length?(v=+c,a):v},a};var gf="bottom",gh={top:1,right:1,bottom:1,left:1};m.svg.brush=function(){function a(l){l.each(function(){var l,p=m.select(this),n=p.selectAll(".background").data([0]),r=p.selectAll(".extent").data([0]),v=p.selectAll(".resize").data(B,String);p.style("pointer-events",
"all").on("mousedown.brush",g).on("touchstart.brush",g);n.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");r.enter().append("rect").attr("class","extent").style("cursor","move");v.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return hh[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility",
"hidden");v.style("display",a.empty()?"none":null);v.exit().remove();q&&(l=zb(q),n.attr("x",l[0]).attr("width",l[1]-l[0]),d(p));u&&(l=zb(u),n.attr("y",l[0]).attr("height",l[1]-l[0]),f(p));c(p)})}function c(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+x[+/e$/.test(a)][0]+","+x[+/^s/.test(a)][1]+")"})}function d(a){a.select(".extent").attr("x",x[0][0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",x[1][0]-x[0][0])}function f(a){a.select(".extent").attr("y",x[0][1]);
a.selectAll(".extent,.e>rect,.w>rect").attr("height",x[1][1]-x[0][1])}function g(){function t(){var a=m.event.changedTouches;return a?m.touches(A,a)[0]:m.mouse(A)}function v(){var a=t(),e=!1;z&&(a[0]+=z[0],a[1]+=z[1]);N||(m.event.altKey?(y||(y=[(x[0][0]+x[1][0])/2,(x[0][1]+x[1][1])/2]),M[0]=x[+(a[0]<y[0])][0],M[1]=x[+(a[1]<y[1])][1]):y=null);O&&B(a,q,0)&&(d(G),e=!0);Q&&B(a,u,1)&&(f(G),e=!0);e&&(c(G),I({type:"brush",mode:N?"move":"resize"}))}function B(a,c,e){var d,f,h=zb(c);c=h[0];var h=h[1],g=M[e],
m=x[1][e]-x[0][e];return N&&(c-=g,h-=m+g),d=Math.max(c,Math.min(h,a[e])),N?f=(d+=g)+m:(y&&(g=Math.max(c,Math.min(h,2*y[e]-d))),d>g?(f=d,d=g):f=g),x[0][e]!==d||x[1][e]!==f?(l=null,x[0][e]=d,x[1][e]=f,!0):void 0}function C(){v();G.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);m.select("body").style("cursor",null);T.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",
null);I({type:"brushend"});p()}var y,z,A=this,P=m.select(m.event.target),I=n.of(A,arguments),G=m.select(A),H=P.datum(),O=!/^(n|s)$/.test(H)&&q,Q=!/^(e|w)$/.test(H)&&u,N=P.classed("extent"),M=t(),T=m.select(aa).on("mousemove.brush",v).on("mouseup.brush",C).on("touchmove.brush",v).on("touchend.brush",C).on("keydown.brush",function(){32==m.event.keyCode&&(N||(y=null,M[0]-=x[1][0],M[1]-=x[1][1],N=2),p())}).on("keyup.brush",function(){32==m.event.keyCode&&2==N&&(M[0]+=x[1][0],M[1]+=x[1][1],N=0,p())});
if(N)M[0]=x[0][0]-M[0],M[1]=x[0][1]-M[1];else if(H){var U=+/w$/.test(H),H=+/^n/.test(H);z=[x[1-U][0]-M[0],x[1-H][1]-M[1]];M[0]=x[U][0];M[1]=x[H][1]}else m.event.altKey&&(y=M.slice());G.style("pointer-events","none").selectAll(".resize").style("display",null);m.select("body").style("cursor",P.style("cursor"));I({type:"brushstart"});v();p()}var l,n=v(a,"brushstart","brush","brushend"),q=null,u=null,B=Vc[0],x=[[0,0],[0,0]];return a.x=function(c){return arguments.length?(q=c,B=Vc[!q<<1|!u],a):q},a.y=
function(c){return arguments.length?(u=c,B=Vc[!q<<1|!u],a):u},a.extent=function(c){var d,f,h,g,m;return arguments.length?(l=[[0,0],[0,0]],q&&(d=c[0],f=c[1],u&&(d=d[0],f=f[0]),l[0][0]=d,l[1][0]=f,q.invert&&(d=q(d),f=q(f)),d>f&&(m=d,d=f,f=m),x[0][0]=0|d,x[1][0]=0|f),u&&(h=c[0],g=c[1],q&&(h=h[1],g=g[1]),l[0][1]=h,l[1][1]=g,u.invert&&(h=u(h),g=u(g)),h>g&&(m=h,h=g,g=m),x[0][1]=0|h,x[1][1]=0|g),a):(c=l||x,q&&(d=c[0][0],f=c[1][0],l||(d=x[0][0],f=x[1][0],q.invert&&(d=q.invert(d),f=q.invert(f)),d>f&&(m=d,
d=f,f=m))),u&&(h=c[0][1],g=c[1][1],l||(h=x[0][1],g=x[1][1],u.invert&&(h=u.invert(h),g=u.invert(g)),h>g&&(m=h,h=g,g=m))),q&&u?[[d,h],[f,g]]:q?[d,f]:u&&[h,g])},a.clear=function(){return l=null,x[0][0]=x[0][1]=x[1][0]=x[1][1]=0,a},a.empty=function(){return q&&x[0][0]===x[1][0]||u&&x[0][1]===x[1][1]},m.rebind(a,n,"on")};var hh={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Vc=["n e s w nw ne se sw".split(" "),["e","w"],["n",
"s"],[]];m.time={};var ca=Date;Ea.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},
getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ta.setUTCDate.apply(this._,arguments)},setDay:function(){ta.setUTCDay.apply(this._,arguments)},setFullYear:function(){ta.setUTCFullYear.apply(this._,arguments)},setHours:function(){ta.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ta.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ta.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ta.setUTCMonth.apply(this._,
arguments)},setSeconds:function(){ta.setUTCSeconds.apply(this._,arguments)},setTime:function(){ta.setTime.apply(this._,arguments)}};var ta=Date.prototype,hf="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),jf="Sun Mon Tue Wed Thu Fri Sat".split(" "),Wc="January February March April May June July August September October November December".split(" "),Xc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");m.time.year=Fa(function(a){return a=m.time.day(a),a.setMonth(0,1),
a},function(a,c){a.setFullYear(a.getFullYear()+c)},function(a){return a.getFullYear()});m.time.years=m.time.year.range;m.time.years.utc=m.time.year.utc.range;m.time.day=Fa(function(a){var c=new ca(1970,0);return c.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),c},function(a,c){a.setDate(a.getDate()+c)},function(a){return a.getDate()-1});m.time.days=m.time.day.range;m.time.days.utc=m.time.day.utc.range;m.time.dayOfYear=function(a){var c=m.time.year(a);return Math.floor((a-c-6E4*(a.getTimezoneOffset()-
c.getTimezoneOffset()))/864E5)};"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ").forEach(function(a,c){a=a.toLowerCase();c=7-c;var d=m.time[a]=Fa(function(a){return(a=m.time.day(a)).setDate(a.getDate()-(a.getDay()+c)%7),a},function(a,c){a.setDate(a.getDate()+7*Math.floor(c))},function(a){var e=m.time.year(a).getDay();return Math.floor((m.time.dayOfYear(a)+(e+c)%7)/7)-(e!==c)});m.time[a+"s"]=d.range;m.time[a+"s"].utc=d.utc.range;m.time[a+"OfYear"]=function(a){var e=m.time.year(a).getDay();
return Math.floor((m.time.dayOfYear(a)+(e+c)%7)/7)}});m.time.week=m.time.sunday;m.time.weeks=m.time.sunday.range;m.time.weeks.utc=m.time.sunday.utc.range;m.time.weekOfYear=m.time.sundayOfYear;m.time.format=function(a){function c(f){for(var g,l,m,p=[],n=-1,q=0;++n<d;)37===a.charCodeAt(n)&&(p.push(a.substring(q,n)),null!=(l=ih[g=a.charAt(++n)])&&(g=a.charAt(++n)),(m=Pb[g])&&(g=m(f,null==l?"e"===g?" ":"0":l)),p.push(g),q=n+1);return p.push(a.substring(q,n)),p.join("")}var d=a.length;return c.parse=function(c){var d=
{y:1900,m:0,d:1,H:0,M:0,S:0,L:0};if(Eb(d,a,c,0)!=c.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);c=new ca;return c.setFullYear(d.y,d.m,d.d),c.setHours(d.H,d.M,d.S,d.L),c},c.toString=function(){return a},c};var kf=Fb(hf),lf=Fb(jf),mf=Fb(Wc),jh=Oe(Wc),nf=Fb(Xc),kh=Oe(Xc),ih={"-":"",_:" ",0:"0"},Pb={a:function(a){return jf[a.getDay()]},A:function(a){return hf[a.getDay()]},b:function(a){return Xc[a.getMonth()]},B:function(a){return Wc[a.getMonth()]},c:m.time.format("%a %b %e %X %Y"),d:function(a,c){return fa(a.getDate(),
c,2)},e:function(a,c){return fa(a.getDate(),c,2)},H:function(a,c){return fa(a.getHours(),c,2)},I:function(a,c){return fa(a.getHours()%12||12,c,2)},j:function(a,c){return fa(1+m.time.dayOfYear(a),c,3)},L:function(a,c){return fa(a.getMilliseconds(),c,3)},m:function(a,c){return fa(a.getMonth()+1,c,2)},M:function(a,c){return fa(a.getMinutes(),c,2)},p:function(a){return 12<=a.getHours()?"PM":"AM"},S:function(a,c){return fa(a.getSeconds(),c,2)},U:function(a,c){return fa(m.time.sundayOfYear(a),c,2)},w:function(a){return a.getDay()},
W:function(a,c){return fa(m.time.mondayOfYear(a),c,2)},x:m.time.format("%m/%d/%Y"),X:m.time.format("%H:%M:%S"),y:function(a,c){return fa(a.getFullYear()%100,c,2)},Y:function(a,c){return fa(a.getFullYear()%1E4,c,4)},Z:function(a){var c=a.getTimezoneOffset();a=0<c?"-":"+";var d=~~(Math.abs(c)/60),c=Math.abs(c)%60;return a+fa(d,"0",2)+fa(c,"0",2)},"%":function(){return"%"}},Gg={a:function(a,c,d){lf.lastIndex=0;return(a=lf.exec(c.substring(d)))?d+a[0].length:-1},A:function(a,c,d){kf.lastIndex=0;return(a=
kf.exec(c.substring(d)))?d+a[0].length:-1},b:function(a,c,d){nf.lastIndex=0;return(c=nf.exec(c.substring(d)))?(a.m=kh.get(c[0].toLowerCase()),d+c[0].length):-1},B:function(a,c,d){mf.lastIndex=0;return(c=mf.exec(c.substring(d)))?(a.m=jh.get(c[0].toLowerCase()),d+c[0].length):-1},c:function(a,c,d){return Eb(a,""+Pb.c,c,d)},d:Pe,e:Pe,H:Qe,I:Qe,L:function(a,c,d){da.lastIndex=0;return(c=da.exec(c.substring(d,d+3)))?(a.L=+c[0],d+c[0].length):-1},m:function(a,c,d){da.lastIndex=0;return(c=da.exec(c.substring(d,
d+2)))?(a.m=c[0]-1,d+c[0].length):-1},M:function(a,c,d){da.lastIndex=0;return(c=da.exec(c.substring(d,d+2)))?(a.M=+c[0],d+c[0].length):-1},p:function(a,c,d){c=lh.get(c.substring(d,d+=2).toLowerCase());return null==c?-1:(a.p=c,d)},S:function(a,c,d){da.lastIndex=0;return(c=da.exec(c.substring(d,d+2)))?(a.S=+c[0],d+c[0].length):-1},x:function(a,c,d){return Eb(a,""+Pb.x,c,d)},X:function(a,c,d){return Eb(a,""+Pb.X,c,d)},y:function(a,c,d){da.lastIndex=0;return(c=da.exec(c.substring(d,d+2)))?(a.y=+c[0]+
(68<+c[0]?1900:2E3),d+c[0].length):-1},Y:function(a,c,d){da.lastIndex=0;return(c=da.exec(c.substring(d,d+4)))?(a.y=+c[0],d+c[0].length):-1}},da=/^\s*\d+/,lh=m.map({am:0,pm:1});m.time.format.utc=function(a){function c(a){try{ca=Ea;var e=new ca;return e._=a,d(e)}finally{ca=Date}}var d=m.time.format(a);return c.parse=function(a){try{ca=Ea;var c=d.parse(a);return c&&c._}finally{ca=Date}},c.toString=d.toString,c};var of=m.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");m.time.format.iso=Date.prototype.toISOString&&
+new Date("2000-01-01T00:00:00.000Z")?Lc:of;Lc.parse=function(a){a=new Date(a);return isNaN(a)?null:a};Lc.toString=of.toString;m.time.second=Fa(function(a){return new ca(1E3*Math.floor(a/1E3))},function(a,c){a.setTime(a.getTime()+1E3*Math.floor(c))},function(a){return a.getSeconds()});m.time.seconds=m.time.second.range;m.time.seconds.utc=m.time.second.utc.range;m.time.minute=Fa(function(a){return new ca(6E4*Math.floor(a/6E4))},function(a,c){a.setTime(a.getTime()+6E4*Math.floor(c))},function(a){return a.getMinutes()});
m.time.minutes=m.time.minute.range;m.time.minutes.utc=m.time.minute.utc.range;m.time.hour=Fa(function(a){var c=a.getTimezoneOffset()/60;return new ca(36E5*(Math.floor(a/36E5-c)+c))},function(a,c){a.setTime(a.getTime()+36E5*Math.floor(c))},function(a){return a.getHours()});m.time.hours=m.time.hour.range;m.time.hours.utc=m.time.hour.utc.range;m.time.month=Fa(function(a){return a=m.time.day(a),a.setDate(1),a},function(a,c){a.setMonth(a.getMonth()+c)},function(a){return a.getMonth()});m.time.months=m.time.month.range;
m.time.months.utc=m.time.month.utc.range;var Gb=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Yc=[[m.time.second,1],[m.time.second,5],[m.time.second,15],[m.time.second,30],[m.time.minute,1],[m.time.minute,5],[m.time.minute,15],[m.time.minute,30],[m.time.hour,1],[m.time.hour,3],[m.time.hour,6],[m.time.hour,12],[m.time.day,1],[m.time.day,2],[m.time.week,1],[m.time.month,1],[m.time.month,3],[m.time.year,1]],mh=[[m.time.format("%Y"),Ua],[m.time.format("%B"),
function(a){return a.getMonth()}],[m.time.format("%b %d"),function(a){return 1!=a.getDate()}],[m.time.format("%a %d"),function(a){return a.getDay()&&1!=a.getDate()}],[m.time.format("%I %p"),function(a){return a.getHours()}],[m.time.format("%I:%M"),function(a){return a.getMinutes()}],[m.time.format(":%S"),function(a){return a.getSeconds()}],[m.time.format(".%L"),function(a){return a.getMilliseconds()}]],pf=m.scale.linear(),nh=Re(mh);Yc.year=function(a,c){return pf.domain(a.map(Hg)).ticks(c).map(Oc)};
m.time.scale=function(){return Mc(m.scale.linear(),Yc,nh)};var qf=Yc.map(function(a){return[a[0].utc,a[1]]}),oh=[[m.time.format.utc("%Y"),Ua],[m.time.format.utc("%B"),function(a){return a.getUTCMonth()}],[m.time.format.utc("%b %d"),function(a){return 1!=a.getUTCDate()}],[m.time.format.utc("%a %d"),function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],[m.time.format.utc("%I %p"),function(a){return a.getUTCHours()}],[m.time.format.utc("%I:%M"),function(a){return a.getUTCMinutes()}],[m.time.format.utc(":%S"),
function(a){return a.getUTCSeconds()}],[m.time.format.utc(".%L"),function(a){return a.getUTCMilliseconds()}]],ph=Re(oh);return qf.year=function(a,c){return pf.domain(a.map(Ig)).ticks(c).map(Pc)},m.time.scale.utc=function(){return Mc(m.scale.linear(),qf,ph)},m.text=function(){return m.xhr.apply(m,arguments).response(Jg)},m.json=function(a,c){return m.xhr(a,"application/json",c).response(Kg)},m.html=function(a,c){return m.xhr(a,"text/html",c).response(Lg)},m.xml=function(){return m.xhr.apply(m,arguments).response(Mg)},
m}();
(function(d){var n=d.d3,q=Error("d3.layer must be initialized with a base"),c=Error("d3.layer must specify a `dataBind` method."),a=Error("d3.layer must specify an `insert` method."),g=function(a){if(!a)throw q;this._base=a;this._handlers={}};g.prototype.dataBind=function(){throw c;};g.prototype.insert=function(){throw a;};g.prototype.on=function(a,c,d){d=d||{};a in this._handlers||(this._handlers[a]=[]);this._handlers[a].push({callback:c,chart:d.chart||null})};g.prototype.off=function(a,c){var d,g=
this._handlers[a];if(g){if(1===arguments.length)return g.length=0,void 0;for(d=g.length-1;-1<d;--d)g[d].callback===c&&g.splice(d,1)}};g.prototype.draw=function(a){var c,d,g,q,v;if(c=this.dataBind.call(this._base,a),!(c instanceof n.selection))throw Error("Invalid selection defined by `dataBind` method.");a=c.enter();a._chart=this._base._chart;c=[{name:"update",selection:c},{name:"enter",selection:this.insert.bind(a)},{name:"merge",selection:c},{name:"exit",selection:c.exit.bind(c)}];for(var x=0,u=
c.length;u>x;++x){if(g=c[x].name,d=c[x].selection,"function"==typeof d&&(d=d()),!(d instanceof n.selection))throw Error('Invalid selection defined for "'+g+"' lifecycle event.");if(a=this._handlers[g])for(q=0,v=a.length;v>q;++q)d._chart=a[q].chart||this._base._chart,d.call(a[q].callback);if(a=this._handlers[g+":transition"],a&&a.length)for(d=d.transition(),q=0,v=a.length;v>q;++q)d._chart=a[q].chart||this._base._chart,d.call(a[q].callback)}};n.selection.prototype.layer=function(a){var c,d=new g(this);
if(d.dataBind=a.dataBind,d.insert=a.insert,"events"in a)for(c in a.events)d.on(c,a.events[c]);return this.on=function(){return d.on.apply(d,arguments)},this.off=function(){return d.off.apply(d,arguments)},this.draw=function(){return d.draw.apply(d,arguments)},this}})(this);
(function(d,n){function q(a){var c,d,f,g;if(!a)return a;d=arguments.length;for(c=1;d>c;c++)if(f=arguments[c])for(g in f)a[g]=f[g];return a}var c=d.d3,a=function(a){this.constructor=a},g=function(c,d){var f;return a.prototype=c.prototype,f=new a(c),c.apply(f,d),f},l=function(a,c){var d=this.constructor.__super__;d&&l.call(d,a,c);Object.hasOwnProperty.call(this.constructor.prototype,"initialize")&&this.initialize.apply(a,c)},f=function(a){this.base=a;this._layers={};this._mixins=[];this._events={};
l.call(this,this,Array.prototype.slice.call(arguments,1))};f.prototype.unlayer=function(a){var c=this.layer(a),c=this._layerList.indexOf(c);return delete this._layers[a],this._layerList.splice(c,1),this};f.prototype.layer=function(a,c,d){var f;return 1===arguments.length?this._layers[a]:(f=c.layer(d),this._layers[a]=f,c._chart=this,f)};f.prototype.initialize=function(){};f.prototype.transform=function(a){return a};f.prototype.mixin=function(a,c){var d=Array.prototype.slice.call(arguments,2);d.unshift(c);
d=g(f[a],d);return this._mixins.push(d),d};f.prototype.draw=function(a){var c,d;a=this.transform(a);for(c in this._layers)this._layers[c].draw(a);for(d in this._mixins)this._mixins[d].draw(a)};f.prototype.on=function(a,c,d){return(this._events[a]||(this._events[a]=[])).push({callback:c,context:d||this,_chart:this}),this};f.prototype.once=function(a,c,d){var f=this,g=function(){f.off(a,g);c.apply(this,arguments)};return this.on(a,g,d)};f.prototype.off=function(a,c,d){var f,g,l,n,q;if(0===arguments.length){for(a in this._events)this._events[a].length=
0;return this}if(1===arguments.length)return g=this._events[a],g&&(g.length=0),this;f=a?[a]:Object.keys(this._events);for(n=0;f.length>n;n++)for(g=f[n],g=this._events[g],q=g.length;q--;)l=g[q],(c&&c===l.callback||d&&d===l.context)&&g.splice(q,1);return this};f.prototype.trigger=function(a){var c,d,f=Array.prototype.slice.call(arguments,1),g=this._events[a];if(g!==n)for(c=0;g.length>c;c++)d=g[c],d.callback.apply(d.context,f);return this};f.extend=function(a,c,d){var g,l=this;g=c&&Object.hasOwnProperty.call(c,
"constructor")?c.constructor:function(){return l.apply(this,arguments)};q(g,l,d);d=function(){this.constructor=g};return d.prototype=l.prototype,g.prototype=new d,c&&q(g.prototype,c),g.__super__=l.prototype,f[a]=g,g};c.chart=function(a){return 0===arguments.length?f:1===arguments.length?f[a]:f.extend.apply(f,arguments)};c.selection.prototype.chart=function(a){if(0===arguments.length)return this._chart;var c=Array.prototype.slice.call(arguments,1);c.unshift(this);return g(f[a],c)};c.selection.enter.prototype.chart=
function(){return this._chart};c.transition.prototype.chart=c.selection.enter.prototype.chart})(this);function sortByKey(d,n){return d.sort(function(d,c){var a=d[n],g=c[n];return a<g?-1:a>g?1:0})}function parseUri(d){var n=parseUri.options;d=n.parser[n.strictMode?"strict":"loose"].exec(d);for(var q={},c=14;c--;)q[n.key[c]]=d[c]||"";q[n.q.name]={};q[n.key[12]].replace(n.q.parser,function(a,c,d){c&&(q[n.q.name][c]=d)});return q}
parseUri.options={strictMode:!1,key:"source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};
function makeUri(d){var n="";d.protocol&&(n+=d.protocol+"://");d.user&&(n+=d.user);d.password&&(n+=":"+d.password);if(d.user||d.password)n+="@";d.host&&(n+=d.host);d.port&&(n+=":"+d.port);d.path&&(n+=d.path);var q=d.queryKey,c=[];for(k in q)if(q.hasOwnProperty(k)){var a=encodeURIComponent(q[k]);k=encodeURIComponent(k);a?c.push(k+"="+a):c.push(k)}0<c.length&&(n+="?"+c.join("&"));d.anchor&&(n+="#"+d.anchor);return n}
function H1DSUri(d){this.base_uri=d;this.base_uri_components=parseUri(d);this.base_h1ds_filters=[];this.base_non_h1ds_query={};this.extra_h1ds_filters=[];this.extra_non_h1ds_query={};d={fids:[]};var n=/^f(\d+)(_(\w+))?/,q;for(q in this.base_uri_components.queryKey)if(this.base_uri_components.queryKey.hasOwnProperty(q)){var c=n.exec(q);c?(d.hasOwnProperty(c[1])||(d.fids.push(c[1]),d[c[1]]={name:"",kwargs:{},fid:parseInt(c[1])}),"undefined"===typeof c[2]?d[c[1]].name=this.base_uri_components.queryKey[q]:
d[c[1]].kwargs[c[3]]=this.base_uri_components.queryKey[q]):this.base_non_h1ds_query[q]=this.base_uri_components.queryKey[q]}for(q=0;q<d.fids.length;q++)this.base_h1ds_filters.push(d[d.fids[q]]);this.sortH1DSFilters()}H1DSUri.prototype.sortH1DSFilters=function(){this.base_h1ds_filters=sortByKey(this.base_h1ds_filters,"fid");this.extra_h1ds_filters=sortByKey(this.extra_h1ds_filters,"fid")};
H1DSUri.prototype.updateOrAddBaseFilter=function(d,n){var q=this.base_h1ds_filters.length;0<q&&this.base_h1ds_filters[q-1].name==d?this.base_h1ds_filters[q-1].kwargs=n:this.addBaseFilter(d,n)};H1DSUri.prototype.shiftExtraH1DSFilterFIDs=function(d){for(var n=0;n<this.extra_h1ds_filters.length;n++)this.extra_h1ds_filters[n].fid+=d};
H1DSUri.prototype.shiftExtraFilterIDs=function(){this.sortH1DSFilters();if(0<this.extra_h1ds_filters.length){var d=new_fid-this.extra_h1ds_filters[0].fid;0<=d&&this.shiftExtraH1DSFilterFIDs(d+1)}};H1DSUri.prototype.addBaseFilter=function(d,n){this.sortH1DSFilters();var q=this.base_h1ds_filters.length;this.base_h1ds_filters.push({name:d,kwargs:n,fid:0<q?this.base_h1ds_filters[q-1].fid+1:0});this.shiftExtraH1DSFilterFIDs(1)};
H1DSUri.prototype.addExtraFilter=function(d,n){this.sortH1DSFilters();var q=this.extra_h1ds_filters.length,c=this.base_h1ds_filters.length;this.extra_h1ds_filters.push({name:d,kwargs:n,fid:0<q?this.extra_h1ds_filters[q-1].fid+1:0<c?this.base_h1ds_filters[c-1].fid+1:0})};H1DSUri.prototype.packFilterIDs=function(){console.log(this.extra_h1ds_filters)};
H1DSUri.prototype.changeFilterID=function(d,n){for(var q=0;q<this.base_h1ds_filters.length;q++)this.base_h1ds_filters[q].fid==parseInt(d)&&(this.base_h1ds_filters[q].fid=parseInt(n));for(q=0;q<this.extra_h1ds_filters.length;q++)this.extra_h1ds_filters[q].fid==parseInt(d)&&(this.extra_h1ds_filters[q].fid=parseInt(n));this.shiftExtraFilterIDs()};
H1DSUri.prototype.renderBaseUri=function(){var d={},n;for(n in this.base_non_h1ds_query)this.base_non_h1ds_query.hasOwnProperty(n)&&(d[n]=this.base_non_h1ds_query[n]);for(n=0;n<this.base_h1ds_filters.length;n++){var q=this.base_h1ds_filters[n].fid;d["f"+q]=this.base_h1ds_filters[n].name;for(var c in this.base_h1ds_filters[n].kwargs)d["f"+q+"_"+c]=this.base_h1ds_filters[n].kwargs[c]}c=jQuery.extend({},this.base_uri_components);c.queryKey=d;return makeUri(c)};
H1DSUri.prototype.renderExtraUri=function(){var d={},n;for(n in this.base_non_h1ds_query)this.base_non_h1ds_query.hasOwnProperty(n)&&(d[n]=this.base_non_h1ds_query[n]);for(var q=0;q<this.base_h1ds_filters.length;q++){var c=this.base_h1ds_filters[q].fid;d["f"+c]=this.base_h1ds_filters[q].name;for(var a in this.base_h1ds_filters[q].kwargs)d["f"+c+"_"+a]=this.base_h1ds_filters[q].kwargs[a]}for(n in this.extra_non_h1ds_query)this.extra_non_h1ds_query.hasOwnProperty(n)&&(d[n]=this.extra_non_h1ds_query[n]);
for(q=0;q<this.extra_h1ds_filters.length;q++)for(a in c=this.extra_h1ds_filters[q].fid,d["f"+c]=this.extra_h1ds_filters[q].name,this.extra_h1ds_filters[q].kwargs)d["f"+c+"_"+a]=this.extra_h1ds_filters[q].kwargs[a];n=jQuery.extend({},this.base_uri_components);n.queryKey=d;return makeUri(n)};H1DSUri.prototype.isBinary=function(){return"bin"===this.base_non_h1ds_query.format};
H1DSUri.prototype.getShot=function(){var d=this.uri_components.path;"/"!==d[d.length-1]&&(d+="/");d=d.match(/\/\d+\//);return null===d?0:Number(d[0].substring(1,d[0].length-1))};H1DSUri.prototype.setShot=function(d){var n=this.uri_components.path;"/"!==n[n.length-1]&&(n+="/");d=n.replace(/\/\d+\//,"/"+d+"/");this.uri_components.path=d};d3.chart("dvBaseChart",{initialize:function(){var d=this,n=this.base.append("g").classed("graph-background",!0);d.main=d.base.append("g").attr("class","chart-main");d.brush=d3.svg.brush();d.margin={top:10,right:10,bottom:10,left:10};d._width=100;d._height=100;d.rmin=function(n){if(n.hasOwnProperty("length")){for(var c=[],a=0;a<n.length;a++)c.push(d.rmin(n[a]));return d3.min(c)}return n};d.rmax=function(n){if(n.hasOwnProperty("length")){for(var c=[],a=0;a<n.length;a++)c.push(d.rmax(n[a]));return d3.max(c)}return n};
this.source=function(d){arguments.length||this.source_data;this.source_data=d};this.load_data=function(){d.data=[];for(var n=0;n<d.source_data.length;n++)d.data.push(d.source_data[n].url_parser(d.source_data[n].url,d.source_data[n].modifiers))};this.render=function(){d.draw(d.data)};this.set_margin=function(n){var c=d._width+d.margin.left+d.margin.right,a=d._height+d.margin.bottom+d.margin.top;d.margin=n;d.base.select("g.chart-main").attr("transform","translate("+d.margin.left+","+d.margin.top+")");
d._width=c-d.margin.left-d.margin.right;d._height=a-d.margin.top-d.margin.bottom};this.set_margin({top:10,right:10,bottom:10,left:10});this.layer("background",n,{dataBind:function(d){return this.selectAll("rect.background").data([d])},insert:function(){return this.insert("rect").attr("class","background").attr("x",0).attr("y",0).attr("width",d._width+d.margin.left+d.margin.right).attr("height",d._height+d.margin.top+d.margin.bottom)}})},width:function(d){if(!arguments.length)return this._width+this.margin.left+
this.margin.right;this._width=d-this.margin.left-this.margin.right;this.base.select("g rect.background").attr("width",d);return this},height:function(d){if(!arguments.length)return this._height+this.margin.top+this.margin.bottom;this._height=d-this.margin.top-this.margin.bottom;this.base.select("g rect.background").attr("y",d).attr("height",d);return this}});
d3.chart("dvBaseChart").extend("dvTimeSeriesChart",{initialize:function(){var d=this;this.set_margin({top:50,right:50,bottom:50,left:50});this.xScale=d3.scale.linear().range([0,d._width]);this.yScale=d3.scale.linear().range([d._height,0]);this.xAxis=d3.svg.axis().scale(this.xScale).orient("bottom");this.yAxis=d3.svg.axis().scale(this.yScale).orient("left");this.colors=d3.scale.category20().range();this.layer("xAxis",d.main.append("g"),{dataBind:function(a){d.data=a;return this.selectAll("g.x.axis").data([a])},
insert:function(){return this.insert("g").attr("class","x axis").attr("transform",function(a){return"translate(0,"+d._height+")"})},events:{merge:function(){d.xScale.range([0,d._width]).domain([d3.min(d.data,function(a){return d.rmin(a.dimension)}),d3.max(d.data,function(a){return d.rmax(a.dimension)})]);return this.call(d.xAxis)},enter:function(){d.xScale.range([0,d._width]).domain([d3.min(d.data,function(a){return d.rmin(a.dimension)}),d3.max(d.data,function(a){return d.rmax(a.dimension)})]);return this.call(d.xAxis)},
exit:function(){return this.remove()}}});this.layer("yAxis",d.main.append("g"),{dataBind:function(a){d.data=a;return this.selectAll("g.y.axis").data([a])},insert:function(){return this.append("g").attr("class","y axis").attr("transform",function(a){return"translate(0,0)"})},events:{merge:function(){var a=d3.min(d.data,function(a){return d.rmin(a.value)}),c=d3.max(d.data,function(a){return d.rmax(a.value)}),l=0.05*(c-a);d.yScale.range([d._height,0]).domain([a-l,c+l]);return this.call(d.yAxis)},enter:function(){var a=
d3.min(d.data,function(a){return d.rmin(a.value)}),c=d3.max(d.data,function(a){return d.rmax(a.value)}),l=0.05*(c-a);d.yScale.range([d._height,0]).domain([a-l,c+l]);return this.call(d.yAxis)},exit:function(){return this.remove()}}});var n=d3.svg.line().x(function(a){return d.xScale(a[0])}).y(function(a){return d.yScale(a[1])}),q=function(a){for(var c=[],d=0,f=0;f<a.length;f++){var n;n=a[f];var q=[],P=0;"undefined"!==typeof n.metadata.minmax_pairs&&(P=n.metadata.minmax_pairs.length);var v=d3.range(n.value.length);
if(0<P)for(var x=0;x<P;x++){v.splice(v.indexOf(n.metadata.minmax_pairs[x][0]),1);v.splice(v.indexOf(n.metadata.minmax_pairs[x][1]),1);for(var u=[],I=0;I<n.value[n.metadata.minmax_pairs[x][0]].length;I++)u.push([n.dimension[0][I],n.value[n.metadata.minmax_pairs[x][0]][I]]);for(I=n.value[n.metadata.minmax_pairs[x][1]].length-1;0<=I;I--)u.push([n.dimension[0][I],n.value[n.metadata.minmax_pairs[x][1]][I]]);u.closeLine=!0;u.fillLine=!0;q.push(u)}for(x=0;x<v.length;x++){P=v[x];u=[];for(I=0;I<n.value[P].length;I++)u.push([n.dimension[0][I],
n.value[P][I]]);u.closeLine=!1;u.fillLine=!1;q.push(u)}n=q;for(q=0;q<n.length;q++)v=n[q],v.color_index=d,c.push(v),++d}return c};this.layer("data",d.main.append("g"),{dataBind:function(a){d.data=a;return this.selectAll("path.signal").data(q(d.data))},insert:function(){return this.append("path")},events:{merge:function(){return this.attr("class","signal").style("stroke",function(a,c){return d.colors[2*a.color_index]}).style("fill",function(a,c){return a.fillLine?d.colors[2*a.color_index+1]:"none"}).style("fill-opacity",
0.5).attr("d",function(a,c){return n(a)+(a.closeLine?"Z":"")})},enter:function(){return this.attr("class","signal").style("stroke",function(a,c){return d.colors[2*a.color_index]}).style("fill",function(a,c){return a.fillLine?d.colors[2*a.color_index+1]:"none"}).style("fill-opacity",0.5).attr("d",function(a,c){return n(a)+(a.closeLine?"Z":"")})},exit:function(){return this.remove()}}});var c=function(){for(var a=0;a<d.source_data.length;a++)d.source_data[a].modifiers.min=d.brush.extent()[0],d.source_data[a].modifiers.max=
d.brush.extent()[1];d.load_data();d.render()};this.layer("interactive",d.main,{dataBind:function(a){d.data=a;return this.selectAll("g.brush").data([d.data])},insert:function(){d.brush.clear();return this.append("g").attr("class","brush")},events:{merge:function(){d.brush=d3.svg.brush().x(d.xScale).on("brushend",c);return this.call(d.brush).selectAll("rect").attr("y",0).attr("height",d._height)}}})}});
dataviewer=function(){var d={margin:{top:10,right:10,bottom:10,left:10},_width:100,_height:100,n_columns:10,n_rows:10,create:function(n){d.basenode=d3.select(n);d.width(parseInt(d.basenode.style("width")));d.height(parseInt(d3.min([d.width()/1.61803398875,d.basenode.style("height")])));d.base=d.basenode.append("svg").attr("width",function(c){return d.width()}).attr("height",function(c){return d.height()}).append("g").attr("transform",function(c){return"translate("+d.margin.left+","+d.margin.top+")"});
d.xScale=d3.scale.linear().domain([0,d.n_columns]).range([0,d._width]);d.yScale=d3.scale.linear().domain([0,d.n_rows]).range([d._height,0]);d.column_width=d._width/d.n_columns;d.row_height=d._height/d.n_rows;d.background_grid=d.base.append("g").attr("class","pagelet-grid");for(var q=0;q<=d.n_columns;q++)d.background_grid.append("line").attr("x1",function(){return Math.round(q*d.column_width)}).attr("x2",function(){return Math.round(q*d.column_width)}).attr("y1",0).attr("y2",d._height);for(q=0;q<=
d.n_rows;q++)d.background_grid.append("line").attr("x1",0).attr("x2",d._width).attr("y1",function(){return Math.round(q*d.row_height)}).attr("y2",function(){return Math.round(q*d.row_height)});return d},data:function(n){d.data=d.updateCoords(n)},draw:function(){for(var n=0;n<d.data.length;n++){var q=d.base.append("g").attr("class","chart").attr("transform","translate("+d.data[n].px_coords[0]+","+d.data[n].px_coords[3]+")").chart("dvTimeSeriesChart");q.width(d.data[n].px_coords[2]-d.data[n].px_coords[0]);
q.height(d.data[n].px_coords[1]-d.data[n].px_coords[3]);q.source(d.data[n].data);q.load_data();q.render()}},updateCoords:function(n){for(var q=0;q<n.length;q++){n[q].px_coords=[d.xScale(n[q].plot_coords[0]),d.yScale(n[q].plot_coords[1]),d.xScale(n[q].plot_coords[2]),d.yScale(n[q].plot_coords[3])];for(var c=0;c<n[q].data.length;c++)n[q].data[c].hasOwnProperty("modifiers")||(n[q].data[c].modifiers={}),n[q].data[c].modifiers.width=parseInt(d.xScale(n[q].plot_coords[2])-d.xScale(n[q].plot_coords[0]))}return n},
width:function(n){if(!arguments.length)return d._width+d.margin.left+d.margin.right;d._width=n-d.margin.left-d.margin.right},height:function(n){if(!arguments.length)return d._height+d.margin.top+d.margin.bottom;d._height=n-d.margin.top-d.margin.bottom}};return d}();var golden_ratio=1.61803398875;$("#masonry-container").masonry({itemSelector:".mbox",columnWidth:384});$.fn.scrollView=function(){return this.each(function(){$("html, body").animate({scrollTop:$(this).offset().top},0)})};
$(function(){$(".column").each(function(d){var n=this;$(n).sortable({connectWith:".column",handle:".portlet-header",update:function(d,c){$.cookie("sortorder"+n.id,$(n).sortable("toArray").join(),{path:"/"})}})});$(".portlet").addClass("ui-widget ui-widget-content ui-helper-clearfix ui-corner-all").find(".portlet-header").addClass("ui-widget-header ui-corner-all").prepend("<span class='ui-icon ui-icon-minusthick'></span>").end().find(".portlet-content");$(".portlet-header .ui-icon").click(function(){$(this).toggleClass("ui-icon-minusthick").toggleClass("ui-icon-plusthick");
$(this).parents(".portlet:first").find(".portlet-content").toggle($.cookie($(this).parents(".portlet:first")[0].id,$(this).parents(".portlet:first").find(".portlet-content").is(":hidden")?"expanded":"collapsed",{path:"/"}))})});
function loadCookie(){$(".column").each(function(d){d=$.cookie("sortorder"+this.id);var n=this;d&&$(d.split(",")).each(function(d,c){$("#"+c).appendTo(n)});$(this).sortable()});$(".portlet").each(function(d){(d=$.cookie(this.id))&&"collapsed"===d&&($(this).find(".ui-icon").toggleClass("ui-icon-minusthick").toggleClass("ui-icon-plusthick"),$(this).find(".portlet-content").hide())});"true"===$.cookie("shotTracking")?turnOnShotTracker():turnOffShotTracker()}var shot_stream_client=new XMLHttpRequest;
function turnOffShotTracker(){$("#h1ds-track-latest-shot").hide();$("#h1ds-shot-controller").show();$("#h1ds-toggle-track-latest-shot").html('<FORM class="inline-form right" action="." onsubmit="javascript:toggleTrackLatestShot()" method="post"><INPUT type="submit" id="h1ds-toggletrack-shot" name="h1ds-toggletrack-shot" value="track latest shot"></FORM>');$.cookie("shotTracking","false",{path:"/"});shot_stream_client.abort()}
function turnOnShotTracker(){$("#h1ds-shot-controller").hide();$("#h1ds-track-latest-shot").show();$("#h1ds-toggletrack-latest-shot").html('<FORM class="inline-form right" action="." onsubmit="javascript:toggleTrackLatestShot()" method="post"><INPUT type="submit" id="h1ds-toggletrack-shot" name="h1ds-toggletrack-shot" value="stop tracking latest shot"></FORM>');$.cookie("shotTracking","true",{path:"/"});shot_stream_client.open("get","/_/shot_stream/");shot_stream_client.send();shot_stream_client.onprogress=
function(){var d=this.responseText.split("\n");$.getJSON("/_/url_for_shot",{input_path:window.location.toString(),shot:d[d.length-2]},function(d){window.location=d.new_url})}}function toggleTrackLatestShot(){"true"===$.cookie("shotTracking")?turnOffShotTracker():turnOnShotTracker();return!1}
function autoPollSummaryDB(){var d=d3.select("#poll-summarydb-server");if(null!==d[0][0]&&"True"===d.text()){var n=null,q=window.location.toString()+(window.location.search+(window.location.search.length?"&":"?")+"format=json"),c=d3.select("table.main-table tbody"),a=function(a){$.ajax({url:q,dataType:"json",async:!1}).done(function(d){n=new Date(d.timestamp);d=c.selectAll("tr").data(cross(d),function(a){return a[0].shot});d.enter().insert("tr","tr").style("background-color","yellow");var f=d.selectAll("td").data(function(a){return a});
f.enter().append("td").html(function(a,c){return'<a href="/summary/_/go_to_source/'+a.attr+"/"+a.shot+'/" >'+a.value+"</a>"});f.transition().duration(500).each(function(a){d3.select(this).html(function(a,c){return'<a href="/summary/_/go_to_source/'+a.attr+"/"+a.shot+'/" >'+a.value+"</a>"})});d.transition().duration(a).style("background-color","white");d.exit().remove()})};a(1E3);setInterval(function(){summaryUpdateRequired(n)&&a(3E5)},2E3)}}
function getLastShotInDisplayedPage(){var d=-1;d3.selectAll("table.main-table tr").each(function(n,q){if(0<q){var c=Number(d3.select(this).select("td").text());c>d&&(d=c)}});return d}function summaryUpdateRequired(d){$.ajax({url:"/summary/_/get_last_update_time/",dataType:"json",async:!1}).done(function(d){latest_summdb_update=new Date(d.last_update)});return latest_summdb_update>d}
function updateSummaryDB(){var d=getLastShotInDisplayedPage(),n=-1;$.ajax({url:"/summary/_/get_latest_summarydb_shot/",dataType:"json",async:!1}).done(function(d){n=Number(d.latest_shot)});n>d&&$.ajax({url:window.location.toString()+(window.location.search+(window.location.search.length?"&":"?")+"format=json"),dataType:"json",async:!1}).done(function(d){})}
function cross(d){var n=[],q,c;for(q=0;q<d.data.length;q++)for(n[q]=[],n[q].shot,c=0;c<d.attributes.length;c++)n[q][c]={shot:d.data[q].shot,attr:d.attributes[c],value:d.data[q].d[c]};return n}$("span.toggleVertical").each(function(){"true"===$.cookie("vertical-"+$(this).text())&&($(this).toggleClass("verticalText"),$(this).html($(this).text().replace(/(.)/g,"$1<br />")))});
$("span.toggleVertical").click(function(){$(this).toggleClass("verticalText");$(this).hasClass("verticalText")?($(this).html($(this).text().replace(/(.)/g,"$1<br />")),$.cookie("vertical-"+$(this).text(),!0)):($(this).html($(this).text().replace("$1<br />","")),$.cookie("vertical-"+$(this).text(),!1))});d3.select(window).on("mousemove",mousemove).on("mouseup",mouseup);var rect,x0,x1,count,par_rect;
function mousedown(){x0=d3.mouse(this);count=0;par_rect=d3.select(this);rect=d3.select(this.parentNode).append("svg:rect").attr("y",par_rect.attr("y")).attr("height",par_rect.attr("height")).style("fill","#999").style("fill-opacity",0.5);d3.event.preventDefault()}function mousemove(){if(rect){x1=d3.mouse(rect.node());var d=Math.min(x0[0],x1[0]),n=Math.max(x0[0],x1[0]);Math.min(x0[1],x1[1]);Math.max(x0[1],x1[1]);rect.attr("x",d-0.5).attr("width",n-d+1)}}
function mouseup(){rect&&(rect.each(function(d){var n=d.xAxis.scale().invert(d3.select(this).attr("x"));d=d.xAxis.scale().invert(+d3.select(this).attr("x")+ +d3.select(this).attr("width"));var q=new H1DSUri(window.location.href),c=Number(q.getNextFilterID());0==c?q.appendFilter("dim_range",{min:n,max:d}):(c-=1,"dim_range"===q.h1ds_filters[String(c)].name?q.h1ds_filters[String(c)].kwargs={min:n,max:d}:q.appendFilter("dim_range",{min:n,max:d}));$(".h1ds-pagelet").each(function(){d3.select(this).html("");
populatePagelet($(this),q.renderUri())});Modernizr.history&&history.pushState(null,null,q.renderUri())}),rect.remove(),rect=null)}function getSpectrogramUri(d){d=new H1DSUri(d);d.addExtraFilter("slanted_baseline",{window:10});d.addExtraFilter("spectrogram",{bin_size:-1});d.addExtraFilter("norm_dim_range_2d",{x_min:0,x_max:1,y_min:0,y_max:0.5});d.addExtraFilter("y_axis_energy_limit",{threshold:0.995});d.extra_non_h1ds_query.format="bin";d.extra_non_h1ds_query.bin_assert_dtype="uint8";return d}
function getPowerspectrumUri(d,n){var q=new H1DSUri(d);q.addExtraFilter("slanted_baseline",{window:10});q.addExtraFilter("power_spectrum",{});q.addExtraFilter("norm_dim_range",{min:0,max:0.5});q.addExtraFilter("resample_minmax",{n_bins:n});q.extra_non_h1ds_query.format="json";return q}function getRawUri(d,n){var q=new H1DSUri(d);q.addExtraFilter("resample_minmax",{n_bins:n});q.extra_non_h1ds_query.format="json";return q}
ProcessH1DSHeaders=function(d){d=d.split("\n");for(var n={},q=0;q<d.length;q++){var c=d[q].split(":");2===c.length&&c[0].match("^X-H1DS")&&(n[c[0]]=$.trim(c[1]))}return n};
ProcessBinaryData=function(d,n){for(var q=new Uint8Array(str2ab(d)),c=parseInt(n["X-H1DS-ndim"]),a=0,g={data:[],dim:[],n_dim:c},l=0;l<c;l++){g.dim[l]=[];for(var f=parseInt(n["X-H1DS-dim-"+l+"-length"]),p=parseFloat(n["X-H1DS-dim-"+l+"-delta"]),B=parseFloat(n["X-H1DS-dim-"+l+"-first"]),P=0;P<f;P++)g.dim[l][P]=p*P+B}l=parseFloat(n["X-H1DS-data-delta"]);f=parseFloat(n["X-H1DS-data-min"]);if(0<c)for(p=parseInt(n["X-H1DS-dim-0-length"]),parseFloat(n["X-H1DS-dim-0-delta"]),parseFloat(n["X-H1DS-dim-0-first"]),
B=0;B<p;B++)if(1<c){g.data[B]=[];P=parseInt(n["X-H1DS-dim-1-length"]);parseFloat(n["X-H1DS-dim-1-delta"]);parseFloat(n["X-H1DS-dim-1-first"]);for(var v=0;v<P;v++)if(2<c){g.data[B][v]=[];var x=parseInt(n["X-H2DS-dim-2-length"]);parseFloat(n["X-H1DS-dim-2-delta"]);parseFloat(n["X-H1DS-dim-2-first"]);for(var u=0;u<x;u++)g.data[B][v][u]=l*q[a]+f,a++}else g.data[B][v]=q[a],a++}else g.data[B]=l*q[a]+f,a++;return g};function ab2str(d){return String.fromCharCode.apply(null,new Uint8Array(d))}
function str2ab(d){for(var n=new ArrayBuffer(d.length),q=new Uint8Array(n),c=0,a=d.length;c<a;c++)q[c]=d.charCodeAt(c);return n}var plotState={};function datamap(d){}
function testWorksheet(){function d(c,a){var d=getRawUri(c,a.width);a.hasOwnProperty("min")&&d.updateOrAddBaseFilter("dim_range",{min:a.min,max:a.max});var l;$.ajax({url:d.renderExtraUri(),dataType:"json",async:!1}).done(function(a){l=a.data});return l}var n=[{plot_coords:[0,5,10,10],modifiers:{},data:[{url:window.location.toString(),url_parser:d},{url:"http://localhost:8000/data/58063/h1data/operations/a14_1/input_2/",url_parser:d}]},{plot_coords:[0,0,10,5],modifiers:{},data:[{url:window.location.toString(),
url_parser:d}]}],q=dataviewer.create("div.h1ds-pagelet");q.data(n);q.draw()}$(document).ready(function(){$("#main").scrollView();autoPollSummaryDB();loadCookie();testWorksheet()});
