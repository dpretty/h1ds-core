window.log=function(){log.history=log.history||[];log.history.push(arguments);if(this.console){arguments.callee=arguments.callee.caller;var e=[].slice.call(arguments);"object"===typeof console.log?log.apply.call(console.log,console,e):console.log.apply(console,e)}};
(function(e){function n(){}for(var q="assert count debug dir dirxml error exception group groupCollapsed groupEnd info log timeStamp profile profileEnd time timeEnd trace warn".split(" "),c;c=q.pop();)e[c]=e[c]||n})(function(){try{return console.log(),window.console}catch(e){return window.console={}}}());
function parseUri(e){var n=parseUri.options;e=n.parser[n.strictMode?"strict":"loose"].exec(e);for(var q={},c=14;c--;)q[n.key[c]]=e[c]||"";q[n.q.name]={};q[n.key[12]].replace(n.q.parser,function(c,h,l){h&&(q[n.q.name][h]=l)});return q}
parseUri.options={strictMode:!1,key:"source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};
function makeUri(e){var n="";e.protocol&&(n+=e.protocol+"://");e.user&&(n+=e.user);e.password&&(n+=":"+e.password);if(e.user||e.password)n+="@";e.host&&(n+=e.host);e.port&&(n+=":"+e.port);e.path&&(n+=e.path);var q=e.queryKey,c=[];for(k in q)if(q.hasOwnProperty(k)){var a=encodeURIComponent(q[k]);k=encodeURIComponent(k);a?c.push(k+"="+a):c.push(k)}0<c.length&&(n+="?"+c.join("&"));e.anchor&&(n+="#"+e.anchor);return n}
(function(e){function n(n){if("string"===typeof n.data){var c=n.handler,a=n.data.toLowerCase().split(" ");n.handler=function(h){if(this===h.target||!/textarea|select/i.test(h.target.nodeName)&&"text"!==h.target.type){var l="keypress"!==h.type&&e.hotkeys.specialKeys[h.which],g=String.fromCharCode(h.which).toLowerCase(),s="",x={};h.altKey&&"alt"!==l&&(s+="alt+");h.ctrlKey&&"ctrl"!==l&&(s+="ctrl+");h.metaKey&&(!h.ctrlKey&&"meta"!==l)&&(s+="meta+");h.shiftKey&&"shift"!==l&&(s+="shift+");l?x[s+l]=!0:(x[s+
g]=!0,x[s+e.hotkeys.shiftNums[g]]=!0,"shift+"===s&&(x[e.hotkeys.shiftNums[g]]=!0));l=0;for(g=a.length;l<g;l++)if(x[a[l]])return c.apply(this,arguments)}}}}e.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",
110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};e.each(["keydown","keyup","keypress"],function(){e.event.special[this]={add:n}})})(jQuery);"use strict";
(function(){if(!jQuery||!jQuery.jstree){var e=!1,n=!1,q=!1;(function(c){c.vakata={};c.vakata.css={get_css:function(c,a,g){c=c.toLowerCase();var h=g.cssRules||g.rules,l=0;do{if(h.length&&l>h.length+5)break;if(h[l].selectorText&&h[l].selectorText.toLowerCase()==c)return!0===a?(g.removeRule&&g.removeRule(l),g.deleteRule&&g.deleteRule(l),!0):h[l]}while(h[++l]);return!1},add_css:function(s,a){if(c.jstree.css.get_css(s,!1,a))return!1;a.insertRule?a.insertRule(s+" { }",0):a.addRule(s,null,0);return c.vakata.css.get_css(s)},
remove_css:function(s,a){return c.vakata.css.get_css(s,!0,a)},add_sheet:function(s){var a=!1,g=!0;if(s.str)return s.title&&(a=c("style[id='"+s.title+"-stylesheet']")[0]),a?g=!1:(a=document.createElement("style"),a.setAttribute("type","text/css"),s.title&&a.setAttribute("id",s.title+"-stylesheet")),a.styleSheet?g?(document.getElementsByTagName("head")[0].appendChild(a),a.styleSheet.cssText=s.str):a.styleSheet.cssText=a.styleSheet.cssText+" "+s.str:(a.appendChild(document.createTextNode(s.str)),document.getElementsByTagName("head")[0].appendChild(a)),
a.sheet||a.styleSheet;if(s.url)if(document.createStyleSheet)try{document.createStyleSheet(s.url)}catch(h){}else return a=document.createElement("link"),a.rel="stylesheet",a.type="text/css",a.media="all",a.href=s.url,document.getElementsByTagName("head")[0].appendChild(a),a.styleSheet}};var a=[],h=-1,l={},g={};c.fn.jstree=function(s){var g="string"==typeof s,h=Array.prototype.slice.call(arguments,1),e=this;if(g){if("_"==s.substring(0,1))return e;this.each(function(){var g=a[c.data(this,"jstree_instance_id")],
g=g&&c.isFunction(g[s])?g[s].apply(g,h):g;if("undefined"!==typeof g&&(0===s.indexOf("is_")||!0!==g&&!1!==g))return e=g,!1})}else this.each(function(){var g=c.data(this,"jstree_instance_id"),x=[],e=s?c.extend({},!0,s):{},v=c(this),n=!1,q=[],x=x.concat(h);v.data("jstree")&&x.push(v.data("jstree"));e=x.length?c.extend.apply(null,[!0,e].concat(x)):e;"undefined"!==typeof g&&a[g]&&a[g].destroy();g=parseInt(a.push({}),10)-1;c.data(this,"jstree_instance_id",g);e.plugins=c.isArray(e.plugins)?e.plugins:c.jstree.defaults.plugins.slice();
e.plugins.unshift("core");e.plugins=e.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");n=c.extend(!0,{},c.jstree.defaults,e);n.plugins=e.plugins;c.each(l,function(a,s){-1===c.inArray(a,n.plugins)?(n[a]=null,delete n[a]):q.push(a)});n.plugins=q;a[g]=new c.jstree._instance(g,c(this).addClass("jstree jstree-"+g),n);c.each(a[g]._get_settings().plugins,function(c,s){a[g].data[s]={}});c.each(a[g]._get_settings().plugins,function(c,s){l[s]&&
l[s].__init.apply(a[g])});setTimeout(function(){a[g]&&a[g].init()},0)});return e};c.jstree={defaults:{plugins:[]},_focused:function(){return a[h]||null},_reference:function(s){if(a[s])return a[s];var g=c(s);g.length||"string"!==typeof s||(g=c("#"+s));return g.length?a[g.closest(".jstree").data("jstree_instance_id")]||null:null},_instance:function(a,g,h){this.data={core:{}};this.get_settings=function(){return c.extend(!0,{},h)};this._get_settings=function(){return h};this.get_index=function(){return a};
this.get_container=function(){return g};this.get_container_ul=function(){return g.children("ul:eq(0)")};this._set_settings=function(a){h=c.extend(!0,{},h,a)}},_fn:{},plugin:function(a,g){g=c.extend({},{__init:c.noop,__destroy:c.noop,_fn:{},defaults:!1},g);l[a]=g;c.jstree.defaults[a]=g.defaults;c.each(g._fn,function(g,h){h.plugin=a;h.old=c.jstree._fn[g];c.jstree._fn[g]=function(){var a,s=h,l=Array.prototype.slice.call(arguments);a=new c.Event("before.jstree");var x=!1;if(!0!==this.data.core.locked||
"unlock"===g||"is_locked"===g){do{if(s&&s.plugin&&-1!==c.inArray(s.plugin,this._get_settings().plugins))break;s=s.old}while(s);if(s){if(0===g.indexOf("_"))a=s.apply(this,l);else{a=this.get_container().triggerHandler(a,{func:g,inst:this,args:l,plugin:s.plugin});if(!1===a)return;"undefined"!==typeof a&&(l=a);a=s.apply(c.extend({},this,{__callback:function(a){this.get_container().triggerHandler(g+".jstree",{inst:this,args:l,rslt:a,rlbk:x})},__rollback:function(){return x=this.get_rollback()},__call_old:function(a){return s.old.apply(this,
a?Array.prototype.slice.call(arguments,1):l)}}),l)}return a}}};c.jstree._fn[g].old=h.old;c.jstree._fn[g].plugin=a})},rollback:function(s){s&&(c.isArray(s)||(s=[s]),c.each(s,function(c,s){a[s.i].set_rollback(s.h,s.d)}))}};c.jstree._fn=c.jstree._instance.prototype={};c(function(){var a=navigator.userAgent.toLowerCase(),g=(a.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],h=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a > ins { height:16px; width:16px; } .jstree a > .jstree-icon { margin-right:3px; } .jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } ";
if(/msie/.test(a)&&6==parseInt(g,10)){e=!0;try{document.execCommand("BackgroundImageCache",!1,!0)}catch(l){}h+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}/msie/.test(a)&&
7==parseInt(g,10)&&(n=!0,h+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } ");!/compatible/.test(a)&&(/mozilla/.test(a)&&1.9>parseFloat(g,10))&&(q=!0,h+=".jstree ins { display:-moz-inline-box; } .jstree li { line-height:12px; } .jstree a { display:-moz-inline-box; } .jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } ");c.vakata.css.add_sheet({str:h,title:"jstree"})});c.jstree.plugin("core",{__init:function(){this.data.core.locked=!1;this.data.core.to_open=
this.get_settings().core.initially_open;this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:!1,animation:500,initially_open:[],initially_load:[],open_parents:!0,notify_plugins:!0,rtl:!1,load_open:!1,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus();this._get_settings().core.rtl&&this.get_container().addClass("jstree-rtl").css("direction","rtl");this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+
this._get_string("loading")+"</a></li></ul>");this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18;this.get_container().delegate("li > ins","click.jstree",c.proxy(function(a){a=c(a.target);this.toggle_node(a)},this)).bind("mousedown.jstree",c.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(a){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){a=window.getSelection();
try{a.removeAllRanges(),a.collapse()}catch(c){}}});this._get_settings().core.notify_plugins&&this.get_container().bind("load_node.jstree",c.proxy(function(a,g){var h=this._get_node(g.rslt.obj),l=this;-1===h&&(h=this.get_container_ul());h.length&&h.find("li").each(function(){var a=c(this);a.data("jstree")&&c.each(a.data("jstree"),function(s,g){l.data[s]&&c.isFunction(l["_"+s+"_notify"])&&l["_"+s+"_notify"].call(l,a,g)})})},this));this._get_settings().core.load_open&&this.get_container().bind("load_node.jstree",
c.proxy(function(a,g){var h=this._get_node(g.rslt.obj),l=this;-1===h&&(h=this.get_container_ul());h.length&&h.find("li.jstree-open:not(:has(ul))").each(function(){l.load_node(this,c.noop,c.noop)})},this));this.__callback();this.load_node(-1,function(){this.loaded();this.reload_nodes()})},destroy:function(){var s,g=this.get_index(),e=this._get_settings(),v=this;c.each(e.plugins,function(a,c){try{l[c].__destroy.apply(v)}catch(s){}});this.__callback();if(this.is_focused())for(s in a)if(a.hasOwnProperty(s)&&
s!=g){a[s].set_focus();break}g===h&&(h=-1);this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")});c(document).unbind(".jstree-"+g).undelegate(".jstree-"+g);a[g]=null;delete a[g]},_core_notify:function(a,c){c.opened&&this.open_node(a,!1,!0)},lock:function(){this.data.core.locked=!0;this.get_container().children("ul").addClass("jstree-locked").css("opacity",
"0.7");this.__callback({})},unlock:function(){this.data.core.locked=!1;this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1");this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var a=this;this.data.core.to_open=[];this.get_container_ul().find("li.jstree-open").each(function(){this.id&&a.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,
"\\.").replace(/\:/g,"\\:"))});this.__callback(a.data.core.to_open)},save_loaded:function(){},reload_nodes:function(a){var g=this,h=!0,l=[],e=[];a||(this.data.core.reopen=!1,this.data.core.refreshing=!0,this.data.core.to_open=c.map(c.makeArray(this.data.core.to_open),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_load=c.map(c.makeArray(this.data.core.to_load),function(a){return"#"+
a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_open.length&&(this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open)));this.data.core.to_load.length&&(c.each(this.data.core.to_load,function(a,s){if("#"==s)return!0;c(s).length?l.push(s):e.push(s)}),l.length&&(this.data.core.to_load=e,c.each(l,function(a,c){g._is_loaded(c)||(g.load_node(c,function(){g.reload_nodes(!0)},function(){g.reload_nodes(!0)}),
h=!1)})));this.data.core.to_open.length&&c.each(this.data.core.to_open,function(a,c){g.open_node(c,!1,!0)});h&&(this.data.core.reopen&&clearTimeout(this.data.core.reopen),this.data.core.reopen=setTimeout(function(){g.__callback({},g)},50),this.data.core.refreshing=!1,this.reopen())},reopen:function(){var a=this;this.data.core.to_open.length&&c.each(this.data.core.to_open,function(c,g){a.open_node(g,!1,!0)});this.__callback({})},refresh:function(a){var c=this;this.save_opened();a||(a=-1);(a=this._get_node(a))||
(a=-1);-1!==a?a.children("UL").remove():this.get_container_ul().empty();this.load_node(a,function(){c.__callback({obj:a});c.reload_nodes()})},loaded:function(){this.__callback()},set_focus:function(){if(!this.is_focused()){var a=c.jstree._focused();a&&a.unset_focus();this.get_container().addClass("jstree-focused");h=this.get_index();this.__callback()}},is_focused:function(){return h==this.get_index()},unset_focus:function(){this.is_focused()&&(this.get_container().removeClass("jstree-focused"),h=
-1);this.__callback()},_get_node:function(a){var g=c(a,this.get_container());if(g.is(".jstree")||-1==a)return-1;g=g.closest("li",this.get_container());return g.length?g:!1},_get_next:function(a,c){a=this._get_node(a);return-1===a?this.get_container().find("> ul > li:first-child"):a.length?c?0<a.nextAll("li").size()?a.nextAll("li:eq(0)"):!1:a.hasClass("jstree-open")?a.find("li:eq(0)"):0<a.nextAll("li").size()?a.nextAll("li:eq(0)"):a.parentsUntil(".jstree","li").next("li").eq(0):!1},_get_prev:function(a,
c){a=this._get_node(a);if(-1===a)return this.get_container().find("> ul > li:last-child");if(!a.length)return!1;if(c)return 0<a.prevAll("li").length?a.prevAll("li:eq(0)"):!1;if(a.prev("li").length){for(a=a.prev("li").eq(0);a.hasClass("jstree-open");)a=a.children("ul:eq(0)").children("li:last");return a}var g=a.parentsUntil(".jstree","li:eq(0)");return g.length?g:!1},_get_parent:function(a){a=this._get_node(a);if(-1==a||!a.length)return!1;a=a.parentsUntil(".jstree","li:eq(0)");return a.length?a:-1},
_get_children:function(a){a=this._get_node(a);return-1===a?this.get_container().children("ul:eq(0)").children("li"):a.length?a.children("ul:eq(0)").children("li"):!1},get_path:function(a,c){var g=[],h=this;a=this._get_node(a);if(-1===a||!a||!a.length)return!1;a.parentsUntil(".jstree","li").each(function(){g.push(c?this.id:h.get_text(this))});g.reverse();g.push(c?a.attr("id"):this.get_text(a));return g},_get_string:function(a){return this._get_settings().core.strings[a]||a},is_open:function(a){return(a=
this._get_node(a))&&-1!==a&&a.hasClass("jstree-open")},is_closed:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-closed")},is_leaf:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-leaf")},correct_state:function(a){a=this._get_node(a);if(!a||-1===a)return!1;a.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:a})},open_node:function(a,c,g){a=this._get_node(a);if(!a.length)return!1;if(!a.hasClass("jstree-closed"))return c&&
c.call(),!1;var h=g||e?0:this._get_settings().core.animation,l=this;this._is_loaded(a)?(this._get_settings().core.open_parents&&a.parentsUntil(".jstree",".jstree-closed").each(function(){l.open_node(this,!1,!0)}),h&&a.children("ul").css("display","none"),a.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading"),h?a.children("ul").stop(!0,!0).slideDown(h,function(){this.style.display="";l.after_open(a)}):l.after_open(a),this.__callback({obj:a}),c&&c.call()):
(a.children("a").addClass("jstree-loading"),this.load_node(a,function(){l.open_node(a,c,g)},c))},after_open:function(a){this.__callback({obj:a})},close_node:function(a,c){a=this._get_node(a);var g=c||e?0:this._get_settings().core.animation,h=this;if(!a.length||!a.hasClass("jstree-open"))return!1;g&&a.children("ul").attr("style","display:block !important");a.removeClass("jstree-open").addClass("jstree-closed");g?a.children("ul").stop(!0,!0).slideUp(g,function(){this.style.display="";h.after_close(a)}):
h.after_close(a);this.__callback({obj:a})},after_close:function(a){this.__callback({obj:a})},toggle_node:function(a){a=this._get_node(a);if(a.hasClass("jstree-closed"))return this.open_node(a);if(a.hasClass("jstree-open"))return this.close_node(a)},open_all:function(a,c,g){(a=a?this._get_node(a):-1)&&-1!==a||(a=this.get_container_ul());g?a=a.find("li.jstree-closed"):(g=a,a=a.is(".jstree-closed")?a.find("li.jstree-closed").addBack():a.find("li.jstree-closed"));var h=this;a.each(function(){var a=this;
h._is_loaded(this)?h.open_node(this,!1,!c):h.open_node(this,function(){h.open_all(a,c,g)},!c)});0===g.find("li.jstree-closed").length&&this.__callback({obj:g})},close_all:function(a,c){var g=this;(a=a?this._get_node(a):this.get_container())&&-1!==a||(a=this.get_container_ul());a.find("li.jstree-open").addBack().each(function(){g.close_node(this,!c)});this.__callback({obj:a})},clean_node:function(a){a=a&&-1!=a?c(a):this.get_container_ul();a=a.is("li")?a.find("li").addBack():a.find("li");a.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed");
a.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:a})},get_rollback:function(){this.__callback();return{i:this.get_index(),h:this.get_container().children("ul").clone(!0),d:this.data}},set_rollback:function(a,c){this.get_container().empty().append(a);this.data=c;this.__callback()},load_node:function(a,c,g){this.__callback({obj:a})},_is_loaded:function(a){return!0},create_node:function(a,g,h,l,e){a=this._get_node(a);g="undefined"===typeof g?
"last":g;var u=c("<li />"),n=this._get_settings().core,q;if(-1!==a&&!a.length)return!1;if(!e&&!this._is_loaded(a))return this.load_node(a,function(){this.create_node(a,g,h,l,!0)}),!1;this.__rollback();"string"===typeof h&&(h={data:h});h||(h={});h.attr&&u.attr(h.attr);h.metadata&&u.data(h.metadata);h.state&&u.addClass("jstree-"+h.state);h.data||(h.data=this._get_string("new_node"));c.isArray(h.data)||(q=h.data,h.data=[],h.data.push(q));c.each(h.data,function(a,g){q=c("<a />");c.isFunction(g)&&(g=g.call(this,
h));if("string"==typeof g)q.attr("href","#")[n.html_titles?"html":"text"](g);else g.attr||(g.attr={}),g.attr.href||(g.attr.href="#"),q.attr(g.attr)[n.html_titles?"html":"text"](g.title),g.language&&q.addClass(g.language);q.prepend("<ins class='jstree-icon'>&#160;</ins>");!g.icon&&h.icon&&(g.icon=h.icon);g.icon&&(-1===g.icon.indexOf("/")?q.children("ins").addClass(g.icon):q.children("ins").css("background","url('"+g.icon+"') center center no-repeat"));u.append(q)});u.prepend("<ins class='jstree-icon'>&#160;</ins>");
-1===a&&(a=this.get_container(),"before"===g&&(g="first"),"after"===g&&(g="last"));switch(g){case "before":a.before(u);q=this._get_parent(a);break;case "after":a.after(u);q=this._get_parent(a);break;case "inside":case "first":a.children("ul").length||a.append("<ul />");a.children("ul").prepend(u);q=a;break;case "last":a.children("ul").length||a.append("<ul />");a.children("ul").append(u);q=a;break;default:a.children("ul").length||a.append("<ul />"),g||(g=0),q=a.children("ul").children("li").eq(g),
q.length?q.before(u):a.children("ul").append(u),q=a}if(-1===q||q.get(0)===this.get_container().get(0))q=-1;this.clean_node(q);this.__callback({obj:u,parent:q});l&&l.call(this,u);return u},get_text:function(a){a=this._get_node(a);if(!a.length)return!1;var c=this._get_settings().core.html_titles;a=a.children("a:eq(0)");if(c)return a=a.clone(),a.children("INS").remove(),a.html();a=a.contents().filter(function(){return 3==this.nodeType})[0];return a.nodeValue},set_text:function(a,c){a=this._get_node(a);
if(!a.length)return!1;a=a.children("a:eq(0)");if(this._get_settings().core.html_titles){var g=a.children("INS").clone();a.html(c).prepend(g);this.__callback({obj:a,name:c});return!0}a=a.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:a,name:c});return a.nodeValue=c},rename_node:function(a,c){a=this._get_node(a);this.__rollback();a&&(a.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments)))&&this.__callback({obj:a,name:c})},delete_node:function(a){a=
this._get_node(a);if(!a.length)return!1;this.__rollback();var g=this._get_parent(a),h=c([]),l=this;a.each(function(){h=h.add(l._get_prev(this))});a=a.detach();-1!==g&&0===g.find("> ul > li").length&&g.removeClass("jstree-open jstree-closed").addClass("jstree-leaf");this.clean_node(g);this.__callback({obj:a,prev:h,parent:g});return a},prepare_move:function(a,h,l,e,n){var u={};u.ot=c.jstree._reference(a)||this;u.o=u.ot._get_node(a);u.r=-1===h?-1:this._get_node(h);u.p="undefined"===typeof l||!1===l?
"last":l;if(n||!g.o||g.o[0]!==u.o[0]||g.r[0]!==u.r[0]||g.p!==u.p){u.ot=c.jstree._reference(u.o)||this;u.rt=c.jstree._reference(u.r)||this;if(-1!==u.r&&u.r){if(!/^(before|after)$/.test(u.p)&&!this._is_loaded(u.r))return this.load_node(u.r,function(){this.prepare_move(a,h,l,e,!0)});switch(u.p){case "before":u.cp=u.r.index();u.cr=u.rt._get_parent(u.r);break;case "after":u.cp=u.r.index()+1;u.cr=u.rt._get_parent(u.r);break;case "inside":case "first":u.cp=0;u.cr=u.r;break;case "last":u.cp=u.r.find(" > ul > li").length;
u.cr=u.r;break;default:u.cp=u.p,u.cr=u.r}}else switch(u.cr=-1,u.p){case "first":case "before":case "inside":u.cp=0;break;case "after":case "last":u.cp=u.rt.get_container().find(" > ul > li").length;break;default:u.cp=u.p}u.np=-1==u.cr?u.rt.get_container():u.cr;u.op=u.ot._get_parent(u.o);u.cop=u.o.index();-1===u.op&&(u.op=u.ot?u.ot.get_container():this.get_container());!/^(before|after)$/.test(u.p)&&(u.op&&u.np&&u.op[0]===u.np[0]&&u.o.index()<u.cp)&&u.cp++;u.or=u.np.find(" > ul > li:nth-child("+(u.cp+
1)+")");g=u}this.__callback(g);e&&e.call(this,g)},check_move:function(){var a=g,c=!0,h=-1===a.r?this.get_container():a.r;if(!a||!a.o||a.or[0]===a.o[0])return!1;if(!a.cy){if(a.op&&a.np&&a.op[0]===a.np[0]&&a.cp-1===a.o.index())return!1;a.o.each(function(){if(-1!==h.parentsUntil(".jstree","li").addBack().index(this))return c=!1})}return c},move_node:function(a,h,l,e,n,u){if(!n)return this.prepare_move(a,h,l,function(a){this.move_node(a,!1,!1,e,!0,u)});e&&(g.cy=!0);if(!u&&!this.check_move())return!1;
this.__rollback();h=!1;e?(h=a.o.clone(!0),h.find("*[id]").addBack().each(function(){this.id&&(this.id="copy_"+this.id)})):h=a.o;a.or.length?a.or.before(h):(a.np.children("ul").length||c("<ul />").appendTo(a.np),a.np.children("ul:eq(0)").append(h));try{a.ot.clean_node(a.op),a.rt.clean_node(a.np),a.op.find("> ul > li").length||a.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(q){}e&&(g.cy=!0,g.oc=h);this.__callback(g);return g},_get_move:function(){return g}}})})(jQuery);
(function(c){var a,h,l;c(function(){/msie/.test(navigator.userAgent.toLowerCase())?(h=c('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),l=c('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),a=h.width()-l.width(),h.add(l).remove()):(h=c("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1E3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",
height:200}),a=100-h.width(),h.parent().remove())});c.jstree.plugin("ui",{__init:function(){this.data.ui.selected=c();this.data.ui.last_selected=!1;this.data.ui.hovered=null;this.data.ui.to_select=this.get_settings().ui.initially_select;this.get_container().delegate("a","click.jstree",c.proxy(function(a){a.preventDefault();a.currentTarget.blur();c(a.currentTarget).hasClass("jstree-loading")||this.select_node(a.currentTarget,!0,a)},this)).delegate("a","mouseenter.jstree",c.proxy(function(a){c(a.currentTarget).hasClass("jstree-loading")||
this.hover_node(a.target)},this)).delegate("a","mouseleave.jstree",c.proxy(function(a){c(a.currentTarget).hasClass("jstree-loading")||this.dehover_node(a.target)},this)).bind("reopen.jstree",c.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",c.proxy(function(){this.dehover_node();this.save_selected()},this)).bind("set_rollback.jstree",c.proxy(function(){this.reselect()},this)).bind("close_node.jstree",c.proxy(function(a,h){var l=this._get_settings().ui,e=this._get_node(h.rslt.obj),
n=e&&e.length?e.children("ul").find("a.jstree-clicked"):c(),q=this;!1!==l.selected_parent_close&&n.length&&n.each(function(){q.deselect_node(this);"select_parent"===l.selected_parent_close&&q.select_node(e)})},this)).bind("delete_node.jstree",c.proxy(function(a,c){var h=this._get_settings().ui.select_prev_on_delete,l=this._get_node(c.rslt.obj),l=l&&l.length?l.find("a.jstree-clicked"):[],e=this;l.each(function(){e.deselect_node(this)});h&&l.length&&c.rslt.prev.each(function(){if(this.parentNode)return e.select_node(this),
!1})},this)).bind("move_node.jstree",c.proxy(function(a,c){c.rslt.cy&&c.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:!0,select_prev_on_delete:!0,disable_selecting_children:!1,initially_select:[]},_fn:{_get_node:function(a,h){if("undefined"===typeof a||null===a)return h?this.data.ui.selected:this.data.ui.last_selected;var l=c(a,
this.get_container());if(l.is(".jstree")||-1==a)return-1;l=l.closest("li",this.get_container());return l.length?l:!1},_ui_notify:function(a,c){c.selected&&this.select_node(a,!1)},save_selected:function(){var a=this;this.data.ui.to_select=[];this.data.ui.selected.each(function(){this.id&&a.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))});this.__callback(this.data.ui.to_select)},
reselect:function(){var a=this,h=this.data.ui.to_select,h=c.map(c.makeArray(h),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});c.each(h,function(c,h){h&&"#"!==h&&a.select_node(h)});this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode});this.__callback()},refresh:function(a){this.save_selected();return this.__call_old()},hover_node:function(a){a=this._get_node(a);
if(!a.length)return!1;a.hasClass("jstree-hovered")||this.dehover_node();this.data.ui.hovered=a.children("a").addClass("jstree-hovered").parent();this._fix_scroll(a);this.__callback({obj:a})},dehover_node:function(){var a=this.data.ui.hovered,c;if(!a||!a.length)return!1;c=a.children("a").removeClass("jstree-hovered").parent();this.data.ui.hovered[0]===c[0]&&(this.data.ui.hovered=null);this.__callback({obj:a})},select_node:function(a,c,h){a=this._get_node(a);if(-1==a||!a||!a.length)return!1;var l=this._get_settings().ui,
e="on"==l.select_multiple_modifier||!1!==l.select_multiple_modifier&&h&&h[l.select_multiple_modifier+"Key"],n=!1!==l.select_range_modifier&&h&&h[l.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==a[0]&&this.data.ui.last_selected.parent()[0]===a.parent()[0],u=this.is_selected(a),q=!0,P=this;if(c){if(l.disable_selecting_children&&e&&(a.parentsUntil(".jstree","li").children("a.jstree-clicked").length||a.children("ul").find("a.jstree-clicked:eq(0)").length))return!1;
q=!1;switch(!0){case n:this.data.ui.last_selected.addClass("jstree-last-selected");a=a[a.index()<this.data.ui.last_selected.index()?"nextUntil":"prevUntil"](".jstree-last-selected").addBack();-1==l.select_limit||a.length<l.select_limit?(this.data.ui.last_selected.removeClass("jstree-last-selected"),this.data.ui.selected.each(function(){this!==P.data.ui.last_selected[0]&&P.deselect_node(this)}),u=!1,q=!0):q=!1;break;case u&&!e:this.deselect_all();u=!1;q=!0;break;case !u&&!e:if(-1==l.select_limit||
0<l.select_limit)this.deselect_all(),q=!0;break;case u&&e:this.deselect_node(a);break;case !u&&e:if(-1==l.select_limit||this.data.ui.selected.length+1<=l.select_limit)q=!0}}q&&!u&&(n||(this.data.ui.last_selected=a),a.children("a").addClass("jstree-clicked"),l.selected_parent_open&&a.parents(".jstree-closed").each(function(){P.open_node(this,!1,!0)}),this.data.ui.selected=this.data.ui.selected.add(a),this._fix_scroll(a.eq(0)),this.__callback({obj:a,e:h}))},_fix_scroll:function(c){var h=this.get_container()[0];
h.scrollHeight>h.offsetHeight&&(c=this._get_node(c))&&(-1!==c&&c.length&&c.is(":visible"))&&(c=c.offset().top-this.get_container().offset().top,0>c&&(h.scrollTop=h.scrollTop+c-1),c+this.data.core.li_height+(h.scrollWidth>h.offsetWidth?a:0)>h.offsetHeight&&(h.scrollTop+=c-h.offsetHeight+this.data.core.li_height+1+(h.scrollWidth>h.offsetWidth?a:0)))},deselect_node:function(a){a=this._get_node(a);if(!a.length)return!1;this.is_selected(a)&&(a.children("a").removeClass("jstree-clicked"),this.data.ui.selected=
this.data.ui.selected.not(a),this.data.ui.last_selected.get(0)===a.get(0)&&(this.data.ui.last_selected=this.data.ui.selected.eq(0)),this.__callback({obj:a}))},toggle_select:function(a){a=this._get_node(a);if(!a.length)return!1;this.is_selected(a)?this.deselect_node(a):this.select_node(a)},is_selected:function(a){return 0<=this.data.ui.selected.index(this._get_node(a))},get_selected:function(a){return a?c(a).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(a){a=a?c(a).find("a.jstree-clicked").parent():
this.get_container().find("a.jstree-clicked").parent();a.children("a.jstree-clicked").removeClass("jstree-clicked");this.data.ui.selected=c([]);this.data.ui.last_selected=!1;this.__callback({obj:a})}}});c.jstree.defaults.plugins.push("ui")})(jQuery);(function(c){c.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",c.proxy(function(a,c){if(this._get_settings().crrm.move.open_onmove){var l=this;c.rslt.np.parentsUntil(".jstree").addBack().filter(".jstree-closed").each(function(){l.open_node(this,
!1,!0)})}},this))},defaults:{input_width_limit:200,move:{always_copy:!1,open_onmove:!0,default_position:"last",check_move:function(a){return!0}}},_fn:{_show_input:function(a,h){a=this._get_node(a);var l=this._get_settings().core.rtl,g=this._get_settings().crrm.input_width_limit,s=a.children("ins").width(),e=a.find("> a:visible > ins").width()*a.find("> a:visible > ins").length,n=this.get_text(a),v=c("<div />",{css:{position:"absolute",top:"-200px",left:l?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),
q=a.css("position","relative").append(c("<input />",{value:n,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:l?"auto":s+e+4+"px",right:l?s+e+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:c.proxy(function(){var c=a.children(".jstree-rename-input"),g=c.val();""===g&&(g=n);v.remove();c.remove();this.set_text(a,n);this.rename_node(a,g);h.call(this,a,g,n);a.css("position","")},
this),keyup:function(a){a=a.keyCode||a.which;27==a?(this.value=n,this.blur()):13==a?this.blur():q.width(Math.min(v.text("pW"+this.value).width(),g))},keypress:function(a){if(13==(a.keyCode||a.which))return!1}})).children(".jstree-rename-input");this.set_text(a,"");v.css({fontFamily:q.css("fontFamily")||"",fontSize:q.css("fontSize")||"",fontWeight:q.css("fontWeight")||"",fontStyle:q.css("fontStyle")||"",fontStretch:q.css("fontStretch")||"",fontVariant:q.css("fontVariant")||"",letterSpacing:q.css("letterSpacing")||
"",wordSpacing:q.css("wordSpacing")||""});q.width(Math.min(v.text("pW"+q[0].value).width(),g))[0].select()},rename:function(a){a=this._get_node(a);this.__rollback();var c=this.__callback;this._show_input(a,function(a,g,s){c.call(this,{obj:a,new_name:g,old_name:s})})},create:function(a,h,l,g,s){var e=this;(a=this._get_node(a))||(a=-1);this.__rollback();return this.create_node(a,h,l,function(a){var h=this._get_parent(a),l=c(a).index();g&&g.call(this,a);h.length&&h.hasClass("jstree-closed")&&this.open_node(h,
!1,!0);s?e.__callback({obj:a,name:this.get_text(a),parent:h,position:l}):this._show_input(a,function(a,c,g){e.__callback({obj:a,name:c,parent:h,position:l})})})},remove:function(a){a=this._get_node(a,!0);var c=this._get_parent(a),l=this._get_prev(a);this.__rollback();a=this.delete_node(a);!1!==a&&this.__callback({obj:a,prev:l,parent:c})},check_move:function(){return this.__call_old()&&this._get_settings().crrm.move.check_move.call(this,this._get_move())?!0:!1},move_node:function(a,c,l,g,s,e){var n=
this._get_settings().crrm.move;if(!s)return"undefined"===typeof l&&(l=n.default_position),"inside"!==l||n.default_position.match(/^(before|after)$/)||(l=n.default_position),this.__call_old(!0,a,c,l,g,!1,e);if(!0===n.always_copy||"multitree"===n.always_copy&&a.rt.get_index()!==a.ot.get_index())g=!0;this.__call_old(!0,a,c,l,g,!0,e)},cut:function(a){a=this._get_node(a,!0);if(!a||!a.length)return!1;this.data.crrm.cp_nodes=!1;this.data.crrm.ct_nodes=a;this.__callback({obj:a})},copy:function(a){a=this._get_node(a,
!0);if(!a||!a.length)return!1;this.data.crrm.ct_nodes=!1;this.data.crrm.cp_nodes=a;this.__callback({obj:a})},paste:function(a){a=this._get_node(a);if(!a||!a.length)return!1;var c=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:this.data.crrm.cp_nodes;if(!this.data.crrm.ct_nodes&&!this.data.crrm.cp_nodes)return!1;this.data.crrm.ct_nodes&&(this.move_node(this.data.crrm.ct_nodes,a),this.data.crrm.ct_nodes=!1);this.data.crrm.cp_nodes&&this.move_node(this.data.crrm.cp_nodes,a,!1,!0);this.__callback({obj:a,
nodes:c})}}})})(jQuery);(function(c){var a=[];c.jstree._themes=!1;c.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",c.proxy(function(){var a=this._get_settings().themes;this.data.themes.dots=a.dots;this.data.themes.icons=a.icons;this.set_theme(a.theme,a.url)},this)).bind("loaded.jstree",c.proxy(function(){this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons()},this))},defaults:{theme:"default",url:!1,dots:!0,
icons:!0},_fn:{set_theme:function(h,l){if(!h)return!1;l||(l=c.jstree._themes+h+"/style.css");-1==c.inArray(l,a)&&(c.vakata.css.add_sheet({url:l}),a.push(l));this.data.themes.theme!=h&&(this.get_container().removeClass("jstree-"+this.data.themes.theme),this.data.themes.theme=h);this.get_container().addClass("jstree-"+h);this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons();this.__callback()},get_theme:function(){return this.data.themes.theme},
show_dots:function(){this.data.themes.dots=!0;this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=!1;this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons=!0;this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=!1;this.get_container().children("ul").addClass("jstree-no-icons")},
toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()}}});c(function(){!1===c.jstree._themes&&c("script").each(function(){if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/))return c.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/",!1});!1===c.jstree._themes&&(c.jstree._themes="themes/")});c.jstree.defaults.plugins.push("themes")})(jQuery);(function(c){var a=[];c.jstree.plugin("hotkeys",{__init:function(){if("undefined"===
typeof c.hotkeys)throw"jsTree hotkeys: jQuery hotkeys plugin not included.";if(!this.data.ui)throw"jsTree hotkeys: jsTree UI plugin not included.";c.each(this._get_settings().hotkeys,function(h,l){!1!==l&&-1==c.inArray(h,a)&&(c(document).bind("keydown",h,function(a){a:{var l=c.jstree._focused(),e;if(l&&(l.data&&l.data.hotkeys&&l.data.hotkeys.enabled)&&(e=l._get_settings().hotkeys[h])){a=e.call(l,a);break a}a=void 0}return a}),a.push(h))});this.get_container().bind("lock.jstree",c.proxy(function(){this.data.hotkeys.enabled&&
(this.data.hotkeys.enabled=!1,this.data.hotkeys.revert=!0)},this)).bind("unlock.jstree",c.proxy(function(){this.data.hotkeys.revert&&(this.data.hotkeys.enabled=!0)},this));this.enable_hotkeys()},defaults:{up:function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"ctrl+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||
this.data.ui.last_selected||-1));return!1},down:function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"ctrl+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},left:function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):
this.hover_node(this._get_prev(a)));return!1},"ctrl+left":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},"shift+left":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},right:function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?
this.open_node(a):this.hover_node(this._get_next(a)));return!1},"ctrl+right":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},"shift+right":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},space:function(){this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").click();
return!1},"ctrl+space":function(a){a.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(a);return!1},"shift+space":function(a){a.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(a);return!1},f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled=!0},disable_hotkeys:function(){this.data.hotkeys.enabled=
!1}}})})(jQuery);(function(c){c.jstree.plugin("json_data",{__init:function(){this._get_settings().json_data.progressive_unload&&this.get_container().bind("after_close.jstree",function(a,c){c.rslt.obj.children("ul").remove()})},defaults:{data:!1,ajax:!1,correct_state:!0,progressive_render:!1,progressive_unload:!1},_fn:{load_node:function(a,c,l){var g=this;this.load_node_json(a,function(){g.__callback({obj:g._get_node(a)});c.call(this)},l)},_is_loaded:function(a){var h=this._get_settings().json_data;
a=this._get_node(a);return-1==a||!a||!h.ajax&&!h.progressive_render&&!c.isFunction(h.data)||a.is(".jstree-open, .jstree-leaf")||0<a.children("ul").children("li").length},refresh:function(a){a=this._get_node(a);var h=this._get_settings().json_data;a&&(-1!==a&&h.progressive_unload&&(c.isFunction(h.data)||h.ajax))&&a.removeData("jstree_children");return this.__call_old()},load_node_json:function(a,h,l){var g=this.get_settings().json_data,s,e=function(){};s=function(){};if((a=this._get_node(a))&&-1!==
a&&(g.progressive_render||g.progressive_unload)&&!a.is(".jstree-open, .jstree-leaf")&&0===a.children("ul").children("li").length&&a.data("jstree_children")){if(s=this._parse_json(a.data("jstree_children"),a))a.append(s),g.progressive_unload||a.removeData("jstree_children");this.clean_node(a);h&&h.call(this)}else{if(a&&-1!==a){if(a.data("jstree_is_loading"))return;a.data("jstree_is_loading",!0)}switch(!0){case !g.data&&!g.ajax:throw"Neither data nor ajax settings supplied.";case c.isFunction(g.data):g.data.call(this,
a,c.proxy(function(c){(c=this._parse_json(c,a))?(-1!==a&&a?(a.append(c).children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(c.children()),this.clean_node(a),h&&h.call(this)):(-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),g.correct_state&&this.correct_state(a)):g.correct_state&&this.get_container().children("ul").empty(),l&&l.call(this))},this));break;
case !!g.data&&!g.ajax||!!g.data&&!!g.ajax&&(!a||-1===a):a&&-1!=a||((s=this._parse_json(g.data,a))?(this.get_container().children("ul").empty().append(s.children()),this.clean_node()):g.correct_state&&this.get_container().children("ul").empty());h&&h.call(this);break;case !g.data&&!!g.ajax||!!g.data&&!!g.ajax&&a&&-1!==a:e=function(c,h,s){var e=this.get_settings().json_data.ajax.error;e&&e.call(this,c,h,s);-1!=a&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),
"success"===h&&g.correct_state&&this.correct_state(a)):"success"===h&&g.correct_state&&this.get_container().children("ul").empty();l&&l.call(this)},s=function(l,s,n){var u=this.get_settings().json_data.ajax.success;u&&(l=u.call(this,l,s,n)||l);if(""===l||l&&l.toString&&""===l.toString().replace(/^[\s\n]+$/,"")||!c.isArray(l)&&!c.isPlainObject(l))return e.call(this,n,s,"");(l=this._parse_json(l,a))?(-1!==a&&a?(a.append(l).children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading")):
this.get_container().children("ul").empty().append(l.children()),this.clean_node(a),h&&h.call(this)):-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),g.correct_state&&(this.correct_state(a),h&&h.call(this))):g.correct_state&&(this.get_container().children("ul").empty(),h&&h.call(this))},g.ajax.context=this,g.ajax.error=e,g.ajax.success=s,g.ajax.dataType||(g.ajax.dataType="json"),c.isFunction(g.ajax.url)&&(g.ajax.url=g.ajax.url.call(this,a)),
c.isFunction(g.ajax.data)&&(g.ajax.data=g.ajax.data.call(this,a)),c.ajax(g.ajax)}}},_parse_json:function(a,h,l){var g=!1,s=this._get_settings(),e=s.json_data,n=s.core.html_titles,q;if(!a)return g;e.progressive_unload&&(h&&-1!==h)&&h.data("jstree_children",g);if(c.isArray(a)){g=c("<ul>");if(!a.length)return!1;s=0;for(e=a.length;s<e;s++)q=this._parse_json(a[s],h,!0),q.length&&(g=g.append(q));g=g.children()}else{"string"==typeof a&&(a={data:a});if(!a.data&&""!==a.data)return g;g=c("<li />");a.attr&&
g.attr(a.attr);a.metadata&&g.data(a.metadata);a.state&&g.addClass("jstree-"+a.state);c.isArray(a.data)||(q=a.data,a.data=[],a.data.push(q));c.each(a.data,function(h,l){q=c("<a />");c.isFunction(l)&&(l=l.call(this,a));if("string"==typeof l)q.attr("href","#")[n?"html":"text"](l);else l.attr||(l.attr={}),l.attr.href||(l.attr.href="#"),q.attr(l.attr)[n?"html":"text"](l.title),l.language&&q.addClass(l.language);q.prepend("<ins class='jstree-icon'>&#160;</ins>");!l.icon&&a.icon&&(l.icon=a.icon);l.icon&&
(-1===l.icon.indexOf("/")?q.children("ins").addClass(l.icon):q.children("ins").css("background","url('"+l.icon+"') center center no-repeat"));g.append(q)});g.prepend("<ins class='jstree-icon'>&#160;</ins>");a.children&&(e.progressive_render&&"open"!==a.state?g.addClass("jstree-closed").data("jstree_children",a.children):(e.progressive_unload&&g.data("jstree_children",a.children),c.isArray(a.children)&&a.children.length&&(q=this._parse_json(a.children,h,!0),q.length&&(h=c("<ul />"),h.append(q),g.append(h)))))}l||
(l=c("<ul />"),l.append(g),g=l);return g},get_json:function(a,h,l,g){var s=[],e=this._get_settings(),n=this,q,E,u,N,P,S;(a=this._get_node(a))&&-1!==a||(a=this.get_container().find("> ul > li"));h=c.isArray(h)?h:["id","class"];!g&&this.data.types&&h.push(e.types.type_attr);l=c.isArray(l)?l:[];a.each(function(){u=c(this);q={data:[]};h.length&&(q.attr={});c.each(h,function(a,c){(E=u.attr(c))&&(E.length&&E.replace(/jstree[^ ]*/ig,"").length)&&(q.attr[c]=(" "+E).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig,
" ").replace(/^ /,"").replace(/ $/,""))});u.hasClass("jstree-open")&&(q.state="open");u.hasClass("jstree-closed")&&(q.state="closed");u.data()&&(q.metadata=u.data());N=u.children("a");N.each(function(){P=c(this);l.length||-1!==c.inArray("languages",e.plugins)||P.children("ins").get(0).style.backgroundImage.length||P.children("ins").get(0).className&&P.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").length?(S=!1,-1!==c.inArray("languages",e.plugins)&&(c.isArray(e.languages)&&e.languages.length)&&
c.each(e.languages,function(a,c){if(P.hasClass(c))return S=c,!1}),E={attr:{},title:n.get_text(P,S)},c.each(l,function(a,c){E.attr[c]=(" "+(P.attr(c)||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")}),-1!==c.inArray("languages",e.plugins)&&(c.isArray(e.languages)&&e.languages.length)&&c.each(e.languages,function(a,c){if(P.hasClass(c))return E.language=c,!0}),P.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(E.icon=
P.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")),P.children("ins").get(0).style.backgroundImage.length&&(E.icon=P.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")",""))):E=n.get_text(P);1<N.length?q.data.push(E):q.data=E});u=u.find("> ul > li");u.length&&(q.children=n.get_json(u,h,l,!0));s.push(q)});return s}}})})(jQuery);(function(c){var a=!1;c.jstree.plugin("languages",{__init:function(){this._load_css()},
defaults:[],_fn:{set_lang:function(h){var l=this._get_settings().languages,g=!1,s=".jstree-"+this.get_index()+" a";if(!c.isArray(l)||0===l.length)return!1;if(-1==c.inArray(h,l))if(l[h])h=l[h];else return!1;if(h==this.data.languages.current_language)return!0;g=c.vakata.css.get_css(s+"."+this.data.languages.current_language,!1,a);!1!==g&&(g.style.display="none");g=c.vakata.css.get_css(s+"."+h,!1,a);!1!==g&&(g.style.display="");this.data.languages.current_language=h;this.__callback(h);return!0},get_lang:function(){return this.data.languages.current_language},
_get_string:function(a,l){var g=this._get_settings().languages,s=this._get_settings().core.strings;c.isArray(g)&&g.length&&(l=l&&-1!=c.inArray(l,g)?l:this.data.languages.current_language);return s[l]&&s[l][a]?s[l][a]:s[a]?s[a]:a},get_text:function(a,l){a=this._get_node(a)||this.data.ui.last_selected;if(!a.size())return!1;var g=this._get_settings().languages,s=this._get_settings().core.html_titles;c.isArray(g)&&g.length?(l=l&&-1!=c.inArray(l,g)?l:this.data.languages.current_language,a=a.children("a."+
l)):a=a.children("a:eq(0)");if(s)return a=a.clone(),a.children("INS").remove(),a.html();a=a.contents().filter(function(){return 3==this.nodeType})[0];return a.nodeValue},set_text:function(a,l,g){a=this._get_node(a)||this.data.ui.last_selected;if(!a.size())return!1;var s=this._get_settings().languages,e=this._get_settings().core.html_titles;c.isArray(s)&&s.length?(g=g&&-1!=c.inArray(g,s)?g:this.data.languages.current_language,a=a.children("a."+g)):a=a.children("a:eq(0)");if(e)return s=a.children("INS").clone(),
a.html(l).prepend(s),this.__callback({obj:a,name:l,lang:g}),!0;a=a.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:a,name:l,lang:g});return a.nodeValue=l},_load_css:function(){var h=this._get_settings().languages,l="/* languages css */",g=".jstree-"+this.get_index()+" a",s;if(c.isArray(h)&&h.length){this.data.languages.current_language=h[0];for(s=0;s<h.length;s++)l+=g+"."+h[s]+" {",h[s]!=this.data.languages.current_language&&(l+=" display:none; "),l+=" } ";a=c.vakata.css.add_sheet({str:l,
title:"jstree-languages"})}},create_node:function(a,l,g,s){return this.__call_old(!0,a,l,g,function(a){var g=this._get_settings().languages,l=a.children("a"),h;if(c.isArray(g)&&g.length){for(h=0;h<g.length;h++)l.is("."+g[h])||a.append(l.eq(0).clone().removeClass(g.join(" ")).addClass(g[h]));l.not("."+g.join(", .")).remove()}s&&s.call(this,a)})}}})})(jQuery);(function(c){c.jstree.plugin("cookies",{__init:function(){if("undefined"===typeof c.cookie)throw"jsTree cookie: jQuery cookie plugin not included.";
var a=this._get_settings().cookies,h;a.save_loaded&&(h=c.cookie(a.save_loaded))&&h.length&&(this.data.core.to_load=h.split(","));a.save_opened&&(h=c.cookie(a.save_opened))&&h.length&&(this.data.core.to_open=h.split(","));a.save_selected&&(h=c.cookie(a.save_selected))&&(h.length&&this.data.ui)&&(this.data.ui.to_select=h.split(","));this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",c.proxy(function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",
c.proxy(function(a){this._get_settings().cookies.auto_save&&this.save_cookie((a.handleObj.namespace+a.handleObj.type).replace("jstree",""))},this))},this))},defaults:{save_loaded:"jstree_load",save_opened:"jstree_open",save_selected:"jstree_select",auto_save:!0,cookie_options:{}},_fn:{save_cookie:function(a){if(!this.data.core.refreshing){var h=this._get_settings().cookies;if(a)switch(a){case "open_node":case "close_node":h.save_opened&&(this.save_opened(),c.cookie(h.save_opened,this.data.core.to_open.join(","),
h.cookie_options));h.save_loaded&&(this.save_loaded(),c.cookie(h.save_loaded,this.data.core.to_load.join(","),h.cookie_options));break;case "select_node":case "deselect_node":h.save_selected&&this.data.ui&&(this.save_selected(),c.cookie(h.save_selected,this.data.ui.to_select.join(","),h.cookie_options))}else h.save_loaded&&(this.save_loaded(),c.cookie(h.save_loaded,this.data.core.to_load.join(","),h.cookie_options)),h.save_opened&&(this.save_opened(),c.cookie(h.save_opened,this.data.core.to_open.join(","),
h.cookie_options)),h.save_selected&&this.data.ui&&(this.save_selected(),c.cookie(h.save_selected,this.data.ui.to_select.join(","),h.cookie_options))}}}})})(jQuery);(function(c){c.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",c.proxy(function(a,c){var l=this._get_node(c.rslt.obj),l=-1===l?this.get_container().children("ul"):l.children("ul");this.sort(l)},this)).bind("rename_node.jstree create_node.jstree create.jstree",c.proxy(function(a,c){this.sort(c.rslt.obj.parent())},
this)).bind("move_node.jstree",c.proxy(function(a,c){var l=-1==c.rslt.np?this.get_container():c.rslt.np;this.sort(l.children("ul"))},this))},defaults:function(a,c){return this.get_text(a)>this.get_text(c)?1:-1},_fn:{sort:function(a){var h=this._get_settings().sort,l=this;a.append(c.makeArray(a.children("li")).sort(c.proxy(h,l)));a.find("> li > ul").each(function(){l.sort(c(this))});this.clean_node(a)}}})})(jQuery);(function(c){var a=!1,h=!1,l=!1,g=!1,s=!1,e=!1,n=!1,q=!1,E=!1;c.vakata.dnd={is_down:!1,
is_drag:!1,helper:!1,scroll_spd:10,init_x:0,init_y:0,threshold:5,helper_left:5,helper_top:10,user_data:{},drag_start:function(a,g,l){c.vakata.dnd.is_drag&&c.vakata.drag_stop({});try{a.currentTarget.unselectable="on",a.currentTarget.onselectstart=function(){return!1},a.currentTarget.style&&(a.currentTarget.style.MozUserSelect="none")}catch(h){}c.vakata.dnd.init_x=a.pageX;c.vakata.dnd.init_y=a.pageY;c.vakata.dnd.user_data=g;c.vakata.dnd.is_down=!0;c.vakata.dnd.helper=c("<div id='vakata-dragged' />").html(l);
c(document).bind("mousemove",c.vakata.dnd.drag);c(document).bind("mouseup",c.vakata.dnd.drag_stop);return!1},drag:function(a){if(c.vakata.dnd.is_down){if(!c.vakata.dnd.is_drag)if(5<Math.abs(a.pageX-c.vakata.dnd.init_x)||5<Math.abs(a.pageY-c.vakata.dnd.init_y))c.vakata.dnd.helper.appendTo("body"),c.vakata.dnd.is_drag=!0,c(document).triggerHandler("drag_start.vakata",{event:a,data:c.vakata.dnd.user_data});else return;if("mousemove"===a.type){var g=c(document),l=g.scrollTop(),g=g.scrollLeft();20>a.pageY-
l?(e&&"down"===n&&(clearInterval(e),e=!1),e||(n="up",e=setInterval(function(){c(document).scrollTop(c(document).scrollTop()-c.vakata.dnd.scroll_spd)},150))):e&&"up"===n&&(clearInterval(e),e=!1);20>c(window).height()-(a.pageY-l)?(e&&"up"===n&&(clearInterval(e),e=!1),e||(n="down",e=setInterval(function(){c(document).scrollTop(c(document).scrollTop()+c.vakata.dnd.scroll_spd)},150))):e&&"down"===n&&(clearInterval(e),e=!1);20>a.pageX-g?(s&&"right"===q&&(clearInterval(s),s=!1),s||(q="left",s=setInterval(function(){c(document).scrollLeft(c(document).scrollLeft()-
c.vakata.dnd.scroll_spd)},150))):s&&"left"===q&&(clearInterval(s),s=!1);20>c(window).width()-(a.pageX-g)?(s&&"left"===q&&(clearInterval(s),s=!1),s||(q="right",s=setInterval(function(){c(document).scrollLeft(c(document).scrollLeft()+c.vakata.dnd.scroll_spd)},150))):s&&"right"===q&&(clearInterval(s),s=!1)}c.vakata.dnd.helper.css({left:a.pageX+c.vakata.dnd.helper_left+"px",top:a.pageY+c.vakata.dnd.helper_top+"px"});c(document).triggerHandler("drag.vakata",{event:a,data:c.vakata.dnd.user_data})}},drag_stop:function(a){s&&
clearInterval(s);e&&clearInterval(e);c(document).unbind("mousemove",c.vakata.dnd.drag);c(document).unbind("mouseup",c.vakata.dnd.drag_stop);c(document).triggerHandler("drag_stop.vakata",{event:a,data:c.vakata.dnd.user_data});c.vakata.dnd.helper.remove();c.vakata.dnd.init_x=0;c.vakata.dnd.init_y=0;c.vakata.dnd.user_data={};c.vakata.dnd.is_down=!1;c.vakata.dnd.is_drag=!1}};c(function(){c.vakata.css.add_sheet({str:"#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } ",
title:"vakata"})});c.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:!1,after:!1,inside:!1,before:!1,off:!1,prepared:!1,w:0,to1:!1,to2:!1,cof:!1,cw:!1,ch:!1,i1:!1,i2:!1,mto:!1};this.get_container().bind("mouseenter.jstree",c.proxy(function(h){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&(this.data.themes&&(l.attr("class","jstree-"+this.data.themes.theme),g&&g.attr("class","jstree-"+this.data.themes.theme),c.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),
h.currentTarget===h.target&&(c.vakata.dnd.user_data.obj&&c(c.vakata.dnd.user_data.obj).length&&c(c.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==h.target)&&(h=c.jstree._reference(h.target),h.data.dnd.foreign?(h=h._get_settings().dnd.drag_check.call(this,{o:a,r:h.get_container(),is_root:!0}),!0!==h&&!0!==h.inside&&!0!==h.before&&!0!==h.after||c.vakata.dnd.helper.children("ins").attr("class","jstree-ok")):(h.prepare_move(a,h.get_container(),"last"),h.check_move()&&c.vakata.dnd.helper.children("ins").attr("class",
"jstree-ok"))))},this)).bind("mouseup.jstree",c.proxy(function(g){if(c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&g.currentTarget===g.target&&c.vakata.dnd.user_data.obj&&c(c.vakata.dnd.user_data.obj).length&&c(c.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==g.target){var l=c.jstree._reference(g.currentTarget);l.data.dnd.foreign?(g=l._get_settings().dnd.drag_check.call(this,{o:a,r:l.get_container(),is_root:!0}),!0!==g&&!0!==g.inside&&!0!==g.before&&!0!==g.after||l._get_settings().dnd.drag_finish.call(this,
{o:a,r:l.get_container(),is_root:!0})):l.move_node(a,l.get_container(),"last",g[l._get_settings().dnd.copy_modifier+"Key"])}},this)).bind("mouseleave.jstree",c.proxy(function(a){if(a.relatedTarget&&a.relatedTarget.id&&"jstree-marker-line"===a.relatedTarget.id)return!1;c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),
c.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"))},this)).bind("mousemove.jstree",c.proxy(function(a){if(c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree){var g=this.get_container()[0];a.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(c.proxy(function(){this.scrollLeft+=c.vakata.dnd.scroll_spd},g),100)):a.pageX-24<this.data.dnd.cof.left?(this.data.dnd.i1&&
clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(c.proxy(function(){this.scrollLeft-=c.vakata.dnd.scroll_spd},g),100)):this.data.dnd.i1&&clearInterval(this.data.dnd.i1);a.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(c.proxy(function(){this.scrollTop+=c.vakata.dnd.scroll_spd},g),100)):a.pageY-24<this.data.dnd.cof.top?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(c.proxy(function(){this.scrollTop-=
c.vakata.dnd.scroll_spd},g),100)):this.data.dnd.i2&&clearInterval(this.data.dnd.i2)}},this)).bind("scroll.jstree",c.proxy(function(a){c.vakata.dnd.is_drag&&(c.vakata.dnd.user_data.jstree&&l&&g)&&(l.hide(),g.hide())},this)).delegate("a","mousedown.jstree",c.proxy(function(a){if(1===a.which)return this.start_drag(a.currentTarget,a),!1},this)).delegate("a","mouseenter.jstree",c.proxy(function(a){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&this.dnd_enter(a.currentTarget)},this)).delegate("a",
"mousemove.jstree",c.proxy(function(a){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&(h&&h.length&&h.children("a")[0]===a.currentTarget||this.dnd_enter(a.currentTarget),"undefined"===typeof this.data.dnd.off.top&&(this.data.dnd.off=c(a.target).offset()),this.data.dnd.w=(a.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height,0>this.data.dnd.w&&(this.data.dnd.w+=this.data.core.li_height),this.dnd_show())},this)).delegate("a","mouseleave.jstree",c.proxy(function(a){if(c.vakata.dnd.is_drag&&
c.vakata.dnd.user_data.jstree){if(a.relatedTarget&&a.relatedTarget.id&&"jstree-marker-line"===a.relatedTarget.id)return!1;l&&l.hide();g&&g.hide();this.data.dnd.mto=setTimeout(function(c){return function(){c.dnd_leave(a)}}(this),0)}},this)).delegate("a","mouseup.jstree",c.proxy(function(a){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&this.dnd_finish(a)},this));c(document).bind("drag_stop.vakata",c.proxy(function(){this.data.dnd.to1&&clearTimeout(this.data.dnd.to1);this.data.dnd.to2&&clearTimeout(this.data.dnd.to2);
this.data.dnd.i1&&clearInterval(this.data.dnd.i1);this.data.dnd.i2&&clearInterval(this.data.dnd.i2);this.data.dnd.after=!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;this.data.dnd.off=!1;this.data.dnd.prepared=!1;this.data.dnd.w=!1;this.data.dnd.to1=!1;this.data.dnd.to2=!1;this.data.dnd.i1=!1;this.data.dnd.i2=!1;this.data.dnd.active=!1;this.data.dnd.foreign=!1;l&&l.css({top:"-2000px"});g&&g.css({top:"-2000px"})},this)).bind("drag_start.vakata",c.proxy(function(a,g){if(g.data.jstree){var l=c(g.event.target);
l.closest(".jstree").hasClass("jstree-"+this.get_index())&&this.dnd_enter(l)}},this));var e=this._get_settings().dnd;e.drag_target&&c(document).delegate(e.drag_target,"mousedown.jstree-"+this.get_index(),c.proxy(function(h){a=h.target;c.vakata.dnd.drag_start(h,{jstree:!0,obj:h.target},"<ins class='jstree-icon'></ins>"+c(h.target).text());this.data.themes&&(l&&l.attr("class","jstree-"+this.data.themes.theme),g&&g.attr("class","jstree-"+this.data.themes.theme),c.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+
this.data.themes.theme));c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var e=this.get_container();this.data.dnd.cof=e.offset();this.data.dnd.cw=parseInt(e.width(),10);this.data.dnd.ch=parseInt(e.height(),10);this.data.dnd.foreign=!0;h.preventDefault()},this));e.drop_target&&c(document).delegate(e.drop_target,"mouseenter.jstree-"+this.get_index(),c.proxy(function(g){this.data.dnd.active&&this._get_settings().dnd.drop_check.call(this,{o:a,r:c(g.target),e:g})&&c.vakata.dnd.helper.children("ins").attr("class",
"jstree-ok")},this)).delegate(e.drop_target,"mouseleave.jstree-"+this.get_index(),c.proxy(function(a){this.data.dnd.active&&c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")},this)).delegate(e.drop_target,"mouseup.jstree-"+this.get_index(),c.proxy(function(g){this.data.dnd.active&&c.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&this._get_settings().dnd.drop_finish.call(this,{o:a,r:c(g.target),e:g})},this))},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,
drop_target:".jstree-drop",drop_check:function(a){return!0},drop_finish:c.noop,drag_target:".jstree-draggable",drag_finish:c.noop,drag_check:function(a){return{after:!1,before:!1,inside:!0}}},_fn:{dnd_prepare:function(){if(h&&h.length){this.data.dnd.off=h.offset();this._get_settings().core.rtl&&(this.data.dnd.off.right=this.data.dnd.off.left+h.width());if(this.data.dnd.foreign){var c=this._get_settings().dnd.drag_check.call(this,{o:a,r:h});this.data.dnd.after=c.after;this.data.dnd.before=c.before;
this.data.dnd.inside=c.inside;this.data.dnd.prepared=!0;return this.dnd_show()}this.prepare_move(a,h,"before");this.data.dnd.before=this.check_move();this.prepare_move(a,h,"after");this.data.dnd.after=this.check_move();this._is_loaded(h)?(this.prepare_move(a,h,"inside"),this.data.dnd.inside=this.check_move()):this.data.dnd.inside=!1;this.data.dnd.prepared=!0;return this.dnd_show()}},dnd_show:function(){if(this.data.dnd.prepared){var a=["before","inside","after"],h=!1,e=this._get_settings().core.rtl,
a=this.data.dnd.w<this.data.core.li_height/3?["before","inside","after"]:this.data.dnd.w<=2*this.data.core.li_height/3?this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"]:["after","inside","before"];c.each(a,c.proxy(function(a,g){if(this.data.dnd[g])return c.vakata.dnd.helper.children("ins").attr("class","jstree-ok"),h=g,!1},this));!1===h&&c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");a=e?this.data.dnd.off.right-18:this.data.dnd.off.left+
10;switch(h){case "before":l.css({left:a+"px",top:this.data.dnd.off.top-6+"px"}).show();g&&g.css({left:a+8+"px",top:this.data.dnd.off.top-1+"px"}).show();break;case "after":l.css({left:a+"px",top:this.data.dnd.off.top+this.data.core.li_height-6+"px"}).show();g&&g.css({left:a+8+"px",top:this.data.dnd.off.top+this.data.core.li_height-1+"px"}).show();break;case "inside":l.css({left:a+(e?-4:4)+"px",top:this.data.dnd.off.top+this.data.core.li_height/2-5+"px"}).show();g&&g.hide();break;default:l.hide(),
g&&g.hide()}return E=h}},dnd_open:function(){this.data.dnd.to2=!1;this.open_node(h,c.proxy(this.dnd_prepare,this),!0)},dnd_finish:function(c){this.data.dnd.foreign?(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside)&&this._get_settings().dnd.drag_finish.call(this,{o:a,r:h,p:E}):(this.dnd_prepare(),this.move_node(a,h,E,c[this._get_settings().dnd.copy_modifier+"Key"]));h=a=!1;l.hide();g&&g.hide()},dnd_enter:function(a){this.data.dnd.mto&&(clearTimeout(this.data.dnd.mto),this.data.dnd.mto=
!1);var g=this._get_settings().dnd;this.data.dnd.prepared=!1;h=this._get_node(a);g.check_timeout?(this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to1=setTimeout(c.proxy(this.dnd_prepare,this),g.check_timeout)):this.dnd_prepare();g.open_timeout?(this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),h&&(h.length&&h.hasClass("jstree-closed"))&&(this.data.dnd.to2=setTimeout(c.proxy(this.dnd_open,this),g.open_timeout))):h&&(h.length&&h.hasClass("jstree-closed"))&&this.dnd_open()},dnd_leave:function(a){this.data.dnd.after=
!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");l.hide();g&&g.hide();h&&h[0]===a.target.parentNode&&(this.data.dnd.to1&&(clearTimeout(this.data.dnd.to1),this.data.dnd.to1=!1),this.data.dnd.to2&&(clearTimeout(this.data.dnd.to2),this.data.dnd.to2=!1))},start_drag:function(h,e){a=this._get_node(h);this.data.ui&&this.is_selected(a)&&(a=this._get_node(null,!0));var s=1<a.length?this._get_string("multiple_selection"):this.get_text(a),
n=this.get_container();this._get_settings().core.html_titles||(s=s.replace(/</ig,"&lt;").replace(/>/ig,"&gt;"));c.vakata.dnd.drag_start(e,{jstree:!0,obj:a},"<ins class='jstree-icon'></ins>"+s);this.data.themes&&(l&&l.attr("class","jstree-"+this.data.themes.theme),g&&g.attr("class","jstree-"+this.data.themes.theme),c.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme));this.data.dnd.cof=n.offset();this.data.dnd.cw=parseInt(n.width(),10);this.data.dnd.ch=parseInt(n.height(),
10);this.data.dnd.active=!0}}});c(function(){c.vakata.css.add_sheet({str:"#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px;  -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; } #vakata-dragged .jstree-ok { background:green; } #vakata-dragged .jstree-invalid { background:red; } #jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } #jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43;  cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666;  -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; }",
title:"jstree"});l=c("<div />").attr({id:"jstree-marker"}).hide().html("&raquo;").bind("mouseleave mouseenter",function(a){l.hide();g.hide();a.preventDefault();a.stopImmediatePropagation();return!1}).appendTo("body");g=c("<div />").attr({id:"jstree-marker-line"}).hide().bind("mouseup",function(a){if(h&&h.length)return h.children("a").trigger(a),a.preventDefault(),a.stopImmediatePropagation(),!1}).bind("mouseleave",function(a){var e=c(a.relatedTarget);if((e.is(".jstree")||0===e.closest(".jstree").length)&&
h&&h.length)return h.children("a").trigger(a),l.hide(),g.hide(),a.preventDefault(),a.stopImmediatePropagation(),!1}).appendTo("body");c(document).bind("drag_start.vakata",function(a,c){c.data.jstree&&(l.show(),g&&g.show())});c(document).bind("drag_stop.vakata",function(a,c){c.data.jstree&&(l.hide(),g&&g.hide())})})})(jQuery);(function(c){c.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui;this.data.ui&&this.data.checkbox.noui&&(this.select_node=
this.deselect_node=this.deselect_all=c.noop,this.get_selected=this.get_checked);this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",c.proxy(function(a,c){this._prepare_checkboxes(c.rslt.obj)},this)).bind("loaded.jstree",c.proxy(function(a){this._prepare_checkboxes()},this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",c.proxy(function(a){a.preventDefault();this._get_node(a.target).hasClass("jstree-checked")?this.uncheck_node(a.target):
this.check_node(a.target);if(this.data.ui&&this.data.checkbox.noui)this.save_selected(),this.data.cookies&&this.save_cookie("select_node");else return a.stopImmediatePropagation(),!1},this))},defaults:{override_ui:!1,two_state:!1,real_checkboxes:!1,checked_parent_open:!0,real_checkboxes_names:function(a){return["check_"+(a[0].id||Math.ceil(1E4*Math.random())),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},
_fn:{_checkbox_notify:function(a,c){c.checked&&this.check_node(a,!1)},_prepare_checkboxes:function(a){a=a&&-1!=a?this._get_node(a):this.get_container().find("> ul > li");if(!1!==a){var h,l=this,g,e=this._get_settings().checkbox.two_state,n=this._get_settings().checkbox.real_checkboxes,q=this._get_settings().checkbox.real_checkboxes_names;a.each(function(){g=c(this);h=g.is("li")&&(g.hasClass("jstree-checked")||n&&g.children(":checked").length)?"jstree-checked":"jstree-unchecked";g.find("li").addBack().each(function(){var a=
c(this),g;a.children("a"+(l.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(e?"jstree-unchecked":h);n&&(a.children(":checkbox").length?a.children(":checkbox").addClass("jstree-real-checkbox"):(g=q.call(l,a),a.prepend("<input type='checkbox' class='jstree-real-checkbox' id='"+g[0]+"' name='"+g[0]+"' value='"+g[1]+"' />")));e?(a.hasClass("jstree-checked")||a.children(":checked").length)&&
a.addClass("jstree-checked").children(":checkbox").prop("checked",!0):("jstree-checked"===h||a.hasClass("jstree-checked")||a.children(":checked").length)&&a.find("li").addBack().addClass("jstree-checked").children(":checkbox").prop("checked",!0)})});e||a.find(".jstree-checked").parent().parent().each(function(){l._repair_state(this)})}},change_state:function(a,h){a=this._get_node(a);var l=!1,g=this._get_settings().checkbox.real_checkboxes;if(!a||-1===a)return!1;h=!1===h||!0===h?h:a.hasClass("jstree-checked");
if(this._get_settings().checkbox.two_state)h?(a.removeClass("jstree-checked").addClass("jstree-unchecked"),g&&a.children(":checkbox").prop("checked",!1)):(a.removeClass("jstree-unchecked").addClass("jstree-checked"),g&&a.children(":checkbox").prop("checked",!0));else{if(h){l=a.find("li").addBack();if(!l.filter(".jstree-checked, .jstree-undetermined").length)return!1;l.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");g&&l.children(":checkbox").prop("checked",!1)}else{l=
a.find("li").addBack();if(!l.filter(".jstree-unchecked, .jstree-undetermined").length)return!1;l.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");g&&l.children(":checkbox").prop("checked",!0);this.data.ui&&(this.data.ui.last_selected=a);this.data.checkbox.last_selected=a}a.parentsUntil(".jstree","li").each(function(){var a=c(this);if(h){if(a.children("ul").children("li.jstree-checked, li.jstree-undetermined").length)return a.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),
g&&a.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",!1),!1;a.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");g&&a.children(":checkbox").prop("checked",!1)}else{if(a.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length)return a.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),g&&a.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",
!1),!1;a.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");g&&a.children(":checkbox").prop("checked",!0)}})}this.data.ui&&this.data.checkbox.noui&&(this.data.ui.selected=this.get_checked());this.__callback(a);return!0},check_node:function(a){if(this.change_state(a,!1)){a=this._get_node(a);if(this._get_settings().checkbox.checked_parent_open){var c=this;a.parents(".jstree-closed").each(function(){c.open_node(this,!1,!0)})}this.__callback({obj:a})}},uncheck_node:function(a){this.change_state(a,
!0)&&this.__callback({obj:this._get_node(a)})},check_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!1)});this.__callback()},uncheck_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!0)});this.__callback()},is_checked:function(a){a=this._get_node(a);
return a.length?a.is(".jstree-checked"):!1},get_checked:function(a,c){a=a&&-1!==a?this._get_node(a):this.get_container();return c||this._get_settings().checkbox.two_state?a.find(".jstree-checked"):a.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(a,c){a=a&&-1!==a?this._get_node(a):this.get_container();return c||this._get_settings().checkbox.two_state?a.find(".jstree-unchecked"):a.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},
show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(a){a=this._get_node(a);if(a.length)if(this._get_settings().checkbox.two_state)a.find("li").addBack().not(".jstree-checked").removeClass("jstree-undetermined").addClass("jstree-unchecked").children(":checkbox").prop("checked",!0);else{var c=this._get_settings().checkbox.real_checkboxes,
l=a.find("> ul > .jstree-checked").length,g=a.find("> ul > .jstree-undetermined").length,e=a.find("> ul > li").length;0===e?a.hasClass("jstree-undetermined")&&this.change_state(a,!1):0===l&&0===g?this.change_state(a,!0):l===e?this.change_state(a,!1):(a.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),c&&a.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",!1))}},reselect:function(){if(this.data.ui&&this.data.checkbox.noui){var a=
this,h=this.data.ui.to_select,h=c.map(c.makeArray(h),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});this.deselect_all();c.each(h,function(c,g){a.check_node(g)});this.__callback()}else this.__call_old()},save_loaded:function(){var a=this;this.data.core.to_load=[];this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){this.id&&a.data.core.to_load.push("#"+this.id)})}}});
c(function(){c.vakata.css.add_sheet({str:".jstree .jstree-real-checkbox { display:none; } ",title:"jstree"})})})(jQuery);(function(c){c.vakata.xslt=function(a,g,h){var e=!1,n,q,E;if(!1===e&&window.ActiveXObject)try{e=new ActiveXObject("Msxml2.XSLTemplate"),q=new ActiveXObject("Msxml2.DOMDocument"),q.loadXML(a),E=new ActiveXObject("Msxml2.FreeThreadedDOMDocument"),E.loadXML(g),e.stylesheet=E,n=e.createProcessor(),n.input=q,n.transform(),e=n.output}catch(u){}a=c.parseXML(a);g=c.parseXML(g);!1===e&&
"undefined"!==typeof XSLTProcessor&&(n=new XSLTProcessor,n.importStylesheet(g),e=n.transformToFragment(a,document),e=c("<div />").append(e).html());!1===e&&"undefined"!==typeof a.transformNode&&(e=a.transformNode(g));h.call(null,e)};var a={nest:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/html" /><xsl:template match="/">\t<xsl:call-template name="nodes">\t\t<xsl:with-param name="node" select="/root" />\t</xsl:call-template></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<ul>\t<xsl:for-each select="$node/item">\t\t<xsl:variable name="children" select="count(./item) &gt; 0" />\t\t<li>\t\t\t<xsl:attribute name="class">\t\t\t\t<xsl:if test="position() = last()">jstree-last </xsl:if>\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t\t\t</xsl:choose>\t\t\t\t<xsl:value-of select="@class" />\t\t\t</xsl:attribute>\t\t\t<xsl:for-each select="@*">\t\t\t\t<xsl:if test="name() != \'class\' and name() != \'state\' and name() != \'hasChildren\'">\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t</xsl:if>\t\t\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t\t\t<xsl:for-each select="content/name">\t\t\t\t<a>\t\t\t\t<xsl:attribute name="href">\t\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t\t\t</xsl:choose>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t\t\t<xsl:for-each select="@*">\t\t\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t\t</xsl:if>\t\t\t\t</xsl:for-each>\t\t\t\t\t<ins>\t\t\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t\t\t</xsl:attribute>\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t\t\t</ins>\t\t\t\t\t<xsl:copy-of select="./child::node()" />\t\t\t\t</a>\t\t\t</xsl:for-each>\t\t\t<xsl:if test="$children or @hasChildren"><xsl:call-template name="nodes"><xsl:with-param name="node" select="current()" /></xsl:call-template></xsl:if>\t\t</li>\t</xsl:for-each>\t</ul></xsl:template></xsl:stylesheet>',
flat:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/xml" /><xsl:template match="/">\t<ul>\t<xsl:for-each select="//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]">\t\t<xsl:call-template name="nodes">\t\t\t<xsl:with-param name="node" select="." />\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t</xsl:call-template>\t</xsl:for-each>\t</ul></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<xsl:param name="is_last" />\t<xsl:variable name="children" select="count(//item[@parent_id=$node/attribute::id]) &gt; 0" />\t<li>\t<xsl:attribute name="class">\t\t<xsl:if test="$is_last = true()">jstree-last </xsl:if>\t\t<xsl:choose>\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t</xsl:choose>\t\t<xsl:value-of select="@class" />\t</xsl:attribute>\t<xsl:for-each select="@*">\t\t<xsl:if test="name() != \'parent_id\' and name() != \'hasChildren\' and name() != \'class\' and name() != \'state\'">\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t</xsl:if>\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t<xsl:for-each select="content/name">\t\t<a>\t\t<xsl:attribute name="href">\t\t\t<xsl:choose>\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t</xsl:choose>\t\t</xsl:attribute>\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t<xsl:for-each select="@*">\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t</xsl:if>\t\t</xsl:for-each>\t\t\t<ins>\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t</ins>\t\t\t<xsl:copy-of select="./child::node()" />\t\t</a>\t</xsl:for-each>\t<xsl:if test="$children">\t\t<ul>\t\t<xsl:for-each select="//item[@parent_id=$node/attribute::id]">\t\t\t<xsl:call-template name="nodes">\t\t\t\t<xsl:with-param name="node" select="." />\t\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t\t</xsl:call-template>\t\t</xsl:for-each>\t\t</ul>\t</xsl:if>\t</li></xsl:template></xsl:stylesheet>'},
h=function(a){return a.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};c.jstree.plugin("xml_data",{defaults:{data:!1,ajax:!1,xsl:"flat",clean_node:!1,correct_state:!0,get_skip_empty:!1,get_include_preamble:!0},_fn:{load_node:function(a,c,h){var e=this;this.load_node_xml(a,function(){e.__callback({obj:e._get_node(a)});c.call(this)},h)},_is_loaded:function(a){var g=this._get_settings().xml_data;a=this._get_node(a);return-1==a||
!a||!g.ajax&&!c.isFunction(g.data)||a.is(".jstree-open, .jstree-leaf")||0<a.children("ul").children("li").size()},load_node_xml:function(a,g,h){var e=this.get_settings().xml_data,n=function(){},q=function(){};if((a=this._get_node(a))&&-1!==a){if(a.data("jstree_is_loading"))return;a.data("jstree_is_loading",!0)}switch(!0){case !e.data&&!e.ajax:throw"Neither data nor ajax settings supplied.";case c.isFunction(e.data):e.data.call(this,a,c.proxy(function(h){this.parse_xml(h,c.proxy(function(h){h&&(h=
h.replace(/ ?xmlns="[^"]*"/ig,""),10<h.length?(h=c(h),-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(h),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(h.children()),e.clean_node&&this.clean_node(a),g&&g.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),e.correct_state&&(this.correct_state(a),g&&g.call(this))):e.correct_state&&(this.get_container().children("ul").empty(),
g&&g.call(this)))},this))},this));break;case !!e.data&&!e.ajax||!!e.data&&!!e.ajax&&(!a||-1===a):a&&-1!=a||this.parse_xml(e.data,c.proxy(function(h){h?(h=h.replace(/ ?xmlns="[^"]*"/ig,""),10<h.length&&(h=c(h),this.get_container().children("ul").empty().append(h.children()),e.clean_node&&this.clean_node(a),g&&g.call(this))):e.correct_state&&(this.get_container().children("ul").empty(),g&&g.call(this))},this));break;case !e.data&&!!e.ajax||!!e.data&&!!e.ajax&&a&&-1!==a:n=function(c,g,n){var q=this.get_settings().xml_data.ajax.error;
q&&q.call(this,c,g,n);-1!==a&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),"success"===g&&e.correct_state&&this.correct_state(a)):"success"===g&&e.correct_state&&this.get_container().children("ul").empty();h&&h.call(this)},q=function(h,s,q){h=q.responseText;var v=this.get_settings().xml_data.ajax.success;v&&(h=v.call(this,h,s,q)||h);if(""===h||h&&h.toString&&""===h.toString().replace(/^[\s\n]+$/,""))return n.call(this,q,s,"");this.parse_xml(h,
c.proxy(function(h){h&&(h=h.replace(/ ?xmlns="[^"]*"/ig,""),10<h.length?(h=c(h),-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(h),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(h.children()),e.clean_node&&this.clean_node(a),g&&g.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),e.correct_state&&(this.correct_state(a),g&&g.call(this))):e.correct_state&&(this.get_container().children("ul").empty(),
g&&g.call(this)))},this))},e.ajax.context=this,e.ajax.error=n,e.ajax.success=q,e.ajax.dataType||(e.ajax.dataType="xml"),c.isFunction(e.ajax.url)&&(e.ajax.url=e.ajax.url.call(this,a)),c.isFunction(e.ajax.data)&&(e.ajax.data=e.ajax.data.call(this,a)),c.ajax(e.ajax)}},parse_xml:function(h,g){var e=this._get_settings().xml_data;c.vakata.xslt(h,a[e.xsl],g)},get_xml:function(a,g,e,n,q){var v="",E=this._get_settings(),u=this,N,P,S,Sa,Ha;a||(a="flat");q||(q=0);(g=this._get_node(g))&&-1!==g||(g=this.get_container().find("> ul > li"));
e=c.isArray(e)?e:["id","class"];!q&&(this.data.types&&-1===c.inArray(E.types.type_attr,e))&&e.push(E.types.type_attr);n=c.isArray(n)?n:[];q||(E.xml_data.get_include_preamble&&(v+='<?xml version="1.0" encoding="UTF-8"?>'),v+="<root>");g.each(function(){v+="<item";S=c(this);c.each(e,function(a,c){var g=S.attr(c);E.xml_data.get_skip_empty&&"undefined"===typeof g||(v+=" "+c+'="'+h((" "+(g||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"')});S.hasClass("jstree-open")&&
(v+=' state="open"');S.hasClass("jstree-closed")&&(v+=' state="closed"');"flat"===a&&(v+=' parent_id="'+h(q)+'"');v+=">";v+="<content>";Sa=S.children("a");Sa.each(function(){N=c(this);Ha=!1;v+="<name";-1!==c.inArray("languages",E.plugins)&&c.each(E.languages,function(a,c){if(N.hasClass(c))return v+=' lang="'+h(c)+'"',Ha=c,!1});n.length&&c.each(n,function(a,c){var g=N.attr(c);E.xml_data.get_skip_empty&&"undefined"===typeof g||(v+=" "+c+'="'+h((" "+g||"").replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig,
" ").replace(/^ /,"").replace(/ $/,""))+'"')});N.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(v+=' icon="'+h(N.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"');N.children("ins").get(0).style.backgroundImage.length&&(v+=' icon="'+h(N.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/ig,"").replace(/"/ig,""))+'"');v+=">";v+="<![CDATA["+
u.get_text(N,Ha)+"]]\x3e";v+="</name>"});v+="</content>";P=S[0].id||!0;S=S.find("> ul > li");P=S.length?u.get_xml(a,S,e,n,P):"";"nest"==a&&(v+=P);v+="</item>";"flat"==a&&(v+=P)});q||(v+="</root>");return v}}})})(jQuery);(function(c){8<=c().jquery.split(".")[1]?(c.expr[":"].jstree_contains=c.expr.createPseudo(function(a){return function(c){return 0<=(c.textContent||c.innerText||"").toLowerCase().indexOf(a.toLowerCase())}}),c.expr[":"].jstree_title_contains=c.expr.createPseudo(function(a){return function(c){return 0<=
(c.getAttribute("title")||"").toLowerCase().indexOf(a.toLowerCase())}})):(c.expr[":"].jstree_contains=function(a,c,l){return 0<=(a.textContent||a.innerText||"").toLowerCase().indexOf(l[3].toLowerCase())},c.expr[":"].jstree_title_contains=function(a,c,l){return 0<=(a.getAttribute("title")||"").toLowerCase().indexOf(l[3].toLowerCase())});c.jstree.plugin("search",{__init:function(){this.data.search.str="";this.data.search.result=c();this._get_settings().search.show_only_matches&&this.get_container().bind("search.jstree",
function(a,h){c(this).children("ul").find("li").hide().removeClass("jstree-last");h.rslt.nodes.parentsUntil(".jstree").addBack().show().filter("ul").each(function(){c(this).children("li:visible").eq(-1).addClass("jstree-last")})}).bind("clear_search.jstree",function(){c(this).children("ul").find("li").css("display","").end().end().jstree("clean_node",-1)})},defaults:{ajax:!1,search_method:"jstree_contains",show_only_matches:!1},_fn:{search:function(a,h){if(""===c.trim(a))this.clear_search();else{var l=
this.get_settings().search,g=this,e=function(){};this.data.search.str=a;if(!h&&!1!==l.ajax&&0<this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length){this.search.supress_callback=!0;e=function(a,c,g){var h=this.get_settings().search.ajax.success;h&&(a=h.call(this,a,c,g)||a);this.data.search.to_open=a;this._search_open()};l.ajax.context=this;l.ajax.error=function(){};l.ajax.success=e;c.isFunction(l.ajax.url)&&(l.ajax.url=l.ajax.url.call(this,a));c.isFunction(l.ajax.data)&&(l.ajax.data=
l.ajax.data.call(this,a));l.ajax.data||(l.ajax.data={search_string:a});if(!l.ajax.dataType||/^json/.exec(l.ajax.dataType))l.ajax.dataType="json";c.ajax(l.ajax)}else this.data.search.result.length&&this.clear_search(),this.data.search.result=this.get_container().find("a"+(this.data.languages?"."+this.get_lang():"")+":"+l.search_method+"("+this.data.search.str+")"),this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function(){g.open_node(this,!1,!0)}),this.__callback({nodes:this.data.search.result,
str:a})}},clear_search:function(a){this.data.search.result.removeClass("jstree-search");this.__callback(this.data.search.result);this.data.search.result=c()},_search_open:function(a){var h=this;a=!0;var l=[],g=[];this.data.search.to_open.length&&(c.each(this.data.search.to_open,function(a,h){if("#"==h)return!0;c(h).length&&c(h).is(".jstree-closed")?l.push(h):g.push(h)}),l.length&&(this.data.search.to_open=g,c.each(l,function(a,c){h.open_node(c,function(){h._search_open(!0)})}),a=!1));a&&this.search(this.data.search.str,
!0)}}})})(jQuery);(function(c){c.vakata.context={hide_on_mouseleave:!1,cnt:c("<div id='vakata-contextmenu' />"),vis:!1,tgt:!1,par:!1,func:!1,data:!1,rtl:!1,show:function(a,h,l,g,e,n,q){c.vakata.context.rtl=!!q;if(a=c.vakata.context.parse(a)){c.vakata.context.vis=!0;c.vakata.context.tgt=h;c.vakata.context.par=n||h||null;c.vakata.context.data=e||null;c.vakata.context.cnt.html(a).css({visibility:"hidden",display:"block",left:0,top:0});if(c.vakata.context.hide_on_mouseleave)c.vakata.context.cnt.one("mouseleave",
function(a){c.vakata.context.hide()});e=c.vakata.context.cnt.height();n=c.vakata.context.cnt.width();l+n>c(document).width()&&(l=c(document).width()-(n+5),c.vakata.context.cnt.find("li > ul").addClass("right"));g+e>c(document).height()&&(g-=e+h[0].offsetHeight,c.vakata.context.cnt.find("li > ul").addClass("bottom"));c.vakata.context.cnt.css({left:l,top:g}).find("li:has(ul)").bind("mouseenter",function(a){a=c(document).width();var g=c(document).height(),h=c(this).children("ul").show();a!==c(document).width()&&
h.toggleClass("right");g!==c(document).height()&&h.toggleClass("bottom")}).bind("mouseleave",function(a){c(this).children("ul").hide()}).end().css({visibility:"visible"}).show();c(document).triggerHandler("context_show.vakata")}},hide:function(){c.vakata.context.vis=!1;c.vakata.context.cnt.attr("class","").css({visibility:"hidden"});c(document).triggerHandler("context_hide.vakata")},parse:function(a,h){if(!a)return!1;var l="",g=!1,e=!0;h||(c.vakata.context.func={});l+="<ul>";c.each(a,function(a,h){if(!h)return!0;
c.vakata.context.func[a]=h.action;!e&&h.separator_before&&(l+="<li class='vakata-separator vakata-separator-before'></li>");e=!1;l+="<li class='"+(h._class||"")+(h._disabled?" jstree-contextmenu-disabled ":"")+"'><ins ";h.icon&&-1===h.icon.indexOf("/")&&(l+=" class='"+h.icon+"' ");h.icon&&-1!==h.icon.indexOf("/")&&(l+=" style='background:url("+h.icon+") center center no-repeat;' ");l+=">&#160;</ins><a href='#' rel='"+a+"'>";h.submenu&&(l+="<span style='float:"+(c.vakata.context.rtl?"left":"right")+
";'>&raquo;</span>");l+=h.label+"</a>";h.submenu&&(g=c.vakata.context.parse(h.submenu,!0))&&(l+=g);l+="</li>";h.separator_after&&(l+="<li class='vakata-separator vakata-separator-after'></li>",e=!0)});l=l.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,"");l+="</ul>";c(document).triggerHandler("context_parse.vakata");return 10<l.length?l:!1},exec:function(a){return c.isFunction(c.vakata.context.func[a])?(c.vakata.context.func[a].call(c.vakata.context.data,c.vakata.context.par),
!0):!1}};c(function(){c.vakata.css.add_sheet({str:"#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; *width:180px; } #vakata-contextmenu ul { min-width:180px; *width:180px; } #vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } #vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } #vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } #vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } #vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover > a { background:gray; color:white; } #vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } #vakata-contextmenu .right { right:100%; left:auto; } #vakata-contextmenu .bottom { bottom:-1px; top:auto; } #vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ",
title:"vakata"});c.vakata.context.cnt.delegate("a","click",function(a){a.preventDefault()}).delegate("a","mouseup",function(a){!c(this).parent().hasClass("jstree-contextmenu-disabled")&&c.vakata.context.exec(c(this).attr("rel"))?c.vakata.context.hide():c(this).blur()}).delegate("a","mouseover",function(){c.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body");c(document).bind("mousedown",function(a){c.vakata.context.vis&&!c.contains(c.vakata.context.cnt[0],a.target)&&
c.vakata.context.hide()});"undefined"!==typeof c.hotkeys&&c(document).bind("keydown","up",function(a){if(c.vakata.context.vis){var h=c.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();h.length||(h=c.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last());h.addClass("vakata-hover");a.stopImmediatePropagation();a.preventDefault()}}).bind("keydown","down",function(a){if(c.vakata.context.vis){var h=
c.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();h.length||(h=c.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first());h.addClass("vakata-hover");a.stopImmediatePropagation();a.preventDefault()}}).bind("keydown","right",function(a){c.vakata.context.vis&&(c.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover"),
a.stopImmediatePropagation(),a.preventDefault())}).bind("keydown","left",function(a){c.vakata.context.vis&&(c.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover"),a.stopImmediatePropagation(),a.preventDefault())}).bind("keydown","esc",function(a){c.vakata.context.hide();a.preventDefault()}).bind("keydown","space",function(a){c.vakata.context.cnt.find(".vakata-hover").last().children("a").click();a.preventDefault()})});c.jstree.plugin("contextmenu",
{__init:function(){this.get_container().delegate("a","contextmenu.jstree",c.proxy(function(a){a.preventDefault();c(a.currentTarget).hasClass("jstree-loading")||this.show_contextmenu(a.currentTarget,a.pageX,a.pageY)},this)).delegate("a","click.jstree",c.proxy(function(a){this.data.contextmenu&&c.vakata.context.hide()},this)).bind("destroy.jstree",c.proxy(function(){this.data.contextmenu&&c.vakata.context.hide()},this));c(document).bind("context_hide.vakata",c.proxy(function(){this.data.contextmenu=
!1},this))},defaults:{select_node:!1,show_at_node:!0,items:{create:{separator_before:!1,separator_after:!0,label:"Create",action:function(a){this.create(a)}},rename:{separator_before:!1,separator_after:!1,label:"Rename",action:function(a){this.rename(a)}},remove:{separator_before:!1,icon:!1,separator_after:!1,label:"Delete",action:function(a){this.is_selected(a)?this.remove():this.remove(a)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,
separator_after:!1,label:"Cut",action:function(a){this.cut(a)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(a){this.copy(a)}},paste:{separator_before:!1,icon:!1,separator_after:!1,label:"Paste",action:function(a){this.paste(a)}}}}}},_fn:{show_contextmenu:function(a,h,l){a=this._get_node(a);var g=this.get_settings().contextmenu,e=a.children("a:visible:eq(0)"),n=!1,n=!1;g.select_node&&(this.data.ui&&!this.is_selected(a))&&(this.deselect_all(),this.select_node(a,
!0));if(g.show_at_node||"undefined"===typeof h||"undefined"===typeof l)n=e.offset(),h=n.left,l=n.top+this.data.core.li_height;n=a.data("jstree")&&a.data("jstree").contextmenu?a.data("jstree").contextmenu:g.items;c.isFunction(n)&&(n=n.call(this,a));this.data.contextmenu=!0;c.vakata.context.show(n,e,h,l,this,a,this._get_settings().core.rtl);this.data.themes&&c.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}})})(jQuery);(function(c){c.jstree.plugin("types",{__init:function(){var a=
this._get_settings().types;this.data.types.attach_to=[];this.get_container().bind("init.jstree",c.proxy(function(){var h=a.type_attr,l="",g=this;c.each(a.types,function(a,e){c.each(e,function(a,c){/^(max_depth|max_children|icon|valid_children)$/.test(a)||g.data.types.attach_to.push(a)});if(!e.icon)return!0;if(e.icon.image||e.icon.position)l="default"==a?l+(".jstree-"+g.get_index()+" a > .jstree-icon { "):l+(".jstree-"+g.get_index()+" li["+h+'="'+a+'"] > a > .jstree-icon { '),e.icon.image&&(l+=" background-image:url("+
e.icon.image+"); "),l=e.icon.position?l+(" background-position:"+e.icon.position+"; "):l+" background-position:0 0; ",l+="} "});""!==l&&c.vakata.css.add_sheet({str:l,title:"jstree-types"})},this)).bind("before.jstree",c.proxy(function(a,l){var g,e;if((g=(g=this._get_settings().types.use_data?this._get_node(l.args[0]):!1)&&-1!==g&&g.length?g.data("jstree"):!1)&&g.types&&!1===g.types[l.func]||-1!==c.inArray(l.func,this.data.types.attach_to)&&(l.args[0]&&(l.args[0].tagName||l.args[0].jquery))&&(g=this._get_settings().types.types,
e=this._get_type(l.args[0]),(g[e]&&"undefined"!==typeof g[e][l.func]||g["default"]&&"undefined"!==typeof g["default"][l.func])&&!1===this._check(l.func,l.args[0])))return a.stopImmediatePropagation(),!1},this));e&&this.get_container().bind("load_node.jstree set_type.jstree",c.proxy(function(a,e){var g=e&&e.rslt&&e.rslt.obj&&-1!==e.rslt.obj?this._get_node(e.rslt.obj).parent():this.get_container_ul(),s=!1,n=this._get_settings().types;c.each(n.types,function(a,c){c.icon&&(c.icon.image||c.icon.position)&&
(s="default"===a?g.find("li > a > .jstree-icon"):g.find("li["+n.type_attr+"='"+a+"'] > a > .jstree-icon"),c.icon.image&&s.css("backgroundImage","url("+c.icon.image+")"),s.css("backgroundPosition",c.icon.position||"0 0"))})},this))},defaults:{max_children:-1,max_depth:-1,valid_children:"all",use_data:!1,type_attr:"rel",types:{"default":{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_types_notify:function(a,c){c.type&&this._get_settings().types.use_data&&this.set_type(c.type,a)},_get_type:function(a){return(a=
this._get_node(a))&&a.length?a.attr(this._get_settings().types.type_attr)||"default":!1},set_type:function(a,c){c=this._get_node(c);var e=c.length&&a?c.attr(this._get_settings().types.type_attr,a):!1;e&&this.__callback({obj:c,type:a});return e},_check:function(a,h,e){h=this._get_node(h);var g=!1,s=this._get_type(h),n=0,q=this,v=this._get_settings().types,E=!1;if(-1===h)if(v[a])g=v[a];else return;else{if(!1===s)return;(E=v.use_data?h.data("jstree"):!1)&&E.types&&"undefined"!==typeof E.types[a]?g=E.types[a]:
v.types[s]&&"undefined"!==typeof v.types[s][a]?g=v.types[s][a]:v.types["default"]&&"undefined"!==typeof v.types["default"][a]&&(g=v.types["default"][a])}c.isFunction(g)&&(g=g.call(this,h));"max_depth"===a&&(-1!==h&&!1!==e&&-2!==v.max_depth&&0!==g)&&h.children("a:eq(0)").parentsUntil(".jstree","li").each(function(c){if(-1!==v.max_depth&&0>=v.max_depth-(c+1))return g=0,!1;n=0===c?g:q._check(a,this,!1);if(-1!==n&&0>=n-(c+1))return g=0,!1;0<=n&&(n-(c+1)<g||0>g)&&(g=n-(c+1));0<=v.max_depth&&(v.max_depth-
(c+1)<g||0>g)&&(g=v.max_depth-(c+1))});return g},check_move:function(){if(!this.__call_old())return!1;var a=this._get_move(),h=a.rt._get_settings().types,e=a.rt._check("max_children",a.cr),g=a.rt._check("max_depth",a.cr),s=a.rt._check("valid_children",a.cr),n=0,q=1;if("none"===s||c.isArray(s)&&(a.ot&&a.ot._get_type)&&(a.o.each(function(){if(-1===c.inArray(a.ot._get_type(this),s))return q=!1}),!1===q)||-2!==h.max_children&&-1!==e&&(n=-1===a.cr?this.get_container().find("> ul > li").not(a.o).length:
a.cr.find("> ul > li").not(a.o).length,n+a.o.length>e))return!1;if(-2!==h.max_depth&&-1!==g){q=0;if(0===g)return!1;if("undefined"===typeof a.o.d){for(h=a.o;0<h.length;)h=h.find("> ul > li"),q++;a.o.d=q}if(0>g-a.o.d)return!1}return!0},create_node:function(a,h,e,g,s,n){if(!n&&(s||this._is_loaded(a))){var q="string"==typeof h&&h.match(/^before|after$/i)&&-1!==a?this._get_parent(a):this._get_node(a),v=this._get_settings().types,E=this._check("max_children",q),u=this._check("max_depth",q),N=this._check("valid_children",
q);"string"===typeof e&&(e={data:e});e||(e={});if("none"===N)return!1;if(c.isArray(N))if(!e.attr||!e.attr[v.type_attr])e.attr||(e.attr={}),e.attr[v.type_attr]=N[0];else if(-1===c.inArray(e.attr[v.type_attr],N))return!1;if(-2!==v.max_children&&-1!==E&&(q=-1===q?this.get_container().find("> ul > li").length:q.find("> ul > li").length,q+1>E)||-2!==v.max_depth&&-1!==u&&0>u-1)return!1}return this.__call_old(!0,a,h,e,g,s,n)}}})})(jQuery);(function(c){c.jstree.plugin("html_data",{__init:function(){this.data.html_data.original_container_html=
this.get_container().find(" > ul > li").clone(!0);this.data.html_data.original_container_html.find("li").addBack().contents().filter(function(){return 3==this.nodeType}).remove()},defaults:{data:!1,ajax:!1,correct_state:!0},_fn:{load_node:function(a,c,e){var g=this;this.load_node_html(a,function(){g.__callback({obj:g._get_node(a)});c.call(this)},e)},_is_loaded:function(a){a=this._get_node(a);return-1==a||!a||!this._get_settings().html_data.ajax&&!c.isFunction(this._get_settings().html_data.data)||
a.is(".jstree-open, .jstree-leaf")||0<a.children("ul").children("li").size()},load_node_html:function(a,h,e){var g,s=this.get_settings().html_data,n=function(){};g=function(){};if((a=this._get_node(a))&&-1!==a){if(a.data("jstree_is_loading"))return;a.data("jstree_is_loading",!0)}switch(!0){case c.isFunction(s.data):s.data.call(this,a,c.proxy(function(g){g&&""!==g&&g.toString&&""!==g.toString().replace(/^[\s\n]+$/,"")?(g=c(g),g.is("ul")||(g=c("<ul />").append(g)),-1!=a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),
a.append(g).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(g.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),
this.clean_node(a),h&&h.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),s.correct_state&&(this.correct_state(a),h&&h.call(this))):s.correct_state&&(this.get_container().children("ul").empty(),h&&h.call(this))},this));break;case !s.data&&!s.ajax:a&&-1!=a||(this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||
"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node());h&&h.call(this);break;case !!s.data&&!s.ajax||!!s.data&&!!s.ajax&&(!a||-1===a):a&&-1!=a||(g=c(s.data),g.is("ul")||(g=c("<ul />").append(g)),this.get_container().children("ul").empty().append(g.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),
this.clean_node());h&&h.call(this);break;case !s.data&&!!s.ajax||!!s.data&&!!s.ajax&&a&&-1!==a:a=this._get_node(a),n=function(c,g,h){var n=this.get_settings().html_data.ajax.error;n&&n.call(this,c,g,h);-1!=a&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),"success"===g&&s.correct_state&&this.correct_state(a)):"success"===g&&s.correct_state&&this.get_container().children("ul").empty();e&&e.call(this)},g=function(g,e,l){var q=this.get_settings().html_data.ajax.success;
q&&(g=q.call(this,g,e,l)||g);if(""===g||g&&g.toString&&""===g.toString().replace(/^[\s\n]+$/,""))return n.call(this,l,e,"");g?(g=c(g),g.is("ul")||(g=c("<ul />").append(g)),-1!=a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(g).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),
a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(g.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(a),h&&h.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),s.correct_state&&
(this.correct_state(a),h&&h.call(this))):s.correct_state&&(this.get_container().children("ul").empty(),h&&h.call(this))},s.ajax.context=this,s.ajax.error=n,s.ajax.success=g,s.ajax.dataType||(s.ajax.dataType="html"),c.isFunction(s.ajax.url)&&(s.ajax.url=s.ajax.url.call(this,a)),c.isFunction(s.ajax.data)&&(s.ajax.data=s.ajax.data.call(this,a)),c.ajax(s.ajax)}}}});c.jstree.defaults.plugins.push("html_data")})(jQuery);(function(c){c.jstree.plugin("themeroller",{__init:function(){var a=this._get_settings().themeroller;
this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a","mouseenter.jstree",function(h){c(h.currentTarget).hasClass("jstree-loading")||c(this).addClass(a.item_h)}).delegate("a","mouseleave.jstree",function(){c(this).removeClass(a.item_h)}).bind("init.jstree",c.proxy(function(a,c){c.inst.get_container().find("> ul > li > .jstree-loading > ins").addClass("ui-icon-refresh");this._themeroller(c.inst.get_container().find("> ul > li"))},this)).bind("open_node.jstree create_node.jstree",
c.proxy(function(a,c){this._themeroller(c.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",c.proxy(function(a){this._themeroller()},this)).bind("close_node.jstree",c.proxy(function(a,c){this._themeroller(c.rslt.obj)},this)).bind("delete_node.jstree",c.proxy(function(a,c){this._themeroller(c.rslt.parent)},this)).bind("correct_state.jstree",c.proxy(function(c,e){e.rslt.obj.children("ins.jstree-icon").removeClass(a.opened+" "+a.closed+" ui-icon").end().find("> a > ins.ui-icon").filter(function(){return-1===
this.className.toString().replace(a.item_clsd,"").replace(a.item_open,"").replace(a.item_leaf,"").indexOf("ui-icon-")}).removeClass(a.item_open+" "+a.item_clsd).addClass(a.item_leaf||"jstree-no-icon")},this)).bind("select_node.jstree",c.proxy(function(c,e){e.rslt.obj.children("a").addClass(a.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",c.proxy(function(c,e){this.get_container().find("a."+a.item_a).removeClass(a.item_a).end().find("a.jstree-clicked").addClass(a.item_a)},this)).bind("dehover_node.jstree",
c.proxy(function(c,e){e.rslt.obj.children("a").removeClass(a.item_h)},this)).bind("hover_node.jstree",c.proxy(function(c,e){this.get_container().find("a."+a.item_h).not(e.rslt.obj).removeClass(a.item_h);e.rslt.obj.children("a").addClass(a.item_h)},this)).bind("move_node.jstree",c.proxy(function(a,c){this._themeroller(c.rslt.o);this._themeroller(c.rslt.op)},this))},__destroy:function(){var a=this._get_settings().themeroller,h=["ui-icon"];c.each(a,function(a,c){c=c.split(" ");c.length&&(h=h.concat(c))});
this.get_container().removeClass("ui-widget-content").find("."+h.join(", .")).removeClass(h.join(" "))},_fn:{_themeroller:function(a){var c=this._get_settings().themeroller;a=(a=a&&-1!=a?this._get_node(a):this.get_container_ul())&&-1!=a?a.parent():this.get_container_ul();a.find("li.jstree-closed").children("ins.jstree-icon").removeClass(c.opened).addClass("ui-icon "+c.closed).end().children("a").addClass(c.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(c.item_clsd,
"").replace(c.item_open,"").replace(c.item_leaf,"").indexOf("ui-icon-")}).removeClass(c.item_leaf+" "+c.item_open).addClass(c.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(c.closed).addClass("ui-icon "+c.opened).end().children("a").addClass(c.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(c.item_clsd,"").replace(c.item_open,"").replace(c.item_leaf,"").indexOf("ui-icon-")}).removeClass(c.item_leaf+
" "+c.item_clsd).addClass(c.item_open||"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(c.closed+" ui-icon "+c.opened).end().children("a").addClass(c.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(c.item_clsd,"").replace(c.item_open,"").replace(c.item_leaf,"").indexOf("ui-icon-")}).removeClass(c.item_clsd+" "+c.item_open).addClass(c.item_leaf||"jstree-no-icon")}},defaults:{opened:"ui-icon-triangle-1-se",
closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_open:"ui-icon-folder-open",item_clsd:"ui-icon-folder-collapsed",item_leaf:"ui-icon-document"}});c(function(){c.vakata.css.add_sheet({str:".jstree-themeroller .ui-icon { overflow:visible; } .jstree-themeroller a { padding:0 2px; } .jstree-themeroller .jstree-no-icon { display:none; }",title:"jstree"})})})(jQuery);(function(c){c.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",
c.proxy(function(a,h){var e=[],g=!0,s;"move_node"==h.func&&(!0===h.args[4]&&h.args[0].o&&h.args[0].o.length)&&(h.args[0].o.children("a").each(function(){e.push(c(this).text().replace(/^\s+/g,""))}),g=this._check_unique(e,h.args[0].np.find("> ul > li").not(h.args[0].o),"move_node"));"create_node"==h.func&&(h.args[4]||this._is_loaded(h.args[0]))&&(g=this._get_node(h.args[0]),!h.args[1]||"before"!==h.args[1]&&"after"!==h.args[1]||(g=this._get_parent(h.args[0]))&&-1!==g||(g=this.get_container()),"string"===
typeof h.args[2]?e.push(h.args[2]):h.args[2]&&h.args[2].data?e.push(h.args[2].data):e.push(this._get_string("new_node")),g=this._check_unique(e,g.find("> ul > li"),"create_node"));"rename_node"==h.func&&(e.push(h.args[1]),s=this._get_node(h.args[0]),(g=this._get_parent(s))&&-1!==g||(g=this.get_container()),g=this._check_unique(e,g.find("> ul > li").not(s),"rename_node"));if(!g)return a.stopPropagation(),!1},this))},defaults:{error_callback:c.noop},_fn:{_check_unique:function(a,h,e){var g=[],s=!0;
h.children("a").each(function(){g.push(c(this).text().replace(/^\s+/g,""))});if(!g.length||!a.length)return!0;c.each(a,function(a,h){if(-1!==c.inArray(h,g))return s=!1});s||this._get_settings().unique.error_callback.call(null,a,h,e);return s},check_move:function(){if(!this.__call_old())return!1;var a=this._get_move(),h=[];return a.o&&a.o.length?(a.o.children("a").each(function(){h.push(c(this).text().replace(/^\s+/g,""))}),this._check_unique(h,a.np.find("> ul > li").not(a.o),"check_move")):!0}}})})(jQuery);
(function(c){c.jstree.plugin("wholerow",{__init:function(){if(!this.data.ui)throw"jsTree wholerow: jsTree UI plugin not included.";this.data.wholerow.html=!1;this.data.wholerow.to=!1;this.get_container().bind("init.jstree",c.proxy(function(a,c){this._get_settings().core.animation=0},this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",c.proxy(function(a,c){this._prepare_wholerow_span(c&&c.rslt&&c.rslt.obj?c.rslt.obj:-1)},this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",
c.proxy(function(a,c){this.data.to&&clearTimeout(this.data.to);this.data.to=setTimeout(function(a,c){return function(){a._prepare_wholerow_ul(c)}}(this,c&&c.rslt&&c.rslt.obj?c.rslt.obj:-1),0)},this)).bind("deselect_all.jstree",c.proxy(function(a,c){this.get_container().find(" > .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+(this.data.themeroller?this._get_settings().themeroller.item_a:""))},this)).bind("select_node.jstree deselect_node.jstree ",c.proxy(function(a,e){e.rslt.obj.each(function(){e.inst.get_container().find(" > .jstree-wholerow li:visible:eq("+
parseInt((c(this).offset().top-e.inst.get_container().offset().top+e.inst.get_container()[0].scrollTop)/e.inst.data.core.li_height,10)+")").children("a").attr("class",e.rslt.obj.children("a").attr("class"))})},this)).bind("hover_node.jstree dehover_node.jstree",c.proxy(function(a,c){this.get_container().find(" > .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+(this.data.themeroller?this._get_settings().themeroller.item_h:""));"hover_node"===a.type&&this.get_container().find(" > .jstree-wholerow li:visible:eq("+
parseInt((c.rslt.obj.offset().top-this.get_container().offset().top+this.get_container()[0].scrollTop)/this.data.core.li_height,10)+")").children("a").attr("class",c.rslt.obj.children(".jstree-hovered").attr("class"))},this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li","click.jstree",function(a){var e=c(a.currentTarget);"A"===a.target.tagName||"INS"===a.target.tagName&&e.closest("li").is(".jstree-open, .jstree-closed")||(e.closest("li").children("a:visible:eq(0)").click(),a.stopImmediatePropagation())}).delegate("li",
"mouseover.jstree",c.proxy(function(a){a.stopImmediatePropagation();if(c(a.currentTarget).children(".jstree-hovered, .jstree-clicked").length)return!1;this.hover_node(a.currentTarget);return!1},this)).delegate("li","mouseleave.jstree",c.proxy(function(a){c(a.currentTarget).children("a").hasClass("jstree-hovered").length||this.dehover_node(a.currentTarget)},this));(n||e)&&c.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove();
this.get_container().find(".jstree-wholerow-span").remove()},_fn:{_prepare_wholerow_span:function(a){a=a&&-1!=a?this._get_node(a):this.get_container().find("> ul > li");!1!==a&&a.each(function(){c(this).find("li").addBack().each(function(){var a=c(this);if(a.children(".jstree-wholerow-span").length)return!0;a.prepend("<span class='jstree-wholerow-span' style='width:"+18*a.parentsUntil(".jstree","li").length+"px;'>&#160;</span>")})})},_prepare_wholerow_ul:function(){var a=this.get_container().children("ul").eq(0),
c=a.html();a.addClass("jstree-wholerow-real");this.data.wholerow.last_html!==c&&(this.data.wholerow.last_html=c,this.get_container().children(".jstree-wholerow").remove(),this.get_container().append(a.clone().removeClass("jstree-wholerow-real").wrapAll("<div class='jstree-wholerow' />").parent().width(a.parent()[0].scrollWidth).css("top",-1*(a.height()+(n?5:0))).find("li[id]").each(function(){this.removeAttribute("id")}).end()))}}});c(function(){var a=".jstree .jstree-wholerow-real { position:relative; z-index:1; } .jstree .jstree-wholerow-real li { cursor:pointer; } .jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } .jstree .jstree-wholerow { position:relative; z-index:0; height:0; } .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }.jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }.jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px; !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } .jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";
q&&(a+=".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } .jstree .jstree-wholerow-real a { border-color:transparent !important; } ");if(n||e)a+=".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } .jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } ";c.vakata.css.add_sheet({str:a,title:"jstree"})})})(jQuery);(function(c){var a=
["getChildren","getChildrenCount","getAttr","getName","getProps"],e=function(a,g){var e=!0;a=a||{};g=[].concat(g);c.each(g,function(g,h){if(!c.isFunction(a[h]))return e=!1});return e};c.jstree.plugin("model",{__init:function(){if(!this.data.json_data)throw"jsTree model: jsTree json_data plugin not included.";this._get_settings().json_data.data=function(l,g){var s=-1==l?this._get_settings().model.object:l.data("jstree_model");if(!e(s,a))return g.call(null,!1);this._get_settings().model.async?s.getChildren(c.proxy(function(a){this.model_done(a,
g)},this)):this.model_done(s.getChildren(),g)}},defaults:{object:!1,id_prefix:!1,async:!1},_fn:{model_done:function(a,g){var e=[],h=this._get_settings(),n=this;c.isArray(a)||(a=[a]);c.each(a,function(a,g){var l=g.getProps()||{};l.attr=g.getAttr()||{};g.getChildrenCount()&&(l.state="closed");l.data=g.getName();c.isArray(l.data)||(l.data=[l.data]);n.data.types&&c.isFunction(g.getType)&&(l.attr[h.types.type_attr]=g.getType());l.attr.id&&h.model.id_prefix&&(l.attr.id=h.model.id_prefix+l.attr.id);l.metadata||
(l.metadata={});l.metadata.jstree_model=g;e.push(l)});g.call(null,e)}}})})(jQuery)}})();
(function(e){e.color={};e.color.make=function(n,c,a,h){var l={};l.r=n||0;l.g=c||0;l.b=a||0;l.a=null!=h?h:1;l.add=function(a,c){for(var e=0;e<a.length;++e)l[a.charAt(e)]+=c;return l.normalize()};l.scale=function(a,c){for(var e=0;e<a.length;++e)l[a.charAt(e)]*=c;return l.normalize()};l.toString=function(){return 1<=l.a?"rgb("+[l.r,l.g,l.b].join()+")":"rgba("+[l.r,l.g,l.b,l.a].join()+")"};l.normalize=function(){function a(c,g,e){return g<c?c:g>e?e:g}l.r=a(0,parseInt(l.r),255);l.g=a(0,parseInt(l.g),255);
l.b=a(0,parseInt(l.b),255);l.a=a(0,l.a,1);return l};l.clone=function(){return e.color.make(l.r,l.b,l.g,l.a)};return l.normalize()};e.color.extract=function(n,c){var a;do{a=n.css(c).toLowerCase();if(""!=a&&"transparent"!=a)break;n=n.parent()}while(!e.nodeName(n.get(0),"body"));"rgba(0, 0, 0, 0)"==a&&(a="transparent");return e.color.parse(a)};e.color.parse=function(q){var c,a=e.color.make;if(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(q))return a(parseInt(c[1],10),parseInt(c[2],
10),parseInt(c[3],10));if(c=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(q))return a(parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10),parseFloat(c[4]));if(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(q))return a(2.55*parseFloat(c[1]),2.55*parseFloat(c[2]),2.55*parseFloat(c[3]));if(c=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(q))return a(2.55*
parseFloat(c[1]),2.55*parseFloat(c[2]),2.55*parseFloat(c[3]),parseFloat(c[4]));if(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(q))return a(parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16));if(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(q))return a(parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16));q=e.trim(q).toLowerCase();if("transparent"==q)return a(255,255,255,0);c=n[q]||[0,0,0];return a(c[0],c[1],c[2])};var n={aqua:[0,255,255],azure:[240,255,255],beige:[245,
245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,
144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);
(function(e,n,q){var c=n.event,a;c.special.smartresize={setup:function(){n(this).bind("resize",c.special.smartresize.handler)},teardown:function(){n(this).unbind("resize",c.special.smartresize.handler)},handler:function(c,e){var h=this,l=arguments;c.type="smartresize";a&&clearTimeout(a);a=setTimeout(function(){jQuery.event.handle.apply(h,l)},"execAsap"===e?0:100)}};n.fn.smartresize=function(a){return a?this.bind("smartresize",a):this.trigger("smartresize",["execAsap"])};n.Mason=function(a,c){this.element=
n(c);this._create(a);this._init()};var h=["position","height"];n.Mason.settings={isResizable:!0,isAnimated:!1,animationOptions:{queue:!1,duration:500},gutterWidth:0,isRTL:!1,isFitWidth:!1};n.Mason.prototype={_filterFindBricks:function(a){var c=this.options.itemSelector;return c?a.filter(c).add(a.find(c)):a},_getBricks:function(a){return this._filterFindBricks(a).css({position:"absolute"}).addClass("masonry-brick")},_create:function(a){this.options=n.extend(!0,{},n.Mason.settings,a);this.styleQueue=
[];this.reloadItems();a=this.element[0].style;this.originalStyle={};for(var c=0,l=h.length;c<l;c++){var q=h[c];this.originalStyle[q]=a[q]||""}this.element.css({position:"relative"});this.horizontalDirection=this.options.isRTL?"right":"left";this.offset={};a=n(document.createElement("div"));this.element.prepend(a);this.offset.y=Math.round(a.position().top);this.options.isRTL?(a.css({"float":"right",display:"inline-block"}),this.offset.x=Math.round(this.element.outerWidth()-a.position().left)):this.offset.x=
Math.round(a.position().left);a.remove();var v=this;setTimeout(function(){v.element.addClass("masonry")},0);this.options.isResizable&&n(e).bind("smartresize.masonry",function(){v.resize()})},_init:function(a){this._getColumns("masonry");this._reLayout(a)},option:function(a,c){n.isPlainObject(a)&&(this.options=n.extend(!0,this.options,a))},layout:function(a,c){for(var e,h,l,q,u,N,P=0,S=a.length;P<S;P++)if(e=n(a[P]),h=Math.ceil(e.outerWidth(!0)/this.columnWidth),h=Math.min(h,this.cols),1===h)this._placeBrick(e,
this.colYs);else{l=this.cols+1-h;q=[];for(N=0;N<l;N++)u=this.colYs.slice(N,N+h),q[N]=Math.max.apply(Math,u);this._placeBrick(e,q)}S={};S.height=Math.max.apply(Math,this.colYs)-this.offset.y;if(this.options.isFitWidth){e=0;for(P=this.cols;--P&&this.colYs[P]===this.offset.y;)e++;S.width=(this.cols-e)*this.columnWidth-this.options.gutterWidth}this.styleQueue.push({$el:this.element,style:S});e=this.isLaidOut?this.options.isAnimated?"animate":"css":"css";h=this.options.animationOptions;P=0;for(S=this.styleQueue.length;P<
S;P++)l=this.styleQueue[P],l.$el[e](l.style,h);this.styleQueue=[];c&&c.call(a);this.isLaidOut=!0},_getColumns:function(){var a=(this.options.isFitWidth?this.element.parent():this.element).width();this.columnWidth=this.options.columnWidth||this.$bricks.outerWidth(!0)||a;this.columnWidth+=this.options.gutterWidth;this.cols=Math.floor((a+this.options.gutterWidth)/this.columnWidth);this.cols=Math.max(this.cols,1)},_placeBrick:function(a,c){for(var e=Math.min.apply(Math,c),h=0,l=0,n=c.length;l<n;l++)if(c[l]===
e){h=l;break}l={top:e};l[this.horizontalDirection]=this.columnWidth*h+this.offset.x;this.styleQueue.push({$el:a,style:l});e+=a.outerHeight(!0);n=this.cols+1-n;for(l=0;l<n;l++)this.colYs[h+l]=e},resize:function(){var a=this.cols;this._getColumns("masonry");this.cols!==a&&this._reLayout()},_reLayout:function(a){var c=this.cols;for(this.colYs=[];c--;)this.colYs.push(this.offset.y);this.layout(this.$bricks,a)},reloadItems:function(){this.$bricks=this._getBricks(this.element.children())},reload:function(a){this.reloadItems();
this._init(a)},appended:function(a,c,e){if(c){this._filterFindBricks(a).css({top:this.element.height()});var h=this;setTimeout(function(){h._appended(a,e)},1)}else this._appended(a,e)},_appended:function(a,c){var e=this._getBricks(a);this.$bricks=this.$bricks.add(e);this.layout(e,c)},remove:function(a){this.$bricks=this.$bricks.not(a);a.remove()},destroy:function(){this.$bricks.removeClass("masonry-brick").each(function(){this.style.position="";this.style.top="";this.style.left=""});for(var a=this.element[0].style,
c=0,l=h.length;c<l;c++){var q=h[c];a[q]=this.originalStyle[q]}this.element.unbind(".masonry").removeClass("masonry").removeData("masonry");n(e).unbind(".masonry")}};n.fn.imagesLoaded=function(a){function c(){0>=--n&&this.src!==u&&(setTimeout(e),l.unbind("load error",c))}function e(){a.call(h,l)}var h=this,l=h.find("img").add(h.filter("img")),n=l.length,u="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";n||e();l.bind("load error",c).each(function(){if(this.complete||this.complete===
q){var a=this.src;this.src=u;this.src=a}});return h};var l=function(a){this.console&&console.error(a)};n.fn.masonry=function(a){if("string"==typeof a){var c=Array.prototype.slice.call(arguments,1);this.each(function(){var e=n.data(this,"masonry");e?n.isFunction(e[a])&&"_"!==a.charAt(0)?e[a].apply(e,c):l("no such method '"+a+"' for masonry instance"):l("cannot call methods on masonry prior to initialization; attempted to call method '"+a+"'")})}else this.each(function(){var c=n.data(this,"masonry");
c?(c.option(a||{}),c._init()):n.data(this,"masonry",new n.Mason(a,this))});return this}})(window,jQuery);
jQuery.cookie=function(e,n,q){if(1<arguments.length&&"[object Object]"!==String(n)){q=jQuery.extend({},q);if(null===n||void 0===n)q.expires=-1;if("number"===typeof q.expires){var c=q.expires,a=q.expires=new Date;a.setDate(a.getDate()+c)}n=String(n);return document.cookie=[encodeURIComponent(e),"=",q.raw?n:encodeURIComponent(n),q.expires?"; expires="+q.expires.toUTCString():"",q.path?"; path="+q.path:"",q.domain?"; domain="+q.domain:"",q.secure?"; secure":""].join("")}q=n||{};a=q.raw?function(a){return a}:
decodeURIComponent;return(c=RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie))?a(c[1]):null};
d3=function(){function e(d){return null!=d&&!isNaN(d)}function n(d){return d.length}function q(d,a){try{for(var f in a)Object.defineProperty(d.prototype,f,{value:a[f],enumerable:!1})}catch(c){d.prototype=a}}function c(){}function a(){}function h(d,a,f){return function(){var c=f.apply(a,arguments);return c===a?d:c}}function l(){}function g(d){function a(){for(var w,c=f,D=-1,t=c.length;++D<t;)(w=c[D].on)&&w.apply(this,arguments);return d}var f=[],D=new c;return a.on=function(a,w){var c,t=D.get(a);return 2>
arguments.length?t&&t.on:(t&&(t.on=null,f=f.slice(0,c=f.indexOf(t)).concat(f.slice(c+1)),D.remove(a)),w&&f.push(D.set(a,{on:w})),d)},a}function s(){p.event.stopPropagation();p.event.preventDefault()}function x(){for(var d,a=p.event;d=a.sourceEvent;)a=d;return a}function Q(d,a){function f(){d.on(a,null)}d.on(a,function(){s();f()},!0);setTimeout(f,0)}function v(d){for(var a=new l,f=0,c=arguments.length;++f<c;)a[arguments[f]]=g(a);return a.of=function(f,c){return function(D){try{var t=D.sourceEvent=
p.event;D.target=d;p.event=D;a[D.type].apply(f,c)}finally{p.event=t}}},a}function E(d,a){var f=d.ownerSVGElement||d;if(f.createSVGPoint){var c=f.createSVGPoint();if(0>Ob&&(ca.scrollX||ca.scrollY)){var f=p.select(ga.body).append("svg").style("position","absolute").style("top",0).style("left",0),m=f[0][0].getScreenCTM();Ob=!(m.f||m.e);f.remove()}return Ob?(c.x=a.pageX,c.y=a.pageY):(c.x=a.clientX,c.y=a.clientY),c=c.matrixTransform(d.getScreenCTM().inverse()),[c.x,c.y]}f=d.getBoundingClientRect();return[a.clientX-
f.left-d.clientLeft,a.clientY-f.top-d.clientTop]}function u(d){for(var a=-1,f=d.length,c=[];++a<f;)c.push(d[a]);return c}function N(d){return Pb(d,R),d}function P(d){return function(){return $c(d,this)}}function S(d){return function(){return ad(d,this)}}function Sa(d,a){function f(){this.removeAttribute(d)}function c(){this.removeAttributeNS(d.space,d.local)}function m(){this.setAttribute(d,a)}function r(){this.setAttributeNS(d.space,d.local,a)}function B(){var f=a.apply(this,arguments);null==f?this.removeAttribute(d):
this.setAttribute(d,f)}function t(){var f=a.apply(this,arguments);null==f?this.removeAttributeNS(d.space,d.local):this.setAttributeNS(d.space,d.local,f)}return d=p.ns.qualify(d),null==a?d.local?c:f:"function"==typeof a?d.local?t:B:d.local?r:m}function Ha(d){return d.trim().replace(/\s+/g," ")}function Yc(d){return RegExp("(?:^|\\s+)"+p.requote(d)+"(?:\\s+|$)","g")}function Zc(d,a){function f(){for(var f=-1;++f<m;)d[f](this,a)}function c(){for(var f=-1,D=a.apply(this,arguments);++f<m;)d[f](this,D)}
d=d.trim().split(/\s+/).map(qf);var m=d.length;return"function"==typeof a?c:f}function qf(d){var a=Yc(d);return function(f,c){if(m=f.classList)return c?m.add(d):m.remove(d);var m=f.getAttribute("class")||"";c?(a.lastIndex=0,a.test(m)||f.setAttribute("class",Ha(m+" "+d))):f.setAttribute("class",Ha(m.replace(a," ")))}}function bd(d,a,f){function c(){this.style.removeProperty(d)}function m(){this.style.setProperty(d,a,f)}function r(){var c=a.apply(this,arguments);null==c?this.style.removeProperty(d):
this.style.setProperty(d,c,f)}return null==a?c:"function"==typeof a?r:m}function cd(d,a){function f(){delete this[d]}function c(){this[d]=a}function m(){var f=a.apply(this,arguments);null==f?delete this[d]:this[d]=f}return null==a?f:"function"==typeof a?m:c}function dd(d){return function(){return ed(this,d)}}function rf(d){return arguments.length||(d=p.ascending),function(a,f){return!a-!f||d(a.__data__,f.__data__)}}function Y(){}function fd(d,a,f){function c(){var a=this[B];a&&(this.removeEventListener(d,
a,a.$),delete this[B])}function m(){var m=O(a,wa(arguments));c.call(this);this.addEventListener(d,this[B]=m,m.$=f);m._=a}function r(){var a,w=RegExp("^__on([^.]+)"+p.requote(d)+"$"),f;for(f in this)if(a=f.match(w)){var c=this[f];this.removeEventListener(a[1],c,c.$);delete this[f]}}var B="__on"+d,t=d.indexOf("."),O=gd;0<t&&(d=d.substring(0,t));var e=Qb.get(d);return e&&(d=e,O=sf),t?a?m:c:a?Y:r}function gd(d,a){return function(f){var c=p.event;p.event=f;a[0]=this.__data__;try{d.apply(this,a)}finally{p.event=
c}}}function sf(d,a){var f=gd(d,a);return function(d){var a=d.relatedTarget;a&&(a===this||a.compareDocumentPosition(this)&8)||f.call(this,d)}}function xa(d,a){for(var f=0,c=d.length;c>f;f++)for(var m,r=d[f],B=0,t=r.length;t>B;B++)(m=r[B])&&a(m,B,f);return d}function hd(d){return Pb(d,Ca),d}function Ia(){}function Ja(d,a,f){return new Sb(d,a,f)}function Sb(d,a,f){this.h=d;this.s=a;this.l=f}function cb(d,a,f){function c(d){return 360<d?d-=360:0>d&&(d+=360),60>d?m+(r-m)*d/60:180>d?r:240>d?m+(r-m)*(240-
d)/60:m}var m,r;return d%=360,0>d&&(d+=360),a=0>a?0:1<a?1:a,f=0>f?0:1<f?1:f,r=0.5>=f?f*(1+a):f+a-f*a,m=2*f-r,qa(Math.round(255*c(d+120)),Math.round(255*c(d)),Math.round(255*c(d-120)))}function id(d){return(d=Math.sin(d/2))*d}function Ka(d,a,f){return new db(d,a,f)}function db(d,a,f){this.h=d;this.c=a;this.l=f}function Tb(d,a,f){return La(f,Math.cos(d*=G)*a,Math.sin(d)*a)}function La(d,a,f){return new eb(d,a,f)}function eb(d,a,f){this.l=d;this.a=a;this.b=f}function jd(d,a,f){d=(d+16)/116;a=d+a/500;
f=d-f/200;return a=Ub(a)*kd,d=Ub(d)*ld,f=Ub(f)*md,qa(Vb(3.2404542*a-1.5371385*d-0.4985314*f),Vb(-0.969266*a+1.8760108*d+0.041556*f),Vb(0.0556434*a-0.2040259*d+1.0572252*f))}function Ub(d){return 0.206893034<d?d*d*d:(d-4/29)/7.787037}function Wb(d){return 0.008856<d?Math.pow(d,1/3):7.787037*d+4/29}function Vb(d){return Math.round(255*(0.00304>=d?12.92*d:1.055*Math.pow(d,1/2.4)-0.055))}function qa(d,a,f){return new Xb(d,a,f)}function Xb(d,a,f){this.r=d;this.g=a;this.b=f}function Ma(d){return 16>d?"0"+
Math.max(0,d).toString(16):Math.min(255,d).toString(16)}function Yb(d,a,f){var c,m,r,B=0,t=0,O=0;if(c=/([a-z]+)\((.*)\)/i.exec(d))switch(m=c[2].split(","),c[1]){case "hsl":return f(parseFloat(m[0]),parseFloat(m[1])/100,parseFloat(m[2])/100);case "rgb":return a(Zb(m[0]),Zb(m[1]),Zb(m[2]))}return(r=fb.get(d))?a(r.r,r.g,r.b):(null!=d&&"#"===d.charAt(0)&&(4===d.length?(B=d.charAt(1),B+=B,t=d.charAt(2),t+=t,O=d.charAt(3),O+=O):7===d.length&&(B=d.substring(1,3),t=d.substring(3,5),O=d.substring(5,7)),B=
parseInt(B,16),t=parseInt(t,16),O=parseInt(O,16)),a(B,t,O))}function nd(d,a,f){var c,m,r=Math.min(d/=255,a/=255,f/=255),B=Math.max(d,a,f),t=B-r,O=(B+r)/2;return t?(m=0.5>O?t/(B+r):t/(2-B-r),c=d==B?(a-f)/t+(f>a?6:0):a==B?(f-d)/t+2:(d-a)/t+4,c*=60):m=c=0,Ja(c,m,O)}function od(d,a,f){d=$b(d);a=$b(a);f=$b(f);var c=Wb((0.4124564*d+0.3575761*a+0.1804375*f)/kd),m=Wb((0.2126729*d+0.7151522*a+0.072175*f)/ld);d=Wb((0.0193339*d+0.119192*a+0.9503041*f)/md);return La(116*m-16,500*(c-m),200*(m-d))}function $b(d){return 0.04045>=
(d/=255)?d/12.92:Math.pow((d+0.055)/1.055,2.4)}function Zb(d){var a=parseFloat(d);return"%"===d.charAt(d.length-1)?Math.round(2.55*a):a}function J(d){return"function"==typeof d?d:function(){return d}}function ia(d){return d}function tf(d){return 1===d.length?function(a,f){d(null==a?f:null)}:d}function pd(d,w){function f(d,a,f){3>arguments.length&&(f=a,a=null);var r=p.xhr(d,w,f);return r.row=function(d){return arguments.length?r.response(null==(a=d)?c:m(d)):a},r.row(a)}function c(d){return f.parse(d.responseText)}
function m(d){return function(a){return f.parse(a.responseText,d)}}function r(a){return a.map(B).join(d)}function B(d){return t.test(d)?'"'+d.replace(/\"/g,'""')+'"':d}var t=RegExp('["'+d+"\n]"),O=d.charCodeAt(0);return f.parse=function(d,a){var w;return f.parseRows(d,function(d,f){if(w)return w(d,f-1);var c=Function("d","return {"+d.map(function(d,a){return JSON.stringify(d)+": d["+a+"]"}).join(",")+"}");w=a?function(d,w){return a(c(d),w)}:c})},f.parseRows=function(d,a){function w(){if(B>=t)return m;
if(c)return c=!1,D;var a=B;if(34===d.charCodeAt(a)){for(var f=a;f++<t;)if(34===d.charCodeAt(f)){if(34!==d.charCodeAt(f+1))break;++f}B=f+2;var r=d.charCodeAt(f+1);return 13===r?(c=!0,10===d.charCodeAt(f+2)&&++B):10===r&&(c=!0),d.substring(a+1,f).replace(/""/g,'"')}for(;t>B;){r=d.charCodeAt(B++);f=1;if(10===r)c=!0;else if(13===r)c=!0,10===d.charCodeAt(B)&&(++B,++f);else if(r!==O)continue;return d.substring(a,B-f)}return d.substring(a)}for(var f,c,D={},m={},r=[],t=d.length,B=0,e=0;(f=w())!==m;){for(var g=
[];f!==D&&f!==m;)g.push(f),f=w();a&&!(g=a(g,e++))||r.push(g)}return r},f.format=function(w){if(Array.isArray(w[0]))return f.formatRows(w);var c=new a,D=[];return w.forEach(function(d){for(var a in d)c.has(a)||D.push(c.add(a))}),[D.map(B).join(d)].concat(w.map(function(a){return D.map(function(d){return B(a[d])}).join(d)})).join("\n")},f.formatRows=function(d){return d.map(r).join("\n")},f}function ac(){for(var d,a=Date.now(),f=Na;f;)d=a-f.then,d>=f.delay&&(f.flush=f.callback(d)),f=f.next;d=qd()-a;
24<d?(isFinite(d)&&(clearTimeout(gb),gb=setTimeout(ac,d)),hb=0):(hb=1,rd(ac))}function qd(){for(var d=null,a=Na,f=1/0;a;)a.flush?(delete bc[a.callback.id],a=d?d.next=a.next:Na=a.next):(f=Math.min(f,a.then+a.delay),a=(d=a).next);return f}function cc(d,a){return a-(d?Math.ceil(Math.log(d)/Math.LN10):1)}function uf(d){return d+""}function ib(d,a){d&&sd.hasOwnProperty(d.type)&&sd[d.type](d,a)}function dc(d,a,f){var c=-1,m=d.length-f;for(a.lineStart();++c<m;)f=d[c],a.point(f[0],f[1]);a.lineEnd()}function td(d,
a){var f=-1,c=d.length;for(a.polygonStart();++f<c;)dc(d[f],a,1);a.polygonEnd()}function vf(){function d(d,a){d*=G;a=a*G/2+C/4;var f=d-c,w=Math.cos(a),e=Math.sin(a),g=r*e,h=jb,l=kb,p=m*w+g*Math.cos(f),f=g*Math.sin(f);jb=h*p-l*f;kb=l*p+h*f;c=d;m=w;r=e}var a,f,c,m,r;ya.point=function(B,t){ya.point=d;c=(a=B)*G;m=Math.cos(t=(f=t)*G/2+C/4);r=Math.sin(t)};ya.lineEnd=function(){d(a,f)}}function ud(d){function a(d,f){c>d&&(c=d);d>r&&(r=d);m>f&&(m=f);f>B&&(B=f)}function f(){t.point=t.lineEnd=Y}var c,m,r,B,
t={point:a,lineStart:Y,lineEnd:Y,polygonStart:function(){t.lineEnd=f},polygonEnd:function(){t.point=a}};return function(a){return B=r=-(c=m=1/0),p.geo.stream(a,d(t)),[[c,m],[r,B]]}}function vd(d,a){if(!ba){++ka;d*=G;var f=Math.cos(a*=G);W+=(f*Math.cos(d)-W)/ka;X+=(f*Math.sin(d)-X)/ka;V+=(Math.sin(a)-V)/ka}}function wf(){var d,a;ba=1;ec();ba=2;var f=la.point;la.point=function(c,m){f(d=c,a=m)};la.lineEnd=function(){la.point(d,a);fc();la.lineEnd=fc}}function ec(){function d(d,r){d*=G;var B=Math.cos(r*=
G),t=B*Math.cos(d),B=B*Math.sin(d),e=Math.sin(r),g=Math.atan2(Math.sqrt((g=f*e-c*B)*g+(g=c*t-a*e)*g+(g=a*B-f*t)*g),a*t+f*B+c*e);ka+=g;W+=g*(a+(a=t));X+=g*(f+(f=B));V+=g*(c+(c=e))}var a,f,c;1<ba||(1>ba&&(ba=1,ka=W=X=V=0),la.point=function(m,r){m*=G;var B=Math.cos(r*=G);a=B*Math.cos(m);f=B*Math.sin(m);c=Math.sin(r);la.point=d})}function fc(){la.point=vd}function lb(d){var a=d[0];d=d[1];var f=Math.cos(d);return[f*Math.cos(a),f*Math.sin(a),Math.sin(d)]}function mb(d,a){return d[0]*a[0]+d[1]*a[1]+d[2]*
a[2]}function wd(d,a){return[d[1]*a[2]-d[2]*a[1],d[2]*a[0]-d[0]*a[2],d[0]*a[1]-d[1]*a[0]]}function gc(d,a){d[0]+=a[0];d[1]+=a[1];d[2]+=a[2]}function nb(d,a){return[d[0]*a,d[1]*a,d[2]*a]}function Ta(){return!0}function hc(d){return[Math.atan2(d[1],d[0]),Math.asin(Math.max(-1,Math.min(1,d[2])))]}function ob(d,a){return Math.abs(d[0]-a[0])<I&&Math.abs(d[1]-a[1])<I}function xd(d,a,f,c,m){var r=[],B=[];if(d.forEach(function(d){if(!(0>=(a=d.length-1))){var a,f=d[0],w=d[a];if(ob(f,w)){m.lineStart();for(w=
0;a>w;++w)m.point((f=d[w])[0],f[1]);return m.lineEnd(),void 0}d={point:f,points:d,other:null,visited:!1,entry:!0,subject:!0};f={point:f,points:[f],other:d,visited:!1,entry:!1,subject:!1};d.other=f;r.push(d);B.push(f);d={point:w,points:[w],other:null,visited:!1,entry:!1,subject:!0};f={point:w,points:[w],other:d,visited:!1,entry:!0,subject:!1};d.other=f;r.push(d);B.push(f)}}),B.sort(a),yd(r),yd(B),r.length){if(f)for(d=1,f=!f(B[0].point),a=B.length;a>d;++d)B[d].entry=f=!f;for(var t,e=r[0];;){for(f=e;f.visited;)if((f=
f.next)===e)return;a=f.points;m.lineStart();do{if(f.visited=f.other.visited=!0,f.entry){if(f.subject)for(d=0;d<a.length;d++)m.point((t=a[d])[0],t[1]);else c(f.point,f.next.point,1,m);f=f.next}else{if(f.subject)for(a=f.prev.points,d=a.length;0<=--d;)m.point((t=a[d])[0],t[1]);else c(f.point,f.prev.point,-1,m);f=f.prev}f=f.other;a=f.points}while(!f.visited);m.lineEnd()}}}function yd(d){if(a=d.length){for(var a,f,c=0,m=d[0];++c<a;)m.next=f=d[c],f.prev=m,m=f;m.next=f=d[0];f.prev=m}}function zd(d,a,f){return function(c){function m(a,
f){d(a,f)&&c.point(a,f)}function r(d,a){A.point(d,a)}function B(){z.point=r;A.lineStart()}function t(){z.point=m;A.lineEnd()}function e(d,a){L.point(d,a);y.push([d,a])}function g(){L.lineStart();y=[]}function h(){e(y[0][0],y[0][1]);L.lineEnd();var d;d=L.clean();var a=H.buffer(),f=a.length;if(!f)return q=!0,s+=Ad(y,-1),y=null,void 0;if(y=null,1&d){d=a[0];n+=Ad(d,1);var w,f=d.length-1,a=-1;for(c.lineStart();++a<f;)c.point((w=d[a])[0],w[1]);return c.lineEnd(),void 0}1<f&&2&d&&a.push(a.pop().concat(a.shift()));
l.push(a.filter(xf))}var l,n,s,q,y,A=a(c),z={point:m,lineStart:B,lineEnd:t,polygonStart:function(){z.point=e;z.lineStart=g;z.lineEnd=h;q=!1;s=n=0;l=[];c.polygonStart()},polygonEnd:function(){z.point=m;z.lineStart=B;z.lineEnd=t;l=p.merge(l);l.length?xd(l,yf,null,f,c):(-I>n||q&&-I>s)&&(c.lineStart(),f(null,null,1,c),c.lineEnd());c.polygonEnd();l=null},sphere:function(){c.polygonStart();c.lineStart();f(null,null,1,c);c.lineEnd();c.polygonEnd()}},H=Bd(),L=a(H);return z}}function xf(d){return 1<d.length}
function Bd(){var d,a=[];return{lineStart:function(){a.push(d=[])},point:function(a,w){d.push([a,w])},lineEnd:Y,buffer:function(){var f=a;return a=[],d=null,f},rejoin:function(){1<a.length&&a.push(a.pop().concat(a.shift()))}}}function Ad(d,a){if(!(f=d.length))return 0;var f,c,m,r=0,B=0;c=d[0];m=c[0];for(var t=c[1],e=Math.cos(t),g=Math.atan2(a*Math.sin(m)*e,Math.sin(t)),h=1-a*Math.cos(m)*e,l=g;++r<f;)c=d[r],e=Math.cos(t=c[1]),c=Math.atan2(a*Math.sin(m=c[0])*e,Math.sin(t)),m=1-a*Math.cos(m)*e,Math.abs(h-
2)<I&&Math.abs(m-2)<I||(Math.abs(m)<I||Math.abs(h)<I||(Math.abs(Math.abs(c-g)-C)<I?2<m+h&&(B+=4*(c-g)):B+=Math.abs(h-2)<I?4*(c-l):((3*C+c-g)%(2*C)-C)*(h+m)),l=g,g=c,h=m);return B}function yf(d,a){return(0>(d=d.point)[0]?d[1]-C/2-I:C/2-d[1])-(0>(a=a.point)[0]?a[1]-C/2-I:C/2-a[1])}function zf(d){function a(d,f){return Math.cos(d)*Math.cos(f)>m}function f(d,a,f){var w=lb(d),c=lb(a),D=[1,0,0],c=wd(w,c),r=mb(c,c),w=c[0],t=r-w*w;if(!t)return!f&&d;r=m*r/t;t=-m*w/t;w=wd(D,c);D=nb(D,r);c=nb(c,t);gc(D,c);c=
mb(D,w);r=mb(w,w);t=c*c-r*(mb(D,D)-1);if(!(0>t)){var B=Math.sqrt(t),t=nb(w,(-c-B)/r);if(gc(t,D),t=hc(t),!f)return t;var e;f=d[0];var g=a[0];d=d[1];a=a[1];f>g&&(e=f,f=g,g=e);var h=g-f,l=Math.abs(h-C)<I,p=l||I>h;if(!l&&d>a&&(e=d,d=a,a=e),p?l?0<d+a^t[1]<(Math.abs(t[0]-f)<I?d:a):d<=t[1]&&t[1]<=a:h>C^(f<=t[0]&&t[0]<=g))return e=nb(w,(-c+B)/r),gc(e,D),[t,hc(e)]}}function c(a,f){var w=r?d:C-d,m=0;return-w>a?m|=1:a>w&&(m|=2),-w>f?m|=4:f>w&&(m|=8),m}var m=Math.cos(d),r=0<m,B=Math.abs(m)>I,t=ic(d,6*G);return zd(a,
function(d){var m,t,e,g,h;return{lineStart:function(){g=e=!1;h=1},point:function(l,p){var n,s=[l,p],q=a(l,p),L=r?q?0:c(l,p):q?c(l+(0>l?C:-C),p):0;if(!m&&(g=e=q)&&d.lineStart(),q!==e&&(n=f(m,s),(ob(m,n)||ob(s,n))&&(s[0]+=I,s[1]+=I,q=a(s[0],s[1]))),q!==e)h=0,q?(d.lineStart(),n=f(s,m),d.point(n[0],n[1])):(n=f(m,s),d.point(n[0],n[1]),d.lineEnd()),m=n;else if(B&&m&&r^q){var F;L&t||!(F=f(s,m,!0))||(h=0,r?(d.lineStart(),d.point(F[0][0],F[0][1]),d.point(F[1][0],F[1][1]),d.lineEnd()):(d.point(F[1][0],F[1][1]),
d.lineEnd(),d.lineStart(),d.point(F[0][0],F[0][1])))}!q||m&&ob(m,s)||d.point(s[0],s[1]);m=s;e=q;t=L},lineEnd:function(){e&&d.lineEnd();m=null},clean:function(){return h|(g&&e)<<1}}},t)}function Af(d,a,f,c){function m(c,m){return Math.abs(c[0]-d)<I?0<m?0:3:Math.abs(c[0]-f)<I?0<m?2:1:Math.abs(c[1]-a)<I?0<m?1:0:0<m?3:2}function r(d,a){return B(d.point,a.point)}function B(d,a){var f=m(d,1),w=m(a,1);return f!==w?f-w:0===f?a[1]-d[1]:1===f?d[0]-a[0]:2===f?d[1]-a[1]:a[0]-d[0]}return function(t){function e(r){r=
m(r,-1);return g([0===r||3===r?d:f,1<r?c:a])}function g(d){for(var a=0,f=q.length,w=d[1],c=0;f>c;++c)for(var m=1,r=q[c],D=r.length,t=r[0];D>m;++m)b=r[m],t[1]<=w?b[1]>w&&0<(b[0]-t[0])*(d[1]-t[1])-(d[0]-t[0])*(b[1]-t[1])&&++a:b[1]<=w&&0>(b[0]-t[0])*(d[1]-t[1])-(d[0]-t[0])*(b[1]-t[1])&&--a,t=b;return 0!==a}function h(r,t,e,g){var O=0,l=0;if(null==r||(O=m(r,e))!==(l=m(t,e))||0>B(r,t)^0<e){do g.point(0===O||3===O?d:f,1<O?c:a);while((O=(O+e+4)%4)!==l)}else g.point(t[0],t[1])}function l(m,r){m>=d&&(f>=m&&
r>=a&&c>=r)&&t.point(m,r)}function n(m,r){m=Math.max(-pb,Math.min(pb,m));r=Math.max(-pb,Math.min(pb,r));var B=m>=d&&f>=m&&r>=a&&c>=r;if(q&&y.push([m,r]),da)A=m,z=r,H=B,da=!1,B&&(t.lineStart(),t.point(m,r));else if(B&&na)t.point(m,r);else{var e=[L,F],g=[m,r],h=g[0]-e[0],O=g[1]-e[1],l=[0,1];(Math.abs(h)<I&&Math.abs(O)<I?d<=e[0]&&e[0]<=f&&a<=e[1]&&e[1]<=c:qb(d-e[0],h,l)&&(qb(e[0]-f,-h,l)&&qb(a-e[1],O,l)&&qb(e[1]-c,-O,l))&&(1>l[1]&&(g[0]=e[0]+l[1]*h,g[1]=e[1]+l[1]*O),0<l[0]&&(e[0]+=l[0]*h,e[1]+=l[0]*
O),!0))?(na||(t.lineStart(),t.point(e[0],e[1])),t.point(g[0],g[1]),B||t.lineEnd()):(t.lineStart(),t.point(m,r))}L=m;F=r;na=B}var s,q,y,A,z,H,L,F,na,da,T=t,u=Bd(),v={point:l,lineStart:function(){v.point=n;q&&q.push(y=[]);da=!0;na=!1;L=F=0/0},lineEnd:function(){s&&(n(A,z),H&&na&&u.rejoin(),s.push(u.buffer()));v.point=l;na&&t.lineEnd()},polygonStart:function(){t=u;s=[];q=[]},polygonEnd:function(){t=T;(s=p.merge(s)).length?(t.polygonStart(),xd(s,r,e,h,t),t.polygonEnd()):g([d,a])&&(t.polygonStart(),t.lineStart(),
h(null,null,1,t),t.lineEnd(),t.polygonEnd());s=q=y=null}};return v}}function qb(d,a,f){if(Math.abs(a)<I)return 0>=d;d/=a;if(0<a){if(d>f[1])return!1;d>f[0]&&(f[0]=d)}else{if(d<f[0])return!1;d<f[1]&&(f[1]=d)}return!0}function Cd(d,a){function f(f,c){return f=d(f,c),a(f[0],f[1])}return d.invert&&a.invert&&(f.invert=function(f,c){return f=a.invert(f,c),f&&d.invert(f[0],f[1])}),f}function Dd(d){function a(w){function c(a,f){a=d(a,f);w.point(a[0],a[1])}function D(){p=0/0;z.point=e;w.lineStart()}function e(a,
c){var D=lb([a,c]),t=d(a,c);f(p,n,l,s,q,A,p=t[0],n=t[1],l=a,s=D[0],q=D[1],A=D[2],m,w);w.point(p,n)}function g(){z.point=c;w.lineEnd()}function h(){var d,a,c,B,va,T;D();z.point=function(f,w){e(d=f,w);a=p;c=n;B=s;va=q;T=A;z.point=e};z.lineEnd=function(){f(p,n,l,s,q,A,a,c,d,B,va,T,m,w);z.lineEnd=g;g()}}var l,p,n,s,q,A,z={point:c,lineStart:D,lineEnd:g,polygonStart:function(){w.polygonStart();z.lineStart=h},polygonEnd:function(){w.polygonEnd();z.lineStart=D}};return z}function f(a,w,m,e,g,h,l,p,n,s,q,
A,z,H){var L=l-a,F=p-w,na=L*L+F*F;if(na>4*c&&z--){var da=e+s,T=g+q,u=h+A,v=Math.sqrt(da*da+T*T+u*u),x=Math.asin(u/=v),Q=Math.abs(Math.abs(u)-1)<I?(m+n)/2:Math.atan2(T,da),E=d(Q,x),x=E[0],E=E[1],C=x-a,G=E-w,P=F*C-L*G;(P*P/na>c||0.3<Math.abs((L*C+F*G)/na-0.5))&&(f(a,w,m,e,g,h,x,E,Q,da/=v,T/=v,u,z,H),H.point(x,E),f(x,E,Q,da,T,u,l,p,n,s,q,A,z,H))}}var c=0.5,m=16;return a.precision=function(d){return arguments.length?(m=0<(c=d*d)&&16,a):Math.sqrt(c)},a}function za(d){return jc(function(){return d})()}
function jc(d){function a(d){return d=e(d[0]*G,d[1]*G),[d[0]*l+t,g-d[1]*l]}function f(d){return d=e.invert((d[0]-t)/l,(g-d[1])/l),d&&[d[0]*U,d[1]*U]}function c(){e=Cd(r=kc(y,A,z),m);var d=m(q,K);return t=n-d[0]*l,g=s+d[1]*l,a}var m,r,e,t,g,h=Dd(function(d,a){return d=m(d,a),[d[0]*l+t,g-d[1]*l]}),l=150,n=480,s=250,q=0,K=0,y=0,A=0,z=0,H=Ed,L=ia,F=null,u=null;return a.stream=function(d){return Cf(r,H(h(L(d))))},a.clipAngle=function(d){return arguments.length?(H=null==d?(F=d,Ed):zf((F=+d)*G),a):F},a.clipExtent=
function(d){return arguments.length?(u=d,L=null==d?ia:Af(d[0][0],d[0][1],d[1][0],d[1][1]),a):u},a.scale=function(d){return arguments.length?(l=+d,c()):l},a.translate=function(d){return arguments.length?(n=+d[0],s=+d[1],c()):[n,s]},a.center=function(d){return arguments.length?(q=d[0]%360*G,K=d[1]%360*G,c()):[q*U,K*U]},a.rotate=function(d){return arguments.length?(y=d[0]%360*G,A=d[1]%360*G,z=2<d.length?d[2]%360*G:0,c()):[y*U,A*U,z*U]},p.rebind(a,h,"precision"),function(){return m=d.apply(this,arguments),
a.invert=m.invert&&f,c()}}function Cf(d,a){return{point:function(f,c){c=d(f*G,c*G);f=c[0];a.point(f>C?f-2*C:-C>f?f+2*C:f,c[1])},sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function Ua(d,a){return[d,a]}function kc(d,a,f){return d?a||f?Cd(Fd(d),Gd(a,f)):Fd(d):a||f?Gd(a,f):Ua}function Hd(d){return function(a,f){return a+=d,[a>C?a-2*C:-C>a?a+2*C:a,f]}}function Fd(d){var a=
Hd(d);return a.invert=Hd(-d),a}function Gd(d,a){function f(d,a){var f=Math.cos(a),w=Math.cos(d)*f,f=Math.sin(d)*f,g=Math.sin(a),h=g*c+w*m;return[Math.atan2(f*r-h*e,w*c-g*m),Math.asin(Math.max(-1,Math.min(1,h*r+f*e)))]}var c=Math.cos(d),m=Math.sin(d),r=Math.cos(a),e=Math.sin(a);return f.invert=function(d,a){var f=Math.cos(a),w=Math.cos(d)*f,f=Math.sin(d)*f,g=Math.sin(a),h=g*r-f*e;return[Math.atan2(f*r+g*e,w*c+h*m),Math.asin(Math.max(-1,Math.min(1,h*c-w*m)))]},f}function ic(d,a){var f=Math.cos(d),c=
Math.sin(d);return function(m,r,e,t){null!=m?(m=Id(f,m),r=Id(f,r),(0<e?r>m:m>r)&&(m+=2*e*C)):(m=d+2*e*C,r=d);for(var g,h=e*a;0<e?m>r:r>m;m-=h)t.point((g=hc([f,-c*Math.cos(m),-c*Math.sin(m)]))[0],g[1])}}function Id(d,a){var f=lb(a);f[0]-=d;var c=Math.sqrt(f[0]*f[0]+f[1]*f[1]+f[2]*f[2]);f[0]/=c;f[1]/=c;f[2]/=c;c=Math.acos(Math.max(-1,Math.min(1,-f[1])));return((0>-f[2]?-c:c)+2*Math.PI-I)%(2*Math.PI)}function Jd(d,a,f){var c=p.range(d,a-I,f).concat(a);return function(d){return c.map(function(a){return[d,
a]})}}function Kd(d,a,f){var c=p.range(d,a-I,f).concat(a);return function(d){return c.map(function(a){return[a,d]})}}function lc(d){return d.source}function mc(d){return d.target}function Df(d,a,f,c){var m=Math.cos(a),r=Math.sin(a),e=Math.cos(c),t=Math.sin(c),g=m*Math.cos(d),h=m*Math.sin(d),l=e*Math.cos(f),p=e*Math.sin(f),n=2*Math.asin(Math.sqrt(id(c-a)+m*e*id(f-d))),s=1/Math.sin(n);f=n?function(d){var a=Math.sin(d*=n)*s,f=Math.sin(n-d)*s;d=f*g+a*l;var w=f*h+a*p,a=f*r+a*t;return[Math.atan2(w,d)*U,
Math.atan2(a,Math.sqrt(d*d+w*w))*U]}:function(){return[d*U,a*U]};return f.distance=n,f}function nc(d){var a=0,f=C/3,c=jc(d);d=c(a,f);return d.parallels=function(d){return arguments.length?c(a=d[0]*C/180,f=d[1]*C/180):[180*(a/C),180*(f/C)]},d}function Ld(d,a){function f(d,a){var f=Math.sqrt(r-2*m*Math.sin(a))/m;return[f*Math.sin(d*=m),e-f*Math.cos(d)]}var c=Math.sin(d),m=(c+Math.sin(a))/2,r=1+c*(2*m-c),e=Math.sqrt(r)/m;return f.invert=function(d,a){var f=e-a;return[Math.atan2(d,f)/m,Math.asin((r-(d*
d+f*f)*m*m)/(2*m))]},f}function oc(d,a){var f=d(a[0]),c=d([0.5*(a[0][0]+a[1][0]),a[0][1]]),m=d([a[1][0],a[0][1]]),r=d(a[1]),e=(c[1]-f[1])/(c[0]-f[0]),t=(m[1]-c[1])/(m[0]-c[0]),g=0.5*(e*t*(f[1]-m[1])+t*(f[0]+c[0])-e*(c[0]+m[0]))/(t-e),h=(0.5*(f[0]+c[0])-g)/e+0.5*(f[1]+c[1]),c=r[0]-g,r=r[1]-h,m=f[0]-g,f=f[1]-h,l=c*c+r*r,p=m*m+f*f,n=Math.atan2(r,c),s=Math.atan2(f,m);return function(a){var f=a[0]-g,w=a[1]-h,c=f*f+w*w,f=Math.atan2(w,f);return c>l&&p>c&&f>n&&s>f?d.invert(a):void 0}}function Ef(){function d(d,
a){rb+=m*d-c*a;c=d;m=a}var a,f,c,m;Aa.point=function(r,e){Aa.point=d;a=c=r;f=m=e};Aa.lineEnd=function(){d(a,f)}}function Ff(){function d(d,a){e.push("M",d,",",a,r)}function a(d,c){e.push("M",d,",",c);t.point=f}function f(d,a){e.push("L",d,",",a)}function c(){t.point=d}function m(){e.push("Z")}var r=Md(4.5),e=[],t={point:d,lineStart:function(){t.point=a},lineEnd:c,polygonStart:function(){t.lineEnd=m},polygonEnd:function(){t.lineEnd=c;t.point=d},pointRadius:function(d){return r=Md(d),t},result:function(){if(e.length){var d=
e.join("");return e=[],d}}};return t}function pc(d,a){ba||(W+=d,X+=a,++V)}function Nd(){function d(d,c){var r=d-a,e=c-f,r=Math.sqrt(r*r+e*e);W+=r*(a+d)/2;X+=r*(f+c)/2;V+=r;a=d;f=c}var a,f;if(1!==ba){if(!(1>ba))return;ba=1;W=X=V=0}ma.point=function(c,m){ma.point=d;a=c;f=m}}function Od(){ma.point=pc}function Gf(){function d(d,a){var f=m*d-c*a;W+=f*(c+d);X+=f*(m+a);V+=3*f;c=d;m=a}var a,f,c,m;2>ba&&(ba=2,W=X=V=0);ma.point=function(r,e){ma.point=d;a=c=r;f=m=e};ma.lineEnd=function(){d(a,f)}}function Hf(d){function a(f,
c){d.moveTo(f,c);d.arc(f,c,e,0,2*C)}function f(a,f){d.moveTo(a,f);t.point=c}function c(a,f){d.lineTo(a,f)}function m(){t.point=a}function r(){d.closePath()}var e=4.5,t={point:a,lineStart:function(){t.point=f},lineEnd:m,polygonStart:function(){t.lineEnd=r},polygonEnd:function(){t.lineEnd=m;t.point=a},pointRadius:function(d){return e=d,t},result:Y};return t}function Md(d){return"m0,"+d+"a"+d+","+d+" 0 1,1 0,"+-2*d+"a"+d+","+d+" 0 1,1 0,"+2*d+"z"}function If(d){var a=Dd(function(a,c){return d([a*U,c*
U])});return function(d){return d=a(d),{point:function(a,c){d.point(a*G,c*G)},sphere:function(){d.sphere()},lineStart:function(){d.lineStart()},lineEnd:function(){d.lineEnd()},polygonStart:function(){d.polygonStart()},polygonEnd:function(){d.polygonEnd()}}}}function Va(d,a){function f(a,f){var c=Math.cos(a),w=Math.cos(f),c=d(c*w);return[c*w*Math.sin(a),c*Math.sin(f)]}return f.invert=function(d,f){var c=Math.sqrt(d*d+f*f),e=a(c),t=Math.sin(e),e=Math.cos(e);return[Math.atan2(d*t,c*e),Math.asin(c&&f*
t/c)]},f}function Pd(d,a){function f(d,a){var f=Math.abs(Math.abs(a)-C/2)<I?0:r/Math.pow(Math.tan(C/4+a/2),m);return[f*Math.sin(m*d),r-f*Math.cos(m*d)]}var c=Math.cos(d),m=d===a?Math.sin(d):Math.log(c/Math.cos(a))/Math.log(Math.tan(C/4+a/2)/Math.tan(C/4+d/2)),r=c*Math.pow(Math.tan(C/4+d/2),m)/m;return m?(f.invert=function(d,a){var f=r-a,c=(0<m?1:0>m?-1:0)*Math.sqrt(d*d+f*f);return[Math.atan2(d,f)/m,2*Math.atan(Math.pow(r/c,1/m))-C/2]},f):sb}function Qd(d,a){function f(d,a){var f=r-a;return[f*Math.sin(m*
d),r-f*Math.cos(m*d)]}var c=Math.cos(d),m=d===a?Math.sin(d):(c-Math.cos(a))/(a-d),r=c/m+d;return Math.abs(m)<I?Ua:(f.invert=function(d,a){var f=r-a;return[Math.atan2(d,f)/m,r-(0<m?1:0>m?-1:0)*Math.sqrt(d*d+f*f)]},f)}function sb(d,a){return[d,Math.log(Math.tan(C/4+a/2))]}function Rd(d){var a,f=za(d),c=f.scale,m=f.translate,r=f.clipExtent;return f.scale=function(){var d=c.apply(f,arguments);return d===f?a?f.clipExtent(null):f:d},f.translate=function(){var d=m.apply(f,arguments);return d===f?a?f.clipExtent(null):
f:d},f.clipExtent=function(d){var e=r.apply(f,arguments);if(e===f){if(a=null==d){var g=C*c(),h=m();r([[h[0]-g,h[1]-g],[h[0]+g,h[1]+g]])}}else a&&(e=null);return e},f.clipExtent(null)}function qc(d,a){var f=Math.cos(a)*Math.sin(d);return[Math.log((1+f)/(1-f))/2,Math.atan2(Math.tan(a),Math.cos(d))]}function Sd(d){function a(w){function e(){h.push("M",r(d(B),t))}for(var g,h=[],B=[],l=-1,p=w.length,n=J(f),s=J(c);++l<p;)m.call(this,g=w[l],l)?B.push([+n.call(this,g,l),+s.call(this,g,l)]):B.length&&(e(),
B=[]);return B.length&&e(),h.length?h.join(""):null}var f=oa,c=ra,m=Ta,r=ja,e=r.key,t=0.7;return a.x=function(d){return arguments.length?(f=d,a):f},a.y=function(d){return arguments.length?(c=d,a):c},a.defined=function(d){return arguments.length?(m=d,a):m},a.interpolate=function(d){return arguments.length?(e="function"==typeof d?r=d:(r=rc.get(d)||ja).key,a):e},a.tension=function(d){return arguments.length?(t=d,a):t},a}function oa(d){return d[0]}function ra(d){return d[1]}function ja(d){return d.join("L")}
function sc(d){for(var a=0,f=d.length,c=d[0],m=[c[0],",",c[1]];++a<f;)m.push("V",(c=d[a])[1],"H",c[0]);return m.join("")}function tc(d){for(var a=0,f=d.length,c=d[0],m=[c[0],",",c[1]];++a<f;)m.push("H",(c=d[a])[0],"V",c[1]);return m.join("")}function tb(d,a){if(1>a.length||d.length!=a.length&&d.length!=a.length+2)return ja(d);var f=d.length!=a.length,c="",m=d[0],r=d[1],e=a[0],t=e,g=1;if(f&&(c+="Q"+(r[0]-2*e[0]/3)+","+(r[1]-2*e[1]/3)+","+r[0]+","+r[1],m=d[1],g=2),1<a.length)for(t=a[1],r=d[g],g++,c+=
"C"+(m[0]+e[0])+","+(m[1]+e[1])+","+(r[0]-t[0])+","+(r[1]-t[1])+","+r[0]+","+r[1],m=2;m<a.length;m++,g++)r=d[g],t=a[m],c+="S"+(r[0]-t[0])+","+(r[1]-t[1])+","+r[0]+","+r[1];f&&(f=d[g],c+="Q"+(r[0]+2*t[0]/3)+","+(r[1]+2*t[1]/3)+","+f[0]+","+f[1]);return c}function uc(d,a){for(var f,c=[],m=(1-a)/2,r=d[0],e=d[1],t=1,g=d.length;++t<g;)f=r,r=e,e=d[t],c.push([m*(e[0]-f[0]),m*(e[1]-f[1])]);return c}function Td(d){if(3>d.length)return ja(d);var a=1,f=d.length,c=d[0],m=c[0],r=c[1],e=[m,m,m,(c=d[1])[0]],t=[r,
r,r,c[1]],m=[m,",",r];for(Wa(m,e,t);++a<f;)c=d[a],e.shift(),e.push(c[0]),t.shift(),t.push(c[1]),Wa(m,e,t);for(a=-1;2>++a;)e.shift(),e.push(c[0]),t.shift(),t.push(c[1]),Wa(m,e,t);return m.join("")}function pa(d,a){return d[0]*a[0]+d[1]*a[1]+d[2]*a[2]+d[3]*a[3]}function Wa(d,a,f){d.push("C",pa(Ud,a),",",pa(Ud,f),",",pa(Vd,a),",",pa(Vd,f),",",pa(Oa,a),",",pa(Oa,f))}function vc(d,a){return(a[1]-d[1])/(a[0]-d[0])}function Jf(d,a,f,c){var m,r,e,t,g,h,l;return m=c[d],r=m[0],e=m[1],m=c[a],t=m[0],g=m[1],m=
c[f],h=m[0],l=m[1],0<(l-e)*(t-r)-(g-e)*(h-r)}function wc(d,a,f){return(f[0]-a[0])*(d[1]-a[1])<(f[1]-a[1])*(d[0]-a[0])}function Wd(d,a,f,c){var m=d[0],r=f[0],e=a[0]-m,t=c[0]-r;d=d[1];f=f[1];a=a[1]-d;c=c[1]-f;r=(t*(d-f)-c*(m-r))/(c*e-t*a);return[m+r*e,d+r*a]}function xc(d,a){var f=d.map(function(d,a){return{index:a,x:d[0],y:d[1]}}).sort(function(d,a){return d.y<a.y?-1:d.y>a.y?1:d.x<a.x?-1:d.x>a.x?1:0}),c=null,m={list:[],leftEnd:null,rightEnd:null,init:function(){m.leftEnd=m.createHalfEdge(null,"l");
m.rightEnd=m.createHalfEdge(null,"l");m.leftEnd.r=m.rightEnd;m.rightEnd.l=m.leftEnd;m.list.unshift(m.leftEnd,m.rightEnd)},createHalfEdge:function(d,a){return{edge:d,side:a,vertex:null,l:null,r:null}},insert:function(d,a){a.l=d;a.r=d.r;d.r.l=a;d.r=a},leftBound:function(d){var a=m.leftEnd;do a=a.r;while(a!=m.rightEnd&&r.rightOf(a,d));return a.l},del:function(d){d.l.r=d.r;d.r.l=d.l;d.edge=null},right:function(d){return d.r},left:function(d){return d.l},leftRegion:function(d){return null==d.edge?c:d.edge.region[d.side]},
rightRegion:function(d){return null==d.edge?c:d.edge.region[yc[d.side]]}},r={bisect:function(d,a){var f={region:{l:d,r:a},ep:{l:null,r:null}},c=a.x-d.x,w=a.y-d.y;return f.c=d.x*c+d.y*w+0.5*(c*c+w*w),(0<c?c:-c)>(0<w?w:-w)?(f.a=1,f.b=w/c,f.c/=c):(f.b=1,f.a=c/w,f.c/=w),f},intersect:function(d,a){var f=d.edge,c=a.edge;if(!f||!c||f.region.r==c.region.r)return null;var w=f.a*c.b-f.b*c.a;if(1E-10>Math.abs(w))return null;var m,r,e=(f.c*c.b-c.c*f.b)/w,w=(c.c*f.a-f.c*c.a)/w,D=f.region.r,t=c.region.r;D.y<t.y||
D.y==t.y&&D.x<t.x?(m=d,r=f):(m=a,r=c);return(f=e>=r.region.r.x)&&"l"===m.side||!f&&"r"===m.side?null:{x:e,y:w}},rightOf:function(d,a){var f=d.edge,c=f.region.r,w=a.x>c.x;if(w&&"l"===d.side)return 1;if(!w&&"r"===d.side)return 0;if(1===f.a){var m=a.y-c.y,r=a.x-c.x,e=0,D=0;(!w&&0>f.b||w&&0<=f.b?D=e=m>=f.b*r:(D=a.x+a.y*f.b>f.c,0>f.b&&(D=!D),D||(e=1)),e)||(c=c.x-f.region.l.x,D=f.b*(r*r-m*m)<c*m*(1+2*r/c+f.b*f.b),0>f.b&&(D=!D))}else r=f.c-f.a*a.x,f=a.y-r,m=a.x-c.x,c=r-c.y,D=f*f>m*m+c*c;return"l"===d.side?
D:!D},endPoint:function(d,f,c){d.ep[f]=c;d.ep[yc[f]]&&a(d)},distance:function(d,a){var f=d.x-a.x,c=d.y-a.y;return Math.sqrt(f*f+c*c)}},e={list:[],insert:function(d,a,f){d.vertex=a;d.ystar=a.y+f;f=0;for(var c=e.list,w=c.length;w>f;f++){var m=c[f];if(!(d.ystar>m.ystar||d.ystar==m.ystar&&a.x>m.vertex.x))break}c.splice(f,0,d)},del:function(d){for(var a=0,f=e.list,c=f.length;c>a&&f[a]!=d;++a);f.splice(a,1)},empty:function(){return 0===e.list.length},nextEvent:function(d){for(var a=0,f=e.list,c=f.length;c>
a;++a)if(f[a]==d)return f[a+1];return null},min:function(){var d=e.list[0];return{x:d.vertex.x,y:d.ystar}},extractMin:function(){return e.list.shift()}};m.init();for(var c=f.shift(),t,g,h,l,p,n,s,q,y,A,z=f.shift();;)if(e.empty()||(t=e.min()),z&&(e.empty()||z.y<t.y||z.y==t.y&&z.x<t.x))g=m.leftBound(z),h=m.right(g),s=m.rightRegion(g),A=r.bisect(s,z),n=m.createHalfEdge(A,"l"),m.insert(g,n),(y=r.intersect(g,n))&&(e.del(g),e.insert(g,y,r.distance(y,z))),g=n,n=m.createHalfEdge(A,"r"),m.insert(g,n),(y=r.intersect(n,
h))&&e.insert(n,y,r.distance(y,z)),z=f.shift();else{if(e.empty())break;g=e.extractMin();l=m.left(g);h=m.right(g);p=m.right(h);s=m.leftRegion(g);n=m.rightRegion(h);y=g.vertex;r.endPoint(g.edge,g.side,y);r.endPoint(h.edge,h.side,y);m.del(g);e.del(h);m.del(h);g="l";s.y>n.y&&(q=s,s=n,n=q,g="r");A=r.bisect(s,n);n=m.createHalfEdge(A,g);m.insert(l,n);r.endPoint(A,yc[g],y);(y=r.intersect(l,n))&&(e.del(l),e.insert(l,y,r.distance(y,s)));(y=r.intersect(n,p))&&e.insert(n,y,r.distance(y,s))}for(g=m.right(m.leftEnd);g!=
m.rightEnd;g=m.right(g))a(g.edge)}function Kf(d){return d.x}function Lf(d){return d.y}function Xd(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Xa(d,a,f,c,m,r){if(!d(a,f,c,m,r)){var e=0.5*(f+m),t=0.5*(c+r);a=a.nodes;a[0]&&Xa(d,a[0],f,c,e,t);a[1]&&Xa(d,a[1],e,c,m,t);a[2]&&Xa(d,a[2],f,t,e,r);a[3]&&Xa(d,a[3],e,t,m,r)}}function zc(d,a){d=p.rgb(d);a=p.rgb(a);var f=d.r,c=d.g,m=d.b,r=a.r-f,e=a.g-c,t=a.b-m;return function(d){return"#"+Ma(Math.round(f+r*d))+Ma(Math.round(c+e*d))+Ma(Math.round(m+
t*d))}}function Yd(d){var a=[d.a,d.b],f=[d.c,d.d],c=Zd(a),m=a[0]*f[0]+a[1]*f[1],r=Zd((f[0]+=-m*a[0],f[1]+=-m*a[1],f))||0;a[0]*f[1]<f[0]*a[1]&&(a[0]*=-1,a[1]*=-1,c*=-1,m*=-1);this.rotate=(c?Math.atan2(a[1],a[0]):Math.atan2(-f[0],f[1]))*U;this.translate=[d.e,d.f];this.scale=[c,r];this.skew=r?Math.atan2(m,r)*U:0}function Zd(d){var a=Math.sqrt(d[0]*d[0]+d[1]*d[1]);return a&&(d[0]/=a,d[1]/=a),a}function sa(d,a){return a-=d=+d,function(f){return d+a*f}}function ub(d,a){var f,c=[],m=[],r=p.transform(d),
e=p.transform(a),t=r.translate,g=e.translate,h=r.rotate,l=e.rotate,n=r.skew,s=e.skew,r=r.scale,e=e.scale;return t[0]!=g[0]||t[1]!=g[1]?(c.push("translate(",null,",",null,")"),m.push({i:1,x:sa(t[0],g[0])},{i:3,x:sa(t[1],g[1])})):g[0]||g[1]?c.push("translate("+g+")"):c.push(""),h!=l?(180<h-l?l+=360:180<l-h&&(h+=360),m.push({i:c.push(c.pop()+"rotate(",null,")")-2,x:sa(h,l)})):l&&c.push(c.pop()+"rotate("+l+")"),n!=s?m.push({i:c.push(c.pop()+"skewX(",null,")")-2,x:sa(n,s)}):s&&c.push(c.pop()+"skewX("+
s+")"),r[0]!=e[0]||r[1]!=e[1]?(f=c.push(c.pop()+"scale(",null,",",null,")"),m.push({i:f-4,x:sa(r[0],e[0])},{i:f-2,x:sa(r[1],e[1])})):(1!=e[0]||1!=e[1])&&c.push(c.pop()+"scale("+e+")"),f=m.length,function(d){for(var a,w=-1;++w<f;)c[(a=m[w]).i]=a.x(d);return c.join("")}}function $d(d,a){var f,c={},m={};for(f in d)f in a?c[f]=("transform"==f?ub:Da)(d[f],a[f]):m[f]=d[f];for(f in a)f in d||(m[f]=a[f]);return function(d){for(f in c)m[f]=c[f](d);return m}}function ae(d,a){var f,c,m,r,e=0,t=[],g=[];d+="";
a+="";for(c=vb.lastIndex=0;f=vb.exec(a);++c)f.index&&t.push(a.substring(e,f.index)),g.push({i:t.length,x:f[0]}),t.push(null),e=vb.lastIndex;e<a.length&&t.push(a.substring(e));c=0;for(m=g.length;(f=vb.exec(d))&&m>c;++c)if(r=g[c],r.x==f[0]){if(r.i)if(null==t[r.i+1])for(t[r.i-1]+=r.x,t.splice(r.i,1),f=c+1;m>f;++f)g[f].i--;else for(t[r.i-1]+=r.x+t[r.i+1],t.splice(r.i,2),f=c+1;m>f;++f)g[f].i-=2;else if(null==t[r.i+1])t[r.i]=r.x;else for(t[r.i]=r.x+t[r.i+1],t.splice(r.i+1,1),f=c+1;m>f;++f)g[f].i--;g.splice(c,
1);m--;c--}else r.x=sa(parseFloat(f[0]),parseFloat(r.x));for(;m>c;)r=g.pop(),null==t[r.i+1]?t[r.i]=r.x:(t[r.i]=r.x+t[r.i+1],t.splice(r.i+1,1)),m--;return 1===t.length?null==t[0]?g[0].x:function(){return a}:function(d){for(c=0;m>c;++c)t[(r=g[c]).i]=r.x(d);return t.join("")}}function Da(d,a){for(var f,c=p.interpolators.length;0<=--c&&!(f=p.interpolators[c](d,a)););return f}function be(d,a){var f,c=[],m=[],r=d.length,e=a.length,g=Math.min(d.length,a.length);for(f=0;g>f;++f)c.push(Da(d[f],a[f]));for(;r>
f;++f)m[f]=d[f];for(;e>f;++f)m[f]=a[f];return function(d){for(f=0;g>f;++f)m[f]=c[f](d);return m}}function Mf(d){return function(a){return 0>=a?0:1<=a?1:d(a)}}function ce(d){return function(a){return 1-d(1-a)}}function de(d){return function(a){return 0.5*(0.5>a?d(2*a):2-d(2-2*a))}}function Nf(d){return d*d}function Of(d){return d*d*d}function Pf(d){return 1-Math.cos(d*C/2)}function Qf(d){return Math.pow(2,10*(d-1))}function Rf(d){return 1-Math.sqrt(1-d*d)}function Sf(d){return 1/2.75>d?7.5625*d*d:
2/2.75>d?7.5625*(d-=1.5/2.75)*d+0.75:2.5/2.75>d?7.5625*(d-=2.25/2.75)*d+0.9375:7.5625*(d-=2.625/2.75)*d+0.984375}function ee(d,a){return a-=d,function(f){return Math.round(d+a*f)}}function Tf(d,a){return a=a-(d=+d)?1/(a-d):0,function(f){return(f-d)*a}}function Uf(d,a){return a=a-(d=+d)?1/(a-d):0,function(f){return Math.max(0,Math.min(1,(f-d)*a))}}function Vf(d){var a=d.source;d=d.target;var f;var c=d;if(a===c)f=a;else{f=fe(a);for(var c=fe(c),m=f.pop(),r=c.pop(),e=null;m===r;)e=m,m=f.pop(),r=c.pop();
f=e}for(c=[a];a!==f;)a=a.parent,c.push(a);for(a=c.length;d!==f;)c.splice(a,0,d),d=d.parent;return c}function fe(d){for(var a=[],f=d.parent;null!=f;)a.push(d),d=f,f=f.parent;return a.push(d),a}function Wf(d){d.fixed|=2}function Xf(d){d.fixed&=-7}function Yf(d){d.fixed|=4;d.px=d.x;d.py=d.y}function Zf(d){d.fixed&=-5}function ge(d,a,f){var c=0,m=0;if(d.charge=0,!d.leaf)for(var r,e=d.nodes,g=e.length,h=-1;++h<g;)r=e[h],null!=r&&(ge(r,a,f),d.charge+=r.charge,c+=r.charge*r.cx,m+=r.charge*r.cy);d.point&&
(d.leaf||(d.point.x+=Math.random()-0.5,d.point.y+=Math.random()-0.5),a*=f[d.point.index],d.charge+=d.pointCharge=a,c+=a*d.point.x,m+=a*d.point.y);d.cx=c/d.charge;d.cy=m/d.charge}function Ya(d,a){return p.rebind(d,a,"sort","children","value"),d.nodes=d,d.links=$f,d}function ag(d){return d.children}function bg(d){return d.value}function cg(d,a){return a.value-d.value}function $f(d){return p.merge(d.map(function(d){return(d.children||[]).map(function(a){return{source:d,target:a}})}))}function dg(d){return d.x}
function eg(d){return d.y}function fg(d,a,f){d.y0=a;d.y=f}function Ac(d){return p.range(d.length)}function Bc(d){var a=-1;d=d[0].length;for(var f=[];++a<d;)f[a]=0;return f}function gg(d){for(var a,f=1,c=0,m=d[0][1],r=d.length;r>f;++f)(a=d[f][1])>m&&(c=f,m=a);return c}function hg(d){return d.reduce(ig,0)}function ig(d,a){return d+a[1]}function jg(d,a){return he(d,Math.ceil(Math.log(a.length)/Math.LN2+1))}function he(d,a){for(var f=-1,c=+d[0],m=(d[1]-c)/a,r=[];++f<=a;)r[f]=m*f+c;return r}function kg(d){return[p.min(d),
p.max(d)]}function ie(d,a){return d.parent==a.parent?1:2}function Cc(d){var a=d.children;return a&&a.length?a[0]:d._tree.thread}function Dc(d){var a,f=d.children;return f&&(a=f.length)?f[a-1]:d._tree.thread}function wb(d,a){var f=d.children;if(f&&(m=f.length))for(var c,m,r=-1;++r<m;)0<a(c=wb(f[r],a),d)&&(d=c);return d}function lg(d,a){return d.x-a.x}function mg(d,a){return a.x-d.x}function ng(d,a){return d.depth-a.depth}function ta(d,a){function f(d,c){var r=d.children;if(r&&(g=r.length))for(var e,
g,h=null,l=-1;++l<g;)e=r[l],f(e,h),h=e;a(d,c)}f(d,null)}function og(d,a){return d.value-a.value}function Ec(d,a){var f=d._pack_next;d._pack_next=a;a._pack_prev=d;a._pack_next=f;f._pack_prev=a}function je(d,a){d._pack_next=a;a._pack_prev=d}function ke(d,a){var f=a.x-d.x,c=a.y-d.y,m=d.r+a.r;return 0.001<m*m-f*f-c*c}function le(d){function a(d){p=Math.min(d.x-d.r,p);n=Math.max(d.x+d.r,n);s=Math.min(d.y-d.r,s);q=Math.max(d.y+d.r,q)}if((f=d.children)&&(l=f.length)){var f,c,m,r,e,g,h,l,p=1/0,n=-1/0,s=1/
0,q=-1/0;if(f.forEach(pg),c=f[0],c.x=-c.r,c.y=0,a(c),1<l&&(m=f[1],m.x=m.r,m.y=0,a(m),2<l))for(r=f[2],me(c,m,r),a(r),Ec(c,r),c._pack_prev=r,Ec(r,m),m=c._pack_next,e=3;l>e;e++){me(c,m,r=f[e]);var K=0,y=1,A=1;for(g=m._pack_next;g!==m;g=g._pack_next,y++)if(ke(g,r)){K=1;break}if(1==K)for(h=c._pack_prev;h!==g._pack_prev&&!ke(h,r);h=h._pack_prev,A++);K?(A>y||y==A&&m.r<c.r?je(c,m=g):je(c=h,m),e--):(Ec(c,r),m=r,a(r))}c=(p+n)/2;m=(s+q)/2;for(e=g=0;l>e;e++)r=f[e],r.x-=c,r.y-=m,g=Math.max(g,r.r+Math.sqrt(r.x*
r.x+r.y*r.y));d.r=g;f.forEach(qg)}}function pg(d){d._pack_next=d._pack_prev=d}function qg(d){delete d._pack_next;delete d._pack_prev}function ne(d,a,f,c){var m=d.children;if(d.x=a+=c*d.x,d.y=f+=c*d.y,d.r*=c,m){d=-1;for(var r=m.length;++d<r;)ne(m[d],a,f,c)}}function me(d,a,f){var c=d.r+f.r,m=a.x-d.x,r=a.y-d.y;if(c&&(m||r)){var e=a.r+f.r,g=m*m+r*r,e=e*e,c=c*c;a=0.5+(c-e)/(2*g);e=Math.sqrt(Math.max(0,2*e*(c+g)-(c-=g)*c-e*e))/(2*g);f.x=d.x+a*m+e*r;f.y=d.y+a*r-e*m}else f.x=d.x+c,f.y=d.y}function rg(d){return 1+
p.max(d,function(d){return d.y})}function sg(d){return d.reduce(function(d,a){return d+a.x},0)/d.length}function oe(d){var a=d.children;return a&&a.length?oe(a[0]):d}function pe(d){var a,f=d.children;return f&&(a=f.length)?pe(f[a-1]):d}function Fc(d){return{x:d.x,y:d.y,dx:d.dx,dy:d.dy}}function qe(d,a){var f=d.x+a[3],c=d.y+a[0],m=d.dx-a[1]-a[3],r=d.dy-a[0]-a[2];return 0>m&&(f+=m/2,m=0),0>r&&(c+=r/2,r=0),{x:f,y:c,dx:m,dy:r}}function Za(d){var a=d[0];d=d[d.length-1];return d>a?[a,d]:[d,a]}function xb(d){return d.rangeExtent?
d.rangeExtent():Za(d.range())}function tg(d,a,f,c){var m=f(d[0],d[1]),r=c(a[0],a[1]);return function(d){return r(m(d))}}function yb(d,a){var f,c=0,m=d.length-1,r=d[c],e=d[m];return r>e&&(f=c,c=m,m=f,f=r,r=e,e=f),(a=a(e-r))&&(d[c]=a.floor(r),d[m]=a.ceil(e)),d}function ug(d,a,f,c){var m=[],r=[],e=0,g=Math.min(d.length,a.length)-1;for(d[g]<d[0]&&(d=d.slice().reverse(),a=a.slice().reverse());++e<=g;)m.push(f(d[e-1],d[e])),r.push(c(a[e-1],a[e]));return function(a){var f=p.bisect(d,a,1,g)-1;return r[f](m[f](a))}}
function re(d,a,f,c){function m(){var m=2<Math.min(d.length,a.length)?ug:tg,h=c?Uf:Tf;return e=m(d,a,h,f),g=m(a,d,h,Da),r}function r(d){return e(d)}var e,g;return r.invert=function(d){return g(d)},r.domain=function(a){return arguments.length?(d=a.map(Number),m()):d},r.range=function(d){return arguments.length?(a=d,m()):a},r.rangeRound=function(d){return r.range(d).interpolate(ee)},r.clamp=function(d){return arguments.length?(c=d,m()):c},r.interpolate=function(d){return arguments.length?(f=d,m()):
f},r.ticks=function(a){return Gc(d,a)},r.tickFormat=function(a,f){return Hc(d,a,f)},r.nice=function(){return yb(d,se),m()},r.copy=function(){return re(d,a,f,c)},m()}function te(d,a){return p.rebind(d,a,"range","rangeRound","interpolate","clamp")}function se(d){return d=Math.pow(10,Math.round(Math.log(d)/Math.LN10)-1),d&&{floor:function(a){return Math.floor(a/d)*d},ceil:function(a){return Math.ceil(a/d)*d}}}function ue(d,a){var f=Za(d),c=f[1]-f[0],m=Math.pow(10,Math.floor(Math.log(c/a)/Math.LN10)),
c=a/c*m;return 0.15>=c?m*=10:0.35>=c?m*=5:0.75>=c&&(m*=2),f[0]=Math.ceil(f[0]/m)*m,f[1]=Math.floor(f[1]/m)*m+0.5*m,f[2]=m,f}function Gc(d,a){return p.range.apply(p,ue(d,a))}function Hc(d,a,f){var c=-Math.floor(Math.log(ue(d,a)[2])/Math.LN10+0.01);return p.format(f?f.replace(ve,function(d,a,f,w,e,g,h,l,p,n){return[a,f,w,e,g,h,l,p||"."+(c-2*("%"===n)),n].join("")}):",."+c+"f")}function we(d,a,f,c){function m(a){return d(f(a))}return m.invert=function(a){return c(d.invert(a))},m.domain=function(a){return arguments.length?
(0>a[0]?(f=Ic,c=vg):(f=xe,c=ye),d.domain(a.map(f)),m):d.domain().map(c)},m.base=function(d){return arguments.length?(a=+d,m):a},m.nice=function(){return d.domain(yb(d.domain(),wg(a))),m},m.ticks=function(){var m=Za(d.domain()),e=[];if(m.every(isFinite)){var g=Math.log(a),h=Math.floor(m[0]/g),g=Math.ceil(m[1]/g),l=c(m[0]),m=c(m[1]),p=a%1?2:a;if(f===Ic)for(e.push(-Math.pow(a,-h));h++<g;)for(var n=p-1;0<n;n--)e.push(-Math.pow(a,-h)*n);else{for(;g>h;h++)for(n=1;p>n;n++)e.push(Math.pow(a,h)*n);e.push(Math.pow(a,
h))}for(h=0;e[h]<l;h++);for(g=e.length;e[g-1]>m;g--);e=e.slice(h,g)}return e},m.tickFormat=function(d,e){if(2>arguments.length&&(e=xg),!arguments.length)return e;var g,h=Math.log(a),l=Math.max(0.1,d/m.ticks().length),p=f===Ic?(g=-1E-12,Math.floor):(g=1E-12,Math.ceil);return function(d){return d/c(h*p(f(d)/h+g))<=l?e(d):""}},m.copy=function(){return we(d.copy(),a,f,c)},te(m,d)}function xe(d){return Math.log(0>d?0:d)}function ye(d){return Math.exp(d)}function Ic(d){return-Math.log(0<d?0:-d)}function vg(d){return-Math.exp(-d)}
function wg(d){d=Math.log(d);var a={floor:function(a){return Math.floor(a/d)*d},ceil:function(a){return Math.ceil(a/d)*d}};return function(){return a}}function ze(d,a){function c(a){return d(e(a))}var e=zb(a),m=zb(1/a);return c.invert=function(a){return m(d.invert(a))},c.domain=function(a){return arguments.length?(d.domain(a.map(e)),c):d.domain().map(m)},c.ticks=function(d){return Gc(c.domain(),d)},c.tickFormat=function(d,a){return Hc(c.domain(),d,a)},c.nice=function(){return c.domain(yb(c.domain(),
se))},c.exponent=function(d){if(!arguments.length)return a;var g=c.domain();return e=zb(a=d),m=zb(1/a),c.domain(g)},c.copy=function(){return ze(d.copy(),a)},te(c,d)}function zb(d){return function(a){return 0>a?-Math.pow(-a,d):Math.pow(a,d)}}function Ae(d,a){function f(a){return r[((m.get(a)||m.set(a,d.push(a)))-1)%r.length]}function e(a,c){return p.range(d.length).map(function(d){return a+c*d})}var m,r,g;return f.domain=function(e){if(!arguments.length)return d;d=[];m=new c;for(var r,g=-1,h=e.length;++g<
h;)m.has(r=e[g])||m.set(r,d.push(r));return f[a.t].apply(f,a.a)},f.range=function(d){return arguments.length?(r=d,g=0,a={t:"range",a:arguments},f):r},f.rangePoints=function(c,m){2>arguments.length&&(m=0);var h=c[0],l=c[1],p=(l-h)/(Math.max(1,d.length-1)+m);return r=e(2>d.length?(h+l)/2:h+p*m/2,p),g=0,a={t:"rangePoints",a:arguments},f},f.rangeBands=function(c,m,h){2>arguments.length&&(m=0);3>arguments.length&&(h=m);var l=c[1]<c[0],p=c[l-0],n=(c[1-l]-p)/(d.length-m+2*h);return r=e(p+n*h,n),l&&r.reverse(),
g=n*(1-m),a={t:"rangeBands",a:arguments},f},f.rangeRoundBands=function(c,m,h){2>arguments.length&&(m=0);3>arguments.length&&(h=m);var l=c[1]<c[0],p=c[l-0],n=c[1-l],s=Math.floor((n-p)/(d.length-m+2*h));return r=e(p+Math.round((n-p-(d.length-m)*s)/2),s),l&&r.reverse(),g=Math.round(s*(1-m)),a={t:"rangeRoundBands",a:arguments},f},f.rangeBand=function(){return g},f.rangeExtent=function(){return Za(a.a[0])},f.copy=function(){return Ae(d,a)},f.domain(d)}function Be(d,a){function c(){var f=0,g=a.length;for(m=
[];++f<g;)m[f-1]=p.quantile(d,f/g);return e}function e(d){return isNaN(d=+d)?0/0:a[p.bisect(m,d)]}var m;return e.domain=function(a){return arguments.length?(d=a.filter(function(d){return!isNaN(d)}).sort(p.ascending),c()):d},e.range=function(d){return arguments.length?(a=d,c()):a},e.quantiles=function(){return m},e.copy=function(){return Be(d,a)},c()}function Ce(d,a,c){function e(a){return c[Math.max(0,Math.min(g,Math.floor(r*(a-d))))]}function m(){return r=c.length/(a-d),g=c.length-1,e}var r,g;return e.domain=
function(c){return arguments.length?(d=+c[0],a=+c[c.length-1],m()):[d,a]},e.range=function(d){return arguments.length?(c=d,m()):c},e.copy=function(){return Ce(d,a,c)},m()}function De(d,a){function c(f){return a[p.bisect(d,f)]}return c.domain=function(a){return arguments.length?(d=a,c):d},c.range=function(d){return arguments.length?(a=d,c):a},c.copy=function(){return De(d,a)},c}function Ee(d){function a(d){return+d}return a.invert=a,a.domain=a.range=function(c){return arguments.length?(d=c.map(a),
a):d},a.ticks=function(a){return Gc(d,a)},a.tickFormat=function(a,c){return Hc(d,a,c)},a.copy=function(){return Ee(d)},a}function yg(d){return d.innerRadius}function zg(d){return d.outerRadius}function Fe(d){return d.startAngle}function Ge(d){return d.endAngle}function He(d){for(var a,c,e,m=-1,r=d.length;++m<r;)a=d[m],c=a[0],e=a[1]+Ea,a[0]=c*Math.cos(e),a[1]=c*Math.sin(e);return d}function Ie(d){function a(w){function l(){z.push("M",h(d(L),s),n,p(d(H.reverse()),s),"Z")}for(var O,q,A,z=[],H=[],L=[],
F=-1,u=w.length,v=J(c),T=J(m),x=c===e?function(){return q}:J(e),Bf=m===r?function(){return A}:J(r);++F<u;)g.call(this,O=w[F],F)?(H.push([q=+v.call(this,O,F),A=+T.call(this,O,F)]),L.push([+x.call(this,O,F),+Bf.call(this,O,F)])):H.length&&(l(),H=[],L=[]);return H.length&&l(),z.length?z.join(""):null}var c=oa,e=oa,m=0,r=ra,g=Ta,h=ja,l=h.key,p=h,n="L",s=0.7;return a.x=function(d){return arguments.length?(c=e=d,a):e},a.x0=function(d){return arguments.length?(c=d,a):c},a.x1=function(d){return arguments.length?
(e=d,a):e},a.y=function(d){return arguments.length?(m=r=d,a):r},a.y0=function(d){return arguments.length?(m=d,a):m},a.y1=function(d){return arguments.length?(r=d,a):r},a.defined=function(d){return arguments.length?(g=d,a):g},a.interpolate=function(d){return arguments.length?(l="function"==typeof d?h=d:(h=rc.get(d)||ja).key,p=h.reverse||h,n=h.closed?"M":"L",a):l},a.tension=function(d){return arguments.length?(s=d,a):s},a}function Ag(d){return d.radius}function Je(d){return[d.x,d.y]}function Bg(d){return function(){var a=
d.apply(this,arguments),c=a[0],a=a[1]+Ea;return[c*Math.cos(a),c*Math.sin(a)]}}function Cg(){return 64}function Dg(){return"circle"}function Ke(d){d=Math.sqrt(d/C);return"M0,"+d+"A"+d+","+d+" 0 1,1 0,"+-d+"A"+d+","+d+" 0 1,1 0,"+d+"Z"}function $a(d,a){return Pb(d,Z),d.id=a,d}function Jc(d,a,c,e){var m=d.id;return xa(d,"function"==typeof c?function(d,g,h){d.__transition__[m].tween.set(a,e(c.call(d,d.__data__,g,h)))}:(c=e(c),function(d){d.__transition__[m].tween.set(a,c)}))}function Eg(d){return null==
d&&(d=""),function(){this.textContent=d}}function Ab(d,a,f,e){var m=d.__transition__||(d.__transition__={active:0,count:0}),r=m[f];if(!r){var g=e.time;return r=m[f]={tween:new c,event:p.dispatch("start","end"),time:g,ease:e.ease,delay:e.delay,duration:e.duration},++m.count,p.timer(function(c){function e(c){return m.active>f?l():(m.active=f,s.start.call(d,D,a),r.tween.forEach(function(c,f){(f=f.call(d,D,a))&&A.push(f)}),h(c)||p.timer(h,0,g),1)}function h(c){if(m.active!==f)return l();c=(c-q)/y;for(var e=
n(c),r=A.length;0<r;)A[--r].call(d,e);return 1<=c?(l(),s.end.call(d,D,a),1):void 0}function l(){return--m.count?delete m[f]:delete d.__transition__,1}var D=d.__data__,n=r.ease,s=r.event,q=r.delay,y=r.duration,A=[];return c>=q?e(c):p.timer(e,q,g),1},0,g),r}}function Le(d,a){d.attr("transform",function(d){return"translate("+a(d)+",0)"})}function Me(d,a){d.attr("transform",function(d){return"translate(0,"+a(d)+")"})}function Fg(d,a,c){if(e=[],c&&1<a.length){for(var e,m,r=Za(d.domain()),g=-1,h=a.length,
l=(a[1]-a[0])/++c;++g<h;)for(d=c;0<--d;)(m=+a[g]-d*l)>=r[0]&&e.push(m);--g;for(d=0;++d<c&&(m=+a[g]+d*l)<r[1];)e.push(m)}return e}function Fa(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function Ga(d,a,c){function e(a){var c=d(a),f=r(c,1);return f-a>a-c?c:f}function m(c){return a(c=d(new ea(c-1)),1),c}function r(d,c){return a(d=new ea(+d),c),d}function g(d,e,r){d=m(d);var h=[];if(1<r)for(;e>d;)c(d)%r||h.push(new Date(+d)),a(d,1);else for(;e>d;)h.push(new Date(+d)),
a(d,1);return h}d.floor=d;d.round=e;d.ceil=m;d.offset=r;d.range=g;var h=d.utc=Bb(d);return h.floor=h,h.round=Bb(e),h.ceil=Bb(m),h.offset=Bb(r),h.range=function(d,a,c){try{ea=Fa;var f=new Fa;return f._=d,g(f,a,c)}finally{ea=Date}},d}function Bb(d){return function(a,c){try{ea=Fa;var e=new Fa;return e._=a,d(e,c)._}finally{ea=Date}}}function Cb(d,a,c,e){for(var m,r,g=0,h=a.length,l=c.length;h>g;){if(e>=l)return-1;if(m=a.charCodeAt(g++),37===m){if(r=Gg[a.charAt(g++)],!r||0>(e=r(d,c,e)))return-1}else if(m!=
c.charCodeAt(e++))return-1}return e}function Db(d){return RegExp("^(?:"+d.map(p.requote).join("|")+")","i")}function Ne(d){for(var a=new c,f=-1,e=d.length;++f<e;)a.set(d[f].toLowerCase(),f);return a}function ha(d,a,c){d+="";var e=d.length;return c>e?Array(c-e+1).join(a)+d:d}function Oe(d,a,c){fa.lastIndex=0;return(a=fa.exec(a.substring(c,c+2)))?(d.d=+a[0],c+a[0].length):-1}function Pe(d,a,c){fa.lastIndex=0;return(a=fa.exec(a.substring(c,c+2)))?(d.H=+a[0],c+a[0].length):-1}function Kc(d){return d.toISOString()}
function Lc(d,a,c){function e(a){return d(a)}return e.invert=function(a){return Mc(d.invert(a))},e.domain=function(a){return arguments.length?(d.domain(a),e):d.domain().map(Mc)},e.nice=function(d){return e.domain(yb(e.domain(),function(){return d}))},e.ticks=function(c,f){var g,h=e.domain();g=h[0];h=h[h.length-1];g=h>g?[g,h]:[h,g];if("function"!=typeof c){var h=(g[1]-g[0])/c,l=p.bisect(Eb,h);if(l==Eb.length)return a.year(g,c);if(!l)return d.ticks(c).map(Mc);Math.log(h/Eb[l-1])<Math.log(Eb[l]/h)&&
--l;c=a[l];f=c[1];c=c[0].range}return c(g[0],new Date(+g[1]+1),f)},e.tickFormat=function(){return c},e.copy=function(){return Lc(d.copy(),a,c)},p.rebind(e,d,"range","rangeRound","interpolate","clamp")}function Mc(d){return new Date(d)}function Qe(d){return function(a){for(var c=d.length-1,e=d[c];!e[1](a);)e=d[--c];return e[0](a)}}function Nc(d){var a=new Date(d,0,1);return a.setFullYear(d),a}function Hg(d){var a=d.getFullYear(),c=Nc(a),e=Nc(a+1);return a+(d-c)/(e-c)}function Oc(d){var a=new Date(Date.UTC(d,
0,1));return a.setUTCFullYear(d),a}function Ig(d){var a=d.getUTCFullYear(),c=Oc(a),e=Oc(a+1);return a+(d-c)/(e-c)}function Jg(d){return d.responseText}function Kg(d){return JSON.parse(d.responseText)}function Lg(d){var a=ga.createRange();return a.selectNode(ga.body),a.createContextualFragment(d.responseText)}function Mg(d){return d.responseXML}var p={version:"3.1.5"};Date.now||(Date.now=function(){return+new Date});var ga=document,ca=window;try{ga.createElement("div").style.setProperty("opacity",
0,"")}catch(qh){var Re=ca.CSSStyleDeclaration.prototype,Ng=Re.setProperty;Re.setProperty=function(d,a,c){Ng.call(this,d,a+"",c)}}p.ascending=function(d,a){return a>d?-1:d>a?1:d>=a?0:0/0};p.descending=function(d,a){return d>a?-1:a>d?1:a>=d?0:0/0};p.min=function(d,a){var c,e,m=-1,r=d.length;if(1===arguments.length){for(;++m<r&&(null==(c=d[m])||c!=c);)c=void 0;for(;++m<r;)null!=(e=d[m])&&c>e&&(c=e)}else{for(;++m<r&&(null==(c=a.call(d,d[m],m))||c!=c);)c=void 0;for(;++m<r;)null!=(e=a.call(d,d[m],m))&&
c>e&&(c=e)}return c};p.max=function(d,a){var c,e,m=-1,r=d.length;if(1===arguments.length){for(;++m<r&&(null==(c=d[m])||c!=c);)c=void 0;for(;++m<r;)null!=(e=d[m])&&e>c&&(c=e)}else{for(;++m<r&&(null==(c=a.call(d,d[m],m))||c!=c);)c=void 0;for(;++m<r;)null!=(e=a.call(d,d[m],m))&&e>c&&(c=e)}return c};p.extent=function(d,a){var c,e,m,r=-1,g=d.length;if(1===arguments.length){for(;++r<g&&(null==(c=m=d[r])||c!=c);)c=m=void 0;for(;++r<g;)null!=(e=d[r])&&(c>e&&(c=e),e>m&&(m=e))}else{for(;++r<g&&(null==(c=m=
a.call(d,d[r],r))||c!=c);)c=void 0;for(;++r<g;)null!=(e=a.call(d,d[r],r))&&(c>e&&(c=e),e>m&&(m=e))}return[c,m]};p.sum=function(d,a){var c,e=0,m=d.length,r=-1;if(1===arguments.length)for(;++r<m;)isNaN(c=+d[r])||(e+=c);else for(;++r<m;)isNaN(c=+a.call(d,d[r],r))||(e+=c);return e};p.mean=function(d,a){var c,g=d.length,m=0,r=-1,h=0;if(1===arguments.length)for(;++r<g;)e(c=d[r])&&(m+=(c-m)/++h);else for(;++r<g;)e(c=a.call(d,d[r],r))&&(m+=(c-m)/++h);return h?m:void 0};p.quantile=function(d,a){var c=(d.length-
1)*a+1,e=Math.floor(c),m=+d[e-1];return(c-=e)?m+c*(d[e]-m):m};p.median=function(d,a){return 1<arguments.length&&(d=d.map(a)),d=d.filter(e),d.length?p.quantile(d.sort(p.ascending),0.5):void 0};p.bisector=function(d){return{left:function(a,c,e,m){3>arguments.length&&(e=0);for(4>arguments.length&&(m=a.length);m>e;){var r=e+m>>>1;d.call(a,a[r],r)<c?e=r+1:m=r}return e},right:function(a,c,e,m){3>arguments.length&&(e=0);for(4>arguments.length&&(m=a.length);m>e;){var r=e+m>>>1;c<d.call(a,a[r],r)?m=r:e=r+
1}return e}}};var Se=p.bisector(function(d){return d});p.bisectLeft=Se.left;p.bisect=p.bisectRight=Se.right;p.shuffle=function(d){for(var a,c,e=d.length;e;)c=Math.random()*e--|0,a=d[e],d[e]=d[c],d[c]=a;return d};p.permute=function(d,a){for(var c=[],e=-1,m=a.length;++e<m;)c[e]=d[a[e]];return c};p.zip=function(){if(!(e=arguments.length))return[];for(var d=-1,a=p.min(arguments,n),c=Array(a);++d<a;)for(var e,m=-1,r=c[d]=Array(e);++m<e;)r[m]=arguments[m][d];return c};p.transpose=function(d){return p.zip.apply(p,
d)};p.keys=function(d){var a=[],c;for(c in d)a.push(c);return a};p.values=function(d){var a=[],c;for(c in d)a.push(d[c]);return a};p.entries=function(d){var a=[],c;for(c in d)a.push({key:c,value:d[c]});return a};p.merge=function(d){return Array.prototype.concat.apply([],d)};p.range=function(d,a,c){if(3>arguments.length&&(c=1,2>arguments.length&&(a=d,d=0)),1/0===(a-d)/c)throw Error("infinite range");var e,m=[],r;e=Math.abs(c);for(r=1;e*r%1;)r*=10;var g=-1;if(d*=r,a*=r,c*=r,0>c)for(;(e=d+c*++g)>a;)m.push(e/
r);else for(;(e=d+c*++g)<a;)m.push(e/r);return m};p.map=function(d){var a=new c,f;for(f in d)a.set(f,d[f]);return a};q(c,{has:function(d){return Ba+d in this},get:function(d){return this[Ba+d]},set:function(d,a){return this[Ba+d]=a},remove:function(d){return d=Ba+d,d in this&&delete this[d]},keys:function(){var d=[];return this.forEach(function(a){d.push(a)}),d},values:function(){var d=[];return this.forEach(function(a,c){d.push(c)}),d},entries:function(){var d=[];return this.forEach(function(a,c){d.push({key:a,
value:c})}),d},forEach:function(d){for(var a in this)a.charCodeAt(0)===Te&&d.call(this,a.substring(1),this[a])}});var Ba="\x00",Te=Ba.charCodeAt(0);p.nest=function(){function d(a,g,w){if(w>=r.length)return e?e.call(m,g):f?g.sort(f):g;for(var h,l,p,n,B=-1,s=g.length,q=r[w++],z=new c;++B<s;)(n=z.get(h=q(l=g[B])))?n.push(l):z.set(h,[l]);return a?(l=a(),p=function(c,f){l.set(c,d(a,f,w))}):(l={},p=function(c,f){l[c]=d(a,f,w)}),z.forEach(p),l}function a(d,c){if(c>=r.length)return d;var f=[],e=g[c++];return d.forEach(function(d,
e){f.push({key:d,values:a(e,c)})}),e?f.sort(function(d,a){return e(d.key,a.key)}):f}var f,e,m={},r=[],g=[];return m.map=function(a,c){return d(c,a,0)},m.entries=function(c){return a(d(p.map,c,0),0)},m.key=function(d){return r.push(d),m},m.sortKeys=function(d){return g[r.length-1]=d,m},m.sortValues=function(d){return f=d,m},m.rollup=function(d){return e=d,m},m};p.set=function(d){var c=new a;if(d)for(var f=0;f<d.length;f++)c.add(d[f]);return c};q(a,{has:function(d){return Ba+d in this},add:function(d){return this[Ba+
d]=!0,d},remove:function(d){return d=Ba+d,d in this&&delete this[d]},values:function(){var d=[];return this.forEach(function(a){d.push(a)}),d},forEach:function(d){for(var a in this)a.charCodeAt(0)===Te&&d.call(this,a.substring(1))}});p.behavior={};p.rebind=function(d,a){for(var c,e=1,m=arguments.length;++e<m;)d[c=arguments[e]]=h(d,a,a[c]);return d};p.dispatch=function(){for(var d=new l,a=-1,c=arguments.length;++a<c;)d[arguments[a]]=g(d);return d};l.prototype.on=function(d,a){var c=d.indexOf("."),
e="";if(0<=c&&(e=d.substring(c+1),d=d.substring(0,c)),d)return 2>arguments.length?this[d].on(e):this[d].on(e,a);if(2===arguments.length){if(null==a)for(d in this)this.hasOwnProperty(d)&&this[d].on(e,null);return this}};p.event=null;p.mouse=function(d){return E(d,x())};var Ob=/WebKit/.test(ca.navigator.userAgent)?-1:0,wa=function(d){return Array.prototype.slice.call(d)};try{wa(ga.documentElement.childNodes)[0].nodeType}catch(rh){wa=u}var Pb=[].__proto__?function(d,a){d.__proto__=a}:function(d,a){for(var c in a)d[c]=
a[c]};p.touches=function(a,c){return 2>arguments.length&&(c=x().touches),c?wa(c).map(function(c){var e=E(a,c);return e.identifier=c.identifier,e}):[]};p.behavior.drag=function(){function a(){this.on("mousedown.drag",c).on("touchstart.drag",c)}function c(){function a(){var d=h.parentNode;return null!=n?p.touches(d).filter(function(a){return a.identifier===n})[0]:p.mouse(d)}function d(){w({type:"dragend"});M&&(s(),p.event.target===l&&Q(u,"click"));u.on(null!=n?"touchmove.drag-"+n:"mousemove.drag",null).on(null!=
n?"touchend.drag-"+n:"mouseup.drag",null)}var g,h=this,w=f.of(h,arguments),l=p.event.target,n=p.event.touches?p.event.changedTouches[0].identifier:null,q=a(),M=0,u=p.select(ca).on(null!=n?"touchmove.drag-"+n:"mousemove.drag",function(){if(!h.parentNode)return d();var c=a(),f=c[0]-q[0],e=c[1]-q[1];M|=f|e;q=c;s();w({type:"drag",x:c[0]+g[0],y:c[1]+g[1],dx:f,dy:e})}).on(null!=n?"touchend.drag-"+n:"mouseup.drag",d,!0);e?(g=e.apply(h,arguments),g=[g.x-q[0],g.y-q[1]]):g=[0,0];null==n&&s();w({type:"dragstart"})}
var f=v(a,"drag","dragstart","dragend"),e=null;return a.origin=function(c){return arguments.length?(e=c,a):e},p.rebind(a,f,"on")};var $c=function(a,c){return c.querySelector(a)},ad=function(a,c){return c.querySelectorAll(a)},Pa=ga.documentElement,Og=Pa.matchesSelector||Pa.webkitMatchesSelector||Pa.mozMatchesSelector||Pa.msMatchesSelector||Pa.oMatchesSelector,ed=function(a,c){return Og.call(a,c)};"function"==typeof Sizzle&&($c=function(a,c){return Sizzle(a,c)[0]||null},ad=function(a,c){return Sizzle.uniqueSort(Sizzle(a,
c))},ed=Sizzle.matchesSelector);var R=[];p.selection=function(){return ab};p.selection.prototype=R;R.select=function(a){var c,f,e,m,g=[];"function"!=typeof a&&(a=P(a));for(var h=-1,l=this.length;++h<l;){g.push(c=[]);c.parentNode=(e=this[h]).parentNode;for(var p=-1,n=e.length;++p<n;)(m=e[p])?(c.push(f=a.call(m,m.__data__,p)),f&&"__data__"in m&&(f.__data__=m.__data__)):c.push(null)}return N(g)};R.selectAll=function(a){var c,f,e=[];"function"!=typeof a&&(a=S(a));for(var m=-1,g=this.length;++m<g;)for(var h=
this[m],l=-1,p=h.length;++l<p;)(f=h[l])&&(e.push(c=wa(a.call(f,f.__data__,l))),c.parentNode=f);return N(e)};var Pc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};p.ns={prefix:Pc,qualify:function(a){var c=a.indexOf(":"),f=a;return 0<=c&&(f=a.substring(0,c),a=a.substring(c+1)),Pc.hasOwnProperty(f)?{space:Pc[f],local:a}:a}};R.attr=function(a,c){if(2>arguments.length){if("string"==
typeof a){var f=this.node();return a=p.ns.qualify(a),a.local?f.getAttributeNS(a.space,a.local):f.getAttribute(a)}for(c in a)this.each(Sa(c,a[c]));return this}return this.each(Sa(a,c))};p.requote=function(a){return a.replace(Pg,"\\$&")};var Pg=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;R.classed=function(a,c){if(2>arguments.length){if("string"==typeof a){var f=this.node(),e=(a=a.trim().split(/^|\s+/g)).length,m=-1;if(c=f.classList)for(;++m<e;){if(!c.contains(a[m]))return!1}else for(c=f.getAttribute("class");++m<
e;)if(!Yc(a[m]).test(c))return!1;return!0}for(c in a)this.each(Zc(c,a[c]));return this}return this.each(Zc(a,c))};R.style=function(a,c,f){var e=arguments.length;if(3>e){if("string"!=typeof a){2>e&&(c="");for(f in a)this.each(bd(f,a[f],c));return this}if(2>e)return ca.getComputedStyle(this.node(),null).getPropertyValue(a);f=""}return this.each(bd(a,c,f))};R.property=function(a,c){if(2>arguments.length){if("string"==typeof a)return this.node()[a];for(c in a)this.each(cd(c,a[c]));return this}return this.each(cd(a,
c))};R.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var c=a.apply(this,arguments);this.textContent=null==c?"":c}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent};R.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var c=a.apply(this,arguments);this.innerHTML=null==c?"":c}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML};R.append=function(a){function c(){return this.appendChild(ga.createElementNS(this.namespaceURI,
a))}function f(){return this.appendChild(ga.createElementNS(a.space,a.local))}return a=p.ns.qualify(a),this.select(a.local?f:c)};R.insert=function(a,c){function f(f,e){return this.insertBefore(ga.createElementNS(this.namespaceURI,a),c.call(this,f,e))}function e(f,g){return this.insertBefore(ga.createElementNS(a.space,a.local),c.call(this,f,g))}return a=p.ns.qualify(a),"function"!=typeof c&&(c=P(c)),this.select(a.local?e:f)};R.remove=function(){return this.each(function(){var a=this.parentNode;a&&
a.removeChild(this)})};R.data=function(a,e){function f(a,d){var f,m,g,r=a.length,h=d.length,D=Math.min(r,h),B=Array(h),s=Array(h),q=Array(r);if(e){var u=new c,v=new c,T=[];for(f=-1;++f<r;)D=e.call(m=a[f],m.__data__,f),u.has(D)?q[f]=m:u.set(D,m),T.push(D);for(f=-1;++f<h;)D=e.call(d,g=d[f],f),(m=u.get(D))?(B[f]=m,m.__data__=g):v.has(D)||(s[f]={__data__:g}),v.set(D,g),u.remove(D);for(f=-1;++f<r;)u.has(T[f])&&(q[f]=a[f])}else{for(f=-1;++f<D;)m=a[f],g=d[f],m?(m.__data__=g,B[f]=m):s[f]={__data__:g};for(;h>
f;++f)s[f]={__data__:d[f]};for(;r>f;++f)q[f]=a[f]}s.update=B;s.parentNode=B.parentNode=q.parentNode=a.parentNode;l.push(s);p.push(B);n.push(q)}var g,m,r=-1,h=this.length;if(!arguments.length){for(a=Array(h=(g=this[0]).length);++r<h;)(m=g[r])&&(a[r]=m.__data__);return a}var l=hd([]),p=N([]),n=N([]);if("function"==typeof a)for(;++r<h;)f(g=this[r],a.call(g,g.parentNode.__data__,r));else for(;++r<h;)f(g=this[r],a);return p.enter=function(){return l},p.exit=function(){return n},p};R.datum=function(a){return arguments.length?
this.property("__data__",a):this.property("__data__")};R.filter=function(a){var c,f,e,m=[];"function"!=typeof a&&(a=dd(a));for(var g=0,h=this.length;h>g;g++){m.push(c=[]);c.parentNode=(f=this[g]).parentNode;for(var l=0,p=f.length;p>l;l++)(e=f[l])&&a.call(e,e.__data__,l)&&c.push(e)}return N(m)};R.order=function(){for(var a=-1,c=this.length;++a<c;)for(var f,e=this[a],m=e.length-1,g=e[m];0<=--m;)(f=e[m])&&(g&&g!==f.nextSibling&&g.parentNode.insertBefore(f,g),g=f);return this};R.sort=function(a){a=rf.apply(this,
arguments);for(var c=-1,f=this.length;++c<f;)this[c].sort(a);return this.order()};R.on=function(a,c,f){var e=arguments.length;if(3>e){if("string"!=typeof a){2>e&&(c=!1);for(f in a)this.each(fd(f,a[f],c));return this}if(2>e)return(e=this.node()["__on"+a])&&e._;f=!1}return this.each(fd(a,c,f))};var Qb=p.map({mouseenter:"mouseover",mouseleave:"mouseout"});Qb.forEach(function(a){"on"+a in ga&&Qb.remove(a)});R.each=function(a){return xa(this,function(c,f,e){a.call(c,c.__data__,f,e)})};R.call=function(a){var c=
wa(arguments);return a.apply(c[0]=this,c),this};R.empty=function(){return!this.node()};R.node=function(){for(var a=0,c=this.length;c>a;a++)for(var f=this[a],e=0,m=f.length;m>e;e++){var g=f[e];if(g)return g}return null};var Ca=[];p.selection.enter=hd;p.selection.enter.prototype=Ca;Ca.append=R.append;Ca.insert=R.insert;Ca.empty=R.empty;Ca.node=R.node;Ca.select=function(a){for(var c,f,e,m,g,h=[],l=-1,p=this.length;++l<p;){e=(m=this[l]).update;h.push(c=[]);c.parentNode=m.parentNode;for(var n=-1,s=m.length;++n<
s;)(g=m[n])?(c.push(e[n]=f=a.call(m.parentNode,g.__data__,n)),f.__data__=g.__data__):c.push(null)}return N(h)};R.transition=function(){var a,c,f=bb||++Ue,e=[],m=Object.create(Fb);m.time=Date.now();for(var g=-1,h=this.length;++g<h;){e.push(a=[]);for(var l=this[g],p=-1,n=l.length;++p<n;)(c=l[p])&&Ab(c,p,f,m),a.push(c)}return $a(e,f)};var ab=N([[ga]]);ab[0].parentNode=Pa;p.select=function(a){return"string"==typeof a?ab.select(a):N([[a]])};p.selectAll=function(a){return"string"==typeof a?ab.selectAll(a):
N([wa(a)])};p.behavior.zoom=function(){function a(){this.on("mousedown.zoom",h).on("mousemove.zoom",n).on(Qg+".zoom",l).on("dblclick.zoom",q).on("touchstart.zoom",va).on("touchmove.zoom",aa).on("touchend.zoom",va)}function c(a){return[(a[0]-L[0])/F,(a[1]-L[1])/F]}function f(a){F=Math.max(x[0],Math.min(x[1],a))}function e(a,d){d=[d[0]*F+L[0],d[1]*F+L[1]];L[0]+=a[0]-d[0];L[1]+=a[1]-d[1]}function m(){y&&y.domain(K.range().map(function(a){return(a-L[0])/F}).map(K.invert));z&&z.domain(A.range().map(function(a){return(a-
L[1])/F}).map(A.invert))}function g(a){m();p.event.preventDefault();a({type:"zoom",scale:F,translate:L})}function h(){var a=this,d=da.of(a,arguments),f=p.event.target,m=0,l=p.select(ca).on("mousemove.zoom",function(){m=1;e(p.mouse(a),t);g(d)}).on("mouseup.zoom",function(){m&&s();l.on("mousemove.zoom",null).on("mouseup.zoom",null);m&&p.event.target===f&&Q(l,"click.zoom")}),t=c(p.mouse(a));ca.focus();s()}function l(){M||(M=c(p.mouse(this)));f(Math.pow(2,0.002*Gb())*F);e(p.mouse(this),M);g(da.of(this,
arguments))}function n(){M=null}function q(){var a=p.mouse(this),d=c(a),m=Math.log(F)/Math.LN2;f(Math.pow(2,p.event.shiftKey?Math.ceil(m)-1:Math.floor(m)+1));e(a,d);g(da.of(this,arguments))}function va(){var a=p.touches(this),d=Date.now();if(u=F,M={},a.forEach(function(a){M[a.identifier]=c(a)}),s(),1===a.length){if(500>d-H){var m=a[0],a=c(a[0]);f(2*F);e(m,a);g(da.of(this,arguments))}H=d}}function aa(){var a=p.touches(this),d=a[0],c=M[d.identifier];if(a=a[1]){var m=M[a.identifier],d=[(d[0]+a[0])/2,
(d[1]+a[1])/2],c=[(c[0]+m[0])/2,(c[1]+m[1])/2];f(p.event.scale*u)}e(d,c);H=null;g(da.of(this,arguments))}var M,u,K,y,A,z,H,L=[0,0],F=1,x=Ve,da=v(a,"zoom");return a.translate=function(c){return arguments.length?(L=c.map(Number),m(),a):L},a.scale=function(c){return arguments.length?(F=+c,m(),a):F},a.scaleExtent=function(c){return arguments.length?(x=null==c?Ve:c.map(Number),a):x},a.x=function(c){return arguments.length?(y=c,K=c.copy(),L=[0,0],F=1,a):y},a.y=function(c){return arguments.length?(z=c,A=
c.copy(),L=[0,0],F=1,a):z},p.rebind(a,da,"on")};var Gb,Ve=[0,1/0],Qg="onwheel"in ga?(Gb=function(){return-p.event.deltaY*(p.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ga?(Gb=function(){return p.event.wheelDelta},"mousewheel"):(Gb=function(){return-p.event.detail},"MozMousePixelScroll");Ia.prototype.toString=function(){return this.rgb()+""};p.hsl=function(a,c,f){return 1===arguments.length?a instanceof Sb?Ja(a.h,a.s,a.l):Yb(""+a,nd,Ja):Ja(+a,+c,+f)};var Qc=Sb.prototype=new Ia;Qc.brighter=function(a){return a=
Math.pow(0.7,arguments.length?a:1),Ja(this.h,this.s,this.l/a)};Qc.darker=function(a){return a=Math.pow(0.7,arguments.length?a:1),Ja(this.h,this.s,a*this.l)};Qc.rgb=function(){return cb(this.h,this.s,this.l)};var C=Math.PI,I=1E-6,G=C/180,U=180/C;p.hcl=function(a,c,f){var e;if(1===arguments.length)if(a instanceof db)e=Ka(a.h,a.c,a.l);else if(a instanceof eb)e=Ka(Math.atan2(a.b,a.a)*U,Math.sqrt(a.a*a.a+a.b*a.b),a.l);else{e=(a=od((a=p.rgb(a)).r,a.g,a.b)).l;var m=a.a,g=a.b;e=Ka(Math.atan2(g,m)*U,Math.sqrt(m*
m+g*g),e)}else e=Ka(+a,+c,+f);return e};var Rc=db.prototype=new Ia;Rc.brighter=function(a){return Ka(this.h,this.c,Math.min(100,this.l+Hb*(arguments.length?a:1)))};Rc.darker=function(a){return Ka(this.h,this.c,Math.max(0,this.l-Hb*(arguments.length?a:1)))};Rc.rgb=function(){return Tb(this.h,this.c,this.l).rgb()};p.lab=function(a,c,f){return 1===arguments.length?a instanceof eb?La(a.l,a.a,a.b):a instanceof db?Tb(a.l,a.c,a.h):od((a=p.rgb(a)).r,a.g,a.b):La(+a,+c,+f)};var Hb=18,kd=0.95047,ld=1,md=1.08883,
Sc=eb.prototype=new Ia;Sc.brighter=function(a){return La(Math.min(100,this.l+Hb*(arguments.length?a:1)),this.a,this.b)};Sc.darker=function(a){return La(Math.max(0,this.l-Hb*(arguments.length?a:1)),this.a,this.b)};Sc.rgb=function(){return jd(this.l,this.a,this.b)};p.rgb=function(a,c,f){return 1===arguments.length?a instanceof Xb?qa(a.r,a.g,a.b):Yb(""+a,qa,cb):qa(~~a,~~c,~~f)};var Ib=Xb.prototype=new Ia;Ib.brighter=function(a){a=Math.pow(0.7,arguments.length?a:1);var c=this.r,f=this.g,e=this.b;return c||
f||e?(c&&30>c&&(c=30),f&&30>f&&(f=30),e&&30>e&&(e=30),qa(Math.min(255,Math.floor(c/a)),Math.min(255,Math.floor(f/a)),Math.min(255,Math.floor(e/a)))):qa(30,30,30)};Ib.darker=function(a){return a=Math.pow(0.7,arguments.length?a:1),qa(Math.floor(a*this.r),Math.floor(a*this.g),Math.floor(a*this.b))};Ib.hsl=function(){return nd(this.r,this.g,this.b)};Ib.toString=function(){return"#"+Ma(this.r)+Ma(this.g)+Ma(this.b)};var fb=p.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",
azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",
darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",
greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",
lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",
olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",
slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});fb.forEach(function(a,c){fb.set(a,Yb(c,qa,cb))});p.functor=J;p.xhr=function(a,c,f){function e(){var a=n.status;!a&&n.responseText||200<=a&&300>a||304===a?g.load.call(m,l.call(m,n)):g.error.call(m,n)}var m={},g=
p.dispatch("progress","load","error"),h={},l=ia,n=new (ca.XDomainRequest&&/^(http(s)?:)?\/\//.test(a)?XDomainRequest:XMLHttpRequest);return"onload"in n?n.onload=n.onerror=e:n.onreadystatechange=function(){3<n.readyState&&e()},n.onprogress=function(a){var d=p.event;p.event=a;try{g.progress.call(m,n)}finally{p.event=d}},m.header=function(a,d){return a=(a+"").toLowerCase(),2>arguments.length?h[a]:(null==d?delete h[a]:h[a]=d+"",m)},m.mimeType=function(a){return arguments.length?(c=null==a?null:a+"",m):
c},m.response=function(a){return l=a,m},["get","post"].forEach(function(a){m[a]=function(){return m.send.apply(m,[a].concat(wa(arguments)))}}),m.send=function(f,e,g){if(2===arguments.length&&"function"==typeof e&&(g=e,e=null),n.open(f,a,!0),null==c||"accept"in h||(h.accept=c+",*/*"),n.setRequestHeader)for(var r in h)n.setRequestHeader(r,h[r]);return null!=c&&n.overrideMimeType&&n.overrideMimeType(c),null!=g&&m.on("error",g).on("load",function(a){g(null,a)}),n.send(null==e?null:e),m},m.abort=function(){return n.abort(),
m},p.rebind(m,g,"on"),2===arguments.length&&"function"==typeof c&&(f=c,c=null),null==f?m:m.get(tf(f))};p.csv=pd(",","text/csv");p.tsv=pd("\t","text/tab-separated-values");var hb,gb,Rg=0,bc={},Na=null;p.timer=function(a,c,f){if(3>arguments.length){if(2>arguments.length)c=0;else if(!isFinite(c))return;f=Date.now()}var e=bc[a.id];e&&e.callback===a?(e.then=f,e.delay=c):bc[a.id=++Rg]=Na={callback:a,then:f,delay:c,next:Na};hb||(gb=clearTimeout(gb),hb=1,rd(ac))};p.timer.flush=function(){for(var a,c=Date.now(),
f=Na;f;)a=c-f.then,f.delay||(f.flush=f.callback(a)),f=f.next;qd()};var rd=ca.requestAnimationFrame||ca.webkitRequestAnimationFrame||ca.mozRequestAnimationFrame||ca.oRequestAnimationFrame||ca.msRequestAnimationFrame||function(a){setTimeout(a,17)},Jb=[3,3],Sg="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,c){var f=Math.pow(10,3*Math.abs(8-c));return{scale:8<c?function(a){return a/f}:function(a){return a*f},symbol:a}});p.formatPrefix=function(a,c){var f=0;return a&&(0>a&&(a*=-1),c&&
(a=p.round(a,cc(a,c))),f=1+Math.floor(1E-12+Math.log(a)/Math.LN10),f=Math.max(-24,Math.min(24,3*Math.floor((0>=f?f+1:f-1)/3)))),Sg[8+f/3]};p.round=function(a,c){return c?Math.round(a*(c=Math.pow(10,c)))/c:Math.round(a)};p.format=function(a){a=ve.exec(a);var c=a[1]||" ",f=a[2]||">",e=a[3]||"",m=a[4]||"",g=a[5],h=+a[6],l=a[7],n=a[8],s=a[9],q=1,aa="",M=!1;switch(n&&(n=+n.substring(1)),(g||"0"===c&&"="===f)&&(g=c="0",f="=",l&&(h-=Math.floor((h-1)/4))),s){case "n":l=!0;s="g";break;case "%":q=100;aa="%";
s="f";break;case "p":q=100;aa="%";s="r";break;case "b":case "o":case "x":case "X":m&&(m="0"+s.toLowerCase());case "c":case "d":M=!0;n=0;break;case "s":q=-1,s="r"}"#"===m&&(m="");"r"!=s||n||(s="g");null!=n&&("g"==s?n=Math.max(1,Math.min(21,n)):("e"==s||"f"==s)&&(n=Math.max(0,Math.min(20,n))));var s=Tg.get(s)||uf,u=g&&l;return function(a){if(M&&a%1)return"";var d=0>a||0===a&&0>1/a?(a=-a,"-"):e;if(0>q){var A=p.formatPrefix(a,n);a=A.scale(a);aa=A.symbol}else a*=q;a=s(a,n);!g&&l&&(a=Tc(a));var A=m.length+
a.length+(u?0:d.length),z=h>A?Array(A=h-A+1).join(c):"";return u&&(a=Tc(z+a)),a.replace(".","."),d+=m,("<"===f?d+a+z:">"===f?z+d+a:"^"===f?z.substring(0,A>>=1)+d+a+z.substring(A):d+(u?a:z+a))+aa}};var ve=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Tg=p.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,
c){return a.toPrecision(c)},e:function(a,c){return a.toExponential(c)},f:function(a,c){return a.toFixed(c)},r:function(a,c){return(a=p.round(a,cc(a,c))).toFixed(Math.max(0,Math.min(20,cc(a*(1+1E-15),c))))}}),Tc=ia;if(Jb)var Ug=Jb.length,Tc=function(a){for(var c=a.lastIndexOf("."),f=0<=c?"."+a.substring(c+1):(c=a.length,""),e=[],m=0,g=Jb[0];0<c&&0<g;)e.push(a.substring(c-=g,c+g)),g=Jb[m=(m+1)%Ug];return e.reverse().join(",")+f};p.geo={};p.geo.stream=function(a,c){a&&We.hasOwnProperty(a.type)?We[a.type](a,
c):ib(a,c)};var We={Feature:function(a,c){ib(a.geometry,c)},FeatureCollection:function(a,c){for(var f=a.features,e=-1,m=f.length;++e<m;)ib(f[e].geometry,c)}},sd={Sphere:function(a,c){c.sphere()},Point:function(a,c){var f=a.coordinates;c.point(f[0],f[1])},MultiPoint:function(a,c){for(var f,e=a.coordinates,m=-1,g=e.length;++m<g;)f=e[m],c.point(f[0],f[1])},LineString:function(a,c){dc(a.coordinates,c,0)},MultiLineString:function(a,c){for(var f=a.coordinates,e=-1,m=f.length;++e<m;)dc(f[e],c,0)},Polygon:function(a,
c){td(a.coordinates,c)},MultiPolygon:function(a,c){for(var f=a.coordinates,e=-1,m=f.length;++e<m;)td(f[e],c)},GeometryCollection:function(a,c){for(var f=a.geometries,e=-1,m=f.length;++e<m;)ib(f[e],c)}};p.geo.area=function(a){return Qa=0,p.geo.stream(a,ya),Qa};var Qa,jb,kb,ya={sphere:function(){Qa+=4*C},point:Y,lineStart:Y,lineEnd:Y,polygonStart:function(){jb=1;kb=0;ya.lineStart=vf},polygonEnd:function(){var a=2*Math.atan2(kb,jb);Qa+=0>a?4*C+a:a;ya.lineStart=ya.lineEnd=ya.point=Y}};p.geo.bounds=ud(ia);
p.geo.centroid=function(a){ba=ka=W=X=V=0;p.geo.stream(a,la);var c;return ka&&Math.abs(c=Math.sqrt(W*W+X*X+V*V))>I?[Math.atan2(X,W)*U,Math.asin(Math.max(-1,Math.min(1,V/c)))*U]:void 0};var ba,ka,W,X,V,la={sphere:function(){2>ba&&(ba=2,ka=W=X=V=0)},point:vd,lineStart:ec,lineEnd:fc,polygonStart:function(){2>ba&&(ba=2,ka=W=X=V=0);la.lineStart=wf},polygonEnd:function(){la.lineStart=ec}},Ed=zd(Ta,function(a){var c,f=0/0,e=0/0,m=0/0;return{lineStart:function(){a.lineStart();c=1},point:function(g,h){var l=
0<g?C:-C,n=Math.abs(g-f);if(Math.abs(n-C)<I)a.point(f,e=0<(e+h)/2?C/2:-C/2),a.point(m,e),a.lineEnd(),a.lineStart(),a.point(l,e),a.point(g,e),c=0;else if(m!==l&&n>=C){Math.abs(f-m)<I&&(f-=m*I);Math.abs(g-l)<I&&(g-=l*I);var n=f,p=e,s=g,q,M,u=Math.sin(n-s);e=Math.abs(u)>I?Math.atan((Math.sin(p)*(M=Math.cos(h))*Math.sin(s)-Math.sin(h)*(q=Math.cos(p))*Math.sin(n))/(q*M*u)):(p+h)/2;a.point(m,e);a.lineEnd();a.lineStart();a.point(l,e);c=0}a.point(f=g,e=h);m=l},lineEnd:function(){a.lineEnd();f=e=0/0},clean:function(){return 2-
c}}},function(a,c,f,e){null==a?(f=f*C/2,e.point(-C,f),e.point(0,f),e.point(C,f),e.point(C,0),e.point(C,-f),e.point(0,-f),e.point(-C,-f),e.point(-C,0),e.point(-C,f)):Math.abs(a[0]-c[0])>I?(a=(a[0]<c[0]?1:-1)*C,f=f*a/2,e.point(-a,f),e.point(0,f),e.point(a,f)):e.point(c[0],c[1])}),pb=1E9;p.geo.projection=za;p.geo.projectionMutator=jc;(p.geo.equirectangular=function(){return za(Ua)}).raw=Ua.invert=Ua;p.geo.rotation=function(a){function c(f){return f=a(f[0]*G,f[1]*G),f[0]*=U,f[1]*=U,f}return a=kc(a[0]%
360*G,a[1]*G,2<a.length?a[2]*G:0),c.invert=function(c){return c=a.invert(c[0]*G,c[1]*G),c[0]*=U,c[1]*=U,c},c};p.geo.circle=function(){function a(){var d="function"==typeof e?e.apply(this,arguments):e,c=kc(-d[0]*G,-d[1]*G,0).invert,m=[];return f(null,null,1,{point:function(a,d){m.push(a=c(a,d));a[0]*=U;a[1]*=U}}),{type:"Polygon",coordinates:[m]}}var c,f,e=[0,0],m=6;return a.origin=function(c){return arguments.length?(e=c,a):e},a.angle=function(e){return arguments.length?(f=ic((c=+e)*G,m*G),a):c},a.precision=
function(e){return arguments.length?(f=ic(c*G,(m=+e)*G),a):m},a.angle(90)};p.geo.distance=function(a,c){var f,e=(c[0]-a[0])*G,m=a[1]*G,g=c[1]*G,h=Math.sin(e),e=Math.cos(e),l=Math.sin(m),m=Math.cos(m),n=Math.sin(g),g=Math.cos(g);return Math.atan2(Math.sqrt((f=g*h)*f+(f=m*n-l*g*e)*f),l*n+m*g*e)};p.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:c()}}function c(){return p.range(Math.ceil(g/A)*A,m,A).map(M).concat(p.range(Math.ceil(s/z)*z,n,z).map(u)).concat(p.range(Math.ceil(e/
K)*K,f,K).filter(function(a){return Math.abs(a%A)>I}).map(q)).concat(p.range(Math.ceil(l/y)*y,h,y).filter(function(a){return Math.abs(a%z)>I}).map(aa))}var f,e,m,g,h,l,n,s,q,aa,M,u,K=10,y=K,A=90,z=360,H=2.5;return a.lines=function(){return c().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[M(g).concat(u(n).slice(1),M(m).reverse().slice(1),u(s).reverse().slice(1))]}},a.extent=function(c){return arguments.length?a.majorExtent(c).minorExtent(c):
a.minorExtent()},a.majorExtent=function(c){return arguments.length?(g=+c[0][0],m=+c[1][0],s=+c[0][1],n=+c[1][1],g>m&&(c=g,g=m,m=c),s>n&&(c=s,s=n,n=c),a.precision(H)):[[g,s],[m,n]]},a.minorExtent=function(c){return arguments.length?(e=+c[0][0],f=+c[1][0],l=+c[0][1],h=+c[1][1],e>f&&(c=e,e=f,f=c),l>h&&(c=l,l=h,h=c),a.precision(H)):[[e,l],[f,h]]},a.step=function(c){return arguments.length?a.majorStep(c).minorStep(c):a.minorStep()},a.majorStep=function(c){return arguments.length?(A=+c[0],z=+c[1],a):[A,
z]},a.minorStep=function(c){return arguments.length?(K=+c[0],y=+c[1],a):[K,y]},a.precision=function(c){return arguments.length?(H=+c,q=Jd(l,h,90),aa=Kd(e,f,H),M=Jd(s,n,90),u=Kd(g,m,H),a):H},a.majorExtent([[-180,-90+I],[180,90-I]]).minorExtent([[-180,-80-I],[180,80+I]])};p.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[c||e.apply(this,arguments),f||m.apply(this,arguments)]}}var c,f,e=lc,m=mc;return a.distance=function(){return p.geo.distance(c||e.apply(this,arguments),f||
m.apply(this,arguments))},a.source=function(f){return arguments.length?(e=f,c="function"==typeof f?null:f,a):e},a.target=function(c){return arguments.length?(m=c,f="function"==typeof c?null:c,a):m},a.precision=function(){return arguments.length?a:0},a};p.geo.interpolate=function(a,c){return Df(a[0]*G,a[1]*G,c[0]*G,c[1]*G)};p.geo.length=function(a){return Kb=0,p.geo.stream(a,Ra),Kb};var Kb,Ra={sphere:Y,point:Y,lineStart:function(){function a(d,g){var h=Math.sin(g*=G),l=Math.cos(g),n=Math.abs((d*=G)-
c),p=Math.cos(n);Kb+=Math.atan2(Math.sqrt((n=l*Math.sin(n))*n+(n=e*h-f*l*p)*n),f*h+e*l*p);c=d;f=h;e=l}var c,f,e;Ra.point=function(m,g){c=m*G;f=Math.sin(g*=G);e=Math.cos(g);Ra.point=a};Ra.lineEnd=function(){Ra.point=Ra.lineEnd=Y}},lineEnd:Y,polygonStart:Y,polygonEnd:Y};(p.geo.conicEqualArea=function(){return nc(Ld)}).raw=Ld;p.geo.albersUsa=function(){function a(d){var c=d[0],f=d[1];return(50<f?g:-140>c?h:21>f?l:m)(d)}var c,f,e,m=p.geo.conicEqualArea().rotate([98,0]).center([0,38]).parallels([29.5,
45.5]),g=p.geo.conicEqualArea().rotate([160,0]).center([0,60]).parallels([55,65]),h=p.geo.conicEqualArea().rotate([160,0]).center([0,20]).parallels([8,18]),l=p.geo.conicEqualArea().rotate([60,0]).center([0,10]).parallels([8,18]);return a.invert=function(a){return c(a)||f(a)||e(a)||m.invert(a)},a.scale=function(c){return arguments.length?(m.scale(c),g.scale(0.6*c),h.scale(c),l.scale(1.5*c),a.translate(m.translate())):m.scale()},a.translate=function(n){if(!arguments.length)return m.translate();var p=
m.scale(),s=n[0],q=n[1];return m.translate(n),g.translate([s-0.4*p,q+0.17*p]),h.translate([s-0.19*p,q+0.2*p]),l.translate([s+0.58*p,q+0.43*p]),c=oc(g,[[-180,50],[-130,72]]),f=oc(h,[[-164,18],[-154,24]]),e=oc(l,[[-67.5,17.5],[-65,19]]),a},a.scale(1E3)};var Lb,rb,Aa={point:Y,lineStart:Y,lineEnd:Y,polygonStart:function(){rb=0;Aa.lineStart=Ef},polygonEnd:function(){Aa.lineStart=Aa.lineEnd=Aa.point=Y;Lb+=Math.abs(rb/2)}},ma={point:pc,lineStart:Nd,lineEnd:Od,polygonStart:function(){ma.lineStart=Gf},polygonEnd:function(){ma.point=
pc;ma.lineStart=Nd;ma.lineEnd=Od}};p.geo.path=function(){function a(d){return d&&p.geo.stream(d,e(m.pointRadius("function"==typeof g?+g.apply(this,arguments):g))),m.result()}var c,f,e,m,g=4.5;return a.area=function(a){return Lb=0,p.geo.stream(a,e(Aa)),Lb},a.centroid=function(a){return ba=W=X=V=0,p.geo.stream(a,e(ma)),V?[W/V,X/V]:void 0},a.bounds=function(a){return ud(e)(a)},a.projection=function(f){return arguments.length?(e=(c=f)?f.stream||If(f):ia,a):c},a.context=function(c){return arguments.length?
(m=null==(f=c)?new Ff:new Hf(c),a):f},a.pointRadius=function(c){return arguments.length?(g="function"==typeof c?c:+c,a):g},a.projection(p.geo.albersUsa()).context(null)};p.geo.albers=function(){return p.geo.conicEqualArea().parallels([29.5,45.5]).rotate([98,0]).center([0,38]).scale(1E3)};var Xe=Va(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(p.geo.azimuthalEqualArea=function(){return za(Xe)}).raw=Xe;var Ye=Va(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},ia);
(p.geo.azimuthalEquidistant=function(){return za(Ye)}).raw=Ye;(p.geo.conicConformal=function(){return nc(Pd)}).raw=Pd;(p.geo.conicEquidistant=function(){return nc(Qd)}).raw=Qd;var Ze=Va(function(a){return 1/a},Math.atan);(p.geo.gnomonic=function(){return za(Ze)}).raw=Ze;sb.invert=function(a,c){return[a,2*Math.atan(Math.exp(c))-C/2]};(p.geo.mercator=function(){return Rd(sb)}).raw=sb;var $e=Va(function(){return 1},Math.asin);(p.geo.orthographic=function(){return za($e)}).raw=$e;var af=Va(function(a){return 1/
(1+a)},function(a){return 2*Math.atan(a)});(p.geo.stereographic=function(){return za(af)}).raw=af;qc.invert=function(a,c){var f=Math.atan2((Math.exp(a)-Math.exp(-a))/2,Math.cos(c)),e;e=Math.sin(c)/((Math.exp(a)+Math.exp(-a))/2);e=1<e?C/2:-1>e?-C/2:Math.asin(e);return[f,e]};(p.geo.transverseMercator=function(){return Rd(qc)}).raw=qc;p.geom={};p.svg={};p.svg.line=function(){return Sd(ia)};var rc=p.map({linear:ja,"linear-closed":function(a){return ja(a)+"Z"},"step-before":sc,"step-after":tc,basis:Td,
"basis-open":function(a){if(4>a.length)return ja(a);for(var c,f=[],e=-1,m=a.length,g=[0],h=[0];3>++e;)c=a[e],g.push(c[0]),h.push(c[1]);f.push(pa(Oa,g)+","+pa(Oa,h));for(--e;++e<m;)c=a[e],g.shift(),g.push(c[0]),h.shift(),h.push(c[1]),Wa(f,g,h);return f.join("")},"basis-closed":function(a){for(var c,f,e=-1,m=a.length,g=m+4,h=[],l=[];4>++e;)f=a[e%m],h.push(f[0]),l.push(f[1]);c=[pa(Oa,h),",",pa(Oa,l)];for(--e;++e<g;)f=a[e%m],h.shift(),h.push(f[0]),l.shift(),l.push(f[1]),Wa(c,h,l);return c.join("")},bundle:function(a,
c){var f=a.length-1;if(f)for(var e,m,g=a[0][0],h=a[0][1],l=a[f][0]-g,n=a[f][1]-h,p=-1;++p<=f;)e=a[p],m=p/f,e[0]=c*e[0]+(1-c)*(g+m*l),e[1]=c*e[1]+(1-c)*(h+m*n);return Td(a)},cardinal:function(a,c){return 3>a.length?ja(a):a[0]+tb(a,uc(a,c))},"cardinal-open":function(a,c){return 4>a.length?ja(a):a[1]+tb(a.slice(1,a.length-1),uc(a,c))},"cardinal-closed":function(a,c){return 3>a.length?ja(a):a[0]+tb((a.push(a[0]),a),uc([a[a.length-2]].concat(a,[a[1]]),c))},monotone:function(a){if(3>a.length)a=ja(a);else{var c=
a[0],f,e,m,g,h=[],l;f=0;l=a.length-1;for(var n=[],p=a[1],s=n[0]=vc(a[0],p);++f<l;)n[f]=(s+(s=vc(p,p=a[f+1])))/2;l=(n[f]=s,n);n=-1;for(p=a.length-1;++n<p;)f=vc(a[n],a[n+1]),1E-6>Math.abs(f)?l[n]=l[n+1]=0:(e=l[n]/f,m=l[n+1]/f,g=e*e+m*m,9<g&&(g=3*f/Math.sqrt(g),l[n]=g*e,l[n+1]=g*m));for(n=-1;++n<=p;)g=(a[Math.min(p,n+1)][0]-a[Math.max(0,n-1)][0])/(6*(1+l[n]*l[n])),h.push([g||0,l[n]*g||0]);a=c+tb(a,h)}return a}});rc.forEach(function(a,c){c.key=a;c.closed=/-closed$/.test(a)});var Ud=[0,2/3,1/3,0],Vd=[0,
1/3,2/3,0],Oa=[0,1/6,2/3,1/6];p.geom.hull=function(a){function c(a){if(3>a.length)return[];var d,g,h,l,n,p,w,s,q,K;s=J(f);q=J(e);K=a.length;var y=K-1,A=[],z=[],H=0;if(s===oa&&e===ra)d=a;else for(h=0,d=[];K>h;++h)d.push([+s.call(this,g=a[h],h),+q.call(this,g,h)]);for(h=1;K>h;++h)d[h][1]<d[H][1]?H=h:d[h][1]==d[H][1]&&(H=d[h][0]<d[H][0]?h:H);for(h=0;K>h;++h)h!==H&&(n=d[h][1]-d[H][1],l=d[h][0]-d[H][0],A.push({angle:Math.atan2(n,l),index:h}));A.sort(function(a,d){return a.angle-d.angle});K=A[0].angle;
q=A[0].index;s=0;for(h=1;y>h;++h)g=A[h].index,K==A[h].angle?(l=d[q][0]-d[H][0],n=d[q][1]-d[H][1],p=d[g][0]-d[H][0],w=d[g][1]-d[H][1],l*l+n*n>=p*p+w*w?A[h].index=-1:(A[s].index=-1,K=A[h].angle,s=h,q=g)):(K=A[h].angle,s=h,q=g);z.push(H);for(g=h=0;2>h;++g)-1!==A[g].index&&(z.push(A[g].index),h++);for(l=z.length;y>g;++g)if(-1!==A[g].index){for(;!Jf(z[l-2],z[l-1],A[g].index,d);)--l;z[l++]=A[g].index}d=[];for(h=0;l>h;++h)d.push(a[z[h]]);return d}var f=oa,e=ra;return arguments.length?c(a):(c.x=function(a){return arguments.length?
(f=a,c):f},c.y=function(a){return arguments.length?(e=a,c):e},c)};p.geom.polygon=function(a){return a.area=function(){for(var c=0,f=a.length,e=a[f-1][1]*a[0][0]-a[f-1][0]*a[0][1];++c<f;)e+=a[c-1][1]*a[c][0]-a[c-1][0]*a[c][1];return 0.5*e},a.centroid=function(c){var f,e,g=-1,h=a.length,l=0,n=0,p=a[h-1];for(arguments.length||(c=-1/(6*a.area()));++g<h;)f=p,p=a[g],e=f[0]*p[1]-p[0]*f[1],l+=(f[0]+p[0])*e,n+=(f[1]+p[1])*e;return[l*c,n*c]},a.clip=function(c){for(var f,e,g,h,l,n,p=-1,s=a.length,q=a[s-1];++p<
s;){f=c.slice();c.length=0;h=a[p];l=f[(g=f.length)-1];for(e=-1;++e<g;)n=f[e],wc(n,q,h)?(wc(l,q,h)||c.push(Wd(l,n,q,h)),c.push(n)):wc(l,q,h)&&c.push(Wd(l,n,q,h)),l=n;q=h}return c},a};p.geom.delaunay=function(a){var c=a.map(function(){return[]}),f=[];return xc(a,function(f){c[f.region.l.index].push(a[f.region.r.index])}),c.forEach(function(c,e){var g=a[e],h=g[0],l=g[1];c.forEach(function(a){a.angle=Math.atan2(a[0]-h,a[1]-l)});c.sort(function(a,d){return a.angle-d.angle});for(var n=0,p=c.length-1;p>
n;n++)f.push([g,c[n],c[n+1]])}),f};p.geom.voronoi=function(a){function c(a){var d,e,l,n=a.map(function(){return[]}),w=J(g),s=J(h),q=a.length;if(w===oa&&s===ra)d=a;else for(d=[],l=0;q>l;++l)d.push([+w.call(this,e=a[l],l),+s.call(this,e,l)]);if(xc(d,function(a){var d,c,f,e,g,m;1===a.a&&0<=a.b?(d=a.ep.r,c=a.ep.l):(d=a.ep.l,c=a.ep.r);1===a.a?(g=d?d.y:-1E6,f=a.c-a.b*g,m=c?c.y:1E6,e=a.c-a.b*m):(f=d?d.x:-1E6,g=a.c-a.a*f,e=c?c.x:1E6,m=a.c-a.a*e);d=[f,g];e=[e,m];n[a.region.l.index].push(d,e);n[a.region.r.index].push(d,
e)}),n=n.map(function(a,c){var f=d[c][0],e=d[c][1],g=a.map(function(a){return Math.atan2(a[0]-f,a[1]-e)}),m=p.range(a.length).sort(function(a,d){return g[a]-g[d]});return m.filter(function(a,d){return!d||g[a]-g[m[d-1]]>I}).map(function(d){return a[d]})}),n.forEach(function(a,c){var f=a.length;if(!f)return a.push([-1E6,-1E6],[-1E6,1E6],[1E6,1E6],[1E6,-1E6]);if(!(2<f)){var e=d[c],g=a[0],m=a[1],f=e[0],e=e[1],h=g[0],g=g[1],l=m[0],r=m[1],n=Math.abs(l-h),m=r-g;Math.abs(m)<I?(f=g>e?-1E6:1E6,a.push([-1E6,
f],[1E6,f])):I>n?(f=h>f?-1E6:1E6,a.push([f,-1E6],[f,1E6])):(f=(h-f)*(r-g)>(l-h)*(g-e)?1E6:-1E6,e=Math.abs(m)-n,Math.abs(e)<I?a.push([0>m?f:-f,f]):(0<e&&(f*=-1),a.push([-1E6,f],[1E6,f])))}}),f)for(l=0;q>l;++l)f(n[l]);for(l=0;q>l;++l)n[l].point=a[l];return n}var f,e=null,g=oa,h=ra;return arguments.length?c(a):(c.x=function(a){return arguments.length?(g=a,c):g},c.y=function(a){return arguments.length?(h=a,c):h},c.size=function(a){return arguments.length?(null==a?f=null:(e=[+a[0],+a[1]],f=p.geom.polygon([[0,
0],[0,e[1]],e,[e[0],0]]).clip),c):e},c.links=function(a){var d,c,f,e=a.map(function(){return[]}),l=[],n=J(g),p=J(h),w=a.length;if(n===oa&&p===ra)d=a;else for(f=0;w>f;++f)d.push([+n.call(this,c=a[f],f),+p.call(this,c,f)]);return xc(d,function(d){var c=d.region.l.index;d=d.region.r.index;e[c][d]||(e[c][d]=e[d][c]=!0,l.push({source:a[c],target:a[d]}))}),l},c.triangles=function(a){if(g===oa&&h===ra)return p.geom.delaunay(a);var d,c,f,e,l,n=J(g),w=J(h);e=0;d=[];for(l=a.length;l>e;++e)c=[+n.call(this,f=
a[e],e),+w.call(this,f,e)],c.data=f,d.push(c);return p.geom.delaunay(d).map(function(a){return a.map(function(a){return a.data})})},c)};var yc={l:"r",r:"l"};p.geom.quadtree=function(a,c,f,e,g){function h(a){function d(a,c,f,e,g,m,h,l){if(!isNaN(f)&&!isNaN(e))if(a.leaf){var n=a.x,p=a.y;if(null!=n){if(!(0.01>Math.abs(n-f)+Math.abs(p-e))){var s=a.point;a.x=a.y=a.point=null;r(a,s,n,p,g,m,h,l)}r(a,c,f,e,g,m,h,l)}else a.x=f,a.y=e,a.point=c}else r(a,c,f,e,g,m,h,l)}function r(a,c,f,e,g,m,h,l){var n=0.5*(g+
h),p=0.5*(m+l),s=f>=n,w=e>=p,t=(w<<1)+s;a.leaf=!1;a=a.nodes[t]||(a.nodes[t]=Xd());s?g=n:h=n;w?m=p:l=p;d(a,c,f,e,g,m,h,l)}var s,q,u,y,A,z,H,L,F,v=J(n),x=J(p);if(null!=c)z=c,H=f,L=e,F=g;else if(L=F=-(z=H=1/0),q=[],u=[],A=a.length,l)for(y=0;A>y;++y)s=a[y],s.x<z&&(z=s.x),s.y<H&&(H=s.y),s.x>L&&(L=s.x),s.y>F&&(F=s.y),q.push(s.x),u.push(s.y);else for(y=0;A>y;++y){var T=+v(s=a[y],y);s=+x(s,y);z>T&&(z=T);H>s&&(H=s);T>L&&(L=T);s>F&&(F=s);q.push(T);u.push(s)}T=L-z;s=F-H;T>s?F=H+T:L=z+s;var E=Xd();if(E.add=function(a){d(E,
a,+v(a,++y),+x(a,y),z,H,L,F)},E.visit=function(a){Xa(a,E,z,H,L,F)},y=-1,null==c){for(;++y<A;)d(E,a[y],q[y],u[y],z,H,L,F);--y}else a.forEach(E.add);return q=u=a=s=null,E}var l,n=oa,p=ra;return(l=arguments.length)?(n=Kf,p=Lf,3===l&&(g=f,e=c,f=c=0),h(a)):(h.x=function(a){return arguments.length?(n=a,h):n},h.y=function(a){return arguments.length?(p=a,h):p},h.size=function(a){return arguments.length?(null==a?c=f=e=g=null:(c=f=0,e=+a[0],g=+a[1]),h):null==c?null:[e,g]},h)};p.interpolateRgb=zc;p.transform=
function(a){var c=ga.createElementNS(p.ns.prefix.svg,"g");return(p.transform=function(a){c.setAttribute("transform",a);a=c.transform.baseVal.consolidate();return new Yd(a?a.matrix:Vg)})(a)};Yd.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Vg={a:1,b:0,c:0,d:1,e:0,f:0};p.interpolateNumber=sa;p.interpolateTransform=ub;p.interpolateObject=$d;p.interpolateString=ae;var vb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;
p.interpolate=Da;p.interpolators=[function(a,c){var f=typeof c;return("string"===f||f!==typeof a?fb.has(c)||/^(#|rgb\(|hsl\()/.test(c)?zc:ae:c instanceof Ia?zc:"object"===f?Array.isArray(c)?be:$d:sa)(a,c)}];p.interpolateArray=be;var bf=function(){return ia},Wg=p.map({linear:bf,poly:function(a){return function(c){return Math.pow(c,a)}},quad:function(){return Nf},cubic:function(){return Of},sin:function(){return Pf},exp:function(){return Qf},circle:function(){return Rf},elastic:function(a,c){var f;
return 2>arguments.length&&(c=0.45),arguments.length?f=c/(2*C)*Math.asin(1/a):(a=1,f=c/4),function(e){return 1+a*Math.pow(2,10*-e)*Math.sin(2*(e-f)*C/c)}},back:function(a){return a||(a=1.70158),function(c){return c*c*((a+1)*c-a)}},bounce:function(){return Sf}}),Xg=p.map({"in":ia,out:ce,"in-out":de,"out-in":function(a){return de(ce(a))}});p.ease=function(a){var c=a.indexOf("-"),f=0<=c?a.substring(0,c):a,c=0<=c?a.substring(c+1):"in";return f=Wg.get(f)||bf,c=Xg.get(c)||ia,Mf(c(f.apply(null,Array.prototype.slice.call(arguments,
1))))};p.interpolateHcl=function(a,c){a=p.hcl(a);c=p.hcl(c);var f=a.h,e=a.c,g=a.l,h=c.h-f,l=c.c-e,n=c.l-g;return 180<h?h-=360:-180>h&&(h+=360),function(a){return Tb(f+h*a,e+l*a,g+n*a)+""}};p.interpolateHsl=function(a,c){a=p.hsl(a);c=p.hsl(c);var f=a.h,e=a.s,g=a.l,h=c.h-f,l=c.s-e,n=c.l-g;return 180<h?h-=360:-180>h&&(h+=360),function(a){return cb(f+h*a,e+l*a,g+n*a)+""}};p.interpolateLab=function(a,c){a=p.lab(a);c=p.lab(c);var f=a.l,e=a.a,g=a.b,h=c.l-f,l=c.a-e,n=c.b-g;return function(a){return jd(f+
h*a,e+l*a,g+n*a)+""}};p.interpolateRound=ee;p.layout={};p.layout.bundle=function(){return function(a){for(var c=[],f=-1,e=a.length;++f<e;)c.push(Vf(a[f]));return c}};p.layout.chord=function(){function a(){var d,q,v,K,y,A={},z=[],H=p.range(h),L=[];f=[];e=[];d=0;for(K=-1;++K<h;){q=0;for(y=-1;++y<h;)q+=g[K][y];z.push(q);L.push(p.range(h));d+=q}l&&H.sort(function(a,c){return l(z[a],z[c])});n&&L.forEach(function(a,c){a.sort(function(a,d){return n(g[c][a],g[c][d])})});d=(2*C-u*h)/d;q=0;for(K=-1;++K<h;){v=
q;for(y=-1;++y<h;){var F=H[K],Rb=L[F][y],x=g[F][Rb],E=q,Q=q+=x*d;A[F+"-"+Rb]={index:F,subindex:Rb,startAngle:E,endAngle:Q,value:x}}e[F]={index:F,startAngle:v,endAngle:q,value:(q-v)/d};q+=u}for(K=-1;++K<h;)for(y=K-1;++y<h;)d=A[K+"-"+y],q=A[y+"-"+K],(d.value||q.value)&&f.push(d.value<q.value?{source:q,target:d}:{source:d,target:q});s&&c()}function c(){f.sort(function(a,c){return s((a.source.value+a.target.value)/2,(c.source.value+c.target.value)/2)})}var f,e,g,h,l,n,s,q={},u=0;return q.matrix=function(a){return arguments.length?
(h=(g=a)&&g.length,f=e=null,q):g},q.padding=function(a){return arguments.length?(u=a,f=e=null,q):u},q.sortGroups=function(a){return arguments.length?(l=a,f=e=null,q):l},q.sortSubgroups=function(a){return arguments.length?(n=a,f=null,q):n},q.sortChords=function(a){return arguments.length?(s=a,f&&c(),q):s},q.chords=function(){return f||a(),f},q.groups=function(){return e||a(),e},q};p.layout.force=function(){function a(c){return function(a,d,f,e){if(a.point!==c){f=a.cx-c.x;var g=a.cy-c.y,m=1/Math.sqrt(f*
f+g*g);if(y>(e-d)*m)return d=a.charge*m*m,c.px-=f*d,c.py-=g*d,!0;a.point&&isFinite(m)&&(d=a.pointCharge*m*m,c.px-=f*d,c.py-=g*d)}return!a.charge}}function c(a){a.px=p.event.x;a.py=p.event.y;n.resume()}var f,e,g,h,l,n={},s=p.dispatch("start","tick","end"),q=[1,1],u=0.9,v=Yg,M=Zg,x=-30,K=0.1,y=0.8,A=[],z=[];return n.tick=function(){if(0.005>(e*=0.99))return s.end({type:"end",alpha:e=0}),!0;var c,f,n,t,w,y,v,M,aa=A.length,E=z.length;for(f=0;E>f;++f)n=z[f],c=n.source,t=n.target,v=t.x-c.x,M=t.y-c.y,(w=
v*v+M*M)&&(w=e*h[f]*((w=Math.sqrt(w))-g[f])/w,v*=w,M*=w,t.x-=v*(y=c.weight/(t.weight+c.weight)),t.y-=M*y,c.x+=v*(y=1-y),c.y+=M*y);if((y=e*K)&&(v=q[0]/2,M=q[1]/2,f=-1,y))for(;++f<aa;)n=A[f],n.x+=(v-n.x)*y,n.y+=(M-n.y)*y;if(x)for(ge(c=p.geom.quadtree(A),e,l),f=-1;++f<aa;)(n=A[f]).fixed||c.visit(a(n));for(f=-1;++f<aa;)n=A[f],n.fixed?(n.x=n.px,n.y=n.py):(n.x-=(n.px-(n.px=n.x))*u,n.y-=(n.py-(n.py=n.y))*u);s.tick({type:"tick",alpha:e})},n.nodes=function(a){return arguments.length?(A=a,n):A},n.links=function(a){return arguments.length?
(z=a,n):z},n.size=function(a){return arguments.length?(q=a,n):q},n.linkDistance=function(a){return arguments.length?(v="function"==typeof a?a:+a,n):v},n.distance=n.linkDistance,n.linkStrength=function(a){return arguments.length?(M="function"==typeof a?a:+a,n):M},n.friction=function(a){return arguments.length?(u=+a,n):u},n.charge=function(a){return arguments.length?(x="function"==typeof a?a:+a,n):x},n.gravity=function(a){return arguments.length?(K=+a,n):K},n.theta=function(a){return arguments.length?
(y=+a,n):y},n.alpha=function(a){return arguments.length?(a=+a,e?e=0<a?a:0:0<a&&(s.start({type:"start",alpha:e=a}),p.timer(n.tick)),n):e},n.start=function(){function a(e,g){var m,h;if(!f){f=[];for(d=0;p>d;++d)f[d]=[];for(d=0;s>d;++d)m=z[d],f[m.source.index].push(m.target),f[m.target.index].push(m.source)}h=f[c];for(var l=-1,n=h.length;++l<n;)if(!isNaN(m=h[l][e]))return m;return Math.random()*g}var c,d,f,e,p=A.length,s=z.length,w=q[0],D=q[1];for(c=0;p>c;++c)(e=A[c]).index=c,e.weight=0;for(c=0;s>c;++c)e=
z[c],"number"==typeof e.source&&(e.source=A[e.source]),"number"==typeof e.target&&(e.target=A[e.target]),++e.source.weight,++e.target.weight;for(c=0;p>c;++c)e=A[c],isNaN(e.x)&&(e.x=a("x",w)),isNaN(e.y)&&(e.y=a("y",D)),isNaN(e.px)&&(e.px=e.x),isNaN(e.py)&&(e.py=e.y);if(g=[],"function"==typeof v)for(c=0;s>c;++c)g[c]=+v.call(this,z[c],c);else for(c=0;s>c;++c)g[c]=v;if(h=[],"function"==typeof M)for(c=0;s>c;++c)h[c]=+M.call(this,z[c],c);else for(c=0;s>c;++c)h[c]=M;if(l=[],"function"==typeof x)for(c=0;p>
c;++c)l[c]=+x.call(this,A[c],c);else for(c=0;p>c;++c)l[c]=x;return n.resume()},n.resume=function(){return n.alpha(0.1)},n.stop=function(){return n.alpha(0)},n.drag=function(){return f||(f=p.behavior.drag().origin(ia).on("dragstart.force",Wf).on("drag.force",c).on("dragend.force",Xf)),arguments.length?(this.on("mouseover.force",Yf).on("mouseout.force",Zf).call(f),void 0):f},p.rebind(n,s,"on")};var Yg=20,Zg=1;p.layout.hierarchy=function(){function a(c,l,n){var p=g.call(f,c,l);if(c.depth=l,n.push(c),
p&&(s=p.length)){for(var s,q=-1,w=c.children=[],u=0,K=l+1;++q<s;)l=a(p[q],K,n),l.parent=c,w.push(l),u+=l.value;e&&w.sort(e);h&&(c.value=u)}else h&&(c.value=+h.call(f,c,l)||0);return c}function c(a,d){var e=a.children,g=0;if(e&&(m=e.length))for(var m,l=-1,n=d+1;++l<m;)g+=c(e[l],n);else h&&(g=+h.call(f,a,d)||0);return h&&(a.value=g),g}function f(c){var f=[];return a(c,0,f),f}var e=cg,g=ag,h=bg;return f.sort=function(a){return arguments.length?(e=a,f):e},f.children=function(a){return arguments.length?
(g=a,f):g},f.value=function(a){return arguments.length?(h=a,f):h},f.revalue=function(a){return c(a,0),a},f};p.layout.partition=function(){function a(c,f,e,g){var m=c.children;if(c.x=f,c.y=c.depth*g,c.dx=e,c.dy=g,m&&(h=m.length)){var h,l,n=-1;for(e=c.value?e/c.value:0;++n<h;)a(l=m[n],f,c=l.value*e,g),f+=c}}function c(a){a=a.children;var d=0;if(a&&(f=a.length))for(var f,e=-1;++e<f;)d=Math.max(d,c(a[e]));return 1+d}function f(f,h){var l=e.call(this,f,h);return a(l[0],0,g[0],g[1]/c(l[0])),l}var e=p.layout.hierarchy(),
g=[1,1];return f.size=function(a){return arguments.length?(g=a,f):g},Ya(f,e)};p.layout.pie=function(){function a(h){var l=h.map(function(f,e){return+c.call(a,f,e)}),n=+("function"==typeof e?e.apply(this,arguments):e),s=(("function"==typeof g?g.apply(this,arguments):g)-n)/p.sum(l),q=p.range(h.length);null!=f&&q.sort(f===cf?function(a,c){return l[c]-l[a]}:function(a,c){return f(h[a],h[c])});var u=[];return q.forEach(function(a){var c;u[a]={data:h[a],value:c=l[a],startAngle:n,endAngle:n+=c*s}}),u}var c=
Number,f=cf,e=0,g=2*C;return a.value=function(f){return arguments.length?(c=f,a):c},a.sort=function(c){return arguments.length?(f=c,a):f},a.startAngle=function(c){return arguments.length?(e=c,a):e},a.endAngle=function(c){return arguments.length?(g=c,a):g},a};var cf={};p.layout.stack=function(){function a(n,s){var q=n.map(function(f,e){return c.call(a,f,e)}),u=q.map(function(c){return c.map(function(c,f){return[h.call(a,c,f),l.call(a,c,f)]})}),v=f.call(a,u,s),q=p.permute(q,v),u=p.permute(u,v),M,x,
K=e.call(a,u,s),y=q.length,A=q[0].length;for(M=0;A>M;++M)for(g.call(a,q[0][M],x=K[M],u[0][M][1]),v=1;y>v;++v)g.call(a,q[v][M],x+=u[v-1][M][1],u[v][M][1]);return n}var c=ia,f=Ac,e=Bc,g=fg,h=dg,l=eg;return a.values=function(f){return arguments.length?(c=f,a):c},a.order=function(c){return arguments.length?(f="function"==typeof c?c:$g.get(c)||Ac,a):f},a.offset=function(c){return arguments.length?(e="function"==typeof c?c:ah.get(c)||Bc,a):e},a.x=function(c){return arguments.length?(h=c,a):h},a.y=function(c){return arguments.length?
(l=c,a):l},a.out=function(c){return arguments.length?(g=c,a):g},a};var $g=p.map({"inside-out":function(a){var c,f=a.length,e=a.map(gg),g=a.map(hg),h=p.range(f).sort(function(a,c){return e[a]-e[c]}),l=0,n=0,s=[],q=[];for(a=0;f>a;++a)c=h[a],n>l?(l+=g[c],s.push(c)):(n+=g[c],q.push(c));return q.reverse().concat(s)},reverse:function(a){return p.range(a.length).reverse()},"default":Ac}),ah=p.map({silhouette:function(a){var c,f,e,g=a.length,h=a[0].length,l=[],n=0,p=[];for(f=0;h>f;++f){for(e=c=0;g>c;c++)e+=
a[c][f][1];e>n&&(n=e);l.push(e)}for(f=0;h>f;++f)p[f]=(n-l[f])/2;return p},wiggle:function(a){var c,f,e,g,h,l,n,p,s,q=a.length,u=a[0],v=u.length,x=[];x[0]=p=s=0;for(f=1;v>f;++f){for(g=c=0;q>c;++c)g+=a[c][f][1];h=c=0;for(n=u[f][0]-u[f-1][0];q>c;++c){e=0;for(l=(a[c][f][1]-a[c][f-1][1])/(2*n);c>e;++e)l+=(a[e][f][1]-a[e][f-1][1])/n;h+=l*a[c][f][1]}x[f]=p-=g?h/g*n:0;s>p&&(s=p)}for(f=0;v>f;++f)x[f]-=s;return x},expand:function(a){var c,f,e,g=a.length,h=a[0].length,l=1/g,n=[];for(f=0;h>f;++f){for(e=c=0;g>
c;c++)e+=a[c][f][1];if(e)for(c=0;g>c;c++)a[c][f][1]/=e;else for(c=0;g>c;c++)a[c][f][1]=l}for(f=0;h>f;++f)n[f]=0;return n},zero:Bc});p.layout.histogram=function(){function a(d,h){var l,n,s=[],q=d.map(f,this),u=e.call(this,q,h),v=g.call(this,u,q,h);h=-1;for(var x=q.length,K=v.length-1,y=c?1:1/x;++h<K;)l=s[h]=[],l.dx=v[h+1]-(l.x=v[h]),l.y=0;if(0<K)for(h=-1;++h<x;)n=q[h],n>=u[0]&&n<=u[1]&&(l=s[p.bisect(v,n,1,K)-1],l.y+=y,l.push(d[h]));return s}var c=!0,f=Number,e=kg,g=jg;return a.value=function(c){return arguments.length?
(f=c,a):f},a.range=function(c){return arguments.length?(e=J(c),a):e},a.bins=function(c){return arguments.length?(g="number"==typeof c?function(a){return he(a,c)}:J(c),a):g},a.frequency=function(f){return arguments.length?(c=!!f,a):c},a};p.layout.tree=function(){function a(d,g){function h(a,c){var d=a.children,e=a._tree;if(d&&(g=d.length)){for(var g,m,l,n=d[0],r=n,p=-1;++p<g;){l=d[p];h(l,m);var s=l;if(m){for(var q=void 0,w=s,t=s,u=s.parent.children[0],D=w._tree.mod,v=t._tree.mod,y=m._tree.mod,K=u._tree.mod;m=
Dc(m),w=Cc(w),m&&w;){u=Cc(u);t=Dc(t);t._tree.ancestor=s;q=m._tree.prelim+y-w._tree.prelim-D+f(m,w);if(0<q){var x=m._tree.ancestor.parent==s.parent?m._tree.ancestor:r,O=s,M=q,x=x._tree,O=O._tree,va=M/(O.number-x.number);x.change+=va;O.change-=va;O.shift+=M;O.prelim+=M;O.mod+=M;D+=q;v+=q}y+=m._tree.mod;D+=w._tree.mod;K+=u._tree.mod;v+=t._tree.mod}m&&!Dc(t)&&(t._tree.thread=m,t._tree.mod+=y-v);w&&!Cc(u)&&(u._tree.thread=w,u._tree.mod+=D-K,r=s)}m=l}p=g=0;s=a.children;for(r=s.length;0<=--r;)d=s[r]._tree,
d.prelim+=g,d.mod+=g,g+=d.shift+(p+=d.change);l=0.5*(n._tree.prelim+l._tree.prelim);c?(e.prelim=c._tree.prelim+f(a,c),e.mod=e.prelim-l):e.prelim=l}else c&&(e.prelim=c._tree.prelim+f(a,c))}function l(a,c){a.x=a._tree.prelim+c;var d=a.children;if(d&&(f=d.length)){var f,e=-1;for(c+=a._tree.mod;++e<f;)l(d[e],c)}}var n=c.call(this,d,g),p=n[0];ta(p,function(a,c){a._tree={ancestor:a,prelim:0,mod:0,change:0,shift:0,number:c?c._tree.number+1:0}});h(p);l(p,-p._tree.prelim);var s=wb(p,mg),q=wb(p,lg),u=wb(p,
ng),v=s.x-f(s,q)/2,K=q.x+f(q,s)/2,y=u.depth||1;return ta(p,function(a){a.x=(a.x-v)/(K-v)*e[0];a.y=a.depth/y*e[1];delete a._tree}),n}var c=p.layout.hierarchy().sort(null).value(null),f=ie,e=[1,1];return a.separation=function(c){return arguments.length?(f=c,a):f},a.size=function(c){return arguments.length?(e=c,a):e},Ya(a,c)};p.layout.pack=function(){function a(d,g){var h=c.call(this,d,g),l=h[0];l.x=0;l.y=0;ta(l,function(a){a.r=Math.sqrt(a.value)});ta(l,le);var n=e[0],p=e[1],s=Math.max(2*l.r/n,2*l.r/
p);if(0<f){var q=f*s/2;ta(l,function(a){a.r+=q});ta(l,le);ta(l,function(a){a.r-=q});s=Math.max(2*l.r/n,2*l.r/p)}return ne(l,n/2,p/2,1/s),h}var c=p.layout.hierarchy().sort(og),f=0,e=[1,1];return a.size=function(c){return arguments.length?(e=c,a):e},a.padding=function(c){return arguments.length?(f=+c,a):f},Ya(a,c)};p.layout.cluster=function(){function a(d,g){var h,l=c.call(this,d,g),n=l[0],p=0;ta(n,function(a){var c=a.children;c&&c.length?(a.x=sg(c),a.y=rg(c)):(a.x=h?p+=f(a,h):0,a.y=0,h=a)});var s=
oe(n),q=pe(n),u=s.x-f(s,q)/2,v=q.x+f(q,s)/2;return ta(n,function(a){a.x=(a.x-u)/(v-u)*e[0];a.y=(1-(n.y?a.y/n.y:1))*e[1]}),l}var c=p.layout.hierarchy().sort(null).value(null),f=ie,e=[1,1];return a.separation=function(c){return arguments.length?(f=c,a):f},a.size=function(c){return arguments.length?(e=c,a):e},Ya(a,c)};p.layout.treemap=function(){function a(c,d){for(var f,e,g=-1,h=c.length;++g<h;)e=(f=c[g]).value*(0>d?0:d),f.area=isNaN(e)||0>=e?0:e}function c(f){var g=f.children;if(g&&g.length){var h,
m=u(f),l=[],n=g.slice(),p=1/0,r="slice"===x?m.dx:"dice"===x?m.dy:"slice-dice"===x?f.depth&1?m.dy:m.dx:Math.min(m.dx,m.dy);a(n,m.dx*m.dy/f.value);for(l.area=0;0<(f=n.length);){l.push(f=n[f-1]);l.area+=f.area;var s;if(!(s="squarify"!==x)){f=r;h=void 0;var q=l.area;s=0;for(var t=1/0,B=-1,v=l.length;++B<v;)(h=l[B].area)&&(t>h&&(t=h),h>s&&(s=h));s=(h=(q*=q,f*=f,q?Math.max(f*s*E/q,q/(f*t*E)):1/0))<=p}s?(n.pop(),p=h):(l.area-=l.pop().area,e(l,r,m,!1),r=Math.min(m.dx,m.dy),l.length=l.area=0,p=1/0)}l.length&&
(e(l,r,m,!0),l.length=l.area=0);g.forEach(c)}}function f(c){var g=c.children;if(g&&g.length){var h=u(c),m=g.slice(),l=[];a(m,h.dx*h.dy/c.value);for(l.area=0;c=m.pop();)l.push(c),l.area+=c.area,null!=c.z&&(e(l,c.z?h.dx:h.dy,h,!m.length),l.length=l.area=0);g.forEach(f)}}function e(a,c,d,f){var g,h=-1,m=a.length,l=d.x,p=d.y,r=c?n(a.area/c):0;if(c==d.dx){for((f||r>d.dy)&&(r=d.dy);++h<m;)g=a[h],g.x=l,g.y=p,g.dy=r,l+=g.dx=Math.min(d.x+d.dx-l,r?n(g.area/r):0);g.z=!0;g.dx+=d.x+d.dx-l;d.y+=r;d.dy-=r}else{for((f||
r>d.dx)&&(r=d.dx);++h<m;)g=a[h],g.x=l,g.y=p,g.dx=r,p+=g.dy=Math.min(d.y+d.dy-p,r?n(g.area/r):0);g.z=!1;g.dy+=d.y+d.dy-p;d.x+=r;d.dx-=r}}function g(e){e=h||l(e);var m=e[0];return m.x=0,m.y=0,m.dx=s[0],m.dy=s[1],h&&l.revalue(m),a([m],m.dx*m.dy/m.value),(h?f:c)(m),v&&(h=e),e}var h,l=p.layout.hierarchy(),n=Math.round,s=[1,1],q=null,u=Fc,v=!1,x="squarify",E=0.5*(1+Math.sqrt(5));return g.size=function(a){return arguments.length?(s=a,g):s},g.padding=function(a){function c(d){var f=a.call(g,d,d.depth);return null==
f?Fc(d):qe(d,"number"==typeof f?[f,f,f,f]:f)}function d(c){return qe(c,a)}if(!arguments.length)return q;var f;return u=null==(q=a)?Fc:"function"==(f=typeof a)?c:"number"===f?(a=[a,a,a,a],d):d,g},g.round=function(a){return arguments.length?(n=a?Math.round:Number,g):n!=Number},g.sticky=function(a){return arguments.length?(v=a,h=null,g):v},g.ratio=function(a){return arguments.length?(E=a,g):E},g.mode=function(a){return arguments.length?(x=a+"",g):x},Ya(g,l)};p.random={normal:function(a,c){var f=arguments.length;
return 2>f&&(c=1),1>f&&(a=0),function(){var f,e;do f=2*Math.random()-1,e=2*Math.random()-1,e=f*f+e*e;while(!e||1<e);return a+c*f*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var a=p.random.normal.apply(p,arguments);return function(){return Math.exp(a())}},irwinHall:function(a){return function(){for(var c=0,f=0;a>f;f++)c+=Math.random();return c/a}}};p.scale={};p.scale.linear=function(){return re([0,1],[0,1],Da,!1)};p.scale.log=function(){return we(p.scale.linear().domain([0,Math.LN10]),10,xe,
ye)};var xg=p.format(".0e");p.scale.pow=function(){return ze(p.scale.linear(),1)};p.scale.sqrt=function(){return p.scale.pow().exponent(0.5)};p.scale.ordinal=function(){return Ae([],{t:"range",a:[[]]})};p.scale.category10=function(){return p.scale.ordinal().range(bh)};p.scale.category20=function(){return p.scale.ordinal().range(ch)};p.scale.category20b=function(){return p.scale.ordinal().range(dh)};p.scale.category20c=function(){return p.scale.ordinal().range(eh)};var bh="#1f77b4 #ff7f0e #2ca02c #d62728 #9467bd #8c564b #e377c2 #7f7f7f #bcbd22 #17becf".split(" "),
ch="#1f77b4 #aec7e8 #ff7f0e #ffbb78 #2ca02c #98df8a #d62728 #ff9896 #9467bd #c5b0d5 #8c564b #c49c94 #e377c2 #f7b6d2 #7f7f7f #c7c7c7 #bcbd22 #dbdb8d #17becf #9edae5".split(" "),dh="#393b79 #5254a3 #6b6ecf #9c9ede #637939 #8ca252 #b5cf6b #cedb9c #8c6d31 #bd9e39 #e7ba52 #e7cb94 #843c39 #ad494a #d6616b #e7969c #7b4173 #a55194 #ce6dbd #de9ed6".split(" "),eh="#3182bd #6baed6 #9ecae1 #c6dbef #e6550d #fd8d3c #fdae6b #fdd0a2 #31a354 #74c476 #a1d99b #c7e9c0 #756bb1 #9e9ac8 #bcbddc #dadaeb #636363 #969696 #bdbdbd #d9d9d9".split(" ");
p.scale.quantile=function(){return Be([],[])};p.scale.quantize=function(){return Ce(0,1,[0,1])};p.scale.threshold=function(){return De([0.5],[0,1])};p.scale.identity=function(){return Ee([0,1])};p.svg.arc=function(){function a(){var d=c.apply(this,arguments),h=f.apply(this,arguments),l=e.apply(this,arguments)+Ea,n=g.apply(this,arguments)+Ea,p=(l>n&&(p=l,l=n,n=p),n-l),s=C>p?"0":"1",q=Math.cos(l),l=Math.sin(l),u=Math.cos(n),n=Math.sin(n);return p>=fh?d?"M0,"+h+"A"+h+","+h+" 0 1,1 0,"+-h+"A"+h+","+h+
" 0 1,1 0,"+h+"M0,"+d+"A"+d+","+d+" 0 1,0 0,"+-d+"A"+d+","+d+" 0 1,0 0,"+d+"Z":"M0,"+h+"A"+h+","+h+" 0 1,1 0,"+-h+"A"+h+","+h+" 0 1,1 0,"+h+"Z":d?"M"+h*q+","+h*l+"A"+h+","+h+" 0 "+s+",1 "+h*u+","+h*n+"L"+d*u+","+d*n+"A"+d+","+d+" 0 "+s+",0 "+d*q+","+d*l+"Z":"M"+h*q+","+h*l+"A"+h+","+h+" 0 "+s+",1 "+h*u+","+h*n+"L0,0Z"}var c=yg,f=zg,e=Fe,g=Ge;return a.innerRadius=function(f){return arguments.length?(c=J(f),a):c},a.outerRadius=function(c){return arguments.length?(f=J(c),a):f},a.startAngle=function(c){return arguments.length?
(e=J(c),a):e},a.endAngle=function(c){return arguments.length?(g=J(c),a):g},a.centroid=function(){var a=(c.apply(this,arguments)+f.apply(this,arguments))/2,d=(e.apply(this,arguments)+g.apply(this,arguments))/2+Ea;return[Math.cos(d)*a,Math.sin(d)*a]},a};var Ea=-C/2,fh=2*C-1E-6;p.svg.line.radial=function(){var a=Sd(He);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a};sc.reverse=tc;tc.reverse=sc;p.svg.area=function(){return Ie(ia)};p.svg.area.radial=function(){var a=Ie(He);return a.radius=a.x,
delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a};p.svg.chord=function(){function a(d,g){var h=c(this,f,d,g),m=c(this,e,d,g);return"M"+h.p0+("A"+h.r+","+h.r+" 0 "+ +(h.a1-h.a0>C)+",1 "+h.p1)+(h.a0==m.a0&&h.a1==m.a1?"Q 0,0 "+h.p0:"Q 0,0 "+m.p0+("A"+m.r+","+m.r+" 0 "+ +(m.a1-m.a0>C)+",1 "+m.p1)+("Q 0,0 "+h.p0))+"Z"}function c(a,d,f,e){var n=d.call(a,f,e);d=g.call(a,n,e);f=h.call(a,n,e)+Ea;a=l.call(a,
n,e)+Ea;return{r:d,a0:f,a1:a,p0:[d*Math.cos(f),d*Math.sin(f)],p1:[d*Math.cos(a),d*Math.sin(a)]}}var f=lc,e=mc,g=Ag,h=Fe,l=Ge;return a.radius=function(c){return arguments.length?(g=J(c),a):g},a.source=function(c){return arguments.length?(f=J(c),a):f},a.target=function(c){return arguments.length?(e=J(c),a):e},a.startAngle=function(c){return arguments.length?(h=J(c),a):h},a.endAngle=function(c){return arguments.length?(l=J(c),a):l},a};p.svg.diagonal=function(){function a(d,g){var h=c.call(this,d,g),
l=f.call(this,d,g),n=(h.y+l.y)/2,h=[h,{x:h.x,y:n},{x:l.x,y:n},l];return h=h.map(e),"M"+h[0]+"C"+h[1]+" "+h[2]+" "+h[3]}var c=lc,f=mc,e=Je;return a.source=function(f){return arguments.length?(c=J(f),a):c},a.target=function(c){return arguments.length?(f=J(c),a):f},a.projection=function(c){return arguments.length?(e=c,a):e},a};p.svg.diagonal.radial=function(){var a=p.svg.diagonal(),c=Je,f=a.projection;return a.projection=function(a){return arguments.length?f(Bg(c=a)):c},a};p.svg.symbol=function(){function a(d,
e){return(df.get(c.call(this,d,e))||Ke)(f.call(this,d,e))}var c=Dg,f=Cg;return a.type=function(f){return arguments.length?(c=J(f),a):c},a.size=function(c){return arguments.length?(f=J(c),a):f},a};var df=p.map({circle:Ke,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*ef));var c=a*ef;return"M0,"+-a+"L"+c+",0 0,"+a+" "+-c+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+
-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/Mb);var c=a*Mb/2;return"M0,"+c+"L"+a+","+-c+" "+-a+","+-c+"Z"},"triangle-up":function(a){a=Math.sqrt(a/Mb);var c=a*Mb/2;return"M0,"+-c+"L"+a+","+c+" "+-a+","+c+"Z"}});p.svg.symbolTypes=df.keys();var bb,Mb=Math.sqrt(3),ef=Math.tan(30*G),Z=[],Ue=0,Fb={ease:function(a){if(0>=a)return 0;if(1<=a)return 1;var c=a*a,f=c*a;return 4*(0.5>a?f:3*(a-c)+f-0.75)},delay:0,duration:250};Z.call=R.call;Z.empty=R.empty;Z.node=
R.node;p.transition=function(a){return arguments.length?bb?a.transition():a:ab.transition()};p.transition.prototype=Z;Z.select=function(a){var c,f,e,g=this.id,h=[];"function"!=typeof a&&(a=P(a));for(var l=-1,n=this.length;++l<n;){h.push(c=[]);for(var p=this[l],s=-1,q=p.length;++s<q;)(e=p[s])&&(f=a.call(e,e.__data__,s))?("__data__"in e&&(f.__data__=e.__data__),Ab(f,s,g,e.__transition__[g]),c.push(f)):c.push(null)}return $a(h,g)};Z.selectAll=function(a){var c,f,e,g,h=this.id,l=[];"function"!=typeof a&&
(a=S(a));for(var n=-1,p=this.length;++n<p;)for(var s=this[n],q=-1,u=s.length;++q<u;)if(c=s[q]){g=c.__transition__[h];f=a.call(c,c.__data__,q);l.push(c=[]);for(var v=-1,x=f.length;++v<x;)Ab(e=f[v],v,h,g),c.push(e)}return $a(l,h)};Z.filter=function(a){var c,f,e,g=[];"function"!=typeof a&&(a=dd(a));for(var h=0,l=this.length;l>h;h++){g.push(c=[]);f=this[h];for(var n=0,p=f.length;p>n;n++)(e=f[n])&&a.call(e,e.__data__,n)&&c.push(e)}return $a(g,this.id,this.time).ease(this.ease())};Z.tween=function(a,c){var f=
this.id;return 2>arguments.length?this.node().__transition__[f].tween.get(a):xa(this,null==c?function(c){c.__transition__[f].tween.remove(a)}:function(e){e.__transition__[f].tween.set(a,c)})};Z.attr=function(a,c){function f(){this.removeAttribute(h)}function e(){this.removeAttributeNS(h.space,h.local)}if(2>arguments.length){for(c in a)this.attr(c,a[c]);return this}var g="transform"==a?ub:Da,h=p.ns.qualify(a);return Jc(this,"attr."+a,c,function(a){function c(){var d,f=this.getAttribute(h);return f!==
a&&(d=g(f,a),function(a){this.setAttribute(h,d(a))})}function d(){var c,f=this.getAttributeNS(h.space,h.local);return f!==a&&(c=g(f,a),function(a){this.setAttributeNS(h.space,h.local,c(a))})}return null==a?h.local?e:f:(a+="",h.local?d:c)})};Z.attrTween=function(a,c){function f(a,d){var f=c.call(this,a,d,this.getAttribute(g));return f&&function(a){this.setAttribute(g,f(a))}}function e(a,d){var f=c.call(this,a,d,this.getAttributeNS(g.space,g.local));return f&&function(a){this.setAttributeNS(g.space,
g.local,f(a))}}var g=p.ns.qualify(a);return this.tween("attr."+a,g.local?e:f)};Z.style=function(a,c,f){function e(){this.style.removeProperty(a)}var g=arguments.length;if(3>g){if("string"!=typeof a){2>g&&(c="");for(f in a)this.style(f,a[f],c);return this}f=""}var h="transform"==a?ub:Da;return Jc(this,"style."+a,c,function(c){function g(){var e,m=ca.getComputedStyle(this,null).getPropertyValue(a);return m!==c&&(e=h(m,c),function(c){this.style.setProperty(a,e(c),f)})}return null==c?e:(c+="",g)})};Z.styleTween=
function(a,c,f){return 3>arguments.length&&(f=""),this.tween("style."+a,function(e,g){var h=c.call(this,e,g,ca.getComputedStyle(this,null).getPropertyValue(a));return h&&function(c){this.style.setProperty(a,h(c),f)}})};Z.text=function(a){return Jc(this,"text",a,Eg)};Z.remove=function(){return this.each("end.transition",function(){var a;!this.__transition__&&(a=this.parentNode)&&a.removeChild(this)})};Z.ease=function(a){var c=this.id;return 1>arguments.length?this.node().__transition__[c].ease:("function"!=
typeof a&&(a=p.ease.apply(p,arguments)),xa(this,function(f){f.__transition__[c].ease=a}))};Z.delay=function(a){var c=this.id;return xa(this,"function"==typeof a?function(f,e,g){f.__transition__[c].delay=a.call(f,f.__data__,e,g)|0}:(a|=0,function(f){f.__transition__[c].delay=a}))};Z.duration=function(a){var c=this.id;return xa(this,"function"==typeof a?function(f,e,g){f.__transition__[c].duration=Math.max(1,a.call(f,f.__data__,e,g)|0)}:(a=Math.max(1,0|a),function(f){f.__transition__[c].duration=a}))};
Z.each=function(a,c){var f=this.id;if(2>arguments.length){var e=Fb,g=bb;bb=f;xa(this,function(c,e,g){Fb=c.__transition__[f];a.call(c,c.__data__,e,g)});Fb=e;bb=g}else xa(this,function(e){e.__transition__[f].event.on(a,c)});return this};Z.transition=function(){for(var a,c,f,e,g=this.id,h=++Ue,l=[],n=0,p=this.length;p>n;n++){l.push(a=[]);c=this[n];for(var s=0,q=c.length;q>s;s++)(f=c[s])&&(e=Object.create(f.__transition__[g]),e.delay+=e.duration,Ab(f,s,h,e)),a.push(f)}return $a(l,h)};p.svg.axis=function(){function a(d){d.each(function(){var a,
d=p.select(this),v=null==q?f.ticks?f.ticks.apply(f,s):f.domain():q,x=null==c?f.tickFormat?f.tickFormat.apply(f,s):String:c,A=Fg(f,v,u),z=d.selectAll(".tick.minor").data(A,String),A=z.enter().insert("line",".tick").attr("class","tick minor").style("opacity",1E-6),E=p.transition(z.exit()).style("opacity",1E-6).remove(),z=p.transition(z).style("opacity",1),Q=d.selectAll(".tick.major").data(v,String),v=Q.enter().insert("g","path").attr("class","tick major").style("opacity",1E-6),C=p.transition(Q.exit()).style("opacity",
1E-6).remove(),aa=p.transition(Q).style("opacity",1),G=xb(f),d=d.selectAll(".domain").data([0]),d=(d.enter().append("path").attr("class","domain"),p.transition(d)),I=f.copy(),P=this.__chart__||I;this.__chart__=I;v.append("line");v.append("text");var N=v.select("line"),J=aa.select("line"),x=Q.select("text").text(x),Q=v.select("text"),R=aa.select("text");switch(e){case "bottom":a=Le;A.attr("y2",h);z.attr("x2",0).attr("y2",h);N.attr("y2",g);Q.attr("y",Math.max(g,0)+n);J.attr("x2",0).attr("y2",g);R.attr("x",
0).attr("y",Math.max(g,0)+n);x.attr("dy",".71em").style("text-anchor","middle");d.attr("d","M"+G[0]+","+l+"V0H"+G[1]+"V"+l);break;case "top":a=Le;A.attr("y2",-h);z.attr("x2",0).attr("y2",-h);N.attr("y2",-g);Q.attr("y",-(Math.max(g,0)+n));J.attr("x2",0).attr("y2",-g);R.attr("x",0).attr("y",-(Math.max(g,0)+n));x.attr("dy","0em").style("text-anchor","middle");d.attr("d","M"+G[0]+","+-l+"V0H"+G[1]+"V"+-l);break;case "left":a=Me;A.attr("x2",-h);z.attr("x2",-h).attr("y2",0);N.attr("x2",-g);Q.attr("x",-(Math.max(g,
0)+n));J.attr("x2",-g).attr("y2",0);R.attr("x",-(Math.max(g,0)+n)).attr("y",0);x.attr("dy",".32em").style("text-anchor","end");d.attr("d","M"+-l+","+G[0]+"H0V"+G[1]+"H"+-l);break;case "right":a=Me,A.attr("x2",h),z.attr("x2",h).attr("y2",0),N.attr("x2",g),Q.attr("x",Math.max(g,0)+n),J.attr("x2",g).attr("y2",0),R.attr("x",Math.max(g,0)+n).attr("y",0),x.attr("dy",".32em").style("text-anchor","start"),d.attr("d","M"+l+","+G[0]+"H0V"+G[1]+"H"+l)}if(f.ticks)v.call(a,P),aa.call(a,I),C.call(a,I),A.call(a,
P),z.call(a,I),E.call(a,I);else{var S=I.rangeBand()/2,A=function(a){return I(a)+S};v.call(a,A);aa.call(a,A)}})}var c,f=p.scale.linear(),e=ff,g=6,h=6,l=6,n=3,s=[10],q=null,u=0;return a.scale=function(c){return arguments.length?(f=c,a):f},a.orient=function(c){return arguments.length?(e=c in gh?c+"":ff,a):e},a.ticks=function(){return arguments.length?(s=arguments,a):s},a.tickValues=function(c){return arguments.length?(q=c,a):q},a.tickFormat=function(f){return arguments.length?(c=f,a):c},a.tickSize=function(c,
f){if(!arguments.length)return g;var e=arguments.length-1;return g=+c,h=1<e?+f:g,l=0<e?+arguments[e]:g,a},a.tickPadding=function(c){return arguments.length?(n=+c,a):n},a.tickSubdivide=function(c){return arguments.length?(u=+c,a):u},a};var ff="bottom",gh={top:1,right:1,bottom:1,left:1};p.svg.brush=function(){function a(h){h.each(function(){var h,l=p.select(this),s=l.selectAll(".background").data([0]),r=l.selectAll(".extent").data([0]),x=l.selectAll(".resize").data(u,String);l.style("pointer-events",
"all").on("mousedown.brush",g).on("touchstart.brush",g);s.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");r.enter().append("rect").attr("class","extent").style("cursor","move");x.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return hh[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility",
"hidden");x.style("display",a.empty()?"none":null);x.exit().remove();n&&(h=xb(n),s.attr("x",h[0]).attr("width",h[1]-h[0]),f(l));q&&(h=xb(q),s.attr("y",h[0]).attr("height",h[1]-h[0]),e(l));c(l)})}function c(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+x[+/e$/.test(a)][0]+","+x[+/^s/.test(a)][1]+")"})}function f(a){a.select(".extent").attr("x",x[0][0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",x[1][0]-x[0][0])}function e(a){a.select(".extent").attr("y",x[0][1]);
a.selectAll(".extent,.e>rect,.w>rect").attr("height",x[1][1]-x[0][1])}function g(){function m(){var a=p.event.changedTouches;return a?p.touches(z,a)[0]:p.mouse(z)}function u(){var a=m(),d=!1;A&&(a[0]+=A[0],a[1]+=A[1]);N||(p.event.altKey?(y||(y=[(x[0][0]+x[1][0])/2,(x[0][1]+x[1][1])/2]),J[0]=x[+(a[0]<y[0])][0],J[1]=x[+(a[1]<y[1])][1]):y=null);I&&v(a,n,0)&&(f(F),d=!0);P&&v(a,q,1)&&(e(F),d=!0);d&&(c(F),C({type:"brush",mode:N?"move":"resize"}))}function v(a,c,d){var f,e,g=xb(c);c=g[0];var g=g[1],l=J[d],
m=x[1][d]-x[0][d];return N&&(c-=l,g-=m+l),f=Math.max(c,Math.min(g,a[d])),N?e=(f+=l)+m:(y&&(l=Math.max(c,Math.min(g,2*y[d]-f))),f>l?(e=f,f=l):e=l),x[0][d]!==f||x[1][d]!==e?(h=null,x[0][d]=f,x[1][d]=e,!0):void 0}function E(){u();F.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);p.select("body").style("cursor",null);R.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",
null);C({type:"brushend"});s()}var y,A,z=this,Q=p.select(p.event.target),C=l.of(z,arguments),F=p.select(z),G=Q.datum(),I=!/^(n|s)$/.test(G)&&n,P=!/^(e|w)$/.test(G)&&q,N=Q.classed("extent"),J=m(),R=p.select(ca).on("mousemove.brush",u).on("mouseup.brush",E).on("touchmove.brush",u).on("touchend.brush",E).on("keydown.brush",function(){32==p.event.keyCode&&(N||(y=null,J[0]-=x[1][0],J[1]-=x[1][1],N=2),s())}).on("keyup.brush",function(){32==p.event.keyCode&&2==N&&(J[0]+=x[1][0],J[1]+=x[1][1],N=0,s())});
if(N)J[0]=x[0][0]-J[0],J[1]=x[0][1]-J[1];else if(G){var S=+/w$/.test(G),G=+/^n/.test(G);A=[x[1-S][0]-J[0],x[1-G][1]-J[1]];J[0]=x[S][0];J[1]=x[G][1]}else p.event.altKey&&(y=J.slice());F.style("pointer-events","none").selectAll(".resize").style("display",null);p.select("body").style("cursor",Q.style("cursor"));C({type:"brushstart"});u();s()}var h,l=v(a,"brushstart","brush","brushend"),n=null,q=null,u=Uc[0],x=[[0,0],[0,0]];return a.x=function(c){return arguments.length?(n=c,u=Uc[!n<<1|!q],a):n},a.y=
function(c){return arguments.length?(q=c,u=Uc[!n<<1|!q],a):q},a.extent=function(c){var f,e,g,l,m;return arguments.length?(h=[[0,0],[0,0]],n&&(f=c[0],e=c[1],q&&(f=f[0],e=e[0]),h[0][0]=f,h[1][0]=e,n.invert&&(f=n(f),e=n(e)),f>e&&(m=f,f=e,e=m),x[0][0]=0|f,x[1][0]=0|e),q&&(g=c[0],l=c[1],n&&(g=g[1],l=l[1]),h[0][1]=g,h[1][1]=l,q.invert&&(g=q(g),l=q(l)),g>l&&(m=g,g=l,l=m),x[0][1]=0|g,x[1][1]=0|l),a):(c=h||x,n&&(f=c[0][0],e=c[1][0],h||(f=x[0][0],e=x[1][0],n.invert&&(f=n.invert(f),e=n.invert(e)),f>e&&(m=f,
f=e,e=m))),q&&(g=c[0][1],l=c[1][1],h||(g=x[0][1],l=x[1][1],q.invert&&(g=q.invert(g),l=q.invert(l)),g>l&&(m=g,g=l,l=m))),n&&q?[[f,g],[e,l]]:n?[f,e]:q&&[g,l])},a.clear=function(){return h=null,x[0][0]=x[0][1]=x[1][0]=x[1][1]=0,a},a.empty=function(){return n&&x[0][0]===x[1][0]||q&&x[0][1]===x[1][1]},p.rebind(a,l,"on")};var hh={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Uc=["n e s w nw ne se sw".split(" "),["e","w"],["n",
"s"],[]];p.time={};var ea=Date;Fa.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},
getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ua.setUTCDate.apply(this._,arguments)},setDay:function(){ua.setUTCDay.apply(this._,arguments)},setFullYear:function(){ua.setUTCFullYear.apply(this._,arguments)},setHours:function(){ua.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ua.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ua.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ua.setUTCMonth.apply(this._,
arguments)},setSeconds:function(){ua.setUTCSeconds.apply(this._,arguments)},setTime:function(){ua.setTime.apply(this._,arguments)}};var ua=Date.prototype,gf="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),hf="Sun Mon Tue Wed Thu Fri Sat".split(" "),Vc="January February March April May June July August September October November December".split(" "),Wc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");p.time.year=Ga(function(a){return a=p.time.day(a),a.setMonth(0,1),
a},function(a,c){a.setFullYear(a.getFullYear()+c)},function(a){return a.getFullYear()});p.time.years=p.time.year.range;p.time.years.utc=p.time.year.utc.range;p.time.day=Ga(function(a){var c=new ea(1970,0);return c.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),c},function(a,c){a.setDate(a.getDate()+c)},function(a){return a.getDate()-1});p.time.days=p.time.day.range;p.time.days.utc=p.time.day.utc.range;p.time.dayOfYear=function(a){var c=p.time.year(a);return Math.floor((a-c-6E4*(a.getTimezoneOffset()-
c.getTimezoneOffset()))/864E5)};"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ").forEach(function(a,c){a=a.toLowerCase();c=7-c;var f=p.time[a]=Ga(function(a){return(a=p.time.day(a)).setDate(a.getDate()-(a.getDay()+c)%7),a},function(a,c){a.setDate(a.getDate()+7*Math.floor(c))},function(a){var d=p.time.year(a).getDay();return Math.floor((p.time.dayOfYear(a)+(d+c)%7)/7)-(d!==c)});p.time[a+"s"]=f.range;p.time[a+"s"].utc=f.utc.range;p.time[a+"OfYear"]=function(a){var d=p.time.year(a).getDay();
return Math.floor((p.time.dayOfYear(a)+(d+c)%7)/7)}});p.time.week=p.time.sunday;p.time.weeks=p.time.sunday.range;p.time.weeks.utc=p.time.sunday.utc.range;p.time.weekOfYear=p.time.sundayOfYear;p.time.format=function(a){function c(e){for(var g,h,l,n=[],p=-1,s=0;++p<f;)37===a.charCodeAt(p)&&(n.push(a.substring(s,p)),null!=(h=ih[g=a.charAt(++p)])&&(g=a.charAt(++p)),(l=Nb[g])&&(g=l(e,null==h?"e"===g?" ":"0":h)),n.push(g),s=p+1);return n.push(a.substring(s,p)),n.join("")}var f=a.length;return c.parse=function(c){var f=
{y:1900,m:0,d:1,H:0,M:0,S:0,L:0};if(Cb(f,a,c,0)!=c.length)return null;"p"in f&&(f.H=f.H%12+12*f.p);c=new ea;return c.setFullYear(f.y,f.m,f.d),c.setHours(f.H,f.M,f.S,f.L),c},c.toString=function(){return a},c};var jf=Db(gf),kf=Db(hf),lf=Db(Vc),jh=Ne(Vc),mf=Db(Wc),kh=Ne(Wc),ih={"-":"",_:" ",0:"0"},Nb={a:function(a){return hf[a.getDay()]},A:function(a){return gf[a.getDay()]},b:function(a){return Wc[a.getMonth()]},B:function(a){return Vc[a.getMonth()]},c:p.time.format("%a %b %e %X %Y"),d:function(a,c){return ha(a.getDate(),
c,2)},e:function(a,c){return ha(a.getDate(),c,2)},H:function(a,c){return ha(a.getHours(),c,2)},I:function(a,c){return ha(a.getHours()%12||12,c,2)},j:function(a,c){return ha(1+p.time.dayOfYear(a),c,3)},L:function(a,c){return ha(a.getMilliseconds(),c,3)},m:function(a,c){return ha(a.getMonth()+1,c,2)},M:function(a,c){return ha(a.getMinutes(),c,2)},p:function(a){return 12<=a.getHours()?"PM":"AM"},S:function(a,c){return ha(a.getSeconds(),c,2)},U:function(a,c){return ha(p.time.sundayOfYear(a),c,2)},w:function(a){return a.getDay()},
W:function(a,c){return ha(p.time.mondayOfYear(a),c,2)},x:p.time.format("%m/%d/%Y"),X:p.time.format("%H:%M:%S"),y:function(a,c){return ha(a.getFullYear()%100,c,2)},Y:function(a,c){return ha(a.getFullYear()%1E4,c,4)},Z:function(a){var c=a.getTimezoneOffset();a=0<c?"-":"+";var f=~~(Math.abs(c)/60),c=Math.abs(c)%60;return a+ha(f,"0",2)+ha(c,"0",2)},"%":function(){return"%"}},Gg={a:function(a,c,f){kf.lastIndex=0;return(a=kf.exec(c.substring(f)))?f+a[0].length:-1},A:function(a,c,f){jf.lastIndex=0;return(a=
jf.exec(c.substring(f)))?f+a[0].length:-1},b:function(a,c,f){mf.lastIndex=0;return(c=mf.exec(c.substring(f)))?(a.m=kh.get(c[0].toLowerCase()),f+c[0].length):-1},B:function(a,c,f){lf.lastIndex=0;return(c=lf.exec(c.substring(f)))?(a.m=jh.get(c[0].toLowerCase()),f+c[0].length):-1},c:function(a,c,f){return Cb(a,""+Nb.c,c,f)},d:Oe,e:Oe,H:Pe,I:Pe,L:function(a,c,f){fa.lastIndex=0;return(c=fa.exec(c.substring(f,f+3)))?(a.L=+c[0],f+c[0].length):-1},m:function(a,c,f){fa.lastIndex=0;return(c=fa.exec(c.substring(f,
f+2)))?(a.m=c[0]-1,f+c[0].length):-1},M:function(a,c,f){fa.lastIndex=0;return(c=fa.exec(c.substring(f,f+2)))?(a.M=+c[0],f+c[0].length):-1},p:function(a,c,f){c=lh.get(c.substring(f,f+=2).toLowerCase());return null==c?-1:(a.p=c,f)},S:function(a,c,f){fa.lastIndex=0;return(c=fa.exec(c.substring(f,f+2)))?(a.S=+c[0],f+c[0].length):-1},x:function(a,c,f){return Cb(a,""+Nb.x,c,f)},X:function(a,c,f){return Cb(a,""+Nb.X,c,f)},y:function(a,c,f){fa.lastIndex=0;return(c=fa.exec(c.substring(f,f+2)))?(a.y=+c[0]+
(68<+c[0]?1900:2E3),f+c[0].length):-1},Y:function(a,c,f){fa.lastIndex=0;return(c=fa.exec(c.substring(f,f+4)))?(a.y=+c[0],f+c[0].length):-1}},fa=/^\s*\d+/,lh=p.map({am:0,pm:1});p.time.format.utc=function(a){function c(a){try{ea=Fa;var d=new ea;return d._=a,f(d)}finally{ea=Date}}var f=p.time.format(a);return c.parse=function(a){try{ea=Fa;var c=f.parse(a);return c&&c._}finally{ea=Date}},c.toString=f.toString,c};var nf=p.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");p.time.format.iso=Date.prototype.toISOString&&
+new Date("2000-01-01T00:00:00.000Z")?Kc:nf;Kc.parse=function(a){a=new Date(a);return isNaN(a)?null:a};Kc.toString=nf.toString;p.time.second=Ga(function(a){return new ea(1E3*Math.floor(a/1E3))},function(a,c){a.setTime(a.getTime()+1E3*Math.floor(c))},function(a){return a.getSeconds()});p.time.seconds=p.time.second.range;p.time.seconds.utc=p.time.second.utc.range;p.time.minute=Ga(function(a){return new ea(6E4*Math.floor(a/6E4))},function(a,c){a.setTime(a.getTime()+6E4*Math.floor(c))},function(a){return a.getMinutes()});
p.time.minutes=p.time.minute.range;p.time.minutes.utc=p.time.minute.utc.range;p.time.hour=Ga(function(a){var c=a.getTimezoneOffset()/60;return new ea(36E5*(Math.floor(a/36E5-c)+c))},function(a,c){a.setTime(a.getTime()+36E5*Math.floor(c))},function(a){return a.getHours()});p.time.hours=p.time.hour.range;p.time.hours.utc=p.time.hour.utc.range;p.time.month=Ga(function(a){return a=p.time.day(a),a.setDate(1),a},function(a,c){a.setMonth(a.getMonth()+c)},function(a){return a.getMonth()});p.time.months=p.time.month.range;
p.time.months.utc=p.time.month.utc.range;var Eb=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Xc=[[p.time.second,1],[p.time.second,5],[p.time.second,15],[p.time.second,30],[p.time.minute,1],[p.time.minute,5],[p.time.minute,15],[p.time.minute,30],[p.time.hour,1],[p.time.hour,3],[p.time.hour,6],[p.time.hour,12],[p.time.day,1],[p.time.day,2],[p.time.week,1],[p.time.month,1],[p.time.month,3],[p.time.year,1]],mh=[[p.time.format("%Y"),Ta],[p.time.format("%B"),
function(a){return a.getMonth()}],[p.time.format("%b %d"),function(a){return 1!=a.getDate()}],[p.time.format("%a %d"),function(a){return a.getDay()&&1!=a.getDate()}],[p.time.format("%I %p"),function(a){return a.getHours()}],[p.time.format("%I:%M"),function(a){return a.getMinutes()}],[p.time.format(":%S"),function(a){return a.getSeconds()}],[p.time.format(".%L"),function(a){return a.getMilliseconds()}]],of=p.scale.linear(),nh=Qe(mh);Xc.year=function(a,c){return of.domain(a.map(Hg)).ticks(c).map(Nc)};
p.time.scale=function(){return Lc(p.scale.linear(),Xc,nh)};var pf=Xc.map(function(a){return[a[0].utc,a[1]]}),oh=[[p.time.format.utc("%Y"),Ta],[p.time.format.utc("%B"),function(a){return a.getUTCMonth()}],[p.time.format.utc("%b %d"),function(a){return 1!=a.getUTCDate()}],[p.time.format.utc("%a %d"),function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],[p.time.format.utc("%I %p"),function(a){return a.getUTCHours()}],[p.time.format.utc("%I:%M"),function(a){return a.getUTCMinutes()}],[p.time.format.utc(":%S"),
function(a){return a.getUTCSeconds()}],[p.time.format.utc(".%L"),function(a){return a.getUTCMilliseconds()}]],ph=Qe(oh);return pf.year=function(a,c){return of.domain(a.map(Ig)).ticks(c).map(Oc)},p.time.scale.utc=function(){return Lc(p.scale.linear(),pf,ph)},p.text=function(){return p.xhr.apply(p,arguments).response(Jg)},p.json=function(a,c){return p.xhr(a,"application/json",c).response(Kg)},p.html=function(a,c){return p.xhr(a,"text/html",c).response(Lg)},p.xml=function(){return p.xhr.apply(p,arguments).response(Mg)},
p}();
(function(e){var n=e.d3,q=Error("d3.layer must be initialized with a base"),c=Error("d3.layer must specify a `dataBind` method."),a=Error("d3.layer must specify an `insert` method."),h=function(a){if(!a)throw q;this._base=a;this._handlers={}};h.prototype.dataBind=function(){throw c;};h.prototype.insert=function(){throw a;};h.prototype.on=function(a,c,e){e=e||{};a in this._handlers||(this._handlers[a]=[]);this._handlers[a].push({callback:c,chart:e.chart||null})};h.prototype.off=function(a,c){var e,h=
this._handlers[a];if(h){if(1===arguments.length)return h.length=0,void 0;for(e=h.length-1;-1<e;--e)h[e].callback===c&&h.splice(e,1)}};h.prototype.draw=function(a){var c,e,h,q,v;if(c=this.dataBind.call(this._base,a),!(c instanceof n.selection))throw Error("Invalid selection defined by `dataBind` method.");a=c.enter();a._chart=this._base._chart;c=[{name:"update",selection:c},{name:"enter",selection:this.insert.bind(a)},{name:"merge",selection:c},{name:"exit",selection:c.exit.bind(c)}];for(var E=0,u=
c.length;u>E;++E){if(h=c[E].name,e=c[E].selection,"function"==typeof e&&(e=e()),!(e instanceof n.selection))throw Error('Invalid selection defined for "'+h+"' lifecycle event.");if(a=this._handlers[h])for(q=0,v=a.length;v>q;++q)e._chart=a[q].chart||this._base._chart,e.call(a[q].callback);if(a=this._handlers[h+":transition"],a&&a.length)for(e=e.transition(),q=0,v=a.length;v>q;++q)e._chart=a[q].chart||this._base._chart,e.call(a[q].callback)}};n.selection.prototype.layer=function(a){var c,e=new h(this);
if(e.dataBind=a.dataBind,e.insert=a.insert,"events"in a)for(c in a.events)e.on(c,a.events[c]);return this.on=function(){return e.on.apply(e,arguments)},this.off=function(){return e.off.apply(e,arguments)},this.draw=function(){return e.draw.apply(e,arguments)},this}})(this);
(function(e,n){function q(a){var c,e,g,h;if(!a)return a;e=arguments.length;for(c=1;e>c;c++)if(g=arguments[c])for(h in g)a[h]=g[h];return a}var c=e.d3,a=function(a){this.constructor=a},h=function(c,e){var g;return a.prototype=c.prototype,g=new a(c),c.apply(g,e),g},l=function(a,c){var e=this.constructor.__super__;e&&l.call(e,a,c);Object.hasOwnProperty.call(this.constructor.prototype,"initialize")&&this.initialize.apply(a,c)},g=function(a){this.base=a;this._layers={};this._mixins=[];this._events={};
l.call(this,this,Array.prototype.slice.call(arguments,1))};g.prototype.unlayer=function(a){var c=this.layer(a),c=this._layerList.indexOf(c);return delete this._layers[a],this._layerList.splice(c,1),this};g.prototype.layer=function(a,c,e){var g;return 1===arguments.length?this._layers[a]:(g=c.layer(e),this._layers[a]=g,c._chart=this,g)};g.prototype.initialize=function(){};g.prototype.transform=function(a){return a};g.prototype.mixin=function(a,c){var e=Array.prototype.slice.call(arguments,2);e.unshift(c);
e=h(g[a],e);return this._mixins.push(e),e};g.prototype.draw=function(a){var c,e;a=this.transform(a);for(c in this._layers)this._layers[c].draw(a);for(e in this._mixins)this._mixins[e].draw(a)};g.prototype.on=function(a,c,e){return(this._events[a]||(this._events[a]=[])).push({callback:c,context:e||this,_chart:this}),this};g.prototype.once=function(a,c,e){var g=this,h=function(){g.off(a,h);c.apply(this,arguments)};return this.on(a,h,e)};g.prototype.off=function(a,c,e){var g,h,l,n,q;if(0===arguments.length){for(a in this._events)this._events[a].length=
0;return this}if(1===arguments.length)return h=this._events[a],h&&(h.length=0),this;g=a?[a]:Object.keys(this._events);for(n=0;g.length>n;n++)for(h=g[n],h=this._events[h],q=h.length;q--;)l=h[q],(c&&c===l.callback||e&&e===l.context)&&h.splice(q,1);return this};g.prototype.trigger=function(a){var c,e,g=Array.prototype.slice.call(arguments,1),h=this._events[a];if(h!==n)for(c=0;h.length>c;c++)e=h[c],e.callback.apply(e.context,g);return this};g.extend=function(a,c,e){var h,l=this;h=c&&Object.hasOwnProperty.call(c,
"constructor")?c.constructor:function(){return l.apply(this,arguments)};q(h,l,e);e=function(){this.constructor=h};return e.prototype=l.prototype,h.prototype=new e,c&&q(h.prototype,c),h.__super__=l.prototype,g[a]=h,h};c.chart=function(a){return 0===arguments.length?g:1===arguments.length?g[a]:g.extend.apply(g,arguments)};c.selection.prototype.chart=function(a){if(0===arguments.length)return this._chart;var c=Array.prototype.slice.call(arguments,1);c.unshift(this);return h(g[a],c)};c.selection.enter.prototype.chart=
function(){return this._chart};c.transition.prototype.chart=c.selection.enter.prototype.chart})(this);var golden_ratio=1.61803398875;function sortByKey(e,n){return e.sort(function(e,c){var a=e[n],h=c[n];return a<h?-1:a>h?1:0})}$("#masonry-container").masonry({itemSelector:".mbox",columnWidth:384});$.fn.scrollView=function(){return this.each(function(){$("html, body").animate({scrollTop:$(this).offset().top},0)})};
$(function(){$(".column").each(function(e){var n=this;$(n).sortable({connectWith:".column",handle:".portlet-header",update:function(e,c){$.cookie("sortorder"+n.id,$(n).sortable("toArray").join(),{path:"/"})}})});$(".portlet").addClass("ui-widget ui-widget-content ui-helper-clearfix ui-corner-all").find(".portlet-header").addClass("ui-widget-header ui-corner-all").prepend("<span class='ui-icon ui-icon-minusthick'></span>").end().find(".portlet-content");$(".portlet-header .ui-icon").click(function(){$(this).toggleClass("ui-icon-minusthick").toggleClass("ui-icon-plusthick");
$(this).parents(".portlet:first").find(".portlet-content").toggle($.cookie($(this).parents(".portlet:first")[0].id,$(this).parents(".portlet:first").find(".portlet-content").is(":hidden")?"expanded":"collapsed",{path:"/"}))})});
function loadCookie(){$(".column").each(function(e){e=$.cookie("sortorder"+this.id);var n=this;e&&$(e.split(",")).each(function(e,c){$("#"+c).appendTo(n)});$(this).sortable()});$(".portlet").each(function(e){(e=$.cookie(this.id))&&"collapsed"===e&&($(this).find(".ui-icon").toggleClass("ui-icon-minusthick").toggleClass("ui-icon-plusthick"),$(this).find(".portlet-content").hide())});"true"===$.cookie("shotTracking")?turnOnShotTracker():turnOffShotTracker()}var shot_stream_client=new XMLHttpRequest;
function turnOffShotTracker(){$("#h1ds-track-latest-shot").hide();$("#h1ds-shot-controller").show();$("#h1ds-toggle-track-latest-shot").html('<FORM class="inline-form right" action="." onsubmit="javascript:toggleTrackLatestShot()" method="post"><INPUT type="submit" id="h1ds-toggletrack-shot" name="h1ds-toggletrack-shot" value="track latest shot"></FORM>');$.cookie("shotTracking","false",{path:"/"});shot_stream_client.abort()}
function turnOnShotTracker(){$("#h1ds-shot-controller").hide();$("#h1ds-track-latest-shot").show();$("#h1ds-toggletrack-latest-shot").html('<FORM class="inline-form right" action="." onsubmit="javascript:toggleTrackLatestShot()" method="post"><INPUT type="submit" id="h1ds-toggletrack-shot" name="h1ds-toggletrack-shot" value="stop tracking latest shot"></FORM>');$.cookie("shotTracking","true",{path:"/"});shot_stream_client.open("get","/_/shot_stream/");shot_stream_client.send();shot_stream_client.onprogress=
function(){var e=this.responseText.split("\n");$.getJSON("/_/url_for_shot",{input_path:window.location.toString(),shot:e[e.length-2]},function(e){window.location=e.new_url})}}function toggleTrackLatestShot(){"true"===$.cookie("shotTracking")?turnOffShotTracker():turnOnShotTracker();return!1}
function autoPollSummaryDB(){var e=d3.select("#poll-summarydb-server");if(null!==e[0][0]&&"True"===e.text()){var n=null,q=window.location.toString()+(window.location.search+(window.location.search.length?"&":"?")+"format=json"),c=d3.select("table.main-table tbody"),a=function(a){$.ajax({url:q,dataType:"json",async:!1}).done(function(e){n=new Date(e.timestamp);e=c.selectAll("tr").data(cross(e),function(a){return a[0].shot});e.enter().insert("tr","tr").style("background-color","yellow");var g=e.selectAll("td").data(function(a){return a});
g.enter().append("td").html(function(a,c){return'<a href="/summary/_/go_to_source/'+a.attr+"/"+a.shot+'/" >'+a.value+"</a>"});g.transition().duration(500).each(function(a){d3.select(this).html(function(a,c){return'<a href="/summary/_/go_to_source/'+a.attr+"/"+a.shot+'/" >'+a.value+"</a>"})});e.transition().duration(a).style("background-color","white");e.exit().remove()})};a(1E3);setInterval(function(){summaryUpdateRequired(n)&&a(3E5)},2E3)}}
function getLastShotInDisplayedPage(){var e=-1;d3.selectAll("table.main-table tr").each(function(n,q){if(0<q){var c=Number(d3.select(this).select("td").text());c>e&&(e=c)}});return e}function summaryUpdateRequired(e){$.ajax({url:"/summary/_/get_last_update_time/",dataType:"json",async:!1}).done(function(e){latest_summdb_update=new Date(e.last_update)});return latest_summdb_update>e}
function updateSummaryDB(){var e=getLastShotInDisplayedPage(),n=-1;$.ajax({url:"/summary/_/get_latest_summarydb_shot/",dataType:"json",async:!1}).done(function(e){n=Number(e.latest_shot)});n>e&&$.ajax({url:window.location.toString()+(window.location.search+(window.location.search.length?"&":"?")+"format=json"),dataType:"json",async:!1}).done(function(e){})}
function cross(e){var n=[],q,c;for(q=0;q<e.data.length;q++)for(n[q]=[],n[q].shot,c=0;c<e.attributes.length;c++)n[q][c]={shot:e.data[q].shot,attr:e.attributes[c],value:e.data[q].d[c]};return n}$("span.toggleVertical").each(function(){"true"===$.cookie("vertical-"+$(this).text())&&($(this).toggleClass("verticalText"),$(this).html($(this).text().replace(/(.)/g,"$1<br />")))});
$("span.toggleVertical").click(function(){$(this).toggleClass("verticalText");$(this).hasClass("verticalText")?($(this).html($(this).text().replace(/(.)/g,"$1<br />")),$.cookie("vertical-"+$(this).text(),!0)):($(this).html($(this).text().replace("$1<br />","")),$.cookie("vertical-"+$(this).text(),!1))});
function H1DSUri(e){this.base_uri=e;this.base_uri_components=parseUri(e);this.base_h1ds_filters=[];this.base_non_h1ds_query={};this.extra_h1ds_filters=[];this.extra_non_h1ds_query={};e={fids:[]};var n=/^f(\d+)(_(\w+))?/,q;for(q in this.base_uri_components.queryKey)if(this.base_uri_components.queryKey.hasOwnProperty(q)){var c=n.exec(q);c?(e.hasOwnProperty(c[1])||(e.fids.push(c[1]),e[c[1]]={name:"",kwargs:{},fid:parseInt(c[1])}),"undefined"===typeof c[2]?e[c[1]].name=this.base_uri_components.queryKey[q]:
e[c[1]].kwargs[c[3]]=this.base_uri_components.queryKey[q]):this.base_non_h1ds_query[q]=this.base_uri_components.queryKey[q]}for(q=0;q<e.fids.length;q++)this.base_h1ds_filters.push(e[e.fids[q]]);this.sortH1DSFilters()}H1DSUri.prototype.sortH1DSFilters=function(){this.base_h1ds_filters=sortByKey(this.base_h1ds_filters,"fid");this.extra_h1ds_filters=sortByKey(this.extra_h1ds_filters,"fid")};
H1DSUri.prototype.updateOrAddBaseFilter=function(e,n){var q=this.base_h1ds_filters.length;0<q&&this.base_h1ds_filters[q-1].name==e?this.base_h1ds_filters[q-1].kwargs=n:this.addBaseFilter(e,n)};H1DSUri.prototype.shiftExtraH1DSFilterFIDs=function(e){for(var n=0;n<this.extra_h1ds_filters.length;n++)this.extra_h1ds_filters[n].fid+=e};
H1DSUri.prototype.shiftExtraFilterIDs=function(){this.sortH1DSFilters();if(0<this.extra_h1ds_filters.length){var e=new_fid-this.extra_h1ds_filters[0].fid;0<=e&&this.shiftExtraH1DSFilterFIDs(e+1)}};H1DSUri.prototype.addBaseFilter=function(e,n){this.sortH1DSFilters();var q=this.base_h1ds_filters.length;this.base_h1ds_filters.push({name:e,kwargs:n,fid:0<q?this.base_h1ds_filters[q-1].fid+1:0});this.shiftExtraH1DSFilterFIDs()};
H1DSUri.prototype.addExtraFilter=function(e,n){this.sortH1DSFilters();var q=this.extra_h1ds_filters.length,c=this.base_h1ds_filters.length;this.extra_h1ds_filters.push({name:e,kwargs:n,fid:0<q?this.extra_h1ds_filters[q-1].fid+1:0<c?this.base_h1ds_filters[c-1].fid+1:0})};H1DSUri.prototype.packFilterIDs=function(){console.log(this.extra_h1ds_filters)};
H1DSUri.prototype.changeFilterID=function(e,n){for(var q=0;q<this.base_h1ds_filters.length;q++)this.base_h1ds_filters[q].fid==parseInt(e)&&(this.base_h1ds_filters[q].fid=parseInt(n));for(q=0;q<this.extra_h1ds_filters.length;q++)this.extra_h1ds_filters[q].fid==parseInt(e)&&(this.extra_h1ds_filters[q].fid=parseInt(n));this.shiftExtraFilterIDs()};
H1DSUri.prototype.renderBaseUri=function(){var e={},n;for(n in this.base_non_h1ds_query)this.base_non_h1ds_query.hasOwnProperty(n)&&(e[n]=this.base_non_h1ds_query[n]);for(n=0;n<this.base_h1ds_filters.length;n++){var q=this.base_h1ds_filters[n].fid;e["f"+q]=this.base_h1ds_filters[n].name;for(var c in this.base_h1ds_filters[n].kwargs)e["f"+q+"_"+c]=this.base_h1ds_filters[n].kwargs[c]}c=jQuery.extend({},this.base_uri_components);c.queryKey=e;return makeUri(c)};
H1DSUri.prototype.renderExtraUri=function(){var e={},n;for(n in this.base_non_h1ds_query)this.base_non_h1ds_query.hasOwnProperty(n)&&(e[n]=this.base_non_h1ds_query[n]);for(var q=0;q<this.base_h1ds_filters.length;q++){var c=this.base_h1ds_filters[q].fid;e["f"+c]=this.base_h1ds_filters[q].name;for(var a in this.base_h1ds_filters[q].kwargs)e["f"+c+"_"+a]=this.base_h1ds_filters[q].kwargs[a]}for(n in this.extra_non_h1ds_query)this.extra_non_h1ds_query.hasOwnProperty(n)&&(e[n]=this.extra_non_h1ds_query[n]);
for(q=0;q<this.extra_h1ds_filters.length;q++)for(a in c=this.extra_h1ds_filters[q].fid,e["f"+c]=this.extra_h1ds_filters[q].name,this.extra_h1ds_filters[q].kwargs)e["f"+c+"_"+a]=this.extra_h1ds_filters[q].kwargs[a];n=jQuery.extend({},this.base_uri_components);n.queryKey=e;return makeUri(n)};H1DSUri.prototype.isBinary=function(){return"bin"===this.base_non_h1ds_query.format};
H1DSUri.prototype.getShot=function(){var e=this.uri_components.path;"/"!==e[e.length-1]&&(e+="/");e=e.match(/\/\d+\//);return null===e?0:Number(e[0].substring(1,e[0].length-1))};H1DSUri.prototype.setShot=function(e){var n=this.uri_components.path;"/"!==n[n.length-1]&&(n+="/");e=n.replace(/\/\d+\//,"/"+e+"/");this.uri_components.path=e};d3.select(window).on("mousemove",mousemove).on("mouseup",mouseup);var rect,x0,x1,count,par_rect;
function mousedown(){x0=d3.mouse(this);count=0;par_rect=d3.select(this);rect=d3.select(this.parentNode).append("svg:rect").attr("y",par_rect.attr("y")).attr("height",par_rect.attr("height")).style("fill","#999").style("fill-opacity",0.5);d3.event.preventDefault()}function mousemove(){if(rect){x1=d3.mouse(rect.node());var e=Math.min(x0[0],x1[0]),n=Math.max(x0[0],x1[0]);Math.min(x0[1],x1[1]);Math.max(x0[1],x1[1]);rect.attr("x",e-0.5).attr("width",n-e+1)}}
function mouseup(){rect&&(rect.each(function(e){var n=e.xAxis.scale().invert(d3.select(this).attr("x"));e=e.xAxis.scale().invert(+d3.select(this).attr("x")+ +d3.select(this).attr("width"));var q=new H1DSUri(window.location.href),c=Number(q.getNextFilterID());0==c?q.appendFilter("dim_range",{min:n,max:e}):(c-=1,"dim_range"===q.h1ds_filters[String(c)].name?q.h1ds_filters[String(c)].kwargs={min:n,max:e}:q.appendFilter("dim_range",{min:n,max:e}));$(".h1ds-pagelet").each(function(){d3.select(this).html("");
populatePagelet($(this),q.renderUri())});Modernizr.history&&history.pushState(null,null,q.renderUri())}),rect.remove(),rect=null)}function getSpectrogramUri(e){e=new H1DSUri(e);e.addExtraFilter("slanted_baseline",{window:10});e.addExtraFilter("spectrogram",{bin_size:-1});e.addExtraFilter("norm_dim_range_2d",{x_min:0,x_max:1,y_min:0,y_max:0.5});e.addExtraFilter("y_axis_energy_limit",{threshold:0.995});e.extra_non_h1ds_query.format="bin";e.extra_non_h1ds_query.bin_assert_dtype="uint8";return e}
function getPowerspectrumUri(e,n){var q=new H1DSUri(e);q.addExtraFilter("slanted_baseline",{window:10});q.addExtraFilter("power_spectrum",{});q.addExtraFilter("norm_dim_range",{min:0,max:0.5});q.addExtraFilter("resample_minmax",{n_bins:n});q.extra_non_h1ds_query.format="json";return q}function getRawUri(e,n){var q=new H1DSUri(e);q.addExtraFilter("resample_minmax",{n_bins:n});q.extra_non_h1ds_query.format="json";return q}
ProcessH1DSHeaders=function(e){e=e.split("\n");for(var n={},q=0;q<e.length;q++){var c=e[q].split(":");2===c.length&&c[0].match("^X-H1DS")&&(n[c[0]]=$.trim(c[1]))}return n};
ProcessBinaryData=function(e,n){for(var q=new Uint8Array(str2ab(e)),c=parseInt(n["X-H1DS-ndim"]),a=0,h={data:[],dim:[],n_dim:c},l=0;l<c;l++){h.dim[l]=[];for(var g=parseInt(n["X-H1DS-dim-"+l+"-length"]),s=parseFloat(n["X-H1DS-dim-"+l+"-delta"]),x=parseFloat(n["X-H1DS-dim-"+l+"-first"]),Q=0;Q<g;Q++)h.dim[l][Q]=s*Q+x}l=parseFloat(n["X-H1DS-data-delta"]);g=parseFloat(n["X-H1DS-data-min"]);if(0<c)for(s=parseInt(n["X-H1DS-dim-0-length"]),parseFloat(n["X-H1DS-dim-0-delta"]),parseFloat(n["X-H1DS-dim-0-first"]),
x=0;x<s;x++)if(1<c){h.data[x]=[];Q=parseInt(n["X-H1DS-dim-1-length"]);parseFloat(n["X-H1DS-dim-1-delta"]);parseFloat(n["X-H1DS-dim-1-first"]);for(var v=0;v<Q;v++)if(2<c){h.data[x][v]=[];var E=parseInt(n["X-H2DS-dim-2-length"]);parseFloat(n["X-H1DS-dim-2-delta"]);parseFloat(n["X-H1DS-dim-2-first"]);for(var u=0;u<E;u++)h.data[x][v][u]=l*q[a]+g,a++}else h.data[x][v]=q[a],a++}else h.data[x]=l*q[a]+g,a++;return h};function ab2str(e){return String.fromCharCode.apply(null,new Uint8Array(e))}
function str2ab(e){for(var n=new ArrayBuffer(e.length),q=new Uint8Array(n),c=0,a=e.length;c<a;c++)q[c]=e.charCodeAt(c);return n}function loadPlotState(){plotState.settings={edit_mode:!1,worksheet_mode:!1};plotState.url_cache={};plotState.pagelets=[];$(".h1ds-pagelet").each(function(e,n){loadPageletPlotState(e,n)})}function loadPageletPlotStateFromURL(e,n){plotState.pagelets[e]=null}
function loadDefaultPageletPlotState(e,n){var q={},c=window.location.toString(),a=$(n);q.margin={top:1,right:1,bottom:1,left:1};q.n_rows=10;q.n_columns=10;q.width=a.width()-q.margin.left-q.margin.right;q.height=Math.round(d3.min([q.width/golden_ratio,0.9*$(window).height()]));q.dtype=a.attr("data-dtype");q.ndim=a.attr("data-ndim");chart_state={x0:0,y0:0,x1:10,y1:10,chart_type:"raw"};chart_state.chart_width=(chart_state.x1-chart_state.x0)/q.n_columns*q.width;chart_state.stateIndex=[0,0];chart_state.data=
[{}];chart_state.data[0].uri=getRawUri(c,chart_state.chart_width);chart_state.data[0].data=null;q.charts=[chart_state];plotState.pagelets[e]=q;$.ajax({url:plotState.pagelets[e].charts[0].data[0].uri.renderExtraUri(),dataType:"json",async:!0}).done(function(a){plotState.pagelets[e].charts[0].data[0].data=a;updateCharts()})}function loadPageletPlotState(e,n){$(n);loadPageletPlotStateFromURL(e,n);null===plotState.pagelets[e]&&loadDefaultPageletPlotState(e,n)}
d3.chart("H1DSBaseChart",{initialize:function(){var e=this,n=this.base.append("g").classed("graph-background",!0);e.main=e.base.append("g").attr("class","chart-main");e.brush=d3.svg.brush();e.margin={top:10,right:10,bottom:10,left:10};e._width=100;e._height=100;this.set_margin=function(n){var c=e._width+e.margin.left+e.margin.right,a=e._height+e.margin.bottom+e.margin.top;e.margin=n;e.base.select("g.chart-main").attr("transform","translate("+e.margin.left+","+e.margin.top+")");e._width=c-e.margin.left-
e.margin.right;e._height=a-e.margin.top-e.margin.bottom};this.set_margin({top:10,right:10,bottom:10,left:10});this.layer("background",n,{dataBind:function(e){return this.selectAll("rect.background").data([e])},insert:function(){return this.insert("rect").attr("class","background").attr("x",0).attr("y",0).attr("width",e._width+e.margin.left+e.margin.right).attr("height",e._height+e.margin.top+e.margin.bottom)}})},width:function(e){if(!arguments.length)return this._width+this.margin.left+this.margin.right;
this._width=e-this.margin.left-this.margin.right;this.base.select("g rect.background").attr("width",e);return this},height:function(e){if(!arguments.length)return this._height+this.margin.top+this.margin.bottom;this._height=e-this.margin.top-this.margin.bottom;this.base.select("g rect.background").attr("y",e).attr("height",e);return this}});
d3.chart("H1DSBaseChart").extend("H1DSTestChart",{initialize:function(){var e=this;this.set_margin({top:50,right:50,bottom:50,left:50});this.xScale=d3.scale.linear().range([0,e._width]);this.yScale=d3.scale.linear().range([e._height,0]);this.xAxis=d3.svg.axis().scale(this.xScale).orient("bottom");this.yAxis=d3.svg.axis().scale(this.yScale).orient("left");this.colors=d3.scale.category20();this.layer("xAxis",e.main.append("g"),{dataBind:function(a){e.data=a[0];return this.selectAll("g.x.axis").data([a])},
insert:function(){return this.insert("g").attr("class","x axis").attr("transform",function(a){return"translate(0,"+e._height+")"})},events:{merge:function(){e.xScale.range([0,e._width]).domain([d3.min(e.data.dimension,function(a){return d3.min(a)}),d3.max(e.data.dimension,function(a){return d3.max(a)})]);return this.call(e.xAxis)},enter:function(){e.xScale.range([0,e._width]).domain([d3.min(e.data.dimension,function(a){return d3.min(a)}),d3.max(e.data.dimension,function(a){return d3.max(a)})]);return this.call(e.xAxis)},
exit:function(){return this.remove()}}});this.layer("yAxis",e.main.append("g"),{dataBind:function(a){e.data=a[0];return this.selectAll("g.y.axis").data([a])},insert:function(){return this.append("g").attr("class","y axis").attr("transform",function(a){return"translate(0,0)"})},events:{merge:function(){var a=d3.min(e.data.value,function(a){return d3.min(a)}),c=d3.max(e.data.value,function(a){return d3.max(a)}),l=0.05*(c-a);e.yScale.range([e._height,0]).domain([a-l,c+l]);return this.call(e.yAxis)},
enter:function(){var a=d3.min(e.data.value,function(a){return d3.min(a)}),c=d3.max(e.data.value,function(a){return d3.max(a)}),l=0.05*(c-a);e.yScale.range([e._height,0]).domain([a-l,c+l]);return this.call(e.yAxis)},exit:function(){return this.remove()}}});var n=d3.svg.line().x(function(a){return e.xScale(a[0])}).y(function(a){return e.yScale(a[1])}),q=function(a){var c=[],e=0;"undefined"!==typeof a.metadata.minmax_pairs&&(e=a.metadata.minmax_pairs.length);var g=d3.range(a.value.length);if(0<e)for(var n=
0;n<e;n++){g.splice(g.indexOf(a.metadata.minmax_pairs[n][0]),1);g.splice(g.indexOf(a.metadata.minmax_pairs[n][1]),1);for(var q=[],Q=0;Q<a.value[a.metadata.minmax_pairs[n][0]].length;Q++)q.push([a.dimension[0][Q],a.value[a.metadata.minmax_pairs[n][0]][Q]]);for(Q=a.value[a.metadata.minmax_pairs[n][1]].length-1;0<=Q;Q--)q.push([a.dimension[0][Q],a.value[a.metadata.minmax_pairs[n][1]][Q]]);q.closeLine=!0;q.fillLine=!0;c.push(q)}for(n=0;n<g.length;n++){e=g[n];q=[];for(Q=0;Q<a.value[e].length;Q++)q.push([a.dimension[0][Q],
a.value[e][Q]]);q.closeLine=!1;q.fillLine=!1;c.push(q)}return c};this.layer("data",e.main.append("g"),{dataBind:function(a){e.data=a[0];return this.selectAll("path.signal").data(q(e.data))},insert:function(){return this.append("path")},events:{merge:function(){return this.attr("class","signal").style("stroke",function(a,c){return e.colors(2*c)}).style("fill",function(a,c){return a.fillLine?e.colors(2*c+1):"none"}).attr("d",function(a,c){return n(a)+(a.closeLine?"Z":"")})},enter:function(){return this.attr("class",
"signal").style("stroke",function(a,c){return e.colors(2*c)}).style("fill",function(a,c){return a.fillLine?e.colors(2*c+1):"none"}).attr("d",function(a,c){return n(a)+(a.closeLine?"Z":"")})},exit:function(){return this.remove()}}});var c=function(){var a=plotState.pagelets[0].charts[0].data[0].uri,c={min:e.brush.extent()[0],max:e.brush.extent()[1]},a=new H1DSUri(a.base_uri);a.updateOrAddBaseFilter("dim_range",c);a=getRawUri(a.renderBaseUri(),e._width+e.margin.left+e.margin.right);plotState.pagelets[0].charts[0].data[0].uri=
a;$.ajax({url:a.renderExtraUri(),dataType:"json",async:!1}).done(function(a){plotState.pagelets[0].charts[0].data[0].data=a;e.draw([a.data])})};this.layer("interactive",e.main,{dataBind:function(a){e.data=a[0];return this.selectAll("g.brush").data([e.data])},insert:function(){e.brush.clear();return this.append("g").attr("class","brush")},events:{merge:function(){e.brush=d3.svg.brush().x(e.xScale).on("brushend",c);return this.call(e.brush).selectAll("rect").attr("y",0).attr("height",e._height)}}})}});
d3.chart("H1DSEditModeChart",{initialize:function(){var e=function(e){};this.layer("background",this.base.append("g"),{dataBind:function(e){return this.selectAll("rect.background").data([e])},insert:function(){return this.insert("rect").attr("class","background-edit").attr("x",function(e){return e.x0px}).attr("y",function(e){return e.y1px}).attr("width",function(e){return e.x1px-e.x0px}).attr("height",function(e){return e.y0px-e.y1px})}});e=function(e){var q=e.x1px-e.x0px-30,c=e.y0px-e.y1px-30;return[{x:e.x0px,
y:e.y1px+15,width:15,height:c,"class":"resizebar edge rb_x"},{x:e.x1px-15,y:e.y1px+15,width:15,height:c,"class":"resizebar edge rb_x"},{x:e.x0px+15,y:e.y1px,width:q,height:15,"class":"resizebar edge rb_y"},{x:e.x0px+15,y:e.y0px-15,width:q,height:15,"class":"resizebar edge rb_y"},{x:e.x0px,y:e.y1px,width:15,height:15,"class":"resizebar corner rb_x rb_y"},{x:e.x1px-15,y:e.y1px,width:15,height:15,"class":"resizebar corner rb_x rb_y"},{x:e.x0px,y:e.y0px-15,width:15,height:15,"class":"resizebar corner rb_x rb_y"},
{x:e.x1px-15,y:e.y0px-15,width:15,height:15,"class":"resizebar corner rb_x rb_y"}]};this.layer("resizeedges",this.base.append("g"),{dataBind:function(n){return this.selectAll("rect.resizebar ").data(e(n))},events:{enter:function(){this.on("click",function(){console.log("xx events")})}},insert:function(){return this.insert("rect").attr("class",function(e){return e["class"]}).attr("x",function(e){return e.x}).attr("y",function(e){return e.y}).attr("width",function(e){return e.width}).attr("height",
function(e){return e.height})}})}});
function updateCharts(){d3.selectAll("#h1ds-portlet-data div.portlet-content").data(plotState.pagelets).append("svg").attr("width",function(e){return e.width+e.margin.left+e.margin.right}).attr("height",function(e){return e.height+e.margin.top+e.margin.bottom}).append("g").attr("transform",function(e){return"translate("+e.margin.left+","+e.margin.top+")"}).each(function(e,n){e.column_width=e.width/e.n_columns;e.row_height=e.height/e.n_rows;e.xScale=d3.scale.linear().domain([0,e.n_columns]).range([0,
e.width]);e.yScale=d3.scale.linear().domain([0,e.n_rows]).range([e.height,0]);for(var q=d3.select(this).append("g").attr("class","pagelet-grid"),c=0;c<=e.n_columns;c++)q.append("line").attr("x1",function(){return Math.round(c*e.column_width)}).attr("x2",function(){return Math.round(c*e.column_width)}).attr("y1",0).attr("y2",e.height);for(c=0;c<=e.n_rows;c++)q.append("line").attr("x1",0).attr("x2",e.width).attr("y1",function(){return Math.round(c*e.row_height)}).attr("y2",function(){return Math.round(c*
e.row_height)});for(c=0;c<e.charts.length;c++)e.charts[c].x0px=e.xScale(e.charts[c].x0),e.charts[c].x1px=e.xScale(e.charts[c].x1),e.charts[c].y0px=e.yScale(e.charts[c].y0),e.charts[c].y1px=e.yScale(e.charts[c].y1),!0==plotState.settings.edit_mode?(q=d3.select(this).append("g").attr("transform","translate("+e.charts[c].x0px+","+e.charts[c].y1px+")").chart("H1DSEditModeChart"),console.log(e.charts[c].x1px-e.charts[c].x0px),q.width(e.charts[c].x1px-e.charts[c].x0px),q.height(e.charts[c].y1px-e.charts[c].y0px),
q.draw(e.charts[c])):(q=d3.select(this).append("g").attr("class","chart").attr("transform","translate("+e.charts[c].x0px+","+e.charts[c].y1px+")").chart("H1DSTestChart"),q.width(e.charts[c].x1px-e.charts[c].x0px),q.height(e.charts[c].y0px-e.charts[c].y1px),q.draw([e.charts[c].data[0].data.data]))})}var plotState={};$(document).ready(function(){$("#main").scrollView();autoPollSummaryDB();loadCookie();loadPlotState()});
