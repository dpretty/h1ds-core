window.log=function(){log.history=log.history||[];log.history.push(arguments);if(this.console){arguments.callee=arguments.callee.caller;var e=[].slice.call(arguments);"object"===typeof console.log?log.apply.call(console.log,console,e):console.log.apply(console,e)}};
(function(e){function l(){}for(var f="assert count debug dir dirxml error exception group groupCollapsed groupEnd info log timeStamp profile profileEnd time timeEnd trace warn".split(" "),c;c=f.pop();)e[c]=e[c]||l})(function(){try{return console.log(),window.console}catch(e){return window.console={}}}());
function parseUri(e){var l=parseUri.options;e=l.parser[l.strictMode?"strict":"loose"].exec(e);for(var f={},c=14;c--;)f[l.key[c]]=e[c]||"";f[l.q.name]={};f[l.key[12]].replace(l.q.parser,function(a,c,d){c&&(f[l.q.name][c]=d)});return f}
parseUri.options={strictMode:!1,key:"source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};
function makeUri(e){var l="";e.protocol&&(l+=e.protocol+"://");e.user&&(l+=e.user);e.password&&(l+=":"+e.password);if(e.user||e.password)l+="@";e.host&&(l+=e.host);e.port&&(l+=":"+e.port);e.path&&(l+=e.path);var f=e.queryKey,c=[];for(k in f)if(f.hasOwnProperty(k)){var a=encodeURIComponent(f[k]);k=encodeURIComponent(k);a?c.push(k+"="+a):c.push(k)}0<c.length&&(l+="?"+c.join("&"));e.anchor&&(l+="#"+e.anchor);return l}
(function(e){function l(f){if("string"===typeof f.data){var c=f.handler,a=f.data.toLowerCase().split(" ");f.handler=function(g){if(!(this!==g.target&&(/textarea|select/i.test(g.target.nodeName)||"text"===g.target.type))){var d="keypress"!==g.type&&e.hotkeys.specialKeys[g.which],v=String.fromCharCode(g.which).toLowerCase(),t="",p={};g.altKey&&"alt"!==d&&(t+="alt+");g.ctrlKey&&"ctrl"!==d&&(t+="ctrl+");g.metaKey&&(!g.ctrlKey&&"meta"!==d)&&(t+="meta+");g.shiftKey&&"shift"!==d&&(t+="shift+");d?p[t+d]=
!0:(p[t+v]=!0,p[t+e.hotkeys.shiftNums[v]]=!0,"shift+"===t&&(p[e.hotkeys.shiftNums[v]]=!0));d=0;for(v=a.length;d<v;d++)if(p[a[d]])return c.apply(this,arguments)}}}}e.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",
109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(","0":")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};e.each(["keydown","keyup","keypress"],function(){e.event.special[this]={add:l}})})(jQuery);"use strict";
(function(){if(!jQuery||!jQuery.jstree){var e=!1,l=!1,f=!1;(function(c){c.vakata={};c.vakata.css={get_css:function(a,c,d){a=a.toLowerCase();var g=d.cssRules||d.rules,v=0;do{if(g.length&&v>g.length+5)break;if(g[v].selectorText&&g[v].selectorText.toLowerCase()==a)return!0===c?(d.removeRule&&d.removeRule(v),d.deleteRule&&d.deleteRule(v),!0):g[v]}while(g[++v]);return!1},add_css:function(a,d){if(c.jstree.css.get_css(a,!1,d))return!1;d.insertRule?d.insertRule(a+" { }",0):d.addRule(a,null,0);return c.vakata.css.get_css(a)},
remove_css:function(a,d){return c.vakata.css.get_css(a,!0,d)},add_sheet:function(a){var d=!1,g=!0;if(a.str)return a.title&&(d=c("style[id='"+a.title+"-stylesheet']")[0]),d?g=!1:(d=document.createElement("style"),d.setAttribute("type","text/css"),a.title&&d.setAttribute("id",a.title+"-stylesheet")),d.styleSheet?g?(document.getElementsByTagName("head")[0].appendChild(d),d.styleSheet.cssText=a.str):d.styleSheet.cssText=d.styleSheet.cssText+" "+a.str:(d.appendChild(document.createTextNode(a.str)),document.getElementsByTagName("head")[0].appendChild(d)),
d.sheet||d.styleSheet;if(a.url)if(document.createStyleSheet)try{document.createStyleSheet(a.url)}catch(v){}else return d=document.createElement("link"),d.rel="stylesheet",d.type="text/css",d.media="all",d.href=a.url,document.getElementsByTagName("head")[0].appendChild(d),d.styleSheet}};var a=[],g=-1,d={},v={};c.fn.jstree=function(g){var v="string"==typeof g,e=Array.prototype.slice.call(arguments,1),f=this;if(v){if("_"==g.substring(0,1))return f;this.each(function(){var d=a[c.data(this,"jstree_instance_id")],
d=d&&c.isFunction(d[g])?d[g].apply(d,e):d;if("undefined"!==typeof d&&(0===g.indexOf("is_")||!0!==d&&!1!==d))return f=d,!1})}else this.each(function(){var v=c.data(this,"jstree_instance_id"),f=[],p=g?c.extend({},!0,g):{},s=c(this),l=!1,ja=[],f=f.concat(e);s.data("jstree")&&f.push(s.data("jstree"));p=f.length?c.extend.apply(null,[!0,p].concat(f)):p;"undefined"!==typeof v&&a[v]&&a[v].destroy();v=parseInt(a.push({}),10)-1;c.data(this,"jstree_instance_id",v);p.plugins=c.isArray(p.plugins)?p.plugins:c.jstree.defaults.plugins.slice();
p.plugins.unshift("core");p.plugins=p.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");l=c.extend(!0,{},c.jstree.defaults,p);l.plugins=p.plugins;c.each(d,function(a,d){-1===c.inArray(a,l.plugins)?(l[a]=null,delete l[a]):ja.push(a)});l.plugins=ja;a[v]=new c.jstree._instance(v,c(this).addClass("jstree jstree-"+v),l);c.each(a[v]._get_settings().plugins,function(c,d){a[v].data[d]={}});c.each(a[v]._get_settings().plugins,function(c,
g){d[g]&&d[g].__init.apply(a[v])});setTimeout(function(){a[v]&&a[v].init()},0)});return f};c.jstree={defaults:{plugins:[]},_focused:function(){return a[g]||null},_reference:function(d){if(a[d])return a[d];var g=c(d);!g.length&&"string"===typeof d&&(g=c("#"+d));return!g.length?null:a[g.closest(".jstree").data("jstree_instance_id")]||null},_instance:function(a,d,g){this.data={core:{}};this.get_settings=function(){return c.extend(!0,{},g)};this._get_settings=function(){return g};this.get_index=function(){return a};
this.get_container=function(){return d};this.get_container_ul=function(){return d.children("ul:eq(0)")};this._set_settings=function(a){g=c.extend(!0,{},g,a)}},_fn:{},plugin:function(a,g){g=c.extend({},{__init:c.noop,__destroy:c.noop,_fn:{},defaults:!1},g);d[a]=g;c.jstree.defaults[a]=g.defaults;c.each(g._fn,function(d,g){g.plugin=a;g.old=c.jstree._fn[d];c.jstree._fn[d]=function(){var a,v=g,t=Array.prototype.slice.call(arguments);a=new c.Event("before.jstree");var e=!1;if(!(!0===this.data.core.locked&&
"unlock"!==d&&"is_locked"!==d)){do{if(v&&v.plugin&&-1!==c.inArray(v.plugin,this._get_settings().plugins))break;v=v.old}while(v);if(v){if(0===d.indexOf("_"))a=v.apply(this,t);else{a=this.get_container().triggerHandler(a,{func:d,inst:this,args:t,plugin:v.plugin});if(!1===a)return;"undefined"!==typeof a&&(t=a);a=v.apply(c.extend({},this,{__callback:function(a){this.get_container().triggerHandler(d+".jstree",{inst:this,args:t,rslt:a,rlbk:e})},__rollback:function(){return e=this.get_rollback()},__call_old:function(a){return v.old.apply(this,
a?Array.prototype.slice.call(arguments,1):t)}}),t)}return a}}};c.jstree._fn[d].old=g.old;c.jstree._fn[d].plugin=a})},rollback:function(d){d&&(c.isArray(d)||(d=[d]),c.each(d,function(d,c){a[c.i].set_rollback(c.h,c.d)}))}};c.jstree._fn=c.jstree._instance.prototype={};c(function(){var a=navigator.userAgent.toLowerCase(),d=(a.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],g=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a > ins { height:16px; width:16px; } .jstree a > .jstree-icon { margin-right:3px; } .jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } ";
if(/msie/.test(a)&&6==parseInt(d,10)){e=!0;try{document.execCommand("BackgroundImageCache",!1,!0)}catch(v){}g+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}/msie/.test(a)&&
7==parseInt(d,10)&&(l=!0,g+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } ");!/compatible/.test(a)&&(/mozilla/.test(a)&&1.9>parseFloat(d,10))&&(f=!0,g+=".jstree ins { display:-moz-inline-box; } .jstree li { line-height:12px; } .jstree a { display:-moz-inline-box; } .jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } ");c.vakata.css.add_sheet({str:g,title:"jstree"})});c.jstree.plugin("core",{__init:function(){this.data.core.locked=!1;this.data.core.to_open=
this.get_settings().core.initially_open;this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:!1,animation:500,initially_open:[],initially_load:[],open_parents:!0,notify_plugins:!0,rtl:!1,load_open:!1,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus();this._get_settings().core.rtl&&this.get_container().addClass("jstree-rtl").css("direction","rtl");this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+
this._get_string("loading")+"</a></li></ul>");this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18;this.get_container().delegate("li > ins","click.jstree",c.proxy(function(a){a=c(a.target);this.toggle_node(a)},this)).bind("mousedown.jstree",c.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(a){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){a=window.getSelection();
try{a.removeAllRanges(),a.collapse()}catch(d){}}});this._get_settings().core.notify_plugins&&this.get_container().bind("load_node.jstree",c.proxy(function(a,d){var g=this._get_node(d.rslt.obj),v=this;-1===g&&(g=this.get_container_ul());g.length&&g.find("li").each(function(){var a=c(this);a.data("jstree")&&c.each(a.data("jstree"),function(d,g){v.data[d]&&c.isFunction(v["_"+d+"_notify"])&&v["_"+d+"_notify"].call(v,a,g)})})},this));this._get_settings().core.load_open&&this.get_container().bind("load_node.jstree",
c.proxy(function(a,d){var g=this._get_node(d.rslt.obj),v=this;-1===g&&(g=this.get_container_ul());g.length&&g.find("li.jstree-open:not(:has(ul))").each(function(){v.load_node(this,c.noop,c.noop)})},this));this.__callback();this.load_node(-1,function(){this.loaded();this.reload_nodes()})},destroy:function(){var v,e=this.get_index(),f=this._get_settings(),s=this;c.each(f.plugins,function(a,c){try{d[c].__destroy.apply(s)}catch(g){}});this.__callback();if(this.is_focused())for(v in a)if(a.hasOwnProperty(v)&&
v!=e){a[v].set_focus();break}e===g&&(g=-1);this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")});c(document).unbind(".jstree-"+e).undelegate(".jstree-"+e);a[e]=null;delete a[e]},_core_notify:function(a,d){d.opened&&this.open_node(a,!1,!0)},lock:function(){this.data.core.locked=!0;this.get_container().children("ul").addClass("jstree-locked").css("opacity",
"0.7");this.__callback({})},unlock:function(){this.data.core.locked=!1;this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1");this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var a=this;this.data.core.to_open=[];this.get_container_ul().find("li.jstree-open").each(function(){this.id&&a.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,
"\\.").replace(/\:/g,"\\:"))});this.__callback(a.data.core.to_open)},save_loaded:function(){},reload_nodes:function(a){var d=this,g=!0,v=[],e=[];a||(this.data.core.reopen=!1,this.data.core.refreshing=!0,this.data.core.to_open=c.map(c.makeArray(this.data.core.to_open),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_load=c.map(c.makeArray(this.data.core.to_load),function(a){return"#"+
a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_open.length&&(this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open)));this.data.core.to_load.length&&(c.each(this.data.core.to_load,function(a,d){if("#"==d)return!0;c(d).length?v.push(d):e.push(d)}),v.length&&(this.data.core.to_load=e,c.each(v,function(a,c){d._is_loaded(c)||(d.load_node(c,function(){d.reload_nodes(!0)},function(){d.reload_nodes(!0)}),
g=!1)})));this.data.core.to_open.length&&c.each(this.data.core.to_open,function(a,c){d.open_node(c,!1,!0)});g&&(this.data.core.reopen&&clearTimeout(this.data.core.reopen),this.data.core.reopen=setTimeout(function(){d.__callback({},d)},50),this.data.core.refreshing=!1,this.reopen())},reopen:function(){var a=this;this.data.core.to_open.length&&c.each(this.data.core.to_open,function(d,c){a.open_node(c,!1,!0)});this.__callback({})},refresh:function(a){var d=this;this.save_opened();a||(a=-1);(a=this._get_node(a))||
(a=-1);-1!==a?a.children("UL").remove():this.get_container_ul().empty();this.load_node(a,function(){d.__callback({obj:a});d.reload_nodes()})},loaded:function(){this.__callback()},set_focus:function(){if(!this.is_focused()){var a=c.jstree._focused();a&&a.unset_focus();this.get_container().addClass("jstree-focused");g=this.get_index();this.__callback()}},is_focused:function(){return g==this.get_index()},unset_focus:function(){this.is_focused()&&(this.get_container().removeClass("jstree-focused"),g=
-1);this.__callback()},_get_node:function(a){var d=c(a,this.get_container());if(d.is(".jstree")||-1==a)return-1;d=d.closest("li",this.get_container());return d.length?d:!1},_get_next:function(a,d){a=this._get_node(a);return-1===a?this.get_container().find("> ul > li:first-child"):!a.length?!1:d?0<a.nextAll("li").size()?a.nextAll("li:eq(0)"):!1:a.hasClass("jstree-open")?a.find("li:eq(0)"):0<a.nextAll("li").size()?a.nextAll("li:eq(0)"):a.parentsUntil(".jstree","li").next("li").eq(0)},_get_prev:function(a,
d){a=this._get_node(a);if(-1===a)return this.get_container().find("> ul > li:last-child");if(!a.length)return!1;if(d)return 0<a.prevAll("li").length?a.prevAll("li:eq(0)"):!1;if(a.prev("li").length){for(a=a.prev("li").eq(0);a.hasClass("jstree-open");)a=a.children("ul:eq(0)").children("li:last");return a}var c=a.parentsUntil(".jstree","li:eq(0)");return c.length?c:!1},_get_parent:function(a){a=this._get_node(a);if(-1==a||!a.length)return!1;a=a.parentsUntil(".jstree","li:eq(0)");return a.length?a:-1},
_get_children:function(a){a=this._get_node(a);return-1===a?this.get_container().children("ul:eq(0)").children("li"):!a.length?!1:a.children("ul:eq(0)").children("li")},get_path:function(a,d){var c=[],g=this;a=this._get_node(a);if(-1===a||!a||!a.length)return!1;a.parentsUntil(".jstree","li").each(function(){c.push(d?this.id:g.get_text(this))});c.reverse();c.push(d?a.attr("id"):this.get_text(a));return c},_get_string:function(a){return this._get_settings().core.strings[a]||a},is_open:function(a){return(a=
this._get_node(a))&&-1!==a&&a.hasClass("jstree-open")},is_closed:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-closed")},is_leaf:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-leaf")},correct_state:function(a){a=this._get_node(a);if(!a||-1===a)return!1;a.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:a})},open_node:function(a,d,c){a=this._get_node(a);if(!a.length)return!1;if(!a.hasClass("jstree-closed"))return d&&
d.call(),!1;var g=c||e?0:this._get_settings().core.animation,v=this;this._is_loaded(a)?(this._get_settings().core.open_parents&&a.parentsUntil(".jstree",".jstree-closed").each(function(){v.open_node(this,!1,!0)}),g&&a.children("ul").css("display","none"),a.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading"),g?a.children("ul").stop(!0,!0).slideDown(g,function(){this.style.display="";v.after_open(a)}):v.after_open(a),this.__callback({obj:a}),d&&d.call()):
(a.children("a").addClass("jstree-loading"),this.load_node(a,function(){v.open_node(a,d,c)},d))},after_open:function(a){this.__callback({obj:a})},close_node:function(a,d){a=this._get_node(a);var c=d||e?0:this._get_settings().core.animation,g=this;if(!a.length||!a.hasClass("jstree-open"))return!1;c&&a.children("ul").attr("style","display:block !important");a.removeClass("jstree-open").addClass("jstree-closed");c?a.children("ul").stop(!0,!0).slideUp(c,function(){this.style.display="";g.after_close(a)}):
g.after_close(a);this.__callback({obj:a})},after_close:function(a){this.__callback({obj:a})},toggle_node:function(a){a=this._get_node(a);if(a.hasClass("jstree-closed"))return this.open_node(a);if(a.hasClass("jstree-open"))return this.close_node(a)},open_all:function(a,d,c){a=a?this._get_node(a):-1;if(!a||-1===a)a=this.get_container_ul();c?a=a.find("li.jstree-closed"):(c=a,a=a.is(".jstree-closed")?a.find("li.jstree-closed").addBack():a.find("li.jstree-closed"));var g=this;a.each(function(){var a=this;
g._is_loaded(this)?g.open_node(this,!1,!d):g.open_node(this,function(){g.open_all(a,d,c)},!d)});0===c.find("li.jstree-closed").length&&this.__callback({obj:c})},close_all:function(a,d){var c=this;a=a?this._get_node(a):this.get_container();if(!a||-1===a)a=this.get_container_ul();a.find("li.jstree-open").addBack().each(function(){c.close_node(this,!d)});this.__callback({obj:a})},clean_node:function(a){a=a&&-1!=a?c(a):this.get_container_ul();a=a.is("li")?a.find("li").addBack():a.find("li");a.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed");
a.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:a})},get_rollback:function(){this.__callback();return{i:this.get_index(),h:this.get_container().children("ul").clone(!0),d:this.data}},set_rollback:function(a,d){this.get_container().empty().append(a);this.data=d;this.__callback()},load_node:function(a,d,c){this.__callback({obj:a})},_is_loaded:function(a){return!0},create_node:function(a,d,g,v,e){a=this._get_node(a);d="undefined"===typeof d?
"last":d;var f=c("<li />"),l=this._get_settings().core,G;if(-1!==a&&!a.length)return!1;if(!e&&!this._is_loaded(a))return this.load_node(a,function(){this.create_node(a,d,g,v,!0)}),!1;this.__rollback();"string"===typeof g&&(g={data:g});g||(g={});g.attr&&f.attr(g.attr);g.metadata&&f.data(g.metadata);g.state&&f.addClass("jstree-"+g.state);g.data||(g.data=this._get_string("new_node"));c.isArray(g.data)||(G=g.data,g.data=[],g.data.push(G));c.each(g.data,function(a,d){G=c("<a />");c.isFunction(d)&&(d=d.call(this,
g));if("string"==typeof d)G.attr("href","#")[l.html_titles?"html":"text"](d);else d.attr||(d.attr={}),d.attr.href||(d.attr.href="#"),G.attr(d.attr)[l.html_titles?"html":"text"](d.title),d.language&&G.addClass(d.language);G.prepend("<ins class='jstree-icon'>&#160;</ins>");!d.icon&&g.icon&&(d.icon=g.icon);d.icon&&(-1===d.icon.indexOf("/")?G.children("ins").addClass(d.icon):G.children("ins").css("background","url('"+d.icon+"') center center no-repeat"));f.append(G)});f.prepend("<ins class='jstree-icon'>&#160;</ins>");
-1===a&&(a=this.get_container(),"before"===d&&(d="first"),"after"===d&&(d="last"));switch(d){case "before":a.before(f);G=this._get_parent(a);break;case "after":a.after(f);G=this._get_parent(a);break;case "inside":case "first":a.children("ul").length||a.append("<ul />");a.children("ul").prepend(f);G=a;break;case "last":a.children("ul").length||a.append("<ul />");a.children("ul").append(f);G=a;break;default:a.children("ul").length||a.append("<ul />"),d||(d=0),G=a.children("ul").children("li").eq(d),
G.length?G.before(f):a.children("ul").append(f),G=a}if(-1===G||G.get(0)===this.get_container().get(0))G=-1;this.clean_node(G);this.__callback({obj:f,parent:G});v&&v.call(this,f);return f},get_text:function(a){a=this._get_node(a);if(!a.length)return!1;var d=this._get_settings().core.html_titles;a=a.children("a:eq(0)");if(d)return a=a.clone(),a.children("INS").remove(),a.html();a=a.contents().filter(function(){return 3==this.nodeType})[0];return a.nodeValue},set_text:function(a,d){a=this._get_node(a);
if(!a.length)return!1;a=a.children("a:eq(0)");if(this._get_settings().core.html_titles){var c=a.children("INS").clone();a.html(d).prepend(c);this.__callback({obj:a,name:d});return!0}a=a.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:a,name:d});return a.nodeValue=d},rename_node:function(a,d){a=this._get_node(a);this.__rollback();a&&(a.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments)))&&this.__callback({obj:a,name:d})},delete_node:function(a){a=
this._get_node(a);if(!a.length)return!1;this.__rollback();var d=this._get_parent(a),g=c([]),v=this;a.each(function(){g=g.add(v._get_prev(this))});a=a.detach();-1!==d&&0===d.find("> ul > li").length&&d.removeClass("jstree-open jstree-closed").addClass("jstree-leaf");this.clean_node(d);this.__callback({obj:a,prev:g,parent:d});return a},prepare_move:function(a,d,g,e,f){var u={};u.ot=c.jstree._reference(a)||this;u.o=u.ot._get_node(a);u.r=-1===d?-1:this._get_node(d);u.p="undefined"===typeof g||!1===g?
"last":g;if(f||!v.o||!(v.o[0]===u.o[0]&&v.r[0]===u.r[0]&&v.p===u.p)){u.ot=c.jstree._reference(u.o)||this;u.rt=c.jstree._reference(u.r)||this;if(-1===u.r||!u.r)switch(u.cr=-1,u.p){case "first":case "before":case "inside":u.cp=0;break;case "after":case "last":u.cp=u.rt.get_container().find(" > ul > li").length;break;default:u.cp=u.p}else{if(!/^(before|after)$/.test(u.p)&&!this._is_loaded(u.r))return this.load_node(u.r,function(){this.prepare_move(a,d,g,e,!0)});switch(u.p){case "before":u.cp=u.r.index();
u.cr=u.rt._get_parent(u.r);break;case "after":u.cp=u.r.index()+1;u.cr=u.rt._get_parent(u.r);break;case "inside":case "first":u.cp=0;u.cr=u.r;break;case "last":u.cp=u.r.find(" > ul > li").length;u.cr=u.r;break;default:u.cp=u.p,u.cr=u.r}}u.np=-1==u.cr?u.rt.get_container():u.cr;u.op=u.ot._get_parent(u.o);u.cop=u.o.index();-1===u.op&&(u.op=u.ot?u.ot.get_container():this.get_container());!/^(before|after)$/.test(u.p)&&(u.op&&u.np&&u.op[0]===u.np[0]&&u.o.index()<u.cp)&&u.cp++;u.or=u.np.find(" > ul > li:nth-child("+
(u.cp+1)+")");v=u}this.__callback(v);e&&e.call(this,v)},check_move:function(){var a=v,d=!0,c=-1===a.r?this.get_container():a.r;if(!a||!a.o||a.or[0]===a.o[0])return!1;if(!a.cy){if(a.op&&a.np&&a.op[0]===a.np[0]&&a.cp-1===a.o.index())return!1;a.o.each(function(){if(-1!==c.parentsUntil(".jstree","li").addBack().index(this))return d=!1})}return d},move_node:function(a,d,g,e,f,u){if(!f)return this.prepare_move(a,d,g,function(a){this.move_node(a,!1,!1,e,!0,u)});e&&(v.cy=!0);if(!u&&!this.check_move())return!1;
this.__rollback();d=!1;e?(d=a.o.clone(!0),d.find("*[id]").addBack().each(function(){this.id&&(this.id="copy_"+this.id)})):d=a.o;a.or.length?a.or.before(d):(a.np.children("ul").length||c("<ul />").appendTo(a.np),a.np.children("ul:eq(0)").append(d));try{a.ot.clean_node(a.op),a.rt.clean_node(a.np),a.op.find("> ul > li").length||a.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(l){}e&&(v.cy=!0,v.oc=d);this.__callback(v);return v},_get_move:function(){return v}}})})(jQuery);
(function(c){var a,g,d;c(function(){/msie/.test(navigator.userAgent.toLowerCase())?(g=c('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),d=c('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),a=g.width()-d.width(),g.add(d).remove()):(g=c("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1E3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",
height:200}),a=100-g.width(),g.parent().remove())});c.jstree.plugin("ui",{__init:function(){this.data.ui.selected=c();this.data.ui.last_selected=!1;this.data.ui.hovered=null;this.data.ui.to_select=this.get_settings().ui.initially_select;this.get_container().delegate("a","click.jstree",c.proxy(function(a){a.preventDefault();a.currentTarget.blur();c(a.currentTarget).hasClass("jstree-loading")||this.select_node(a.currentTarget,!0,a)},this)).delegate("a","mouseenter.jstree",c.proxy(function(a){c(a.currentTarget).hasClass("jstree-loading")||
this.hover_node(a.target)},this)).delegate("a","mouseleave.jstree",c.proxy(function(a){c(a.currentTarget).hasClass("jstree-loading")||this.dehover_node(a.target)},this)).bind("reopen.jstree",c.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",c.proxy(function(){this.dehover_node();this.save_selected()},this)).bind("set_rollback.jstree",c.proxy(function(){this.reselect()},this)).bind("close_node.jstree",c.proxy(function(a,d){var g=this._get_settings().ui,e=this._get_node(d.rslt.obj),
f=e&&e.length?e.children("ul").find("a.jstree-clicked"):c(),l=this;!1!==g.selected_parent_close&&f.length&&f.each(function(){l.deselect_node(this);"select_parent"===g.selected_parent_close&&l.select_node(e)})},this)).bind("delete_node.jstree",c.proxy(function(a,d){var c=this._get_settings().ui.select_prev_on_delete,g=this._get_node(d.rslt.obj),g=g&&g.length?g.find("a.jstree-clicked"):[],e=this;g.each(function(){e.deselect_node(this)});c&&g.length&&d.rslt.prev.each(function(){if(this.parentNode)return e.select_node(this),
!1})},this)).bind("move_node.jstree",c.proxy(function(a,d){d.rslt.cy&&d.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:!0,select_prev_on_delete:!0,disable_selecting_children:!1,initially_select:[]},_fn:{_get_node:function(a,d){if("undefined"===typeof a||null===a)return d?this.data.ui.selected:this.data.ui.last_selected;var g=c(a,
this.get_container());if(g.is(".jstree")||-1==a)return-1;g=g.closest("li",this.get_container());return g.length?g:!1},_ui_notify:function(a,d){d.selected&&this.select_node(a,!1)},save_selected:function(){var a=this;this.data.ui.to_select=[];this.data.ui.selected.each(function(){this.id&&a.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))});this.__callback(this.data.ui.to_select)},
reselect:function(){var a=this,d=this.data.ui.to_select,d=c.map(c.makeArray(d),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});c.each(d,function(d,g){g&&"#"!==g&&a.select_node(g)});this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode});this.__callback()},refresh:function(a){this.save_selected();return this.__call_old()},hover_node:function(a){a=this._get_node(a);
if(!a.length)return!1;a.hasClass("jstree-hovered")||this.dehover_node();this.data.ui.hovered=a.children("a").addClass("jstree-hovered").parent();this._fix_scroll(a);this.__callback({obj:a})},dehover_node:function(){var a=this.data.ui.hovered,d;if(!a||!a.length)return!1;d=a.children("a").removeClass("jstree-hovered").parent();this.data.ui.hovered[0]===d[0]&&(this.data.ui.hovered=null);this.__callback({obj:a})},select_node:function(a,d,g){a=this._get_node(a);if(-1==a||!a||!a.length)return!1;var c=this._get_settings().ui,
e="on"==c.select_multiple_modifier||!1!==c.select_multiple_modifier&&g&&g[c.select_multiple_modifier+"Key"],f=!1!==c.select_range_modifier&&g&&g[c.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==a[0]&&this.data.ui.last_selected.parent()[0]===a.parent()[0],u=this.is_selected(a),l=!0,G=this;if(d){if(c.disable_selecting_children&&e&&(a.parentsUntil(".jstree","li").children("a.jstree-clicked").length||a.children("ul").find("a.jstree-clicked:eq(0)").length))return!1;
l=!1;switch(!0){case f:this.data.ui.last_selected.addClass("jstree-last-selected");a=a[a.index()<this.data.ui.last_selected.index()?"nextUntil":"prevUntil"](".jstree-last-selected").addBack();-1==c.select_limit||a.length<c.select_limit?(this.data.ui.last_selected.removeClass("jstree-last-selected"),this.data.ui.selected.each(function(){this!==G.data.ui.last_selected[0]&&G.deselect_node(this)}),u=!1,l=!0):l=!1;break;case u&&!e:this.deselect_all();u=!1;l=!0;break;case !u&&!e:if(-1==c.select_limit||
0<c.select_limit)this.deselect_all(),l=!0;break;case u&&e:this.deselect_node(a);break;case !u&&e:if(-1==c.select_limit||this.data.ui.selected.length+1<=c.select_limit)l=!0}}l&&!u&&(f||(this.data.ui.last_selected=a),a.children("a").addClass("jstree-clicked"),c.selected_parent_open&&a.parents(".jstree-closed").each(function(){G.open_node(this,!1,!0)}),this.data.ui.selected=this.data.ui.selected.add(a),this._fix_scroll(a.eq(0)),this.__callback({obj:a,e:g}))},_fix_scroll:function(d){var g=this.get_container()[0];
if(g.scrollHeight>g.offsetHeight&&(d=this._get_node(d))&&!(-1===d||!d.length||!d.is(":visible")))if(d=d.offset().top-this.get_container().offset().top,0>d&&(g.scrollTop=g.scrollTop+d-1),d+this.data.core.li_height+(g.scrollWidth>g.offsetWidth?a:0)>g.offsetHeight)g.scrollTop+=d-g.offsetHeight+this.data.core.li_height+1+(g.scrollWidth>g.offsetWidth?a:0)},deselect_node:function(a){a=this._get_node(a);if(!a.length)return!1;this.is_selected(a)&&(a.children("a").removeClass("jstree-clicked"),this.data.ui.selected=
this.data.ui.selected.not(a),this.data.ui.last_selected.get(0)===a.get(0)&&(this.data.ui.last_selected=this.data.ui.selected.eq(0)),this.__callback({obj:a}))},toggle_select:function(a){a=this._get_node(a);if(!a.length)return!1;this.is_selected(a)?this.deselect_node(a):this.select_node(a)},is_selected:function(a){return 0<=this.data.ui.selected.index(this._get_node(a))},get_selected:function(a){return a?c(a).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(a){a=a?c(a).find("a.jstree-clicked").parent():
this.get_container().find("a.jstree-clicked").parent();a.children("a.jstree-clicked").removeClass("jstree-clicked");this.data.ui.selected=c([]);this.data.ui.last_selected=!1;this.__callback({obj:a})}}});c.jstree.defaults.plugins.push("ui")})(jQuery);(function(c){c.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",c.proxy(function(a,g){if(this._get_settings().crrm.move.open_onmove){var d=this;g.rslt.np.parentsUntil(".jstree").addBack().filter(".jstree-closed").each(function(){d.open_node(this,
!1,!0)})}},this))},defaults:{input_width_limit:200,move:{always_copy:!1,open_onmove:!0,default_position:"last",check_move:function(a){return!0}}},_fn:{_show_input:function(a,g){a=this._get_node(a);var d=this._get_settings().core.rtl,v=this._get_settings().crrm.input_width_limit,e=a.children("ins").width(),f=a.find("> a:visible > ins").width()*a.find("> a:visible > ins").length,E=this.get_text(a),s=c("<div />",{css:{position:"absolute",top:"-200px",left:d?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),
l=a.css("position","relative").append(c("<input />",{value:E,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:d?"auto":e+f+4+"px",right:d?e+f+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:c.proxy(function(){var d=a.children(".jstree-rename-input"),c=d.val();""===c&&(c=E);s.remove();d.remove();this.set_text(a,E);this.rename_node(a,c);g.call(this,a,c,E);a.css("position","")},
this),keyup:function(a){a=a.keyCode||a.which;27==a?(this.value=E,this.blur()):13==a?this.blur():l.width(Math.min(s.text("pW"+this.value).width(),v))},keypress:function(a){if(13==(a.keyCode||a.which))return!1}})).children(".jstree-rename-input");this.set_text(a,"");s.css({fontFamily:l.css("fontFamily")||"",fontSize:l.css("fontSize")||"",fontWeight:l.css("fontWeight")||"",fontStyle:l.css("fontStyle")||"",fontStretch:l.css("fontStretch")||"",fontVariant:l.css("fontVariant")||"",letterSpacing:l.css("letterSpacing")||
"",wordSpacing:l.css("wordSpacing")||""});l.width(Math.min(s.text("pW"+l[0].value).width(),v))[0].select()},rename:function(a){a=this._get_node(a);this.__rollback();var g=this.__callback;this._show_input(a,function(a,c,e){g.call(this,{obj:a,new_name:c,old_name:e})})},create:function(a,g,d,v,e){var f=this;(a=this._get_node(a))||(a=-1);this.__rollback();return this.create_node(a,g,d,function(a){var d=this._get_parent(a),g=c(a).index();v&&v.call(this,a);d.length&&d.hasClass("jstree-closed")&&this.open_node(d,
!1,!0);e?f.__callback({obj:a,name:this.get_text(a),parent:d,position:g}):this._show_input(a,function(a,c,e){f.__callback({obj:a,name:c,parent:d,position:g})})})},remove:function(a){a=this._get_node(a,!0);var g=this._get_parent(a),d=this._get_prev(a);this.__rollback();a=this.delete_node(a);!1!==a&&this.__callback({obj:a,prev:d,parent:g})},check_move:function(){return!this.__call_old()||!this._get_settings().crrm.move.check_move.call(this,this._get_move())?!1:!0},move_node:function(a,g,d,c,e,f){var E=
this._get_settings().crrm.move;if(!e)return"undefined"===typeof d&&(d=E.default_position),"inside"===d&&!E.default_position.match(/^(before|after)$/)&&(d=E.default_position),this.__call_old(!0,a,g,d,c,!1,f);if(!0===E.always_copy||"multitree"===E.always_copy&&a.rt.get_index()!==a.ot.get_index())c=!0;this.__call_old(!0,a,g,d,c,!0,f)},cut:function(a){a=this._get_node(a,!0);if(!a||!a.length)return!1;this.data.crrm.cp_nodes=!1;this.data.crrm.ct_nodes=a;this.__callback({obj:a})},copy:function(a){a=this._get_node(a,
!0);if(!a||!a.length)return!1;this.data.crrm.ct_nodes=!1;this.data.crrm.cp_nodes=a;this.__callback({obj:a})},paste:function(a){a=this._get_node(a);if(!a||!a.length)return!1;var g=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:this.data.crrm.cp_nodes;if(!this.data.crrm.ct_nodes&&!this.data.crrm.cp_nodes)return!1;this.data.crrm.ct_nodes&&(this.move_node(this.data.crrm.ct_nodes,a),this.data.crrm.ct_nodes=!1);this.data.crrm.cp_nodes&&this.move_node(this.data.crrm.cp_nodes,a,!1,!0);this.__callback({obj:a,
nodes:g})}}})})(jQuery);(function(c){var a=[];c.jstree._themes=!1;c.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",c.proxy(function(){var a=this._get_settings().themes;this.data.themes.dots=a.dots;this.data.themes.icons=a.icons;this.set_theme(a.theme,a.url)},this)).bind("loaded.jstree",c.proxy(function(){this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons()},this))},defaults:{theme:"default",url:!1,dots:!0,
icons:!0},_fn:{set_theme:function(g,d){if(!g)return!1;d||(d=c.jstree._themes+g+"/style.css");-1==c.inArray(d,a)&&(c.vakata.css.add_sheet({url:d}),a.push(d));this.data.themes.theme!=g&&(this.get_container().removeClass("jstree-"+this.data.themes.theme),this.data.themes.theme=g);this.get_container().addClass("jstree-"+g);this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons();this.__callback()},get_theme:function(){return this.data.themes.theme},
show_dots:function(){this.data.themes.dots=!0;this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=!1;this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons=!0;this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=!1;this.get_container().children("ul").addClass("jstree-no-icons")},
toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()}}});c(function(){!1===c.jstree._themes&&c("script").each(function(){if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/))return c.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/",!1});!1===c.jstree._themes&&(c.jstree._themes="themes/")});c.jstree.defaults.plugins.push("themes")})(jQuery);(function(c){var a=[];c.jstree.plugin("hotkeys",{__init:function(){if("undefined"===
typeof c.hotkeys)throw"jsTree hotkeys: jQuery hotkeys plugin not included.";if(!this.data.ui)throw"jsTree hotkeys: jsTree UI plugin not included.";c.each(this._get_settings().hotkeys,function(g,d){!1!==d&&-1==c.inArray(g,a)&&(c(document).bind("keydown",g,function(a){a:{var d=c.jstree._focused(),e;if(d&&(d.data&&d.data.hotkeys&&d.data.hotkeys.enabled)&&(e=d._get_settings().hotkeys[g])){a=e.call(d,a);break a}a=void 0}return a}),a.push(g))});this.get_container().bind("lock.jstree",c.proxy(function(){this.data.hotkeys.enabled&&
(this.data.hotkeys.enabled=!1,this.data.hotkeys.revert=!0)},this)).bind("unlock.jstree",c.proxy(function(){this.data.hotkeys.revert&&(this.data.hotkeys.enabled=!0)},this));this.enable_hotkeys()},defaults:{up:function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"ctrl+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||
this.data.ui.last_selected||-1));return!1},down:function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"ctrl+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},left:function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):
this.hover_node(this._get_prev(a)));return!1},"ctrl+left":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},"shift+left":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},right:function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?
this.open_node(a):this.hover_node(this._get_next(a)));return!1},"ctrl+right":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},"shift+right":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},space:function(){this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").click();
return!1},"ctrl+space":function(a){a.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(a);return!1},"shift+space":function(a){a.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(a);return!1},f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled=!0},disable_hotkeys:function(){this.data.hotkeys.enabled=
!1}}})})(jQuery);(function(c){c.jstree.plugin("json_data",{__init:function(){this._get_settings().json_data.progressive_unload&&this.get_container().bind("after_close.jstree",function(a,c){c.rslt.obj.children("ul").remove()})},defaults:{data:!1,ajax:!1,correct_state:!0,progressive_render:!1,progressive_unload:!1},_fn:{load_node:function(a,c,d){var e=this;this.load_node_json(a,function(){e.__callback({obj:e._get_node(a)});c.call(this)},d)},_is_loaded:function(a){var g=this._get_settings().json_data;
a=this._get_node(a);return-1==a||!a||!g.ajax&&!g.progressive_render&&!c.isFunction(g.data)||a.is(".jstree-open, .jstree-leaf")||0<a.children("ul").children("li").length},refresh:function(a){a=this._get_node(a);var g=this._get_settings().json_data;a&&(-1!==a&&g.progressive_unload&&(c.isFunction(g.data)||g.ajax))&&a.removeData("jstree_children");return this.__call_old()},load_node_json:function(a,g,d){var e=this.get_settings().json_data,f,p=function(){};f=function(){};if((a=this._get_node(a))&&-1!==
a&&(e.progressive_render||e.progressive_unload)&&!a.is(".jstree-open, .jstree-leaf")&&0===a.children("ul").children("li").length&&a.data("jstree_children")){if(f=this._parse_json(a.data("jstree_children"),a))a.append(f),e.progressive_unload||a.removeData("jstree_children");this.clean_node(a);g&&g.call(this)}else{if(a&&-1!==a){if(a.data("jstree_is_loading"))return;a.data("jstree_is_loading",!0)}switch(!0){case !e.data&&!e.ajax:throw"Neither data nor ajax settings supplied.";case c.isFunction(e.data):e.data.call(this,
a,c.proxy(function(c){(c=this._parse_json(c,a))?(-1===a||!a?this.get_container().children("ul").empty().append(c.children()):(a.append(c).children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading")),this.clean_node(a),g&&g.call(this)):(-1===a||!a?e.correct_state&&this.get_container().children("ul").empty():(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),e.correct_state&&this.correct_state(a)),d&&d.call(this))},this));
break;case !!e.data&&!e.ajax||!!e.data&&!!e.ajax&&(!a||-1===a):if(!a||-1==a)(f=this._parse_json(e.data,a))?(this.get_container().children("ul").empty().append(f.children()),this.clean_node()):e.correct_state&&this.get_container().children("ul").empty();g&&g.call(this);break;case !e.data&&!!e.ajax||!!e.data&&!!e.ajax&&a&&-1!==a:p=function(c,g,f){var t=this.get_settings().json_data.ajax.error;t&&t.call(this,c,g,f);-1!=a&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),
"success"===g&&e.correct_state&&this.correct_state(a)):"success"===g&&e.correct_state&&this.get_container().children("ul").empty();d&&d.call(this)},f=function(d,f,t){var l=this.get_settings().json_data.ajax.success;l&&(d=l.call(this,d,f,t)||d);if(""===d||d&&d.toString&&""===d.toString().replace(/^[\s\n]+$/,"")||!c.isArray(d)&&!c.isPlainObject(d))return p.call(this,t,f,"");(d=this._parse_json(d,a))?(-1===a||!a?this.get_container().children("ul").empty().append(d.children()):(a.append(d).children("a.jstree-loading").removeClass("jstree-loading"),
a.removeData("jstree_is_loading")),this.clean_node(a),g&&g.call(this)):-1===a||!a?e.correct_state&&(this.get_container().children("ul").empty(),g&&g.call(this)):(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),e.correct_state&&(this.correct_state(a),g&&g.call(this)))},e.ajax.context=this,e.ajax.error=p,e.ajax.success=f,e.ajax.dataType||(e.ajax.dataType="json"),c.isFunction(e.ajax.url)&&(e.ajax.url=e.ajax.url.call(this,a)),c.isFunction(e.ajax.data)&&(e.ajax.data=
e.ajax.data.call(this,a)),c.ajax(e.ajax)}}},_parse_json:function(a,g,d){var e=!1,f=this._get_settings(),p=f.json_data,E=f.core.html_titles,s;if(!a)return e;p.progressive_unload&&(g&&-1!==g)&&g.data("jstree_children",e);if(c.isArray(a)){e=c("<ul>");if(!a.length)return!1;f=0;for(p=a.length;f<p;f++)s=this._parse_json(a[f],g,!0),s.length&&(e=e.append(s));e=e.children()}else{"string"==typeof a&&(a={data:a});if(!a.data&&""!==a.data)return e;e=c("<li />");a.attr&&e.attr(a.attr);a.metadata&&e.data(a.metadata);
a.state&&e.addClass("jstree-"+a.state);c.isArray(a.data)||(s=a.data,a.data=[],a.data.push(s));c.each(a.data,function(d,g){s=c("<a />");c.isFunction(g)&&(g=g.call(this,a));if("string"==typeof g)s.attr("href","#")[E?"html":"text"](g);else g.attr||(g.attr={}),g.attr.href||(g.attr.href="#"),s.attr(g.attr)[E?"html":"text"](g.title),g.language&&s.addClass(g.language);s.prepend("<ins class='jstree-icon'>&#160;</ins>");!g.icon&&a.icon&&(g.icon=a.icon);g.icon&&(-1===g.icon.indexOf("/")?s.children("ins").addClass(g.icon):
s.children("ins").css("background","url('"+g.icon+"') center center no-repeat"));e.append(s)});e.prepend("<ins class='jstree-icon'>&#160;</ins>");a.children&&(p.progressive_render&&"open"!==a.state?e.addClass("jstree-closed").data("jstree_children",a.children):(p.progressive_unload&&e.data("jstree_children",a.children),c.isArray(a.children)&&a.children.length&&(s=this._parse_json(a.children,g,!0),s.length&&(g=c("<ul />"),g.append(s),e.append(g)))))}d||(d=c("<ul />"),d.append(e),e=d);return e},get_json:function(a,
g,d,e){var f=[],p=this._get_settings(),E=this,s,l,u,K,G,Q;a=this._get_node(a);if(!a||-1===a)a=this.get_container().find("> ul > li");g=c.isArray(g)?g:["id","class"];!e&&this.data.types&&g.push(p.types.type_attr);d=c.isArray(d)?d:[];a.each(function(){u=c(this);s={data:[]};g.length&&(s.attr={});c.each(g,function(a,d){(l=u.attr(d))&&(l.length&&l.replace(/jstree[^ ]*/ig,"").length)&&(s.attr[d]=(" "+l).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))});u.hasClass("jstree-open")&&
(s.state="open");u.hasClass("jstree-closed")&&(s.state="closed");u.data()&&(s.metadata=u.data());K=u.children("a");K.each(function(){G=c(this);d.length||-1!==c.inArray("languages",p.plugins)||G.children("ins").get(0).style.backgroundImage.length||G.children("ins").get(0).className&&G.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").length?(Q=!1,-1!==c.inArray("languages",p.plugins)&&(c.isArray(p.languages)&&p.languages.length)&&c.each(p.languages,function(a,d){if(G.hasClass(d))return Q=
d,!1}),l={attr:{},title:E.get_text(G,Q)},c.each(d,function(a,d){l.attr[d]=(" "+(G.attr(d)||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")}),-1!==c.inArray("languages",p.plugins)&&(c.isArray(p.languages)&&p.languages.length)&&c.each(p.languages,function(a,d){if(G.hasClass(d))return l.language=d,!0}),G.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(l.icon=G.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,
"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")),G.children("ins").get(0).style.backgroundImage.length&&(l.icon=G.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")",""))):l=E.get_text(G);1<K.length?s.data.push(l):s.data=l});u=u.find("> ul > li");u.length&&(s.children=E.get_json(u,g,d,!0));f.push(s)});return f}}})})(jQuery);(function(c){var a=!1;c.jstree.plugin("languages",{__init:function(){this._load_css()},defaults:[],_fn:{set_lang:function(g){var d=this._get_settings().languages,
e=!1,f=".jstree-"+this.get_index()+" a";if(!c.isArray(d)||0===d.length)return!1;if(-1==c.inArray(g,d))if(d[g])g=d[g];else return!1;if(g==this.data.languages.current_language)return!0;e=c.vakata.css.get_css(f+"."+this.data.languages.current_language,!1,a);!1!==e&&(e.style.display="none");e=c.vakata.css.get_css(f+"."+g,!1,a);!1!==e&&(e.style.display="");this.data.languages.current_language=g;this.__callback(g);return!0},get_lang:function(){return this.data.languages.current_language},_get_string:function(a,
d){var e=this._get_settings().languages,f=this._get_settings().core.strings;c.isArray(e)&&e.length&&(d=d&&-1!=c.inArray(d,e)?d:this.data.languages.current_language);return f[d]&&f[d][a]?f[d][a]:f[a]?f[a]:a},get_text:function(a,d){a=this._get_node(a)||this.data.ui.last_selected;if(!a.size())return!1;var e=this._get_settings().languages,f=this._get_settings().core.html_titles;c.isArray(e)&&e.length?(d=d&&-1!=c.inArray(d,e)?d:this.data.languages.current_language,a=a.children("a."+d)):a=a.children("a:eq(0)");
if(f)return a=a.clone(),a.children("INS").remove(),a.html();a=a.contents().filter(function(){return 3==this.nodeType})[0];return a.nodeValue},set_text:function(a,d,e){a=this._get_node(a)||this.data.ui.last_selected;if(!a.size())return!1;var f=this._get_settings().languages,p=this._get_settings().core.html_titles;c.isArray(f)&&f.length?(e=e&&-1!=c.inArray(e,f)?e:this.data.languages.current_language,a=a.children("a."+e)):a=a.children("a:eq(0)");if(p)return f=a.children("INS").clone(),a.html(d).prepend(f),
this.__callback({obj:a,name:d,lang:e}),!0;a=a.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:a,name:d,lang:e});return a.nodeValue=d},_load_css:function(){var g=this._get_settings().languages,d="/* languages css */",e=".jstree-"+this.get_index()+" a",f;if(c.isArray(g)&&g.length){this.data.languages.current_language=g[0];for(f=0;f<g.length;f++)d+=e+"."+g[f]+" {",g[f]!=this.data.languages.current_language&&(d+=" display:none; "),d+=" } ";a=c.vakata.css.add_sheet({str:d,
title:"jstree-languages"})}},create_node:function(a,d,e,f){return this.__call_old(!0,a,d,e,function(a){var d=this._get_settings().languages,g=a.children("a"),e;if(c.isArray(d)&&d.length){for(e=0;e<d.length;e++)g.is("."+d[e])||a.append(g.eq(0).clone().removeClass(d.join(" ")).addClass(d[e]));g.not("."+d.join(", .")).remove()}f&&f.call(this,a)})}}})})(jQuery);(function(c){c.jstree.plugin("cookies",{__init:function(){if("undefined"===typeof c.cookie)throw"jsTree cookie: jQuery cookie plugin not included.";
var a=this._get_settings().cookies,g;if(a.save_loaded&&(g=c.cookie(a.save_loaded))&&g.length)this.data.core.to_load=g.split(",");if(a.save_opened&&(g=c.cookie(a.save_opened))&&g.length)this.data.core.to_open=g.split(",");if(a.save_selected&&(g=c.cookie(a.save_selected))&&g.length&&this.data.ui)this.data.ui.to_select=g.split(",");this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",c.proxy(function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",
c.proxy(function(a){this._get_settings().cookies.auto_save&&this.save_cookie((a.handleObj.namespace+a.handleObj.type).replace("jstree",""))},this))},this))},defaults:{save_loaded:"jstree_load",save_opened:"jstree_open",save_selected:"jstree_select",auto_save:!0,cookie_options:{}},_fn:{save_cookie:function(a){if(!this.data.core.refreshing){var g=this._get_settings().cookies;if(a)switch(a){case "open_node":case "close_node":g.save_opened&&(this.save_opened(),c.cookie(g.save_opened,this.data.core.to_open.join(","),
g.cookie_options));g.save_loaded&&(this.save_loaded(),c.cookie(g.save_loaded,this.data.core.to_load.join(","),g.cookie_options));break;case "select_node":case "deselect_node":g.save_selected&&this.data.ui&&(this.save_selected(),c.cookie(g.save_selected,this.data.ui.to_select.join(","),g.cookie_options))}else g.save_loaded&&(this.save_loaded(),c.cookie(g.save_loaded,this.data.core.to_load.join(","),g.cookie_options)),g.save_opened&&(this.save_opened(),c.cookie(g.save_opened,this.data.core.to_open.join(","),
g.cookie_options)),g.save_selected&&this.data.ui&&(this.save_selected(),c.cookie(g.save_selected,this.data.ui.to_select.join(","),g.cookie_options))}}}})})(jQuery);(function(c){c.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",c.proxy(function(a,c){var d=this._get_node(c.rslt.obj),d=-1===d?this.get_container().children("ul"):d.children("ul");this.sort(d)},this)).bind("rename_node.jstree create_node.jstree create.jstree",c.proxy(function(a,c){this.sort(c.rslt.obj.parent())},
this)).bind("move_node.jstree",c.proxy(function(a,c){var d=-1==c.rslt.np?this.get_container():c.rslt.np;this.sort(d.children("ul"))},this))},defaults:function(a,c){return this.get_text(a)>this.get_text(c)?1:-1},_fn:{sort:function(a){var g=this._get_settings().sort,d=this;a.append(c.makeArray(a.children("li")).sort(c.proxy(g,d)));a.find("> li > ul").each(function(){d.sort(c(this))});this.clean_node(a)}}})})(jQuery);(function(c){var a=!1,g=!1,d=!1,e=!1,f=!1,p=!1,l=!1,s=!1,I=!1;c.vakata.dnd={is_down:!1,
is_drag:!1,helper:!1,scroll_spd:10,init_x:0,init_y:0,threshold:5,helper_left:5,helper_top:10,user_data:{},drag_start:function(a,d,g){c.vakata.dnd.is_drag&&c.vakata.drag_stop({});try{a.currentTarget.unselectable="on",a.currentTarget.onselectstart=function(){return!1},a.currentTarget.style&&(a.currentTarget.style.MozUserSelect="none")}catch(e){}c.vakata.dnd.init_x=a.pageX;c.vakata.dnd.init_y=a.pageY;c.vakata.dnd.user_data=d;c.vakata.dnd.is_down=!0;c.vakata.dnd.helper=c("<div id='vakata-dragged' />").html(g);
c(document).bind("mousemove",c.vakata.dnd.drag);c(document).bind("mouseup",c.vakata.dnd.drag_stop);return!1},drag:function(a){if(c.vakata.dnd.is_down){if(!c.vakata.dnd.is_drag)if(5<Math.abs(a.pageX-c.vakata.dnd.init_x)||5<Math.abs(a.pageY-c.vakata.dnd.init_y))c.vakata.dnd.helper.appendTo("body"),c.vakata.dnd.is_drag=!0,c(document).triggerHandler("drag_start.vakata",{event:a,data:c.vakata.dnd.user_data});else return;if("mousemove"===a.type){var d=c(document),g=d.scrollTop(),d=d.scrollLeft();20>a.pageY-
g?(p&&"down"===l&&(clearInterval(p),p=!1),p||(l="up",p=setInterval(function(){c(document).scrollTop(c(document).scrollTop()-c.vakata.dnd.scroll_spd)},150))):p&&"up"===l&&(clearInterval(p),p=!1);20>c(window).height()-(a.pageY-g)?(p&&"up"===l&&(clearInterval(p),p=!1),p||(l="down",p=setInterval(function(){c(document).scrollTop(c(document).scrollTop()+c.vakata.dnd.scroll_spd)},150))):p&&"down"===l&&(clearInterval(p),p=!1);20>a.pageX-d?(f&&"right"===s&&(clearInterval(f),f=!1),f||(s="left",f=setInterval(function(){c(document).scrollLeft(c(document).scrollLeft()-
c.vakata.dnd.scroll_spd)},150))):f&&"left"===s&&(clearInterval(f),f=!1);20>c(window).width()-(a.pageX-d)?(f&&"left"===s&&(clearInterval(f),f=!1),f||(s="right",f=setInterval(function(){c(document).scrollLeft(c(document).scrollLeft()+c.vakata.dnd.scroll_spd)},150))):f&&"right"===s&&(clearInterval(f),f=!1)}c.vakata.dnd.helper.css({left:a.pageX+c.vakata.dnd.helper_left+"px",top:a.pageY+c.vakata.dnd.helper_top+"px"});c(document).triggerHandler("drag.vakata",{event:a,data:c.vakata.dnd.user_data})}},drag_stop:function(a){f&&
clearInterval(f);p&&clearInterval(p);c(document).unbind("mousemove",c.vakata.dnd.drag);c(document).unbind("mouseup",c.vakata.dnd.drag_stop);c(document).triggerHandler("drag_stop.vakata",{event:a,data:c.vakata.dnd.user_data});c.vakata.dnd.helper.remove();c.vakata.dnd.init_x=0;c.vakata.dnd.init_y=0;c.vakata.dnd.user_data={};c.vakata.dnd.is_down=!1;c.vakata.dnd.is_drag=!1}};c(function(){c.vakata.css.add_sheet({str:"#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } ",
title:"vakata"})});c.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:!1,after:!1,inside:!1,before:!1,off:!1,prepared:!1,w:0,to1:!1,to2:!1,cof:!1,cw:!1,ch:!1,i1:!1,i2:!1,mto:!1};this.get_container().bind("mouseenter.jstree",c.proxy(function(g){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&(this.data.themes&&(d.attr("class","jstree-"+this.data.themes.theme),e&&e.attr("class","jstree-"+this.data.themes.theme),c.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),
g.currentTarget===g.target&&(c.vakata.dnd.user_data.obj&&c(c.vakata.dnd.user_data.obj).length&&c(c.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==g.target)&&(g=c.jstree._reference(g.target),g.data.dnd.foreign?(g=g._get_settings().dnd.drag_check.call(this,{o:a,r:g.get_container(),is_root:!0}),(!0===g||!0===g.inside||!0===g.before||!0===g.after)&&c.vakata.dnd.helper.children("ins").attr("class","jstree-ok")):(g.prepare_move(a,g.get_container(),"last"),g.check_move()&&c.vakata.dnd.helper.children("ins").attr("class",
"jstree-ok"))))},this)).bind("mouseup.jstree",c.proxy(function(d){if(c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&d.currentTarget===d.target&&c.vakata.dnd.user_data.obj&&c(c.vakata.dnd.user_data.obj).length&&c(c.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==d.target){var g=c.jstree._reference(d.currentTarget);g.data.dnd.foreign?(d=g._get_settings().dnd.drag_check.call(this,{o:a,r:g.get_container(),is_root:!0}),(!0===d||!0===d.inside||!0===d.before||!0===d.after)&&g._get_settings().dnd.drag_finish.call(this,
{o:a,r:g.get_container(),is_root:!0})):g.move_node(a,g.get_container(),"last",d[g._get_settings().dnd.copy_modifier+"Key"])}},this)).bind("mouseleave.jstree",c.proxy(function(a){if(a.relatedTarget&&a.relatedTarget.id&&"jstree-marker-line"===a.relatedTarget.id)return!1;c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),
c.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"))},this)).bind("mousemove.jstree",c.proxy(function(a){if(c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree){var d=this.get_container()[0];a.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(c.proxy(function(){this.scrollLeft+=c.vakata.dnd.scroll_spd},d),100)):a.pageX-24<this.data.dnd.cof.left?(this.data.dnd.i1&&
clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(c.proxy(function(){this.scrollLeft-=c.vakata.dnd.scroll_spd},d),100)):this.data.dnd.i1&&clearInterval(this.data.dnd.i1);a.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(c.proxy(function(){this.scrollTop+=c.vakata.dnd.scroll_spd},d),100)):a.pageY-24<this.data.dnd.cof.top?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(c.proxy(function(){this.scrollTop-=
c.vakata.dnd.scroll_spd},d),100)):this.data.dnd.i2&&clearInterval(this.data.dnd.i2)}},this)).bind("scroll.jstree",c.proxy(function(a){c.vakata.dnd.is_drag&&(c.vakata.dnd.user_data.jstree&&d&&e)&&(d.hide(),e.hide())},this)).delegate("a","mousedown.jstree",c.proxy(function(a){if(1===a.which)return this.start_drag(a.currentTarget,a),!1},this)).delegate("a","mouseenter.jstree",c.proxy(function(a){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&this.dnd_enter(a.currentTarget)},this)).delegate("a",
"mousemove.jstree",c.proxy(function(a){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&((!g||!g.length||g.children("a")[0]!==a.currentTarget)&&this.dnd_enter(a.currentTarget),"undefined"===typeof this.data.dnd.off.top&&(this.data.dnd.off=c(a.target).offset()),this.data.dnd.w=(a.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height,0>this.data.dnd.w&&(this.data.dnd.w+=this.data.core.li_height),this.dnd_show())},this)).delegate("a","mouseleave.jstree",c.proxy(function(a){if(c.vakata.dnd.is_drag&&
c.vakata.dnd.user_data.jstree){if(a.relatedTarget&&a.relatedTarget.id&&"jstree-marker-line"===a.relatedTarget.id)return!1;d&&d.hide();e&&e.hide();this.data.dnd.mto=setTimeout(function(d){return function(){d.dnd_leave(a)}}(this),0)}},this)).delegate("a","mouseup.jstree",c.proxy(function(a){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&this.dnd_finish(a)},this));c(document).bind("drag_stop.vakata",c.proxy(function(){this.data.dnd.to1&&clearTimeout(this.data.dnd.to1);this.data.dnd.to2&&clearTimeout(this.data.dnd.to2);
this.data.dnd.i1&&clearInterval(this.data.dnd.i1);this.data.dnd.i2&&clearInterval(this.data.dnd.i2);this.data.dnd.after=!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;this.data.dnd.off=!1;this.data.dnd.prepared=!1;this.data.dnd.w=!1;this.data.dnd.to1=!1;this.data.dnd.to2=!1;this.data.dnd.i1=!1;this.data.dnd.i2=!1;this.data.dnd.active=!1;this.data.dnd.foreign=!1;d&&d.css({top:"-2000px"});e&&e.css({top:"-2000px"})},this)).bind("drag_start.vakata",c.proxy(function(a,d){if(d.data.jstree){var g=c(d.event.target);
g.closest(".jstree").hasClass("jstree-"+this.get_index())&&this.dnd_enter(g)}},this));var f=this._get_settings().dnd;f.drag_target&&c(document).delegate(f.drag_target,"mousedown.jstree-"+this.get_index(),c.proxy(function(g){a=g.target;c.vakata.dnd.drag_start(g,{jstree:!0,obj:g.target},"<ins class='jstree-icon'></ins>"+c(g.target).text());this.data.themes&&(d&&d.attr("class","jstree-"+this.data.themes.theme),e&&e.attr("class","jstree-"+this.data.themes.theme),c.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+
this.data.themes.theme));c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var f=this.get_container();this.data.dnd.cof=f.offset();this.data.dnd.cw=parseInt(f.width(),10);this.data.dnd.ch=parseInt(f.height(),10);this.data.dnd.foreign=!0;g.preventDefault()},this));f.drop_target&&c(document).delegate(f.drop_target,"mouseenter.jstree-"+this.get_index(),c.proxy(function(d){this.data.dnd.active&&this._get_settings().dnd.drop_check.call(this,{o:a,r:c(d.target),e:d})&&c.vakata.dnd.helper.children("ins").attr("class",
"jstree-ok")},this)).delegate(f.drop_target,"mouseleave.jstree-"+this.get_index(),c.proxy(function(a){this.data.dnd.active&&c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")},this)).delegate(f.drop_target,"mouseup.jstree-"+this.get_index(),c.proxy(function(d){this.data.dnd.active&&c.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&this._get_settings().dnd.drop_finish.call(this,{o:a,r:c(d.target),e:d})},this))},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,
drop_target:".jstree-drop",drop_check:function(a){return!0},drop_finish:c.noop,drag_target:".jstree-draggable",drag_finish:c.noop,drag_check:function(a){return{after:!1,before:!1,inside:!0}}},_fn:{dnd_prepare:function(){if(g&&g.length){this.data.dnd.off=g.offset();this._get_settings().core.rtl&&(this.data.dnd.off.right=this.data.dnd.off.left+g.width());if(this.data.dnd.foreign){var d=this._get_settings().dnd.drag_check.call(this,{o:a,r:g});this.data.dnd.after=d.after;this.data.dnd.before=d.before;
this.data.dnd.inside=d.inside;this.data.dnd.prepared=!0;return this.dnd_show()}this.prepare_move(a,g,"before");this.data.dnd.before=this.check_move();this.prepare_move(a,g,"after");this.data.dnd.after=this.check_move();this._is_loaded(g)?(this.prepare_move(a,g,"inside"),this.data.dnd.inside=this.check_move()):this.data.dnd.inside=!1;this.data.dnd.prepared=!0;return this.dnd_show()}},dnd_show:function(){if(this.data.dnd.prepared){var a=["before","inside","after"],g=!1,f=this._get_settings().core.rtl,
a=this.data.dnd.w<this.data.core.li_height/3?["before","inside","after"]:this.data.dnd.w<=2*this.data.core.li_height/3?this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"]:["after","inside","before"];c.each(a,c.proxy(function(a,d){if(this.data.dnd[d])return c.vakata.dnd.helper.children("ins").attr("class","jstree-ok"),g=d,!1},this));!1===g&&c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");a=f?this.data.dnd.off.right-18:this.data.dnd.off.left+
10;switch(g){case "before":d.css({left:a+"px",top:this.data.dnd.off.top-6+"px"}).show();e&&e.css({left:a+8+"px",top:this.data.dnd.off.top-1+"px"}).show();break;case "after":d.css({left:a+"px",top:this.data.dnd.off.top+this.data.core.li_height-6+"px"}).show();e&&e.css({left:a+8+"px",top:this.data.dnd.off.top+this.data.core.li_height-1+"px"}).show();break;case "inside":d.css({left:a+(f?-4:4)+"px",top:this.data.dnd.off.top+this.data.core.li_height/2-5+"px"}).show();e&&e.hide();break;default:d.hide(),
e&&e.hide()}return I=g}},dnd_open:function(){this.data.dnd.to2=!1;this.open_node(g,c.proxy(this.dnd_prepare,this),!0)},dnd_finish:function(c){this.data.dnd.foreign?(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside)&&this._get_settings().dnd.drag_finish.call(this,{o:a,r:g,p:I}):(this.dnd_prepare(),this.move_node(a,g,I,c[this._get_settings().dnd.copy_modifier+"Key"]));g=a=!1;d.hide();e&&e.hide()},dnd_enter:function(a){this.data.dnd.mto&&(clearTimeout(this.data.dnd.mto),this.data.dnd.mto=
!1);var d=this._get_settings().dnd;this.data.dnd.prepared=!1;g=this._get_node(a);d.check_timeout?(this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to1=setTimeout(c.proxy(this.dnd_prepare,this),d.check_timeout)):this.dnd_prepare();d.open_timeout?(this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),g&&(g.length&&g.hasClass("jstree-closed"))&&(this.data.dnd.to2=setTimeout(c.proxy(this.dnd_open,this),d.open_timeout))):g&&(g.length&&g.hasClass("jstree-closed"))&&this.dnd_open()},dnd_leave:function(a){this.data.dnd.after=
!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");d.hide();e&&e.hide();g&&g[0]===a.target.parentNode&&(this.data.dnd.to1&&(clearTimeout(this.data.dnd.to1),this.data.dnd.to1=!1),this.data.dnd.to2&&(clearTimeout(this.data.dnd.to2),this.data.dnd.to2=!1))},start_drag:function(g,f){a=this._get_node(g);this.data.ui&&this.is_selected(a)&&(a=this._get_node(null,!0));var t=1<a.length?this._get_string("multiple_selection"):this.get_text(a),
p=this.get_container();this._get_settings().core.html_titles||(t=t.replace(/</ig,"&lt;").replace(/>/ig,"&gt;"));c.vakata.dnd.drag_start(f,{jstree:!0,obj:a},"<ins class='jstree-icon'></ins>"+t);this.data.themes&&(d&&d.attr("class","jstree-"+this.data.themes.theme),e&&e.attr("class","jstree-"+this.data.themes.theme),c.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme));this.data.dnd.cof=p.offset();this.data.dnd.cw=parseInt(p.width(),10);this.data.dnd.ch=parseInt(p.height(),
10);this.data.dnd.active=!0}}});c(function(){c.vakata.css.add_sheet({str:"#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px;  -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; } #vakata-dragged .jstree-ok { background:green; } #vakata-dragged .jstree-invalid { background:red; } #jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } #jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43;  cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666;  -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; }",
title:"jstree"});d=c("<div />").attr({id:"jstree-marker"}).hide().html("&raquo;").bind("mouseleave mouseenter",function(a){d.hide();e.hide();a.preventDefault();a.stopImmediatePropagation();return!1}).appendTo("body");e=c("<div />").attr({id:"jstree-marker-line"}).hide().bind("mouseup",function(a){if(g&&g.length)return g.children("a").trigger(a),a.preventDefault(),a.stopImmediatePropagation(),!1}).bind("mouseleave",function(a){var f=c(a.relatedTarget);if((f.is(".jstree")||0===f.closest(".jstree").length)&&
g&&g.length)return g.children("a").trigger(a),d.hide(),e.hide(),a.preventDefault(),a.stopImmediatePropagation(),!1}).appendTo("body");c(document).bind("drag_start.vakata",function(a,c){c.data.jstree&&(d.show(),e&&e.show())});c(document).bind("drag_stop.vakata",function(a,c){c.data.jstree&&(d.hide(),e&&e.hide())})})})(jQuery);(function(c){c.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui;this.data.ui&&this.data.checkbox.noui&&(this.select_node=
this.deselect_node=this.deselect_all=c.noop,this.get_selected=this.get_checked);this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",c.proxy(function(a,c){this._prepare_checkboxes(c.rslt.obj)},this)).bind("loaded.jstree",c.proxy(function(a){this._prepare_checkboxes()},this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",c.proxy(function(a){a.preventDefault();this._get_node(a.target).hasClass("jstree-checked")?this.uncheck_node(a.target):
this.check_node(a.target);if(this.data.ui&&this.data.checkbox.noui)this.save_selected(),this.data.cookies&&this.save_cookie("select_node");else return a.stopImmediatePropagation(),!1},this))},defaults:{override_ui:!1,two_state:!1,real_checkboxes:!1,checked_parent_open:!0,real_checkboxes_names:function(a){return["check_"+(a[0].id||Math.ceil(1E4*Math.random())),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},
_fn:{_checkbox_notify:function(a,c){c.checked&&this.check_node(a,!1)},_prepare_checkboxes:function(a){a=!a||-1==a?this.get_container().find("> ul > li"):this._get_node(a);if(!1!==a){var g,d=this,e,f=this._get_settings().checkbox.two_state,p=this._get_settings().checkbox.real_checkboxes,l=this._get_settings().checkbox.real_checkboxes_names;a.each(function(){e=c(this);g=e.is("li")&&(e.hasClass("jstree-checked")||p&&e.children(":checked").length)?"jstree-checked":"jstree-unchecked";e.find("li").addBack().each(function(){var a=
c(this),e;a.children("a"+(d.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(f?"jstree-unchecked":g);p&&(a.children(":checkbox").length?a.children(":checkbox").addClass("jstree-real-checkbox"):(e=l.call(d,a),a.prepend("<input type='checkbox' class='jstree-real-checkbox' id='"+e[0]+"' name='"+e[0]+"' value='"+e[1]+"' />")));f?(a.hasClass("jstree-checked")||a.children(":checked").length)&&
a.addClass("jstree-checked").children(":checkbox").prop("checked",!0):("jstree-checked"===g||a.hasClass("jstree-checked")||a.children(":checked").length)&&a.find("li").addBack().addClass("jstree-checked").children(":checkbox").prop("checked",!0)})});f||a.find(".jstree-checked").parent().parent().each(function(){d._repair_state(this)})}},change_state:function(a,g){a=this._get_node(a);var d=!1,e=this._get_settings().checkbox.real_checkboxes;if(!a||-1===a)return!1;g=!1===g||!0===g?g:a.hasClass("jstree-checked");
if(this._get_settings().checkbox.two_state)g?(a.removeClass("jstree-checked").addClass("jstree-unchecked"),e&&a.children(":checkbox").prop("checked",!1)):(a.removeClass("jstree-unchecked").addClass("jstree-checked"),e&&a.children(":checkbox").prop("checked",!0));else{if(g){d=a.find("li").addBack();if(!d.filter(".jstree-checked, .jstree-undetermined").length)return!1;d.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");e&&d.children(":checkbox").prop("checked",!1)}else{d=
a.find("li").addBack();if(!d.filter(".jstree-unchecked, .jstree-undetermined").length)return!1;d.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");e&&d.children(":checkbox").prop("checked",!0);this.data.ui&&(this.data.ui.last_selected=a);this.data.checkbox.last_selected=a}a.parentsUntil(".jstree","li").each(function(){var a=c(this);if(g){if(a.children("ul").children("li.jstree-checked, li.jstree-undetermined").length)return a.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),
e&&a.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",!1),!1;a.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");e&&a.children(":checkbox").prop("checked",!1)}else{if(a.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length)return a.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),e&&a.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",
!1),!1;a.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");e&&a.children(":checkbox").prop("checked",!0)}})}this.data.ui&&this.data.checkbox.noui&&(this.data.ui.selected=this.get_checked());this.__callback(a);return!0},check_node:function(a){if(this.change_state(a,!1)){a=this._get_node(a);if(this._get_settings().checkbox.checked_parent_open){var c=this;a.parents(".jstree-closed").each(function(){c.open_node(this,!1,!0)})}this.__callback({obj:a})}},uncheck_node:function(a){this.change_state(a,
!0)&&this.__callback({obj:this._get_node(a)})},check_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!1)});this.__callback()},uncheck_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!0)});this.__callback()},is_checked:function(a){a=this._get_node(a);
return a.length?a.is(".jstree-checked"):!1},get_checked:function(a,c){a=!a||-1===a?this.get_container():this._get_node(a);return c||this._get_settings().checkbox.two_state?a.find(".jstree-checked"):a.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(a,c){a=!a||-1===a?this.get_container():this._get_node(a);return c||this._get_settings().checkbox.two_state?a.find(".jstree-unchecked"):a.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},
show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(a){a=this._get_node(a);if(a.length)if(this._get_settings().checkbox.two_state)a.find("li").addBack().not(".jstree-checked").removeClass("jstree-undetermined").addClass("jstree-unchecked").children(":checkbox").prop("checked",!0);else{var c=this._get_settings().checkbox.real_checkboxes,
d=a.find("> ul > .jstree-checked").length,e=a.find("> ul > .jstree-undetermined").length,f=a.find("> ul > li").length;0===f?a.hasClass("jstree-undetermined")&&this.change_state(a,!1):0===d&&0===e?this.change_state(a,!0):d===f?this.change_state(a,!1):(a.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),c&&a.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",!1))}},reselect:function(){if(this.data.ui&&this.data.checkbox.noui){var a=
this,g=this.data.ui.to_select,g=c.map(c.makeArray(g),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});this.deselect_all();c.each(g,function(d,c){a.check_node(c)});this.__callback()}else this.__call_old()},save_loaded:function(){var a=this;this.data.core.to_load=[];this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){this.id&&a.data.core.to_load.push("#"+this.id)})}}});
c(function(){c.vakata.css.add_sheet({str:".jstree .jstree-real-checkbox { display:none; } ",title:"jstree"})})})(jQuery);(function(c){c.vakata.xslt=function(a,g,e){var f=!1,l,s,I;if(!1===f&&window.ActiveXObject)try{f=new ActiveXObject("Msxml2.XSLTemplate"),s=new ActiveXObject("Msxml2.DOMDocument"),s.loadXML(a),I=new ActiveXObject("Msxml2.FreeThreadedDOMDocument"),I.loadXML(g),f.stylesheet=I,l=f.createProcessor(),l.input=s,l.transform(),f=l.output}catch(u){}a=c.parseXML(a);g=c.parseXML(g);!1===f&&
"undefined"!==typeof XSLTProcessor&&(l=new XSLTProcessor,l.importStylesheet(g),f=l.transformToFragment(a,document),f=c("<div />").append(f).html());!1===f&&"undefined"!==typeof a.transformNode&&(f=a.transformNode(g));e.call(null,f)};var a={nest:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/html" /><xsl:template match="/">\t<xsl:call-template name="nodes">\t\t<xsl:with-param name="node" select="/root" />\t</xsl:call-template></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<ul>\t<xsl:for-each select="$node/item">\t\t<xsl:variable name="children" select="count(./item) &gt; 0" />\t\t<li>\t\t\t<xsl:attribute name="class">\t\t\t\t<xsl:if test="position() = last()">jstree-last </xsl:if>\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t\t\t</xsl:choose>\t\t\t\t<xsl:value-of select="@class" />\t\t\t</xsl:attribute>\t\t\t<xsl:for-each select="@*">\t\t\t\t<xsl:if test="name() != \'class\' and name() != \'state\' and name() != \'hasChildren\'">\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t</xsl:if>\t\t\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t\t\t<xsl:for-each select="content/name">\t\t\t\t<a>\t\t\t\t<xsl:attribute name="href">\t\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t\t\t</xsl:choose>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t\t\t<xsl:for-each select="@*">\t\t\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t\t</xsl:if>\t\t\t\t</xsl:for-each>\t\t\t\t\t<ins>\t\t\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t\t\t</xsl:attribute>\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t\t\t</ins>\t\t\t\t\t<xsl:copy-of select="./child::node()" />\t\t\t\t</a>\t\t\t</xsl:for-each>\t\t\t<xsl:if test="$children or @hasChildren"><xsl:call-template name="nodes"><xsl:with-param name="node" select="current()" /></xsl:call-template></xsl:if>\t\t</li>\t</xsl:for-each>\t</ul></xsl:template></xsl:stylesheet>',
flat:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/xml" /><xsl:template match="/">\t<ul>\t<xsl:for-each select="//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]">\t\t<xsl:call-template name="nodes">\t\t\t<xsl:with-param name="node" select="." />\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t</xsl:call-template>\t</xsl:for-each>\t</ul></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<xsl:param name="is_last" />\t<xsl:variable name="children" select="count(//item[@parent_id=$node/attribute::id]) &gt; 0" />\t<li>\t<xsl:attribute name="class">\t\t<xsl:if test="$is_last = true()">jstree-last </xsl:if>\t\t<xsl:choose>\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t</xsl:choose>\t\t<xsl:value-of select="@class" />\t</xsl:attribute>\t<xsl:for-each select="@*">\t\t<xsl:if test="name() != \'parent_id\' and name() != \'hasChildren\' and name() != \'class\' and name() != \'state\'">\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t</xsl:if>\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t<xsl:for-each select="content/name">\t\t<a>\t\t<xsl:attribute name="href">\t\t\t<xsl:choose>\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t</xsl:choose>\t\t</xsl:attribute>\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t<xsl:for-each select="@*">\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t</xsl:if>\t\t</xsl:for-each>\t\t\t<ins>\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t</ins>\t\t\t<xsl:copy-of select="./child::node()" />\t\t</a>\t</xsl:for-each>\t<xsl:if test="$children">\t\t<ul>\t\t<xsl:for-each select="//item[@parent_id=$node/attribute::id]">\t\t\t<xsl:call-template name="nodes">\t\t\t\t<xsl:with-param name="node" select="." />\t\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t\t</xsl:call-template>\t\t</xsl:for-each>\t\t</ul>\t</xsl:if>\t</li></xsl:template></xsl:stylesheet>'},
g=function(a){return a.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};c.jstree.plugin("xml_data",{defaults:{data:!1,ajax:!1,xsl:"flat",clean_node:!1,correct_state:!0,get_skip_empty:!1,get_include_preamble:!0},_fn:{load_node:function(a,c,g){var e=this;this.load_node_xml(a,function(){e.__callback({obj:e._get_node(a)});c.call(this)},g)},_is_loaded:function(a){var g=this._get_settings().xml_data;a=this._get_node(a);return-1==a||
!a||!g.ajax&&!c.isFunction(g.data)||a.is(".jstree-open, .jstree-leaf")||0<a.children("ul").children("li").size()},load_node_xml:function(a,g,e){var f=this.get_settings().xml_data,l=function(){},s=function(){};if((a=this._get_node(a))&&-1!==a){if(a.data("jstree_is_loading"))return;a.data("jstree_is_loading",!0)}switch(!0){case !f.data&&!f.ajax:throw"Neither data nor ajax settings supplied.";case c.isFunction(f.data):f.data.call(this,a,c.proxy(function(e){this.parse_xml(e,c.proxy(function(e){e&&(e=
e.replace(/ ?xmlns="[^"]*"/ig,""),10<e.length?(e=c(e),-1===a||!a?this.get_container().children("ul").empty().append(e.children()):(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(e),a.removeData("jstree_is_loading")),f.clean_node&&this.clean_node(a),g&&g.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),f.correct_state&&(this.correct_state(a),g&&g.call(this))):f.correct_state&&(this.get_container().children("ul").empty(),
g&&g.call(this)))},this))},this));break;case !!f.data&&!f.ajax||!!f.data&&!!f.ajax&&(!a||-1===a):(!a||-1==a)&&this.parse_xml(f.data,c.proxy(function(e){e?(e=e.replace(/ ?xmlns="[^"]*"/ig,""),10<e.length&&(e=c(e),this.get_container().children("ul").empty().append(e.children()),f.clean_node&&this.clean_node(a),g&&g.call(this))):f.correct_state&&(this.get_container().children("ul").empty(),g&&g.call(this))},this));break;case !f.data&&!!f.ajax||!!f.data&&!!f.ajax&&a&&-1!==a:l=function(c,g,v){var l=this.get_settings().xml_data.ajax.error;
l&&l.call(this,c,g,v);-1!==a&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),"success"===g&&f.correct_state&&this.correct_state(a)):"success"===g&&f.correct_state&&this.get_container().children("ul").empty();e&&e.call(this)},s=function(e,t,s){e=s.responseText;var G=this.get_settings().xml_data.ajax.success;G&&(e=G.call(this,e,t,s)||e);if(""===e||e&&e.toString&&""===e.toString().replace(/^[\s\n]+$/,""))return l.call(this,s,t,"");this.parse_xml(e,
c.proxy(function(e){e&&(e=e.replace(/ ?xmlns="[^"]*"/ig,""),10<e.length?(e=c(e),-1===a||!a?this.get_container().children("ul").empty().append(e.children()):(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(e),a.removeData("jstree_is_loading")),f.clean_node&&this.clean_node(a),g&&g.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),f.correct_state&&(this.correct_state(a),g&&g.call(this))):f.correct_state&&(this.get_container().children("ul").empty(),
g&&g.call(this)))},this))},f.ajax.context=this,f.ajax.error=l,f.ajax.success=s,f.ajax.dataType||(f.ajax.dataType="xml"),c.isFunction(f.ajax.url)&&(f.ajax.url=f.ajax.url.call(this,a)),c.isFunction(f.ajax.data)&&(f.ajax.data=f.ajax.data.call(this,a)),c.ajax(f.ajax)}},parse_xml:function(d,g){var e=this._get_settings().xml_data;c.vakata.xslt(d,a[e.xsl],g)},get_xml:function(a,e,f,p,l){var s="",I=this._get_settings(),u=this,K,G,Q,ja,oa;a||(a="flat");l||(l=0);e=this._get_node(e);if(!e||-1===e)e=this.get_container().find("> ul > li");
f=c.isArray(f)?f:["id","class"];!l&&(this.data.types&&-1===c.inArray(I.types.type_attr,f))&&f.push(I.types.type_attr);p=c.isArray(p)?p:[];l||(I.xml_data.get_include_preamble&&(s+='<?xml version="1.0" encoding="UTF-8"?>'),s+="<root>");e.each(function(){s+="<item";Q=c(this);c.each(f,function(a,d){var c=Q.attr(d);if(!I.xml_data.get_skip_empty||"undefined"!==typeof c)s+=" "+d+'="'+g((" "+(c||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"'});Q.hasClass("jstree-open")&&
(s+=' state="open"');Q.hasClass("jstree-closed")&&(s+=' state="closed"');"flat"===a&&(s+=' parent_id="'+g(l)+'"');s+=">";s+="<content>";ja=Q.children("a");ja.each(function(){K=c(this);oa=!1;s+="<name";-1!==c.inArray("languages",I.plugins)&&c.each(I.languages,function(a,d){if(K.hasClass(d))return s+=' lang="'+g(d)+'"',oa=d,!1});p.length&&c.each(p,function(a,d){var c=K.attr(d);if(!I.xml_data.get_skip_empty||"undefined"!==typeof c)s+=" "+d+'="'+g((" "+c||"").replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig,
" ").replace(/^ /,"").replace(/ $/,""))+'"'});K.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(s+=' icon="'+g(K.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"');K.children("ins").get(0).style.backgroundImage.length&&(s+=' icon="'+g(K.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/ig,"").replace(/"/ig,""))+'"');s+=">";s+="<![CDATA["+
u.get_text(K,oa)+"]]\x3e";s+="</name>"});s+="</content>";G=Q[0].id||!0;Q=Q.find("> ul > li");G=Q.length?u.get_xml(a,Q,f,p,G):"";"nest"==a&&(s+=G);s+="</item>";"flat"==a&&(s+=G)});l||(s+="</root>");return s}}})})(jQuery);(function(c){8<=c().jquery.split(".")[1]?(c.expr[":"].jstree_contains=c.expr.createPseudo(function(a){return function(c){return 0<=(c.textContent||c.innerText||"").toLowerCase().indexOf(a.toLowerCase())}}),c.expr[":"].jstree_title_contains=c.expr.createPseudo(function(a){return function(c){return 0<=
(c.getAttribute("title")||"").toLowerCase().indexOf(a.toLowerCase())}})):(c.expr[":"].jstree_contains=function(a,c,d){return 0<=(a.textContent||a.innerText||"").toLowerCase().indexOf(d[3].toLowerCase())},c.expr[":"].jstree_title_contains=function(a,c,d){return 0<=(a.getAttribute("title")||"").toLowerCase().indexOf(d[3].toLowerCase())});c.jstree.plugin("search",{__init:function(){this.data.search.str="";this.data.search.result=c();this._get_settings().search.show_only_matches&&this.get_container().bind("search.jstree",
function(a,g){c(this).children("ul").find("li").hide().removeClass("jstree-last");g.rslt.nodes.parentsUntil(".jstree").addBack().show().filter("ul").each(function(){c(this).children("li:visible").eq(-1).addClass("jstree-last")})}).bind("clear_search.jstree",function(){c(this).children("ul").find("li").css("display","").end().end().jstree("clean_node",-1)})},defaults:{ajax:!1,search_method:"jstree_contains",show_only_matches:!1},_fn:{search:function(a,g){if(""===c.trim(a))this.clear_search();else{var d=
this.get_settings().search,e=this,f=function(){};this.data.search.str=a;if(!g&&!1!==d.ajax&&0<this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length){this.search.supress_callback=!0;f=function(a,d,c){var g=this.get_settings().search.ajax.success;g&&(a=g.call(this,a,d,c)||a);this.data.search.to_open=a;this._search_open()};d.ajax.context=this;d.ajax.error=function(){};d.ajax.success=f;c.isFunction(d.ajax.url)&&(d.ajax.url=d.ajax.url.call(this,a));c.isFunction(d.ajax.data)&&(d.ajax.data=
d.ajax.data.call(this,a));d.ajax.data||(d.ajax.data={search_string:a});if(!d.ajax.dataType||/^json/.exec(d.ajax.dataType))d.ajax.dataType="json";c.ajax(d.ajax)}else this.data.search.result.length&&this.clear_search(),this.data.search.result=this.get_container().find("a"+(this.data.languages?"."+this.get_lang():"")+":"+d.search_method+"("+this.data.search.str+")"),this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function(){e.open_node(this,!1,!0)}),this.__callback({nodes:this.data.search.result,
str:a})}},clear_search:function(a){this.data.search.result.removeClass("jstree-search");this.__callback(this.data.search.result);this.data.search.result=c()},_search_open:function(a){var g=this;a=!0;var d=[],e=[];this.data.search.to_open.length&&(c.each(this.data.search.to_open,function(a,g){if("#"==g)return!0;c(g).length&&c(g).is(".jstree-closed")?d.push(g):e.push(g)}),d.length&&(this.data.search.to_open=e,c.each(d,function(a,d){g.open_node(d,function(){g._search_open(!0)})}),a=!1));a&&this.search(this.data.search.str,
!0)}}})})(jQuery);(function(c){c.vakata.context={hide_on_mouseleave:!1,cnt:c("<div id='vakata-contextmenu' />"),vis:!1,tgt:!1,par:!1,func:!1,data:!1,rtl:!1,show:function(a,g,d,e,f,p,l){c.vakata.context.rtl=!!l;if(a=c.vakata.context.parse(a)){c.vakata.context.vis=!0;c.vakata.context.tgt=g;c.vakata.context.par=p||g||null;c.vakata.context.data=f||null;c.vakata.context.cnt.html(a).css({visibility:"hidden",display:"block",left:0,top:0});if(c.vakata.context.hide_on_mouseleave)c.vakata.context.cnt.one("mouseleave",
function(a){c.vakata.context.hide()});f=c.vakata.context.cnt.height();p=c.vakata.context.cnt.width();d+p>c(document).width()&&(d=c(document).width()-(p+5),c.vakata.context.cnt.find("li > ul").addClass("right"));e+f>c(document).height()&&(e-=f+g[0].offsetHeight,c.vakata.context.cnt.find("li > ul").addClass("bottom"));c.vakata.context.cnt.css({left:d,top:e}).find("li:has(ul)").bind("mouseenter",function(a){a=c(document).width();var d=c(document).height(),g=c(this).children("ul").show();a!==c(document).width()&&
g.toggleClass("right");d!==c(document).height()&&g.toggleClass("bottom")}).bind("mouseleave",function(a){c(this).children("ul").hide()}).end().css({visibility:"visible"}).show();c(document).triggerHandler("context_show.vakata")}},hide:function(){c.vakata.context.vis=!1;c.vakata.context.cnt.attr("class","").css({visibility:"hidden"});c(document).triggerHandler("context_hide.vakata")},parse:function(a,g){if(!a)return!1;var d="",e=!1,f=!0;g||(c.vakata.context.func={});d+="<ul>";c.each(a,function(a,g){if(!g)return!0;
c.vakata.context.func[a]=g.action;!f&&g.separator_before&&(d+="<li class='vakata-separator vakata-separator-before'></li>");f=!1;d+="<li class='"+(g._class||"")+(g._disabled?" jstree-contextmenu-disabled ":"")+"'><ins ";g.icon&&-1===g.icon.indexOf("/")&&(d+=" class='"+g.icon+"' ");g.icon&&-1!==g.icon.indexOf("/")&&(d+=" style='background:url("+g.icon+") center center no-repeat;' ");d+=">&#160;</ins><a href='#' rel='"+a+"'>";g.submenu&&(d+="<span style='float:"+(c.vakata.context.rtl?"left":"right")+
";'>&raquo;</span>");d+=g.label+"</a>";g.submenu&&(e=c.vakata.context.parse(g.submenu,!0))&&(d+=e);d+="</li>";g.separator_after&&(d+="<li class='vakata-separator vakata-separator-after'></li>",f=!0)});d=d.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,"");d+="</ul>";c(document).triggerHandler("context_parse.vakata");return 10<d.length?d:!1},exec:function(a){return c.isFunction(c.vakata.context.func[a])?(c.vakata.context.func[a].call(c.vakata.context.data,c.vakata.context.par),
!0):!1}};c(function(){c.vakata.css.add_sheet({str:"#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; *width:180px; } #vakata-contextmenu ul { min-width:180px; *width:180px; } #vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } #vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } #vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } #vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } #vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover > a { background:gray; color:white; } #vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } #vakata-contextmenu .right { right:100%; left:auto; } #vakata-contextmenu .bottom { bottom:-1px; top:auto; } #vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ",
title:"vakata"});c.vakata.context.cnt.delegate("a","click",function(a){a.preventDefault()}).delegate("a","mouseup",function(a){!c(this).parent().hasClass("jstree-contextmenu-disabled")&&c.vakata.context.exec(c(this).attr("rel"))?c.vakata.context.hide():c(this).blur()}).delegate("a","mouseover",function(){c.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body");c(document).bind("mousedown",function(a){c.vakata.context.vis&&!c.contains(c.vakata.context.cnt[0],a.target)&&
c.vakata.context.hide()});"undefined"!==typeof c.hotkeys&&c(document).bind("keydown","up",function(a){if(c.vakata.context.vis){var g=c.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();g.length||(g=c.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last());g.addClass("vakata-hover");a.stopImmediatePropagation();a.preventDefault()}}).bind("keydown","down",function(a){if(c.vakata.context.vis){var g=
c.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();g.length||(g=c.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first());g.addClass("vakata-hover");a.stopImmediatePropagation();a.preventDefault()}}).bind("keydown","right",function(a){c.vakata.context.vis&&(c.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover"),
a.stopImmediatePropagation(),a.preventDefault())}).bind("keydown","left",function(a){c.vakata.context.vis&&(c.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover"),a.stopImmediatePropagation(),a.preventDefault())}).bind("keydown","esc",function(a){c.vakata.context.hide();a.preventDefault()}).bind("keydown","space",function(a){c.vakata.context.cnt.find(".vakata-hover").last().children("a").click();a.preventDefault()})});c.jstree.plugin("contextmenu",
{__init:function(){this.get_container().delegate("a","contextmenu.jstree",c.proxy(function(a){a.preventDefault();c(a.currentTarget).hasClass("jstree-loading")||this.show_contextmenu(a.currentTarget,a.pageX,a.pageY)},this)).delegate("a","click.jstree",c.proxy(function(a){this.data.contextmenu&&c.vakata.context.hide()},this)).bind("destroy.jstree",c.proxy(function(){this.data.contextmenu&&c.vakata.context.hide()},this));c(document).bind("context_hide.vakata",c.proxy(function(){this.data.contextmenu=
!1},this))},defaults:{select_node:!1,show_at_node:!0,items:{create:{separator_before:!1,separator_after:!0,label:"Create",action:function(a){this.create(a)}},rename:{separator_before:!1,separator_after:!1,label:"Rename",action:function(a){this.rename(a)}},remove:{separator_before:!1,icon:!1,separator_after:!1,label:"Delete",action:function(a){this.is_selected(a)?this.remove():this.remove(a)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,
separator_after:!1,label:"Cut",action:function(a){this.cut(a)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(a){this.copy(a)}},paste:{separator_before:!1,icon:!1,separator_after:!1,label:"Paste",action:function(a){this.paste(a)}}}}}},_fn:{show_contextmenu:function(a,g,d){a=this._get_node(a);var e=this.get_settings().contextmenu,f=a.children("a:visible:eq(0)"),p=!1,p=!1;e.select_node&&(this.data.ui&&!this.is_selected(a))&&(this.deselect_all(),this.select_node(a,
!0));if(e.show_at_node||"undefined"===typeof g||"undefined"===typeof d)p=f.offset(),g=p.left,d=p.top+this.data.core.li_height;p=a.data("jstree")&&a.data("jstree").contextmenu?a.data("jstree").contextmenu:e.items;c.isFunction(p)&&(p=p.call(this,a));this.data.contextmenu=!0;c.vakata.context.show(p,f,g,d,this,a,this._get_settings().core.rtl);this.data.themes&&c.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}})})(jQuery);(function(c){c.jstree.plugin("types",{__init:function(){var a=
this._get_settings().types;this.data.types.attach_to=[];this.get_container().bind("init.jstree",c.proxy(function(){var g=a.type_attr,d="",e=this;c.each(a.types,function(a,f){c.each(f,function(a,d){/^(max_depth|max_children|icon|valid_children)$/.test(a)||e.data.types.attach_to.push(a)});if(!f.icon)return!0;if(f.icon.image||f.icon.position)d="default"==a?d+(".jstree-"+e.get_index()+" a > .jstree-icon { "):d+(".jstree-"+e.get_index()+" li["+g+'="'+a+'"] > a > .jstree-icon { '),f.icon.image&&(d+=" background-image:url("+
f.icon.image+"); "),d=f.icon.position?d+(" background-position:"+f.icon.position+"; "):d+" background-position:0 0; ",d+="} "});""!==d&&c.vakata.css.add_sheet({str:d,title:"jstree-types"})},this)).bind("before.jstree",c.proxy(function(a,d){var e,f;if((e=(e=this._get_settings().types.use_data?this._get_node(d.args[0]):!1)&&-1!==e&&e.length?e.data("jstree"):!1)&&e.types&&!1===e.types[d.func])return a.stopImmediatePropagation(),!1;if(-1!==c.inArray(d.func,this.data.types.attach_to)&&d.args[0]&&(d.args[0].tagName||
d.args[0].jquery))if(e=this._get_settings().types.types,f=this._get_type(d.args[0]),(e[f]&&"undefined"!==typeof e[f][d.func]||e["default"]&&"undefined"!==typeof e["default"][d.func])&&!1===this._check(d.func,d.args[0]))return a.stopImmediatePropagation(),!1},this));e&&this.get_container().bind("load_node.jstree set_type.jstree",c.proxy(function(a,d){var e=d&&d.rslt&&d.rslt.obj&&-1!==d.rslt.obj?this._get_node(d.rslt.obj).parent():this.get_container_ul(),f=!1,l=this._get_settings().types;c.each(l.types,
function(a,d){if(d.icon&&(d.icon.image||d.icon.position))f="default"===a?e.find("li > a > .jstree-icon"):e.find("li["+l.type_attr+"='"+a+"'] > a > .jstree-icon"),d.icon.image&&f.css("backgroundImage","url("+d.icon.image+")"),f.css("backgroundPosition",d.icon.position||"0 0")})},this))},defaults:{max_children:-1,max_depth:-1,valid_children:"all",use_data:!1,type_attr:"rel",types:{"default":{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_types_notify:function(a,c){c.type&&this._get_settings().types.use_data&&
this.set_type(c.type,a)},_get_type:function(a){a=this._get_node(a);return!a||!a.length?!1:a.attr(this._get_settings().types.type_attr)||"default"},set_type:function(a,c){c=this._get_node(c);var d=!c.length||!a?!1:c.attr(this._get_settings().types.type_attr,a);d&&this.__callback({obj:c,type:a});return d},_check:function(a,g,d){g=this._get_node(g);var e=!1,f=this._get_type(g),l=0,E=this,s=this._get_settings().types,I=!1;if(-1===g)if(s[a])e=s[a];else return;else{if(!1===f)return;(I=s.use_data?g.data("jstree"):
!1)&&I.types&&"undefined"!==typeof I.types[a]?e=I.types[a]:s.types[f]&&"undefined"!==typeof s.types[f][a]?e=s.types[f][a]:s.types["default"]&&"undefined"!==typeof s.types["default"][a]&&(e=s.types["default"][a])}c.isFunction(e)&&(e=e.call(this,g));"max_depth"===a&&(-1!==g&&!1!==d&&-2!==s.max_depth&&0!==e)&&g.children("a:eq(0)").parentsUntil(".jstree","li").each(function(d){if(-1!==s.max_depth&&0>=s.max_depth-(d+1))return e=0,!1;l=0===d?e:E._check(a,this,!1);if(-1!==l&&0>=l-(d+1))return e=0,!1;if(0<=
l&&(l-(d+1)<e||0>e))e=l-(d+1);if(0<=s.max_depth&&(s.max_depth-(d+1)<e||0>e))e=s.max_depth-(d+1)});return e},check_move:function(){if(!this.__call_old())return!1;var a=this._get_move(),g=a.rt._get_settings().types,d=a.rt._check("max_children",a.cr),e=a.rt._check("max_depth",a.cr),f=a.rt._check("valid_children",a.cr),l=0,E=1;if("none"===f||c.isArray(f)&&(a.ot&&a.ot._get_type)&&(a.o.each(function(){if(-1===c.inArray(a.ot._get_type(this),f))return E=!1}),!1===E)||-2!==g.max_children&&-1!==d&&(l=-1===
a.cr?this.get_container().find("> ul > li").not(a.o).length:a.cr.find("> ul > li").not(a.o).length,l+a.o.length>d))return!1;if(-2!==g.max_depth&&-1!==e){E=0;if(0===e)return!1;if("undefined"===typeof a.o.d){for(g=a.o;0<g.length;)g=g.find("> ul > li"),E++;a.o.d=E}if(0>e-a.o.d)return!1}return!0},create_node:function(a,g,d,e,f,l){if(!l&&(f||this._is_loaded(a))){var E="string"==typeof g&&g.match(/^before|after$/i)&&-1!==a?this._get_parent(a):this._get_node(a),s=this._get_settings().types,I=this._check("max_children",
E),u=this._check("max_depth",E),K=this._check("valid_children",E);"string"===typeof d&&(d={data:d});d||(d={});if("none"===K)return!1;if(c.isArray(K))if(!d.attr||!d.attr[s.type_attr])d.attr||(d.attr={}),d.attr[s.type_attr]=K[0];else if(-1===c.inArray(d.attr[s.type_attr],K))return!1;if(-2!==s.max_children&&-1!==I&&(E=-1===E?this.get_container().find("> ul > li").length:E.find("> ul > li").length,E+1>I)||-2!==s.max_depth&&-1!==u&&0>u-1)return!1}return this.__call_old(!0,a,g,d,e,f,l)}}})})(jQuery);(function(c){c.jstree.plugin("html_data",
{__init:function(){this.data.html_data.original_container_html=this.get_container().find(" > ul > li").clone(!0);this.data.html_data.original_container_html.find("li").addBack().contents().filter(function(){return 3==this.nodeType}).remove()},defaults:{data:!1,ajax:!1,correct_state:!0},_fn:{load_node:function(a,c,d){var e=this;this.load_node_html(a,function(){e.__callback({obj:e._get_node(a)});c.call(this)},d)},_is_loaded:function(a){a=this._get_node(a);return-1==a||!a||!this._get_settings().html_data.ajax&&
!c.isFunction(this._get_settings().html_data.data)||a.is(".jstree-open, .jstree-leaf")||0<a.children("ul").children("li").size()},load_node_html:function(a,g,d){var e,f=this.get_settings().html_data,l=function(){};e=function(){};if((a=this._get_node(a))&&-1!==a){if(a.data("jstree_is_loading"))return;a.data("jstree_is_loading",!0)}switch(!0){case c.isFunction(f.data):f.data.call(this,a,c.proxy(function(d){d&&""!==d&&d.toString&&""!==d.toString().replace(/^[\s\n]+$/,"")?(d=c(d),d.is("ul")||(d=c("<ul />").append(d)),
-1==a||!a?this.get_container().children("ul").empty().append(d.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"):(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(d).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||
"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),a.removeData("jstree_is_loading")),this.clean_node(a),g&&g.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),f.correct_state&&(this.correct_state(a),g&&g.call(this))):f.correct_state&&(this.get_container().children("ul").empty(),g&&g.call(this))},this));break;
case !f.data&&!f.ajax:if(!a||-1==a)this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node();g&&g.call(this);break;case !!f.data&&!f.ajax||!!f.data&&!!f.ajax&&(!a||-1===a):if(!a||-1==a)e=c(f.data),
e.is("ul")||(e=c("<ul />").append(e)),this.get_container().children("ul").empty().append(e.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node();g&&g.call(this);break;case !f.data&&!!f.ajax||!!f.data&&!!f.ajax&&a&&-1!==a:a=this._get_node(a),l=function(c,g,e){var v=this.get_settings().html_data.ajax.error;
v&&v.call(this,c,g,e);-1!=a&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),"success"===g&&f.correct_state&&this.correct_state(a)):"success"===g&&f.correct_state&&this.get_container().children("ul").empty();d&&d.call(this)},e=function(d,e,v){var u=this.get_settings().html_data.ajax.success;u&&(d=u.call(this,d,e,v)||d);if(""===d||d&&d.toString&&""===d.toString().replace(/^[\s\n]+$/,""))return l.call(this,v,e,"");d?(d=c(d),d.is("ul")||(d=c("<ul />").append(d)),
-1==a||!a?this.get_container().children("ul").empty().append(d.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"):(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(d).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||
"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),a.removeData("jstree_is_loading")),this.clean_node(a),g&&g.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),f.correct_state&&(this.correct_state(a),g&&g.call(this))):f.correct_state&&(this.get_container().children("ul").empty(),g&&g.call(this))},f.ajax.context=
this,f.ajax.error=l,f.ajax.success=e,f.ajax.dataType||(f.ajax.dataType="html"),c.isFunction(f.ajax.url)&&(f.ajax.url=f.ajax.url.call(this,a)),c.isFunction(f.ajax.data)&&(f.ajax.data=f.ajax.data.call(this,a)),c.ajax(f.ajax)}}}});c.jstree.defaults.plugins.push("html_data")})(jQuery);(function(c){c.jstree.plugin("themeroller",{__init:function(){var a=this._get_settings().themeroller;this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a","mouseenter.jstree",function(g){c(g.currentTarget).hasClass("jstree-loading")||
c(this).addClass(a.item_h)}).delegate("a","mouseleave.jstree",function(){c(this).removeClass(a.item_h)}).bind("init.jstree",c.proxy(function(a,d){d.inst.get_container().find("> ul > li > .jstree-loading > ins").addClass("ui-icon-refresh");this._themeroller(d.inst.get_container().find("> ul > li"))},this)).bind("open_node.jstree create_node.jstree",c.proxy(function(a,d){this._themeroller(d.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",c.proxy(function(a){this._themeroller()},this)).bind("close_node.jstree",
c.proxy(function(a,d){this._themeroller(d.rslt.obj)},this)).bind("delete_node.jstree",c.proxy(function(a,d){this._themeroller(d.rslt.parent)},this)).bind("correct_state.jstree",c.proxy(function(c,d){d.rslt.obj.children("ins.jstree-icon").removeClass(a.opened+" "+a.closed+" ui-icon").end().find("> a > ins.ui-icon").filter(function(){return-1===this.className.toString().replace(a.item_clsd,"").replace(a.item_open,"").replace(a.item_leaf,"").indexOf("ui-icon-")}).removeClass(a.item_open+" "+a.item_clsd).addClass(a.item_leaf||
"jstree-no-icon")},this)).bind("select_node.jstree",c.proxy(function(c,d){d.rslt.obj.children("a").addClass(a.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",c.proxy(function(c,d){this.get_container().find("a."+a.item_a).removeClass(a.item_a).end().find("a.jstree-clicked").addClass(a.item_a)},this)).bind("dehover_node.jstree",c.proxy(function(c,d){d.rslt.obj.children("a").removeClass(a.item_h)},this)).bind("hover_node.jstree",c.proxy(function(c,d){this.get_container().find("a."+a.item_h).not(d.rslt.obj).removeClass(a.item_h);
d.rslt.obj.children("a").addClass(a.item_h)},this)).bind("move_node.jstree",c.proxy(function(a,d){this._themeroller(d.rslt.o);this._themeroller(d.rslt.op)},this))},__destroy:function(){var a=this._get_settings().themeroller,g=["ui-icon"];c.each(a,function(a,c){c=c.split(" ");c.length&&(g=g.concat(c))});this.get_container().removeClass("ui-widget-content").find("."+g.join(", .")).removeClass(g.join(" "))},_fn:{_themeroller:function(a){var c=this._get_settings().themeroller;a=!a||-1==a?this.get_container_ul():
this._get_node(a);a=!a||-1==a?this.get_container_ul():a.parent();a.find("li.jstree-closed").children("ins.jstree-icon").removeClass(c.opened).addClass("ui-icon "+c.closed).end().children("a").addClass(c.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(c.item_clsd,"").replace(c.item_open,"").replace(c.item_leaf,"").indexOf("ui-icon-")}).removeClass(c.item_leaf+" "+c.item_open).addClass(c.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(c.closed).addClass("ui-icon "+
c.opened).end().children("a").addClass(c.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(c.item_clsd,"").replace(c.item_open,"").replace(c.item_leaf,"").indexOf("ui-icon-")}).removeClass(c.item_leaf+" "+c.item_clsd).addClass(c.item_open||"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(c.closed+" ui-icon "+c.opened).end().children("a").addClass(c.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===
this.className.toString().replace(c.item_clsd,"").replace(c.item_open,"").replace(c.item_leaf,"").indexOf("ui-icon-")}).removeClass(c.item_clsd+" "+c.item_open).addClass(c.item_leaf||"jstree-no-icon")}},defaults:{opened:"ui-icon-triangle-1-se",closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_open:"ui-icon-folder-open",item_clsd:"ui-icon-folder-collapsed",item_leaf:"ui-icon-document"}});c(function(){c.vakata.css.add_sheet({str:".jstree-themeroller .ui-icon { overflow:visible; } .jstree-themeroller a { padding:0 2px; } .jstree-themeroller .jstree-no-icon { display:none; }",
title:"jstree"})})})(jQuery);(function(c){c.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",c.proxy(function(a,e){var d=[],f=!0,t;"move_node"==e.func&&(!0===e.args[4]&&e.args[0].o&&e.args[0].o.length)&&(e.args[0].o.children("a").each(function(){d.push(c(this).text().replace(/^\s+/g,""))}),f=this._check_unique(d,e.args[0].np.find("> ul > li").not(e.args[0].o),"move_node"));if("create_node"==e.func&&(e.args[4]||this._is_loaded(e.args[0]))){f=this._get_node(e.args[0]);
if(e.args[1]&&("before"===e.args[1]||"after"===e.args[1]))if(f=this._get_parent(e.args[0]),!f||-1===f)f=this.get_container();"string"===typeof e.args[2]?d.push(e.args[2]):!e.args[2]||!e.args[2].data?d.push(this._get_string("new_node")):d.push(e.args[2].data);f=this._check_unique(d,f.find("> ul > li"),"create_node")}if("rename_node"==e.func){d.push(e.args[1]);t=this._get_node(e.args[0]);f=this._get_parent(t);if(!f||-1===f)f=this.get_container();f=this._check_unique(d,f.find("> ul > li").not(t),"rename_node")}if(!f)return a.stopPropagation(),
!1},this))},defaults:{error_callback:c.noop},_fn:{_check_unique:function(a,e,d){var f=[],t=!0;e.children("a").each(function(){f.push(c(this).text().replace(/^\s+/g,""))});if(!f.length||!a.length)return!0;c.each(a,function(a,d){if(-1!==c.inArray(d,f))return t=!1});t||this._get_settings().unique.error_callback.call(null,a,e,d);return t},check_move:function(){if(!this.__call_old())return!1;var a=this._get_move(),e=[];return a.o&&a.o.length?(a.o.children("a").each(function(){e.push(c(this).text().replace(/^\s+/g,
""))}),this._check_unique(e,a.np.find("> ul > li").not(a.o),"check_move")):!0}}})})(jQuery);(function(c){c.jstree.plugin("wholerow",{__init:function(){if(!this.data.ui)throw"jsTree wholerow: jsTree UI plugin not included.";this.data.wholerow.html=!1;this.data.wholerow.to=!1;this.get_container().bind("init.jstree",c.proxy(function(a,c){this._get_settings().core.animation=0},this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",c.proxy(function(a,c){this._prepare_wholerow_span(c&&
c.rslt&&c.rslt.obj?c.rslt.obj:-1)},this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",c.proxy(function(a,c){this.data.to&&clearTimeout(this.data.to);this.data.to=setTimeout(function(a,c){return function(){a._prepare_wholerow_ul(c)}}(this,c&&c.rslt&&c.rslt.obj?c.rslt.obj:-1),0)},this)).bind("deselect_all.jstree",c.proxy(function(a,c){this.get_container().find(" > .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+
(this.data.themeroller?this._get_settings().themeroller.item_a:""))},this)).bind("select_node.jstree deselect_node.jstree ",c.proxy(function(a,e){e.rslt.obj.each(function(){e.inst.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((c(this).offset().top-e.inst.get_container().offset().top+e.inst.get_container()[0].scrollTop)/e.inst.data.core.li_height,10)+")").children("a").attr("class",e.rslt.obj.children("a").attr("class"))})},this)).bind("hover_node.jstree dehover_node.jstree",c.proxy(function(a,
c){this.get_container().find(" > .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+(this.data.themeroller?this._get_settings().themeroller.item_h:""));"hover_node"===a.type&&this.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((c.rslt.obj.offset().top-this.get_container().offset().top+this.get_container()[0].scrollTop)/this.data.core.li_height,10)+")").children("a").attr("class",c.rslt.obj.children(".jstree-hovered").attr("class"))},this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li",
"click.jstree",function(a){var e=c(a.currentTarget);"A"===a.target.tagName||"INS"===a.target.tagName&&e.closest("li").is(".jstree-open, .jstree-closed")||(e.closest("li").children("a:visible:eq(0)").click(),a.stopImmediatePropagation())}).delegate("li","mouseover.jstree",c.proxy(function(a){a.stopImmediatePropagation();if(c(a.currentTarget).children(".jstree-hovered, .jstree-clicked").length)return!1;this.hover_node(a.currentTarget);return!1},this)).delegate("li","mouseleave.jstree",c.proxy(function(a){c(a.currentTarget).children("a").hasClass("jstree-hovered").length||
this.dehover_node(a.currentTarget)},this));(l||e)&&c.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove();this.get_container().find(".jstree-wholerow-span").remove()},_fn:{_prepare_wholerow_span:function(a){a=!a||-1==a?this.get_container().find("> ul > li"):this._get_node(a);!1!==a&&a.each(function(){c(this).find("li").addBack().each(function(){var a=c(this);if(a.children(".jstree-wholerow-span").length)return!0;
a.prepend("<span class='jstree-wholerow-span' style='width:"+18*a.parentsUntil(".jstree","li").length+"px;'>&#160;</span>")})})},_prepare_wholerow_ul:function(){var a=this.get_container().children("ul").eq(0),c=a.html();a.addClass("jstree-wholerow-real");this.data.wholerow.last_html!==c&&(this.data.wholerow.last_html=c,this.get_container().children(".jstree-wholerow").remove(),this.get_container().append(a.clone().removeClass("jstree-wholerow-real").wrapAll("<div class='jstree-wholerow' />").parent().width(a.parent()[0].scrollWidth).css("top",
-1*(a.height()+(l?5:0))).find("li[id]").each(function(){this.removeAttribute("id")}).end()))}}});c(function(){var a=".jstree .jstree-wholerow-real { position:relative; z-index:1; } .jstree .jstree-wholerow-real li { cursor:pointer; } .jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } .jstree .jstree-wholerow { position:relative; z-index:0; height:0; } .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }.jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }.jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px; !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } .jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";
f&&(a+=".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } .jstree .jstree-wholerow-real a { border-color:transparent !important; } ");if(l||e)a+=".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } .jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } ";c.vakata.css.add_sheet({str:a,title:"jstree"})})})(jQuery);(function(c){var a=
["getChildren","getChildrenCount","getAttr","getName","getProps"],e=function(a,e){var g=!0;a=a||{};e=[].concat(e);c.each(e,function(e,f){if(!c.isFunction(a[f]))return g=!1});return g};c.jstree.plugin("model",{__init:function(){if(!this.data.json_data)throw"jsTree model: jsTree json_data plugin not included.";this._get_settings().json_data.data=function(d,f){var t=-1==d?this._get_settings().model.object:d.data("jstree_model");if(!e(t,a))return f.call(null,!1);this._get_settings().model.async?t.getChildren(c.proxy(function(a){this.model_done(a,
f)},this)):this.model_done(t.getChildren(),f)}},defaults:{object:!1,id_prefix:!1,async:!1},_fn:{model_done:function(a,e){var g=[],f=this._get_settings(),l=this;c.isArray(a)||(a=[a]);c.each(a,function(a,d){var e=d.getProps()||{};e.attr=d.getAttr()||{};d.getChildrenCount()&&(e.state="closed");e.data=d.getName();c.isArray(e.data)||(e.data=[e.data]);l.data.types&&c.isFunction(d.getType)&&(e.attr[f.types.type_attr]=d.getType());e.attr.id&&f.model.id_prefix&&(e.attr.id=f.model.id_prefix+e.attr.id);e.metadata||
(e.metadata={});e.metadata.jstree_model=d;g.push(e)});e.call(null,g)}}})})(jQuery)}})();
(function(e){e.color={};e.color.make=function(f,c,a,g){var d={};d.r=f||0;d.g=c||0;d.b=a||0;d.a=null!=g?g:1;d.add=function(a,c){for(var e=0;e<a.length;++e)d[a.charAt(e)]+=c;return d.normalize()};d.scale=function(a,c){for(var e=0;e<a.length;++e)d[a.charAt(e)]*=c;return d.normalize()};d.toString=function(){return 1<=d.a?"rgb("+[d.r,d.g,d.b].join()+")":"rgba("+[d.r,d.g,d.b,d.a].join()+")"};d.normalize=function(){function a(d,c,e){return c<d?d:c>e?e:c}d.r=a(0,parseInt(d.r),255);d.g=a(0,parseInt(d.g),255);
d.b=a(0,parseInt(d.b),255);d.a=a(0,d.a,1);return d};d.clone=function(){return e.color.make(d.r,d.b,d.g,d.a)};return d.normalize()};e.color.extract=function(f,c){var a;do{a=f.css(c).toLowerCase();if(""!=a&&"transparent"!=a)break;f=f.parent()}while(!e.nodeName(f.get(0),"body"));"rgba(0, 0, 0, 0)"==a&&(a="transparent");return e.color.parse(a)};e.color.parse=function(f){var c,a=e.color.make;if(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(f))return a(parseInt(c[1],10),parseInt(c[2],
10),parseInt(c[3],10));if(c=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(f))return a(parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10),parseFloat(c[4]));if(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(f))return a(2.55*parseFloat(c[1]),2.55*parseFloat(c[2]),2.55*parseFloat(c[3]));if(c=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(f))return a(2.55*
parseFloat(c[1]),2.55*parseFloat(c[2]),2.55*parseFloat(c[3]),parseFloat(c[4]));if(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(f))return a(parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16));if(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(f))return a(parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16));f=e.trim(f).toLowerCase();if("transparent"==f)return a(255,255,255,0);c=l[f]||[0,0,0];return a(c[0],c[1],c[2])};var l={aqua:[0,255,255],azure:[240,255,255],beige:[245,
245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,
144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);
(function(e,l,f){var c=l.event,a;c.special.smartresize={setup:function(){l(this).bind("resize",c.special.smartresize.handler)},teardown:function(){l(this).unbind("resize",c.special.smartresize.handler)},handler:function(d,c){var e=this,g=arguments;d.type="smartresize";a&&clearTimeout(a);a=setTimeout(function(){jQuery.event.handle.apply(e,g)},"execAsap"===c?0:100)}};l.fn.smartresize=function(a){return a?this.bind("smartresize",a):this.trigger("smartresize",["execAsap"])};l.Mason=function(a,d){this.element=
l(d);this._create(a);this._init()};var g=["position","height"];l.Mason.settings={isResizable:!0,isAnimated:!1,animationOptions:{queue:!1,duration:500},gutterWidth:0,isRTL:!1,isFitWidth:!1};l.Mason.prototype={_filterFindBricks:function(a){var d=this.options.itemSelector;return d?a.filter(d).add(a.find(d)):a},_getBricks:function(a){return this._filterFindBricks(a).css({position:"absolute"}).addClass("masonry-brick")},_create:function(a){this.options=l.extend(!0,{},l.Mason.settings,a);this.styleQueue=
[];this.reloadItems();a=this.element[0].style;this.originalStyle={};for(var d=0,c=g.length;d<c;d++){var f=g[d];this.originalStyle[f]=a[f]||""}this.element.css({position:"relative"});this.horizontalDirection=this.options.isRTL?"right":"left";this.offset={};a=l(document.createElement("div"));this.element.prepend(a);this.offset.y=Math.round(a.position().top);this.options.isRTL?(a.css({"float":"right",display:"inline-block"}),this.offset.x=Math.round(this.element.outerWidth()-a.position().left)):this.offset.x=
Math.round(a.position().left);a.remove();var s=this;setTimeout(function(){s.element.addClass("masonry")},0);this.options.isResizable&&l(e).bind("smartresize.masonry",function(){s.resize()})},_init:function(a){this._getColumns("masonry");this._reLayout(a)},option:function(a,d){l.isPlainObject(a)&&(this.options=l.extend(!0,this.options,a))},layout:function(a,d){for(var c,e,g,f,u,K,G=0,Q=a.length;G<Q;G++)if(c=l(a[G]),e=Math.ceil(c.outerWidth(!0)/this.columnWidth),e=Math.min(e,this.cols),1===e)this._placeBrick(c,
this.colYs);else{g=this.cols+1-e;f=[];for(K=0;K<g;K++)u=this.colYs.slice(K,K+e),f[K]=Math.max.apply(Math,u);this._placeBrick(c,f)}Q={};Q.height=Math.max.apply(Math,this.colYs)-this.offset.y;if(this.options.isFitWidth){c=0;for(G=this.cols;--G&&this.colYs[G]===this.offset.y;)c++;Q.width=(this.cols-c)*this.columnWidth-this.options.gutterWidth}this.styleQueue.push({$el:this.element,style:Q});c=this.isLaidOut?this.options.isAnimated?"animate":"css":"css";e=this.options.animationOptions;G=0;for(Q=this.styleQueue.length;G<
Q;G++)g=this.styleQueue[G],g.$el[c](g.style,e);this.styleQueue=[];d&&d.call(a);this.isLaidOut=!0},_getColumns:function(){var a=(this.options.isFitWidth?this.element.parent():this.element).width();this.columnWidth=this.options.columnWidth||this.$bricks.outerWidth(!0)||a;this.columnWidth+=this.options.gutterWidth;this.cols=Math.floor((a+this.options.gutterWidth)/this.columnWidth);this.cols=Math.max(this.cols,1)},_placeBrick:function(a,d){for(var c=Math.min.apply(Math,d),e=0,g=0,f=d.length;g<f;g++)if(d[g]===
c){e=g;break}g={top:c};g[this.horizontalDirection]=this.columnWidth*e+this.offset.x;this.styleQueue.push({$el:a,style:g});c+=a.outerHeight(!0);f=this.cols+1-f;for(g=0;g<f;g++)this.colYs[e+g]=c},resize:function(){var a=this.cols;this._getColumns("masonry");this.cols!==a&&this._reLayout()},_reLayout:function(a){var d=this.cols;for(this.colYs=[];d--;)this.colYs.push(this.offset.y);this.layout(this.$bricks,a)},reloadItems:function(){this.$bricks=this._getBricks(this.element.children())},reload:function(a){this.reloadItems();
this._init(a)},appended:function(a,d,c){if(d){this._filterFindBricks(a).css({top:this.element.height()});var e=this;setTimeout(function(){e._appended(a,c)},1)}else this._appended(a,c)},_appended:function(a,d){var c=this._getBricks(a);this.$bricks=this.$bricks.add(c);this.layout(c,d)},remove:function(a){this.$bricks=this.$bricks.not(a);a.remove()},destroy:function(){this.$bricks.removeClass("masonry-brick").each(function(){this.style.position="";this.style.top="";this.style.left=""});for(var a=this.element[0].style,
d=0,c=g.length;d<c;d++){var f=g[d];a[f]=this.originalStyle[f]}this.element.unbind(".masonry").removeClass("masonry").removeData("masonry");l(e).unbind(".masonry")}};l.fn.imagesLoaded=function(a){function d(){0>=--l&&this.src!==u&&(setTimeout(c),g.unbind("load error",d))}function c(){a.call(e,g)}var e=this,g=e.find("img").add(e.filter("img")),l=g.length,u="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";l||c();g.bind("load error",d).each(function(){if(this.complete||this.complete===
f){var a=this.src;this.src=u;this.src=a}});return e};var d=function(a){this.console&&console.error(a)};l.fn.masonry=function(a){if("string"==typeof a){var c=Array.prototype.slice.call(arguments,1);this.each(function(){var e=l.data(this,"masonry");e?!l.isFunction(e[a])||"_"===a.charAt(0)?d("no such method '"+a+"' for masonry instance"):e[a].apply(e,c):d("cannot call methods on masonry prior to initialization; attempted to call method '"+a+"'")})}else this.each(function(){var d=l.data(this,"masonry");
d?(d.option(a||{}),d._init()):l.data(this,"masonry",new l.Mason(a,this))});return this}})(window,jQuery);
(function(e,l){function f(a){return!e(a).parents().andSelf().filter(function(){return"hidden"===e.curCSS(this,"visibility")||e.expr.filters.hidden(this)}).length}function c(a,c){var d=a.nodeName.toLowerCase();if("area"===d){var d=a.parentNode,v=d.name;if(!a.href||!v||"map"!==d.nodeName.toLowerCase())return!1;d=e("img[usemap=#"+v+"]")[0];return!!d&&f(d)}return(/input|select|textarea|button|object/.test(d)?!a.disabled:"a"==d?a.href||c:c)&&f(a)}e.ui=e.ui||{};e.ui.version||(e.extend(e.ui,{version:"1.8.18",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),e.fn.extend({propAttr:e.fn.prop||e.fn.attr,_focus:e.fn.focus,focus:function(a,c){return"number"==typeof a?this.each(function(){var d=
this;setTimeout(function(){e(d).focus();c&&c.call(d)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?a=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.curCSS(this,"position",1))&&/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0):a=this.parents().filter(function(){return/(auto|scroll)/.test(e.curCSS(this,
"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!a.length?e(document):a},zIndex:function(a){if(a!==l)return this.css("zIndex",a);if(this.length){a=e(this[0]);for(var c;a.length&&a[0]!==document;){c=a.css("position");if("absolute"===c||"relative"===c||"fixed"===c)if(c=parseInt(a.css("zIndex"),10),!isNaN(c)&&0!==c)return c;a=a.parent()}}return 0},disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":
"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.each(["Width","Height"],function(a,c){function d(a,d,c,g){e.each(f,function(){d-=parseFloat(e.curCSS(a,"padding"+this,!0))||0;c&&(d-=parseFloat(e.curCSS(a,"border"+this+"Width",!0))||0);g&&(d-=parseFloat(e.curCSS(a,"margin"+this,!0))||0)});return d}var f="Width"===c?["Left","Right"]:["Top","Bottom"],t=c.toLowerCase(),p={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,
outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+c]=function(a){return a===l?p["inner"+c].call(this):this.each(function(){e(this).css(t,d(this,a)+"px")})};e.fn["outer"+c]=function(a,f){return"number"!=typeof a?p["outer"+c].call(this,a):this.each(function(){e(this).css(t,d(this,a,!0,f)+"px")})}}),e.extend(e.expr[":"],{data:function(a,c,d){return!!e.data(a,d[3])},focusable:function(a){return c(a,!isNaN(e.attr(a,"tabindex")))},tabbable:function(a){var g=e.attr(a,"tabindex"),d=isNaN(g);
return(d||0<=g)&&c(a,!d)}}),e(function(){var a=document.body,c=a.appendChild(c=document.createElement("div"));c.offsetHeight;e.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});e.support.minHeight=100===c.offsetHeight;e.support.selectstart="onselectstart"in c;a.removeChild(c).style.display="none"}),e.extend(e.ui,{plugin:{add:function(a,c,d){a=e.ui[a].prototype;for(var f in d)a.plugins[f]=a.plugins[f]||[],a.plugins[f].push([c,d[f]])},call:function(a,c,d){if((c=a.plugins[c])&&
a.element[0].parentNode)for(var e=0;e<c.length;e++)a.options[c[e][0]]&&c[e][1].apply(a.element,d)}},contains:function(a,c){return document.compareDocumentPosition?a.compareDocumentPosition(c)&16:a!==c&&a.contains(c)},hasScroll:function(a,c){if("hidden"===e(a).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",f=!1;if(0<a[d])return!0;a[d]=1;f=0<a[d];a[d]=0;return f},isOverAxis:function(a,c,d){return a>c&&a<c+d},isOver:function(a,c,d,f,l,p){return e.ui.isOverAxis(a,d,l)&&e.ui.isOverAxis(c,
f,p)}}))})(jQuery);
(function(e,l){if(e.cleanData){var f=e.cleanData;e.cleanData=function(a){for(var c=0,d;null!=(d=a[c]);c++)try{e(d).triggerHandler("remove")}catch(v){}f(a)}}else{var c=e.fn.remove;e.fn.remove=function(a,g){return this.each(function(){g||(!a||e.filter(a,[this]).length)&&e("*",this).add([this]).each(function(){try{e(this).triggerHandler("remove")}catch(a){}});return c.call(e(this),a,g)})}}e.widget=function(a,c,d){var f=a.split(".")[0],l;a=a.split(".")[1];l=f+"-"+a;d||(d=c,c=e.Widget);e.expr[":"][l]=
function(c){return!!e.data(c,a)};e[f]=e[f]||{};e[f][a]=function(a,c){arguments.length&&this._createWidget(a,c)};c=new c;c.options=e.extend(!0,{},c.options);e[f][a].prototype=e.extend(!0,c,{namespace:f,widgetName:a,widgetEventPrefix:e[f][a].prototype.widgetEventPrefix||a,widgetBaseClass:l},d);e.widget.bridge(a,e[f][a])};e.widget.bridge=function(a,c){e.fn[a]=function(d){var f="string"==typeof d,t=Array.prototype.slice.call(arguments,1),p=this;d=!f&&t.length?e.extend.apply(null,[!0,d].concat(t)):d;if(f&&
"_"===d.charAt(0))return p;f?this.each(function(){var c=e.data(this,a),g=c&&e.isFunction(c[d])?c[d].apply(c,t):c;if(g!==c&&g!==l)return p=g,!1}):this.each(function(){var f=e.data(this,a);f?f.option(d||{})._init():e.data(this,a,new c(d,this))});return p}};e.Widget=function(a,c){arguments.length&&this._createWidget(a,c)};e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(a,c){e.data(c,this.widgetName,this);this.element=e(c);this.options=e.extend(!0,
{},this.options,this._getCreateOptions(),a);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+
"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(a,c){var d=a;if(0===arguments.length)return e.extend({},this.options);if("string"==typeof a){if(c===l)return this.options[a];d={};d[a]=c}this._setOptions(d);return this},_setOptions:function(a){var c=this;e.each(a,function(a,e){c._setOption(a,e)});return this},_setOption:function(a,c){this.options[a]=c;"disabled"===a&&this.widget()[c?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",
c);return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(a,c,d){var f,l=this.options[a];d=d||{};c=e.Event(c);c.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();c.target=this.element[0];if(a=c.originalEvent)for(f in a)f in c||(c[f]=a[f]);this.element.trigger(c,d);return!(e.isFunction(l)&&!1===l.call(this.element[0],c,d)||c.isDefaultPrevented())}}})(jQuery);
(function(e,l){var f=!1;e(document).mouseup(function(c){f=!1});e.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var c=this;this.element.bind("mousedown."+this.widgetName,function(a){return c._mouseDown(a)}).bind("click."+this.widgetName,function(a){if(!0===e.data(a.target,c.widgetName+".preventClickEvent"))return e.removeData(a.target,c.widgetName+".preventClickEvent"),a.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName)},_mouseDown:function(c){if(!f){this._mouseStarted&&this._mouseUp(c);this._mouseDownEvent=c;var a=this,g=1==c.which,d="string"==typeof this.options.cancel&&c.target.nodeName?e(c.target).closest(this.options.cancel).length:!1;if(!g||d||!this._mouseCapture(c))return!0;(this.mouseDelayMet=!this.options.delay)||(this._mouseDelayTimer=setTimeout(function(){a.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=!1!==this._mouseStart(c),
!this._mouseStarted))return c.preventDefault(),!0;!0===e.data(c.target,this.widgetName+".preventClickEvent")&&e.removeData(c.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(c){return a._mouseMove(c)};this._mouseUpDelegate=function(c){return a._mouseUp(c)};e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);c.preventDefault();return f=!0}},_mouseMove:function(c){if(e.browser.msie&&!(9<=document.documentMode)&&
!c.button)return this._mouseUp(c);if(this._mouseStarted)return this._mouseDrag(c),c.preventDefault();this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,c),this._mouseStarted?this._mouseDrag(c):this._mouseUp(c));return!this._mouseStarted},_mouseUp:function(c){e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,c.target==
this._mouseDownEvent.target&&e.data(c.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(c));return!1},_mouseDistanceMet:function(c){return Math.max(Math.abs(this._mouseDownEvent.pageX-c.pageX),Math.abs(this._mouseDownEvent.pageY-c.pageY))>=this.options.distance},_mouseDelayMet:function(c){return this.mouseDelayMet},_mouseStart:function(c){},_mouseDrag:function(c){},_mouseStop:function(c){},_mouseCapture:function(c){return!0}})})(jQuery);
(function(e,l){e.ui=e.ui||{};var f=/left|center|right/,c=/top|center|bottom/,a={},g=e.fn.position,d=e.fn.offset;e.fn.position=function(d){if(!d||!d.of)return g.apply(this,arguments);d=e.extend({},d);var l=e(d.of),p=l[0],E=(d.collision||"flip").split(" "),s=d.offset?d.offset.split(" "):[0,0],I,u,K;9===p.nodeType?(I=l.width(),u=l.height(),K={top:0,left:0}):p.setTimeout?(I=l.width(),u=l.height(),K={top:l.scrollTop(),left:l.scrollLeft()}):p.preventDefault?(d.at="left top",I=u=0,K={top:d.of.pageY,left:d.of.pageX}):
(I=l.outerWidth(),u=l.outerHeight(),K=l.offset());e.each(["my","at"],function(){var a=(d[this]||"").split(" ");1===a.length&&(a=f.test(a[0])?a.concat(["center"]):c.test(a[0])?["center"].concat(a):["center","center"]);a[0]=f.test(a[0])?a[0]:"center";a[1]=c.test(a[1])?a[1]:"center";d[this]=a});1===E.length&&(E[1]=E[0]);s[0]=parseInt(s[0],10)||0;1===s.length&&(s[1]=s[0]);s[1]=parseInt(s[1],10)||0;"right"===d.at[0]?K.left+=I:"center"===d.at[0]&&(K.left+=I/2);"bottom"===d.at[1]?K.top+=u:"center"===d.at[1]&&
(K.top+=u/2);K.left+=s[0];K.top+=s[1];return this.each(function(){var c=e(this),g=c.outerWidth(),f=c.outerHeight(),l=parseInt(e.curCSS(this,"marginLeft",!0))||0,t=parseInt(e.curCSS(this,"marginTop",!0))||0,p=g+l+(parseInt(e.curCSS(this,"marginRight",!0))||0),Vb=f+t+(parseInt(e.curCSS(this,"marginBottom",!0))||0),ea=e.extend({},K),Za;"right"===d.my[0]?ea.left-=g:"center"===d.my[0]&&(ea.left-=g/2);"bottom"===d.my[1]?ea.top-=f:"center"===d.my[1]&&(ea.top-=f/2);a.fractions||(ea.left=Math.round(ea.left),
ea.top=Math.round(ea.top));Za={left:ea.left-l,top:ea.top-t};e.each(["left","top"],function(a,c){e.ui.position[E[a]]&&e.ui.position[E[a]][c](ea,{targetWidth:I,targetHeight:u,elemWidth:g,elemHeight:f,collisionPosition:Za,collisionWidth:p,collisionHeight:Vb,offset:s,my:d.my,at:d.at})});e.fn.bgiframe&&c.bgiframe();c.offset(e.extend(ea,{using:d.using}))})};e.ui.position={fit:{left:function(a,c){var d=e(window),d=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();a.left=0<d?a.left-d:Math.max(a.left-
c.collisionPosition.left,a.left)},top:function(a,c){var d=e(window),d=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();a.top=0<d?a.top-d:Math.max(a.top-c.collisionPosition.top,a.top)}},flip:{left:function(a,c){if("center"!==c.at[0]){var d=e(window),d=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft(),g="left"===c.my[0]?-c.elemWidth:"right"===c.my[0]?c.elemWidth:0,f="left"===c.at[0]?c.targetWidth:-c.targetWidth,l=-2*c.offset[0];a.left+=0>c.collisionPosition.left?g+
f+l:0<d?g+f+l:0}},top:function(a,c){if("center"!==c.at[1]){var d=e(window),d=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop(),g="top"===c.my[1]?-c.elemHeight:"bottom"===c.my[1]?c.elemHeight:0,f="top"===c.at[1]?c.targetHeight:-c.targetHeight,l=-2*c.offset[1];a.top+=0>c.collisionPosition.top?g+f+l:0<d?g+f+l:0}}}};e.offset.setOffset||(e.offset.setOffset=function(a,c){/static/.test(e.curCSS(a,"position"))&&(a.style.position="relative");var d=e(a),g=d.offset(),f=parseInt(e.curCSS(a,"top",
!0),10)||0,l=parseInt(e.curCSS(a,"left",!0),10)||0,g={top:c.top-g.top+f,left:c.left-g.left+l};"using"in c?c.using.call(a,g):d.css(g)},e.fn.offset=function(a){var c=this[0];return!c||!c.ownerDocument?null:a?this.each(function(){e.offset.setOffset(this,a)}):d.call(this)});(function(){var c=document.getElementsByTagName("body")[0],d=document.createElement("div"),g,f;g=document.createElement(c?"div":"body");f={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};c&&e.extend(f,{position:"absolute",
left:"-1000px",top:"-1000px"});for(var l in f)g.style[l]=f[l];g.appendChild(d);f=c||document.documentElement;f.insertBefore(g,f.firstChild);d.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;";d=e(d).offset(function(a,c){return c}).offset();g.innerHTML="";f.removeChild(g);c=d.top+d.left+(c?2E3:0);a.fractions=21<c&&22>c})()})(jQuery);
(function(e,l){e.widget("ui.draggable",e.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&
(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable"))return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(f){var c=this.options;if(this.helper||c.disabled||e(f.target).is(".ui-resizable-handle"))return!1;
this.handle=this._getHandle(f);if(!this.handle)return!1;c.iframeFix&&e(!0===c.iframeFix?"iframe":c.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(e(this).offset()).appendTo("body")});return!0},_mouseStart:function(f){var c=this.options;this.helper=this._createHelper(f);this._cacheHelperProportions();e.ui.ddmanager&&(e.ui.ddmanager.current=
this);this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};e.extend(this.offset,{click:{left:f.pageX-this.offset.left,top:f.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(f);this.originalPageX=f.pageX;
this.originalPageY=f.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);c.containment&&this._setContainment();if(!1===this._trigger("start",f))return this._clear(),!1;this._cacheHelperProportions();e.ui.ddmanager&&!c.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,f);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(f,!0);e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,f);return!0},_mouseDrag:function(f,c){this.position=this._generatePosition(f);this.positionAbs=this._convertPositionTo("absolute");
if(!c){var a=this._uiHash();if(!1===this._trigger("drag",f,a))return this._mouseUp({}),!1;this.position=a.position}if(!this.options.axis||"y"!=this.options.axis)this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||"x"!=this.options.axis)this.helper[0].style.top=this.position.top+"px";e.ui.ddmanager&&e.ui.ddmanager.drag(this,f);return!1},_mouseStop:function(f){var c=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(c=e.ui.ddmanager.drop(this,f));this.dropped&&(c=this.dropped,this.dropped=
!1);if((!this.element[0]||!this.element[0].parentNode)&&"original"==this.options.helper)return!1;if("invalid"==this.options.revert&&!c||"valid"==this.options.revert&&c||!0===this.options.revert||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var a=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==a._trigger("stop",f)&&a._clear()})}else!1!==this._trigger("stop",f)&&this._clear();return!1},_mouseUp:function(f){!0===
this.options.iframeFix&&e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,f);return e.ui.mouse.prototype._mouseUp.call(this,f)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(f){var c=!this.options.handle||!e(this.options.handle,this.element).length?!0:!1;e(this.options.handle,this.element).find("*").andSelf().each(function(){this==f.target&&(c=
!0)});return c},_createHelper:function(f){var c=this.options;f=e.isFunction(c.helper)?e(c.helper.apply(this.element[0],[f])):"clone"==c.helper?this.element.clone().removeAttr("id"):this.element;f.parents("body").length||f.appendTo("parent"==c.appendTo?this.element[0].parentNode:c.appendTo);f[0]!=this.element[0]&&!/(fixed|absolute)/.test(f.css("position"))&&f.css("position","absolute");return f},_adjustOffsetFromHelper:function(f){"string"==typeof f&&(f=f.split(" "));e.isArray(f)&&(f={left:+f[0],top:+f[1]||
0});"left"in f&&(this.offset.click.left=f.left+this.margins.left);"right"in f&&(this.offset.click.left=this.helperProportions.width-f.right+this.margins.left);"top"in f&&(this.offset.click.top=f.top+this.margins.top);"bottom"in f&&(this.offset.click.top=this.helperProportions.height-f.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var f=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],
this.offsetParent[0])&&(f.left+=this.scrollParent.scrollLeft(),f.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.browser.msie)f={top:0,left:0};return{top:f.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:f.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.element.position();return{top:e.top-
(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),
height:this.helper.outerHeight()}},_setContainment:function(){var f=this.options;"parent"==f.containment&&(f.containment=this.helper[0].parentNode);if("document"==f.containment||"window"==f.containment)this.containment=["document"==f.containment?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==f.containment?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==f.containment?0:e(window).scrollLeft())+e("document"==f.containment?document:
window).width()-this.helperProportions.width-this.margins.left,("document"==f.containment?0:e(window).scrollTop())+(e("document"==f.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(f.containment)&&f.containment.constructor!=Array){var f=e(f.containment),c=f[0];if(c){f.offset();var a="hidden"!=e(c).css("overflow");this.containment=[(parseInt(e(c).css("borderLeftWidth"),10)||0)+(parseInt(e(c).css("paddingLeft"),
10)||0),(parseInt(e(c).css("borderTopWidth"),10)||0)+(parseInt(e(c).css("paddingTop"),10)||0),(a?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(e(c).css("borderLeftWidth"),10)||0)-(parseInt(e(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(a?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(e(c).css("borderTopWidth"),10)||0)-(parseInt(e(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];
this.relative_container=f}}else f.containment.constructor==Array&&(this.containment=f.containment)},_convertPositionTo:function(f,c){c||(c=this.position);var a="absolute"==f?1:-1,g="absolute"==this.cssPosition&&(this.scrollParent[0]==document||!e.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,d=/(html|body)/i.test(g[0].tagName);return{top:c.top+this.offset.relative.top*a+this.offset.parent.top*a-(e.browser.safari&&526>e.browser.version&&"fixed"==this.cssPosition?
0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():d?0:g.scrollTop())*a),left:c.left+this.offset.relative.left*a+this.offset.parent.left*a-(e.browser.safari&&526>e.browser.version&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():d?0:g.scrollLeft())*a)}},_generatePosition:function(f){var c=this.options,a="absolute"==this.cssPosition&&(this.scrollParent[0]==document||!e.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,
g=/(html|body)/i.test(a[0].tagName),d=f.pageX,l=f.pageY;if(this.originalPosition){var t;this.containment&&(this.relative_container?(t=this.relative_container.offset(),t=[this.containment[0]+t.left,this.containment[1]+t.top,this.containment[2]+t.left,this.containment[3]+t.top]):t=this.containment,f.pageX-this.offset.click.left<t[0]&&(d=t[0]+this.offset.click.left),f.pageY-this.offset.click.top<t[1]&&(l=t[1]+this.offset.click.top),f.pageX-this.offset.click.left>t[2]&&(d=t[2]+this.offset.click.left),
f.pageY-this.offset.click.top>t[3]&&(l=t[3]+this.offset.click.top));c.grid&&(l=c.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY,l=t?l-this.offset.click.top<t[1]||l-this.offset.click.top>t[3]?l-this.offset.click.top<t[1]?l+c.grid[1]:l-c.grid[1]:l:l,d=c.grid[0]?this.originalPageX+Math.round((d-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX,d=t?d-this.offset.click.left<t[0]||d-this.offset.click.left>t[2]?d-this.offset.click.left<t[0]?
d+c.grid[0]:d-c.grid[0]:d:d)}return{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&526>e.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():g?0:a.scrollTop()),left:d-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&526>e.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():g?0:a.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");
this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(f,c,a){a=a||this._uiHash();e.ui.plugin.call(this,f,[c,a]);"drag"==f&&(this.positionAbs=this._convertPositionTo("absolute"));return e.Widget.prototype._trigger.call(this,f,c,a)},plugins:{},_uiHash:function(e){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});e.extend(e.ui.draggable,{version:"1.8.18"});
e.ui.plugin.add("draggable","connectToSortable",{start:function(f,c){var a=e(this).data("draggable"),g=a.options,d=e.extend({},c,{item:a.element});a.sortables=[];e(g.connectToSortable).each(function(){var c=e.data(this,"sortable");c&&!c.options.disabled&&(a.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",f,d))})},stop:function(f,c){var a=e(this).data("draggable"),g=e.extend({},c,{item:a.element});e.each(a.sortables,function(){this.instance.isOver?
(this.instance.isOver=0,a.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(f),this.instance.options.helper=this.instance.options._helper,"original"==a.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",f,g))})},drag:function(f,c){var a=e(this).data("draggable"),g=this;e.each(a.sortables,function(d){this.instance.positionAbs=
a.positionAbs;this.instance.helperProportions=a.helperProportions;this.instance.offset.click=a.offset.click;this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(g).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},f.target=this.instance.currentItem[0],this.instance._mouseCapture(f,
!0),this.instance._mouseStart(f,!0,!0),this.instance.offset.click.top=a.offset.click.top,this.instance.offset.click.left=a.offset.click.left,this.instance.offset.parent.left-=a.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=a.offset.parent.top-this.instance.offset.parent.top,a._trigger("toSortable",f),a.dropped=this.instance.element,a.currentItem=a.element,this.instance.fromOutside=a),this.instance.currentItem&&this.instance._mouseDrag(f)):this.instance.isOver&&
(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",f,this.instance._uiHash(this.instance)),this.instance._mouseStop(f,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),a._trigger("fromSortable",f),a.dropped=!1)})}});e.ui.plugin.add("draggable","cursor",{start:function(f,c){var a=e("body"),g=e(this).data("draggable").options;
a.css("cursor")&&(g._cursor=a.css("cursor"));a.css("cursor",g.cursor)},stop:function(f,c){var a=e(this).data("draggable").options;a._cursor&&e("body").css("cursor",a._cursor)}});e.ui.plugin.add("draggable","opacity",{start:function(f,c){var a=e(c.helper),g=e(this).data("draggable").options;a.css("opacity")&&(g._opacity=a.css("opacity"));a.css("opacity",g.opacity)},stop:function(f,c){var a=e(this).data("draggable").options;a._opacity&&e(c.helper).css("opacity",a._opacity)}});e.ui.plugin.add("draggable",
"scroll",{start:function(f,c){var a=e(this).data("draggable");a.scrollParent[0]!=document&&"HTML"!=a.scrollParent[0].tagName&&(a.overflowOffset=a.scrollParent.offset())},drag:function(f,c){var a=e(this).data("draggable"),g=a.options,d=!1;if(a.scrollParent[0]!=document&&"HTML"!=a.scrollParent[0].tagName){if(!g.axis||"x"!=g.axis)a.overflowOffset.top+a.scrollParent[0].offsetHeight-f.pageY<g.scrollSensitivity?a.scrollParent[0].scrollTop=d=a.scrollParent[0].scrollTop+g.scrollSpeed:f.pageY-a.overflowOffset.top<
g.scrollSensitivity&&(a.scrollParent[0].scrollTop=d=a.scrollParent[0].scrollTop-g.scrollSpeed);if(!g.axis||"y"!=g.axis)a.overflowOffset.left+a.scrollParent[0].offsetWidth-f.pageX<g.scrollSensitivity?a.scrollParent[0].scrollLeft=d=a.scrollParent[0].scrollLeft+g.scrollSpeed:f.pageX-a.overflowOffset.left<g.scrollSensitivity&&(a.scrollParent[0].scrollLeft=d=a.scrollParent[0].scrollLeft-g.scrollSpeed)}else{if(!g.axis||"x"!=g.axis)f.pageY-e(document).scrollTop()<g.scrollSensitivity?d=e(document).scrollTop(e(document).scrollTop()-
g.scrollSpeed):e(window).height()-(f.pageY-e(document).scrollTop())<g.scrollSensitivity&&(d=e(document).scrollTop(e(document).scrollTop()+g.scrollSpeed));if(!g.axis||"y"!=g.axis)f.pageX-e(document).scrollLeft()<g.scrollSensitivity?d=e(document).scrollLeft(e(document).scrollLeft()-g.scrollSpeed):e(window).width()-(f.pageX-e(document).scrollLeft())<g.scrollSensitivity&&(d=e(document).scrollLeft(e(document).scrollLeft()+g.scrollSpeed))}!1!==d&&e.ui.ddmanager&&!g.dropBehaviour&&e.ui.ddmanager.prepareOffsets(a,
f)}});e.ui.plugin.add("draggable","snap",{start:function(f,c){var a=e(this).data("draggable"),g=a.options;a.snapElements=[];e(g.snap.constructor!=String?g.snap.items||":data(draggable)":g.snap).each(function(){var c=e(this),g=c.offset();this!=a.element[0]&&a.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:g.top,left:g.left})})},drag:function(f,c){for(var a=e(this).data("draggable"),g=a.options,d=g.snapTolerance,l=c.offset.left,t=l+a.helperProportions.width,p=c.offset.top,
E=p+a.helperProportions.height,s=a.snapElements.length-1;0<=s;s--){var I=a.snapElements[s].left,u=I+a.snapElements[s].width,K=a.snapElements[s].top,G=K+a.snapElements[s].height;if(I-d<l&&l<u+d&&K-d<p&&p<G+d||I-d<l&&l<u+d&&K-d<E&&E<G+d||I-d<t&&t<u+d&&K-d<p&&p<G+d||I-d<t&&t<u+d&&K-d<E&&E<G+d){if("inner"!=g.snapMode){var Q=Math.abs(K-E)<=d,ja=Math.abs(G-p)<=d,oa=Math.abs(I-t)<=d,va=Math.abs(u-l)<=d;Q&&(c.position.top=a._convertPositionTo("relative",{top:K-a.helperProportions.height,left:0}).top-a.margins.top);
ja&&(c.position.top=a._convertPositionTo("relative",{top:G,left:0}).top-a.margins.top);oa&&(c.position.left=a._convertPositionTo("relative",{top:0,left:I-a.helperProportions.width}).left-a.margins.left);va&&(c.position.left=a._convertPositionTo("relative",{top:0,left:u}).left-a.margins.left)}var Ya=Q||ja||oa||va;"outer"!=g.snapMode&&(Q=Math.abs(K-p)<=d,ja=Math.abs(G-E)<=d,oa=Math.abs(I-l)<=d,va=Math.abs(u-t)<=d,Q&&(c.position.top=a._convertPositionTo("relative",{top:K,left:0}).top-a.margins.top),
ja&&(c.position.top=a._convertPositionTo("relative",{top:G-a.helperProportions.height,left:0}).top-a.margins.top),oa&&(c.position.left=a._convertPositionTo("relative",{top:0,left:I}).left-a.margins.left),va&&(c.position.left=a._convertPositionTo("relative",{top:0,left:u-a.helperProportions.width}).left-a.margins.left));!a.snapElements[s].snapping&&(Q||ja||oa||va||Ya)&&a.options.snap.snap&&a.options.snap.snap.call(a.element,f,e.extend(a._uiHash(),{snapItem:a.snapElements[s].item}));a.snapElements[s].snapping=
Q||ja||oa||va||Ya}else a.snapElements[s].snapping&&a.options.snap.release&&a.options.snap.release.call(a.element,f,e.extend(a._uiHash(),{snapItem:a.snapElements[s].item})),a.snapElements[s].snapping=!1}}});e.ui.plugin.add("draggable","stack",{start:function(f,c){var a=e(this).data("draggable").options,a=e.makeArray(e(a.stack)).sort(function(a,c){return(parseInt(e(a).css("zIndex"),10)||0)-(parseInt(e(c).css("zIndex"),10)||0)});if(a.length){var g=parseInt(a[0].style.zIndex)||0;e(a).each(function(a){this.style.zIndex=
g+a});this[0].style.zIndex=g+a.length}}});e.ui.plugin.add("draggable","zIndex",{start:function(f,c){var a=e(c.helper),g=e(this).data("draggable").options;a.css("zIndex")&&(g._zIndex=a.css("zIndex"));a.css("zIndex",g.zIndex)},stop:function(f,c){var a=e(this).data("draggable").options;a._zIndex&&e(c.helper).css("zIndex",a._zIndex)}})})(jQuery);
(function(e,l){e.widget("ui.resizable",e.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var a=this,c=this.options;this.element.addClass("ui-resizable");e.extend(this,{_aspectRatio:!!c.aspectRatio,aspectRatio:c.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],
_helper:c.helper||c.ghost||c.animate?c.helper||"ui-resizable-helper":null});this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=
!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,
display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize());this.handles=c.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var d=this.handles.split(",");this.handles=
{};for(var f=0;f<d.length;f++){var l=e.trim(d[f]),p=e('<div class="ui-resizable-handle ui-resizable-'+l+'"></div>');/sw|se|ne|nw/.test(l)&&p.css({zIndex:++c.zIndex});"se"==l&&p.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[l]=".ui-resizable-"+l;this.element.append(p)}}this._renderAxis=function(a){a=a||this.element;for(var c in this.handles){this.handles[c].constructor==String&&(this.handles[c]=e(this.handles[c],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var d=
e(this.handles[c],this.element),g=0,g=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),d=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join("");a.css(d,g);this._proportionallyResize()}e(this.handles[c])}};this._renderAxis(this.element);this._handles=e(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!a.resizing){if(this.className)var c=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);a.axis=
c&&c[1]?c[1]:"se"}});c.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").hover(function(){c.disabled||(e(this).removeClass("ui-resizable-autohide"),a._handles.show())},function(){c.disabled||a.resizing||(e(this).addClass("ui-resizable-autohide"),a._handles.hide())}));this._mouseInit()},destroy:function(){this._mouseDestroy();var a=function(a){e(a).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};
if(this.elementIsWrapper){a(this.element);var c=this.element;c.after(this.originalElement.css({position:c.css("position"),width:c.outerWidth(),height:c.outerHeight(),top:c.css("top"),left:c.css("left")})).remove()}this.originalElement.css("resize",this.originalResizeStyle);a(this.originalElement);return this},_mouseCapture:function(a){var c=!1,d;for(d in this.handles)e(this.handles[d])[0]==a.target&&(c=!0);return!this.options.disabled&&c},_mouseStart:function(a){var c=this.options,d=this.element.position(),
l=this.element;this.resizing=!0;this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()};(l.is(".ui-draggable")||/absolute/.test(l.css("position")))&&l.css({position:"absolute",top:d.top,left:d.left});this._renderProxy();var d=f(this.helper.css("left")),t=f(this.helper.css("top"));c.containment&&(d+=e(c.containment).scrollLeft()||0,t+=e(c.containment).scrollTop()||0);this.offset=this.helper.offset();this.position={left:d,top:t};this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:
{width:l.width(),height:l.height()};this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()};this.originalPosition={left:d,top:t};this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()};this.originalMousePosition={left:a.pageX,top:a.pageY};this.aspectRatio="number"==typeof c.aspectRatio?c.aspectRatio:this.originalSize.width/this.originalSize.height||1;c=e(".ui-resizable-"+this.axis).css("cursor");e("body").css("cursor",
"auto"==c?this.axis+"-resize":c);l.addClass("ui-resizable-resizing");this._propagate("start",a);return!0},_mouseDrag:function(a){var c=this.helper,d=this.originalMousePosition,e=this._change[this.axis];if(!e)return!1;d=e.apply(this,[a,a.pageX-d.left||0,a.pageY-d.top||0]);this._updateVirtualBoundaries(a.shiftKey);if(this._aspectRatio||a.shiftKey)d=this._updateRatio(d,a);d=this._respectSize(d,a);this._propagate("resize",a);c.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+
"px",height:this.size.height+"px"});!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();this._updateCache(d);this._trigger("resize",a,this.ui());return!1},_mouseStop:function(a){this.resizing=!1;var c=this.options;if(this._helper){var d=this._proportionallyResizeElements,f=d.length&&/textarea/i.test(d[0].nodeName),d=f&&e.ui.hasScroll(d[0],"left")?0:this.sizeDiff.height,f=f?0:this.sizeDiff.width,f={width:this.helper.width()-f,height:this.helper.height()-d},d=parseInt(this.element.css("left"),
10)+(this.position.left-this.originalPosition.left)||null,l=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null;c.animate||this.element.css(e.extend(f,{top:l,left:d}));this.helper.height(this.size.height);this.helper.width(this.size.width);this._helper&&!c.animate&&this._proportionallyResize()}e("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",a);this._helper&&this.helper.remove();return!1},_updateVirtualBoundaries:function(a){var e=
this.options,d,f,l,e={minWidth:c(e.minWidth)?e.minWidth:0,maxWidth:c(e.maxWidth)?e.maxWidth:Infinity,minHeight:c(e.minHeight)?e.minHeight:0,maxHeight:c(e.maxHeight)?e.maxHeight:Infinity};if(this._aspectRatio||a)a=e.minHeight*this.aspectRatio,f=e.minWidth/this.aspectRatio,d=e.maxHeight*this.aspectRatio,l=e.maxWidth/this.aspectRatio,a>e.minWidth&&(e.minWidth=a),f>e.minHeight&&(e.minHeight=f),d<e.maxWidth&&(e.maxWidth=d),l<e.maxHeight&&(e.maxHeight=l);this._vBoundaries=e},_updateCache:function(a){this.offset=
this.helper.offset();c(a.left)&&(this.position.left=a.left);c(a.top)&&(this.position.top=a.top);c(a.height)&&(this.size.height=a.height);c(a.width)&&(this.size.width=a.width)},_updateRatio:function(a,e){var d=this.position,f=this.size,l=this.axis;c(a.height)?a.width=a.height*this.aspectRatio:c(a.width)&&(a.height=a.width/this.aspectRatio);"sw"==l&&(a.left=d.left+(f.width-a.width),a.top=null);"nw"==l&&(a.top=d.top+(f.height-a.height),a.left=d.left+(f.width-a.width));return a},_respectSize:function(a,
e){var d=this._vBoundaries,f=this.axis,l=c(a.width)&&d.maxWidth&&d.maxWidth<a.width,p=c(a.height)&&d.maxHeight&&d.maxHeight<a.height,E=c(a.width)&&d.minWidth&&d.minWidth>a.width,s=c(a.height)&&d.minHeight&&d.minHeight>a.height;E&&(a.width=d.minWidth);s&&(a.height=d.minHeight);l&&(a.width=d.maxWidth);p&&(a.height=d.maxHeight);var I=this.originalPosition.left+this.originalSize.width,u=this.position.top+this.size.height,K=/sw|nw|w/.test(f),f=/nw|ne|n/.test(f);E&&K&&(a.left=I-d.minWidth);l&&K&&(a.left=
I-d.maxWidth);s&&f&&(a.top=u-d.minHeight);p&&f&&(a.top=u-d.maxHeight);(d=!a.width&&!a.height)&&!a.left&&a.top?a.top=null:d&&!a.top&&a.left&&(a.left=null);return a},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var a=this.helper||this.element,c=0;c<this._proportionallyResizeElements.length;c++){var d=this._proportionallyResizeElements[c];if(!this.borderDif){var f=[d.css("borderTopWidth"),d.css("borderRightWidth"),d.css("borderBottomWidth"),d.css("borderLeftWidth")],
l=[d.css("paddingTop"),d.css("paddingRight"),d.css("paddingBottom"),d.css("paddingLeft")];this.borderDif=e.map(f,function(a,c){var d=parseInt(a,10)||0,e=parseInt(l[c],10)||0;return d+e})}if(!e.browser.msie||!e(a).is(":hidden")&&!e(a).parents(":hidden").length)d.css({height:a.height()-this.borderDif[0]-this.borderDif[2]||0,width:a.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var a=this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||
e('<div style="overflow:hidden;"></div>');var c=e.browser.msie&&7>e.browser.version,d=c?1:0,c=c?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+c,height:this.element.outerHeight()+c,position:"absolute",left:this.elementOffset.left-d+"px",top:this.elementOffset.top-d+"px",zIndex:++a.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(a,c,d){return{width:this.originalSize.width+c}},w:function(a,c,d){return{left:this.originalPosition.left+
c,width:this.originalSize.width-c}},n:function(a,c,d){return{top:this.originalPosition.top+d,height:this.originalSize.height-d}},s:function(a,c,d){return{height:this.originalSize.height+d}},se:function(a,c,d){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[a,c,d]))},sw:function(a,c,d){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[a,c,d]))},ne:function(a,c,d){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,
[a,c,d]))},nw:function(a,c,d){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[a,c,d]))}},_propagate:function(a,c){e.ui.plugin.call(this,a,[c,this.ui()]);"resize"!=a&&this._trigger(a,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});e.extend(e.ui.resizable,{version:"1.8.18"});e.ui.plugin.add("resizable",
"alsoResize",{start:function(a,c){var d=e(this).data("resizable").options,f=function(a){e(a).each(function(){var a=e(this);a.data("resizable-alsoresize",{width:parseInt(a.width(),10),height:parseInt(a.height(),10),left:parseInt(a.css("left"),10),top:parseInt(a.css("top"),10)})})};"object"==typeof d.alsoResize&&!d.alsoResize.parentNode?d.alsoResize.length?(d.alsoResize=d.alsoResize[0],f(d.alsoResize)):e.each(d.alsoResize,function(a){f(a)}):f(d.alsoResize)},resize:function(a,c){var d=e(this).data("resizable"),
f=d.options,l=d.originalSize,p=d.originalPosition,E={height:d.size.height-l.height||0,width:d.size.width-l.width||0,top:d.position.top-p.top||0,left:d.position.left-p.left||0},s=function(a,d){e(a).each(function(){var a=e(this),f=e(this).data("resizable-alsoresize"),l={},v=d&&d.length?d:a.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(v,function(a,c){var d=(f[c]||0)+(E[c]||0);d&&0<=d&&(l[c]=d||null)});a.css(l)})};"object"==typeof f.alsoResize&&!f.alsoResize.nodeType?
e.each(f.alsoResize,function(a,c){s(a,c)}):s(f.alsoResize)},stop:function(a,c){e(this).removeData("resizable-alsoresize")}});e.ui.plugin.add("resizable","animate",{stop:function(a,c){var d=e(this).data("resizable"),f=d.options,l=d._proportionallyResizeElements,p=l.length&&/textarea/i.test(l[0].nodeName),E=p&&e.ui.hasScroll(l[0],"left")?0:d.sizeDiff.height,p={width:d.size.width-(p?0:d.sizeDiff.width),height:d.size.height-E},E=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||
null,s=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;d.element.animate(e.extend(p,s&&E?{top:s,left:E}:{}),{duration:f.animateDuration,easing:f.animateEasing,step:function(){var c={width:parseInt(d.element.css("width"),10),height:parseInt(d.element.css("height"),10),top:parseInt(d.element.css("top"),10),left:parseInt(d.element.css("left"),10)};l&&l.length&&e(l[0]).css({width:c.width,height:c.height});d._updateCache(c);d._propagate("resize",a)}})}});e.ui.plugin.add("resizable",
"containment",{start:function(a,c){var d=e(this).data("resizable"),l=d.element,t=d.options.containment;if(l=t instanceof e?t.get(0):/parent/.test(t)?l.parent().get(0):t)if(d.containerElement=e(l),/document/.test(t)||t==document)d.containerOffset={left:0,top:0},d.containerPosition={left:0,top:0},d.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var p=e(l),E=[];e(["Top","Right","Left","Bottom"]).each(function(a,
c){E[a]=f(p.css("padding"+c))});d.containerOffset=p.offset();d.containerPosition=p.position();d.containerSize={height:p.innerHeight()-E[3],width:p.innerWidth()-E[1]};var t=d.containerOffset,s=d.containerSize.height,I=d.containerSize.width,I=e.ui.hasScroll(l,"left")?l.scrollWidth:I,s=e.ui.hasScroll(l)?l.scrollHeight:s;d.parentData={element:l,left:t.left,top:t.top,width:I,height:s}}},resize:function(a,c){var d=e(this).data("resizable"),f=d.options,l=d.containerOffset,p=d.position,E=d._aspectRatio||
a.shiftKey,s={top:0,left:0},I=d.containerElement;I[0]!=document&&/static/.test(I.css("position"))&&(s=l);p.left<(d._helper?l.left:0)&&(d.size.width+=d._helper?d.position.left-l.left:d.position.left-s.left,E&&(d.size.height=d.size.width/f.aspectRatio),d.position.left=f.helper?l.left:0);p.top<(d._helper?l.top:0)&&(d.size.height+=d._helper?d.position.top-l.top:d.position.top,E&&(d.size.width=d.size.height*f.aspectRatio),d.position.top=d._helper?l.top:0);d.offset.left=d.parentData.left+d.position.left;
d.offset.top=d.parentData.top+d.position.top;f=Math.abs(d.offset.left-s.left+d.sizeDiff.width);l=Math.abs((d._helper?d.offset.top-s.top:d.offset.top-l.top)+d.sizeDiff.height);s=d.containerElement.get(0)==d.element.parent().get(0);p=/relative|absolute/.test(d.containerElement.css("position"));s&&p&&(f-=d.parentData.left);f+d.size.width>=d.parentData.width&&(d.size.width=d.parentData.width-f,E&&(d.size.height=d.size.width/d.aspectRatio));l+d.size.height>=d.parentData.height&&(d.size.height=d.parentData.height-
l,E&&(d.size.width=d.size.height*d.aspectRatio))},stop:function(a,c){var d=e(this).data("resizable"),f=d.options,l=d.containerOffset,p=d.containerPosition,E=d.containerElement,s=e(d.helper),I=s.offset(),u=s.outerWidth()-d.sizeDiff.width,s=s.outerHeight()-d.sizeDiff.height;d._helper&&!f.animate&&/relative/.test(E.css("position"))&&e(this).css({left:I.left-p.left-l.left,width:u,height:s});d._helper&&!f.animate&&/static/.test(E.css("position"))&&e(this).css({left:I.left-p.left-l.left,width:u,height:s})}});
e.ui.plugin.add("resizable","ghost",{start:function(a,c){var d=e(this).data("resizable"),f=d.options,l=d.size;d.ghost=d.originalElement.clone();d.ghost.css({opacity:0.25,display:"block",position:"relative",height:l.height,width:l.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof f.ghost?f.ghost:"");d.ghost.appendTo(d.helper)},resize:function(a,c){var d=e(this).data("resizable");d.ghost&&d.ghost.css({position:"relative",height:d.size.height,width:d.size.width})},
stop:function(a,c){var d=e(this).data("resizable");d.ghost&&d.helper&&d.helper.get(0).removeChild(d.ghost.get(0))}});e.ui.plugin.add("resizable","grid",{resize:function(a,c){var d=e(this).data("resizable"),f=d.options,l=d.size,p=d.originalSize,E=d.originalPosition,s=d.axis;f.grid="number"==typeof f.grid?[f.grid,f.grid]:f.grid;var I=Math.round((l.width-p.width)/(f.grid[0]||1))*(f.grid[0]||1),f=Math.round((l.height-p.height)/(f.grid[1]||1))*(f.grid[1]||1);/^(se|s|e)$/.test(s)?(d.size.width=p.width+
I,d.size.height=p.height+f):/^(ne)$/.test(s)?(d.size.width=p.width+I,d.size.height=p.height+f,d.position.top=E.top-f):/^(sw)$/.test(s)?(d.size.width=p.width+I,d.size.height=p.height+f,d.position.left=E.left-I):(d.size.width=p.width+I,d.size.height=p.height+f,d.position.top=E.top-f,d.position.left=E.left-I)}});var f=function(a){return parseInt(a,10)||0},c=function(a){return!isNaN(parseInt(a,10))}})(jQuery);
(function(e,l){e.widget("ui.sortable",e.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){var e=this.options;this.containerCache={};this.element.addClass("ui-sortable");
this.refresh();this.floating=this.items.length?"x"===e.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1;this.offset=this.element.offset();this._mouseInit();this.ready=!0},destroy:function(){e.Widget.prototype.destroy.call(this);this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var f=this.items.length-1;0<=f;f--)this.items[f].item.removeData(this.widgetName+"-item");return this},_setOption:function(f,
c){"disabled"===f?(this.options[f]=c,this.widget()[c?"addClass":"removeClass"]("ui-sortable-disabled")):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(f,c){var a=this;if(this.reverting||this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(f);var g=null,d=this;e(f.target).parents().each(function(){if(e.data(this,a.widgetName+"-item")==d)return g=e(this),!1});e.data(f.target,a.widgetName+"-item")==d&&(g=e(f.target));if(!g)return!1;if(this.options.handle&&
!c){var l=!1;e(this.options.handle,g).find("*").andSelf().each(function(){this==f.target&&(l=!0)});if(!l)return!1}this.currentItem=g;this._removeCurrentsFromItems();return!0},_mouseStart:function(f,c,a){c=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(f);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-
this.margins.left};this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");e.extend(this.offset,{click:{left:f.pageX-this.offset.left,top:f.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(f);this.originalPageX=f.pageX;this.originalPageY=f.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};
this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();c.containment&&this._setContainment();c.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",c.cursor));c.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",c.opacity));c.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",c.zIndex));this.scrollParent[0]!=
document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset());this._trigger("start",f,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!a)for(a=this.containers.length-1;0<=a;a--)this.containers[a]._trigger("activate",f,this._uiHash(this));e.ui.ddmanager&&(e.ui.ddmanager.current=this);e.ui.ddmanager&&!c.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,f);this.dragging=!0;this.helper.addClass("ui-sortable-helper");this._mouseDrag(f);
return!0},_mouseDrag:function(f){this.position=this._generatePosition(f);this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var c=this.options,a=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-f.pageY<c.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+c.scrollSpeed:f.pageY-this.overflowOffset.top<
c.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-c.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-f.pageX<c.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+c.scrollSpeed:f.pageX-this.overflowOffset.left<c.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-c.scrollSpeed)):(f.pageY-e(document).scrollTop()<c.scrollSensitivity?a=e(document).scrollTop(e(document).scrollTop()-
c.scrollSpeed):e(window).height()-(f.pageY-e(document).scrollTop())<c.scrollSensitivity&&(a=e(document).scrollTop(e(document).scrollTop()+c.scrollSpeed)),f.pageX-e(document).scrollLeft()<c.scrollSensitivity?a=e(document).scrollLeft(e(document).scrollLeft()-c.scrollSpeed):e(window).width()-(f.pageX-e(document).scrollLeft())<c.scrollSensitivity&&(a=e(document).scrollLeft(e(document).scrollLeft()+c.scrollSpeed)));!1!==a&&e.ui.ddmanager&&!c.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,f)}this.positionAbs=
this._convertPositionTo("absolute");if(!this.options.axis||"y"!=this.options.axis)this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||"x"!=this.options.axis)this.helper[0].style.top=this.position.top+"px";for(c=this.items.length-1;0<=c;c--){var a=this.items[c],g=a.item[0],d=this._intersectsWithPointer(a);if(d&&g!=this.currentItem[0]&&this.placeholder[1==d?"next":"prev"]()[0]!=g&&!e.ui.contains(this.placeholder[0],g)&&("semi-dynamic"==this.options.type?!e.ui.contains(this.element[0],
g):1)){this.direction=1==d?"down":"up";if("pointer"==this.options.tolerance||this._intersectsWithSides(a))this._rearrange(f,a);else break;this._trigger("change",f,this._uiHash());break}}this._contactContainers(f);e.ui.ddmanager&&e.ui.ddmanager.drag(this,f);this._trigger("sort",f,this._uiHash());this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(f,c){if(f){e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,f);if(this.options.revert){var a=this,g=a.placeholder.offset();
a.reverting=!0;e(this.helper).animate({left:g.left-this.offset.parent.left-a.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:g.top-this.offset.parent.top-a.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){a._clear(f)})}else this._clear(f,c);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):
this.currentItem.show();for(var f=this.containers.length-1;0<=f;f--)this.containers[f]._trigger("deactivate",null,this._uiHash(this)),this.containers[f].containerCache.over&&(this.containers[f]._trigger("out",null,this._uiHash(this)),this.containers[f].containerCache.over=0)}this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,
dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem));return this},serialize:function(f){var c=this._getItemsAsjQuery(f&&f.connected),a=[];f=f||{};e(c).each(function(){var c=(e(f.item||this).attr(f.attribute||"id")||"").match(f.expression||/(.+)[-=_](.+)/);c&&a.push((f.key||c[1]+"[]")+"="+(f.key&&f.expression?c[1]:c[2]))});!a.length&&f.key&&a.push(f.key+"=");return a.join("&")},toArray:function(f){var c=
this._getItemsAsjQuery(f&&f.connected),a=[];f=f||{};c.each(function(){a.push(e(f.item||this).attr(f.attribute||"id")||"")});return a},_intersectsWith:function(e){var c=this.positionAbs.left,a=c+this.helperProportions.width,g=this.positionAbs.top,d=g+this.helperProportions.height,l=e.left,t=l+e.width,p=e.top,E=p+e.height,s=this.offset.click.top,I=this.offset.click.left;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?
"width":"height"]>e[this.floating?"width":"height"]?g+s>p&&g+s<E&&c+I>l&&c+I<t:l<c+this.helperProportions.width/2&&a-this.helperProportions.width/2<t&&p<g+this.helperProportions.height/2&&d-this.helperProportions.height/2<E},_intersectsWithPointer:function(f){var c=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,f.top,f.height);f=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,f.left,f.width);c=c&&f;f=this._getDragVerticalDirection();var a=this._getDragHorizontalDirection();
return!c?!1:this.floating?a&&"right"==a||"down"==f?2:1:f&&("down"==f?2:1)},_intersectsWithSides:function(f){var c=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,f.top+f.height/2,f.height);f=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,f.left+f.width/2,f.width);var a=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();return this.floating&&g?"right"==g&&f||"left"==g&&!f:a&&("down"==a&&c||"up"==a&&!c)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-
this.lastPositionAbs.top;return 0!=e&&(0<e?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!=e&&(0<e?"right":"left")},refresh:function(e){this._refreshItems(e);this.refreshPositions();return this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(f){var c=[],a=[],g=this._connectWith();if(g&&f)for(f=g.length-1;0<=f;f--)for(var d=e(g[f]),l=d.length-
1;0<=l;l--){var t=e.data(d[l],this.widgetName);t&&t!=this&&!t.options.disabled&&a.push([e.isFunction(t.options.items)?t.options.items.call(t.element):e(t.options.items,t.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),t])}a.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(f=a.length-1;0<=f;f--)a[f][0].each(function(){c.push(this)});
return e(c)},_removeCurrentsFromItems:function(){for(var e=this.currentItem.find(":data("+this.widgetName+"-item)"),c=0;c<this.items.length;c++)for(var a=0;a<e.length;a++)e[a]==this.items[c].item[0]&&this.items.splice(c,1)},_refreshItems:function(f){this.items=[];this.containers=[this];var c=this.items,a=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],f,{item:this.currentItem}):e(this.options.items,this.element),this]],g=this._connectWith();if(g&&this.ready)for(var d=g.length-
1;0<=d;d--)for(var l=e(g[d]),t=l.length-1;0<=t;t--){var p=e.data(l[t],this.widgetName);p&&p!=this&&!p.options.disabled&&(a.push([e.isFunction(p.options.items)?p.options.items.call(p.element[0],f,{item:this.currentItem}):e(p.options.items,p.element),p]),this.containers.push(p))}for(d=a.length-1;0<=d;d--){f=a[d][1];g=a[d][0];t=0;for(l=g.length;t<l;t++)p=e(g[t]),p.data(this.widgetName+"-item",f),c.push({item:p,instance:f,width:0,height:0,left:0,top:0})}},refreshPositions:function(f){this.offsetParent&&
this.helper&&(this.offset.parent=this._getParentOffset());for(var c=this.items.length-1;0<=c;c--){var a=this.items[c];if(!(a.instance!=this.currentContainer&&this.currentContainer&&a.item[0]!=this.currentItem[0])){var g=this.options.toleranceElement?e(this.options.toleranceElement,a.item):a.item;f||(a.width=g.outerWidth(),a.height=g.outerHeight());g=g.offset();a.left=g.left;a.top=g.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);
else for(c=this.containers.length-1;0<=c;c--)g=this.containers[c].element.offset(),this.containers[c].containerCache.left=g.left,this.containers[c].containerCache.top=g.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight();return this},_createPlaceholder:function(f){var c=f||this,a=c.options;if(!a.placeholder||a.placeholder.constructor==String){var g=a.placeholder;a.placeholder={element:function(){var a=
e(document.createElement(c.currentItem[0].nodeName)).addClass(g||c.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];g||(a.style.visibility="hidden");return a},update:function(d,e){if(!g||a.forcePlaceholderSize)e.height()||e.height(c.currentItem.innerHeight()-parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(c.currentItem.innerWidth()-parseInt(c.currentItem.css("paddingLeft")||0,10)-parseInt(c.currentItem.css("paddingRight")||
0,10))}}}c.placeholder=e(a.placeholder.element.call(c.element,c.currentItem));c.currentItem.after(c.placeholder);a.placeholder.update(c,c.placeholder)},_contactContainers:function(f){for(var c=null,a=null,g=this.containers.length-1;0<=g;g--)if(!e.ui.contains(this.currentItem[0],this.containers[g].element[0]))if(this._intersectsWith(this.containers[g].containerCache)){if(!c||!e.ui.contains(this.containers[g].element[0],c.element[0]))c=this.containers[g],a=g}else this.containers[g].containerCache.over&&
(this.containers[g]._trigger("out",f,this._uiHash(this)),this.containers[g].containerCache.over=0);if(c)if(1===this.containers.length)this.containers[a]._trigger("over",f,this._uiHash(this)),this.containers[a].containerCache.over=1;else if(this.currentContainer!=this.containers[a]){for(var c=1E4,g=null,d=this.positionAbs[this.containers[a].floating?"left":"top"],l=this.items.length-1;0<=l;l--)if(e.ui.contains(this.containers[a].element[0],this.items[l].item[0])){var t=this.items[l][this.containers[a].floating?
"left":"top"];Math.abs(t-d)<c&&(c=Math.abs(t-d),g=this.items[l])}if(g||this.options.dropOnEmpty)this.currentContainer=this.containers[a],g?this._rearrange(f,g,null,!0):this._rearrange(f,null,this.containers[a].element,!0),this._trigger("change",f,this._uiHash()),this.containers[a]._trigger("change",f,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[a]._trigger("over",f,this._uiHash(this)),this.containers[a].containerCache.over=1}},_createHelper:function(f){var c=
this.options;f=e.isFunction(c.helper)?e(c.helper.apply(this.element[0],[f,this.currentItem])):"clone"==c.helper?this.currentItem.clone():this.currentItem;f.parents("body").length||e("parent"!=c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(f[0]);f[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")});(""==
f[0].style.width||c.forceHelperSize)&&f.width(this.currentItem.width());(""==f[0].style.height||c.forceHelperSize)&&f.height(this.currentItem.height());return f},_adjustOffsetFromHelper:function(f){"string"==typeof f&&(f=f.split(" "));e.isArray(f)&&(f={left:+f[0],top:+f[1]||0});"left"in f&&(this.offset.click.left=f.left+this.margins.left);"right"in f&&(this.offset.click.left=this.helperProportions.width-f.right+this.margins.left);"top"in f&&(this.offset.click.top=f.top+this.margins.top);"bottom"in
f&&(this.offset.click.top=this.helperProportions.height-f.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var f=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(f.left+=this.scrollParent.scrollLeft(),f.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&
e.browser.msie)f={top:0,left:0};return{top:f.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:f.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins=
{left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var f=this.options;"parent"==f.containment&&(f.containment=this.helper[0].parentNode);if("document"==f.containment||"window"==f.containment)this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-
this.offset.parent.top,e("document"==f.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"==f.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(f.containment)){var c=e(f.containment)[0],f=e(f.containment).offset(),a="hidden"!=e(c).css("overflow");this.containment=[f.left+(parseInt(e(c).css("borderLeftWidth"),10)||0)+(parseInt(e(c).css("paddingLeft"),
10)||0)-this.margins.left,f.top+(parseInt(e(c).css("borderTopWidth"),10)||0)+(parseInt(e(c).css("paddingTop"),10)||0)-this.margins.top,f.left+(a?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(e(c).css("borderLeftWidth"),10)||0)-(parseInt(e(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,f.top+(a?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(e(c).css("borderTopWidth"),10)||0)-(parseInt(e(c).css("paddingBottom"),10)||0)-this.helperProportions.height-
this.margins.top]}},_convertPositionTo:function(f,c){c||(c=this.position);var a="absolute"==f?1:-1,g="absolute"==this.cssPosition&&(this.scrollParent[0]==document||!e.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,d=/(html|body)/i.test(g[0].tagName);return{top:c.top+this.offset.relative.top*a+this.offset.parent.top*a-(e.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():d?0:g.scrollTop())*a),left:c.left+
this.offset.relative.left*a+this.offset.parent.left*a-(e.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():d?0:g.scrollLeft())*a)}},_generatePosition:function(f){var c=this.options,a="absolute"==this.cssPosition&&(this.scrollParent[0]==document||!e.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(a[0].tagName);"relative"==this.cssPosition&&(this.scrollParent[0]==document||this.scrollParent[0]==
this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var d=f.pageX,l=f.pageY;this.originalPosition&&(this.containment&&(f.pageX-this.offset.click.left<this.containment[0]&&(d=this.containment[0]+this.offset.click.left),f.pageY-this.offset.click.top<this.containment[1]&&(l=this.containment[1]+this.offset.click.top),f.pageX-this.offset.click.left>this.containment[2]&&(d=this.containment[2]+this.offset.click.left),f.pageY-this.offset.click.top>this.containment[3]&&(l=this.containment[3]+
this.offset.click.top)),c.grid&&(l=this.originalPageY+Math.round((l-this.originalPageY)/c.grid[1])*c.grid[1],l=this.containment?l-this.offset.click.top<this.containment[1]||l-this.offset.click.top>this.containment[3]?l-this.offset.click.top<this.containment[1]?l+c.grid[1]:l-c.grid[1]:l:l,d=this.originalPageX+Math.round((d-this.originalPageX)/c.grid[0])*c.grid[0],d=this.containment?d-this.offset.click.left<this.containment[0]||d-this.offset.click.left>this.containment[2]?d-this.offset.click.left<this.containment[0]?
d+c.grid[0]:d-c.grid[0]:d:d));return{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():g?0:a.scrollTop()),left:d-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():g?0:a.scrollLeft())}},_rearrange:function(e,c,a,g){a?a[0].appendChild(this.placeholder[0]):
c.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?c.item[0]:c.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var d=this,l=this.counter;window.setTimeout(function(){l==d.counter&&d.refreshPositions(!g)},0)},_clear:function(f,c){this.reverting=!1;var a=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var g in this._storedCSS)if("auto"==this._storedCSS[g]||
"static"==this._storedCSS[g])this._storedCSS[g]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!c&&a.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!c&&a.push(function(a){this._trigger("update",a,this._uiHash())});if(!e.ui.contains(this.element[0],
this.currentItem[0])){c||a.push(function(a){this._trigger("remove",a,this._uiHash())});for(g=this.containers.length-1;0<=g;g--)e.ui.contains(this.containers[g].element[0],this.currentItem[0])&&!c&&(a.push(function(a){return function(c){a._trigger("receive",c,this._uiHash(this))}}.call(this,this.containers[g])),a.push(function(a){return function(c){a._trigger("update",c,this._uiHash(this))}}.call(this,this.containers[g])))}for(g=this.containers.length-1;0<=g;g--)c||a.push(function(a){return function(c){a._trigger("deactivate",
c,this._uiHash(this))}}.call(this,this.containers[g])),this.containers[g].containerCache.over&&(a.push(function(a){return function(c){a._trigger("out",c,this._uiHash(this))}}.call(this,this.containers[g])),this.containers[g].containerCache.over=0);this._storedCursor&&e("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex);this.dragging=!1;if(this.cancelHelperRemoval){if(!c){this._trigger("beforeStop",
f,this._uiHash());for(g=0;g<a.length;g++)a[g].call(this,f);this._trigger("stop",f,this._uiHash())}return!1}c||this._trigger("beforeStop",f,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!c){for(g=0;g<a.length;g++)a[g].call(this,f);this._trigger("stop",f,this._uiHash())}this.fromOutside=!1;return!0},_trigger:function(){!1===e.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},
_uiHash:function(f){var c=f||this;return{helper:c.helper,placeholder:c.placeholder||e([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:f?f.element:null}}});e.extend(e.ui.sortable,{version:"1.8.18"})})(jQuery);
(function(e,l){var f={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},c={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},a=e.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};e.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(a){var c=
e(this).css(a).offset().top;0>c&&e(this).css("top",a.top-c)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title");"string"!=typeof this.originalTitle&&(this.originalTitle="");this.options.title=this.options.title||this.originalTitle;var a=this,c=a.options,f=c.title||"&#160;",l=e.ui.dialog.getTitleId(a.element),p=(a.uiDialog=e("<div></div>")).appendTo(document.body).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+
c.dialogClass).css({zIndex:c.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(f){c.closeOnEscape&&!f.isDefaultPrevented()&&f.keyCode&&f.keyCode===e.ui.keyCode.ESCAPE&&(a.close(f),f.preventDefault())}).attr({role:"dialog","aria-labelledby":l}).mousedown(function(c){a.moveToTop(!1,c)});a.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(p);var E=(a.uiDialogTitlebar=e("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(p),
s=e('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){s.addClass("ui-state-hover")},function(){s.removeClass("ui-state-hover")}).focus(function(){s.addClass("ui-state-focus")}).blur(function(){s.removeClass("ui-state-focus")}).click(function(c){a.close(c);return!1}).appendTo(E);(a.uiDialogTitlebarCloseText=e("<span></span>")).addClass("ui-icon ui-icon-closethick").text(c.closeText).appendTo(s);e("<span></span>").addClass("ui-dialog-title").attr("id",
l).html(f).prependTo(E);e.isFunction(c.beforeclose)&&!e.isFunction(c.beforeClose)&&(c.beforeClose=c.beforeclose);E.find("*").add(E).disableSelection();c.draggable&&e.fn.draggable&&a._makeDraggable();c.resizable&&e.fn.resizable&&a._makeResizable();a._createButtons(c.buttons);a._isOpen=!1;e.fn.bgiframe&&p.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){this.overlay&&this.overlay.destroy();this.uiDialog.hide();this.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");
this.uiDialog.remove();this.originalTitle&&this.element.attr("title",this.originalTitle);return this},widget:function(){return this.uiDialog},close:function(a){var c=this,f,l;if(!1!==c._trigger("beforeClose",a))return c.overlay&&c.overlay.destroy(),c.uiDialog.unbind("keypress.ui-dialog"),c._isOpen=!1,c.options.hide?c.uiDialog.hide(c.options.hide,function(){c._trigger("close",a)}):(c.uiDialog.hide(),c._trigger("close",a)),e.ui.dialog.overlay.resize(),c.options.modal&&(f=0,e(".ui-dialog").each(function(){this!==
c.uiDialog[0]&&(l=e(this).css("z-index"),isNaN(l)||(f=Math.max(f,l)))}),e.ui.dialog.maxZ=f),c},isOpen:function(){return this._isOpen},moveToTop:function(a,c){var f=this.options;if(f.modal&&!a||!f.stack&&!f.modal)return this._trigger("focus",c);f.zIndex>e.ui.dialog.maxZ&&(e.ui.dialog.maxZ=f.zIndex);this.overlay&&(e.ui.dialog.maxZ+=1,this.overlay.$el.css("z-index",e.ui.dialog.overlay.maxZ=e.ui.dialog.maxZ));f={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()};e.ui.dialog.maxZ+=
1;this.uiDialog.css("z-index",e.ui.dialog.maxZ);this.element.attr(f);this._trigger("focus",c);return this},open:function(){if(!this._isOpen){var a=this.options,c=this.uiDialog;this.overlay=a.modal?new e.ui.dialog.overlay(this):null;this._size();this._position(a.position);c.show(a.show);this.moveToTop(!0);a.modal&&c.bind("keydown.ui-dialog",function(a){if(a.keyCode===e.ui.keyCode.TAB){var c=e(":tabbable",this),d=c.filter(":first"),c=c.filter(":last");if(a.target===c[0]&&!a.shiftKey)return d.focus(1),
!1;if(a.target===d[0]&&a.shiftKey)return c.focus(1),!1}});e(this.element.find(":tabbable").get().concat(c.find(".ui-dialog-buttonpane :tabbable").get().concat(c.get()))).eq(0).focus();this._isOpen=!0;this._trigger("open");return this}},_createButtons:function(c){var d=this,f=!1,l=e("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),p=e("<div></div>").addClass("ui-dialog-buttonset").appendTo(l);d.uiDialog.find(".ui-dialog-buttonpane").remove();"object"==typeof c&&
null!==c&&e.each(c,function(){return!(f=!0)});f&&(e.each(c,function(c,f){f=e.isFunction(f)?{click:f,text:c}:f;var g=e('<button type="button"></button>').click(function(){f.click.apply(d.element[0],arguments)}).appendTo(p);e.each(f,function(c,d){"click"!==c&&(c in a?g[c](d):g.attr(c,d))});e.fn.button&&g.button()}),l.appendTo(d.uiDialog))},_makeDraggable:function(){function a(c){return{position:c.position,offset:c.offset}}var c=this,f=c.options,l=e(document),p;c.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",
handle:".ui-dialog-titlebar",containment:"document",start:function(l,s){p="auto"===f.height?"auto":e(this).height();e(this).height(e(this).height()).addClass("ui-dialog-dragging");c._trigger("dragStart",l,a(s))},drag:function(e,f){c._trigger("drag",e,a(f))},stop:function(E,s){f.position=[s.position.left-l.scrollLeft(),s.position.top-l.scrollTop()];e(this).removeClass("ui-dialog-dragging").height(p);c._trigger("dragStop",E,a(s));e.ui.dialog.overlay.resize()}})},_makeResizable:function(a){function c(a){return{originalPosition:a.originalPosition,
originalSize:a.originalSize,position:a.position,size:a.size}}a=a===l?this.options.resizable:a;var f=this,t=f.options,p=f.uiDialog.css("position");a="string"==typeof a?a:"n,e,s,w,se,sw,ne,nw";f.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:f.element,maxWidth:t.maxWidth,maxHeight:t.maxHeight,minWidth:t.minWidth,minHeight:f._minHeight(),handles:a,start:function(a,g){e(this).addClass("ui-dialog-resizing");f._trigger("resizeStart",a,c(g))},resize:function(a,e){f._trigger("resize",
a,c(e))},stop:function(a,g){e(this).removeClass("ui-dialog-resizing");t.height=e(this).height();t.width=e(this).width();f._trigger("resizeStop",a,c(g));e.ui.dialog.overlay.resize()}}).css("position",p).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(a){var c=[],f=[0,0],l;if(a){if("string"==typeof a||"object"==typeof a&&"0"in a)c=a.split?a.split(" "):
[a[0],a[1]],1===c.length&&(c[1]=c[0]),e.each(["left","top"],function(a,e){+c[a]===c[a]&&(f[a]=c[a],c[a]=e)}),a={my:c.join(" "),at:c.join(" "),offset:f.join(" ")};a=e.extend({},e.ui.dialog.prototype.options.position,a)}else a=e.ui.dialog.prototype.options.position;(l=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.css({top:0,left:0}).position(e.extend({of:window},a));l||this.uiDialog.hide()},_setOptions:function(a){var d=this,l={},t=!1;e.each(a,function(a,e){d._setOption(a,e);a in
f&&(t=!0);a in c&&(l[a]=e)});t&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",l)},_setOption:function(a,c){var f=this.uiDialog;switch(a){case "beforeclose":a="beforeClose";break;case "buttons":this._createButtons(c);break;case "closeText":this.uiDialogTitlebarCloseText.text(""+c);break;case "dialogClass":f.removeClass(this.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+c);break;case "disabled":c?f.addClass("ui-dialog-disabled"):
f.removeClass("ui-dialog-disabled");break;case "draggable":var l=f.is(":data(draggable)");l&&!c&&f.draggable("destroy");!l&&c&&this._makeDraggable();break;case "position":this._position(c);break;case "resizable":(l=f.is(":data(resizable)"))&&!c&&f.resizable("destroy");l&&"string"==typeof c&&f.resizable("option","handles",c);!l&&!1!==c&&this._makeResizable(c);break;case "title":e(".ui-dialog-title",this.uiDialogTitlebar).html(""+(c||"&#160;"))}e.Widget.prototype._setOption.apply(this,arguments)},_size:function(){var a=
this.options,c,f,l=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});a.minWidth>a.width&&(a.width=a.minWidth);c=this.uiDialog.css({height:"auto",width:a.width}).height();f=Math.max(0,a.minHeight-c);"auto"===a.height?e.support.minHeight?this.element.css({minHeight:f,height:"auto"}):(this.uiDialog.show(),a=this.element.css("height","auto").height(),l||this.uiDialog.hide(),this.element.height(Math.max(a,f))):this.element.height(Math.max(a.height-c,0));this.uiDialog.is(":data(resizable)")&&
this.uiDialog.resizable("option","minHeight",this._minHeight())}});e.extend(e.ui.dialog,{version:"1.8.18",uuid:0,maxZ:0,getTitleId:function(a){(a=a.attr("id"))||(this.uuid+=1,a=this.uuid);return"ui-dialog-title-"+a},overlay:function(a){this.$el=e.ui.dialog.overlay.create(a)}});e.extend(e.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:e.map("focus mousedown mouseup keydown keypress click".split(" "),function(a){return a+".dialog-overlay"}).join(" "),create:function(a){0===this.instances.length&&
(setTimeout(function(){e.ui.dialog.overlay.instances.length&&e(document).bind(e.ui.dialog.overlay.events,function(a){if(e(a.target).zIndex()<e.ui.dialog.overlay.maxZ)return!1})},1),e(document).bind("keydown.dialog-overlay",function(c){a.options.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===e.ui.keyCode.ESCAPE&&(a.close(c),c.preventDefault())}),e(window).bind("resize.dialog-overlay",e.ui.dialog.overlay.resize));var c=(this.oldInstances.pop()||e("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),
height:this.height()});e.fn.bgiframe&&c.bgiframe();this.instances.push(c);return c},destroy:function(a){var c=e.inArray(a,this.instances);-1!=c&&this.oldInstances.push(this.instances.splice(c,1)[0]);0===this.instances.length&&e([document,window]).unbind(".dialog-overlay");a.remove();var f=0;e.each(this.instances,function(){f=Math.max(f,this.css("z-index"))});this.maxZ=f},height:function(){var a,c;return e.browser.msie&&7>e.browser.version?(a=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),
c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),a<c?e(window).height()+"px":a+"px"):e(document).height()+"px"},width:function(){var a,c;return e.browser.msie?(a=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),a<c?e(window).width()+"px":a+"px"):e(document).width()+"px"},resize:function(){var a=e([]);e.each(e.ui.dialog.overlay.instances,function(){a=a.add(this)});a.css({width:0,
height:0}).css({width:e.ui.dialog.overlay.width(),height:e.ui.dialog.overlay.height()})}});e.extend(e.ui.dialog.overlay.prototype,{destroy:function(){e.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
jQuery.cookie=function(e,l,f){if(1<arguments.length&&"[object Object]"!==String(l)){f=jQuery.extend({},f);if(null===l||void 0===l)f.expires=-1;if("number"===typeof f.expires){var c=f.expires,a=f.expires=new Date;a.setDate(a.getDate()+c)}l=String(l);return document.cookie=[encodeURIComponent(e),"=",f.raw?l:encodeURIComponent(l),f.expires?"; expires="+f.expires.toUTCString():"",f.path?"; path="+f.path:"",f.domain?"; domain="+f.domain:"",f.secure?"; secure":""].join("")}f=l||{};a=f.raw?function(a){return a}:
decodeURIComponent;return(c=RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie))?a(c[1]):null};
d3=function(){function e(a){return null!=a&&!isNaN(a)}function l(a){return a.length}function f(a,c){try{for(var r in c)Object.defineProperty(a.prototype,r,{value:c[r],enumerable:!1})}catch(d){a.prototype=c}}function c(){}function a(){}function g(a,c,r){return function(){var d=r.apply(c,arguments);return d===c?a:d}}function d(){}function v(a){function z(){for(var c,z=r,d=-1,e=z.length;++d<e;)(c=z[d].on)&&c.apply(this,arguments);return a}var r=[],d=new c;return z.on=function(c,z){var e,f=d.get(c);return 2>
arguments.length?f&&f.on:(f&&(f.on=null,r=r.slice(0,e=r.indexOf(f)).concat(r.slice(e+1)),d.remove(c)),z&&r.push(d.set(c,{on:z})),a)},z}function t(){m.event.stopPropagation();m.event.preventDefault()}function p(){for(var a,c=m.event;a=c.sourceEvent;)c=a;return c}function E(a,c){function r(){a.on(c,null)}a.on(c,function(){t();r()},!0);setTimeout(r,0)}function s(a){for(var c=new d,r=0,e=arguments.length;++r<e;)c[arguments[r]]=v(c);return c.of=function(r,d){return function(e){try{var f=e.sourceEvent=
m.event;e.target=a;m.event=e;c[e.type].apply(r,d)}finally{m.event=f}}},c}function I(a,c){var r=a.ownerSVGElement||a;if(r.createSVGPoint){var d=r.createSVGPoint();if(0>Wb&&(ga.scrollX||ga.scrollY)){var r=m.select(ka.body).append("svg").style("position","absolute").style("top",0).style("left",0),e=r[0][0].getScreenCTM();Wb=!(e.f||e.e);r.remove()}return Wb?(d.x=c.pageX,d.y=c.pageY):(d.x=c.clientX,d.y=c.clientY),d=d.matrixTransform(a.getScreenCTM().inverse()),[d.x,d.y]}r=a.getBoundingClientRect();return[c.clientX-
r.left-a.clientLeft,c.clientY-r.top-a.clientTop]}function u(a){for(var c=-1,r=a.length,d=[];++c<r;)d.push(a[c]);return d}function K(a){return Xb(a,U),a}function G(a){return function(){return fd(a,this)}}function Q(a){return function(){return gd(a,this)}}function ja(a,c){function r(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,c)}function f(){this.setAttributeNS(a.space,a.local,c)}function g(){var r=c.apply(this,arguments);null==r?this.removeAttribute(a):
this.setAttribute(a,r)}function q(){var r=c.apply(this,arguments);null==r?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,r)}return a=m.ns.qualify(a),null==c?a.local?d:r:"function"==typeof c?a.local?q:g:a.local?f:e}function oa(a){return a.trim().replace(/\s+/g," ")}function va(a){return RegExp("(?:^|\\s+)"+m.requote(a)+"(?:\\s+|$)","g")}function Ya(a,c){function r(){for(var r=-1;++r<e;)a[r](this,c)}function d(){for(var r=-1,f=c.apply(this,arguments);++r<e;)a[r](this,f)}
a=a.trim().split(/\s+/).map(Vb);var e=a.length;return"function"==typeof c?d:r}function Vb(a){var c=va(a);return function(r,d){if(e=r.classList)return d?e.add(a):e.remove(a);var e=r.getAttribute("class")||"";d?(c.lastIndex=0,c.test(e)||r.setAttribute("class",oa(e+" "+a))):r.setAttribute("class",oa(e.replace(c," ")))}}function ea(a,c,r){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,c,r)}function f(){var d=c.apply(this,arguments);null==d?this.style.removeProperty(a):
this.style.setProperty(a,d,r)}return null==c?d:"function"==typeof c?f:e}function Za(a,c){function r(){delete this[a]}function d(){this[a]=c}function e(){var r=c.apply(this,arguments);null==r?delete this[a]:this[a]=r}return null==c?r:"function"==typeof c?e:d}function ed(a){return function(){return hd(this,a)}}function tf(a){return arguments.length||(a=m.ascending),function(c,r){return!c-!r||a(c.__data__,r.__data__)}}function ca(){}function id(a,c,r){function d(){var c=this[g];c&&(this.removeEventListener(a,
c,c.$),delete this[g])}function e(){var f=y(c,Ba(arguments));d.call(this);this.addEventListener(a,this[g]=f,f.$=r);f._=c}function f(){var c,z=RegExp("^__on([^.]+)"+m.requote(a)+"$"),r;for(r in this)if(c=r.match(z)){var d=this[r];this.removeEventListener(c[1],d,d.$);delete this[r]}}var g="__on"+a,q=a.indexOf("."),y=jd;0<q&&(a=a.substring(0,q));var l=Yb.get(a);return l&&(a=l,y=uf),q?c?e:d:c?ca:f}function jd(a,c){return function(r){var d=m.event;m.event=r;c[0]=this.__data__;try{a.apply(this,c)}finally{m.event=
d}}}function uf(a,c){var r=jd(a,c);return function(a){var n=a.relatedTarget;n&&(n===this||n.compareDocumentPosition(this)&8)||r.call(this,a)}}function Ca(a,c){for(var r=0,d=a.length;d>r;r++)for(var e,f=a[r],g=0,q=f.length;q>g;g++)(e=f[g])&&c(e,g,r);return a}function kd(a){return Xb(a,Ha),a}function Ma(){}function Na(a,c,r){return new Zb(a,c,r)}function Zb(a,c,r){this.h=a;this.s=c;this.l=r}function jb(a,c,r){function d(a){return 360<a?a-=360:0>a&&(a+=360),60>a?e+(f-e)*a/60:180>a?f:240>a?e+(f-e)*(240-
a)/60:e}var e,f;return a%=360,0>a&&(a+=360),c=0>c?0:1<c?1:c,r=0>r?0:1<r?1:r,f=0.5>=r?r*(1+c):r+c-r*c,e=2*r-f,wa(Math.round(255*d(a+120)),Math.round(255*d(a)),Math.round(255*d(a-120)))}function ld(a){return(a=Math.sin(a/2))*a}function Oa(a,c,r){return new kb(a,c,r)}function kb(a,c,r){this.h=a;this.c=c;this.l=r}function $b(a,c,r){return Pa(r,Math.cos(a*=O)*c,Math.sin(a)*c)}function Pa(a,c,r){return new lb(a,c,r)}function lb(a,c,r){this.l=a;this.a=c;this.b=r}function md(a,c,r){a=(a+16)/116;c=a+c/500;
r=a-r/200;return c=ac(c)*nd,a=ac(a)*od,r=ac(r)*pd,wa(bc(3.2404542*c-1.5371385*a-0.4985314*r),bc(-0.969266*c+1.8760108*a+0.041556*r),bc(0.0556434*c-0.2040259*a+1.0572252*r))}function ac(a){return 0.206893034<a?a*a*a:(a-4/29)/7.787037}function cc(a){return 0.008856<a?Math.pow(a,1/3):7.787037*a+4/29}function bc(a){return Math.round(255*(0.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-0.055))}function wa(a,c,r){return new dc(a,c,r)}function dc(a,c,r){this.r=a;this.g=c;this.b=r}function Qa(a){return 16>a?"0"+
Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function ec(a,c,r){var d,e,f,g=0,q=0,y=0;if(d=/([a-z]+)\((.*)\)/i.exec(a))switch(e=d[2].split(","),d[1]){case "hsl":return r(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case "rgb":return c(fc(e[0]),fc(e[1]),fc(e[2]))}return(f=mb.get(a))?c(f.r,f.g,f.b):(null!=a&&"#"===a.charAt(0)&&(4===a.length?(g=a.charAt(1),g+=g,q=a.charAt(2),q+=q,y=a.charAt(3),y+=y):7===a.length&&(g=a.substring(1,3),q=a.substring(3,5),y=a.substring(5,7)),g=
parseInt(g,16),q=parseInt(q,16),y=parseInt(y,16)),c(g,q,y))}function qd(a,c,r){var d,e,f=Math.min(a/=255,c/=255,r/=255),g=Math.max(a,c,r),q=g-f,y=(g+f)/2;return q?(e=0.5>y?q/(g+f):q/(2-g-f),d=a==g?(c-r)/q+(r>c?6:0):c==g?(r-a)/q+2:(a-c)/q+4,d*=60):e=d=0,Na(d,e,y)}function rd(a,c,r){a=gc(a);c=gc(c);r=gc(r);var d=cc((0.4124564*a+0.3575761*c+0.1804375*r)/nd),e=cc((0.2126729*a+0.7151522*c+0.072175*r)/od);a=cc((0.0193339*a+0.119192*c+0.9503041*r)/pd);return Pa(116*e-16,500*(d-e),200*(e-a))}function gc(a){return 0.04045>=
(a/=255)?a/12.92:Math.pow((a+0.055)/1.055,2.4)}function fc(a){var c=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*c):c}function V(a){return"function"==typeof a?a:function(){return a}}function na(a){return a}function vf(a){return 1===a.length?function(c,r){a(null==c?r:null)}:a}function sd(n,c){function r(a,n,r){3>arguments.length&&(r=n,n=null);var f=m.xhr(a,c,r);return f.row=function(a){return arguments.length?f.response(null==(n=a)?d:e(a)):n},f.row(n)}function d(a){return r.parse(a.responseText)}
function e(a){return function(n){return r.parse(n.responseText,a)}}function f(a){return a.map(g).join(n)}function g(a){return q.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var q=RegExp('["'+n+"\n]"),y=n.charCodeAt(0);return r.parse=function(a,n){var c;return r.parseRows(a,function(a,z){if(c)return c(a,z-1);var r=Function("d","return {"+a.map(function(a,n){return JSON.stringify(a)+": d["+n+"]"}).join(",")+"}");c=n?function(a,c){return n(r(a),c)}:r})},r.parseRows=function(a,n){function c(){if(M>=S)return e;
if(r)return r=!1,d;var n=M;if(34===a.charCodeAt(n)){for(var z=n;z++<S;)if(34===a.charCodeAt(z)){if(34!==a.charCodeAt(z+1))break;++z}M=z+2;var f=a.charCodeAt(z+1);return 13===f?(r=!0,10===a.charCodeAt(z+2)&&++M):10===f&&(r=!0),a.substring(n+1,z).replace(/""/g,'"')}for(;S>M;){f=a.charCodeAt(M++);z=1;if(10===f)r=!0;else if(13===f)r=!0,10===a.charCodeAt(M)&&(++M,++z);else if(f!==y)continue;return a.substring(n,M-z)}return a.substring(n)}for(var z,r,d={},e={},f=[],S=a.length,M=0,T=0;(z=c())!==e;){for(var g=
[];z!==d&&z!==e;)g.push(z),z=c();(!n||(g=n(g,T++)))&&f.push(g)}return f},r.format=function(c){if(Array.isArray(c[0]))return r.formatRows(c);var z=new a,d=[];return c.forEach(function(a){for(var n in a)z.has(n)||d.push(z.add(n))}),[d.map(g).join(n)].concat(c.map(function(a){return d.map(function(n){return g(a[n])}).join(n)})).join("\n")},r.formatRows=function(a){return a.map(f).join("\n")},r}function hc(){for(var a,c=Date.now(),r=Ta;r;)a=c-r.then,a>=r.delay&&(r.flush=r.callback(a)),r=r.next;a=td()-
c;24<a?(isFinite(a)&&(clearTimeout(nb),nb=setTimeout(hc,a)),ob=0):(ob=1,ud(hc))}function td(){for(var a=null,c=Ta,r=1/0;c;)c.flush?(delete ic[c.callback.id],c=a?a.next=c.next:Ta=c.next):(r=Math.min(r,c.then+c.delay),c=(a=c).next);return r}function jc(a,c){return c-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function wf(a){return a+""}function pb(a,c){a&&vd.hasOwnProperty(a.type)&&vd[a.type](a,c)}function kc(a,c,r){var d=-1,e=a.length-r;for(c.lineStart();++d<e;)r=a[d],c.point(r[0],r[1]);c.lineEnd()}function wd(a,
c){var r=-1,d=a.length;for(c.polygonStart();++r<d;)kc(a[r],c,1);c.polygonEnd()}function xf(){function a(n,c){n*=O;c=c*O/2+F/4;var z=n-d,r=Math.cos(c),g=Math.sin(c),l=f*g,m=qb,la=rb,L=e*r+l*Math.cos(z),z=l*Math.sin(z);qb=m*L-la*z;rb=la*L+m*z;d=n;e=r;f=g}var c,r,d,e,f;Da.point=function(g,q){Da.point=a;d=(c=g)*O;e=Math.cos(q=(r=q)*O/2+F/4);f=Math.sin(q)};Da.lineEnd=function(){a(c,r)}}function xd(a){function c(a,n){d>a&&(d=a);a>f&&(f=a);e>n&&(e=n);n>g&&(g=n)}function r(){q.point=q.lineEnd=ca}var d,e,
f,g,q={point:c,lineStart:ca,lineEnd:ca,polygonStart:function(){q.lineEnd=r},polygonEnd:function(){q.point=c}};return function(c){return g=f=-(d=e=1/0),m.geo.stream(c,a(q)),[[d,e],[f,g]]}}function yd(a,c){if(!fa){++qa;a*=O;var r=Math.cos(c*=O);aa+=(r*Math.cos(a)-aa)/qa;ba+=(r*Math.sin(a)-ba)/qa;Z+=(Math.sin(c)-Z)/qa}}function yf(){var a,c;fa=1;lc();fa=2;var r=ra.point;ra.point=function(d,e){r(a=d,c=e)};ra.lineEnd=function(){ra.point(a,c);mc();ra.lineEnd=mc}}function lc(){function a(n,e){n*=O;var f=
Math.cos(e*=O),g=f*Math.cos(n),f=f*Math.sin(n),y=Math.sin(e),l=Math.atan2(Math.sqrt((l=r*y-d*f)*l+(l=d*g-c*y)*l+(l=c*f-r*g)*l),c*g+r*f+d*y);qa+=l;aa+=l*(c+(c=g));ba+=l*(r+(r=f));Z+=l*(d+(d=y))}var c,r,d;1<fa||(1>fa&&(fa=1,qa=aa=ba=Z=0),ra.point=function(e,f){e*=O;var g=Math.cos(f*=O);c=g*Math.cos(e);r=g*Math.sin(e);d=Math.sin(f);ra.point=a})}function mc(){ra.point=yd}function sb(a){var c=a[0];a=a[1];var r=Math.cos(a);return[r*Math.cos(c),r*Math.sin(c),Math.sin(a)]}function tb(a,c){return a[0]*c[0]+
a[1]*c[1]+a[2]*c[2]}function zd(a,c){return[a[1]*c[2]-a[2]*c[1],a[2]*c[0]-a[0]*c[2],a[0]*c[1]-a[1]*c[0]]}function nc(a,c){a[0]+=c[0];a[1]+=c[1];a[2]+=c[2]}function ub(a,c){return[a[0]*c,a[1]*c,a[2]*c]}function $a(){return!0}function oc(a){return[Math.atan2(a[1],a[0]),Math.asin(Math.max(-1,Math.min(1,a[2])))]}function vb(a,c){return Math.abs(a[0]-c[0])<P&&Math.abs(a[1]-c[1])<P}function Ad(a,c,r,d,e){var f=[],g=[];if(a.forEach(function(a){if(!(0>=(n=a.length-1))){var n,c=a[0],r=a[n];if(vb(c,r)){e.lineStart();
for(r=0;n>r;++r)e.point((c=a[r])[0],c[1]);return e.lineEnd(),void 0}a={point:c,points:a,other:null,visited:!1,entry:!0,subject:!0};c={point:c,points:[c],other:a,visited:!1,entry:!1,subject:!1};a.other=c;f.push(a);g.push(c);a={point:r,points:[r],other:null,visited:!1,entry:!1,subject:!0};c={point:r,points:[r],other:a,visited:!1,entry:!0,subject:!1};a.other=c;f.push(a);g.push(c)}}),g.sort(c),Bd(f),Bd(g),f.length){if(r){a=1;r=!r(g[0].point);for(c=g.length;c>a;++a)g[a].entry=r=!r}for(var q,y=f[0];;){for(r=
y;r.visited;)if((r=r.next)===y)return;c=r.points;e.lineStart();do{if(r.visited=r.other.visited=!0,r.entry){if(r.subject)for(a=0;a<c.length;a++)e.point((q=c[a])[0],q[1]);else d(r.point,r.next.point,1,e);r=r.next}else{if(r.subject){c=r.prev.points;for(a=c.length;0<=--a;)e.point((q=c[a])[0],q[1])}else d(r.point,r.prev.point,-1,e);r=r.prev}r=r.other;c=r.points}while(!r.visited);e.lineEnd()}}}function Bd(a){if(c=a.length){for(var c,r,d=0,e=a[0];++d<c;)e.next=r=a[d],r.prev=e,e=r;e.next=r=a[0];r.prev=e}}
function Cd(a,c,r){return function(d){function e(c,r){a(c,r)&&d.point(c,r)}function f(a,n){C.point(a,n)}function g(){B.point=f;C.lineStart()}function q(){B.point=e;C.lineEnd()}function y(a,n){R.point(a,n);J.push([a,n])}function l(){R.lineStart();J=[]}function D(){y(J[0][0],J[0][1]);R.lineEnd();var a;a=R.clean();var n=N.buffer(),c=n.length;if(!c)return L=!0,la+=Dd(J,-1),J=null,void 0;if(J=null,1&a){a=n[0];x+=Dd(a,1);var r,c=a.length-1,n=-1;for(d.lineStart();++n<c;)d.point((r=a[n])[0],r[1]);return d.lineEnd(),
void 0}1<c&&2&a&&n.push(n.pop().concat(n.shift()));A.push(n.filter(zf))}var A,x,la,L,J,C=c(d),B={point:e,lineStart:g,lineEnd:q,polygonStart:function(){B.point=y;B.lineStart=l;B.lineEnd=D;L=!1;la=x=0;A=[];d.polygonStart()},polygonEnd:function(){B.point=e;B.lineStart=g;B.lineEnd=q;A=m.merge(A);A.length?Ad(A,Af,null,r,d):(-P>x||L&&-P>la)&&(d.lineStart(),r(null,null,1,d),d.lineEnd());d.polygonEnd();A=null},sphere:function(){d.polygonStart();d.lineStart();r(null,null,1,d);d.lineEnd();d.polygonEnd()}},
N=Ed(),R=c(N);return B}}function zf(a){return 1<a.length}function Ed(){var a,c=[];return{lineStart:function(){c.push(a=[])},point:function(c,d){a.push([c,d])},lineEnd:ca,buffer:function(){var r=c;return c=[],a=null,r},rejoin:function(){1<c.length&&c.push(c.pop().concat(c.shift()))}}}function Dd(a,c){if(!(r=a.length))return 0;var r,d,e,f=0,g=0;d=a[0];e=d[0];for(var q=d[1],y=Math.cos(q),l=Math.atan2(c*Math.sin(e)*y,Math.sin(q)),m=1-c*Math.cos(e)*y,A=l;++f<r;)d=a[f],y=Math.cos(q=d[1]),d=Math.atan2(c*
Math.sin(e=d[0])*y,Math.sin(q)),e=1-c*Math.cos(e)*y,Math.abs(m-2)<P&&Math.abs(e-2)<P||(Math.abs(e)<P||Math.abs(m)<P||(Math.abs(Math.abs(d-l)-F)<P?2<e+m&&(g+=4*(d-l)):g+=Math.abs(m-2)<P?4*(d-A):((3*F+d-l)%(2*F)-F)*(m+e)),A=l,l=d,m=e);return g}function Af(a,c){return(0>(a=a.point)[0]?a[1]-F/2-P:F/2-a[1])-(0>(c=c.point)[0]?c[1]-F/2-P:F/2-c[1])}function Bf(a){function c(a,n){return Math.cos(a)*Math.cos(n)>f}function d(a,n,c){var r=sb(a),e=sb(n),z=[1,0,0],e=zd(r,e),S=tb(e,e),r=e[0],g=S-r*r;if(!g)return!c&&
a;S=f*S/g;g=-f*r/g;r=zd(z,e);z=ub(z,S);e=ub(e,g);nc(z,e);e=tb(z,r);S=tb(r,r);g=e*e-S*(tb(z,z)-1);if(!(0>g)){var T=Math.sqrt(g),g=ub(r,(-e-T)/S);if(nc(g,z),g=oc(g),!c)return g;var q;c=a[0];var H=n[0];a=a[1];n=n[1];c>H&&(q=c,c=H,H=q);var l=H-c,m=Math.abs(l-F)<P,p=m||P>l;if(!m&&a>n&&(q=a,a=n,n=q),p?m?0<a+n^g[1]<(Math.abs(g[0]-c)<P?a:n):a<=g[1]&&g[1]<=n:l>F^(c<=g[0]&&g[0]<=H))return q=ub(r,(-e+T)/S),nc(q,z),[g,oc(q)]}}function e(c,d){var r=g?a:F-a,z=0;return-r>c?z|=1:c>r&&(z|=2),-r>d?z|=4:d>r&&(z|=8),
z}var f=Math.cos(a),g=0<f,H=Math.abs(f)>P,q=pc(a,6*O);return Cd(c,function(a){var n,f,M,q,l;return{lineStart:function(){q=M=!1;l=1},point:function(m,J){var C,B=[m,J],N=c(m,J),R=g?N?0:e(m,J):N?e(m+(0>m?F:-F),J):0;if(!n&&(q=M=N)&&a.lineStart(),N!==M&&(C=d(n,B),(vb(n,C)||vb(B,C))&&(B[0]+=P,B[1]+=P,N=c(B[0],B[1]))),N!==M)l=0,N?(a.lineStart(),C=d(B,n),a.point(C[0],C[1])):(C=d(n,B),a.point(C[0],C[1]),a.lineEnd()),n=C;else if(H&&n&&g^N){var W;R&f||!(W=d(B,n,!0))||(l=0,g?(a.lineStart(),a.point(W[0][0],W[0][1]),
a.point(W[1][0],W[1][1]),a.lineEnd()):(a.point(W[1][0],W[1][1]),a.lineEnd(),a.lineStart(),a.point(W[0][0],W[0][1])))}!N||n&&vb(n,B)||a.point(B[0],B[1]);n=B;M=N;f=R},lineEnd:function(){M&&a.lineEnd();n=null},clean:function(){return l|(q&&M)<<1}}},q)}function Cf(a,c,d,e){function f(e,g){return Math.abs(e[0]-a)<P?0<g?0:3:Math.abs(e[0]-d)<P?0<g?2:1:Math.abs(e[1]-c)<P?0<g?1:0:0<g?3:2}function g(a,n){return H(a.point,n.point)}function H(a,n){var c=f(a,1),d=f(n,1);return c!==d?c-d:0===c?n[1]-a[1]:1===c?
a[0]-n[0]:2===c?a[1]-n[1]:n[0]-a[0]}return function(q){function y(g){g=f(g,-1);return l([0===g||3===g?a:d,1<g?e:c])}function l(a){for(var n=0,c=L.length,d=a[1],r=0;c>r;++r)for(var e=1,z=L[r],f=z.length,g=z[0];f>e;++e)b=z[e],g[1]<=d?b[1]>d&&0<(b[0]-g[0])*(a[1]-g[1])-(a[0]-g[0])*(b[1]-g[1])&&++n:b[1]<=d&&0>(b[0]-g[0])*(a[1]-g[1])-(a[0]-g[0])*(b[1]-g[1])&&--n,g=b;return 0!==n}function D(g,T,q,y){var l=0,m=0;if(null==g||(l=f(g,q))!==(m=f(T,q))||0>H(g,T)^0<q){do y.point(0===l||3===l?a:d,1<l?e:c);while((l=
(l+q+4)%4)!==m)}else y.point(T[0],T[1])}function A(f,g){f>=a&&(d>=f&&g>=c&&e>=g)&&q.point(f,g)}function x(f,g){f=Math.max(-wb,Math.min(wb,f));g=Math.max(-wb,Math.min(wb,g));var M=f>=a&&d>=f&&g>=c&&e>=g;if(L&&J.push([f,g]),s)C=f,B=g,N=M,s=!1,M&&(q.lineStart(),q.point(f,g));else if(M&&p)q.point(f,g);else{var T=[R,W],H=[f,g],y=H[0]-T[0],l=H[1]-T[1],m=[0,1];(Math.abs(y)<P&&Math.abs(l)<P?a<=T[0]&&T[0]<=d&&c<=T[1]&&T[1]<=e:xb(a-T[0],y,m)&&(xb(T[0]-d,-y,m)&&xb(c-T[1],l,m)&&xb(T[1]-e,-l,m))&&(1>m[1]&&(H[0]=
T[0]+m[1]*y,H[1]=T[1]+m[1]*l),0<m[0]&&(T[0]+=m[0]*y,T[1]+=m[0]*l),!0))?(p||(q.lineStart(),q.point(T[0],T[1])),q.point(H[0],H[1]),M||q.lineEnd()):(q.lineStart(),q.point(f,g))}R=f;W=g;p=M}var la,L,J,C,B,N,R,W,p,s,t=q,v=Ed(),u={point:A,lineStart:function(){u.point=x;L&&L.push(J=[]);s=!0;p=!1;R=W=0/0},lineEnd:function(){la&&(x(C,B),N&&p&&v.rejoin(),la.push(v.buffer()));u.point=A;p&&q.lineEnd()},polygonStart:function(){q=v;la=[];L=[]},polygonEnd:function(){q=t;(la=m.merge(la)).length?(q.polygonStart(),
Ad(la,g,y,D,q),q.polygonEnd()):l([a,c])&&(q.polygonStart(),q.lineStart(),D(null,null,1,q),q.lineEnd(),q.polygonEnd());la=L=J=null}};return u}}function xb(a,c,d){if(Math.abs(c)<P)return 0>=a;a/=c;if(0<c){if(a>d[1])return!1;a>d[0]&&(d[0]=a)}else{if(a<d[0])return!1;a<d[1]&&(d[1]=a)}return!0}function Fd(a,c){function d(e,r){return e=a(e,r),c(e[0],e[1])}return a.invert&&c.invert&&(d.invert=function(d,e){return d=c.invert(d,e),d&&a.invert(d[0],d[1])}),d}function Gd(a){function c(e){function z(c,d){c=a(c,
d);e.point(c[0],c[1])}function g(){x=0/0;B.point=S;e.lineStart()}function S(c,z){var g=sb([c,z]),q=a(c,z);d(x,p,A,L,J,C,x=q[0],p=q[1],A=c,L=g[0],J=g[1],C=g[2],f,e);e.point(x,p)}function l(){B.point=z;e.lineEnd()}function m(){var a,n,c,z,H,D;g();B.point=function(d,e){S(a=d,e);n=x;c=p;z=L;H=J;D=C;B.point=S};B.lineEnd=function(){d(x,p,A,L,J,C,n,c,a,z,H,D,f,e);B.lineEnd=l;l()}}var A,x,p,L,J,C,B={point:z,lineStart:g,lineEnd:l,polygonStart:function(){e.polygonStart();B.lineStart=m},polygonEnd:function(){e.polygonEnd();
B.lineStart=g}};return B}function d(c,z,f,g,M,l,m,x,p,L,J,C,B,N){var R=m-c,W=x-z,s=R*R+W*W;if(s>4*e&&B--){var t=g+L,Sa=M+J,v=l+C,u=Math.sqrt(t*t+Sa*Sa+v*v),E=Math.asin(v/=u),G=Math.abs(Math.abs(v)-1)<P?(f+p)/2:Math.atan2(Sa,t),F=a(G,E),E=F[0],F=F[1],I=E-c,K=F-z,O=W*I-R*K;(O*O/s>e||0.3<Math.abs((R*I+W*K)/s-0.5))&&(d(c,z,f,g,M,l,E,F,G,t/=u,Sa/=u,v,B,N),N.point(E,F),d(E,F,G,t,Sa,v,m,x,p,L,J,C,B,N))}}var e=0.5,f=16;return c.precision=function(a){return arguments.length?(f=0<(e=a*a)&&16,c):Math.sqrt(e)},
c}function Ea(a){return qc(function(){return a})()}function qc(a){function c(a){return a=H(a[0]*O,a[1]*O),[a[0]*D+q,y-a[1]*D]}function d(a){return a=H.invert((a[0]-q)/D,(y-a[1])/D),a&&[a[0]*Y,a[1]*Y]}function e(){H=Fd(g=rc(J,C,B),f);var a=f(p,L);return q=A-a[0]*D,y=x+a[1]*D,c}var f,g,H,q,y,l=Gd(function(a,c){return a=f(a,c),[a[0]*D+q,y-a[1]*D]}),D=150,A=480,x=250,p=0,L=0,J=0,C=0,B=0,N=Hd,R=na,W=null,s=null;return c.stream=function(a){return Ef(g,N(l(R(a))))},c.clipAngle=function(a){return arguments.length?
(N=null==a?(W=a,Hd):Bf((W=+a)*O),c):W},c.clipExtent=function(a){return arguments.length?(s=a,R=null==a?na:Cf(a[0][0],a[0][1],a[1][0],a[1][1]),c):s},c.scale=function(a){return arguments.length?(D=+a,e()):D},c.translate=function(a){return arguments.length?(A=+a[0],x=+a[1],e()):[A,x]},c.center=function(a){return arguments.length?(p=a[0]%360*O,L=a[1]%360*O,e()):[p*Y,L*Y]},c.rotate=function(a){return arguments.length?(J=a[0]%360*O,C=a[1]%360*O,B=2<a.length?a[2]%360*O:0,e()):[J*Y,C*Y,B*Y]},m.rebind(c,l,
"precision"),function(){return f=a.apply(this,arguments),c.invert=f.invert&&d,e()}}function Ef(a,c){return{point:function(d,e){e=a(d*O,e*O);d=e[0];c.point(d>F?d-2*F:-F>d?d+2*F:d,e[1])},sphere:function(){c.sphere()},lineStart:function(){c.lineStart()},lineEnd:function(){c.lineEnd()},polygonStart:function(){c.polygonStart()},polygonEnd:function(){c.polygonEnd()}}}function ab(a,c){return[a,c]}function rc(a,c,d){return a?c||d?Fd(Id(a),Jd(c,d)):Id(a):c||d?Jd(c,d):ab}function Kd(a){return function(c,d){return c+=
a,[c>F?c-2*F:-F>c?c+2*F:c,d]}}function Id(a){var c=Kd(a);return c.invert=Kd(-a),c}function Jd(a,c){function d(a,c){var n=Math.cos(c),r=Math.cos(a)*n,n=Math.sin(a)*n,z=Math.sin(c),l=z*e+r*f;return[Math.atan2(n*g-l*H,r*e-z*f),Math.asin(Math.max(-1,Math.min(1,l*g+n*H)))]}var e=Math.cos(a),f=Math.sin(a),g=Math.cos(c),H=Math.sin(c);return d.invert=function(a,c){var n=Math.cos(c),d=Math.cos(a)*n,n=Math.sin(a)*n,r=Math.sin(c),z=r*g-n*H;return[Math.atan2(n*g+r*H,d*e+z*f),Math.asin(Math.max(-1,Math.min(1,
z*e-d*f)))]},d}function pc(a,c){var d=Math.cos(a),e=Math.sin(a);return function(f,g,H,q){null!=f?(f=Ld(d,f),g=Ld(d,g),(0<H?g>f:f>g)&&(f+=2*H*F)):(f=a+2*H*F,g=a);for(var y,l=H*c;0<H?f>g:g>f;f-=l)q.point((y=oc([d,-e*Math.cos(f),-e*Math.sin(f)]))[0],y[1])}}function Ld(a,c){var d=sb(c);d[0]-=a;var e=Math.sqrt(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]);d[0]/=e;d[1]/=e;d[2]/=e;e=Math.acos(Math.max(-1,Math.min(1,-d[1])));return((0>-d[2]?-e:e)+2*Math.PI-P)%(2*Math.PI)}function Md(a,c,d){var e=m.range(a,c-P,d).concat(c);
return function(a){return e.map(function(c){return[a,c]})}}function Nd(a,c,d){var e=m.range(a,c-P,d).concat(c);return function(a){return e.map(function(c){return[c,a]})}}function sc(a){return a.source}function tc(a){return a.target}function Ff(a,c,d,e){var f=Math.cos(c),g=Math.sin(c),H=Math.cos(e),q=Math.sin(e),l=f*Math.cos(a),m=f*Math.sin(a),D=H*Math.cos(d),A=H*Math.sin(d),x=2*Math.asin(Math.sqrt(ld(e-c)+f*H*ld(d-a))),p=1/Math.sin(x);d=x?function(a){var c=Math.sin(a*=x)*p,n=Math.sin(x-a)*p;a=n*l+
c*D;var d=n*m+c*A,c=n*g+c*q;return[Math.atan2(d,a)*Y,Math.atan2(c,Math.sqrt(a*a+d*d))*Y]}:function(){return[a*Y,c*Y]};return d.distance=x,d}function uc(a){var c=0,d=F/3,e=qc(a);a=e(c,d);return a.parallels=function(a){return arguments.length?e(c=a[0]*F/180,d=a[1]*F/180):[180*(c/F),180*(d/F)]},a}function Od(a,c){function d(a,c){var n=Math.sqrt(g-2*f*Math.sin(c))/f;return[n*Math.sin(a*=f),H-n*Math.cos(a)]}var e=Math.sin(a),f=(e+Math.sin(c))/2,g=1+e*(2*f-e),H=Math.sqrt(g)/f;return d.invert=function(a,
c){var n=H-c;return[Math.atan2(a,n)/f,Math.asin((g-(a*a+n*n)*f*f)/(2*f))]},d}function vc(a,c){var d=a(c[0]),e=a([0.5*(c[0][0]+c[1][0]),c[0][1]]),f=a([c[1][0],c[0][1]]),g=a(c[1]),H=(e[1]-d[1])/(e[0]-d[0]),q=(f[1]-e[1])/(f[0]-e[0]),l=0.5*(H*q*(d[1]-f[1])+q*(d[0]+e[0])-H*(e[0]+f[0]))/(q-H),m=(0.5*(d[0]+e[0])-l)/H+0.5*(d[1]+e[1]),e=g[0]-l,g=g[1]-m,f=d[0]-l,d=d[1]-m,D=e*e+g*g,A=f*f+d*d,x=Math.atan2(g,e),p=Math.atan2(d,f);return function(c){var d=c[0]-l,e=c[1]-m,r=d*d+e*e,d=Math.atan2(e,d);return r>D&&
A>r&&d>x&&p>d?a.invert(c):void 0}}function Gf(){function a(c,n){yb+=f*c-e*n;e=c;f=n}var c,d,e,f;Fa.point=function(g,H){Fa.point=a;c=e=g;d=f=H};Fa.lineEnd=function(){a(c,d)}}function Hf(){function a(c,n){H.push("M",c,",",n,g)}function c(a,n){H.push("M",a,",",n);q.point=d}function d(a,c){H.push("L",a,",",c)}function e(){q.point=a}function f(){H.push("Z")}var g=Pd(4.5),H=[],q={point:a,lineStart:function(){q.point=c},lineEnd:e,polygonStart:function(){q.lineEnd=f},polygonEnd:function(){q.lineEnd=e;q.point=
a},pointRadius:function(a){return g=Pd(a),q},result:function(){if(H.length){var a=H.join("");return H=[],a}}};return q}function wc(a,c){fa||(aa+=a,ba+=c,++Z)}function Qd(){function a(n,e){var f=n-c,g=e-d,f=Math.sqrt(f*f+g*g);aa+=f*(c+n)/2;ba+=f*(d+e)/2;Z+=f;c=n;d=e}var c,d;if(1!==fa){if(!(1>fa))return;fa=1;aa=ba=Z=0}sa.point=function(e,f){sa.point=a;c=e;d=f}}function Rd(){sa.point=wc}function If(){function a(c,n){var d=f*c-e*n;aa+=d*(e+c);ba+=d*(f+n);Z+=3*d;e=c;f=n}var c,d,e,f;2>fa&&(fa=2,aa=ba=Z=
0);sa.point=function(g,H){sa.point=a;c=e=g;d=f=H};sa.lineEnd=function(){a(c,d)}}function Jf(a){function c(d,e){a.moveTo(d,e);a.arc(d,e,H,0,2*F)}function d(c,r){a.moveTo(c,r);q.point=e}function e(c,d){a.lineTo(c,d)}function f(){q.point=c}function g(){a.closePath()}var H=4.5,q={point:c,lineStart:function(){q.point=d},lineEnd:f,polygonStart:function(){q.lineEnd=g},polygonEnd:function(){q.lineEnd=f;q.point=c},pointRadius:function(a){return H=a,q},result:ca};return q}function Pd(a){return"m0,"+a+"a"+a+
","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Kf(a){var c=Gd(function(c,d){return a([c*Y,d*Y])});return function(a){return a=c(a),{point:function(c,n){a.point(c*O,n*O)},sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}}function bb(a,c){function d(c,e){var r=Math.cos(c),z=Math.cos(e),r=a(r*z);return[r*z*Math.sin(c),r*Math.sin(e)]}return d.invert=function(a,
n){var d=Math.sqrt(a*a+n*n),e=c(d),r=Math.sin(e),e=Math.cos(e);return[Math.atan2(a*r,d*e),Math.asin(d&&n*r/d)]},d}function Sd(a,c){function d(a,c){var n=Math.abs(Math.abs(c)-F/2)<P?0:g/Math.pow(Math.tan(F/4+c/2),f);return[n*Math.sin(f*a),g-n*Math.cos(f*a)]}var e=Math.cos(a),f=a===c?Math.sin(a):Math.log(e/Math.cos(c))/Math.log(Math.tan(F/4+c/2)/Math.tan(F/4+a/2)),g=e*Math.pow(Math.tan(F/4+a/2),f)/f;return f?(d.invert=function(a,c){var n=g-c,d=(0<f?1:0>f?-1:0)*Math.sqrt(a*a+n*n);return[Math.atan2(a,
n)/f,2*Math.atan(Math.pow(g/d,1/f))-F/2]},d):zb}function Td(a,c){function d(a,c){var n=g-c;return[n*Math.sin(f*a),g-n*Math.cos(f*a)]}var e=Math.cos(a),f=a===c?Math.sin(a):(e-Math.cos(c))/(c-a),g=e/f+a;return Math.abs(f)<P?ab:(d.invert=function(a,c){var n=g-c;return[Math.atan2(a,n)/f,g-(0<f?1:0>f?-1:0)*Math.sqrt(a*a+n*n)]},d)}function zb(a,c){return[a,Math.log(Math.tan(F/4+c/2))]}function Ud(a){var c,d=Ea(a),e=d.scale,f=d.translate,g=d.clipExtent;return d.scale=function(){var a=e.apply(d,arguments);
return a===d?c?d.clipExtent(null):d:a},d.translate=function(){var a=f.apply(d,arguments);return a===d?c?d.clipExtent(null):d:a},d.clipExtent=function(a){var n=g.apply(d,arguments);if(n===d){if(c=null==a){var l=F*e(),m=f();g([[m[0]-l,m[1]-l],[m[0]+l,m[1]+l]])}}else c&&(n=null);return n},d.clipExtent(null)}function xc(a,c){var d=Math.cos(c)*Math.sin(a);return[Math.log((1+d)/(1-d))/2,Math.atan2(Math.tan(c),Math.cos(a))]}function Vd(a){function c(z){function l(){m.push("M",g(a(x),q))}for(var H,m=[],x=
[],p=-1,L=z.length,J=V(d),C=V(e);++p<L;)f.call(this,H=z[p],p)?x.push([+J.call(this,H,p),+C.call(this,H,p)]):x.length&&(l(),x=[]);return x.length&&l(),m.length?m.join(""):null}var d=ta,e=xa,f=$a,g=pa,l=g.key,q=0.7;return c.x=function(a){return arguments.length?(d=a,c):d},c.y=function(a){return arguments.length?(e=a,c):e},c.defined=function(a){return arguments.length?(f=a,c):f},c.interpolate=function(a){return arguments.length?(l="function"==typeof a?g=a:(g=yc.get(a)||pa).key,c):l},c.tension=function(a){return arguments.length?
(q=a,c):q},c}function ta(a){return a[0]}function xa(a){return a[1]}function pa(a){return a.join("L")}function zc(a){for(var c=0,d=a.length,e=a[0],f=[e[0],",",e[1]];++c<d;)f.push("V",(e=a[c])[1],"H",e[0]);return f.join("")}function Ac(a){for(var c=0,d=a.length,e=a[0],f=[e[0],",",e[1]];++c<d;)f.push("H",(e=a[c])[0],"V",e[1]);return f.join("")}function Ab(a,c){if(1>c.length||a.length!=c.length&&a.length!=c.length+2)return pa(a);var d=a.length!=c.length,e="",f=a[0],g=a[1],l=c[0],q=l,y=1;if(d&&(e+="Q"+
(g[0]-2*l[0]/3)+","+(g[1]-2*l[1]/3)+","+g[0]+","+g[1],f=a[1],y=2),1<c.length){q=c[1];g=a[y];y++;e+="C"+(f[0]+l[0])+","+(f[1]+l[1])+","+(g[0]-q[0])+","+(g[1]-q[1])+","+g[0]+","+g[1];for(f=2;f<c.length;f++,y++)g=a[y],q=c[f],e+="S"+(g[0]-q[0])+","+(g[1]-q[1])+","+g[0]+","+g[1]}d&&(d=a[y],e+="Q"+(g[0]+2*q[0]/3)+","+(g[1]+2*q[1]/3)+","+d[0]+","+d[1]);return e}function Bc(a,c){for(var d,e=[],f=(1-c)/2,g=a[0],l=a[1],q=1,y=a.length;++q<y;)d=g,g=l,l=a[q],e.push([f*(l[0]-d[0]),f*(l[1]-d[1])]);return e}function Wd(a){if(3>
a.length)return pa(a);var c=1,d=a.length,e=a[0],f=e[0],g=e[1],l=[f,f,f,(e=a[1])[0]],q=[g,g,g,e[1]],f=[f,",",g];for(cb(f,l,q);++c<d;)e=a[c],l.shift(),l.push(e[0]),q.shift(),q.push(e[1]),cb(f,l,q);for(c=-1;2>++c;)l.shift(),l.push(e[0]),q.shift(),q.push(e[1]),cb(f,l,q);return f.join("")}function ua(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]+a[3]*c[3]}function cb(a,c,d){a.push("C",ua(Xd,c),",",ua(Xd,d),",",ua(Yd,c),",",ua(Yd,d),",",ua(Ua,c),",",ua(Ua,d))}function Cc(a,c){return(c[1]-a[1])/(c[0]-a[0])}
function Lf(a,c,d,e){var f,g,l,q,y,m,D;return f=e[a],g=f[0],l=f[1],f=e[c],q=f[0],y=f[1],f=e[d],m=f[0],D=f[1],0<(D-l)*(q-g)-(y-l)*(m-g)}function Dc(a,c,d){return(d[0]-c[0])*(a[1]-c[1])<(d[1]-c[1])*(a[0]-c[0])}function Zd(a,c,d,e){var f=a[0],g=d[0],l=c[0]-f,q=e[0]-g;a=a[1];d=d[1];c=c[1]-a;e=e[1]-d;g=(q*(a-d)-e*(f-g))/(e*l-q*c);return[f+g*l,a+g*c]}function Ec(a,c){var d=a.map(function(a,c){return{index:c,x:a[0],y:a[1]}}).sort(function(a,c){return a.y<c.y?-1:a.y>c.y?1:a.x<c.x?-1:a.x>c.x?1:0}),e=null,
f={list:[],leftEnd:null,rightEnd:null,init:function(){f.leftEnd=f.createHalfEdge(null,"l");f.rightEnd=f.createHalfEdge(null,"l");f.leftEnd.r=f.rightEnd;f.rightEnd.l=f.leftEnd;f.list.unshift(f.leftEnd,f.rightEnd)},createHalfEdge:function(a,c){return{edge:a,side:c,vertex:null,l:null,r:null}},insert:function(a,c){c.l=a;c.r=a.r;a.r.l=c;a.r=c},leftBound:function(a){var c=f.leftEnd;do c=c.r;while(c!=f.rightEnd&&g.rightOf(c,a));return c.l},del:function(a){a.l.r=a.r;a.r.l=a.l;a.edge=null},right:function(a){return a.r},
left:function(a){return a.l},leftRegion:function(a){return null==a.edge?e:a.edge.region[a.side]},rightRegion:function(a){return null==a.edge?e:a.edge.region[Fc[a.side]]}},g={bisect:function(a,c){var n={region:{l:a,r:c},ep:{l:null,r:null}},d=c.x-a.x,e=c.y-a.y;return n.c=a.x*d+a.y*e+0.5*(d*d+e*e),(0<d?d:-d)>(0<e?e:-e)?(n.a=1,n.b=e/d,n.c/=d):(n.b=1,n.a=d/e,n.c/=e),n},intersect:function(a,c){var n=a.edge,d=c.edge;if(!n||!d||n.region.r==d.region.r)return null;var e=n.a*d.b-n.b*d.a;if(1E-10>Math.abs(e))return null;
var f,r,z=(n.c*d.b-d.c*n.b)/e,e=(d.c*n.a-n.c*d.a)/e,g=n.region.r,S=d.region.r;g.y<S.y||g.y==S.y&&g.x<S.x?(f=a,r=n):(f=c,r=d);return(n=z>=r.region.r.x)&&"l"===f.side||!n&&"r"===f.side?null:{x:z,y:e}},rightOf:function(a,c){var n=a.edge,d=n.region.r,e=c.x>d.x;if(e&&"l"===a.side)return 1;if(!e&&"r"===a.side)return 0;if(1===n.a){var f=c.y-d.y,r=c.x-d.x,z=0;!e&&0>n.b||e&&0<=n.b?z=f>=n.b*r:(z=c.x+c.y*n.b>n.c,0>n.b&&(z=!z));d=d.x-n.region.l.x;z=n.b*(r*r-f*f)<d*f*(1+2*r/d+n.b*n.b);0>n.b&&(z=!z)}else r=n.c-
n.a*c.x,n=c.y-r,f=c.x-d.x,d=r-d.y,z=n*n>f*f+d*d;return"l"===a.side?z:!z},endPoint:function(a,n,d){a.ep[n]=d;a.ep[Fc[n]]&&c(a)},distance:function(a,c){var n=a.x-c.x,d=a.y-c.y;return Math.sqrt(n*n+d*d)}},l={list:[],insert:function(a,c,n){a.vertex=c;a.ystar=c.y+n;n=0;for(var d=l.list,e=d.length;e>n;n++){var f=d[n];if(!(a.ystar>f.ystar||a.ystar==f.ystar&&c.x>f.vertex.x))break}d.splice(n,0,a)},del:function(a){for(var c=0,n=l.list,d=n.length;d>c&&n[c]!=a;++c);n.splice(c,1)},empty:function(){return 0===
l.list.length},nextEvent:function(a){for(var c=0,n=l.list,d=n.length;d>c;++c)if(n[c]==a)return n[c+1];return null},min:function(){var a=l.list[0];return{x:a.vertex.x,y:a.ystar}},extractMin:function(){return l.list.shift()}};f.init();for(var e=d.shift(),q,y,m,D,A,x,p,L,J,C,B=d.shift();;)if(l.empty()||(q=l.min()),B&&(l.empty()||B.y<q.y||B.y==q.y&&B.x<q.x))y=f.leftBound(B),m=f.right(y),p=f.rightRegion(y),C=g.bisect(p,B),x=f.createHalfEdge(C,"l"),f.insert(y,x),(J=g.intersect(y,x))&&(l.del(y),l.insert(y,
J,g.distance(J,B))),y=x,x=f.createHalfEdge(C,"r"),f.insert(y,x),(J=g.intersect(x,m))&&l.insert(x,J,g.distance(J,B)),B=d.shift();else{if(l.empty())break;y=l.extractMin();D=f.left(y);m=f.right(y);A=f.right(m);p=f.leftRegion(y);x=f.rightRegion(m);J=y.vertex;g.endPoint(y.edge,y.side,J);g.endPoint(m.edge,m.side,J);f.del(y);l.del(m);f.del(m);y="l";p.y>x.y&&(L=p,p=x,x=L,y="r");C=g.bisect(p,x);x=f.createHalfEdge(C,y);f.insert(D,x);g.endPoint(C,Fc[y],J);(J=g.intersect(D,x))&&(l.del(D),l.insert(D,J,g.distance(J,
p)));(J=g.intersect(x,A))&&l.insert(x,J,g.distance(J,p))}for(y=f.right(f.leftEnd);y!=f.rightEnd;y=f.right(y))c(y.edge)}function Mf(a){return a.x}function Nf(a){return a.y}function $d(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function db(a,c,d,e,f,g){if(!a(c,d,e,f,g)){var l=0.5*(d+f),q=0.5*(e+g);c=c.nodes;c[0]&&db(a,c[0],d,e,l,q);c[1]&&db(a,c[1],l,e,f,q);c[2]&&db(a,c[2],d,q,l,g);c[3]&&db(a,c[3],l,q,f,g)}}function Gc(a,c){a=m.rgb(a);c=m.rgb(c);var d=a.r,e=a.g,f=a.b,g=c.r-d,l=c.g-e,q=c.b-f;
return function(a){return"#"+Qa(Math.round(d+g*a))+Qa(Math.round(e+l*a))+Qa(Math.round(f+q*a))}}function ae(a){var c=[a.a,a.b],d=[a.c,a.d],e=be(c),f=c[0]*d[0]+c[1]*d[1],g=be((d[0]+=-f*c[0],d[1]+=-f*c[1],d))||0;c[0]*d[1]<d[0]*c[1]&&(c[0]*=-1,c[1]*=-1,e*=-1,f*=-1);this.rotate=(e?Math.atan2(c[1],c[0]):Math.atan2(-d[0],d[1]))*Y;this.translate=[a.e,a.f];this.scale=[e,g];this.skew=g?Math.atan2(f,g)*Y:0}function be(a){var c=Math.sqrt(a[0]*a[0]+a[1]*a[1]);return c&&(a[0]/=c,a[1]/=c),c}function ya(a,c){return c-=
a=+a,function(d){return a+c*d}}function Bb(a,c){var d,e=[],f=[],g=m.transform(a),l=m.transform(c),q=g.translate,y=l.translate,X=g.rotate,D=l.rotate,A=g.skew,x=l.skew,g=g.scale,l=l.scale;return q[0]!=y[0]||q[1]!=y[1]?(e.push("translate(",null,",",null,")"),f.push({i:1,x:ya(q[0],y[0])},{i:3,x:ya(q[1],y[1])})):y[0]||y[1]?e.push("translate("+y+")"):e.push(""),X!=D?(180<X-D?D+=360:180<D-X&&(X+=360),f.push({i:e.push(e.pop()+"rotate(",null,")")-2,x:ya(X,D)})):D&&e.push(e.pop()+"rotate("+D+")"),A!=x?f.push({i:e.push(e.pop()+
"skewX(",null,")")-2,x:ya(A,x)}):x&&e.push(e.pop()+"skewX("+x+")"),g[0]!=l[0]||g[1]!=l[1]?(d=e.push(e.pop()+"scale(",null,",",null,")"),f.push({i:d-4,x:ya(g[0],l[0])},{i:d-2,x:ya(g[1],l[1])})):(1!=l[0]||1!=l[1])&&e.push(e.pop()+"scale("+l+")"),d=f.length,function(a){for(var c,n=-1;++n<d;)e[(c=f[n]).i]=c.x(a);return e.join("")}}function ce(a,c){var d,e={},f={};for(d in a)d in c?e[d]=("transform"==d?Bb:Ia)(a[d],c[d]):f[d]=a[d];for(d in c)d in a||(f[d]=c[d]);return function(a){for(d in e)f[d]=e[d](a);
return f}}function de(a,c){var d,e,f,g,l=0,q=[],y=[];a+="";c+="";for(e=Cb.lastIndex=0;d=Cb.exec(c);++e)d.index&&q.push(c.substring(l,d.index)),y.push({i:q.length,x:d[0]}),q.push(null),l=Cb.lastIndex;l<c.length&&q.push(c.substring(l));e=0;for(f=y.length;(d=Cb.exec(a))&&f>e;++e)if(g=y[e],g.x==d[0]){if(g.i)if(null==q[g.i+1]){q[g.i-1]+=g.x;q.splice(g.i,1);for(d=e+1;f>d;++d)y[d].i--}else{q[g.i-1]+=g.x+q[g.i+1];q.splice(g.i,2);for(d=e+1;f>d;++d)y[d].i-=2}else if(null==q[g.i+1])q[g.i]=g.x;else{q[g.i]=g.x+
q[g.i+1];q.splice(g.i+1,1);for(d=e+1;f>d;++d)y[d].i--}y.splice(e,1);f--;e--}else g.x=ya(parseFloat(d[0]),parseFloat(g.x));for(;f>e;)g=y.pop(),null==q[g.i+1]?q[g.i]=g.x:(q[g.i]=g.x+q[g.i+1],q.splice(g.i+1,1)),f--;return 1===q.length?null==q[0]?y[0].x:function(){return c}:function(a){for(e=0;f>e;++e)q[(g=y[e]).i]=g.x(a);return q.join("")}}function Ia(a,c){for(var d,e=m.interpolators.length;0<=--e&&!(d=m.interpolators[e](a,c)););return d}function ee(a,c){var d,e=[],f=[],g=a.length,l=c.length,q=Math.min(a.length,
c.length);for(d=0;q>d;++d)e.push(Ia(a[d],c[d]));for(;g>d;++d)f[d]=a[d];for(;l>d;++d)f[d]=c[d];return function(a){for(d=0;q>d;++d)f[d]=e[d](a);return f}}function Of(a){return function(c){return 0>=c?0:1<=c?1:a(c)}}function fe(a){return function(c){return 1-a(1-c)}}function ge(a){return function(c){return 0.5*(0.5>c?a(2*c):2-a(2-2*c))}}function Pf(a){return a*a}function Qf(a){return a*a*a}function Rf(a){return 1-Math.cos(a*F/2)}function Sf(a){return Math.pow(2,10*(a-1))}function Tf(a){return 1-Math.sqrt(1-
a*a)}function Uf(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+0.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375}function he(a,c){return c-=a,function(d){return Math.round(a+c*d)}}function Vf(a,c){return c=c-(a=+a)?1/(c-a):0,function(d){return(d-a)*c}}function Wf(a,c){return c=c-(a=+a)?1/(c-a):0,function(d){return Math.max(0,Math.min(1,(d-a)*c))}}function Xf(a){var c=a.source;a=a.target;var d;var e=a;if(c===e)d=c;else{d=ie(c);for(var e=ie(e),f=d.pop(),
g=e.pop(),l=null;f===g;)l=f,f=d.pop(),g=e.pop();d=l}for(e=[c];c!==d;)c=c.parent,e.push(c);for(c=e.length;a!==d;)e.splice(c,0,a),a=a.parent;return e}function ie(a){for(var c=[],d=a.parent;null!=d;)c.push(a),a=d,d=d.parent;return c.push(a),c}function Yf(a){a.fixed|=2}function Zf(a){a.fixed&=-7}function $f(a){a.fixed|=4;a.px=a.x;a.py=a.y}function ag(a){a.fixed&=-5}function je(a,c,d){var e=0,f=0;if(a.charge=0,!a.leaf)for(var g,l=a.nodes,q=l.length,y=-1;++y<q;)g=l[y],null!=g&&(je(g,c,d),a.charge+=g.charge,
e+=g.charge*g.cx,f+=g.charge*g.cy);a.point&&(a.leaf||(a.point.x+=Math.random()-0.5,a.point.y+=Math.random()-0.5),c*=d[a.point.index],a.charge+=a.pointCharge=c,e+=c*a.point.x,f+=c*a.point.y);a.cx=e/a.charge;a.cy=f/a.charge}function eb(a,c){return m.rebind(a,c,"sort","children","value"),a.nodes=a,a.links=bg,a}function cg(a){return a.children}function dg(a){return a.value}function eg(a,c){return c.value-a.value}function bg(a){return m.merge(a.map(function(a){return(a.children||[]).map(function(c){return{source:a,
target:c}})}))}function fg(a){return a.x}function gg(a){return a.y}function hg(a,c,d){a.y0=c;a.y=d}function Hc(a){return m.range(a.length)}function Ic(a){var c=-1;a=a[0].length;for(var d=[];++c<a;)d[c]=0;return d}function ig(a){for(var c,d=1,e=0,f=a[0][1],g=a.length;g>d;++d)(c=a[d][1])>f&&(e=d,f=c);return e}function jg(a){return a.reduce(kg,0)}function kg(a,c){return a+c[1]}function lg(a,c){return ke(a,Math.ceil(Math.log(c.length)/Math.LN2+1))}function ke(a,c){for(var d=-1,e=+a[0],f=(a[1]-e)/c,g=
[];++d<=c;)g[d]=f*d+e;return g}function mg(a){return[m.min(a),m.max(a)]}function le(a,c){return a.parent==c.parent?1:2}function Jc(a){var c=a.children;return c&&c.length?c[0]:a._tree.thread}function Kc(a){var c,d=a.children;return d&&(c=d.length)?d[c-1]:a._tree.thread}function Db(a,c){var d=a.children;if(d&&(f=d.length))for(var e,f,g=-1;++g<f;)0<c(e=Db(d[g],c),a)&&(a=e);return a}function ng(a,c){return a.x-c.x}function og(a,c){return c.x-a.x}function pg(a,c){return a.depth-c.depth}function za(a,c){function d(a,
n){var e=a.children;if(e&&(g=e.length))for(var f,g,l=null,m=-1;++m<g;)f=e[m],d(f,l),l=f;c(a,n)}d(a,null)}function qg(a,c){return a.value-c.value}function Lc(a,c){var d=a._pack_next;a._pack_next=c;c._pack_prev=a;c._pack_next=d;d._pack_prev=c}function me(a,c){a._pack_next=c;c._pack_prev=a}function ne(a,c){var d=c.x-a.x,e=c.y-a.y,f=a.r+c.r;return 0.001<f*f-d*d-e*e}function oe(a){function c(a){D=Math.min(a.x-a.r,D);A=Math.max(a.x+a.r,A);x=Math.min(a.y-a.r,x);p=Math.max(a.y+a.r,p)}if((d=a.children)&&(m=
d.length)){var d,e,f,g,l,q,y,m,D=1/0,A=-1/0,x=1/0,p=-1/0;if(d.forEach(rg),e=d[0],e.x=-e.r,e.y=0,c(e),1<m&&(f=d[1],f.x=f.r,f.y=0,c(f),2<m)){g=d[2];pe(e,f,g);c(g);Lc(e,g);e._pack_prev=g;Lc(g,f);f=e._pack_next;for(l=3;m>l;l++){pe(e,f,g=d[l]);var L=0,J=1,C=1;for(q=f._pack_next;q!==f;q=q._pack_next,J++)if(ne(q,g)){L=1;break}if(1==L)for(y=e._pack_prev;y!==q._pack_prev&&!ne(y,g);y=y._pack_prev,C++);L?(C>J||J==C&&f.r<e.r?me(e,f=q):me(e=y,f),l--):(Lc(e,g),f=g,c(g))}}e=(D+A)/2;f=(x+p)/2;for(l=q=0;m>l;l++)g=
d[l],g.x-=e,g.y-=f,q=Math.max(q,g.r+Math.sqrt(g.x*g.x+g.y*g.y));a.r=q;d.forEach(sg)}}function rg(a){a._pack_next=a._pack_prev=a}function sg(a){delete a._pack_next;delete a._pack_prev}function qe(a,c,d,e){var f=a.children;if(a.x=c+=e*a.x,a.y=d+=e*a.y,a.r*=e,f){a=-1;for(var g=f.length;++a<g;)qe(f[a],c,d,e)}}function pe(a,c,d){var e=a.r+d.r,f=c.x-a.x,g=c.y-a.y;if(e&&(f||g)){var l=c.r+d.r,q=f*f+g*g,l=l*l,e=e*e;c=0.5+(e-l)/(2*q);l=Math.sqrt(Math.max(0,2*l*(e+q)-(e-=q)*e-l*l))/(2*q);d.x=a.x+c*f+l*g;d.y=
a.y+c*g-l*f}else d.x=a.x+e,d.y=a.y}function tg(a){return 1+m.max(a,function(a){return a.y})}function ug(a){return a.reduce(function(a,c){return a+c.x},0)/a.length}function re(a){var c=a.children;return c&&c.length?re(c[0]):a}function se(a){var c,d=a.children;return d&&(c=d.length)?se(d[c-1]):a}function Mc(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function te(a,c){var d=a.x+c[3],e=a.y+c[0],f=a.dx-c[1]-c[3],g=a.dy-c[0]-c[2];return 0>f&&(d+=f/2,f=0),0>g&&(e+=g/2,g=0),{x:d,y:e,dx:f,dy:g}}function fb(a){var c=
a[0];a=a[a.length-1];return a>c?[c,a]:[a,c]}function Eb(a){return a.rangeExtent?a.rangeExtent():fb(a.range())}function vg(a,c,d,e){var f=d(a[0],a[1]),g=e(c[0],c[1]);return function(a){return g(f(a))}}function Fb(a,c){var d,e=0,f=a.length-1,g=a[e],l=a[f];return g>l&&(d=e,e=f,f=d,d=g,g=l,l=d),(c=c(l-g))&&(a[e]=c.floor(g),a[f]=c.ceil(l)),a}function wg(a,c,d,e){var f=[],g=[],l=0,q=Math.min(a.length,c.length)-1;for(a[q]<a[0]&&(a=a.slice().reverse(),c=c.slice().reverse());++l<=q;)f.push(d(a[l-1],a[l])),
g.push(e(c[l-1],c[l]));return function(c){var d=m.bisect(a,c,1,q)-1;return g[d](f[d](c))}}function ue(a,c,d,e){function f(){var M=2<Math.min(a.length,c.length)?wg:vg,m=e?Wf:Vf;return l=M(a,c,m,d),q=M(c,a,m,Ia),g}function g(a){return l(a)}var l,q;return g.invert=function(a){return q(a)},g.domain=function(c){return arguments.length?(a=c.map(Number),f()):a},g.range=function(a){return arguments.length?(c=a,f()):c},g.rangeRound=function(a){return g.range(a).interpolate(he)},g.clamp=function(a){return arguments.length?
(e=a,f()):e},g.interpolate=function(a){return arguments.length?(d=a,f()):d},g.ticks=function(c){return Nc(a,c)},g.tickFormat=function(c,d){return Oc(a,c,d)},g.nice=function(){return Fb(a,ve),f()},g.copy=function(){return ue(a,c,d,e)},f()}function we(a,c){return m.rebind(a,c,"range","rangeRound","interpolate","clamp")}function ve(a){return a=Math.pow(10,Math.round(Math.log(a)/Math.LN10)-1),a&&{floor:function(c){return Math.floor(c/a)*a},ceil:function(c){return Math.ceil(c/a)*a}}}function xe(a,c){var d=
fb(a),e=d[1]-d[0],f=Math.pow(10,Math.floor(Math.log(e/c)/Math.LN10)),e=c/e*f;return 0.15>=e?f*=10:0.35>=e?f*=5:0.75>=e&&(f*=2),d[0]=Math.ceil(d[0]/f)*f,d[1]=Math.floor(d[1]/f)*f+0.5*f,d[2]=f,d}function Nc(a,c){return m.range.apply(m,xe(a,c))}function Oc(a,c,d){var e=-Math.floor(Math.log(xe(a,c)[2])/Math.LN10+0.01);return m.format(d?d.replace(ye,function(a,c,d,n,f,g,r,z,l,m){return[c,d,n,f,g,r,z,l||"."+(e-2*("%"===m)),m].join("")}):",."+e+"f")}function ze(a,c,d,e){function f(c){return a(d(c))}return f.invert=
function(c){return e(a.invert(c))},f.domain=function(c){return arguments.length?(0>c[0]?(d=Pc,e=xg):(d=Ae,e=Be),a.domain(c.map(d)),f):a.domain().map(e)},f.base=function(a){return arguments.length?(c=+a,f):c},f.nice=function(){return a.domain(Fb(a.domain(),yg(c))),f},f.ticks=function(){var f=fb(a.domain()),g=[];if(f.every(isFinite)){var l=Math.log(c),M=Math.floor(f[0]/l),l=Math.ceil(f[1]/l),m=e(f[0]),f=e(f[1]),D=c%1?2:c;if(d===Pc)for(g.push(-Math.pow(c,-M));M++<l;)for(var A=D-1;0<A;A--)g.push(-Math.pow(c,
-M)*A);else{for(;l>M;M++)for(A=1;D>A;A++)g.push(Math.pow(c,M)*A);g.push(Math.pow(c,M))}for(M=0;g[M]<m;M++);for(l=g.length;g[l-1]>f;l--);g=g.slice(M,l)}return g},f.tickFormat=function(a,n){if(2>arguments.length&&(n=zg),!arguments.length)return n;var g,l=Math.log(c),m=Math.max(0.1,a/f.ticks().length),D=d===Pc?(g=-1E-12,Math.floor):(g=1E-12,Math.ceil);return function(a){return a/e(l*D(d(a)/l+g))<=m?n(a):""}},f.copy=function(){return ze(a.copy(),c,d,e)},we(f,a)}function Ae(a){return Math.log(0>a?0:a)}
function Be(a){return Math.exp(a)}function Pc(a){return-Math.log(0<a?0:-a)}function xg(a){return-Math.exp(-a)}function yg(a){a=Math.log(a);var c={floor:function(c){return Math.floor(c/a)*a},ceil:function(c){return Math.ceil(c/a)*a}};return function(){return c}}function Ce(a,c){function d(c){return a(e(c))}var e=Gb(c),f=Gb(1/c);return d.invert=function(c){return f(a.invert(c))},d.domain=function(c){return arguments.length?(a.domain(c.map(e)),d):a.domain().map(f)},d.ticks=function(a){return Nc(d.domain(),
a)},d.tickFormat=function(a,c){return Oc(d.domain(),a,c)},d.nice=function(){return d.domain(Fb(d.domain(),ve))},d.exponent=function(a){if(!arguments.length)return c;var n=d.domain();return e=Gb(c=a),f=Gb(1/c),d.domain(n)},d.copy=function(){return Ce(a.copy(),c)},we(d,a)}function Gb(a){return function(c){return 0>c?-Math.pow(-c,a):Math.pow(c,a)}}function De(a,d){function e(c){return l[((g.get(c)||g.set(c,a.push(c)))-1)%l.length]}function f(c,d){return m.range(a.length).map(function(a){return c+d*a})}
var g,l,H;return e.domain=function(f){if(!arguments.length)return a;a=[];g=new c;for(var l,S=-1,T=f.length;++S<T;)g.has(l=f[S])||g.set(l,a.push(l));return e[d.t].apply(e,d.a)},e.range=function(a){return arguments.length?(l=a,H=0,d={t:"range",a:arguments},e):l},e.rangePoints=function(c,g){2>arguments.length&&(g=0);var M=c[0],m=c[1],A=(m-M)/(Math.max(1,a.length-1)+g);return l=f(2>a.length?(M+m)/2:M+A*g/2,A),H=0,d={t:"rangePoints",a:arguments},e},e.rangeBands=function(c,g,M){2>arguments.length&&(g=0);
3>arguments.length&&(M=g);var m=c[1]<c[0],A=c[m-0],x=(c[1-m]-A)/(a.length-g+2*M);return l=f(A+x*M,x),m&&l.reverse(),H=x*(1-g),d={t:"rangeBands",a:arguments},e},e.rangeRoundBands=function(c,g,M){2>arguments.length&&(g=0);3>arguments.length&&(M=g);var m=c[1]<c[0],A=c[m-0],x=c[1-m],p=Math.floor((x-A)/(a.length-g+2*M));return l=f(A+Math.round((x-A-(a.length-g)*p)/2),p),m&&l.reverse(),H=Math.round(p*(1-g)),d={t:"rangeRoundBands",a:arguments},e},e.rangeBand=function(){return H},e.rangeExtent=function(){return fb(d.a[0])},
e.copy=function(){return De(a,d)},e.domain(a)}function Ee(a,c){function d(){var g=0,r=c.length;for(f=[];++g<r;)f[g-1]=m.quantile(a,g/r);return e}function e(a){return isNaN(a=+a)?0/0:c[m.bisect(f,a)]}var f;return e.domain=function(c){return arguments.length?(a=c.filter(function(a){return!isNaN(a)}).sort(m.ascending),d()):a},e.range=function(a){return arguments.length?(c=a,d()):c},e.quantiles=function(){return f},e.copy=function(){return Ee(a,c)},d()}function Fe(a,c,d){function e(c){return d[Math.max(0,
Math.min(l,Math.floor(g*(c-a))))]}function f(){return g=d.length/(c-a),l=d.length-1,e}var g,l;return e.domain=function(d){return arguments.length?(a=+d[0],c=+d[d.length-1],f()):[a,c]},e.range=function(a){return arguments.length?(d=a,f()):d},e.copy=function(){return Fe(a,c,d)},f()}function Ge(a,c){function d(e){return c[m.bisect(a,e)]}return d.domain=function(c){return arguments.length?(a=c,d):a},d.range=function(a){return arguments.length?(c=a,d):c},d.copy=function(){return Ge(a,c)},d}function He(a){function c(a){return+a}
return c.invert=c,c.domain=c.range=function(d){return arguments.length?(a=d.map(c),c):a},c.ticks=function(c){return Nc(a,c)},c.tickFormat=function(c,d){return Oc(a,c,d)},c.copy=function(){return He(a)},c}function Ag(a){return a.innerRadius}function Bg(a){return a.outerRadius}function Ie(a){return a.startAngle}function Je(a){return a.endAngle}function Ke(a){for(var c,d,e,f=-1,g=a.length;++f<g;)c=a[f],d=c[0],e=c[1]+Ja,c[0]=d*Math.cos(e),c[1]=d*Math.sin(e);return a}function Le(a){function c(z){function m(){B.push("M",
q(a(R),A),D,X(a(N.reverse()),A),"Z")}for(var y,p,C,B=[],N=[],R=[],s=-1,t=z.length,v=V(d),u=V(f),E=d===e?function(){return p}:V(e),Df=f===g?function(){return C}:V(g);++s<t;)l.call(this,y=z[s],s)?(N.push([p=+v.call(this,y,s),C=+u.call(this,y,s)]),R.push([+E.call(this,y,s),+Df.call(this,y,s)])):N.length&&(m(),N=[],R=[]);return N.length&&m(),B.length?B.join(""):null}var d=ta,e=ta,f=0,g=xa,l=$a,q=pa,m=q.key,X=q,D="L",A=0.7;return c.x=function(a){return arguments.length?(d=e=a,c):e},c.x0=function(a){return arguments.length?
(d=a,c):d},c.x1=function(a){return arguments.length?(e=a,c):e},c.y=function(a){return arguments.length?(f=g=a,c):g},c.y0=function(a){return arguments.length?(f=a,c):f},c.y1=function(a){return arguments.length?(g=a,c):g},c.defined=function(a){return arguments.length?(l=a,c):l},c.interpolate=function(a){return arguments.length?(m="function"==typeof a?q=a:(q=yc.get(a)||pa).key,X=q.reverse||q,D=q.closed?"M":"L",c):m},c.tension=function(a){return arguments.length?(A=a,c):A},c}function Cg(a){return a.radius}
function Me(a){return[a.x,a.y]}function Dg(a){return function(){var c=a.apply(this,arguments),d=c[0],c=c[1]+Ja;return[d*Math.cos(c),d*Math.sin(c)]}}function Eg(){return 64}function Fg(){return"circle"}function Ne(a){a=Math.sqrt(a/F);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function gb(a,c){return Xb(a,da),a.id=c,a}function Qc(a,c,d,e){var f=a.id;return Ca(a,"function"==typeof d?function(a,n,g){a.__transition__[f].tween.set(c,e(d.call(a,a.__data__,n,g)))}:(d=e(d),function(a){a.__transition__[f].tween.set(c,
d)}))}function Gg(a){return null==a&&(a=""),function(){this.textContent=a}}function Hb(a,d,e,f){var g=a.__transition__||(a.__transition__={active:0,count:0}),l=g[e];if(!l){var H=f.time;return l=g[e]={tween:new c,event:m.dispatch("start","end"),time:H,ease:f.ease,delay:f.delay,duration:f.duration},++g.count,m.timer(function(c){function f(c){return g.active>e?D():(g.active=e,p.start.call(a,A,d),l.tween.forEach(function(c,e){(e=e.call(a,A,d))&&C.push(e)}),S(c)||m.timer(S,0,H),1)}function S(c){if(g.active!==
e)return D();c=(c-L)/J;for(var f=x(c),l=C.length;0<l;)C[--l].call(a,f);return 1<=c?(D(),p.end.call(a,A,d),1):void 0}function D(){return--g.count?delete g[e]:delete a.__transition__,1}var A=a.__data__,x=l.ease,p=l.event,L=l.delay,J=l.duration,C=[];return c>=L?f(c):m.timer(f,L,H),1},0,H),l}}function Oe(a,c){a.attr("transform",function(a){return"translate("+c(a)+",0)"})}function Pe(a,c){a.attr("transform",function(a){return"translate(0,"+c(a)+")"})}function Hg(a,c,d){if(e=[],d&&1<c.length){for(var e,
f,g=fb(a.domain()),l=-1,q=c.length,m=(c[1]-c[0])/++d;++l<q;)for(a=d;0<--a;)(f=+c[l]-a*m)>=g[0]&&e.push(f);--l;for(a=0;++a<d&&(f=+c[l]+a*m)<g[1];)e.push(f)}return e}function Ka(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function La(a,c,d){function e(c){var d=a(c),f=g(d,1);return f-c>c-d?d:f}function f(d){return c(d=a(new ha(d-1)),1),d}function g(a,d){return c(a=new ha(+a),d),a}function l(a,e,n){a=f(a);var g=[];if(1<n)for(;e>a;)d(a)%n||g.push(new Date(+a)),c(a,
1);else for(;e>a;)g.push(new Date(+a)),c(a,1);return g}a.floor=a;a.round=e;a.ceil=f;a.offset=g;a.range=l;var q=a.utc=Ib(a);return q.floor=q,q.round=Ib(e),q.ceil=Ib(f),q.offset=Ib(g),q.range=function(a,c,d){try{ha=Ka;var e=new Ka;return e._=a,l(e,c,d)}finally{ha=Date}},a}function Ib(a){return function(c,d){try{ha=Ka;var e=new Ka;return e._=c,a(e,d)._}finally{ha=Date}}}function Jb(a,c,d,e){for(var f,g,l=0,q=c.length,m=d.length;q>l;){if(e>=m)return-1;if(f=c.charCodeAt(l++),37===f){if(g=Ig[c.charAt(l++)],
!g||0>(e=g(a,d,e)))return-1}else if(f!=d.charCodeAt(e++))return-1}return e}function Kb(a){return RegExp("^(?:"+a.map(m.requote).join("|")+")","i")}function Qe(a){for(var d=new c,e=-1,f=a.length;++e<f;)d.set(a[e].toLowerCase(),e);return d}function ma(a,c,d){a+="";var e=a.length;return d>e?Array(d-e+1).join(c)+a:a}function Re(a,c,d){ia.lastIndex=0;return(c=ia.exec(c.substring(d,d+2)))?(a.d=+c[0],d+c[0].length):-1}function Se(a,c,d){ia.lastIndex=0;return(c=ia.exec(c.substring(d,d+2)))?(a.H=+c[0],d+c[0].length):
-1}function Rc(a){return a.toISOString()}function Sc(a,c,d){function e(c){return a(c)}return e.invert=function(c){return Tc(a.invert(c))},e.domain=function(c){return arguments.length?(a.domain(c),e):a.domain().map(Tc)},e.nice=function(a){return e.domain(Fb(e.domain(),function(){return a}))},e.ticks=function(d,f){var g,r=e.domain();g=r[0];r=r[r.length-1];g=r>g?[g,r]:[r,g];if("function"!=typeof d){var r=(g[1]-g[0])/d,l=m.bisect(Lb,r);if(l==Lb.length)return c.year(g,d);if(!l)return a.ticks(d).map(Tc);
Math.log(r/Lb[l-1])<Math.log(Lb[l]/r)&&--l;d=c[l];f=d[1];d=d[0].range}return d(g[0],new Date(+g[1]+1),f)},e.tickFormat=function(){return d},e.copy=function(){return Sc(a.copy(),c,d)},m.rebind(e,a,"range","rangeRound","interpolate","clamp")}function Tc(a){return new Date(a)}function Te(a){return function(c){for(var d=a.length-1,e=a[d];!e[1](c);)e=a[--d];return e[0](c)}}function Uc(a){var c=new Date(a,0,1);return c.setFullYear(a),c}function Jg(a){var c=a.getFullYear(),d=Uc(c),e=Uc(c+1);return c+(a-
d)/(e-d)}function Vc(a){var c=new Date(Date.UTC(a,0,1));return c.setUTCFullYear(a),c}function Kg(a){var c=a.getUTCFullYear(),d=Vc(c),e=Vc(c+1);return c+(a-d)/(e-d)}function Lg(a){return a.responseText}function Mg(a){return JSON.parse(a.responseText)}function Ng(a){var c=ka.createRange();return c.selectNode(ka.body),c.createContextualFragment(a.responseText)}function Og(a){return a.responseXML}var m={version:"3.1.5"};Date.now||(Date.now=function(){return+new Date});var ka=document,ga=window;try{ka.createElement("div").style.setProperty("opacity",
0,"")}catch(sh){var Ue=ga.CSSStyleDeclaration.prototype,Pg=Ue.setProperty;Ue.setProperty=function(a,c,d){Pg.call(this,a,c+"",d)}}m.ascending=function(a,c){return c>a?-1:a>c?1:a>=c?0:0/0};m.descending=function(a,c){return a>c?-1:c>a?1:c>=a?0:0/0};m.min=function(a,c){var d,e,f=-1,g=a.length;if(1===arguments.length){for(;++f<g&&(null==(d=a[f])||d!=d);)d=void 0;for(;++f<g;)null!=(e=a[f])&&d>e&&(d=e)}else{for(;++f<g&&(null==(d=c.call(a,a[f],f))||d!=d);)d=void 0;for(;++f<g;)null!=(e=c.call(a,a[f],f))&&
d>e&&(d=e)}return d};m.max=function(a,c){var d,e,f=-1,g=a.length;if(1===arguments.length){for(;++f<g&&(null==(d=a[f])||d!=d);)d=void 0;for(;++f<g;)null!=(e=a[f])&&e>d&&(d=e)}else{for(;++f<g&&(null==(d=c.call(a,a[f],f))||d!=d);)d=void 0;for(;++f<g;)null!=(e=c.call(a,a[f],f))&&e>d&&(d=e)}return d};m.extent=function(a,c){var d,e,f,g=-1,l=a.length;if(1===arguments.length){for(;++g<l&&(null==(d=f=a[g])||d!=d);)d=f=void 0;for(;++g<l;)null!=(e=a[g])&&(d>e&&(d=e),e>f&&(f=e))}else{for(;++g<l&&(null==(d=f=
c.call(a,a[g],g))||d!=d);)d=void 0;for(;++g<l;)null!=(e=c.call(a,a[g],g))&&(d>e&&(d=e),e>f&&(f=e))}return[d,f]};m.sum=function(a,c){var d,e=0,f=a.length,g=-1;if(1===arguments.length)for(;++g<f;)isNaN(d=+a[g])||(e+=d);else for(;++g<f;)isNaN(d=+c.call(a,a[g],g))||(e+=d);return e};m.mean=function(a,c){var d,f=a.length,g=0,l=-1,m=0;if(1===arguments.length)for(;++l<f;)e(d=a[l])&&(g+=(d-g)/++m);else for(;++l<f;)e(d=c.call(a,a[l],l))&&(g+=(d-g)/++m);return m?g:void 0};m.quantile=function(a,c){var d=(a.length-
1)*c+1,e=Math.floor(d),f=+a[e-1];return(d-=e)?f+d*(a[e]-f):f};m.median=function(a,c){return 1<arguments.length&&(a=a.map(c)),a=a.filter(e),a.length?m.quantile(a.sort(m.ascending),0.5):void 0};m.bisector=function(a){return{left:function(c,d,e,f){3>arguments.length&&(e=0);for(4>arguments.length&&(f=c.length);f>e;){var g=e+f>>>1;a.call(c,c[g],g)<d?e=g+1:f=g}return e},right:function(c,d,e,f){3>arguments.length&&(e=0);for(4>arguments.length&&(f=c.length);f>e;){var g=e+f>>>1;d<a.call(c,c[g],g)?f=g:e=g+
1}return e}}};var Ve=m.bisector(function(a){return a});m.bisectLeft=Ve.left;m.bisect=m.bisectRight=Ve.right;m.shuffle=function(a){for(var c,d,e=a.length;e;)d=Math.random()*e--|0,c=a[e],a[e]=a[d],a[d]=c;return a};m.permute=function(a,c){for(var d=[],e=-1,f=c.length;++e<f;)d[e]=a[c[e]];return d};m.zip=function(){if(!(e=arguments.length))return[];for(var a=-1,c=m.min(arguments,l),d=Array(c);++a<c;)for(var e,f=-1,g=d[a]=Array(e);++f<e;)g[f]=arguments[f][a];return d};m.transpose=function(a){return m.zip.apply(m,
a)};m.keys=function(a){var c=[],d;for(d in a)c.push(d);return c};m.values=function(a){var c=[],d;for(d in a)c.push(a[d]);return c};m.entries=function(a){var c=[],d;for(d in a)c.push({key:d,value:a[d]});return c};m.merge=function(a){return Array.prototype.concat.apply([],a)};m.range=function(a,c,d){if(3>arguments.length&&(d=1,2>arguments.length&&(c=a,a=0)),1/0===(c-a)/d)throw Error("infinite range");var e,f=[],g;e=Math.abs(d);for(g=1;e*g%1;)g*=10;var l=-1;if(a*=g,c*=g,d*=g,0>d)for(;(e=a+d*++l)>c;)f.push(e/
g);else for(;(e=a+d*++l)<c;)f.push(e/g);return f};m.map=function(a){var d=new c,e;for(e in a)d.set(e,a[e]);return d};f(c,{has:function(a){return Ga+a in this},get:function(a){return this[Ga+a]},set:function(a,c){return this[Ga+a]=c},remove:function(a){return a=Ga+a,a in this&&delete this[a]},keys:function(){var a=[];return this.forEach(function(c){a.push(c)}),a},values:function(){var a=[];return this.forEach(function(c,d){a.push(d)}),a},entries:function(){var a=[];return this.forEach(function(c,d){a.push({key:c,
value:d})}),a},forEach:function(a){for(var c in this)c.charCodeAt(0)===We&&a.call(this,c.substring(1),this[c])}});var Ga="\x00",We=Ga.charCodeAt(0);m.nest=function(){function a(d,z,m){if(m>=l.length)return f?f.call(g,z):e?z.sort(e):z;for(var H,A,x,p,L=-1,J=z.length,C=l[m++],s=new c;++L<J;)(p=s.get(H=C(A=z[L])))?p.push(A):s.set(H,[A]);return d?(A=d(),x=function(c,e){A.set(c,a(d,e,m))}):(A={},x=function(c,e){A[c]=a(d,e,m)}),s.forEach(x),A}function d(a,c){if(c>=l.length)return a;var e=[],f=H[c++];return a.forEach(function(a,
f){e.push({key:a,values:d(f,c)})}),f?e.sort(function(a,c){return f(a.key,c.key)}):e}var e,f,g={},l=[],H=[];return g.map=function(c,d){return a(d,c,0)},g.entries=function(c){return d(a(m.map,c,0),0)},g.key=function(a){return l.push(a),g},g.sortKeys=function(a){return H[l.length-1]=a,g},g.sortValues=function(a){return e=a,g},g.rollup=function(a){return f=a,g},g};m.set=function(c){var d=new a;if(c)for(var e=0;e<c.length;e++)d.add(c[e]);return d};f(a,{has:function(a){return Ga+a in this},add:function(a){return this[Ga+
a]=!0,a},remove:function(a){return a=Ga+a,a in this&&delete this[a]},values:function(){var a=[];return this.forEach(function(c){a.push(c)}),a},forEach:function(a){for(var c in this)c.charCodeAt(0)===We&&a.call(this,c.substring(1))}});m.behavior={};m.rebind=function(a,c){for(var d,e=1,f=arguments.length;++e<f;)a[d=arguments[e]]=g(a,c,c[d]);return a};m.dispatch=function(){for(var a=new d,c=-1,e=arguments.length;++c<e;)a[arguments[c]]=v(a);return a};d.prototype.on=function(a,c){var d=a.indexOf("."),
e="";if(0<=d&&(e=a.substring(d+1),a=a.substring(0,d)),a)return 2>arguments.length?this[a].on(e):this[a].on(e,c);if(2===arguments.length){if(null==c)for(a in this)this.hasOwnProperty(a)&&this[a].on(e,null);return this}};m.event=null;m.mouse=function(a){return I(a,p())};var Wb=/WebKit/.test(ga.navigator.userAgent)?-1:0,Ba=function(a){return Array.prototype.slice.call(a)};try{Ba(ka.documentElement.childNodes)[0].nodeType}catch(th){Ba=u}var Xb=[].__proto__?function(a,c){a.__proto__=c}:function(a,c){for(var d in c)a[d]=
c[d]};m.touches=function(a,c){return 2>arguments.length&&(c=p().touches),c?Ba(c).map(function(c){var d=I(a,c);return d.identifier=c.identifier,d}):[]};m.behavior.drag=function(){function a(){this.on("mousedown.drag",c).on("touchstart.drag",c)}function c(){function a(){var c=n.parentNode;return null!=D?m.touches(c).filter(function(a){return a.identifier===D})[0]:m.mouse(c)}function f(){l({type:"dragend"});x&&(t(),m.event.target===z&&E(p,"click"));p.on(null!=D?"touchmove.drag-"+D:"mousemove.drag",null).on(null!=
D?"touchend.drag-"+D:"mouseup.drag",null)}var g,n=this,l=d.of(n,arguments),z=m.event.target,D=m.event.touches?m.event.changedTouches[0].identifier:null,A=a(),x=0,p=m.select(ga).on(null!=D?"touchmove.drag-"+D:"mousemove.drag",function(){if(!n.parentNode)return f();var c=a(),d=c[0]-A[0],e=c[1]-A[1];x|=d|e;A=c;t();l({type:"drag",x:c[0]+g[0],y:c[1]+g[1],dx:d,dy:e})}).on(null!=D?"touchend.drag-"+D:"mouseup.drag",f,!0);e?(g=e.apply(n,arguments),g=[g.x-A[0],g.y-A[1]]):g=[0,0];null==D&&t();l({type:"dragstart"})}
var d=s(a,"drag","dragstart","dragend"),e=null;return a.origin=function(c){return arguments.length?(e=c,a):e},m.rebind(a,d,"on")};var fd=function(a,c){return c.querySelector(a)},gd=function(a,c){return c.querySelectorAll(a)},Va=ka.documentElement,Qg=Va.matchesSelector||Va.webkitMatchesSelector||Va.mozMatchesSelector||Va.msMatchesSelector||Va.oMatchesSelector,hd=function(a,c){return Qg.call(a,c)};"function"==typeof Sizzle&&(fd=function(a,c){return Sizzle(a,c)[0]||null},gd=function(a,c){return Sizzle.uniqueSort(Sizzle(a,
c))},hd=Sizzle.matchesSelector);var U=[];m.selection=function(){return hb};m.selection.prototype=U;U.select=function(a){var c,d,e,f,g=[];"function"!=typeof a&&(a=G(a));for(var l=-1,q=this.length;++l<q;){g.push(c=[]);c.parentNode=(e=this[l]).parentNode;for(var m=-1,X=e.length;++m<X;)(f=e[m])?(c.push(d=a.call(f,f.__data__,m)),d&&"__data__"in f&&(d.__data__=f.__data__)):c.push(null)}return K(g)};U.selectAll=function(a){var c,d,e=[];"function"!=typeof a&&(a=Q(a));for(var f=-1,g=this.length;++f<g;)for(var l=
this[f],q=-1,m=l.length;++q<m;)(d=l[q])&&(e.push(c=Ba(a.call(d,d.__data__,q))),c.parentNode=d);return K(e)};var Wc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};m.ns={prefix:Wc,qualify:function(a){var c=a.indexOf(":"),d=a;return 0<=c&&(d=a.substring(0,c),a=a.substring(c+1)),Wc.hasOwnProperty(d)?{space:Wc[d],local:a}:a}};U.attr=function(a,c){if(2>arguments.length){if("string"==
typeof a){var d=this.node();return a=m.ns.qualify(a),a.local?d.getAttributeNS(a.space,a.local):d.getAttribute(a)}for(c in a)this.each(ja(c,a[c]));return this}return this.each(ja(a,c))};m.requote=function(a){return a.replace(Rg,"\\$&")};var Rg=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;U.classed=function(a,c){if(2>arguments.length){if("string"==typeof a){var d=this.node(),e=(a=a.trim().split(/^|\s+/g)).length,f=-1;if(c=d.classList)for(;++f<e;){if(!c.contains(a[f]))return!1}else for(c=d.getAttribute("class");++f<
e;)if(!va(a[f]).test(c))return!1;return!0}for(c in a)this.each(Ya(c,a[c]));return this}return this.each(Ya(a,c))};U.style=function(a,c,d){var e=arguments.length;if(3>e){if("string"!=typeof a){2>e&&(c="");for(d in a)this.each(ea(d,a[d],c));return this}if(2>e)return ga.getComputedStyle(this.node(),null).getPropertyValue(a);d=""}return this.each(ea(a,c,d))};U.property=function(a,c){if(2>arguments.length){if("string"==typeof a)return this.node()[a];for(c in a)this.each(Za(c,a[c]));return this}return this.each(Za(a,
c))};U.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var c=a.apply(this,arguments);this.textContent=null==c?"":c}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent};U.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var c=a.apply(this,arguments);this.innerHTML=null==c?"":c}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML};U.append=function(a){function c(){return this.appendChild(ka.createElementNS(this.namespaceURI,
a))}function d(){return this.appendChild(ka.createElementNS(a.space,a.local))}return a=m.ns.qualify(a),this.select(a.local?d:c)};U.insert=function(a,c){function d(e,f){return this.insertBefore(ka.createElementNS(this.namespaceURI,a),c.call(this,e,f))}function e(d,f){return this.insertBefore(ka.createElementNS(a.space,a.local),c.call(this,d,f))}return a=m.ns.qualify(a),"function"!=typeof c&&(c=G(c)),this.select(a.local?e:d)};U.remove=function(){return this.each(function(){var a=this.parentNode;a&&
a.removeChild(this)})};U.data=function(a,d){function e(a,f){var g,n,l,r=a.length,m=f.length,S=Math.min(r,m),T=Array(m),M=Array(m),H=Array(r);if(d){var p=new c,s=new c,t=[];for(g=-1;++g<r;)S=d.call(n=a[g],n.__data__,g),p.has(S)?H[g]=n:p.set(S,n),t.push(S);for(g=-1;++g<m;)S=d.call(f,l=f[g],g),(n=p.get(S))?(T[g]=n,n.__data__=l):s.has(S)||(M[g]={__data__:l}),s.set(S,l),p.remove(S);for(g=-1;++g<r;)p.has(t[g])&&(H[g]=a[g])}else{for(g=-1;++g<S;)n=a[g],l=f[g],n?(n.__data__=l,T[g]=n):M[g]={__data__:l};for(;m>
g;++g)M[g]={__data__:f[g]};for(;r>g;++g)H[g]=a[g]}M.update=T;M.parentNode=T.parentNode=H.parentNode=a.parentNode;q.push(M);y.push(T);X.push(H)}var f,g,l=-1,m=this.length;if(!arguments.length){for(a=Array(m=(f=this[0]).length);++l<m;)(g=f[l])&&(a[l]=g.__data__);return a}var q=kd([]),y=K([]),X=K([]);if("function"==typeof a)for(;++l<m;)e(f=this[l],a.call(f,f.parentNode.__data__,l));else for(;++l<m;)e(f=this[l],a);return y.enter=function(){return q},y.exit=function(){return X},y};U.datum=function(a){return arguments.length?
this.property("__data__",a):this.property("__data__")};U.filter=function(a){var c,d,e,f=[];"function"!=typeof a&&(a=ed(a));for(var g=0,l=this.length;l>g;g++){f.push(c=[]);c.parentNode=(d=this[g]).parentNode;for(var q=0,m=d.length;m>q;q++)(e=d[q])&&a.call(e,e.__data__,q)&&c.push(e)}return K(f)};U.order=function(){for(var a=-1,c=this.length;++a<c;)for(var d,e=this[a],f=e.length-1,g=e[f];0<=--f;)(d=e[f])&&(g&&g!==d.nextSibling&&g.parentNode.insertBefore(d,g),g=d);return this};U.sort=function(a){a=tf.apply(this,
arguments);for(var c=-1,d=this.length;++c<d;)this[c].sort(a);return this.order()};U.on=function(a,c,d){var e=arguments.length;if(3>e){if("string"!=typeof a){2>e&&(c=!1);for(d in a)this.each(id(d,a[d],c));return this}if(2>e)return(e=this.node()["__on"+a])&&e._;d=!1}return this.each(id(a,c,d))};var Yb=m.map({mouseenter:"mouseover",mouseleave:"mouseout"});Yb.forEach(function(a){"on"+a in ka&&Yb.remove(a)});U.each=function(a){return Ca(this,function(c,d,e){a.call(c,c.__data__,d,e)})};U.call=function(a){var c=
Ba(arguments);return a.apply(c[0]=this,c),this};U.empty=function(){return!this.node()};U.node=function(){for(var a=0,c=this.length;c>a;a++)for(var d=this[a],e=0,f=d.length;f>e;e++){var g=d[e];if(g)return g}return null};var Ha=[];m.selection.enter=kd;m.selection.enter.prototype=Ha;Ha.append=U.append;Ha.insert=U.insert;Ha.empty=U.empty;Ha.node=U.node;Ha.select=function(a){for(var c,d,e,f,g,l=[],q=-1,m=this.length;++q<m;){e=(f=this[q]).update;l.push(c=[]);c.parentNode=f.parentNode;for(var X=-1,D=f.length;++X<
D;)(g=f[X])?(c.push(e[X]=d=a.call(f.parentNode,g.__data__,X)),d.__data__=g.__data__):c.push(null)}return K(l)};U.transition=function(){var a,c,d=ib||++Xe,e=[],f=Object.create(Mb);f.time=Date.now();for(var g=-1,l=this.length;++g<l;){e.push(a=[]);for(var q=this[g],m=-1,X=q.length;++m<X;)(c=q[m])&&Hb(c,m,d,f),a.push(c)}return gb(e,d)};var hb=K([[ka]]);hb[0].parentNode=Va;m.select=function(a){return"string"==typeof a?hb.select(a):K([[a]])};m.selectAll=function(a){return"string"==typeof a?hb.selectAll(a):
K([Ba(a)])};m.behavior.zoom=function(){function a(){this.on("mousedown.zoom",l).on("mousemove.zoom",y).on(Sg+".zoom",q).on("dblclick.zoom",X).on("touchstart.zoom",D).on("touchmove.zoom",p).on("touchend.zoom",D)}function c(a){return[(a[0]-R[0])/W,(a[1]-R[1])/W]}function d(a){W=Math.max(u[0],Math.min(u[1],a))}function e(a,c){c=[c[0]*W+R[0],c[1]*W+R[1]];R[0]+=a[0]-c[0];R[1]+=a[1]-c[1]}function f(){J&&J.domain(L.range().map(function(a){return(a-R[0])/W}).map(L.invert));B&&B.domain(C.range().map(function(a){return(a-
R[1])/W}).map(C.invert))}function g(a){f();m.event.preventDefault();a({type:"zoom",scale:W,translate:R})}function l(){var a=this,d=Ra.of(a,arguments),f=m.event.target,n=0,r=m.select(ga).on("mousemove.zoom",function(){n=1;e(m.mouse(a),q);g(d)}).on("mouseup.zoom",function(){n&&t();r.on("mousemove.zoom",null).on("mouseup.zoom",null);n&&m.event.target===f&&E(r,"click.zoom")}),q=c(m.mouse(a));ga.focus();t()}function q(){x||(x=c(m.mouse(this)));d(Math.pow(2,0.002*Nb())*W);e(m.mouse(this),x);g(Ra.of(this,
arguments))}function y(){x=null}function X(){var a=m.mouse(this),f=c(a),n=Math.log(W)/Math.LN2;d(Math.pow(2,m.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1));e(a,f);g(Ra.of(this,arguments))}function D(){var a=m.touches(this),f=Date.now();if(v=W,x={},a.forEach(function(a){x[a.identifier]=c(a)}),t(),1===a.length){if(500>f-N){var n=a[0],a=c(a[0]);d(2*W);e(n,a);g(Ra.of(this,arguments))}N=f}}function p(){var a=m.touches(this),c=a[0],f=x[c.identifier];if(a=a[1]){var n=x[a.identifier],c=[(c[0]+a[0])/2,(c[1]+
a[1])/2],f=[(f[0]+n[0])/2,(f[1]+n[1])/2];d(m.event.scale*v)}e(c,f);N=null;g(Ra.of(this,arguments))}var x,v,L,J,C,B,N,R=[0,0],W=1,u=Ye,Ra=s(a,"zoom");return a.translate=function(c){return arguments.length?(R=c.map(Number),f(),a):R},a.scale=function(c){return arguments.length?(W=+c,f(),a):W},a.scaleExtent=function(c){return arguments.length?(u=null==c?Ye:c.map(Number),a):u},a.x=function(c){return arguments.length?(J=c,L=c.copy(),R=[0,0],W=1,a):J},a.y=function(c){return arguments.length?(B=c,C=c.copy(),
R=[0,0],W=1,a):B},m.rebind(a,Ra,"on")};var Nb,Ye=[0,1/0],Sg="onwheel"in ka?(Nb=function(){return-m.event.deltaY*(m.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ka?(Nb=function(){return m.event.wheelDelta},"mousewheel"):(Nb=function(){return-m.event.detail},"MozMousePixelScroll");Ma.prototype.toString=function(){return this.rgb()+""};m.hsl=function(a,c,d){return 1===arguments.length?a instanceof Zb?Na(a.h,a.s,a.l):ec(""+a,qd,Na):Na(+a,+c,+d)};var Xc=Zb.prototype=new Ma;Xc.brighter=function(a){return a=
Math.pow(0.7,arguments.length?a:1),Na(this.h,this.s,this.l/a)};Xc.darker=function(a){return a=Math.pow(0.7,arguments.length?a:1),Na(this.h,this.s,a*this.l)};Xc.rgb=function(){return jb(this.h,this.s,this.l)};var F=Math.PI,P=1E-6,O=F/180,Y=180/F;m.hcl=function(a,c,d){var e;if(1===arguments.length)if(a instanceof kb)e=Oa(a.h,a.c,a.l);else if(a instanceof lb)e=Oa(Math.atan2(a.b,a.a)*Y,Math.sqrt(a.a*a.a+a.b*a.b),a.l);else{e=(a=rd((a=m.rgb(a)).r,a.g,a.b)).l;var f=a.a,g=a.b;e=Oa(Math.atan2(g,f)*Y,Math.sqrt(f*
f+g*g),e)}else e=Oa(+a,+c,+d);return e};var Yc=kb.prototype=new Ma;Yc.brighter=function(a){return Oa(this.h,this.c,Math.min(100,this.l+Ob*(arguments.length?a:1)))};Yc.darker=function(a){return Oa(this.h,this.c,Math.max(0,this.l-Ob*(arguments.length?a:1)))};Yc.rgb=function(){return $b(this.h,this.c,this.l).rgb()};m.lab=function(a,c,d){return 1===arguments.length?a instanceof lb?Pa(a.l,a.a,a.b):a instanceof kb?$b(a.l,a.c,a.h):rd((a=m.rgb(a)).r,a.g,a.b):Pa(+a,+c,+d)};var Ob=18,nd=0.95047,od=1,pd=1.08883,
Zc=lb.prototype=new Ma;Zc.brighter=function(a){return Pa(Math.min(100,this.l+Ob*(arguments.length?a:1)),this.a,this.b)};Zc.darker=function(a){return Pa(Math.max(0,this.l-Ob*(arguments.length?a:1)),this.a,this.b)};Zc.rgb=function(){return md(this.l,this.a,this.b)};m.rgb=function(a,c,d){return 1===arguments.length?a instanceof dc?wa(a.r,a.g,a.b):ec(""+a,wa,jb):wa(~~a,~~c,~~d)};var Pb=dc.prototype=new Ma;Pb.brighter=function(a){a=Math.pow(0.7,arguments.length?a:1);var c=this.r,d=this.g,e=this.b;return c||
d||e?(c&&30>c&&(c=30),d&&30>d&&(d=30),e&&30>e&&(e=30),wa(Math.min(255,Math.floor(c/a)),Math.min(255,Math.floor(d/a)),Math.min(255,Math.floor(e/a)))):wa(30,30,30)};Pb.darker=function(a){return a=Math.pow(0.7,arguments.length?a:1),wa(Math.floor(a*this.r),Math.floor(a*this.g),Math.floor(a*this.b))};Pb.hsl=function(){return qd(this.r,this.g,this.b)};Pb.toString=function(){return"#"+Qa(this.r)+Qa(this.g)+Qa(this.b)};var mb=m.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",
azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",
darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",
greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",
lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",
olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",
slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});mb.forEach(function(a,c){mb.set(a,ec(c,wa,jb))});m.functor=V;m.xhr=function(a,c,d){function e(){var a=y.status;!a&&y.responseText||200<=a&&300>a||304===a?g.load.call(f,q.call(f,y)):g.error.call(f,y)}var f={},g=
m.dispatch("progress","load","error"),l={},q=na,y=new (ga.XDomainRequest&&/^(http(s)?:)?\/\//.test(a)?XDomainRequest:XMLHttpRequest);return"onload"in y?y.onload=y.onerror=e:y.onreadystatechange=function(){3<y.readyState&&e()},y.onprogress=function(a){var c=m.event;m.event=a;try{g.progress.call(f,y)}finally{m.event=c}},f.header=function(a,c){return a=(a+"").toLowerCase(),2>arguments.length?l[a]:(null==c?delete l[a]:l[a]=c+"",f)},f.mimeType=function(a){return arguments.length?(c=null==a?null:a+"",f):
c},f.response=function(a){return q=a,f},["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,[a].concat(Ba(arguments)))}}),f.send=function(d,e,g){if(2===arguments.length&&"function"==typeof e&&(g=e,e=null),y.open(d,a,!0),null==c||"accept"in l||(l.accept=c+",*/*"),y.setRequestHeader)for(var r in l)y.setRequestHeader(r,l[r]);return null!=c&&y.overrideMimeType&&y.overrideMimeType(c),null!=g&&f.on("error",g).on("load",function(a){g(null,a)}),y.send(null==e?null:e),f},f.abort=function(){return y.abort(),
f},m.rebind(f,g,"on"),2===arguments.length&&"function"==typeof c&&(d=c,c=null),null==d?f:f.get(vf(d))};m.csv=sd(",","text/csv");m.tsv=sd("\t","text/tab-separated-values");var ob,nb,Tg=0,ic={},Ta=null;m.timer=function(a,c,d){if(3>arguments.length){if(2>arguments.length)c=0;else if(!isFinite(c))return;d=Date.now()}var e=ic[a.id];e&&e.callback===a?(e.then=d,e.delay=c):ic[a.id=++Tg]=Ta={callback:a,then:d,delay:c,next:Ta};ob||(nb=clearTimeout(nb),ob=1,ud(hc))};m.timer.flush=function(){for(var a,c=Date.now(),
d=Ta;d;)a=c-d.then,d.delay||(d.flush=d.callback(a)),d=d.next;td()};var ud=ga.requestAnimationFrame||ga.webkitRequestAnimationFrame||ga.mozRequestAnimationFrame||ga.oRequestAnimationFrame||ga.msRequestAnimationFrame||function(a){setTimeout(a,17)},Qb=[3,3],Ug="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,c){var d=Math.pow(10,3*Math.abs(8-c));return{scale:8<c?function(a){return a/d}:function(a){return a*d},symbol:a}});m.formatPrefix=function(a,c){var d=0;return a&&(0>a&&(a*=-1),c&&
(a=m.round(a,jc(a,c))),d=1+Math.floor(1E-12+Math.log(a)/Math.LN10),d=Math.max(-24,Math.min(24,3*Math.floor((0>=d?d+1:d-1)/3)))),Ug[8+d/3]};m.round=function(a,c){return c?Math.round(a*(c=Math.pow(10,c)))/c:Math.round(a)};m.format=function(a){a=ye.exec(a);var c=a[1]||" ",d=a[2]||">",e=a[3]||"",f=a[4]||"",g=a[5],l=+a[6],q=a[7],y=a[8],p=a[9],D=1,A="",x=!1;switch(y&&(y=+y.substring(1)),(g||"0"===c&&"="===d)&&(g=c="0",d="=",q&&(l-=Math.floor((l-1)/4))),p){case "n":q=!0;p="g";break;case "%":D=100;A="%";
p="f";break;case "p":D=100;A="%";p="r";break;case "b":case "o":case "x":case "X":f&&(f="0"+p.toLowerCase());case "c":case "d":x=!0;y=0;break;case "s":D=-1,p="r"}"#"===f&&(f="");"r"!=p||y||(p="g");null!=y&&("g"==p?y=Math.max(1,Math.min(21,y)):("e"==p||"f"==p)&&(y=Math.max(0,Math.min(20,y))));var p=Vg.get(p)||wf,s=g&&q;return function(a){if(x&&a%1)return"";var n=0>a||0===a&&0>1/a?(a=-a,"-"):e;if(0>D){var C=m.formatPrefix(a,y);a=C.scale(a);A=C.symbol}else a*=D;a=p(a,y);!g&&q&&(a=$c(a));var C=f.length+
a.length+(s?0:n.length),B=l>C?Array(C=l-C+1).join(c):"";return s&&(a=$c(B+a)),a.replace(".","."),n+=f,("<"===d?n+a+B:">"===d?B+n+a:"^"===d?B.substring(0,C>>=1)+n+a+B.substring(C):n+(s?a:B+a))+A}};var ye=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Vg=m.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,
c){return a.toPrecision(c)},e:function(a,c){return a.toExponential(c)},f:function(a,c){return a.toFixed(c)},r:function(a,c){return(a=m.round(a,jc(a,c))).toFixed(Math.max(0,Math.min(20,jc(a*(1+1E-15),c))))}}),$c=na;if(Qb)var Wg=Qb.length,$c=function(a){for(var c=a.lastIndexOf("."),d=0<=c?"."+a.substring(c+1):(c=a.length,""),e=[],f=0,g=Qb[0];0<c&&0<g;)e.push(a.substring(c-=g,c+g)),g=Qb[f=(f+1)%Wg];return e.reverse().join(",")+d};m.geo={};m.geo.stream=function(a,c){a&&Ze.hasOwnProperty(a.type)?Ze[a.type](a,
c):pb(a,c)};var Ze={Feature:function(a,c){pb(a.geometry,c)},FeatureCollection:function(a,c){for(var d=a.features,e=-1,f=d.length;++e<f;)pb(d[e].geometry,c)}},vd={Sphere:function(a,c){c.sphere()},Point:function(a,c){var d=a.coordinates;c.point(d[0],d[1])},MultiPoint:function(a,c){for(var d,e=a.coordinates,f=-1,g=e.length;++f<g;)d=e[f],c.point(d[0],d[1])},LineString:function(a,c){kc(a.coordinates,c,0)},MultiLineString:function(a,c){for(var d=a.coordinates,e=-1,f=d.length;++e<f;)kc(d[e],c,0)},Polygon:function(a,
c){wd(a.coordinates,c)},MultiPolygon:function(a,c){for(var d=a.coordinates,e=-1,f=d.length;++e<f;)wd(d[e],c)},GeometryCollection:function(a,c){for(var d=a.geometries,e=-1,f=d.length;++e<f;)pb(d[e],c)}};m.geo.area=function(a){return Wa=0,m.geo.stream(a,Da),Wa};var Wa,qb,rb,Da={sphere:function(){Wa+=4*F},point:ca,lineStart:ca,lineEnd:ca,polygonStart:function(){qb=1;rb=0;Da.lineStart=xf},polygonEnd:function(){var a=2*Math.atan2(rb,qb);Wa+=0>a?4*F+a:a;Da.lineStart=Da.lineEnd=Da.point=ca}};m.geo.bounds=
xd(na);m.geo.centroid=function(a){fa=qa=aa=ba=Z=0;m.geo.stream(a,ra);var c;return qa&&Math.abs(c=Math.sqrt(aa*aa+ba*ba+Z*Z))>P?[Math.atan2(ba,aa)*Y,Math.asin(Math.max(-1,Math.min(1,Z/c)))*Y]:void 0};var fa,qa,aa,ba,Z,ra={sphere:function(){2>fa&&(fa=2,qa=aa=ba=Z=0)},point:yd,lineStart:lc,lineEnd:mc,polygonStart:function(){2>fa&&(fa=2,qa=aa=ba=Z=0);ra.lineStart=yf},polygonEnd:function(){ra.lineStart=lc}},Hd=Cd($a,function(a){var c,d=0/0,e=0/0,f=0/0;return{lineStart:function(){a.lineStart();c=1},point:function(g,
l){var q=0<g?F:-F,m=Math.abs(g-d);if(Math.abs(m-F)<P)a.point(d,e=0<(e+l)/2?F/2:-F/2),a.point(f,e),a.lineEnd(),a.lineStart(),a.point(q,e),a.point(g,e),c=0;else if(f!==q&&m>=F){Math.abs(d-f)<P&&(d-=f*P);Math.abs(g-q)<P&&(g-=q*P);var m=d,p=e,D=g,A,x,s=Math.sin(m-D);e=Math.abs(s)>P?Math.atan((Math.sin(p)*(x=Math.cos(l))*Math.sin(D)-Math.sin(l)*(A=Math.cos(p))*Math.sin(m))/(A*x*s)):(p+l)/2;a.point(f,e);a.lineEnd();a.lineStart();a.point(q,e);c=0}a.point(d=g,e=l);f=q},lineEnd:function(){a.lineEnd();d=e=
0/0},clean:function(){return 2-c}}},function(a,c,d,e){null==a?(d=d*F/2,e.point(-F,d),e.point(0,d),e.point(F,d),e.point(F,0),e.point(F,-d),e.point(0,-d),e.point(-F,-d),e.point(-F,0),e.point(-F,d)):Math.abs(a[0]-c[0])>P?(a=(a[0]<c[0]?1:-1)*F,d=d*a/2,e.point(-a,d),e.point(0,d),e.point(a,d)):e.point(c[0],c[1])}),wb=1E9;m.geo.projection=Ea;m.geo.projectionMutator=qc;(m.geo.equirectangular=function(){return Ea(ab)}).raw=ab.invert=ab;m.geo.rotation=function(a){function c(d){return d=a(d[0]*O,d[1]*O),d[0]*=
Y,d[1]*=Y,d}return a=rc(a[0]%360*O,a[1]*O,2<a.length?a[2]*O:0),c.invert=function(c){return c=a.invert(c[0]*O,c[1]*O),c[0]*=Y,c[1]*=Y,c},c};m.geo.circle=function(){function a(){var c="function"==typeof e?e.apply(this,arguments):e,f=rc(-c[0]*O,-c[1]*O,0).invert,g=[];return d(null,null,1,{point:function(a,c){g.push(a=f(a,c));a[0]*=Y;a[1]*=Y}}),{type:"Polygon",coordinates:[g]}}var c,d,e=[0,0],f=6;return a.origin=function(c){return arguments.length?(e=c,a):e},a.angle=function(e){return arguments.length?
(d=pc((c=+e)*O,f*O),a):c},a.precision=function(e){return arguments.length?(d=pc(c*O,(f=+e)*O),a):f},a.angle(90)};m.geo.distance=function(a,c){var d,e=(c[0]-a[0])*O,f=a[1]*O,g=c[1]*O,l=Math.sin(e),e=Math.cos(e),q=Math.sin(f),f=Math.cos(f),m=Math.sin(g),g=Math.cos(g);return Math.atan2(Math.sqrt((d=g*l)*d+(d=f*m-q*g*e)*d),q*m+f*g*e)};m.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:c()}}function c(){return m.range(Math.ceil(g/C)*C,f,C).map(x).concat(m.range(Math.ceil(p/
B)*B,y,B).map(s)).concat(m.range(Math.ceil(e/L)*L,d,L).filter(function(a){return Math.abs(a%C)>P}).map(D)).concat(m.range(Math.ceil(q/J)*J,l,J).filter(function(a){return Math.abs(a%B)>P}).map(A))}var d,e,f,g,l,q,y,p,D,A,x,s,L=10,J=L,C=90,B=360,N=2.5;return a.lines=function(){return c().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[x(g).concat(s(y).slice(1),x(f).reverse().slice(1),s(p).reverse().slice(1))]}},a.extent=function(c){return arguments.length?
a.majorExtent(c).minorExtent(c):a.minorExtent()},a.majorExtent=function(c){return arguments.length?(g=+c[0][0],f=+c[1][0],p=+c[0][1],y=+c[1][1],g>f&&(c=g,g=f,f=c),p>y&&(c=p,p=y,y=c),a.precision(N)):[[g,p],[f,y]]},a.minorExtent=function(c){return arguments.length?(e=+c[0][0],d=+c[1][0],q=+c[0][1],l=+c[1][1],e>d&&(c=e,e=d,d=c),q>l&&(c=q,q=l,l=c),a.precision(N)):[[e,q],[d,l]]},a.step=function(c){return arguments.length?a.majorStep(c).minorStep(c):a.minorStep()},a.majorStep=function(c){return arguments.length?
(C=+c[0],B=+c[1],a):[C,B]},a.minorStep=function(c){return arguments.length?(L=+c[0],J=+c[1],a):[L,J]},a.precision=function(c){return arguments.length?(N=+c,D=Md(q,l,90),A=Nd(e,d,N),x=Md(p,y,90),s=Nd(g,f,N),a):N},a.majorExtent([[-180,-90+P],[180,90-P]]).minorExtent([[-180,-80-P],[180,80+P]])};m.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[c||e.apply(this,arguments),d||f.apply(this,arguments)]}}var c,d,e=sc,f=tc;return a.distance=function(){return m.geo.distance(c||e.apply(this,
arguments),d||f.apply(this,arguments))},a.source=function(d){return arguments.length?(e=d,c="function"==typeof d?null:d,a):e},a.target=function(c){return arguments.length?(f=c,d="function"==typeof c?null:c,a):f},a.precision=function(){return arguments.length?a:0},a};m.geo.interpolate=function(a,c){return Ff(a[0]*O,a[1]*O,c[0]*O,c[1]*O)};m.geo.length=function(a){return Rb=0,m.geo.stream(a,Xa),Rb};var Rb,Xa={sphere:ca,point:ca,lineStart:function(){function a(f,g){var n=Math.sin(g*=O),l=Math.cos(g),
m=Math.abs((f*=O)-c),p=Math.cos(m);Rb+=Math.atan2(Math.sqrt((m=l*Math.sin(m))*m+(m=e*n-d*l*p)*m),d*n+e*l*p);c=f;d=n;e=l}var c,d,e;Xa.point=function(f,g){c=f*O;d=Math.sin(g*=O);e=Math.cos(g);Xa.point=a};Xa.lineEnd=function(){Xa.point=Xa.lineEnd=ca}},lineEnd:ca,polygonStart:ca,polygonEnd:ca};(m.geo.conicEqualArea=function(){return uc(Od)}).raw=Od;m.geo.albersUsa=function(){function a(c){var d=c[0],e=c[1];return(50<e?g:-140>d?l:21>e?q:f)(c)}var c,d,e,f=m.geo.conicEqualArea().rotate([98,0]).center([0,
38]).parallels([29.5,45.5]),g=m.geo.conicEqualArea().rotate([160,0]).center([0,60]).parallels([55,65]),l=m.geo.conicEqualArea().rotate([160,0]).center([0,20]).parallels([8,18]),q=m.geo.conicEqualArea().rotate([60,0]).center([0,10]).parallels([8,18]);return a.invert=function(a){return c(a)||d(a)||e(a)||f.invert(a)},a.scale=function(c){return arguments.length?(f.scale(c),g.scale(0.6*c),l.scale(c),q.scale(1.5*c),a.translate(f.translate())):f.scale()},a.translate=function(m){if(!arguments.length)return f.translate();
var p=f.scale(),D=m[0],A=m[1];return f.translate(m),g.translate([D-0.4*p,A+0.17*p]),l.translate([D-0.19*p,A+0.2*p]),q.translate([D+0.58*p,A+0.43*p]),c=vc(g,[[-180,50],[-130,72]]),d=vc(l,[[-164,18],[-154,24]]),e=vc(q,[[-67.5,17.5],[-65,19]]),a},a.scale(1E3)};var Sb,yb,Fa={point:ca,lineStart:ca,lineEnd:ca,polygonStart:function(){yb=0;Fa.lineStart=Gf},polygonEnd:function(){Fa.lineStart=Fa.lineEnd=Fa.point=ca;Sb+=Math.abs(yb/2)}},sa={point:wc,lineStart:Qd,lineEnd:Rd,polygonStart:function(){sa.lineStart=
If},polygonEnd:function(){sa.point=wc;sa.lineStart=Qd;sa.lineEnd=Rd}};m.geo.path=function(){function a(c){return c&&m.geo.stream(c,e(f.pointRadius("function"==typeof g?+g.apply(this,arguments):g))),f.result()}var c,d,e,f,g=4.5;return a.area=function(a){return Sb=0,m.geo.stream(a,e(Fa)),Sb},a.centroid=function(a){return fa=aa=ba=Z=0,m.geo.stream(a,e(sa)),Z?[aa/Z,ba/Z]:void 0},a.bounds=function(a){return xd(e)(a)},a.projection=function(d){return arguments.length?(e=(c=d)?d.stream||Kf(d):na,a):c},a.context=
function(c){return arguments.length?(f=null==(d=c)?new Hf:new Jf(c),a):d},a.pointRadius=function(c){return arguments.length?(g="function"==typeof c?c:+c,a):g},a.projection(m.geo.albersUsa()).context(null)};m.geo.albers=function(){return m.geo.conicEqualArea().parallels([29.5,45.5]).rotate([98,0]).center([0,38]).scale(1E3)};var $e=bb(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(m.geo.azimuthalEqualArea=function(){return Ea($e)}).raw=$e;var af=bb(function(a){return(a=
Math.acos(a))&&a/Math.sin(a)},na);(m.geo.azimuthalEquidistant=function(){return Ea(af)}).raw=af;(m.geo.conicConformal=function(){return uc(Sd)}).raw=Sd;(m.geo.conicEquidistant=function(){return uc(Td)}).raw=Td;var bf=bb(function(a){return 1/a},Math.atan);(m.geo.gnomonic=function(){return Ea(bf)}).raw=bf;zb.invert=function(a,c){return[a,2*Math.atan(Math.exp(c))-F/2]};(m.geo.mercator=function(){return Ud(zb)}).raw=zb;var cf=bb(function(){return 1},Math.asin);(m.geo.orthographic=function(){return Ea(cf)}).raw=
cf;var df=bb(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(m.geo.stereographic=function(){return Ea(df)}).raw=df;xc.invert=function(a,c){var d=Math.atan2((Math.exp(a)-Math.exp(-a))/2,Math.cos(c)),e;e=Math.sin(c)/((Math.exp(a)+Math.exp(-a))/2);e=1<e?F/2:-1>e?-F/2:Math.asin(e);return[d,e]};(m.geo.transverseMercator=function(){return Ud(xc)}).raw=xc;m.geom={};m.svg={};m.svg.line=function(){return Vd(na)};var yc=m.map({linear:pa,"linear-closed":function(a){return pa(a)+"Z"},"step-before":zc,
"step-after":Ac,basis:Wd,"basis-open":function(a){if(4>a.length)return pa(a);for(var c,d=[],e=-1,f=a.length,g=[0],l=[0];3>++e;)c=a[e],g.push(c[0]),l.push(c[1]);d.push(ua(Ua,g)+","+ua(Ua,l));for(--e;++e<f;)c=a[e],g.shift(),g.push(c[0]),l.shift(),l.push(c[1]),cb(d,g,l);return d.join("")},"basis-closed":function(a){for(var c,d,e=-1,f=a.length,g=f+4,l=[],q=[];4>++e;)d=a[e%f],l.push(d[0]),q.push(d[1]);c=[ua(Ua,l),",",ua(Ua,q)];for(--e;++e<g;)d=a[e%f],l.shift(),l.push(d[0]),q.shift(),q.push(d[1]),cb(c,
l,q);return c.join("")},bundle:function(a,c){var d=a.length-1;if(d)for(var e,f,g=a[0][0],l=a[0][1],q=a[d][0]-g,m=a[d][1]-l,p=-1;++p<=d;)e=a[p],f=p/d,e[0]=c*e[0]+(1-c)*(g+f*q),e[1]=c*e[1]+(1-c)*(l+f*m);return Wd(a)},cardinal:function(a,c){return 3>a.length?pa(a):a[0]+Ab(a,Bc(a,c))},"cardinal-open":function(a,c){return 4>a.length?pa(a):a[1]+Ab(a.slice(1,a.length-1),Bc(a,c))},"cardinal-closed":function(a,c){return 3>a.length?pa(a):a[0]+Ab((a.push(a[0]),a),Bc([a[a.length-2]].concat(a,[a[1]]),c))},monotone:function(a){if(3>
a.length)a=pa(a);else{var c=a[0],d,e,f,g,l=[],q;d=0;q=a.length-1;for(var m=[],p=a[1],D=m[0]=Cc(a[0],p);++d<q;)m[d]=(D+(D=Cc(p,p=a[d+1])))/2;q=(m[d]=D,m);m=-1;for(p=a.length-1;++m<p;)d=Cc(a[m],a[m+1]),1E-6>Math.abs(d)?q[m]=q[m+1]=0:(e=q[m]/d,f=q[m+1]/d,g=e*e+f*f,9<g&&(g=3*d/Math.sqrt(g),q[m]=g*e,q[m+1]=g*f));for(m=-1;++m<=p;)g=(a[Math.min(p,m+1)][0]-a[Math.max(0,m-1)][0])/(6*(1+q[m]*q[m])),l.push([g||0,q[m]*g||0]);a=c+Ab(a,l)}return a}});yc.forEach(function(a,c){c.key=a;c.closed=/-closed$/.test(a)});
var Xd=[0,2/3,1/3,0],Yd=[0,1/3,2/3,0],Ua=[0,1/6,2/3,1/6];m.geom.hull=function(a){function c(a){if(3>a.length)return[];var f,g,l,n,m,z,p,x,s,L;x=V(d);s=V(e);L=a.length;var J=L-1,C=[],B=[],N=0;if(x===ta&&e===xa)f=a;else{l=0;for(f=[];L>l;++l)f.push([+x.call(this,g=a[l],l),+s.call(this,g,l)])}for(l=1;L>l;++l)f[l][1]<f[N][1]?N=l:f[l][1]==f[N][1]&&(N=f[l][0]<f[N][0]?l:N);for(l=0;L>l;++l)l!==N&&(m=f[l][1]-f[N][1],n=f[l][0]-f[N][0],C.push({angle:Math.atan2(m,n),index:l}));C.sort(function(a,c){return a.angle-
c.angle});L=C[0].angle;s=C[0].index;x=0;for(l=1;J>l;++l)g=C[l].index,L==C[l].angle?(n=f[s][0]-f[N][0],m=f[s][1]-f[N][1],z=f[g][0]-f[N][0],p=f[g][1]-f[N][1],n*n+m*m>=z*z+p*p?C[l].index=-1:(C[x].index=-1,L=C[l].angle,x=l,s=g)):(L=C[l].angle,x=l,s=g);B.push(N);for(g=l=0;2>l;++g)-1!==C[g].index&&(B.push(C[g].index),l++);for(n=B.length;J>g;++g)if(-1!==C[g].index){for(;!Lf(B[n-2],B[n-1],C[g].index,f);)--n;B[n++]=C[g].index}f=[];for(l=0;n>l;++l)f.push(a[B[l]]);return f}var d=ta,e=xa;return arguments.length?
c(a):(c.x=function(a){return arguments.length?(d=a,c):d},c.y=function(a){return arguments.length?(e=a,c):e},c)};m.geom.polygon=function(a){return a.area=function(){for(var c=0,d=a.length,e=a[d-1][1]*a[0][0]-a[d-1][0]*a[0][1];++c<d;)e+=a[c-1][1]*a[c][0]-a[c-1][0]*a[c][1];return 0.5*e},a.centroid=function(c){var d,e,f=-1,g=a.length,l=0,m=0,y=a[g-1];for(arguments.length||(c=-1/(6*a.area()));++f<g;)d=y,y=a[f],e=d[0]*y[1]-y[0]*d[1],l+=(d[0]+y[0])*e,m+=(d[1]+y[1])*e;return[l*c,m*c]},a.clip=function(c){for(var d,
e,f,g,l,m,y=-1,p=a.length,D=a[p-1];++y<p;){d=c.slice();c.length=0;g=a[y];l=d[(f=d.length)-1];for(e=-1;++e<f;)m=d[e],Dc(m,D,g)?(Dc(l,D,g)||c.push(Zd(l,m,D,g)),c.push(m)):Dc(l,D,g)&&c.push(Zd(l,m,D,g)),l=m;D=g}return c},a};m.geom.delaunay=function(a){var c=a.map(function(){return[]}),d=[];return Ec(a,function(d){c[d.region.l.index].push(a[d.region.r.index])}),c.forEach(function(c,e){var f=a[e],g=f[0],l=f[1];c.forEach(function(a){a.angle=Math.atan2(a[0]-g,a[1]-l)});c.sort(function(a,c){return a.angle-
c.angle});for(var m=0,z=c.length-1;z>m;m++)d.push([f,c[m],c[m+1]])}),d};m.geom.voronoi=function(a){function c(a){var e,l,n,z=a.map(function(){return[]}),p=V(f),x=V(g),s=a.length;if(p===ta&&x===xa)e=a;else{e=[];for(n=0;s>n;++n)e.push([+p.call(this,l=a[n],n),+x.call(this,l,n)])}if(Ec(e,function(a){var c,d,e,f,g,l;1===a.a&&0<=a.b?(c=a.ep.r,d=a.ep.l):(c=a.ep.l,d=a.ep.r);1===a.a?(g=c?c.y:-1E6,e=a.c-a.b*g,l=d?d.y:1E6,f=a.c-a.b*l):(e=c?c.x:-1E6,g=a.c-a.a*e,f=d?d.x:1E6,l=a.c-a.a*f);c=[e,g];f=[f,l];z[a.region.l.index].push(c,
f);z[a.region.r.index].push(c,f)}),z=z.map(function(a,c){var d=e[c][0],f=e[c][1],g=a.map(function(a){return Math.atan2(a[0]-d,a[1]-f)}),l=m.range(a.length).sort(function(a,c){return g[a]-g[c]});return l.filter(function(a,c){return!c||g[a]-g[l[c-1]]>P}).map(function(c){return a[c]})}),z.forEach(function(a,c){var d=a.length;if(!d)return a.push([-1E6,-1E6],[-1E6,1E6],[1E6,1E6],[1E6,-1E6]);if(!(2<d)){var f=e[c],g=a[0],l=a[1],d=f[0],f=f[1],n=g[0],g=g[1],m=l[0],r=l[1],z=Math.abs(m-n),l=r-g;Math.abs(l)<
P?(d=g>f?-1E6:1E6,a.push([-1E6,d],[1E6,d])):P>z?(d=n>d?-1E6:1E6,a.push([d,-1E6],[d,1E6])):(d=(n-d)*(r-g)>(m-n)*(g-f)?1E6:-1E6,f=Math.abs(l)-z,Math.abs(f)<P?a.push([0>l?d:-d,d]):(0<f&&(d*=-1),a.push([-1E6,d],[1E6,d])))}}),d)for(n=0;s>n;++n)d(z[n]);for(n=0;s>n;++n)z[n].point=a[n];return z}var d,e=null,f=ta,g=xa;return arguments.length?c(a):(c.x=function(a){return arguments.length?(f=a,c):f},c.y=function(a){return arguments.length?(g=a,c):g},c.size=function(a){return arguments.length?(null==a?d=null:
(e=[+a[0],+a[1]],d=m.geom.polygon([[0,0],[0,e[1]],e,[e[0],0]]).clip),c):e},c.links=function(a){var c,d,e,l=a.map(function(){return[]}),n=[],m=V(f),r=V(g),z=a.length;if(m===ta&&r===xa)c=a;else for(e=0;z>e;++e)c.push([+m.call(this,d=a[e],e),+r.call(this,d,e)]);return Ec(c,function(c){var d=c.region.l.index;c=c.region.r.index;l[d][c]||(l[d][c]=l[c][d]=!0,n.push({source:a[d],target:a[c]}))}),n},c.triangles=function(a){if(f===ta&&g===xa)return m.geom.delaunay(a);var c,d,e,l,n,r=V(f),z=V(g);l=0;c=[];for(n=
a.length;n>l;++l)d=[+r.call(this,e=a[l],l),+z.call(this,e,l)],d.data=e,c.push(d);return m.geom.delaunay(c).map(function(a){return a.map(function(a){return a.data})})},c)};var Fc={l:"r",r:"l"};m.geom.quadtree=function(a,c,d,e,f){function g(a){function n(a,c,d,e,f,g,l,m){if(!isNaN(d)&&!isNaN(e))if(a.leaf){var r=a.x,q=a.y;if(null!=r){if(!(0.01>Math.abs(r-d)+Math.abs(q-e))){var z=a.point;a.x=a.y=a.point=null;p(a,z,r,q,f,g,l,m)}p(a,c,d,e,f,g,l,m)}else a.x=d,a.y=e,a.point=c}else p(a,c,d,e,f,g,l,m)}function p(a,
c,d,e,f,g,l,m){var r=0.5*(f+l),q=0.5*(g+m),z=d>=r,y=e>=q,H=(y<<1)+z;a.leaf=!1;a=a.nodes[H]||(a.nodes[H]=$d());z?f=r:l=r;y?g=q:m=q;n(a,c,d,e,f,g,l,m)}var x,s,T,t,C,B,N,R,v,u=V(m),E=V(y);if(null!=c)B=c,N=d,R=e,v=f;else if(R=v=-(B=N=1/0),s=[],T=[],C=a.length,l)for(t=0;C>t;++t)x=a[t],x.x<B&&(B=x.x),x.y<N&&(N=x.y),x.x>R&&(R=x.x),x.y>v&&(v=x.y),s.push(x.x),T.push(x.y);else for(t=0;C>t;++t){var F=+u(x=a[t],t);x=+E(x,t);B>F&&(B=F);N>x&&(N=x);F>R&&(R=F);x>v&&(v=x);s.push(F);T.push(x)}F=R-B;x=v-N;F>x?v=N+F:
R=B+x;var G=$d();if(G.add=function(a){n(G,a,+u(a,++t),+E(a,t),B,N,R,v)},G.visit=function(a){db(a,G,B,N,R,v)},t=-1,null==c){for(;++t<C;)n(G,a[t],s[t],T[t],B,N,R,v);--t}else a.forEach(G.add);return s=T=a=x=null,G}var l,m=ta,y=xa;return(l=arguments.length)?(m=Mf,y=Nf,3===l&&(f=d,e=c,d=c=0),g(a)):(g.x=function(a){return arguments.length?(m=a,g):m},g.y=function(a){return arguments.length?(y=a,g):y},g.size=function(a){return arguments.length?(null==a?c=d=e=f=null:(c=d=0,e=+a[0],f=+a[1]),g):null==c?null:
[e,f]},g)};m.interpolateRgb=Gc;m.transform=function(a){var c=ka.createElementNS(m.ns.prefix.svg,"g");return(m.transform=function(a){c.setAttribute("transform",a);a=c.transform.baseVal.consolidate();return new ae(a?a.matrix:Xg)})(a)};ae.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Xg={a:1,b:0,c:0,d:1,e:0,f:0};m.interpolateNumber=ya;m.interpolateTransform=Bb;m.interpolateObject=ce;m.interpolateString=de;var Cb=
/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;m.interpolate=Ia;m.interpolators=[function(a,c){var d=typeof c;return("string"===d||d!==typeof a?mb.has(c)||/^(#|rgb\(|hsl\()/.test(c)?Gc:de:c instanceof Ma?Gc:"object"===d?Array.isArray(c)?ee:ce:ya)(a,c)}];m.interpolateArray=ee;var ef=function(){return na},Yg=m.map({linear:ef,poly:function(a){return function(c){return Math.pow(c,a)}},quad:function(){return Pf},cubic:function(){return Qf},sin:function(){return Rf},exp:function(){return Sf},circle:function(){return Tf},
elastic:function(a,c){var d;return 2>arguments.length&&(c=0.45),arguments.length?d=c/(2*F)*Math.asin(1/a):(a=1,d=c/4),function(e){return 1+a*Math.pow(2,10*-e)*Math.sin(2*(e-d)*F/c)}},back:function(a){return a||(a=1.70158),function(c){return c*c*((a+1)*c-a)}},bounce:function(){return Uf}}),Zg=m.map({"in":na,out:fe,"in-out":ge,"out-in":function(a){return ge(fe(a))}});m.ease=function(a){var c=a.indexOf("-"),d=0<=c?a.substring(0,c):a,c=0<=c?a.substring(c+1):"in";return d=Yg.get(d)||ef,c=Zg.get(c)||na,
Of(c(d.apply(null,Array.prototype.slice.call(arguments,1))))};m.interpolateHcl=function(a,c){a=m.hcl(a);c=m.hcl(c);var d=a.h,e=a.c,f=a.l,g=c.h-d,l=c.c-e,q=c.l-f;return 180<g?g-=360:-180>g&&(g+=360),function(a){return $b(d+g*a,e+l*a,f+q*a)+""}};m.interpolateHsl=function(a,c){a=m.hsl(a);c=m.hsl(c);var d=a.h,e=a.s,f=a.l,g=c.h-d,l=c.s-e,q=c.l-f;return 180<g?g-=360:-180>g&&(g+=360),function(a){return jb(d+g*a,e+l*a,f+q*a)+""}};m.interpolateLab=function(a,c){a=m.lab(a);c=m.lab(c);var d=a.l,e=a.a,f=a.b,
g=c.l-d,l=c.a-e,q=c.b-f;return function(a){return md(d+g*a,e+l*a,f+q*a)+""}};m.interpolateRound=he;m.layout={};m.layout.bundle=function(){return function(a){for(var c=[],d=-1,e=a.length;++d<e;)c.push(Xf(a[d]));return c}};m.layout.chord=function(){function a(){var n,x,s,t,v,C={},B=[],N=m.range(g),R=[];d=[];e=[];n=0;for(t=-1;++t<g;){x=0;for(v=-1;++v<g;)x+=f[t][v];B.push(x);R.push(m.range(g));n+=x}l&&N.sort(function(a,c){return l(B[a],B[c])});q&&R.forEach(function(a,c){a.sort(function(a,d){return q(f[c][a],
f[c][d])})});n=(2*F-D*g)/n;x=0;for(t=-1;++t<g;){s=x;for(v=-1;++v<g;){var u=N[t],X=R[u][v],E=f[u][X],G=x,I=x+=E*n;C[u+"-"+X]={index:u,subindex:X,startAngle:G,endAngle:I,value:E}}e[u]={index:u,startAngle:s,endAngle:x,value:(x-s)/n};x+=D}for(t=-1;++t<g;)for(v=t-1;++v<g;)n=C[t+"-"+v],x=C[v+"-"+t],(n.value||x.value)&&d.push(n.value<x.value?{source:x,target:n}:{source:n,target:x});p&&c()}function c(){d.sort(function(a,c){return p((a.source.value+a.target.value)/2,(c.source.value+c.target.value)/2)})}var d,
e,f,g,l,q,p,s={},D=0;return s.matrix=function(a){return arguments.length?(g=(f=a)&&f.length,d=e=null,s):f},s.padding=function(a){return arguments.length?(D=a,d=e=null,s):D},s.sortGroups=function(a){return arguments.length?(l=a,d=e=null,s):l},s.sortSubgroups=function(a){return arguments.length?(q=a,d=null,s):q},s.sortChords=function(a){return arguments.length?(p=a,d&&c(),s):p},s.chords=function(){return d||a(),d},s.groups=function(){return e||a(),e},s};m.layout.force=function(){function a(c){return function(a,
d,e,f){if(a.point!==c){e=a.cx-c.x;var g=a.cy-c.y,l=1/Math.sqrt(e*e+g*g);if(u>(f-d)*l)return d=a.charge*l*l,c.px-=e*d,c.py-=g*d,!0;a.point&&isFinite(l)&&(d=a.pointCharge*l*l,c.px-=e*d,c.py-=g*d)}return!a.charge}}function c(a){a.px=m.event.x;a.py=m.event.y;q.resume()}var d,e,f,g,l,q={},p=m.dispatch("start","tick","end"),s=[1,1],D=0.9,t=$g,x=ah,v=-30,L=0.1,u=0.8,C=[],B=[];return q.tick=function(){if(0.005>(e*=0.99))return p.end({type:"end",alpha:e=0}),!0;var c,d,r,q,z,x,t,A,u=C.length,J=B.length;for(d=
0;J>d;++d)r=B[d],c=r.source,q=r.target,t=q.x-c.x,A=q.y-c.y,(z=t*t+A*A)&&(z=e*g[d]*((z=Math.sqrt(z))-f[d])/z,t*=z,A*=z,q.x-=t*(x=c.weight/(q.weight+c.weight)),q.y-=A*x,c.x+=t*(x=1-x),c.y+=A*x);if((x=e*L)&&(t=s[0]/2,A=s[1]/2,d=-1,x))for(;++d<u;)r=C[d],r.x+=(t-r.x)*x,r.y+=(A-r.y)*x;if(v){je(c=m.geom.quadtree(C),e,l);for(d=-1;++d<u;)(r=C[d]).fixed||c.visit(a(r))}for(d=-1;++d<u;)r=C[d],r.fixed?(r.x=r.px,r.y=r.py):(r.x-=(r.px-(r.px=r.x))*D,r.y-=(r.py-(r.py=r.y))*D);p.tick({type:"tick",alpha:e})},q.nodes=
function(a){return arguments.length?(C=a,q):C},q.links=function(a){return arguments.length?(B=a,q):B},q.size=function(a){return arguments.length?(s=a,q):s},q.linkDistance=function(a){return arguments.length?(t="function"==typeof a?a:+a,q):t},q.distance=q.linkDistance,q.linkStrength=function(a){return arguments.length?(x="function"==typeof a?a:+a,q):x},q.friction=function(a){return arguments.length?(D=+a,q):D},q.charge=function(a){return arguments.length?(v="function"==typeof a?a:+a,q):v},q.gravity=
function(a){return arguments.length?(L=+a,q):L},q.theta=function(a){return arguments.length?(u=+a,q):u},q.alpha=function(a){return arguments.length?(a=+a,e?e=0<a?a:0:0<a&&(p.start({type:"start",alpha:e=a}),m.timer(q.tick)),q):e},q.start=function(){function a(f,g){var l,n;if(!e){e=[];for(d=0;m>d;++d)e[d]=[];for(d=0;r>d;++d)l=B[d],e[l.source.index].push(l.target),e[l.target.index].push(l.source)}n=e[c];for(var q=-1,z=n.length;++q<z;)if(!isNaN(l=n[q][f]))return l;return Math.random()*g}var c,d,e,n,m=
C.length,r=B.length,z=s[0],p=s[1];for(c=0;m>c;++c)(n=C[c]).index=c,n.weight=0;for(c=0;r>c;++c)n=B[c],"number"==typeof n.source&&(n.source=C[n.source]),"number"==typeof n.target&&(n.target=C[n.target]),++n.source.weight,++n.target.weight;for(c=0;m>c;++c)n=C[c],isNaN(n.x)&&(n.x=a("x",z)),isNaN(n.y)&&(n.y=a("y",p)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);if(f=[],"function"==typeof t)for(c=0;r>c;++c)f[c]=+t.call(this,B[c],c);else for(c=0;r>c;++c)f[c]=t;if(g=[],"function"==typeof x)for(c=0;r>c;++c)g[c]=
+x.call(this,B[c],c);else for(c=0;r>c;++c)g[c]=x;if(l=[],"function"==typeof v)for(c=0;m>c;++c)l[c]=+v.call(this,C[c],c);else for(c=0;m>c;++c)l[c]=v;return q.resume()},q.resume=function(){return q.alpha(0.1)},q.stop=function(){return q.alpha(0)},q.drag=function(){return d||(d=m.behavior.drag().origin(na).on("dragstart.force",Yf).on("drag.force",c).on("dragend.force",Zf)),arguments.length?(this.on("mouseover.force",$f).on("mouseout.force",ag).call(d),void 0):d},m.rebind(q,p,"on")};var $g=20,ah=1;m.layout.hierarchy=
function(){function a(c,l,m){var z=f.call(d,c,l);if(c.depth=l,m.push(c),z&&(p=z.length)){for(var p,s=-1,x=c.children=[],t=0,v=l+1;++s<p;)l=a(z[s],v,m),l.parent=c,x.push(l),t+=l.value;e&&x.sort(e);g&&(c.value=t)}else g&&(c.value=+g.call(d,c,l)||0);return c}function c(a,e){var f=a.children,l=0;if(f&&(n=f.length))for(var n,m=-1,p=e+1;++m<n;)l+=c(f[m],p);else g&&(l=+g.call(d,a,e)||0);return g&&(a.value=l),l}function d(c){var e=[];return a(c,0,e),e}var e=eg,f=cg,g=dg;return d.sort=function(a){return arguments.length?
(e=a,d):e},d.children=function(a){return arguments.length?(f=a,d):f},d.value=function(a){return arguments.length?(g=a,d):g},d.revalue=function(a){return c(a,0),a},d};m.layout.partition=function(){function a(c,d,e,f){var g=c.children;if(c.x=d,c.y=c.depth*f,c.dx=e,c.dy=f,g&&(l=g.length)){var l,m,r=-1;for(e=c.value?e/c.value:0;++r<l;)a(m=g[r],d,c=m.value*e,f),d+=c}}function c(a){a=a.children;var d=0;if(a&&(e=a.length))for(var e,f=-1;++f<e;)d=Math.max(d,c(a[f]));return 1+d}function d(g,l){var m=e.call(this,
g,l);return a(m[0],0,f[0],f[1]/c(m[0])),m}var e=m.layout.hierarchy(),f=[1,1];return d.size=function(a){return arguments.length?(f=a,d):f},eb(d,e)};m.layout.pie=function(){function a(g){var l=g.map(function(d,e){return+c.call(a,d,e)}),q=+("function"==typeof e?e.apply(this,arguments):e),p=(("function"==typeof f?f.apply(this,arguments):f)-q)/m.sum(l),s=m.range(g.length);null!=d&&s.sort(d===ff?function(a,c){return l[c]-l[a]}:function(a,c){return d(g[a],g[c])});var t=[];return s.forEach(function(a){var c;
t[a]={data:g[a],value:c=l[a],startAngle:q,endAngle:q+=c*p}}),t}var c=Number,d=ff,e=0,f=2*F;return a.value=function(d){return arguments.length?(c=d,a):c},a.sort=function(c){return arguments.length?(d=c,a):d},a.startAngle=function(c){return arguments.length?(e=c,a):e},a.endAngle=function(c){return arguments.length?(f=c,a):f},a};var ff={};m.layout.stack=function(){function a(q,p){var s=q.map(function(d,e){return c.call(a,d,e)}),t=s.map(function(c){return c.map(function(c,d){return[g.call(a,c,d),l.call(a,
c,d)]})}),A=d.call(a,t,p),s=m.permute(s,A),t=m.permute(t,A),x,v,L=e.call(a,t,p),u=s.length,C=s[0].length;for(x=0;C>x;++x){f.call(a,s[0][x],v=L[x],t[0][x][1]);for(A=1;u>A;++A)f.call(a,s[A][x],v+=t[A-1][x][1],t[A][x][1])}return q}var c=na,d=Hc,e=Ic,f=hg,g=fg,l=gg;return a.values=function(d){return arguments.length?(c=d,a):c},a.order=function(c){return arguments.length?(d="function"==typeof c?c:bh.get(c)||Hc,a):d},a.offset=function(c){return arguments.length?(e="function"==typeof c?c:ch.get(c)||Ic,a):
e},a.x=function(c){return arguments.length?(g=c,a):g},a.y=function(c){return arguments.length?(l=c,a):l},a.out=function(c){return arguments.length?(f=c,a):f},a};var bh=m.map({"inside-out":function(a){var c,d=a.length,e=a.map(ig),f=a.map(jg),g=m.range(d).sort(function(a,c){return e[a]-e[c]}),l=0,q=0,p=[],s=[];for(a=0;d>a;++a)c=g[a],q>l?(l+=f[c],p.push(c)):(q+=f[c],s.push(c));return s.reverse().concat(p)},reverse:function(a){return m.range(a.length).reverse()},"default":Hc}),ch=m.map({silhouette:function(a){var c,
d,e,f=a.length,g=a[0].length,l=[],m=0,p=[];for(d=0;g>d;++d){for(e=c=0;f>c;c++)e+=a[c][d][1];e>m&&(m=e);l.push(e)}for(d=0;g>d;++d)p[d]=(m-l[d])/2;return p},wiggle:function(a){var c,d,e,f,g,l,m,p,s,t=a.length,v=a[0],x=v.length,u=[];u[0]=p=s=0;for(d=1;x>d;++d){for(f=c=0;t>c;++c)f+=a[c][d][1];g=c=0;for(m=v[d][0]-v[d-1][0];t>c;++c){e=0;for(l=(a[c][d][1]-a[c][d-1][1])/(2*m);c>e;++e)l+=(a[e][d][1]-a[e][d-1][1])/m;g+=l*a[c][d][1]}u[d]=p-=f?g/f*m:0;s>p&&(s=p)}for(d=0;x>d;++d)u[d]-=s;return u},expand:function(a){var c,
d,e,f=a.length,g=a[0].length,l=1/f,m=[];for(d=0;g>d;++d){for(e=c=0;f>c;c++)e+=a[c][d][1];if(e)for(c=0;f>c;c++)a[c][d][1]/=e;else for(c=0;f>c;c++)a[c][d][1]=l}for(d=0;g>d;++d)m[d]=0;return m},zero:Ic});m.layout.histogram=function(){function a(g,l){var n,p,s=[],t=g.map(d,this),v=e.call(this,t,l),x=f.call(this,v,t,l);l=-1;for(var u=t.length,L=x.length-1,J=c?1:1/u;++l<L;)n=s[l]=[],n.dx=x[l+1]-(n.x=x[l]),n.y=0;if(0<L)for(l=-1;++l<u;)p=t[l],p>=v[0]&&p<=v[1]&&(n=s[m.bisect(x,p,1,L)-1],n.y+=J,n.push(g[l]));
return s}var c=!0,d=Number,e=mg,f=lg;return a.value=function(c){return arguments.length?(d=c,a):d},a.range=function(c){return arguments.length?(e=V(c),a):e},a.bins=function(c){return arguments.length?(f="number"==typeof c?function(a){return ke(a,c)}:V(c),a):f},a.frequency=function(d){return arguments.length?(c=!!d,a):c},a};m.layout.tree=function(){function a(f,g){function l(a,c){var e=a.children,f=a._tree;if(e&&(g=e.length)){for(var g,n,m,q=e[0],z=q,p=-1;++p<g;){m=e[p];l(m,n);var s=m;if(n){for(var y=
void 0,x=s,t=s,M=s.parent.children[0],D=x._tree.mod,v=t._tree.mod,u=n._tree.mod,L=M._tree.mod;n=Kc(n),x=Jc(x),n&&x;){M=Jc(M);t=Kc(t);t._tree.ancestor=s;y=n._tree.prelim+u-x._tree.prelim-D+d(n,x);if(0<y){var A=n._tree.ancestor.parent==s.parent?n._tree.ancestor:z,S=s,T=y,A=A._tree,S=S._tree,J=T/(S.number-A.number);A.change+=J;S.change-=J;S.shift+=T;S.prelim+=T;S.mod+=T;D+=y;v+=y}u+=n._tree.mod;D+=x._tree.mod;L+=M._tree.mod;v+=t._tree.mod}n&&!Kc(t)&&(t._tree.thread=n,t._tree.mod+=u-v);x&&!Jc(M)&&(M._tree.thread=
x,M._tree.mod+=D-L,z=s)}n=m}p=g=0;s=a.children;for(z=s.length;0<=--z;)e=s[z]._tree,e.prelim+=g,e.mod+=g,g+=e.shift+(p+=e.change);m=0.5*(q._tree.prelim+m._tree.prelim);c?(f.prelim=c._tree.prelim+d(a,c),f.mod=f.prelim-m):f.prelim=m}else c&&(f.prelim=c._tree.prelim+d(a,c))}function n(a,c){a.x=a._tree.prelim+c;var d=a.children;if(d&&(e=d.length)){var e,f=-1;for(c+=a._tree.mod;++f<e;)n(d[f],c)}}var m=c.call(this,f,g),p=m[0];za(p,function(a,c){a._tree={ancestor:a,prelim:0,mod:0,change:0,shift:0,number:c?
c._tree.number+1:0}});l(p);n(p,-p._tree.prelim);var s=Db(p,og),t=Db(p,ng),x=Db(p,pg),v=s.x-d(s,t)/2,u=t.x+d(t,s)/2,J=x.depth||1;return za(p,function(a){a.x=(a.x-v)/(u-v)*e[0];a.y=a.depth/J*e[1];delete a._tree}),m}var c=m.layout.hierarchy().sort(null).value(null),d=le,e=[1,1];return a.separation=function(c){return arguments.length?(d=c,a):d},a.size=function(c){return arguments.length?(e=c,a):e},eb(a,c)};m.layout.pack=function(){function a(f,g){var l=c.call(this,f,g),n=l[0];n.x=0;n.y=0;za(n,function(a){a.r=
Math.sqrt(a.value)});za(n,oe);var m=e[0],p=e[1],s=Math.max(2*n.r/m,2*n.r/p);if(0<d){var t=d*s/2;za(n,function(a){a.r+=t});za(n,oe);za(n,function(a){a.r-=t});s=Math.max(2*n.r/m,2*n.r/p)}return qe(n,m/2,p/2,1/s),l}var c=m.layout.hierarchy().sort(qg),d=0,e=[1,1];return a.size=function(c){return arguments.length?(e=c,a):e},a.padding=function(c){return arguments.length?(d=+c,a):d},eb(a,c)};m.layout.cluster=function(){function a(f,g){var l,n=c.call(this,f,g),m=n[0],p=0;za(m,function(a){var c=a.children;
c&&c.length?(a.x=ug(c),a.y=tg(c)):(a.x=l?p+=d(a,l):0,a.y=0,l=a)});var s=re(m),t=se(m),x=s.x-d(s,t)/2,v=t.x+d(t,s)/2;return za(m,function(a){a.x=(a.x-x)/(v-x)*e[0];a.y=(1-(m.y?a.y/m.y:1))*e[1]}),n}var c=m.layout.hierarchy().sort(null).value(null),d=le,e=[1,1];return a.separation=function(c){return arguments.length?(d=c,a):d},a.size=function(c){return arguments.length?(e=c,a):e},eb(a,c)};m.layout.treemap=function(){function a(c,d){for(var e,f,g=-1,l=c.length;++g<l;)f=(e=c[g]).value*(0>d?0:d),e.area=
isNaN(f)||0>=f?0:f}function c(d){var f=d.children;if(f&&f.length){var g,l=t(d),m=[],r=f.slice(),q=1/0,p="slice"===x?l.dx:"dice"===x?l.dy:"slice-dice"===x?d.depth&1?l.dy:l.dx:Math.min(l.dx,l.dy);a(r,l.dx*l.dy/d.value);for(m.area=0;0<(d=r.length);){m.push(d=r[d-1]);m.area+=d.area;var s;if(!(s="squarify"!==x)){d=p;g=void 0;var y=m.area;s=0;for(var v=1/0,M=-1,H=m.length;++M<H;)(g=m[M].area)&&(v>g&&(v=g),g>s&&(s=g));s=(g=(y*=y,d*=d,y?Math.max(d*s*u/y,y/(d*v*u)):1/0))<=q}s?(r.pop(),q=g):(m.area-=m.pop().area,
e(m,p,l,!1),p=Math.min(l.dx,l.dy),m.length=m.area=0,q=1/0)}m.length&&(e(m,p,l,!0),m.length=m.area=0);f.forEach(c)}}function d(c){var f=c.children;if(f&&f.length){var g=t(c),l=f.slice(),m=[];a(l,g.dx*g.dy/c.value);for(m.area=0;c=l.pop();)m.push(c),m.area+=c.area,null!=c.z&&(e(m,c.z?g.dx:g.dy,g,!l.length),m.length=m.area=0);f.forEach(d)}}function e(a,c,d,f){var g,l=-1,n=a.length,m=d.x,r=d.y,p=c?q(a.area/c):0;if(c==d.dx){for((f||p>d.dy)&&(p=d.dy);++l<n;)g=a[l],g.x=m,g.y=r,g.dy=p,m+=g.dx=Math.min(d.x+
d.dx-m,p?q(g.area/p):0);g.z=!0;g.dx+=d.x+d.dx-m;d.y+=p;d.dy-=p}else{for((f||p>d.dx)&&(p=d.dx);++l<n;)g=a[l],g.x=m,g.y=r,g.dx=p,r+=g.dy=Math.min(d.y+d.dy-r,p?q(g.area/p):0);g.z=!1;g.dy+=d.y+d.dy-r;d.x+=p;d.dx-=p}}function f(e){e=g||l(e);var m=e[0];return m.x=0,m.y=0,m.dx=p[0],m.dy=p[1],g&&l.revalue(m),a([m],m.dx*m.dy/m.value),(g?d:c)(m),v&&(g=e),e}var g,l=m.layout.hierarchy(),q=Math.round,p=[1,1],s=null,t=Mc,v=!1,x="squarify",u=0.5*(1+Math.sqrt(5));return f.size=function(a){return arguments.length?
(p=a,f):p},f.padding=function(a){function c(d){var e=a.call(f,d,d.depth);return null==e?Mc(d):te(d,"number"==typeof e?[e,e,e,e]:e)}function d(c){return te(c,a)}if(!arguments.length)return s;var e;return t=null==(s=a)?Mc:"function"==(e=typeof a)?c:"number"===e?(a=[a,a,a,a],d):d,f},f.round=function(a){return arguments.length?(q=a?Math.round:Number,f):q!=Number},f.sticky=function(a){return arguments.length?(v=a,g=null,f):v},f.ratio=function(a){return arguments.length?(u=a,f):u},f.mode=function(a){return arguments.length?
(x=a+"",f):x},eb(f,l)};m.random={normal:function(a,c){var d=arguments.length;return 2>d&&(c=1),1>d&&(a=0),function(){var d,e;do d=2*Math.random()-1,e=2*Math.random()-1,e=d*d+e*e;while(!e||1<e);return a+c*d*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var a=m.random.normal.apply(m,arguments);return function(){return Math.exp(a())}},irwinHall:function(a){return function(){for(var c=0,d=0;a>d;d++)c+=Math.random();return c/a}}};m.scale={};m.scale.linear=function(){return ue([0,1],[0,1],Ia,!1)};
m.scale.log=function(){return ze(m.scale.linear().domain([0,Math.LN10]),10,Ae,Be)};var zg=m.format(".0e");m.scale.pow=function(){return Ce(m.scale.linear(),1)};m.scale.sqrt=function(){return m.scale.pow().exponent(0.5)};m.scale.ordinal=function(){return De([],{t:"range",a:[[]]})};m.scale.category10=function(){return m.scale.ordinal().range(dh)};m.scale.category20=function(){return m.scale.ordinal().range(eh)};m.scale.category20b=function(){return m.scale.ordinal().range(fh)};m.scale.category20c=function(){return m.scale.ordinal().range(gh)};
var dh="#1f77b4 #ff7f0e #2ca02c #d62728 #9467bd #8c564b #e377c2 #7f7f7f #bcbd22 #17becf".split(" "),eh="#1f77b4 #aec7e8 #ff7f0e #ffbb78 #2ca02c #98df8a #d62728 #ff9896 #9467bd #c5b0d5 #8c564b #c49c94 #e377c2 #f7b6d2 #7f7f7f #c7c7c7 #bcbd22 #dbdb8d #17becf #9edae5".split(" "),fh="#393b79 #5254a3 #6b6ecf #9c9ede #637939 #8ca252 #b5cf6b #cedb9c #8c6d31 #bd9e39 #e7ba52 #e7cb94 #843c39 #ad494a #d6616b #e7969c #7b4173 #a55194 #ce6dbd #de9ed6".split(" "),gh="#3182bd #6baed6 #9ecae1 #c6dbef #e6550d #fd8d3c #fdae6b #fdd0a2 #31a354 #74c476 #a1d99b #c7e9c0 #756bb1 #9e9ac8 #bcbddc #dadaeb #636363 #969696 #bdbdbd #d9d9d9".split(" ");
m.scale.quantile=function(){return Ee([],[])};m.scale.quantize=function(){return Fe(0,1,[0,1])};m.scale.threshold=function(){return Ge([0.5],[0,1])};m.scale.identity=function(){return He([0,1])};m.svg.arc=function(){function a(){var g=c.apply(this,arguments),l=d.apply(this,arguments),n=e.apply(this,arguments)+Ja,m=f.apply(this,arguments)+Ja,p=(n>m&&(p=n,n=m,m=p),m-n),s=F>p?"0":"1",t=Math.cos(n),n=Math.sin(n),x=Math.cos(m),m=Math.sin(m);return p>=hh?g?"M0,"+l+"A"+l+","+l+" 0 1,1 0,"+-l+"A"+l+","+l+
" 0 1,1 0,"+l+"M0,"+g+"A"+g+","+g+" 0 1,0 0,"+-g+"A"+g+","+g+" 0 1,0 0,"+g+"Z":"M0,"+l+"A"+l+","+l+" 0 1,1 0,"+-l+"A"+l+","+l+" 0 1,1 0,"+l+"Z":g?"M"+l*t+","+l*n+"A"+l+","+l+" 0 "+s+",1 "+l*x+","+l*m+"L"+g*x+","+g*m+"A"+g+","+g+" 0 "+s+",0 "+g*t+","+g*n+"Z":"M"+l*t+","+l*n+"A"+l+","+l+" 0 "+s+",1 "+l*x+","+l*m+"L0,0Z"}var c=Ag,d=Bg,e=Ie,f=Je;return a.innerRadius=function(d){return arguments.length?(c=V(d),a):c},a.outerRadius=function(c){return arguments.length?(d=V(c),a):d},a.startAngle=function(c){return arguments.length?
(e=V(c),a):e},a.endAngle=function(c){return arguments.length?(f=V(c),a):f},a.centroid=function(){var a=(c.apply(this,arguments)+d.apply(this,arguments))/2,g=(e.apply(this,arguments)+f.apply(this,arguments))/2+Ja;return[Math.cos(g)*a,Math.sin(g)*a]},a};var Ja=-F/2,hh=2*F-1E-6;m.svg.line.radial=function(){var a=Vd(Ke);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a};zc.reverse=Ac;Ac.reverse=zc;m.svg.area=function(){return Le(na)};m.svg.area.radial=function(){var a=Le(Ke);return a.radius=a.x,
delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a};m.svg.chord=function(){function a(f,g){var l=c(this,d,f,g),n=c(this,e,f,g);return"M"+l.p0+("A"+l.r+","+l.r+" 0 "+ +(l.a1-l.a0>F)+",1 "+l.p1)+(l.a0==n.a0&&l.a1==n.a1?"Q 0,0 "+l.p0:"Q 0,0 "+n.p0+("A"+n.r+","+n.r+" 0 "+ +(n.a1-n.a0>F)+",1 "+n.p1)+("Q 0,0 "+l.p0))+"Z"}function c(a,d,e,n){var m=d.call(a,e,n);d=f.call(a,m,n);e=g.call(a,m,n)+Ja;a=l.call(a,
m,n)+Ja;return{r:d,a0:e,a1:a,p0:[d*Math.cos(e),d*Math.sin(e)],p1:[d*Math.cos(a),d*Math.sin(a)]}}var d=sc,e=tc,f=Cg,g=Ie,l=Je;return a.radius=function(c){return arguments.length?(f=V(c),a):f},a.source=function(c){return arguments.length?(d=V(c),a):d},a.target=function(c){return arguments.length?(e=V(c),a):e},a.startAngle=function(c){return arguments.length?(g=V(c),a):g},a.endAngle=function(c){return arguments.length?(l=V(c),a):l},a};m.svg.diagonal=function(){function a(f,g){var l=c.call(this,f,g),
n=d.call(this,f,g),m=(l.y+n.y)/2,l=[l,{x:l.x,y:m},{x:n.x,y:m},n];return l=l.map(e),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var c=sc,d=tc,e=Me;return a.source=function(d){return arguments.length?(c=V(d),a):c},a.target=function(c){return arguments.length?(d=V(c),a):d},a.projection=function(c){return arguments.length?(e=c,a):e},a};m.svg.diagonal.radial=function(){var a=m.svg.diagonal(),c=Me,d=a.projection;return a.projection=function(a){return arguments.length?d(Dg(c=a)):c},a};m.svg.symbol=function(){function a(e,
f){return(gf.get(c.call(this,e,f))||Ne)(d.call(this,e,f))}var c=Fg,d=Eg;return a.type=function(d){return arguments.length?(c=V(d),a):c},a.size=function(c){return arguments.length?(d=V(c),a):d},a};var gf=m.map({circle:Ne,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*hf));var c=a*hf;return"M0,"+-a+"L"+c+",0 0,"+a+" "+-c+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+
-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/Tb);var c=a*Tb/2;return"M0,"+c+"L"+a+","+-c+" "+-a+","+-c+"Z"},"triangle-up":function(a){a=Math.sqrt(a/Tb);var c=a*Tb/2;return"M0,"+-c+"L"+a+","+c+" "+-a+","+c+"Z"}});m.svg.symbolTypes=gf.keys();var ib,Tb=Math.sqrt(3),hf=Math.tan(30*O),da=[],Xe=0,Mb={ease:function(a){if(0>=a)return 0;if(1<=a)return 1;var c=a*a,d=c*a;return 4*(0.5>a?d:3*(a-c)+d-0.75)},delay:0,duration:250};da.call=U.call;da.empty=U.empty;
da.node=U.node;m.transition=function(a){return arguments.length?ib?a.transition():a:hb.transition()};m.transition.prototype=da;da.select=function(a){var c,d,e,f=this.id,g=[];"function"!=typeof a&&(a=G(a));for(var l=-1,m=this.length;++l<m;){g.push(c=[]);for(var p=this[l],s=-1,t=p.length;++s<t;)(e=p[s])&&(d=a.call(e,e.__data__,s))?("__data__"in e&&(d.__data__=e.__data__),Hb(d,s,f,e.__transition__[f]),c.push(d)):c.push(null)}return gb(g,f)};da.selectAll=function(a){var c,d,e,f,g=this.id,l=[];"function"!=
typeof a&&(a=Q(a));for(var m=-1,p=this.length;++m<p;)for(var s=this[m],t=-1,v=s.length;++t<v;)if(c=s[t]){f=c.__transition__[g];d=a.call(c,c.__data__,t);l.push(c=[]);for(var x=-1,u=d.length;++x<u;)Hb(e=d[x],x,g,f),c.push(e)}return gb(l,g)};da.filter=function(a){var c,d,e,f=[];"function"!=typeof a&&(a=ed(a));for(var g=0,l=this.length;l>g;g++){f.push(c=[]);d=this[g];for(var m=0,p=d.length;p>m;m++)(e=d[m])&&a.call(e,e.__data__,m)&&c.push(e)}return gb(f,this.id,this.time).ease(this.ease())};da.tween=function(a,
c){var d=this.id;return 2>arguments.length?this.node().__transition__[d].tween.get(a):Ca(this,null==c?function(c){c.__transition__[d].tween.remove(a)}:function(e){e.__transition__[d].tween.set(a,c)})};da.attr=function(a,c){function d(){this.removeAttribute(g)}function e(){this.removeAttributeNS(g.space,g.local)}if(2>arguments.length){for(c in a)this.attr(c,a[c]);return this}var f="transform"==a?Bb:Ia,g=m.ns.qualify(a);return Qc(this,"attr."+a,c,function(a){function c(){var d,e=this.getAttribute(g);
return e!==a&&(d=f(e,a),function(a){this.setAttribute(g,d(a))})}function l(){var c,d=this.getAttributeNS(g.space,g.local);return d!==a&&(c=f(d,a),function(a){this.setAttributeNS(g.space,g.local,c(a))})}return null==a?g.local?e:d:(a+="",g.local?l:c)})};da.attrTween=function(a,c){function d(a,e){var g=c.call(this,a,e,this.getAttribute(f));return g&&function(a){this.setAttribute(f,g(a))}}function e(a,d){var g=c.call(this,a,d,this.getAttributeNS(f.space,f.local));return g&&function(a){this.setAttributeNS(f.space,
f.local,g(a))}}var f=m.ns.qualify(a);return this.tween("attr."+a,f.local?e:d)};da.style=function(a,c,d){function e(){this.style.removeProperty(a)}var f=arguments.length;if(3>f){if("string"!=typeof a){2>f&&(c="");for(d in a)this.style(d,a[d],c);return this}d=""}var g="transform"==a?Bb:Ia;return Qc(this,"style."+a,c,function(c){function f(){var e,l=ga.getComputedStyle(this,null).getPropertyValue(a);return l!==c&&(e=g(l,c),function(c){this.style.setProperty(a,e(c),d)})}return null==c?e:(c+="",f)})};
da.styleTween=function(a,c,d){return 3>arguments.length&&(d=""),this.tween("style."+a,function(e,f){var g=c.call(this,e,f,ga.getComputedStyle(this,null).getPropertyValue(a));return g&&function(c){this.style.setProperty(a,g(c),d)}})};da.text=function(a){return Qc(this,"text",a,Gg)};da.remove=function(){return this.each("end.transition",function(){var a;!this.__transition__&&(a=this.parentNode)&&a.removeChild(this)})};da.ease=function(a){var c=this.id;return 1>arguments.length?this.node().__transition__[c].ease:
("function"!=typeof a&&(a=m.ease.apply(m,arguments)),Ca(this,function(d){d.__transition__[c].ease=a}))};da.delay=function(a){var c=this.id;return Ca(this,"function"==typeof a?function(d,e,f){d.__transition__[c].delay=a.call(d,d.__data__,e,f)|0}:(a|=0,function(d){d.__transition__[c].delay=a}))};da.duration=function(a){var c=this.id;return Ca(this,"function"==typeof a?function(d,e,f){d.__transition__[c].duration=Math.max(1,a.call(d,d.__data__,e,f)|0)}:(a=Math.max(1,0|a),function(d){d.__transition__[c].duration=
a}))};da.each=function(a,c){var d=this.id;if(2>arguments.length){var e=Mb,f=ib;ib=d;Ca(this,function(c,e,f){Mb=c.__transition__[d];a.call(c,c.__data__,e,f)});Mb=e;ib=f}else Ca(this,function(e){e.__transition__[d].event.on(a,c)});return this};da.transition=function(){for(var a,c,d,e,f=this.id,g=++Xe,l=[],m=0,p=this.length;p>m;m++){l.push(a=[]);c=this[m];for(var s=0,t=c.length;t>s;s++)(d=c[s])&&(e=Object.create(d.__transition__[f]),e.delay+=e.duration,Hb(d,s,g,e)),a.push(d)}return gb(l,g)};m.svg.axis=
function(){function a(n){n.each(function(){var a,n=m.select(this),v=null==s?d.ticks?d.ticks.apply(d,p):d.domain():s,u=null==c?d.tickFormat?d.tickFormat.apply(d,p):String:c,A=Hg(d,v,t),B=n.selectAll(".tick.minor").data(A,String),A=B.enter().insert("line",".tick").attr("class","tick minor").style("opacity",1E-6),E=m.transition(B.exit()).style("opacity",1E-6).remove(),B=m.transition(B).style("opacity",1),F=n.selectAll(".tick.major").data(v,String),v=F.enter().insert("g","path").attr("class","tick major").style("opacity",
1E-6),G=m.transition(F.exit()).style("opacity",1E-6).remove(),I=m.transition(F).style("opacity",1),K=Eb(d),n=n.selectAll(".domain").data([0]),n=(n.enter().append("path").attr("class","domain"),m.transition(n)),O=d.copy(),P=this.__chart__||O;this.__chart__=O;v.append("line");v.append("text");var Q=v.select("line"),V=I.select("line"),u=F.select("text").text(u),F=v.select("text"),U=I.select("text");switch(e){case "bottom":a=Oe;A.attr("y2",g);B.attr("x2",0).attr("y2",g);Q.attr("y2",f);F.attr("y",Math.max(f,
0)+q);V.attr("x2",0).attr("y2",f);U.attr("x",0).attr("y",Math.max(f,0)+q);u.attr("dy",".71em").style("text-anchor","middle");n.attr("d","M"+K[0]+","+l+"V0H"+K[1]+"V"+l);break;case "top":a=Oe;A.attr("y2",-g);B.attr("x2",0).attr("y2",-g);Q.attr("y2",-f);F.attr("y",-(Math.max(f,0)+q));V.attr("x2",0).attr("y2",-f);U.attr("x",0).attr("y",-(Math.max(f,0)+q));u.attr("dy","0em").style("text-anchor","middle");n.attr("d","M"+K[0]+","+-l+"V0H"+K[1]+"V"+-l);break;case "left":a=Pe;A.attr("x2",-g);B.attr("x2",
-g).attr("y2",0);Q.attr("x2",-f);F.attr("x",-(Math.max(f,0)+q));V.attr("x2",-f).attr("y2",0);U.attr("x",-(Math.max(f,0)+q)).attr("y",0);u.attr("dy",".32em").style("text-anchor","end");n.attr("d","M"+-l+","+K[0]+"H0V"+K[1]+"H"+-l);break;case "right":a=Pe,A.attr("x2",g),B.attr("x2",g).attr("y2",0),Q.attr("x2",f),F.attr("x",Math.max(f,0)+q),V.attr("x2",f).attr("y2",0),U.attr("x",Math.max(f,0)+q).attr("y",0),u.attr("dy",".32em").style("text-anchor","start"),n.attr("d","M"+l+","+K[0]+"H0V"+K[1]+"H"+l)}if(d.ticks)v.call(a,
P),I.call(a,O),G.call(a,O),A.call(a,P),B.call(a,O),E.call(a,O);else{var Y=O.rangeBand()/2,A=function(a){return O(a)+Y};v.call(a,A);I.call(a,A)}})}var c,d=m.scale.linear(),e=jf,f=6,g=6,l=6,q=3,p=[10],s=null,t=0;return a.scale=function(c){return arguments.length?(d=c,a):d},a.orient=function(c){return arguments.length?(e=c in ih?c+"":jf,a):e},a.ticks=function(){return arguments.length?(p=arguments,a):p},a.tickValues=function(c){return arguments.length?(s=c,a):s},a.tickFormat=function(d){return arguments.length?
(c=d,a):c},a.tickSize=function(c,d){if(!arguments.length)return f;var e=arguments.length-1;return f=+c,g=1<e?+d:f,l=0<e?+arguments[e]:f,a},a.tickPadding=function(c){return arguments.length?(q=+c,a):q},a.tickSubdivide=function(c){return arguments.length?(t=+c,a):t},a};var jf="bottom",ih={top:1,right:1,bottom:1,left:1};m.svg.brush=function(){function a(g){g.each(function(){var g,l=m.select(this),s=l.selectAll(".background").data([0]),t=l.selectAll(".extent").data([0]),u=l.selectAll(".resize").data(v,
String);l.style("pointer-events","all").on("mousedown.brush",f).on("touchstart.brush",f);s.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");t.enter().append("rect").attr("class","extent").style("cursor","move");u.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return jh[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",
6).attr("height",6).style("visibility","hidden");u.style("display",a.empty()?"none":null);u.exit().remove();q&&(g=Eb(q),s.attr("x",g[0]).attr("width",g[1]-g[0]),d(l));p&&(g=Eb(p),s.attr("y",g[0]).attr("height",g[1]-g[0]),e(l));c(l)})}function c(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+u[+/e$/.test(a)][0]+","+u[+/^s/.test(a)][1]+")"})}function d(a){a.select(".extent").attr("x",u[0][0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",u[1][0]-u[0][0])}function e(a){a.select(".extent").attr("y",
u[0][1]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",u[1][1]-u[0][1])}function f(){function s(){var a=m.event.changedTouches;return a?m.touches(B,a)[0]:m.mouse(B)}function x(){var a=s(),f=!1;C&&(a[0]+=C[0],a[1]+=C[1]);P||(m.event.altKey?(J||(J=[(u[0][0]+u[1][0])/2,(u[0][1]+u[1][1])/2]),Q[0]=u[+(a[0]<J[0])][0],Q[1]=u[+(a[1]<J[1])][1]):J=null);K&&v(a,q,0)&&(d(G),f=!0);O&&v(a,p,1)&&(e(G),f=!0);f&&(c(G),F({type:"brush",mode:P?"move":"resize"}))}function v(a,c,d){var e,f,l=Eb(c);c=l[0];var l=
l[1],m=Q[d],n=u[1][d]-u[0][d];return P&&(c-=m,l-=n+m),e=Math.max(c,Math.min(l,a[d])),P?f=(e+=m)+n:(J&&(m=Math.max(c,Math.min(l,2*J[d]-e))),e>m?(f=e,e=m):f=m),u[0][d]!==e||u[1][d]!==f?(g=null,u[0][d]=e,u[1][d]=f,!0):void 0}function E(){x();G.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);m.select("body").style("cursor",null);V.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",
null);F({type:"brushend"});t()}var J,C,B=this,M=m.select(m.event.target),F=l.of(B,arguments),G=m.select(B),I=M.datum(),K=!/^(n|s)$/.test(I)&&q,O=!/^(e|w)$/.test(I)&&p,P=M.classed("extent"),Q=s(),V=m.select(ga).on("mousemove.brush",x).on("mouseup.brush",E).on("touchmove.brush",x).on("touchend.brush",E).on("keydown.brush",function(){32==m.event.keyCode&&(P||(J=null,Q[0]-=u[1][0],Q[1]-=u[1][1],P=2),t())}).on("keyup.brush",function(){32==m.event.keyCode&&2==P&&(Q[0]+=u[1][0],Q[1]+=u[1][1],P=0,t())});
if(P)Q[0]=u[0][0]-Q[0],Q[1]=u[0][1]-Q[1];else if(I){var U=+/w$/.test(I),I=+/^n/.test(I);C=[u[1-U][0]-Q[0],u[1-I][1]-Q[1]];Q[0]=u[U][0];Q[1]=u[I][1]}else m.event.altKey&&(J=Q.slice());G.style("pointer-events","none").selectAll(".resize").style("display",null);m.select("body").style("cursor",M.style("cursor"));F({type:"brushstart"});x();t()}var g,l=s(a,"brushstart","brush","brushend"),q=null,p=null,v=ad[0],u=[[0,0],[0,0]];return a.x=function(c){return arguments.length?(q=c,v=ad[!q<<1|!p],a):q},a.y=
function(c){return arguments.length?(p=c,v=ad[!q<<1|!p],a):p},a.extent=function(c){var d,e,f,l,m;return arguments.length?(g=[[0,0],[0,0]],q&&(d=c[0],e=c[1],p&&(d=d[0],e=e[0]),g[0][0]=d,g[1][0]=e,q.invert&&(d=q(d),e=q(e)),d>e&&(m=d,d=e,e=m),u[0][0]=0|d,u[1][0]=0|e),p&&(f=c[0],l=c[1],q&&(f=f[1],l=l[1]),g[0][1]=f,g[1][1]=l,p.invert&&(f=p(f),l=p(l)),f>l&&(m=f,f=l,l=m),u[0][1]=0|f,u[1][1]=0|l),a):(c=g||u,q&&(d=c[0][0],e=c[1][0],g||(d=u[0][0],e=u[1][0],q.invert&&(d=q.invert(d),e=q.invert(e)),d>e&&(m=d,
d=e,e=m))),p&&(f=c[0][1],l=c[1][1],g||(f=u[0][1],l=u[1][1],p.invert&&(f=p.invert(f),l=p.invert(l)),f>l&&(m=f,f=l,l=m))),q&&p?[[d,f],[e,l]]:q?[d,e]:p&&[f,l])},a.clear=function(){return g=null,u[0][0]=u[0][1]=u[1][0]=u[1][1]=0,a},a.empty=function(){return q&&u[0][0]===u[1][0]||p&&u[0][1]===u[1][1]},m.rebind(a,l,"on")};var jh={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ad=["n e s w nw ne se sw".split(" "),["e","w"],["n",
"s"],[]];m.time={};var ha=Date;Ka.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},
getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Aa.setUTCDate.apply(this._,arguments)},setDay:function(){Aa.setUTCDay.apply(this._,arguments)},setFullYear:function(){Aa.setUTCFullYear.apply(this._,arguments)},setHours:function(){Aa.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Aa.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Aa.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Aa.setUTCMonth.apply(this._,
arguments)},setSeconds:function(){Aa.setUTCSeconds.apply(this._,arguments)},setTime:function(){Aa.setTime.apply(this._,arguments)}};var Aa=Date.prototype,kf="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),lf="Sun Mon Tue Wed Thu Fri Sat".split(" "),bd="January February March April May June July August September October November December".split(" "),cd="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");m.time.year=La(function(a){return a=m.time.day(a),a.setMonth(0,1),
a},function(a,c){a.setFullYear(a.getFullYear()+c)},function(a){return a.getFullYear()});m.time.years=m.time.year.range;m.time.years.utc=m.time.year.utc.range;m.time.day=La(function(a){var c=new ha(1970,0);return c.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),c},function(a,c){a.setDate(a.getDate()+c)},function(a){return a.getDate()-1});m.time.days=m.time.day.range;m.time.days.utc=m.time.day.utc.range;m.time.dayOfYear=function(a){var c=m.time.year(a);return Math.floor((a-c-6E4*(a.getTimezoneOffset()-
c.getTimezoneOffset()))/864E5)};"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ").forEach(function(a,c){a=a.toLowerCase();c=7-c;var d=m.time[a]=La(function(a){return(a=m.time.day(a)).setDate(a.getDate()-(a.getDay()+c)%7),a},function(a,c){a.setDate(a.getDate()+7*Math.floor(c))},function(a){var d=m.time.year(a).getDay();return Math.floor((m.time.dayOfYear(a)+(d+c)%7)/7)-(d!==c)});m.time[a+"s"]=d.range;m.time[a+"s"].utc=d.utc.range;m.time[a+"OfYear"]=function(a){var d=m.time.year(a).getDay();
return Math.floor((m.time.dayOfYear(a)+(d+c)%7)/7)}});m.time.week=m.time.sunday;m.time.weeks=m.time.sunday.range;m.time.weeks.utc=m.time.sunday.utc.range;m.time.weekOfYear=m.time.sundayOfYear;m.time.format=function(a){function c(e){for(var f,g,l,m=[],p=-1,s=0;++p<d;)37===a.charCodeAt(p)&&(m.push(a.substring(s,p)),null!=(g=kh[f=a.charAt(++p)])&&(f=a.charAt(++p)),(l=Ub[f])&&(f=l(e,null==g?"e"===f?" ":"0":g)),m.push(f),s=p+1);return m.push(a.substring(s,p)),m.join("")}var d=a.length;return c.parse=function(c){var d=
{y:1900,m:0,d:1,H:0,M:0,S:0,L:0};if(Jb(d,a,c,0)!=c.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);c=new ha;return c.setFullYear(d.y,d.m,d.d),c.setHours(d.H,d.M,d.S,d.L),c},c.toString=function(){return a},c};var mf=Kb(kf),nf=Kb(lf),of=Kb(bd),lh=Qe(bd),pf=Kb(cd),mh=Qe(cd),kh={"-":"",_:" ","0":"0"},Ub={a:function(a){return lf[a.getDay()]},A:function(a){return kf[a.getDay()]},b:function(a){return cd[a.getMonth()]},B:function(a){return bd[a.getMonth()]},c:m.time.format("%a %b %e %X %Y"),d:function(a,
c){return ma(a.getDate(),c,2)},e:function(a,c){return ma(a.getDate(),c,2)},H:function(a,c){return ma(a.getHours(),c,2)},I:function(a,c){return ma(a.getHours()%12||12,c,2)},j:function(a,c){return ma(1+m.time.dayOfYear(a),c,3)},L:function(a,c){return ma(a.getMilliseconds(),c,3)},m:function(a,c){return ma(a.getMonth()+1,c,2)},M:function(a,c){return ma(a.getMinutes(),c,2)},p:function(a){return 12<=a.getHours()?"PM":"AM"},S:function(a,c){return ma(a.getSeconds(),c,2)},U:function(a,c){return ma(m.time.sundayOfYear(a),
c,2)},w:function(a){return a.getDay()},W:function(a,c){return ma(m.time.mondayOfYear(a),c,2)},x:m.time.format("%m/%d/%Y"),X:m.time.format("%H:%M:%S"),y:function(a,c){return ma(a.getFullYear()%100,c,2)},Y:function(a,c){return ma(a.getFullYear()%1E4,c,4)},Z:function(a){var c=a.getTimezoneOffset();a=0<c?"-":"+";var d=~~(Math.abs(c)/60),c=Math.abs(c)%60;return a+ma(d,"0",2)+ma(c,"0",2)},"%":function(){return"%"}},Ig={a:function(a,c,d){nf.lastIndex=0;return(a=nf.exec(c.substring(d)))?d+a[0].length:-1},
A:function(a,c,d){mf.lastIndex=0;return(a=mf.exec(c.substring(d)))?d+a[0].length:-1},b:function(a,c,d){pf.lastIndex=0;return(c=pf.exec(c.substring(d)))?(a.m=mh.get(c[0].toLowerCase()),d+c[0].length):-1},B:function(a,c,d){of.lastIndex=0;return(c=of.exec(c.substring(d)))?(a.m=lh.get(c[0].toLowerCase()),d+c[0].length):-1},c:function(a,c,d){return Jb(a,""+Ub.c,c,d)},d:Re,e:Re,H:Se,I:Se,L:function(a,c,d){ia.lastIndex=0;return(c=ia.exec(c.substring(d,d+3)))?(a.L=+c[0],d+c[0].length):-1},m:function(a,c,
d){ia.lastIndex=0;return(c=ia.exec(c.substring(d,d+2)))?(a.m=c[0]-1,d+c[0].length):-1},M:function(a,c,d){ia.lastIndex=0;return(c=ia.exec(c.substring(d,d+2)))?(a.M=+c[0],d+c[0].length):-1},p:function(a,c,d){c=nh.get(c.substring(d,d+=2).toLowerCase());return null==c?-1:(a.p=c,d)},S:function(a,c,d){ia.lastIndex=0;return(c=ia.exec(c.substring(d,d+2)))?(a.S=+c[0],d+c[0].length):-1},x:function(a,c,d){return Jb(a,""+Ub.x,c,d)},X:function(a,c,d){return Jb(a,""+Ub.X,c,d)},y:function(a,c,d){ia.lastIndex=0;
return(c=ia.exec(c.substring(d,d+2)))?(a.y=+c[0]+(68<+c[0]?1900:2E3),d+c[0].length):-1},Y:function(a,c,d){ia.lastIndex=0;return(c=ia.exec(c.substring(d,d+4)))?(a.y=+c[0],d+c[0].length):-1}},ia=/^\s*\d+/,nh=m.map({am:0,pm:1});m.time.format.utc=function(a){function c(a){try{ha=Ka;var e=new ha;return e._=a,d(e)}finally{ha=Date}}var d=m.time.format(a);return c.parse=function(a){try{ha=Ka;var c=d.parse(a);return c&&c._}finally{ha=Date}},c.toString=d.toString,c};var qf=m.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");
m.time.format.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Rc:qf;Rc.parse=function(a){a=new Date(a);return isNaN(a)?null:a};Rc.toString=qf.toString;m.time.second=La(function(a){return new ha(1E3*Math.floor(a/1E3))},function(a,c){a.setTime(a.getTime()+1E3*Math.floor(c))},function(a){return a.getSeconds()});m.time.seconds=m.time.second.range;m.time.seconds.utc=m.time.second.utc.range;m.time.minute=La(function(a){return new ha(6E4*Math.floor(a/6E4))},function(a,c){a.setTime(a.getTime()+
6E4*Math.floor(c))},function(a){return a.getMinutes()});m.time.minutes=m.time.minute.range;m.time.minutes.utc=m.time.minute.utc.range;m.time.hour=La(function(a){var c=a.getTimezoneOffset()/60;return new ha(36E5*(Math.floor(a/36E5-c)+c))},function(a,c){a.setTime(a.getTime()+36E5*Math.floor(c))},function(a){return a.getHours()});m.time.hours=m.time.hour.range;m.time.hours.utc=m.time.hour.utc.range;m.time.month=La(function(a){return a=m.time.day(a),a.setDate(1),a},function(a,c){a.setMonth(a.getMonth()+
c)},function(a){return a.getMonth()});m.time.months=m.time.month.range;m.time.months.utc=m.time.month.utc.range;var Lb=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],dd=[[m.time.second,1],[m.time.second,5],[m.time.second,15],[m.time.second,30],[m.time.minute,1],[m.time.minute,5],[m.time.minute,15],[m.time.minute,30],[m.time.hour,1],[m.time.hour,3],[m.time.hour,6],[m.time.hour,12],[m.time.day,1],[m.time.day,2],[m.time.week,1],[m.time.month,1],[m.time.month,
3],[m.time.year,1]],oh=[[m.time.format("%Y"),$a],[m.time.format("%B"),function(a){return a.getMonth()}],[m.time.format("%b %d"),function(a){return 1!=a.getDate()}],[m.time.format("%a %d"),function(a){return a.getDay()&&1!=a.getDate()}],[m.time.format("%I %p"),function(a){return a.getHours()}],[m.time.format("%I:%M"),function(a){return a.getMinutes()}],[m.time.format(":%S"),function(a){return a.getSeconds()}],[m.time.format(".%L"),function(a){return a.getMilliseconds()}]],rf=m.scale.linear(),ph=Te(oh);
dd.year=function(a,c){return rf.domain(a.map(Jg)).ticks(c).map(Uc)};m.time.scale=function(){return Sc(m.scale.linear(),dd,ph)};var sf=dd.map(function(a){return[a[0].utc,a[1]]}),qh=[[m.time.format.utc("%Y"),$a],[m.time.format.utc("%B"),function(a){return a.getUTCMonth()}],[m.time.format.utc("%b %d"),function(a){return 1!=a.getUTCDate()}],[m.time.format.utc("%a %d"),function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],[m.time.format.utc("%I %p"),function(a){return a.getUTCHours()}],[m.time.format.utc("%I:%M"),
function(a){return a.getUTCMinutes()}],[m.time.format.utc(":%S"),function(a){return a.getUTCSeconds()}],[m.time.format.utc(".%L"),function(a){return a.getUTCMilliseconds()}]],rh=Te(qh);return sf.year=function(a,c){return rf.domain(a.map(Kg)).ticks(c).map(Vc)},m.time.scale.utc=function(){return Sc(m.scale.linear(),sf,rh)},m.text=function(){return m.xhr.apply(m,arguments).response(Lg)},m.json=function(a,c){return m.xhr(a,"application/json",c).response(Mg)},m.html=function(a,c){return m.xhr(a,"text/html",
c).response(Ng)},m.xml=function(){return m.xhr.apply(m,arguments).response(Og)},m}();var w=$("#test-nav").width(),h=800,i=0,barHeight=20,barWidth=0.8*w,duration=400,root,tree=d3.layout.tree().size([h,100]),diagonal=d3.svg.diagonal().projection(function(e){return[e.y,e.x]});
function updateNav(e){var l=tree.nodes(root);l.forEach(function(a,c){a.x=c*barHeight});var f=vis.selectAll("g.node").data(l,function(a){return a.id||(a.id=++i)}),c=f.enter().append("svg:g").attr("class","node").attr("transform",function(a){return"translate("+e.y0+","+e.x0+")"}).style("opacity",1E-6);c.append("svg:rect").attr("y",-barHeight/2).attr("height",barHeight).attr("width",barWidth).style("fill",color).on("click",click);c.append("svg:text").attr("dy",3.5).attr("dx",5.5).text(function(a){return a.name});
c.transition().duration(duration).attr("transform",function(a){return"translate("+a.y+","+a.x+")"}).style("opacity",1);f.transition().duration(duration).attr("transform",function(a){return"translate("+a.y+","+a.x+")"}).style("opacity",1).select("rect").style("fill",color);f.exit().transition().duration(duration).attr("transform",function(a){return"translate("+e.y+","+e.x+")"}).style("opacity",1E-6).remove();l.forEach(function(a){a.x0=a.x;a.y0=a.y})}
function click(e){e.children?(e._children=e.children,e.children=null):(e.children=e._children,e._children=null);updateNav(e)}function color(e){return e._children?"#3182bd":e.children?"#c6dbef":"#fd8d3c"}var isOdd=function(e){return 0==e%2?!1:!0};
function updateEvents(){$.getJSON("/dashboard/",function(e){$.each(e,function(l){var f=parseInt($(".event-id").eq(1).text());parseInt(e[l].pk)>f&&($("tr").eq(0).after('<tr><td class="event-id">'+e[l].pk+'</td><td class="name">'+e[l].fields.signal+'</td><td class="time">'+e[l].fields.time+"</td></tr>"),$("tr").eq(1).effect("highlight",{color:"#ff6600"},3E5))})})}function autoUpdateEvents(){setInterval(updateEvents,2E3)}$("#masonry-container").masonry({itemSelector:".mbox",columnWidth:384});
$(function(){$(".column").each(function(e){var l=this;$(l).sortable({connectWith:".column",handle:".portlet-header",update:function(e,c){$.cookie("sortorder"+l.id,$(l).sortable("toArray").join(),{path:"/"})}})});$(".portlet").addClass("ui-widget ui-widget-content ui-helper-clearfix ui-corner-all").find(".portlet-header").addClass("ui-widget-header ui-corner-all").prepend("<span class='ui-icon ui-icon-minusthick'></span>").end().find(".portlet-content");$(".portlet-header .ui-icon").click(function(){$(this).toggleClass("ui-icon-minusthick").toggleClass("ui-icon-plusthick");
$(this).parents(".portlet:first").find(".portlet-content").toggle($.cookie($(this).parents(".portlet:first")[0].id,$(this).parents(".portlet:first").find(".portlet-content").is(":hidden")?"expanded":"collapsed",{path:"/"}))})});
function loadCookie(){$(".column").each(function(e){e=$.cookie("sortorder"+this.id);var l=this;e&&$(e.split(",")).each(function(e,c){$("#"+c).appendTo(l)});$(this).sortable("options")});$(".portlet").each(function(e){if((e=$.cookie(this.id))&&"collapsed"===e)$(this).find(".ui-icon").toggleClass("ui-icon-minusthick").toggleClass("ui-icon-plusthick"),$(this).find(".portlet-content").hide()});"true"===$.cookie("shotTracking")?turnOnShotTracker():turnOffShotTracker()}
function plotSignal2D(){var e=$("#dummy");$.getJSON(window.location.search+(window.location.search.length?"&":"?")+"format=json",function(l){var f=document.createElement("canvas");f.width=l.dim[0].length;f.height=l.dim[1].length;e.height(f.height);for(var c=f.getContext("2d"),a=c.getImageData(0,0,f.width,f.height),g=0;g<a.width;g++)for(var d=0;d<a.height;d++){var v=4*(d*a.width+g),t=255*(l.data[g][d]-l.min)/(l.max-l.min);a.data[v]=t;a.data[v+1]=t;a.data[v+2]=t;a.data[v+3]=255}c.putImageData(a,0,0);
e.append(f)})}function getPlotWidth(e){return{plot:$(e).width()-30-0,marginLeft:30,marginRight:0}}function fillPlot(e){var l=Array(2*e.dim.length);for(i=0;i<e.dim.length;i++)l[i]=[e.dim[i],e.data[0][i]],l[e.dim.length+i]=[e.dim[e.dim.length-(i+1)],e.data[1][e.dim.length-(i+1)]];return l}function isMinMaxPlot(e){return-1<$.inArray("min",e.labels)&&-1<$.inArray("max",e.labels)&&2==e.labels.length?!0:!1}
function H1DSUri(e){this.uri_components=parseUri(e);this.h1ds_filters={};this.non_h1ds_query={};e=/^f(\d+)(_(\w+))?/;for(var l in this.uri_components.queryKey)if(this.uri_components.queryKey.hasOwnProperty(l)){var f=e.exec(l);f?(this.h1ds_filters.hasOwnProperty(f[1])||(this.h1ds_filters[f[1]]={name:"",kwargs:{}}),"undefined"===typeof f[2]?this.h1ds_filters[f[1]].name=this.uri_components.queryKey[l]:this.h1ds_filters[f[1]].kwargs[f[3]]=this.uri_components.queryKey[l]):this.non_h1ds_query[l]=this.uri_components.queryKey[l]}}
H1DSUri.prototype.getNextFilterID=function(){var e=-1,l;for(l in this.h1ds_filters)this.h1ds_filters.hasOwnProperty(l)&&Number(l)>e&&(e=Number(l));return e+1};H1DSUri.prototype.appendFilter=function(e,l){var f=this.getNextFilterID();this.h1ds_filters[String(f)]={name:e,kwargs:l}};
H1DSUri.prototype.renderUri=function(){var e={},l;for(l in this.non_h1ds_query)this.non_h1ds_query.hasOwnProperty(l)&&(e[l]=this.non_h1ds_query[l]);for(l in this.h1ds_filters)if(this.h1ds_filters.hasOwnProperty(l)){e["f"+l]=this.h1ds_filters[l].name;for(var f in this.h1ds_filters[l].kwargs)e["f"+l+"_"+f]=this.h1ds_filters[l].kwargs[f]}l=jQuery.extend({},this.uri_components);l.queryKey=e;return makeUri(l)};H1DSUri.prototype.isBinary=function(){return"bin"===this.non_h1ds_query.format};
function getSpectrogramUri(e){e=new H1DSUri(e);e.appendFilter("slanted_baseline",{window:10});e.appendFilter("spectrogram",{bin_size:-1});e.appendFilter("norm_dim_range_2d",{x_min:0,x_max:1,y_min:0,y_max:0.5});e.appendFilter("y_axis_energy_limit",{threshold:0.995});e.non_h1ds_query.format="bin";e.non_h1ds_query.bin_assert_dtype="uint8";return e}
function getPowerspectrumUri(e,l){var f=new H1DSUri(e);f.appendFilter("slanted_baseline",{window:10});f.appendFilter("power_spectrum",{});f.appendFilter("norm_dim_range",{min:0,max:0.5});f.appendFilter("resample_minmax",{n_bins:l});f.non_h1ds_query.format="json";return f}function getRawUri(e,l){var f=new H1DSUri(e);f.appendFilter("resample_minmax",{n_bins:l});f.non_h1ds_query.format="json";return f}
function NewPlotContainer(e,l,f){this.id=e;this.plotSpacing=5;this._plotTypes={main:{height:400},overview:{height:200}};this.plotTypes={raw:this.plotLine,spectrogram:this.plotSpectrogram,powerspectrum:this.plotLine,raw2d:this.plotSpectrogram};this.svg=d3.select(e).append("svg:svg").attr("width",$(e).width());this.data_colours="#A11D20 #662C91 #1859A9 #008C47 #ED2D2E #010101".split(" ");this.plotGrid=this.setPlotGrid(l,f);this.url_cache={};this.data_ids={};this.dataPadding=0.05;this.xAxisPadding=40;
this.yAxisPadding=60}
NewPlotContainer.prototype.plotLine=function(e){var l=e.datum().plot.flip;e.append("path").classed("path-filled",function(e){return e.data.is_minmax}).style("stroke",function(e,c){return e.data.colour}).style("fill",function(e,c){return e.data.colour}).attr("d",function(e,c){if(e.data.is_minmax){var a=fillPlot(e.data),g=d3.svg.line().x(function(a){return e.plot.x(a[l?1:0])}).y(function(a){return e.plot.y(a[l?0:1])});return g(a)}g=d3.svg.line().x(function(a,c){return e.plot.x(l?a:e.data.dim[c])}).y(function(a,
c){return e.plot.y(l?e.data.dim[c]:a)});return g(e.data.data)})};NewPlotContainer.prototype.plotRaw2D=function(e){};
NewPlotContainer.prototype.plotSpectrogram=function(e){var l=[];d3.scale.linear().domain([0,1]).range(["blue","red"]);d3.scale.linear().domain([0,1]).range([0,1]);var f=0;data=e.datum();for(var c=data.plot.x(data.data.dim[0][1])-data.plot.x(data.data.dim[0][0]),a=data.plot.y(data.data.dim[1][0])-data.plot.y(data.data.dim[1][1]),g=data.plot.x(data.data.dim[0][0]),d=data.plot.y(data.data.dim[1][0]),v=0;v<data.data.dim[0].length-1;v++)for(var t=0;t<data.data.dim[1].length-1;t++)0<data.data.data[v][t]&&
(l.push({xi:v,yi:t}),data.data.data[v][t]>f&&(f=data.data.data[v][t]));e.selectAll("rect").data(l).enter().append("rect").attr("x",function(a,d){return g+a.xi*c}).attr("y",function(c,e){return d-c.yi*a}).attr("width",c).attr("height",a).style("fill",function(a,c){return data.data.colour}).style("fill-opacity",function(a,c){return data.data.data[a.xi][a.yi]/f})};NewPlotContainer.prototype.plotPowerSpectrum=function(e){};
NewPlotContainer.prototype.setPlot=function(e,l,f){for(var c in l)this.plotGrid[e][c]=l[c];"undefined"!==typeof f&&f&&this.updateDisplay()};
NewPlotContainer.prototype.setPlotGrid=function(e,l){for(var f=d3.sum(l),c=[],a=this.svg.attr("width"),g=0;g<l.length;g++)c[g]=a*l[g]/f;for(var f=[],d=g=a=0,v=0;v<e.length;v++){for(var t=d=0;t<c.length;t++)f[a]={translate:[d,g],width:c[t],height:e[v],data_ids:[],data:[],plotType:"",flip:!1,bindAxis:[-1,-1]},d+=c[t],a++;g+=e[v]}this.svg.attr("height",g);$(this.id).height(g);return f};NewPlotContainer.prototype.addData=function(e,l){this.data_ids[e]={uri:l,colour:this.data_colours.pop()}};
NewPlotContainer.prototype.addDataToPlot=function(e,l,f){f="undefined"!==typeof f?f:!0;this.plotGrid[l].data_ids.push(e);f&&this.updateDisplay()};ProcessH1DSHeaders=function(e){e=e.split("\n");for(var l={},f=0;f<e.length;f++){var c=e[f].split(":");2===c.length&&c[0].match("^X-H1DS")&&(l[c[0]]=$.trim(c[1]))}return l};
ProcessBinaryData=function(e,l){for(var f=new Uint8Array(str2ab(e)),c=parseInt(l["X-H1DS-ndim"]),a=0,g={data:[],dim:[],n_dim:c},d=0;d<c;d++){g.dim[d]=[];for(var v=parseInt(l["X-H1DS-dim-"+d+"-length"]),t=parseFloat(l["X-H1DS-dim-"+d+"-delta"]),p=parseFloat(l["X-H1DS-dim-"+d+"-first"]),E=0;E<v;E++)g.dim[d][E]=t*E+p}d=parseFloat(l["X-H1DS-data-delta"]);v=parseFloat(l["X-H1DS-data-min"]);if(0<c){t=parseInt(l["X-H1DS-dim-0-length"]);parseFloat(l["X-H1DS-dim-0-delta"]);parseFloat(l["X-H1DS-dim-0-first"]);
for(p=0;p<t;p++)if(1<c){g.data[p]=[];E=parseInt(l["X-H1DS-dim-1-length"]);parseFloat(l["X-H1DS-dim-1-delta"]);parseFloat(l["X-H1DS-dim-1-first"]);for(var s=0;s<E;s++)if(2<c){g.data[p][s]=[];var I=parseInt(l["X-H2DS-dim-2-length"]);parseFloat(l["X-H1DS-dim-2-delta"]);parseFloat(l["X-H1DS-dim-2-first"]);for(var u=0;u<I;u++)g.data[p][s][u]=d*f[a]+v,a++}else g.data[p][s]=f[a],a++}else g.data[p]=d*f[a]+v,a++}return g};function ab2str(e){return String.fromCharCode.apply(null,new Uint8Array(e))}
function str2ab(e){for(var l=new ArrayBuffer(e.length),f=new Uint8Array(l),c=0,a=e.length;c<a;c++)f[c]=e.charCodeAt(c);return l}NewPlotContainer.prototype.loadURL=function(e,l){var f=this;if(l){var c=$.ajax({url:e,async:!1}),a=ProcessH1DSHeaders(c.getAllResponseHeaders());c.done(function(c){data=ProcessBinaryData(c,a);f.url_cache[e]=data})}else $.ajax({url:e,dataType:"json",async:!1}).done(function(a){a.is_minmax=isMinMaxPlot(a);a.n_dim=2===a.dim.length?2:1;f.url_cache[e]=a})};
NewPlotContainer.prototype.getData=function(e,l){var f={};switch(l){case "raw":var f=getRawUri(this.data_ids[e].uri,this.svg.attr("width")),c=f.renderUri();this.loadURL(c,f.isBinary());f=this.url_cache[c];break;case "spectrogram":f=getSpectrogramUri(this.data_ids[e].uri);c=f.renderUri();this.loadURL(c,f.isBinary());f=this.url_cache[c];break;case "powerspectrum":f=getPowerspectrumUri(this.data_ids[e].uri,this.svg.attr("width"));c=f.renderUri();this.loadURL(c,f.isBinary());f=this.url_cache[c];break;
default:this.loadURL(this.data_ids[e].uri,!1),f=this.url_cache[this.data_ids[e].uri]}return f};
NewPlotContainer.prototype.updateDisplay=function(){for(var e=this,l=0;l<this.plotGrid.length;l++){for(var f=0;f<this.plotGrid[l].data_ids.length;f++)this.plotGrid[l].data[f]=this.getData(this.plotGrid[l].data_ids[f],this.plotGrid[l].plotType),this.plotGrid[l].data[f].colour=e.data_ids[this.plotGrid[l].data_ids[f]].colour;0<this.plotGrid[l].data_ids.length&&this.updatePlot(l)}for(l=0;l<this.plotGrid.length;l++)0<this.plotGrid[l].data_ids.length&&this.linkAxes(l);l=this.svg.selectAll("g.plot").data(this.plotGrid);
l.enter().append("g").attr("class","plot").attr("transform",function(c){return"translate("+c.translate[0]+","+c.translate[1]+")"}).append("clipPath").attr("id",function(c,a){return"plot-"+a+"-clippath"}).append("svg:rect").attr("width",function(c,a){return c.width}).attr("height",function(c,a){return c.height});l.exit().remove();l.append("g").attr("class","axis x").attr("id",function(c,a){return"plot-"+a+"-axis-x"}).attr("transform",function(c){return"translate(0,"+(c.height-e.xAxisPadding)+")"}).each(function(c){"undefined"!==
typeof c.xAxis?d3.select(this).call(c.xAxis):function(){}}).append("text").attr("text-anchor","middle").attr("x",function(c){return e.yAxisPadding+0.5*(c.width-e.yAxisPadding)}).attr("y",function(c){return 0.8*e.xAxisPadding}).text(function(c){return"x"});l.append("g").attr("class","axis y").attr("id",function(c,a){return"plot-"+a+"-axis-y"}).attr("transform",function(c){return"translate("+e.yAxisPadding+",0)"}).each(function(c){"undefined"!==typeof c.yAxis?d3.select(this).call(c.yAxis):function(){}}).append("text").attr("text-anchor",
"middle").attr("transform","rotate(-90)").attr("x",function(c){return-0.5*(c.height-e.xAxisPadding)}).attr("y",function(c){return-0.8*e.yAxisPadding}).text(function(c){return"y"});l=l.selectAll("g.data").data(function(c,a){for(var e=[],d=0;d<c.data.length;d++)e[d]={data:c.data[d],plot:c,plotid:a};return e});l.enter().append("g").attr("class","data").attr("clip-path",function(c,a){return"url(#plot-"+a+"-clippath)"}).each(function(c,a){d3.select(this).call(e.plotTypes[c.plot.plotType])});l.exit().remove()};
NewPlotContainer.prototype.linkAxes=function(e){var l=0<=this.plotGrid[e].bindAxis[0]&&this.plotGrid[e].bindAxis[0]!==e?this.plotGrid[e].bindAxis[0]:e,f=0<=this.plotGrid[e].bindAxis[1]&&this.plotGrid[e].bindAxis[1]!==e?this.plotGrid[e].bindAxis[1]:e;l!==e&&this.plotGrid[e].x.domain(this.plotGrid[l].x.domain());f!==e&&this.plotGrid[e].y.domain(this.plotGrid[f].y.domain())};
NewPlotContainer.prototype.updatePlot=function(e){var l=this.plotGrid[e].flip,f=[this.yAxisPadding,this.plotGrid[e].width],c=[this.plotGrid[e].height-this.xAxisPadding,0],a=[d3.min(this.plotGrid[e].data,function(a,c){return 1===a.n_dim?d3.min(a.dim):d3.min(a.dim[0])}),d3.max(this.plotGrid[e].data,function(a,c){return 1===a.n_dim?d3.max(a.dim):d3.max(a.dim[0])})],a=d3.scale.linear().range(l?c:f).domain(a);this.plotGrid[e].flip?this.plotGrid[e].y=a:this.plotGrid[e].x=a;var a=[d3.min(this.plotGrid[e].data,
function(a,c){return 1===a.n_dim?a.is_minmax?d3.min(a.data[0]):d3.min(a.data):d3.min(a.dim[1])}),d3.max(this.plotGrid[e].data,function(a,c){return 1===a.n_dim?a.is_minmax?d3.max(a.data[1]):d3.max(a.data):d3.max(a.dim[1])})],g=a[1]-a[0],l=d3.scale.linear().range(l?f:c).domain([a[0]-this.dataPadding*g,a[1]+this.dataPadding*g]);this.plotGrid[e].flip?this.plotGrid[e].x=l:this.plotGrid[e].y=l;this.plotGrid[e].xAxis=d3.svg.axis().scale(this.plotGrid[e].x).orient("bottom").tickSize(1===this.plotGrid[e].data[0].n_dim?
this.plotGrid[e].y.range()[1]-this.plotGrid[e].y.range()[0]:5);this.plotGrid[e].yAxis=d3.svg.axis().scale(this.plotGrid[e].y).orient("left").tickSize(1===this.plotGrid[e].data[0].n_dim?this.plotGrid[e].x.range()[0]-this.plotGrid[e].x.range()[1]:5)};function getLastShotInDisplayedPage(){var e=-1;d3.selectAll("table.main-table tr").each(function(l,f){if(0<f){var c=Number(d3.select(this).select("td").text());c>e&&(e=c)}});return e}
function summaryUpdateRequired(e){$.ajax({url:"/summary/_/get_last_update_time/",dataType:"json",async:!1}).done(function(e){latest_summdb_update=new Date(e.last_update)});return latest_summdb_update>e}
function updateSummaryDB(){var e=getLastShotInDisplayedPage(),l=-1;$.ajax({url:"/summary/_/get_latest_summarydb_shot/",dataType:"json",async:!1}).done(function(e){l=Number(e.latest_shot)});l>e&&$.ajax({url:window.location.toString()+(window.location.search+(window.location.search.length?"&":"?")+"format=json"),dataType:"json",async:!1}).done(function(e){})}
function cross(e){var l=[],f,c;for(f=0;f<e.data.length;f++){l[f]=[];l[f].shot;for(c=0;c<e.attributes.length;c++)l[f][c]={shot:e.data[f].shot,attr:e.attributes[c],value:e.data[f].d[c]}}return l}$("span.toggleVertical").each(function(){"true"===$.cookie("vertical-"+$(this).text())&&($(this).toggleClass("verticalText"),$(this).html($(this).text().replace(/(.)/g,"$1<br />")))});
$("span.toggleVertical").click(function(){$(this).toggleClass("verticalText");$(this).hasClass("verticalText")?($(this).html($(this).text().replace(/(.)/g,"$1<br />")),$.cookie("vertical-"+$(this).text(),!0)):($(this).html($(this).text().replace("$1<br />","")),$.cookie("vertical-"+$(this).text(),!1))});
function autoPollSummaryDB(){var e=d3.select("#poll-summarydb-server");if(null!==e[0][0]&&"True"===e.text()){var l=null,f=window.location.toString()+(window.location.search+(window.location.search.length?"&":"?")+"format=json"),c=d3.select("table.main-table tbody"),a=function(a){$.ajax({url:f,dataType:"json",async:!1}).done(function(d){l=new Date(d.timestamp);d=c.selectAll("tr").data(cross(d),function(a){return a[0].shot});d.enter().insert("tr","tr").style("background-color","yellow");var e=d.selectAll("td").data(function(a){return a});
e.enter().append("td").html(function(a,c){return'<a href="/summary/_/go_to_source/'+a.attr+"/"+a.shot+'/" >'+a.value+"</a>"});e.transition().duration(500).each(function(a){d3.select(this).html(function(a,c){return'<a href="/summary/_/go_to_source/'+a.attr+"/"+a.shot+'/" >'+a.value+"</a>"})});d.transition().duration(a).style("background-color","white");d.exit().remove()})};a(1E3);setInterval(function(){summaryUpdateRequired(l)&&a(3E5)},2E3)}}var shot_stream_client=new XMLHttpRequest;
function turnOffShotTracker(){$("#h1ds-track-latest-shot").hide();$("#h1ds-shot-controller").show();$("#h1ds-toggle-track-latest-shot").html('<FORM class="inline-form right" action="javascript:toggleTrackLatestShot()" method="post"><INPUT type="submit" id="h1ds-toggletrack-shot" name="h1ds-toggletrack-shot" value="track latest shot"></FORM>');$.cookie("shotTracking","false",{path:"/"});shot_stream_client.abort()}
function turnOnShotTracker(){$("#h1ds-shot-controller").hide();$("#h1ds-track-latest-shot").show();$("#h1ds-toggletrack-latest-shot").html('<FORM class="inline-form right" action="javascript:toggleTrackLatestShot()" method="post"><INPUT type="submit" id="h1ds-toggletrack-shot" name="h1ds-toggletrack-shot" value="stop tracking latest shot"></FORM>');$.cookie("shotTracking","true",{path:"/"});shot_stream_client.open("get","/_/shot_stream/");shot_stream_client.send();shot_stream_client.onprogress=function(){var e=
this.responseText.split("\n");$.getJSON("/_/url_for_shot",{input_path:window.location.toString(),shot:e[e.length-2]},function(e){window.location=e.new_url})}}function toggleTrackLatestShot(){"true"===$.cookie("shotTracking")?turnOffShotTracker():turnOnShotTracker();return!1}function plotScalar(e,l){return 0}
function plot1DimArray(e,l){var f=new NewPlotContainer("#"+e,[300,250],[0.75,0.25]);f.addData("default",l);f.setPlot(2,{plotType:"spectrogram"});f.addDataToPlot("default",2,!1);f.setPlot(0,{plotType:"raw",bindAxis:[2,-1]});f.addDataToPlot("default",0,!1);f.setPlot(3,{plotType:"powerspectrum",flip:!0,bindAxis:[-1,2]});f.addDataToPlot("default",3,!0)}
function plot2DimArray(e,l){var f=new NewPlotContainer("#"+e,[500],[1]);f.addData("default",l);f.setPlot(0,{plotType:"raw2d"});f.addDataToPlot("default",0,!0)}function getPlotFunction(e,l){switch(l){case "0":return plotScalar;case "1":return plot1DimArray;case "2":return plot2DimArray}}
function populatePagelet(e){var l=e.attr("data-pagelet-url");"undefined"===typeof l&&(l=window.location.toString());l=new H1DSUri(l);l.non_h1ds_query.format="json";var l=l.renderUri(),f=e.attr("data-dtype"),c=e.attr("data-ndim");getPlotFunction(f,c)(e.attr("id"),l)}$.fn.scrollView=function(){return this.each(function(){$("html, body").animate({scrollTop:$(this).offset().top},100)})};$(document).ready(function(){$("#main").scrollView();autoPollSummaryDB();loadCookie();$(".h1ds-pagelet").each(function(){populatePagelet($(this))})});
